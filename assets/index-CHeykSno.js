var I9=Object.defineProperty;var XE=t=>{throw TypeError(t)};var D9=(t,e,n)=>e in t?I9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var fe=(t,e,n)=>D9(t,typeof e!="symbol"?e+"":e,n),Ob=(t,e,n)=>e.has(t)||XE("Cannot "+n);var A=(t,e,n)=>(Ob(t,e,"read from private field"),n?n.call(t):e.get(t)),Ie=(t,e,n)=>e.has(t)?XE("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Q=(t,e,n,i)=>(Ob(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n),Ct=(t,e,n)=>(Ob(t,e,"access private method"),n);function L9(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var j9=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Lc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var dR={exports:{}},iy={},fR={exports:{}},rt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ap=Symbol.for("react.element"),$9=Symbol.for("react.portal"),F9=Symbol.for("react.fragment"),B9=Symbol.for("react.strict_mode"),z9=Symbol.for("react.profiler"),U9=Symbol.for("react.provider"),V9=Symbol.for("react.context"),H9=Symbol.for("react.forward_ref"),W9=Symbol.for("react.suspense"),G9=Symbol.for("react.memo"),K9=Symbol.for("react.lazy"),JE=Symbol.iterator;function q9(t){return t===null||typeof t!="object"?null:(t=JE&&t[JE]||t["@@iterator"],typeof t=="function"?t:null)}var hR={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},pR=Object.assign,mR={};function Dd(t,e,n){this.props=t,this.context=e,this.refs=mR,this.updater=n||hR}Dd.prototype.isReactComponent={};Dd.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Dd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function gR(){}gR.prototype=Dd.prototype;function xk(t,e,n){this.props=t,this.context=e,this.refs=mR,this.updater=n||hR}var Sk=xk.prototype=new gR;Sk.constructor=xk;pR(Sk,Dd.prototype);Sk.isPureReactComponent=!0;var ZE=Array.isArray,vR=Object.prototype.hasOwnProperty,kk={current:null},yR={key:!0,ref:!0,__self:!0,__source:!0};function bR(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)vR.call(e,i)&&!yR.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:Ap,type:t,key:s,ref:o,props:r,_owner:kk.current}}function Y9(t,e){return{$$typeof:Ap,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function _k(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ap}function X9(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var QE=/\/+/g;function Ib(t,e){return typeof t=="object"&&t!==null&&t.key!=null?X9(""+t.key):e.toString(36)}function Rg(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ap:case $9:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+Ib(o,0):i,ZE(r)?(n="",t!=null&&(n=t.replace(QE,"$&/")+"/"),Rg(r,e,n,"",function(c){return c})):r!=null&&(_k(r)&&(r=Y9(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(QE,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",ZE(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+Ib(s,a);o+=Rg(s,e,n,l,r)}else if(l=q9(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+Ib(s,a++),o+=Rg(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function sm(t,e,n){if(t==null)return t;var i=[],r=0;return Rg(t,i,"","",function(s){return e.call(n,s,r++)}),i}function J9(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var wi={current:null},Og={transition:null},Z9={ReactCurrentDispatcher:wi,ReactCurrentBatchConfig:Og,ReactCurrentOwner:kk};function wR(){throw Error("act(...) is not supported in production builds of React.")}rt.Children={map:sm,forEach:function(t,e,n){sm(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return sm(t,function(){e++}),e},toArray:function(t){return sm(t,function(e){return e})||[]},only:function(t){if(!_k(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};rt.Component=Dd;rt.Fragment=F9;rt.Profiler=z9;rt.PureComponent=xk;rt.StrictMode=B9;rt.Suspense=W9;rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z9;rt.act=wR;rt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=pR({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=kk.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)vR.call(e,l)&&!yR.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:Ap,type:t.type,key:r,ref:s,props:i,_owner:o}};rt.createContext=function(t){return t={$$typeof:V9,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:U9,_context:t},t.Consumer=t};rt.createElement=bR;rt.createFactory=function(t){var e=bR.bind(null,t);return e.type=t,e};rt.createRef=function(){return{current:null}};rt.forwardRef=function(t){return{$$typeof:H9,render:t}};rt.isValidElement=_k;rt.lazy=function(t){return{$$typeof:K9,_payload:{_status:-1,_result:t},_init:J9}};rt.memo=function(t,e){return{$$typeof:G9,type:t,compare:e===void 0?null:e}};rt.startTransition=function(t){var e=Og.transition;Og.transition={};try{t()}finally{Og.transition=e}};rt.unstable_act=wR;rt.useCallback=function(t,e){return wi.current.useCallback(t,e)};rt.useContext=function(t){return wi.current.useContext(t)};rt.useDebugValue=function(){};rt.useDeferredValue=function(t){return wi.current.useDeferredValue(t)};rt.useEffect=function(t,e){return wi.current.useEffect(t,e)};rt.useId=function(){return wi.current.useId()};rt.useImperativeHandle=function(t,e,n){return wi.current.useImperativeHandle(t,e,n)};rt.useInsertionEffect=function(t,e){return wi.current.useInsertionEffect(t,e)};rt.useLayoutEffect=function(t,e){return wi.current.useLayoutEffect(t,e)};rt.useMemo=function(t,e){return wi.current.useMemo(t,e)};rt.useReducer=function(t,e,n){return wi.current.useReducer(t,e,n)};rt.useRef=function(t){return wi.current.useRef(t)};rt.useState=function(t){return wi.current.useState(t)};rt.useSyncExternalStore=function(t,e,n){return wi.current.useSyncExternalStore(t,e,n)};rt.useTransition=function(){return wi.current.useTransition()};rt.version="18.3.1";fR.exports=rt;var x=fR.exports;const Dt=Lc(x),ry=L9({__proto__:null,default:Dt},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q9=x,e7=Symbol.for("react.element"),t7=Symbol.for("react.fragment"),n7=Object.prototype.hasOwnProperty,i7=Q9.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r7={key:!0,ref:!0,__self:!0,__source:!0};function xR(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)n7.call(e,i)&&!r7.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:e7,type:t,key:s,ref:o,props:r,_owner:i7.current}}iy.Fragment=t7;iy.jsx=xR;iy.jsxs=xR;dR.exports=iy;var h=dR.exports,G=typeof window<"u"?window:void 0,Ii=typeof globalThis<"u"?globalThis:G,SR=Array.prototype,eA=SR.forEach,tA=SR.indexOf,nr=Ii==null?void 0:Ii.navigator,Ce=Ii==null?void 0:Ii.document,Mi=Ii==null?void 0:Ii.location,H1=Ii==null?void 0:Ii.fetch,W1=Ii!=null&&Ii.XMLHttpRequest&&"withCredentials"in new Ii.XMLHttpRequest?Ii.XMLHttpRequest:void 0,nA=Ii==null?void 0:Ii.AbortController,Ni=nr==null?void 0:nr.userAgent,Ve=G??{},po={DEBUG:!1,LIB_VERSION:"1.256.2"},Db="$copy_autocapture",s7=["$snapshot","$pageview","$pageleave","$set","survey dismissed","survey sent","survey shown","$identify","$groupidentify","$create_alias","$$client_ingestion_warning","$web_experiment_applied","$feature_enrollment_update","$feature_flag_called"],Ao=function(t){return t.GZipJS="gzip-js",t.Base64="base64",t}({}),o7=["fatal","error","warning","log","info","debug"];function it(t,e){return t.indexOf(e)!==-1}var sy=function(t){return t.trim()},G1=function(t){return t.replace(/^\$/,"")},a7=Array.isArray,kR=Object.prototype,_R=kR.hasOwnProperty,oy=kR.toString,Ut=a7||function(t){return oy.call(t)==="[object Array]"},Tr=t=>typeof t=="function",en=t=>t===Object(t)&&!Ut(t),uu=t=>{if(en(t)){for(var e in t)if(_R.call(t,e))return!1;return!0}return!1},ge=t=>t===void 0,tn=t=>oy.call(t)=="[object String]",K1=t=>tn(t)&&t.trim().length===0,gl=t=>t===null,yt=t=>ge(t)||gl(t),ei=t=>oy.call(t)=="[object Number]",Bs=t=>oy.call(t)==="[object Boolean]",l7=t=>t instanceof FormData,c7=t=>it(s7,t),CR=t=>{var e={t:function(n){if(G&&(po.DEBUG||Ve.POSTHOG_DEBUG)&&!ge(G.console)&&G.console){for(var i=("__rrweb_original__"in G.console[n])?G.console[n].__rrweb_original__:G.console[n],r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];i(t,...s)}},info:function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];e.t("log",...i)},warn:function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];e.t("warn",...i)},error:function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];e.t("error",...i)},critical:function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];console.error(t,...i)},uninitializedWarning:n=>{e.error("You must initialize PostHog before calling "+n)},createLogger:n=>CR(t+" "+n)};return e},Ae=CR("[PostHog.js]"),Rn=Ae.createLogger,u7=Rn("[ExternalScriptsLoader]"),iA=(t,e,n)=>{if(t.config.disable_external_dependency_loading)return u7.warn(e+" was requested but loading of external scripts is disabled."),n("Loading of external scripts is disabled");var i=Ce==null?void 0:Ce.querySelectorAll("script");if(i){for(var r=0;r<i.length;r++)if(i[r].src===e)return n()}var s=()=>{if(!Ce)return n("document not found");var o=Ce.createElement("script");if(o.type="text/javascript",o.crossOrigin="anonymous",o.src=e,o.onload=c=>n(void 0,c),o.onerror=c=>n(c),t.config.prepare_external_dependency_script&&(o=t.config.prepare_external_dependency_script(o)),!o)return n("prepare_external_dependency_script returned null");var a,l=Ce.querySelectorAll("body > script");l.length>0?(a=l[0].parentNode)==null||a.insertBefore(o,l[0]):Ce.body.appendChild(o)};Ce!=null&&Ce.body?s():Ce==null||Ce.addEventListener("DOMContentLoaded",s)};function xe(){return xe=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},xe.apply(null,arguments)}function ER(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}Ve.__PosthogExtensions__=Ve.__PosthogExtensions__||{},Ve.__PosthogExtensions__.loadExternalDependency=(t,e,n)=>{var i="/static/"+e+".js?v="+t.version;if(e==="remote-config"&&(i="/array/"+t.config.token+"/config.js"),e==="toolbar"){var r=3e5;i=i+"&t="+Math.floor(Date.now()/r)*r}var s=t.requestRouter.endpointFor("assets",i);iA(t,s,n)},Ve.__PosthogExtensions__.loadSiteApp=(t,e,n)=>{var i=t.requestRouter.endpointFor("api",e);iA(t,i,n)};var b0={};function ja(t,e,n){if(Ut(t)){if(eA&&t.forEach===eA)t.forEach(e,n);else if("length"in t&&t.length===+t.length){for(var i=0,r=t.length;i<r;i++)if(i in t&&e.call(n,t[i],i)===b0)return}}}function kt(t,e,n){if(!yt(t)){if(Ut(t))return ja(t,e,n);if(l7(t)){for(var i of t.entries())if(e.call(n,i[1],i[0])===b0)return}else for(var r in t)if(_R.call(t,r)&&e.call(n,t[r],r)===b0)return}}var sn=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return ja(n,function(r){for(var s in r)r[s]!==void 0&&(t[s]=r[s])}),t},ay=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return ja(n,function(r){ja(r,function(s){t.push(s)})}),t};function Ig(t){for(var e=Object.keys(t),n=e.length,i=new Array(n);n--;)i[n]=[e[n],t[e[n]]];return i}var rA=function(t){try{return t()}catch{return}},d7=function(t){return function(){try{for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.apply(this,n)}catch(r){Ae.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),Ae.critical(r)}}},Ck=function(t){var e={};return kt(t,function(n,i){(tn(n)&&n.length>0||ei(n))&&(e[i]=n)}),e};function f7(t,e){return n=t,i=s=>tn(s)&&!gl(e)?s.slice(0,e):s,r=new Set,function s(o,a){return o!==Object(o)?i?i(o,a):o:r.has(o)?void 0:(r.add(o),Ut(o)?(l=[],ja(o,c=>{l.push(s(c))})):(l={},kt(o,(c,u)=>{r.has(c)||(l[u]=s(c,u))})),l);var l}(n);var n,i,r}var h7=["herokuapp.com","vercel.app","netlify.app"];function p7(t){var e=t==null?void 0:t.hostname;if(!tn(e))return!1;var n=e.split(".").slice(-2).join(".");for(var i of h7)if(n===i)return!1;return!0}function AR(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return t[n]}function Kt(t,e,n,i){var{capture:r=!1,passive:s=!0}=i??{};t==null||t.addEventListener(e,n,{capture:r,passive:s})}var NR="$people_distinct_id",_f="__alias",Cf="__timers",sA="$autocapture_disabled_server_side",q1="$heatmaps_enabled_server_side",oA="$exception_capture_enabled_server_side",Y1="$error_tracking_suppression_rules",aA="$web_vitals_enabled_server_side",PR="$dead_clicks_enabled_server_side",lA="$web_vitals_allowed_metrics",X1="$session_recording_enabled_server_side",cA="$console_log_recording_enabled_server_side",uA="$session_recording_network_payload_capture",dA="$session_recording_masking",fA="$session_recording_canvas_recording",hA="$replay_sample_rate",pA="$replay_minimum_duration",mA="$replay_script_config",w0="$sesid",Ef="$session_is_sampled",J1="$session_recording_url_trigger_activated_session",Z1="$session_recording_event_trigger_activated_session",du="$enabled_feature_flags",Dg="$early_access_features",Q1="$feature_flag_details",Af="$stored_person_properties",Vl="$stored_group_properties",ex="$surveys",om="$surveys_activated",x0="$flag_call_reported",co="$user_state",tx="$client_session_props",nx="$capture_rate_limit",ix="$initial_campaign_params",rx="$initial_referrer_info",S0="$initial_person_info",k0="$epp",MR="__POSTHOG_TOOLBAR__",am="$posthog_cookieless",m7=[NR,_f,"__cmpns",Cf,X1,q1,w0,du,Y1,co,Dg,Q1,Vl,Af,ex,x0,tx,nx,ix,rx,k0,S0];function gA(t){return t instanceof Element&&(t.id===MR||!(t.closest==null||!t.closest(".toolbar-global-fade-container")))}function ly(t){return!!t&&t.nodeType===1}function $a(t,e){return!!t&&!!t.tagName&&t.tagName.toLowerCase()===e.toLowerCase()}function TR(t){return!!t&&t.nodeType===3}function RR(t){return!!t&&t.nodeType===11}function Ek(t){return t?sy(t).split(/\s+/):[]}function vA(t){var e=G==null?void 0:G.location.href;return!!(e&&t&&t.some(n=>e.match(n)))}function _0(t){var e="";switch(typeof t.className){case"string":e=t.className;break;case"object":e=(t.className&&"baseVal"in t.className?t.className.baseVal:null)||t.getAttribute("class")||"";break;default:e=""}return Ek(e)}function OR(t){return yt(t)?null:sy(t).split(/(\s+)/).filter(e=>nd(e)).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function cy(t){var e="";return ox(t)&&!LR(t)&&t.childNodes&&t.childNodes.length&&kt(t.childNodes,function(n){var i;TR(n)&&n.textContent&&(e+=(i=OR(n.textContent))!==null&&i!==void 0?i:"")}),sy(e)}function IR(t){return ge(t.target)?t.srcElement||null:(e=t.target)!=null&&e.shadowRoot?t.composedPath()[0]||null:t.target||null;var e}var sx=["a","button","form","input","select","textarea","label"];function DR(t){var e=t.parentNode;return!(!e||!ly(e))&&e}function g7(t,e,n,i,r){var s,o,a;if(n===void 0&&(n=void 0),!G||!t||$a(t,"html")||!ly(t)||(s=n)!=null&&s.url_allowlist&&!vA(n.url_allowlist)||(o=n)!=null&&o.url_ignorelist&&vA(n.url_ignorelist))return!1;if((a=n)!=null&&a.dom_event_allowlist){var l=n.dom_event_allowlist;if(l&&!l.some(y=>e.type===y))return!1}for(var c=!1,u=[t],d=!0,f=t;f.parentNode&&!$a(f,"body");)if(RR(f.parentNode))u.push(f.parentNode.host),f=f.parentNode.host;else{if(!(d=DR(f)))break;if(i||sx.indexOf(d.tagName.toLowerCase())>-1)c=!0;else{var p=G.getComputedStyle(d);p&&p.getPropertyValue("cursor")==="pointer"&&(c=!0)}u.push(d),f=d}if(!function(y,v){var b=v==null?void 0:v.element_allowlist;if(ge(b))return!0;var w,k=function(E){if(b.some(C=>E.tagName.toLowerCase()===C))return{v:!0}};for(var _ of y)if(w=k(_))return w.v;return!1}(u,n)||!function(y,v){var b=v==null?void 0:v.css_selector_allowlist;if(ge(b))return!0;var w,k=function(E){if(b.some(C=>E.matches(C)))return{v:!0}};for(var _ of y)if(w=k(_))return w.v;return!1}(u,n))return!1;var m=G.getComputedStyle(t);if(m&&m.getPropertyValue("cursor")==="pointer"&&e.type==="click")return!0;var g=t.tagName.toLowerCase();switch(g){case"html":return!1;case"form":return(r||["submit"]).indexOf(e.type)>=0;case"input":case"select":case"textarea":return(r||["change","click"]).indexOf(e.type)>=0;default:return c?(r||["click"]).indexOf(e.type)>=0:(r||["click"]).indexOf(e.type)>=0&&(sx.indexOf(g)>-1||t.getAttribute("contenteditable")==="true")}}function ox(t){for(var e=t;e.parentNode&&!$a(e,"body");e=e.parentNode){var n=_0(e);if(it(n,"ph-sensitive")||it(n,"ph-no-capture"))return!1}if(it(_0(t),"ph-include"))return!0;var i=t.type||"";if(tn(i))switch(i.toLowerCase()){case"hidden":case"password":return!1}var r=t.name||t.id||"";return!(tn(r)&&/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(r.replace(/[^a-zA-Z0-9]/g,"")))}function LR(t){return!!($a(t,"input")&&!["button","checkbox","submit","reset"].includes(t.type)||$a(t,"select")||$a(t,"textarea")||t.getAttribute("contenteditable")==="true")}var jR="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",v7=new RegExp("^(?:"+jR+")$"),y7=new RegExp(jR),$R="\\d{3}-?\\d{2}-?\\d{4}",b7=new RegExp("^("+$R+")$"),w7=new RegExp("("+$R+")");function nd(t,e){return e===void 0&&(e=!0),!(yt(t)||tn(t)&&(t=sy(t),(e?v7:y7).test((t||"").replace(/[- ]/g,""))||(e?b7:w7).test(t)))}function FR(t){var e=cy(t);return nd(e=(e+" "+BR(t)).trim())?e:""}function BR(t){var e="";return t&&t.childNodes&&t.childNodes.length&&kt(t.childNodes,function(n){var i;if(n&&((i=n.tagName)==null?void 0:i.toLowerCase())==="span")try{var r=cy(n);e=(e+" "+r).trim(),n.childNodes&&n.childNodes.length&&(e=(e+" "+BR(n)).trim())}catch(s){Ae.error("[AutoCapture]",s)}}),e}function x7(t){return function(e){var n=e.map(i=>{var r,s,o="";if(i.tag_name&&(o+=i.tag_name),i.attr_class)for(var a of(i.attr_class.sort(),i.attr_class))o+="."+a.replace(/"/g,"");var l=xe({},i.text?{text:i.text}:{},{"nth-child":(r=i.nth_child)!==null&&r!==void 0?r:0,"nth-of-type":(s=i.nth_of_type)!==null&&s!==void 0?s:0},i.href?{href:i.href}:{},i.attr_id?{attr_id:i.attr_id}:{},i.attributes),c={};return Ig(l).sort((u,d)=>{var[f]=u,[p]=d;return f.localeCompare(p)}).forEach(u=>{var[d,f]=u;return c[yA(d.toString())]=yA(f.toString())}),o+=":",o+=Ig(c).map(u=>{var[d,f]=u;return d+'="'+f+'"'}).join("")});return n.join(";")}(function(e){return e.map(n=>{var i,r,s={text:(i=n.$el_text)==null?void 0:i.slice(0,400),tag_name:n.tag_name,href:(r=n.attr__href)==null?void 0:r.slice(0,2048),attr_class:S7(n),attr_id:n.attr__id,nth_child:n.nth_child,nth_of_type:n.nth_of_type,attributes:{}};return Ig(n).filter(o=>{var[a]=o;return a.indexOf("attr__")===0}).forEach(o=>{var[a,l]=o;return s.attributes[a]=l}),s})}(t))}function yA(t){return t.replace(/"|\\"/g,'\\"')}function S7(t){var e=t.attr__class;return e?Ut(e)?e:Ek(e):void 0}let zR=class{constructor(){this.clicks=[]}isRageClick(e,n,i){var r=this.clicks[this.clicks.length-1];if(r&&Math.abs(e-r.x)+Math.abs(n-r.y)<30&&i-r.timestamp<1e3){if(this.clicks.push({x:e,y:n,timestamp:i}),this.clicks.length===3)return!0}else this.clicks=[{x:e,y:n,timestamp:i}];return!1}};var k7=["localhost","127.0.0.1"],id=t=>{var e=Ce==null?void 0:Ce.createElement("a");return ge(e)?null:(e.href=t,e)},_7=function(t,e){var n,i;e===void 0&&(e="&");var r=[];return kt(t,function(s,o){ge(s)||ge(o)||o==="undefined"||(n=encodeURIComponent((a=>a instanceof File)(s)?s.name:s.toString()),i=encodeURIComponent(o),r[r.length]=i+"="+n)}),r.join(e)},C0=function(t,e){for(var n,i=((t.split("#")[0]||"").split(/\?(.*)/)[1]||"").replace(/^\?+/g,"").split("&"),r=0;r<i.length;r++){var s=i[r].split("=");if(s[0]===e){n=s;break}}if(!Ut(n)||n.length<2)return"";var o=n[1];try{o=decodeURIComponent(o)}catch{Ae.error("Skipping decoding for malformed query param: "+o)}return o.replace(/\+/g," ")},Ak=function(t,e,n){if(!t||!e||!e.length)return t;for(var i=t.split("#"),r=i[0]||"",s=i[1],o=r.split("?"),a=o[1],l=o[0],c=(a||"").split("&"),u=[],d=0;d<c.length;d++){var f=c[d].split("=");Ut(f)&&(e.includes(f[0])?u.push(f[0]+"="+n):u.push(c[d]))}var p=l;return a!=null&&(p+="?"+u.join("&")),s!=null&&(p+="#"+s),p},E0=function(t,e){var n=t.match(new RegExp(e+"=([^&]*)"));return n?n[1]:null},bA=Rn("[AutoCapture]");function Lb(t,e){return e.length>t?e.slice(0,t)+"...":e}function C7(t){if(t.previousElementSibling)return t.previousElementSibling;var e=t;do e=e.previousSibling;while(e&&!ly(e));return e}function E7(t,e,n,i){var r=t.tagName.toLowerCase(),s={tag_name:r};sx.indexOf(r)>-1&&!n&&(r.toLowerCase()==="a"||r.toLowerCase()==="button"?s.$el_text=Lb(1024,FR(t)):s.$el_text=Lb(1024,cy(t)));var o=_0(t);o.length>0&&(s.classes=o.filter(function(u){return u!==""})),kt(t.attributes,function(u){var d;if((!LR(t)||["name","id","class","aria-label"].indexOf(u.name)!==-1)&&(i==null||!i.includes(u.name))&&!e&&nd(u.value)&&(d=u.name,!tn(d)||d.substring(0,10)!=="_ngcontent"&&d.substring(0,7)!=="_nghost")){var f=u.value;u.name==="class"&&(f=Ek(f).join(" ")),s["attr__"+u.name]=Lb(1024,f)}});for(var a=1,l=1,c=t;c=C7(c);)a++,c.tagName===t.tagName&&l++;return s.nth_child=a,s.nth_of_type=l,s}function A7(t,e){for(var n,i,{e:r,maskAllElementAttributes:s,maskAllText:o,elementAttributeIgnoreList:a,elementsChainAsString:l}=e,c=[t],u=t;u.parentNode&&!$a(u,"body");)RR(u.parentNode)?(c.push(u.parentNode.host),u=u.parentNode.host):(c.push(u.parentNode),u=u.parentNode);var d,f=[],p={},m=!1,g=!1;if(kt(c,k=>{var _=ox(k);k.tagName.toLowerCase()==="a"&&(m=k.getAttribute("href"),m=_&&m&&nd(m)&&m),it(_0(k),"ph-no-capture")&&(g=!0),f.push(E7(k,s,o,a));var E=function(C){if(!ox(C))return{};var N={};return kt(C.attributes,function(M){if(M.name&&M.name.indexOf("data-ph-capture-attribute")===0){var R=M.name.replace("data-ph-capture-attribute-",""),I=M.value;R&&I&&nd(I)&&(N[R]=I)}}),N}(k);sn(p,E)}),g)return{props:{},explicitNoCapture:g};if(o||(t.tagName.toLowerCase()==="a"||t.tagName.toLowerCase()==="button"?f[0].$el_text=FR(t):f[0].$el_text=cy(t)),m){var y,v;f[0].attr__href=m;var b=(y=id(m))==null?void 0:y.host,w=G==null||(v=G.location)==null?void 0:v.host;b&&w&&b!==w&&(d=m)}return{props:sn({$event_type:r.type,$ce_version:1},l?{}:{$elements:f},{$elements_chain:x7(f)},(n=f[0])!=null&&n.$el_text?{$el_text:(i=f[0])==null?void 0:i.$el_text}:{},d&&r.type==="click"?{$external_click_url:d}:{},p)}}let N7=class{constructor(e){this.i=!1,this.o=null,this.rageclicks=new zR,this.h=!1,this.instance=e,this.m=null}get S(){var e,n,i=en(this.instance.config.autocapture)?this.instance.config.autocapture:{};return i.url_allowlist=(e=i.url_allowlist)==null?void 0:e.map(r=>new RegExp(r)),i.url_ignorelist=(n=i.url_ignorelist)==null?void 0:n.map(r=>new RegExp(r)),i}$(){if(this.isBrowserSupported()){if(G&&Ce){var e=i=>{i=i||(G==null?void 0:G.event);try{this.k(i)}catch(r){bA.error("Failed to capture event",r)}};if(Kt(Ce,"submit",e,{capture:!0}),Kt(Ce,"change",e,{capture:!0}),Kt(Ce,"click",e,{capture:!0}),this.S.capture_copied_text){var n=i=>{i=i||(G==null?void 0:G.event),this.k(i,Db)};Kt(Ce,"copy",n,{capture:!0}),Kt(Ce,"cut",n,{capture:!0})}}}else bA.info("Disabling Automatic Event Collection because this browser is not supported")}startIfEnabled(){this.isEnabled&&!this.i&&(this.$(),this.i=!0)}onRemoteConfig(e){e.elementsChainAsString&&(this.h=e.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register({[sA]:!!e.autocapture_opt_out}),this.o=!!e.autocapture_opt_out,this.startIfEnabled()}setElementSelectors(e){this.m=e}getElementSelectors(e){var n,i=[];return(n=this.m)==null||n.forEach(r=>{var s=Ce==null?void 0:Ce.querySelectorAll(r);s==null||s.forEach(o=>{e===o&&i.push(r)})}),i}get isEnabled(){var e,n,i=(e=this.instance.persistence)==null?void 0:e.props[sA],r=this.o;if(gl(r)&&!Bs(i)&&!this.instance.I())return!1;var s=(n=this.o)!==null&&n!==void 0?n:!!i;return!!this.instance.config.autocapture&&!s}k(e,n){if(n===void 0&&(n="$autocapture"),this.isEnabled){var i,r=IR(e);TR(r)&&(r=r.parentNode||null),n==="$autocapture"&&e.type==="click"&&e instanceof MouseEvent&&this.instance.config.rageclick&&(i=this.rageclicks)!=null&&i.isRageClick(e.clientX,e.clientY,new Date().getTime())&&this.k(e,"$rageclick");var s=n===Db;if(r&&g7(r,e,this.S,s,s?["copy","cut"]:void 0)){var{props:o,explicitNoCapture:a}=A7(r,{e,maskAllElementAttributes:this.instance.config.mask_all_element_attributes,maskAllText:this.instance.config.mask_all_text,elementAttributeIgnoreList:this.S.element_attribute_ignorelist,elementsChainAsString:this.h});if(a)return!1;var l=this.getElementSelectors(r);if(l&&l.length>0&&(o.$element_selectors=l),n===Db){var c,u=OR(G==null||(c=G.getSelection())==null?void 0:c.toString()),d=e.type||"clipboard";if(!u)return!1;o.$selected_content=u,o.$copy_type=d}return this.instance.capture(n,o),!0}}}isBrowserSupported(){return Tr(Ce==null?void 0:Ce.querySelectorAll)}};Math.trunc||(Math.trunc=function(t){return t<0?Math.ceil(t):Math.floor(t)}),Number.isInteger||(Number.isInteger=function(t){return ei(t)&&isFinite(t)&&Math.floor(t)===t});var wA="0123456789abcdef";let P7=class ax{constructor(e){if(this.bytes=e,e.length!==16)throw new TypeError("not 128-bit length")}static fromFieldsV7(e,n,i,r){if(!Number.isInteger(e)||!Number.isInteger(n)||!Number.isInteger(i)||!Number.isInteger(r)||e<0||n<0||i<0||r<0||e>0xffffffffffff||n>4095||i>1073741823||r>4294967295)throw new RangeError("invalid field value");var s=new Uint8Array(16);return s[0]=e/Math.pow(2,40),s[1]=e/Math.pow(2,32),s[2]=e/Math.pow(2,24),s[3]=e/Math.pow(2,16),s[4]=e/Math.pow(2,8),s[5]=e,s[6]=112|n>>>8,s[7]=n,s[8]=128|i>>>24,s[9]=i>>>16,s[10]=i>>>8,s[11]=i,s[12]=r>>>24,s[13]=r>>>16,s[14]=r>>>8,s[15]=r,new ax(s)}toString(){for(var e="",n=0;n<this.bytes.length;n++)e=e+wA.charAt(this.bytes[n]>>>4)+wA.charAt(15&this.bytes[n]),n!==3&&n!==5&&n!==7&&n!==9||(e+="-");if(e.length!==36)throw new Error("Invalid UUIDv7 was generated");return e}clone(){return new ax(this.bytes.slice(0))}equals(e){return this.compareTo(e)===0}compareTo(e){for(var n=0;n<16;n++){var i=this.bytes[n]-e.bytes[n];if(i!==0)return Math.sign(i)}return 0}},M7=class{constructor(){this.P=0,this.R=0,this.T=new T7}generate(){var e=this.generateOrAbort();if(ge(e)){this.P=0;var n=this.generateOrAbort();if(ge(n))throw new Error("Could not generate UUID after timestamp reset");return n}return e}generateOrAbort(){var e=Date.now();if(e>this.P)this.P=e,this.M();else{if(!(e+1e4>this.P))return;this.R++,this.R>4398046511103&&(this.P++,this.M())}return P7.fromFieldsV7(this.P,Math.trunc(this.R/Math.pow(2,30)),this.R&Math.pow(2,30)-1,this.T.nextUint32())}M(){this.R=1024*this.T.nextUint32()+(1023&this.T.nextUint32())}};var xA,UR=t=>{if(typeof UUIDV7_DENY_WEAK_RNG<"u"&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(var e=0;e<t.length;e++)t[e]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return t};G&&!ge(G.crypto)&&crypto.getRandomValues&&(UR=t=>crypto.getRandomValues(t));let T7=class{constructor(){this.C=new Uint32Array(8),this.F=1/0}nextUint32(){return this.F>=this.C.length&&(UR(this.C),this.F=0),this.C[this.F++]}};var _a=()=>R7().toString(),R7=()=>(xA||(xA=new M7)).generate(),Yd="",O7=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i;function I7(t,e){if(e){var n=function(r,s){if(s===void 0&&(s=Ce),Yd)return Yd;if(!s||["localhost","127.0.0.1"].includes(r))return"";for(var o=r.split("."),a=Math.min(o.length,8),l="dmn_chk_"+_a();!Yd&&a--;){var c=o.slice(a).join("."),u=l+"=1;domain=."+c+";path=/";s.cookie=u+";max-age=3",s.cookie.includes(l)&&(s.cookie=u+";max-age=0",Yd=c)}return Yd}(t);if(!n){var i=(r=>{var s=r.match(O7);return s?s[0]:""})(t);i!==n&&Ae.info("Warning: cookie subdomain discovery mismatch",i,n),n=i}return n?"; domain=."+n:""}return""}var Ks={O:()=>!!Ce,A:function(t){Ae.error("cookieStore error: "+t)},D:function(t){if(Ce){try{for(var e=t+"=",n=Ce.cookie.split(";").filter(s=>s.length),i=0;i<n.length;i++){for(var r=n[i];r.charAt(0)==" ";)r=r.substring(1,r.length);if(r.indexOf(e)===0)return decodeURIComponent(r.substring(e.length,r.length))}}catch{}return null}},L:function(t){var e;try{e=JSON.parse(Ks.D(t))||{}}catch{}return e},j:function(t,e,n,i,r){if(Ce)try{var s="",o="",a=I7(Ce.location.hostname,i);if(n){var l=new Date;l.setTime(l.getTime()+24*n*60*60*1e3),s="; expires="+l.toUTCString()}r&&(o="; secure");var c=t+"="+encodeURIComponent(JSON.stringify(e))+s+"; SameSite=Lax; path=/"+a+o;return c.length>3686.4&&Ae.warn("cookieStore warning: large cookie, len="+c.length),Ce.cookie=c,c}catch{return}},N:function(t,e){try{Ks.j(t,"",-1,e)}catch{return}}},jb=null,bn={O:function(){if(!gl(jb))return jb;var t=!0;if(ge(G))t=!1;else try{var e="__mplssupport__";bn.j(e,"xyz"),bn.D(e)!=='"xyz"'&&(t=!1),bn.N(e)}catch{t=!1}return t||Ae.error("localStorage unsupported; falling back to cookie store"),jb=t,t},A:function(t){Ae.error("localStorage error: "+t)},D:function(t){try{return G==null?void 0:G.localStorage.getItem(t)}catch(e){bn.A(e)}return null},L:function(t){try{return JSON.parse(bn.D(t))||{}}catch{}return null},j:function(t,e){try{G==null||G.localStorage.setItem(t,JSON.stringify(e))}catch(n){bn.A(n)}},N:function(t){try{G==null||G.localStorage.removeItem(t)}catch(e){bn.A(e)}}},D7=["distinct_id",w0,Ef,k0,S0],lm=xe({},bn,{L:function(t){try{var e={};try{e=Ks.L(t)||{}}catch{}var n=sn(e,JSON.parse(bn.D(t)||"{}"));return bn.j(t,n),n}catch{}return null},j:function(t,e,n,i,r,s){try{bn.j(t,e,void 0,void 0,s);var o={};D7.forEach(a=>{e[a]&&(o[a]=e[a])}),Object.keys(o).length&&Ks.j(t,o,n,i,r,s)}catch(a){bn.A(a)}},N:function(t,e){try{G==null||G.localStorage.removeItem(t),Ks.N(t,e)}catch(n){bn.A(n)}}}),cm={},L7={O:function(){return!0},A:function(t){Ae.error("memoryStorage error: "+t)},D:function(t){return cm[t]||null},L:function(t){return cm[t]||null},j:function(t,e){cm[t]=e},N:function(t){delete cm[t]}},Tl=null,jn={O:function(){if(!gl(Tl))return Tl;if(Tl=!0,ge(G))Tl=!1;else try{var t="__support__";jn.j(t,"xyz"),jn.D(t)!=='"xyz"'&&(Tl=!1),jn.N(t)}catch{Tl=!1}return Tl},A:function(t){Ae.error("sessionStorage error: ",t)},D:function(t){try{return G==null?void 0:G.sessionStorage.getItem(t)}catch(e){jn.A(e)}return null},L:function(t){try{return JSON.parse(jn.D(t))||null}catch{}return null},j:function(t,e){try{G==null||G.sessionStorage.setItem(t,JSON.stringify(e))}catch(n){jn.A(n)}},N:function(t){try{G==null||G.sessionStorage.removeItem(t)}catch(e){jn.A(e)}}},Vc=function(t){return t[t.PENDING=-1]="PENDING",t[t.DENIED=0]="DENIED",t[t.GRANTED=1]="GRANTED",t}({});let j7=class{constructor(e){this._instance=e}get S(){return this._instance.config}get consent(){return this.U()?Vc.DENIED:this.q}isOptedOut(){return this.consent===Vc.DENIED||this.consent===Vc.PENDING&&this.S.opt_out_capturing_by_default}isOptedIn(){return!this.isOptedOut()}optInOut(e){this.B.j(this.H,e?1:0,this.S.cookie_expiration,this.S.cross_subdomain_cookie,this.S.secure_cookie)}reset(){this.B.N(this.H,this.S.cross_subdomain_cookie)}get H(){var{token:e,opt_out_capturing_cookie_prefix:n}=this._instance.config;return(n||"__ph_opt_in_out_")+e}get q(){var e=this.B.D(this.H);return e==="1"?Vc.GRANTED:e==="0"?Vc.DENIED:Vc.PENDING}get B(){if(!this.W){var e=this.S.opt_out_capturing_persistence_type;this.W=e==="localStorage"?bn:Ks;var n=e==="localStorage"?Ks:bn;n.D(this.H)&&(this.W.D(this.H)||this.optInOut(n.D(this.H)==="1"),n.N(this.H,this.S.cross_subdomain_cookie))}return this.W}U(){return!!this.S.respect_dnt&&!!AR([nr==null?void 0:nr.doNotTrack,nr==null?void 0:nr.msDoNotTrack,Ve.doNotTrack],e=>it([!0,1,"1","yes"],e))}};var um=Rn("[Dead Clicks]"),$7=()=>!0,F7=t=>{var e,n=!((e=t.instance.persistence)==null||!e.get_property(PR)),i=t.instance.config.capture_dead_clicks;return Bs(i)?i:n};let VR=class{get lazyLoadedDeadClicksAutocapture(){return this.G}constructor(e,n,i){this.instance=e,this.isEnabled=n,this.onCapture=i,this.startIfEnabled()}onRemoteConfig(e){this.instance.persistence&&this.instance.persistence.register({[PR]:e==null?void 0:e.captureDeadClicks}),this.startIfEnabled()}startIfEnabled(){this.isEnabled(this)&&this.J(()=>{this.V()})}J(e){var n,i;(n=Ve.__PosthogExtensions__)!=null&&n.initDeadClicksAutocapture&&e(),(i=Ve.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this.instance,"dead-clicks-autocapture",r=>{r?um.error("failed to load script",r):e()})}V(){var e;if(Ce){if(!this.G&&(e=Ve.__PosthogExtensions__)!=null&&e.initDeadClicksAutocapture){var n=en(this.instance.config.capture_dead_clicks)?this.instance.config.capture_dead_clicks:{};n.__onCapture=this.onCapture,this.G=Ve.__PosthogExtensions__.initDeadClicksAutocapture(this.instance,n),this.G.start(Ce),um.info("starting...")}}else um.error("`document` not found. Cannot start.")}stop(){this.G&&(this.G.stop(),this.G=void 0,um.info("stopping..."))}};function ir(t,e,n,i,r){return e>n&&(Ae.warn("min cannot be greater than max."),e=n),ei(t)?t>n?(i&&Ae.warn(i+" cannot be  greater than max: "+n+". Using max value instead."),n):t<e?(i&&Ae.warn(i+" cannot be less than min: "+e+". Using min value instead."),e):t:(i&&Ae.warn(i+" must be a number. using max or fallback. max: "+n+", fallback: "+r),ir(r||n,e,n,i))}let HR=class{constructor(e){this.K={},this.Y=()=>{Object.keys(this.K).forEach(n=>{var i=this.X(n)+this.Z;i>=this.tt?delete this.K[n]:this.it(n,i)})},this.X=n=>this.K[String(n)],this.it=(n,i)=>{this.K[String(n)]=i},this.consumeRateLimit=n=>{var i,r=(i=this.X(n))!==null&&i!==void 0?i:this.tt;if((r=Math.max(r-1,0))===0)return!0;this.it(n,r);var s,o=r===0;return o&&((s=this.et)==null||s.call(this,n)),o},this.rt=e,this.et=this.rt.et,this.tt=ir(this.rt.bucketSize,0,100,"rate limiter bucket size"),this.Z=ir(this.rt.refillRate,0,this.tt,"rate limiter refill rate"),this.st=ir(this.rt.refillInterval,0,864e5,"rate limiter refill interval"),setInterval(()=>{this.Y()},this.st)}};var dm=Rn("[ExceptionAutocapture]");let B7=class{constructor(e){var n,i,r;this.nt=()=>{var s;if(G&&this.isEnabled&&(s=Ve.__PosthogExtensions__)!=null&&s.errorWrappingFunctions){var o=Ve.__PosthogExtensions__.errorWrappingFunctions.wrapOnError,a=Ve.__PosthogExtensions__.errorWrappingFunctions.wrapUnhandledRejection,l=Ve.__PosthogExtensions__.errorWrappingFunctions.wrapConsoleError;try{!this.ot&&this.S.capture_unhandled_errors&&(this.ot=o(this.captureException.bind(this))),!this.lt&&this.S.capture_unhandled_rejections&&(this.lt=a(this.captureException.bind(this))),!this.ut&&this.S.capture_console_errors&&(this.ut=l(this.captureException.bind(this)))}catch(c){dm.error("failed to start",c),this.ht()}}},this._instance=e,this.dt=!((n=this._instance.persistence)==null||!n.props[oA]),this.S=this.vt(),this.ct=new HR({refillRate:(i=this._instance.config.error_tracking.__exceptionRateLimiterRefillRate)!==null&&i!==void 0?i:1,bucketSize:(r=this._instance.config.error_tracking.__exceptionRateLimiterBucketSize)!==null&&r!==void 0?r:10,refillInterval:1e4}),this.startIfEnabled()}vt(){var e=this._instance.config.capture_exceptions,n={capture_unhandled_errors:!1,capture_unhandled_rejections:!1,capture_console_errors:!1};return en(e)?n=xe({},n,e):(ge(e)?this.dt:e)&&(n=xe({},n,{capture_unhandled_errors:!0,capture_unhandled_rejections:!0})),n}get isEnabled(){return this.S.capture_console_errors||this.S.capture_unhandled_errors||this.S.capture_unhandled_rejections}startIfEnabled(){this.isEnabled&&(dm.info("enabled"),this.J(this.nt))}J(e){var n,i;(n=Ve.__PosthogExtensions__)!=null&&n.errorWrappingFunctions&&e(),(i=Ve.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,"exception-autocapture",r=>{if(r)return dm.error("failed to load script",r);e()})}ht(){var e,n,i;(e=this.ot)==null||e.call(this),this.ot=void 0,(n=this.lt)==null||n.call(this),this.lt=void 0,(i=this.ut)==null||i.call(this),this.ut=void 0}onRemoteConfig(e){var n=e.autocaptureExceptions;this.dt=!!n||!1,this.S=this.vt(),this._instance.persistence&&this._instance.persistence.register({[oA]:this.dt}),this.startIfEnabled()}captureException(e){var n,i=this._instance.requestRouter.endpointFor("ui");e.$exception_personURL=i+"/project/"+this._instance.config.token+"/person/"+this._instance.get_distinct_id();var r=(n=e.$exception_list[0].type)!==null&&n!==void 0?n:"Exception";this.ct.consumeRateLimit(r)?dm.info("Skipping exception capture because of client rate limiting.",{exception:e.$exception_list[0].type}):this._instance.exceptions.sendExceptionEvent(e)}};function WR(t){return!ge(Event)&&GR(t,Event)}function GR(t,e){try{return t instanceof e}catch{return!1}}function KR(t){switch(Object.prototype.toString.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object DOMError]":return!0;default:return GR(t,Error)}}function Lg(t,e){return Object.prototype.toString.call(t)==="[object "+e+"]"}function $b(t){return Lg(t,"DOMError")}var SA=/\(error: (.*)\)/,kA=50,fu="?";function Fb(t,e,n,i){var r={platform:"web:javascript",filename:t,function:e==="<anonymous>"?fu:e,in_app:!0};return ge(n)||(r.lineno=n),ge(i)||(r.colno=i),r}var z7=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,U7=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,V7=/\((\S*)(?::(\d+))(?::(\d+))\)/,H7=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,W7=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,G7=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=e.sort((r,s)=>r[0]-s[0]).map(r=>r[1]);return function(r,s){s===void 0&&(s=0);for(var o=[],a=r.split(`
`),l=s;l<a.length;l++){var c=a[l];if(!(c.length>1024)){var u=SA.test(c)?c.replace(SA,"$1"):c;if(!u.match(/\S*Error: /)){for(var d of i){var f=d(u);if(f){o.push(f);break}}if(o.length>=kA)break}}}return function(p){if(!p.length)return[];var m=Array.from(p);return m.reverse(),m.slice(0,kA).map(g=>xe({},g,{filename:g.filename||K7(m).filename,function:g.function||fu}))}(o)}}([30,t=>{var e=z7.exec(t);if(e){var[,n,i,r]=e;return Fb(n,fu,+i,+r)}var s=U7.exec(t);if(s){if(s[2]&&s[2].indexOf("eval")===0){var o=V7.exec(s[2]);o&&(s[2]=o[1],s[3]=o[2],s[4]=o[3])}var[a,l]=CA(s[1]||fu,s[2]);return Fb(l,a,s[3]?+s[3]:void 0,s[4]?+s[4]:void 0)}}],[50,t=>{var e=H7.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){var n=W7.exec(e[3]);n&&(e[1]=e[1]||"eval",e[3]=n[1],e[4]=n[2],e[5]="")}var i=e[3],r=e[1]||fu;return[r,i]=CA(r,i),Fb(i,r,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}}]);function K7(t){return t[t.length-1]||{}}var fm,_A,Bb,CA=(t,e)=>{var n=t.indexOf("safari-extension")!==-1,i=t.indexOf("safari-web-extension")!==-1;return n||i?[t.indexOf("@")!==-1?t.split("@")[0]:fu,n?"safari-extension:"+e:"safari-web-extension:"+e]:[t,e]},q7=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;function Nk(t,e){e===void 0&&(e=0);var n=t.stacktrace||t.stack||"",i=function(o){return o&&Y7.test(o.message)?1:0}(t);try{var r=G7,s=function(o,a){var l=function(c){var u=globalThis._posthogChunkIds;if(!u)return{};var d=Object.keys(u);return Bb&&d.length===_A||(_A=d.length,Bb=d.reduce((f,p)=>{fm||(fm={});var m=fm[p];if(m)f[m[0]]=m[1];else for(var g=c(p),y=g.length-1;y>=0;y--){var v=g[y],b=v==null?void 0:v.filename,w=u[p];if(b&&w){f[b]=w,fm[p]=[b,w];break}}return f},{})),Bb}(a);return o.forEach(c=>{c.filename&&(c.chunk_id=l[c.filename])}),o}(r(n,i),r);return s.slice(0,s.length-e)}catch{}return[]}var Y7=/Minified React error #\d+;/i;function X7(t,e){var n,i,r=Nk(t),s=(n=e==null?void 0:e.handled)===null||n===void 0||n,o=(i=e==null?void 0:e.synthetic)!==null&&i!==void 0&&i;return{type:e!=null&&e.overrideExceptionType?e.overrideExceptionType:t.name,value:function(a){var l=a.message;return l.error&&typeof l.error.message=="string"?String(l.error.message):String(l)}(t),stacktrace:{frames:r,type:"raw"},mechanism:{handled:s,synthetic:o}}}function qR(t,e){var n=X7(t,e);return t.cause&&KR(t.cause)&&t.cause!==t?[n,...qR(t.cause,{handled:e==null?void 0:e.handled,synthetic:e==null?void 0:e.synthetic})]:[n]}function zb(t,e){return{$exception_list:qR(t,e),$exception_level:"error"}}function Ub(t,e){var n,i,r,s=(n=e==null?void 0:e.handled)===null||n===void 0||n,o=(i=e==null?void 0:e.synthetic)===null||i===void 0||i,a={type:e!=null&&e.overrideExceptionType?e.overrideExceptionType:(r=e==null?void 0:e.defaultExceptionType)!==null&&r!==void 0?r:"Error",value:t||(e==null?void 0:e.defaultExceptionMessage),mechanism:{handled:s,synthetic:o}};if(e!=null&&e.syntheticException){var l=Nk(e.syntheticException,1);l.length&&(a.stacktrace={frames:l,type:"raw"})}return{$exception_list:[a],$exception_level:"error"}}function J7(t){return tn(t)&&!K1(t)&&o7.indexOf(t)>=0}function Z7(t,e){var n,i,r=(n=e==null?void 0:e.handled)===null||n===void 0||n,s=(i=e==null?void 0:e.synthetic)===null||i===void 0||i,o=e!=null&&e.overrideExceptionType?e.overrideExceptionType:WR(t)?t.constructor.name:"Error",a="Non-Error 'exception' captured with keys: "+function(u,d){d===void 0&&(d=40);var f=Object.keys(u);if(f.sort(),!f.length)return"[object has no keys]";for(var p=f.length;p>0;p--){var m=f.slice(0,p).join(", ");if(!(m.length>d))return p===f.length||m.length<=d?m:m.slice(0,d)+"..."}return""}(t),l={type:o,value:a,mechanism:{handled:r,synthetic:s}};if(e!=null&&e.syntheticException){var c=Nk(e==null?void 0:e.syntheticException,1);c.length&&(l.stacktrace={frames:c,type:"raw"})}return{$exception_list:[l],$exception_level:J7(t.level)?t.level:"error"}}function Q7(t,e){var{error:n,event:i}=t,r={$exception_list:[]},s=n||i;if($b(s)||function(f){return Lg(f,"DOMException")}(s)){var o=s;if(function(f){return"stack"in f}(s))r=zb(s,e);else{var a=o.name||($b(o)?"DOMError":"DOMException"),l=o.message?a+": "+o.message:a;r=Ub(l,xe({},e,{overrideExceptionType:$b(o)?"DOMError":"DOMException",defaultExceptionMessage:l}))}return"code"in o&&(r.$exception_DOMException_code=""+o.code),r}if(function(f){return Lg(f,"ErrorEvent")}(s)&&s.error)return zb(s.error,e);if(KR(s))return zb(s,e);if(function(f){return Lg(f,"Object")}(s)||WR(s))return Z7(s,e);if(ge(n)&&tn(i)){var c="Error",u=i,d=i.match(q7);return d&&(c=d[1],u=d[2]),Ub(u,xe({},e,{overrideExceptionType:c,defaultExceptionMessage:u}))}return Ub(s,e)}function EA(t,e,n){try{if(!(e in t))return()=>{};var i=t[e],r=n(i);return Tr(r)&&(r.prototype=r.prototype||{},Object.defineProperties(r,{__posthog_wrapped__:{enumerable:!1,value:!0}})),t[e]=r,()=>{t[e]=i}}catch{return()=>{}}}let eU=class{constructor(e){var n;this._instance=e,this.ft=(G==null||(n=G.location)==null?void 0:n.pathname)||""}get isEnabled(){return this._instance.config.capture_pageview==="history_change"}startIfEnabled(){this.isEnabled&&(Ae.info("History API monitoring enabled, starting..."),this.monitorHistoryChanges())}stop(){this.gt&&this.gt(),this.gt=void 0,Ae.info("History API monitoring stopped")}monitorHistoryChanges(){var e,n;if(G&&G.history){var i=this;(e=G.history.pushState)!=null&&e.__posthog_wrapped__||EA(G.history,"pushState",r=>function(s,o,a){r.call(this,s,o,a),i._t("pushState")}),(n=G.history.replaceState)!=null&&n.__posthog_wrapped__||EA(G.history,"replaceState",r=>function(s,o,a){r.call(this,s,o,a),i._t("replaceState")}),this.bt()}}_t(e){try{var n,i=G==null||(n=G.location)==null?void 0:n.pathname;if(!i)return;i!==this.ft&&this.isEnabled&&this._instance.capture("$pageview",{navigation_type:e}),this.ft=i}catch(r){Ae.error("Error capturing "+e+" pageview",r)}}bt(){if(!this.gt){var e=()=>{this._t("popstate")};Kt(G,"popstate",e),this.gt=()=>{G&&G.removeEventListener("popstate",e)}}}};function A0(t){var e,n;return((e=JSON.stringify(t,(n=[],function(i,r){if(en(r)){for(;n.length>0&&n[n.length-1]!==this;)n.pop();return n.includes(r)?"[Circular]":(n.push(r),r)}return r})))==null?void 0:e.length)||0}function lx(t,e){if(e===void 0&&(e=66060288e-1),t.size>=e&&t.data.length>1){var n=Math.floor(t.data.length/2),i=t.data.slice(0,n),r=t.data.slice(n);return[lx({size:A0(i),data:i,sessionId:t.sessionId,windowId:t.windowId}),lx({size:A0(r),data:r,sessionId:t.sessionId,windowId:t.windowId})].flatMap(s=>s)}return[t]}var uo=(t=>(t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin",t))(uo||{}),qr=(t=>(t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration",t[t.Selection=14]="Selection",t[t.AdoptedStyleSheet=15]="AdoptedStyleSheet",t[t.CustomElement=16]="CustomElement",t))(qr||{}),cx="[SessionRecording]",ux="redacted",hm={initiatorTypes:["audio","beacon","body","css","early-hint","embed","fetch","frame","iframe","icon","image","img","input","link","navigation","object","ping","script","track","video","xmlhttprequest"],maskRequestFn:t=>t,recordHeaders:!1,recordBody:!1,recordInitialRequests:!1,recordPerformance:!1,performanceEntryTypeToObserve:["first-input","navigation","paint","resource"],payloadSizeLimitBytes:1e6,payloadHostDenyList:[".lr-ingest.io",".ingest.sentry.io",".clarity.ms","analytics.google.com","bam.nr-data.net"]},tU=["authorization","x-forwarded-for","authorization","cookie","set-cookie","x-api-key","x-real-ip","remote-addr","forwarded","proxy-authorization","x-csrf-token","x-csrftoken","x-xsrf-token"],nU=["password","secret","passwd","api_key","apikey","auth","credentials","mysql_pwd","privatekey","private_key","token"],iU=["/s/","/e/","/i/"];function AA(t,e,n,i){if(yt(t))return t;var r=(e==null?void 0:e["content-length"])||function(s){return new Blob([s]).size}(t);return tn(r)&&(r=parseInt(r)),r>n?cx+" "+i+" body too large to record ("+r+" bytes)":t}function NA(t,e){if(yt(t))return t;var n=t;return nd(n,!1)||(n=cx+" "+e+" body "+ux),kt(nU,i=>{var r,s;(r=n)!=null&&r.length&&((s=n)==null?void 0:s.indexOf(i))!==-1&&(n=cx+" "+e+" body "+ux+" as might contain: "+i)}),n}var rU=(t,e)=>{var n,i,r,s={payloadSizeLimitBytes:hm.payloadSizeLimitBytes,performanceEntryTypeToObserve:[...hm.performanceEntryTypeToObserve],payloadHostDenyList:[...e.payloadHostDenyList||[],...hm.payloadHostDenyList]},o=t.session_recording.recordHeaders!==!1&&e.recordHeaders,a=t.session_recording.recordBody!==!1&&e.recordBody,l=t.capture_performance!==!1&&e.recordPerformance,c=(n=s,r=Math.min(1e6,(i=n.payloadSizeLimitBytes)!==null&&i!==void 0?i:1e6),f=>(f!=null&&f.requestBody&&(f.requestBody=AA(f.requestBody,f.requestHeaders,r,"Request")),f!=null&&f.responseBody&&(f.responseBody=AA(f.responseBody,f.responseHeaders,r,"Response")),f)),u=f=>{return c(((g,y)=>{var v,b=id(g.name),w=y.indexOf("http")===0?(v=id(y))==null?void 0:v.pathname:y;w==="/"&&(w="");var k=b==null?void 0:b.pathname.replace(w||"","");if(!(b&&k&&iU.some(_=>k.indexOf(_)===0)))return g})((m=(p=f).requestHeaders,yt(m)||kt(Object.keys(m??{}),g=>{tU.includes(g.toLowerCase())&&(m[g]=ux)}),p),t.api_host));var p,m},d=Tr(t.session_recording.maskNetworkRequestFn);return d&&Tr(t.session_recording.maskCapturedNetworkRequestFn)&&Ae.warn("Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored."),d&&(t.session_recording.maskCapturedNetworkRequestFn=f=>{var p=t.session_recording.maskNetworkRequestFn({url:f.name});return xe({},f,{name:p==null?void 0:p.url})}),s.maskRequestFn=Tr(t.session_recording.maskCapturedNetworkRequestFn)?f=>{var p,m=u(f);return m&&(p=t.session_recording.maskCapturedNetworkRequestFn==null?void 0:t.session_recording.maskCapturedNetworkRequestFn(m))!==null&&p!==void 0?p:void 0}:f=>function(p){if(!ge(p))return p.requestBody=NA(p.requestBody,"Request"),p.responseBody=NA(p.responseBody,"Response"),p}(u(f)),xe({},hm,s,{recordHeaders:o,recordBody:a,recordPerformance:l,recordInitialRequests:l})};let sU=class{constructor(e,n){var i,r;n===void 0&&(n={}),this.yt={},this.wt=s=>{if(!this.yt[s]){var o,a;this.yt[s]=!0;var l=this.St(s);(o=(a=this.rt).onBlockedNode)==null||o.call(a,s,l)}},this.$t=s=>{var o=this.St(s);if((o==null?void 0:o.nodeName)!=="svg"&&o instanceof Element){var a=o.closest("svg");if(a)return[this._rrweb.mirror.getId(a),a]}return[s,o]},this.St=s=>this._rrweb.mirror.getNode(s),this.kt=s=>{var o,a,l,c,u,d,f,p;return((o=(a=s.removes)==null?void 0:a.length)!==null&&o!==void 0?o:0)+((l=(c=s.attributes)==null?void 0:c.length)!==null&&l!==void 0?l:0)+((u=(d=s.texts)==null?void 0:d.length)!==null&&u!==void 0?u:0)+((f=(p=s.adds)==null?void 0:p.length)!==null&&f!==void 0?f:0)},this.throttleMutations=s=>{if(s.type!==3||s.data.source!==0)return s;var o=s.data,a=this.kt(o);o.attributes&&(o.attributes=o.attributes.filter(c=>{var[u]=this.$t(c.id);return!this.ct.consumeRateLimit(u)&&c}));var l=this.kt(o);return l!==0||a===l?s:void 0},this._rrweb=e,this.rt=n,this.ct=new HR({bucketSize:(i=this.rt.bucketSize)!==null&&i!==void 0?i:100,refillRate:(r=this.rt.refillRate)!==null&&r!==void 0?r:10,refillInterval:1e3,et:this.wt})}};var Rr=Uint8Array,Di=Uint16Array,rd=Uint32Array,Pk=new Rr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Mk=new Rr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),PA=new Rr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),YR=function(t,e){for(var n=new Di(31),i=0;i<31;++i)n[i]=e+=1<<t[i-1];var r=new rd(n[30]);for(i=1;i<30;++i)for(var s=n[i];s<n[i+1];++s)r[s]=s-n[i]<<5|i;return[n,r]},XR=YR(Pk,2),oU=XR[0],dx=XR[1];oU[28]=258,dx[258]=28;for(var MA=YR(Mk,0)[1],JR=new Di(32768),Lt=0;Lt<32768;++Lt){var Rl=(43690&Lt)>>>1|(21845&Lt)<<1;Rl=(61680&(Rl=(52428&Rl)>>>2|(13107&Rl)<<2))>>>4|(3855&Rl)<<4,JR[Lt]=((65280&Rl)>>>8|(255&Rl)<<8)>>>1}var Yf=function(t,e,n){for(var i=t.length,r=0,s=new Di(e);r<i;++r)++s[t[r]-1];var o,a=new Di(e);for(r=0;r<e;++r)a[r]=a[r-1]+s[r-1]<<1;for(o=new Di(i),r=0;r<i;++r)o[r]=JR[a[t[r]-1]++]>>>15-t[r];return o},mc=new Rr(288);for(Lt=0;Lt<144;++Lt)mc[Lt]=8;for(Lt=144;Lt<256;++Lt)mc[Lt]=9;for(Lt=256;Lt<280;++Lt)mc[Lt]=7;for(Lt=280;Lt<288;++Lt)mc[Lt]=8;var N0=new Rr(32);for(Lt=0;Lt<32;++Lt)N0[Lt]=5;var aU=Yf(mc,9),lU=Yf(N0,5),ZR=function(t){return(t/8>>0)+(7&t&&1)},QR=function(t,e,n){(n==null||n>t.length)&&(n=t.length);var i=new(t instanceof Di?Di:t instanceof rd?rd:Rr)(n-e);return i.set(t.subarray(e,n)),i},ao=function(t,e,n){n<<=7&e;var i=e/8>>0;t[i]|=n,t[i+1]|=n>>>8},Xd=function(t,e,n){n<<=7&e;var i=e/8>>0;t[i]|=n,t[i+1]|=n>>>8,t[i+2]|=n>>>16},Vb=function(t,e){for(var n=[],i=0;i<t.length;++i)t[i]&&n.push({s:i,f:t[i]});var r=n.length,s=n.slice();if(!r)return[new Rr(0),0];if(r==1){var o=new Rr(n[0].s+1);return o[n[0].s]=1,[o,1]}n.sort(function(_,E){return _.f-E.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,u=1,d=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};u!=r-1;)a=n[n[c].f<n[d].f?c++:d++],l=n[c!=u&&n[c].f<n[d].f?c++:d++],n[u++]={s:-1,f:a.f+l.f,l:a,r:l};var f=s[0].s;for(i=1;i<r;++i)s[i].s>f&&(f=s[i].s);var p=new Di(f+1),m=fx(n[u-1],p,0);if(m>e){i=0;var g=0,y=m-e,v=1<<y;for(s.sort(function(_,E){return p[E.s]-p[_.s]||_.f-E.f});i<r;++i){var b=s[i].s;if(!(p[b]>e))break;g+=v-(1<<m-p[b]),p[b]=e}for(g>>>=y;g>0;){var w=s[i].s;p[w]<e?g-=1<<e-p[w]++-1:++i}for(;i>=0&&g;--i){var k=s[i].s;p[k]==e&&(--p[k],++g)}m=e}return[new Rr(p),m]},fx=function(t,e,n){return t.s==-1?Math.max(fx(t.l,e,n+1),fx(t.r,e,n+1)):e[t.s]=n},TA=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Di(++e),i=0,r=t[0],s=1,o=function(l){n[i++]=l},a=1;a<=e;++a)if(t[a]==r&&a!=e)++s;else{if(!r&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(r),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(r);s=1,r=t[a]}return[n.subarray(0,i),e]},Jd=function(t,e){for(var n=0,i=0;i<e.length;++i)n+=t[i]*e[i];return n},hx=function(t,e,n){var i=n.length,r=ZR(e+2);t[r]=255&i,t[r+1]=i>>>8,t[r+2]=255^t[r],t[r+3]=255^t[r+1];for(var s=0;s<i;++s)t[r+s+4]=n[s];return 8*(r+4+i)},RA=function(t,e,n,i,r,s,o,a,l,c,u){ao(e,u++,n),++r[256];for(var d=Vb(r,15),f=d[0],p=d[1],m=Vb(s,15),g=m[0],y=m[1],v=TA(f),b=v[0],w=v[1],k=TA(g),_=k[0],E=k[1],C=new Di(19),N=0;N<b.length;++N)C[31&b[N]]++;for(N=0;N<_.length;++N)C[31&_[N]]++;for(var M=Vb(C,7),R=M[0],I=M[1],D=19;D>4&&!R[PA[D-1]];--D);var K,B,W,Y,te=c+5<<3,V=Jd(r,mc)+Jd(s,N0)+o,$=Jd(r,f)+Jd(s,g)+o+14+3*D+Jd(C,R)+(2*C[16]+3*C[17]+7*C[18]);if(te<=V&&te<=$)return hx(e,u,t.subarray(l,l+c));if(ao(e,u,1+($<V)),u+=2,$<V){K=Yf(f,p),B=f,W=Yf(g,y),Y=g;var ie=Yf(R,I);for(ao(e,u,w-257),ao(e,u+5,E-1),ao(e,u+10,D-4),u+=14,N=0;N<D;++N)ao(e,u+3*N,R[PA[N]]);u+=3*D;for(var ke=[b,_],Z=0;Z<2;++Z){var le=ke[Z];for(N=0;N<le.length;++N){var j=31&le[N];ao(e,u,ie[j]),u+=R[j],j>15&&(ao(e,u,le[N]>>>5&127),u+=le[N]>>>12)}}}else K=aU,B=mc,W=lU,Y=N0;for(N=0;N<a;++N)if(i[N]>255){j=i[N]>>>18&31,Xd(e,u,K[j+257]),u+=B[j+257],j>7&&(ao(e,u,i[N]>>>23&31),u+=Pk[j]);var L=31&i[N];Xd(e,u,W[L]),u+=Y[L],L>3&&(Xd(e,u,i[N]>>>5&8191),u+=Mk[L])}else Xd(e,u,K[i[N]]),u+=B[i[N]];return Xd(e,u,K[256]),u+B[256]},cU=new rd([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),uU=function(){for(var t=new rd(256),e=0;e<256;++e){for(var n=e,i=9;--i;)n=(1&n&&3988292384)^n>>>1;t[e]=n}return t}(),dU=function(){var t=4294967295;return{p:function(e){for(var n=t,i=0;i<e.length;++i)n=uU[255&n^e[i]]^n>>>8;t=n},d:function(){return 4294967295^t}}},fU=function(t,e,n,i,r){return function(s,o,a,l,c,u){var d=s.length,f=new Rr(l+d+5*(1+Math.floor(d/7e3))+c),p=f.subarray(l,f.length-c),m=0;if(!o||d<8)for(var g=0;g<=d;g+=65535){var y=g+65535;y<d?m=hx(p,m,s.subarray(g,y)):(p[g]=u,m=hx(p,m,s.subarray(g,d)))}else{for(var v=cU[o-1],b=v>>>13,w=8191&v,k=(1<<a)-1,_=new Di(32768),E=new Di(k+1),C=Math.ceil(a/3),N=2*C,M=function(Be){return(s[Be]^s[Be+1]<<C^s[Be+2]<<N)&k},R=new rd(25e3),I=new Di(288),D=new Di(32),K=0,B=0,W=(g=0,0),Y=0,te=0;g<d;++g){var V=M(g),$=32767&g,ie=E[V];if(_[$]=ie,E[V]=$,Y<=g){var ke=d-g;if((K>7e3||W>24576)&&ke>423){m=RA(s,p,0,R,I,D,B,W,te,g-te,m),W=K=B=0,te=g;for(var Z=0;Z<286;++Z)I[Z]=0;for(Z=0;Z<30;++Z)D[Z]=0}var le=2,j=0,L=w,U=$-ie&32767;if(ke>2&&V==M(g-U))for(var S=Math.min(b,ke)-1,P=Math.min(32767,g),O=Math.min(258,ke);U<=P&&--L&&$!=ie;){if(s[g+le]==s[g+le-U]){for(var T=0;T<O&&s[g+T]==s[g+T-U];++T);if(T>le){if(le=T,j=U,T>S)break;var q=Math.min(U,T-2),H=0;for(Z=0;Z<q;++Z){var ne=g-U+Z+32768&32767,J=ne-_[ne]+32768&32767;J>H&&(H=J,ie=ne)}}}U+=($=ie)-(ie=_[$])+32768&32767}if(j){R[W++]=268435456|dx[le]<<18|MA[j];var Pe=31&dx[le],je=31&MA[j];B+=Pk[Pe]+Mk[je],++I[257+Pe],++D[je],Y=g+le,++K}else R[W++]=s[g],++I[s[g]]}}m=RA(s,p,u,R,I,D,B,W,te,g-te,m)}return QR(f,0,l+ZR(m)+c)}(t,e.level==null?6:e.level,e.mem==null?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):12+e.mem,n,i,!0)},px=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},hU=function(t,e){var n=e.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=e.level<2?4:e.level==9?2:0,t[9]=3,e.mtime!=0&&px(t,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),n){t[3]=8;for(var i=0;i<=n.length;++i)t[i+10]=n.charCodeAt(i)}},pU=function(t){return 10+(t.filename&&t.filename.length+1||0)};function eO(t,e){e===void 0&&(e={});var n=dU(),i=t.length;n.p(t);var r=fU(t,e,pU(e),8),s=r.length;return hU(r,e),px(r,s-8,n.d()),px(r,s-4,i),r}function tO(t,e){var n=t.length;if(typeof TextEncoder<"u")return new TextEncoder().encode(t);for(var i=new Rr(t.length+(t.length>>>1)),r=0,s=function(c){i[r++]=c},o=0;o<n;++o){if(r+5>i.length){var a=new Rr(r+8+(n-o<<1));a.set(i),i=a}var l=t.charCodeAt(o);l<128||e?s(l):l<2048?(s(192|l>>>6),s(128|63&l)):l>55295&&l<57344?(s(240|(l=65536+(1047552&l)|1023&t.charCodeAt(++o))>>>18),s(128|l>>>12&63),s(128|l>>>6&63),s(128|63&l)):(s(224|l>>>12),s(128|l>>>6&63),s(128|63&l))}return QR(i,0,r)}function mU(t,e){return function(n){for(var i=0,r=0;r<n.length;r++)i=(i<<5)-i+n.charCodeAt(r),i|=0;return Math.abs(i)}(t)%100<ir(100*e,0,100)}var Ja="disabled",Tk="sampled",P0="active",gc="buffering",Rk="paused",Ok="trigger",qs=Ok+"_activated",ri=Ok+"_pending",to=Ok+"_"+Ja;function OA(t,e){return e.some(n=>n.matching==="regex"&&new RegExp(n.url).test(t))}class nO{constructor(e){this.xt=e}triggerStatus(e){var n=this.xt.map(i=>i.triggerStatus(e));return n.includes(qs)?qs:n.includes(ri)?ri:to}stop(){this.xt.forEach(e=>e.stop())}}class iO{constructor(e){this.xt=e}triggerStatus(e){var n=new Set;for(var i of this.xt)n.add(i.triggerStatus(e));switch(n.delete(to),n.size){case 0:return to;case 1:return Array.from(n)[0];default:return ri}}stop(){this.xt.forEach(e=>e.stop())}}class gU{triggerStatus(){return ri}stop(){}}class vU{constructor(e){this.Et=[],this.It=[],this.urlBlocked=!1,this._instance=e}onRemoteConfig(e){var n,i;this.Et=((n=e.sessionRecording)==null?void 0:n.urlTriggers)||[],this.It=((i=e.sessionRecording)==null?void 0:i.urlBlocklist)||[]}Pt(e){var n;return this.Et.length===0?to:((n=this._instance)==null?void 0:n.get_property(J1))===e?qs:ri}triggerStatus(e){var n=this.Pt(e),i=n===qs?qs:n===ri?ri:to;return this._instance.register_for_session({$sdk_debug_replay_url_trigger_status:i}),i}checkUrlTriggerConditions(e,n,i){if(G!==void 0&&G.location.href){var r=G.location.href,s=this.urlBlocked,o=OA(r,this.It);s&&o||(o&&!s?e():!o&&s&&n(),OA(r,this.Et)&&i("url"))}}stop(){}}class yU{constructor(e){this.linkedFlag=null,this.linkedFlagSeen=!1,this.Rt=()=>{},this._instance=e}triggerStatus(){var e=ri;return yt(this.linkedFlag)&&(e=to),this.linkedFlagSeen&&(e=qs),this._instance.register_for_session({$sdk_debug_replay_linked_flag_trigger_status:e}),e}onRemoteConfig(e,n){var i;if(this.linkedFlag=((i=e.sessionRecording)==null?void 0:i.linkedFlag)||null,!yt(this.linkedFlag)&&!this.linkedFlagSeen){var r=tn(this.linkedFlag)?this.linkedFlag:this.linkedFlag.flag,s=tn(this.linkedFlag)?null:this.linkedFlag.variant;this.Rt=this._instance.onFeatureFlags((o,a)=>{var l=!1;if(en(a)&&r in a){var c=a[r];l=Bs(c)?c===!0:s?c===s:!!c}this.linkedFlagSeen=l,l&&n(r,s)})}}stop(){this.Rt()}}let bU=class{constructor(e){this.Tt=[],this._instance=e}onRemoteConfig(e){var n;this.Tt=((n=e.sessionRecording)==null?void 0:n.eventTriggers)||[]}Mt(e){var n;return this.Tt.length===0?to:((n=this._instance)==null?void 0:n.get_property(Z1))===e?qs:ri}triggerStatus(e){var n=this.Mt(e),i=n===qs?qs:n===ri?ri:to;return this._instance.register_for_session({$sdk_debug_replay_event_trigger_status:i}),i}stop(){}};function wU(t){return t.isRecordingEnabled?gc:Ja}function xU(t){if(!t.receivedFlags)return gc;if(!t.isRecordingEnabled)return Ja;if(t.urlTriggerMatching.urlBlocked)return Rk;var e=t.isSampled===!0,n=new nO([t.eventTriggerMatching,t.urlTriggerMatching,t.linkedFlagMatching]).triggerStatus(t.sessionId);return e?Tk:n===qs?P0:n===ri?gc:t.isSampled===!1?Ja:P0}function SU(t){if(!t.receivedFlags)return gc;if(!t.isRecordingEnabled)return Ja;if(t.urlTriggerMatching.urlBlocked)return Rk;var e=new iO([t.eventTriggerMatching,t.urlTriggerMatching,t.linkedFlagMatching]).triggerStatus(t.sessionId),n=e!==to,i=Bs(t.isSampled);return n&&e===ri?gc:n&&e===to||i&&!t.isSampled?Ja:t.isSampled===!0?Tk:P0}var Nf="[SessionRecording]",Yn=Rn(Nf);function pm(){var t;return Ve==null||(t=Ve.__PosthogExtensions__)==null||(t=t.rrweb)==null?void 0:t.record}var kU=3e5,_U=[qr.MouseMove,qr.MouseInteraction,qr.Scroll,qr.ViewportResize,qr.Input,qr.TouchMove,qr.MediaInteraction,qr.Drag],IA=t=>({rrwebMethod:t,enqueuedAt:Date.now(),attempt:1});function Ol(t){return function(e,n){for(var i="",r=0;r<e.length;){var s=e[r++];i+=String.fromCharCode(s)}return i}(eO(tO(JSON.stringify(t))))}function DA(t){return t.type===uo.Custom&&t.data.tag==="sessionIdle"}class CU{get sessionId(){return this.Ct}get Ft(){return this._instance.config.session_recording.session_idle_threshold_ms||3e5}get started(){return this.Ot}get At(){if(!this._instance.sessionManager)throw new Error(Nf+" must be started with a valid sessionManager.");return this._instance.sessionManager}get Dt(){var e,n;return this.Lt.triggerStatus(this.sessionId)===ri?6e4:(e=(n=this._instance.config.session_recording)==null?void 0:n.full_snapshot_interval_millis)!==null&&e!==void 0?e:kU}get jt(){var e=this._instance.get_property(Ef);return Bs(e)?e:null}get Nt(){var e,n,i=(e=this.C)==null?void 0:e.data[((n=this.C)==null?void 0:n.data.length)-1],{sessionStartTimestamp:r}=this.At.checkAndGetSessionAndWindowId(!0);return i?i.timestamp-r:null}get zt(){var e=!!this._instance.get_property(X1),n=!this._instance.config.disable_session_recording;return G&&e&&n}get Ut(){var e=!!this._instance.get_property(cA),n=this._instance.config.enable_recording_console_log;return n??e}get qt(){var e,n,i,r,s,o,a=this._instance.config.session_recording.captureCanvas,l=this._instance.get_property(fA),c=(e=(n=a==null?void 0:a.recordCanvas)!==null&&n!==void 0?n:l==null?void 0:l.enabled)!==null&&e!==void 0&&e,u=(i=(r=a==null?void 0:a.canvasFps)!==null&&r!==void 0?r:l==null?void 0:l.fps)!==null&&i!==void 0?i:4,d=(s=(o=a==null?void 0:a.canvasQuality)!==null&&o!==void 0?o:l==null?void 0:l.quality)!==null&&s!==void 0?s:.4;if(typeof d=="string"){var f=parseFloat(d);d=isNaN(f)?.4:f}return{enabled:c,fps:ir(u,0,12,"canvas recording fps",4),quality:ir(d,0,1,"canvas recording quality",.4)}}get Bt(){var e,n,i=this._instance.get_property(uA),r={recordHeaders:(e=this._instance.config.session_recording)==null?void 0:e.recordHeaders,recordBody:(n=this._instance.config.session_recording)==null?void 0:n.recordBody},s=(r==null?void 0:r.recordHeaders)||(i==null?void 0:i.recordHeaders),o=(r==null?void 0:r.recordBody)||(i==null?void 0:i.recordBody),a=en(this._instance.config.capture_performance)?this._instance.config.capture_performance.network_timing:this._instance.config.capture_performance,l=!!(Bs(a)?a:i!=null&&i.capturePerformance);return s||o||l?{recordHeaders:s,recordBody:o,recordPerformance:l}:void 0}get Ht(){var e,n,i,r,s,o,a=this._instance.get_property(dA),l={maskAllInputs:(e=this._instance.config.session_recording)==null?void 0:e.maskAllInputs,maskTextSelector:(n=this._instance.config.session_recording)==null?void 0:n.maskTextSelector,blockSelector:(i=this._instance.config.session_recording)==null?void 0:i.blockSelector},c=(r=l==null?void 0:l.maskAllInputs)!==null&&r!==void 0?r:a==null?void 0:a.maskAllInputs,u=(s=l==null?void 0:l.maskTextSelector)!==null&&s!==void 0?s:a==null?void 0:a.maskTextSelector,d=(o=l==null?void 0:l.blockSelector)!==null&&o!==void 0?o:a==null?void 0:a.blockSelector;return ge(c)&&ge(u)&&ge(d)?void 0:{maskAllInputs:c==null||c,maskTextSelector:u,blockSelector:d}}get Wt(){var e=this._instance.get_property(hA);return ei(e)?e:null}get Gt(){var e=this._instance.get_property(pA);return ei(e)?e:null}get status(){return this.Jt?this.Vt({receivedFlags:this.Jt,isRecordingEnabled:this.zt,isSampled:this.jt,urlTriggerMatching:this.Kt,eventTriggerMatching:this.Yt,linkedFlagMatching:this.Xt,sessionId:this.sessionId}):gc}constructor(e){if(this.Vt=wU,this.Jt=!1,this.Qt=[],this.Zt="unknown",this.ti=Date.now(),this.Lt=new gU,this.ii=void 0,this.ei=void 0,this.ri=void 0,this.si=void 0,this.ni=void 0,this._forceAllowLocalhostNetworkCapture=!1,this.oi=()=>{this.ai()},this.li=()=>{this.ui("browser offline",{})},this.hi=()=>{this.ui("browser online",{})},this.di=()=>{if(Ce!=null&&Ce.visibilityState){var r="window "+Ce.visibilityState;this.ui(r,{})}},this._instance=e,this.Ot=!1,this.vi="/s/",this.ci=void 0,this.Jt=!1,!this._instance.sessionManager)throw Yn.error("started without valid sessionManager"),new Error(Nf+" started without valid sessionManager. This is a bug.");if(this._instance.config.__preview_experimental_cookieless_mode)throw new Error(Nf+" cannot be used with __preview_experimental_cookieless_mode.");this.Xt=new yU(this._instance),this.Kt=new vU(this._instance),this.Yt=new bU(this._instance);var{sessionId:n,windowId:i}=this.At.checkAndGetSessionAndWindowId();this.Ct=n,this.fi=i,this.C=this.pi(),this.Ft>=this.At.sessionTimeoutMs&&Yn.warn("session_idle_threshold_ms ("+this.Ft+") is greater than the session timeout ("+this.At.sessionTimeoutMs+"). Session will never be detected as idle")}startIfEnabledOrStop(e){this.zt?(this.gi(e),Kt(G,"beforeunload",this.oi),Kt(G,"offline",this.li),Kt(G,"online",this.hi),Kt(G,"visibilitychange",this.di),this.mi(),this.bi(),yt(this.ii)&&(this.ii=this._instance.on("eventCaptured",n=>{try{if(n.event==="$pageview"){var i=n!=null&&n.properties.$current_url?this.yi(n==null?void 0:n.properties.$current_url):"";if(!i)return;this.ui("$pageview",{href:i})}}catch(r){Yn.error("Could not add $pageview to rrweb session",r)}})),this.ei||(this.ei=this.At.onSessionId((n,i,r)=>{var s,o;r&&(this.ui("$session_id_change",{sessionId:n,windowId:i,changeReason:r}),(s=this._instance)==null||(s=s.persistence)==null||s.unregister(Z1),(o=this._instance)==null||(o=o.persistence)==null||o.unregister(J1))}))):this.stopRecording()}stopRecording(){var e,n,i,r;this.Ot&&this.ci&&(this.ci(),this.ci=void 0,this.Ot=!1,G==null||G.removeEventListener("beforeunload",this.oi),G==null||G.removeEventListener("offline",this.li),G==null||G.removeEventListener("online",this.hi),G==null||G.removeEventListener("visibilitychange",this.di),this.pi(),clearInterval(this.wi),(e=this.ii)==null||e.call(this),this.ii=void 0,(n=this.ni)==null||n.call(this),this.ni=void 0,(i=this.ei)==null||i.call(this),this.ei=void 0,(r=this.si)==null||r.call(this),this.si=void 0,this.Yt.stop(),this.Kt.stop(),this.Xt.stop(),Yn.info("stopped"))}Si(){var e;(e=this._instance.persistence)==null||e.unregister(Ef)}$i(e){var n,i=this.Ct!==e,r=this.Wt;if(ei(r)){var s=this.jt,o=i||!Bs(s),a=o?mU(e,r):s;o&&(a?this.ki(Tk):Yn.warn("Sample rate ("+r+") has determined that this sessionId ("+e+") will not be sent to the server."),this.ui("samplingDecisionMade",{sampleRate:r,isSampled:a})),(n=this._instance.persistence)==null||n.register({[Ef]:a})}else this.Si()}onRemoteConfig(e){var n,i,r,s;this.ui("$remote_config_received",e),this.xi(e),(n=e.sessionRecording)!=null&&n.endpoint&&(this.vi=(s=e.sessionRecording)==null?void 0:s.endpoint),this.mi(),((i=e.sessionRecording)==null?void 0:i.triggerMatchType)==="any"?(this.Vt=xU,this.Lt=new nO([this.Yt,this.Kt])):(this.Vt=SU,this.Lt=new iO([this.Yt,this.Kt])),this._instance.register_for_session({$sdk_debug_replay_remote_trigger_matching_config:(r=e.sessionRecording)==null?void 0:r.triggerMatchType}),this.Kt.onRemoteConfig(e),this.Yt.onRemoteConfig(e),this.Xt.onRemoteConfig(e,(o,a)=>{this.ki("linked_flag_matched",{flag:o,variant:a})}),this.Jt=!0,this.startIfEnabledOrStop()}mi(){ei(this.Wt)&&yt(this.si)&&(this.si=this.At.onSessionId(e=>{this.$i(e)}))}xi(e){if(this._instance.persistence){var n,i=this._instance.persistence,r=()=>{var s,o,a,l,c,u,d,f,p,m=(s=e.sessionRecording)==null?void 0:s.sampleRate,g=yt(m)?null:parseFloat(m);yt(g)&&this.Si();var y=(o=e.sessionRecording)==null?void 0:o.minimumDurationMilliseconds;i.register({[X1]:!!e.sessionRecording,[cA]:(a=e.sessionRecording)==null?void 0:a.consoleLogRecordingEnabled,[uA]:xe({capturePerformance:e.capturePerformance},(l=e.sessionRecording)==null?void 0:l.networkPayloadCapture),[dA]:(c=e.sessionRecording)==null?void 0:c.masking,[fA]:{enabled:(u=e.sessionRecording)==null?void 0:u.recordCanvas,fps:(d=e.sessionRecording)==null?void 0:d.canvasFps,quality:(f=e.sessionRecording)==null?void 0:f.canvasQuality},[hA]:g,[pA]:ge(y)?null:y,[mA]:(p=e.sessionRecording)==null?void 0:p.scriptConfig})};r(),(n=this.ri)==null||n.call(this),this.ri=this.At.onSessionId(r)}}log(e,n){var i;n===void 0&&(n="log"),(i=this._instance.sessionRecording)==null||i.onRRwebEmit({type:6,data:{plugin:"rrweb/console@1",payload:{level:n,trace:[],payload:[JSON.stringify(e)]}},timestamp:Date.now()})}gi(e){if(!ge(Object.assign)&&!ge(Array.from)&&!(this.Ot||this._instance.config.disable_session_recording||this._instance.consent.isOptedOut())){var n;this.Ot=!0,this.At.checkAndGetSessionAndWindowId(),pm()?this.Ei():(n=Ve.__PosthogExtensions__)==null||n.loadExternalDependency==null||n.loadExternalDependency(this._instance,this.Ii,i=>{if(i)return Yn.error("could not load recorder",i);this.Ei()}),Yn.info("starting"),this.status===P0&&this.ki(e||"recording_initialized")}}get Ii(){var e;return((e=this._instance)==null||(e=e.persistence)==null||(e=e.get_property(mA))==null?void 0:e.script)||"recorder"}Pi(e){var n;return e.type===3&&_U.indexOf((n=e.data)==null?void 0:n.source)!==-1}Ri(e){var n=this.Pi(e);n||this.Zt||e.timestamp-this.ti>this.Ft&&(this.Zt=!0,clearInterval(this.wi),this.ui("sessionIdle",{eventTimestamp:e.timestamp,lastActivityTimestamp:this.ti,threshold:this.Ft,bufferLength:this.C.data.length,bufferSize:this.C.size}),this.ai());var i=!1;if(n&&(this.ti=e.timestamp,this.Zt)){var r=this.Zt==="unknown";this.Zt=!1,r||(this.ui("sessionNoLongerIdle",{reason:"user activity",type:e.type}),i=!0)}if(!this.Zt){var{windowId:s,sessionId:o}=this.At.checkAndGetSessionAndWindowId(!n,e.timestamp),a=this.Ct!==o,l=this.fi!==s;this.fi=s,this.Ct=o,a||l?(this.stopRecording(),this.startIfEnabledOrStop("session_id_changed")):i&&this.Ti()}}Mi(e){try{return e.rrwebMethod(),!0}catch(n){return this.Qt.length<10?this.Qt.push({enqueuedAt:e.enqueuedAt||Date.now(),attempt:e.attempt++,rrwebMethod:e.rrwebMethod}):Yn.warn("could not emit queued rrweb event.",n,e),!1}}ui(e,n){return this.Mi(IA(()=>pm().addCustomEvent(e,n)))}Ci(){return this.Mi(IA(()=>pm().takeFullSnapshot()))}Ei(){var e,n,i,r,s={blockClass:"ph-no-capture",blockSelector:void 0,ignoreClass:"ph-ignore-input",maskTextClass:"ph-mask",maskTextSelector:void 0,maskTextFn:void 0,maskAllInputs:!0,maskInputOptions:{password:!0},maskInputFn:void 0,slimDOMOptions:{},collectFonts:!1,inlineStylesheet:!0,recordCrossOriginIframes:!1},o=this._instance.config.session_recording;for(var[a,l]of Object.entries(o||{}))a in s&&(a==="maskInputOptions"?s.maskInputOptions=xe({password:!0},l):s[a]=l);this.qt&&this.qt.enabled&&(s.recordCanvas=!0,s.sampling={canvas:this.qt.fps},s.dataURLOptions={type:"image/webp",quality:this.qt.quality}),this.Ht&&(s.maskAllInputs=(n=this.Ht.maskAllInputs)===null||n===void 0||n,s.maskTextSelector=(i=this.Ht.maskTextSelector)!==null&&i!==void 0?i:void 0,s.blockSelector=(r=this.Ht.blockSelector)!==null&&r!==void 0?r:void 0);var c=pm();if(c){this.Fi=(e=this.Fi)!==null&&e!==void 0?e:new sU(c,{refillRate:this._instance.config.session_recording.__mutationThrottlerRefillRate,bucketSize:this._instance.config.session_recording.__mutationThrottlerBucketSize,onBlockedNode:(d,f)=>{var p="Too many mutations on node '"+d+"'. Rate limiting. This could be due to SVG animations or something similar";Yn.info(p,{node:f}),this.log(Nf+" "+p,"warn")}});var u=this.Oi();this.ci=c(xe({emit:d=>{this.onRRwebEmit(d)},plugins:u},s)),this.ti=Date.now(),this.Zt=Bs(this.Zt)?this.Zt:"unknown",this.ui("$session_options",{sessionRecordingOptions:s,activePlugins:u.map(d=>d==null?void 0:d.name)}),this.ui("$posthog_config",{config:this._instance.config})}else Yn.error("onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.")}Ti(){if(this.wi&&clearInterval(this.wi),this.Zt!==!0){var e=this.Dt;e&&(this.wi=setInterval(()=>{this.Ci()},e))}}Oi(){var e,n,i=[],r=(e=Ve.__PosthogExtensions__)==null||(e=e.rrwebPlugins)==null?void 0:e.getRecordConsolePlugin;r&&this.Ut&&i.push(r());var s=(n=Ve.__PosthogExtensions__)==null||(n=n.rrwebPlugins)==null?void 0:n.getRecordNetworkPlugin;return this.Bt&&Tr(s)&&(!k7.includes(location.hostname)||this._forceAllowLocalhostNetworkCapture?i.push(s(rU(this._instance.config,this.Bt))):Yn.info("NetworkCapture not started because we are on localhost.")),i}onRRwebEmit(e){var n;if(this.Ai(),e&&en(e)){if(e.type===uo.Meta){var i=this.yi(e.data.href);if(this.Di=i,!i)return;e.data.href=i}else this.Li();if(this.Kt.checkUrlTriggerConditions(()=>this.ji(),()=>this.Ni(),f=>this.zi(f)),!this.Kt.urlBlocked||(r=e).type===uo.Custom&&r.data.tag==="recording paused"){var r;e.type===uo.FullSnapshot&&this.Ti(),e.type===uo.FullSnapshot&&this.Jt&&this.Lt.triggerStatus(this.sessionId)===ri&&this.pi();var s=this.Fi?this.Fi.throttleMutations(e):e;if(s){var o=function(f){var p=f;if(p&&en(p)&&p.type===6&&en(p.data)&&p.data.plugin==="rrweb/console@1"){p.data.payload.payload.length>10&&(p.data.payload.payload=p.data.payload.payload.slice(0,10),p.data.payload.payload.push("...[truncated]"));for(var m=[],g=0;g<p.data.payload.payload.length;g++)p.data.payload.payload[g]&&p.data.payload.payload[g].length>2e3?m.push(p.data.payload.payload[g].slice(0,2e3)+"...[truncated]"):m.push(p.data.payload.payload[g]);return p.data.payload.payload=m,f}return f}(s);if(this.Ri(o),this.Zt!==!0||DA(o)){if(DA(o)){var a=o.data.payload;if(a){var l=a.lastActivityTimestamp,c=a.threshold;o.timestamp=l+c}}var u=(n=this._instance.config.session_recording.compress_events)===null||n===void 0||n?function(f){if(A0(f)<1024)return f;try{if(f.type===uo.FullSnapshot)return xe({},f,{data:Ol(f.data),cv:"2024-10"});if(f.type===uo.IncrementalSnapshot&&f.data.source===qr.Mutation)return xe({},f,{cv:"2024-10",data:xe({},f.data,{texts:Ol(f.data.texts),attributes:Ol(f.data.attributes),removes:Ol(f.data.removes),adds:Ol(f.data.adds)})});if(f.type===uo.IncrementalSnapshot&&f.data.source===qr.StyleSheetRule)return xe({},f,{cv:"2024-10",data:xe({},f.data,{adds:f.data.adds?Ol(f.data.adds):void 0,removes:f.data.removes?Ol(f.data.removes):void 0})})}catch(p){Yn.error("could not compress event - will use uncompressed event",p)}return f}(o):o,d={$snapshot_bytes:A0(u),$snapshot_data:u,$session_id:this.Ct,$window_id:this.fi};this.status!==Ja?this.Ui(d):this.pi()}}}}}Li(){if(!this._instance.config.capture_pageview&&G){var e=this.yi(G.location.href);this.Di!==e&&(this.ui("$url_changed",{href:e}),this.Di=e)}}Ai(){if(this.Qt.length){var e=[...this.Qt];this.Qt=[],e.forEach(n=>{Date.now()-n.enqueuedAt<=2e3&&this.Mi(n)})}}yi(e){var n=this._instance.config.session_recording;if(n.maskNetworkRequestFn){var i,r={url:e};return(i=r=n.maskNetworkRequestFn(r))==null?void 0:i.url}return e}pi(){return this.C={size:0,data:[],sessionId:this.Ct,windowId:this.fi},this.C}ai(){this.qi&&(clearTimeout(this.qi),this.qi=void 0);var e=this.Gt,n=this.Nt,i=ei(n)&&n>=0,r=ei(e)&&i&&n<e;return this.status===gc||this.status===Rk||this.status===Ja||r?(this.qi=setTimeout(()=>{this.ai()},2e3),this.C):(this.C.data.length>0&&lx(this.C).forEach(s=>{this.Bi({$snapshot_bytes:s.size,$snapshot_data:s.data,$session_id:s.sessionId,$window_id:s.windowId,$lib:"web",$lib_version:po.LIB_VERSION})}),this.pi())}Ui(e){var n,i=2+(((n=this.C)==null?void 0:n.data.length)||0);!this.Zt&&(this.C.size+e.$snapshot_bytes+i>943718.4||this.C.sessionId!==this.Ct)&&(this.C=this.ai()),this.C.size+=e.$snapshot_bytes,this.C.data.push(e.$snapshot_data),this.qi||this.Zt||(this.qi=setTimeout(()=>{this.ai()},2e3))}Bi(e){this._instance.capture("$snapshot",e,{_url:this._instance.requestRouter.endpointFor("api",this.vi),_noTruncate:!0,_batchKey:"recordings",skip_client_rate_limiting:!0})}zi(e){var n;this.Lt.triggerStatus(this.sessionId)===ri&&((n=this._instance)==null||(n=n.persistence)==null||n.register({[e==="url"?J1:Z1]:this.Ct}),this.ai(),this.ki(e+"_trigger_matched"))}ji(){this.Kt.urlBlocked||(this.Kt.urlBlocked=!0,clearInterval(this.wi),Yn.info("recording paused due to URL blocker"),this.ui("recording paused",{reason:"url blocker"}))}Ni(){this.Kt.urlBlocked&&(this.Kt.urlBlocked=!1,this.Ci(),this.Ti(),this.ui("recording resumed",{reason:"left blocked url"}),Yn.info("recording resumed"))}bi(){this.Yt.Tt.length!==0&&yt(this.ni)&&(this.ni=this._instance.on("eventCaptured",e=>{try{this.Yt.Tt.includes(e.event)&&this.zi("event")}catch(n){Yn.error("Could not activate event trigger",n)}}))}overrideLinkedFlag(){this.Xt.linkedFlagSeen=!0,this.Ci(),this.ki("linked_flag_overridden")}overrideSampling(){var e;(e=this._instance.persistence)==null||e.register({[Ef]:!0}),this.Ci(),this.ki("sampling_overridden")}overrideTrigger(e){this.zi(e)}ki(e,n){this._instance.register_for_session({$session_recording_start_reason:e}),Yn.info(e.replace("_"," "),n),it(["recording_initialized","session_id_changed"],e)||this.ui(e,n)}get sdkDebugProperties(){var{sessionStartTimestamp:e}=this.At.checkAndGetSessionAndWindowId(!0);return{$recording_status:this.status,$sdk_debug_replay_internal_buffer_length:this.C.data.length,$sdk_debug_replay_internal_buffer_size:this.C.size,$sdk_debug_current_session_duration:this.Nt,$sdk_debug_session_start:e}}}var Hb=Rn("[SegmentIntegration]");function EU(t,e){var n=t.config.segment;if(!n)return e();(function(i,r){var s=i.config.segment;if(!s)return r();var o=l=>{var c=()=>l.anonymousId()||_a();i.config.get_device_id=c,l.id()&&(i.register({distinct_id:l.id(),$device_id:c()}),i.persistence.set_property(co,"identified")),r()},a=s.user();"then"in a&&Tr(a.then)?a.then(l=>o(l)):o(a)})(t,()=>{n.register((i=>{Promise&&Promise.resolve||Hb.warn("This browser does not have Promise support, and can not use the segment integration");var r=(s,o)=>{if(!o)return s;s.event.userId||s.event.anonymousId===i.get_distinct_id()||(Hb.info("No userId set, resetting PostHog"),i.reset()),s.event.userId&&s.event.userId!==i.get_distinct_id()&&(Hb.info("UserId set, identifying with PostHog"),i.identify(s.event.userId));var a=i.calculateEventProperties(o,s.event.properties);return s.event.properties=Object.assign({},a,s.event.properties),s};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:()=>!0,load:()=>Promise.resolve(),track:s=>r(s,s.event.event),page:s=>r(s,"$pageview"),identify:s=>r(s,"$identify"),screen:s=>r(s,"$screen")}})(t)).then(()=>{e()})})}var rO="posthog-js";function sO(t,e){var{organization:n,projectId:i,prefix:r,severityAllowList:s=["error"]}=e===void 0?{}:e;return o=>{var a,l,c,u,d;if(!(s==="*"||s.includes(o.level))||!t.__loaded)return o;o.tags||(o.tags={});var f=t.requestRouter.endpointFor("ui","/project/"+t.config.token+"/person/"+t.get_distinct_id());o.tags["PostHog Person URL"]=f,t.sessionRecordingStarted()&&(o.tags["PostHog Recording URL"]=t.get_session_replay_url({withTimestamp:!0}));var p=((a=o.exception)==null?void 0:a.values)||[],m=p.map(y=>xe({},y,{stacktrace:y.stacktrace?xe({},y.stacktrace,{type:"raw",frames:(y.stacktrace.frames||[]).map(v=>xe({},v,{platform:"web:javascript"}))}):void 0})),g={$exception_message:((l=p[0])==null?void 0:l.value)||o.message,$exception_type:(c=p[0])==null?void 0:c.type,$exception_personURL:f,$exception_level:o.level,$exception_list:m,$sentry_event_id:o.event_id,$sentry_exception:o.exception,$sentry_exception_message:((u=p[0])==null?void 0:u.value)||o.message,$sentry_exception_type:(d=p[0])==null?void 0:d.type,$sentry_tags:o.tags};return n&&i&&(g.$sentry_url=(r||"https://sentry.io/organizations/")+n+"/issues/?project="+i+"&query="+o.event_id),t.exceptions.sendExceptionEvent(g),o}}class AU{constructor(e,n,i,r,s){this.name=rO,this.setupOnce=function(o){o(sO(e,{organization:n,projectId:i,prefix:r,severityAllowList:s}))}}}var NU=G!=null&&G.location?E0(G.location.hash,"__posthog")||E0(location.hash,"state"):null,LA="_postHogToolbarParams",jA=Rn("[Toolbar]"),oa=function(t){return t[t.UNINITIALIZED=0]="UNINITIALIZED",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED",t}(oa||{});class PU{constructor(e){this.instance=e}Hi(e){Ve.ph_toolbar_state=e}Wi(){var e;return(e=Ve.ph_toolbar_state)!==null&&e!==void 0?e:oa.UNINITIALIZED}maybeLoadToolbar(e,n,i){if(e===void 0&&(e=void 0),n===void 0&&(n=void 0),i===void 0&&(i=void 0),!G||!Ce)return!1;e=e??G.location,i=i??G.history;try{if(!n){try{G.localStorage.setItem("test","test"),G.localStorage.removeItem("test")}catch{return!1}n=G==null?void 0:G.localStorage}var r,s=NU||E0(e.hash,"__posthog")||E0(e.hash,"state"),o=s?rA(()=>JSON.parse(atob(decodeURIComponent(s))))||rA(()=>JSON.parse(decodeURIComponent(s))):null;return o&&o.action==="ph_authorize"?((r=o).source="url",r&&Object.keys(r).length>0&&(o.desiredHash?e.hash=o.desiredHash:i?i.replaceState(i.state,"",e.pathname+e.search):e.hash="")):((r=JSON.parse(n.getItem(LA)||"{}")).source="localstorage",delete r.userIntent),!(!r.token||this.instance.config.token!==r.token)&&(this.loadToolbar(r),!0)}catch{return!1}}Gi(e){var n=Ve.ph_load_toolbar||Ve.ph_load_editor;!yt(n)&&Tr(n)?n(e,this.instance):jA.warn("No toolbar load function found")}loadToolbar(e){var n=!(Ce==null||!Ce.getElementById(MR));if(!G||n)return!1;var i=this.instance.requestRouter.region==="custom"&&this.instance.config.advanced_disable_toolbar_metrics,r=xe({token:this.instance.config.token},e,{apiURL:this.instance.requestRouter.endpointFor("ui")},i?{instrument:!1}:{});if(G.localStorage.setItem(LA,JSON.stringify(xe({},r,{source:void 0}))),this.Wi()===oa.LOADED)this.Gi(r);else if(this.Wi()===oa.UNINITIALIZED){var s;this.Hi(oa.LOADING),(s=Ve.__PosthogExtensions__)==null||s.loadExternalDependency==null||s.loadExternalDependency(this.instance,"toolbar",o=>{if(o)return jA.error("[Toolbar] Failed to load",o),void this.Hi(oa.UNINITIALIZED);this.Hi(oa.LOADED),this.Gi(r)}),Kt(G,"turbolinks:load",()=>{this.Hi(oa.UNINITIALIZED),this.loadToolbar(r)})}return!0}Ji(e){return this.loadToolbar(e)}maybeLoadEditor(e,n,i){return e===void 0&&(e=void 0),n===void 0&&(n=void 0),i===void 0&&(i=void 0),this.maybeLoadToolbar(e,n,i)}}var MU=Rn("[TracingHeaders]");class TU{constructor(e){this.Vi=void 0,this.Ki=void 0,this.nt=()=>{var n,i;ge(this.Vi)&&((n=Ve.__PosthogExtensions__)==null||(n=n.tracingHeadersPatchFns)==null||n._patchXHR(this._instance.get_distinct_id(),this._instance.sessionManager)),ge(this.Ki)&&((i=Ve.__PosthogExtensions__)==null||(i=i.tracingHeadersPatchFns)==null||i._patchFetch(this._instance.get_distinct_id(),this._instance.sessionManager))},this._instance=e}J(e){var n,i;(n=Ve.__PosthogExtensions__)!=null&&n.tracingHeadersPatchFns&&e(),(i=Ve.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,"tracing-headers",r=>{if(r)return MU.error("failed to load script",r);e()})}startIfEnabledOrStop(){var e,n;this._instance.config.__add_tracing_headers?this.J(this.nt):((e=this.Vi)==null||e.call(this),(n=this.Ki)==null||n.call(this),this.Vi=void 0,this.Ki=void 0)}}var Qo=Rn("[Web Vitals]"),$A=9e5;class RU{constructor(e){var n;this.Yi=!1,this.i=!1,this.C={url:void 0,metrics:[],firstMetricTimestamp:void 0},this.Xi=()=>{clearTimeout(this.Qi),this.C.metrics.length!==0&&(this._instance.capture("$web_vitals",this.C.metrics.reduce((i,r)=>xe({},i,{["$web_vitals_"+r.name+"_event"]:xe({},r),["$web_vitals_"+r.name+"_value"]:r.value}),{})),this.C={url:void 0,metrics:[],firstMetricTimestamp:void 0})},this.Zi=i=>{var r,s=(r=this._instance.sessionManager)==null?void 0:r.checkAndGetSessionAndWindowId(!0);if(ge(s))Qo.error("Could not read session ID. Dropping metrics!");else{this.C=this.C||{url:void 0,metrics:[],firstMetricTimestamp:void 0};var o=this.te();ge(o)||(yt(i==null?void 0:i.name)||yt(i==null?void 0:i.value)?Qo.error("Invalid metric received",i):this.ie&&i.value>=this.ie?Qo.error("Ignoring metric with value >= "+this.ie,i):(this.C.url!==o&&(this.Xi(),this.Qi=setTimeout(this.Xi,this.flushToCaptureTimeoutMs)),ge(this.C.url)&&(this.C.url=o),this.C.firstMetricTimestamp=ge(this.C.firstMetricTimestamp)?Date.now():this.C.firstMetricTimestamp,i.attribution&&i.attribution.interactionTargetElement&&(i.attribution.interactionTargetElement=void 0),this.C.metrics.push(xe({},i,{$current_url:o,$session_id:s.sessionId,$window_id:s.windowId,timestamp:Date.now()})),this.C.metrics.length===this.allowedMetrics.length&&this.Xi()))}},this.nt=()=>{var i,r,s,o,a=Ve.__PosthogExtensions__;ge(a)||ge(a.postHogWebVitalsCallbacks)||({onLCP:i,onCLS:r,onFCP:s,onINP:o}=a.postHogWebVitalsCallbacks),i&&r&&s&&o?(this.allowedMetrics.indexOf("LCP")>-1&&i(this.Zi.bind(this)),this.allowedMetrics.indexOf("CLS")>-1&&r(this.Zi.bind(this)),this.allowedMetrics.indexOf("FCP")>-1&&s(this.Zi.bind(this)),this.allowedMetrics.indexOf("INP")>-1&&o(this.Zi.bind(this)),this.i=!0):Qo.error("web vitals callbacks not loaded - not starting")},this._instance=e,this.Yi=!((n=this._instance.persistence)==null||!n.props[aA]),this.startIfEnabled()}get allowedMetrics(){var e,n,i=en(this._instance.config.capture_performance)?(e=this._instance.config.capture_performance)==null?void 0:e.web_vitals_allowed_metrics:void 0;return ge(i)?((n=this._instance.persistence)==null?void 0:n.props[lA])||["CLS","FCP","INP","LCP"]:i}get flushToCaptureTimeoutMs(){return(en(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals_delayed_flush_ms:void 0)||5e3}get ie(){var e=en(this._instance.config.capture_performance)&&ei(this._instance.config.capture_performance.__web_vitals_max_value)?this._instance.config.capture_performance.__web_vitals_max_value:$A;return 0<e&&e<=6e4?$A:e}get isEnabled(){var e=Mi==null?void 0:Mi.protocol;if(e!=="http:"&&e!=="https:")return Qo.info("Web Vitals are disabled on non-http/https protocols"),!1;var n=en(this._instance.config.capture_performance)?this._instance.config.capture_performance.web_vitals:Bs(this._instance.config.capture_performance)?this._instance.config.capture_performance:void 0;return Bs(n)?n:this.Yi}startIfEnabled(){this.isEnabled&&!this.i&&(Qo.info("enabled, starting..."),this.J(this.nt))}onRemoteConfig(e){var n=en(e.capturePerformance)&&!!e.capturePerformance.web_vitals,i=en(e.capturePerformance)?e.capturePerformance.web_vitals_allowed_metrics:void 0;this._instance.persistence&&(this._instance.persistence.register({[aA]:n}),this._instance.persistence.register({[lA]:i})),this.Yi=n,this.startIfEnabled()}J(e){var n,i;(n=Ve.__PosthogExtensions__)!=null&&n.postHogWebVitalsCallbacks&&e(),(i=Ve.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,"web-vitals",r=>{r?Qo.error("failed to load script",r):e()})}te(){var e=G?G.location.href:void 0;return e||Qo.error("Could not determine current URL"),e}}var OU=Rn("[Heatmaps]");function FA(t){return en(t)&&"clientX"in t&&"clientY"in t&&ei(t.clientX)&&ei(t.clientY)}class IU{constructor(e){var n;this.rageclicks=new zR,this.Yi=!1,this.i=!1,this.ee=null,this.instance=e,this.Yi=!((n=this.instance.persistence)==null||!n.props[q1])}get flushIntervalMilliseconds(){var e=5e3;return en(this.instance.config.capture_heatmaps)&&this.instance.config.capture_heatmaps.flush_interval_milliseconds&&(e=this.instance.config.capture_heatmaps.flush_interval_milliseconds),e}get isEnabled(){return ge(this.instance.config.capture_heatmaps)?ge(this.instance.config.enable_heatmaps)?this.Yi:this.instance.config.enable_heatmaps:this.instance.config.capture_heatmaps!==!1}startIfEnabled(){if(this.isEnabled){if(this.i)return;OU.info("starting..."),this.re(),this.ee=setInterval(this.se.bind(this),this.flushIntervalMilliseconds)}else{var e,n;clearInterval((e=this.ee)!==null&&e!==void 0?e:void 0),(n=this.ne)==null||n.stop(),this.getAndClearBuffer()}}onRemoteConfig(e){var n=!!e.heatmaps;this.instance.persistence&&this.instance.persistence.register({[q1]:n}),this.Yi=n,this.startIfEnabled()}getAndClearBuffer(){var e=this.C;return this.C=void 0,e}oe(e){this.ae(e.originalEvent,"deadclick")}re(){G&&Ce&&(Kt(G,"beforeunload",this.se.bind(this)),Kt(Ce,"click",e=>this.ae(e||(G==null?void 0:G.event)),{capture:!0}),Kt(Ce,"mousemove",e=>this.le(e||(G==null?void 0:G.event)),{capture:!0}),this.ne=new VR(this.instance,$7,this.oe.bind(this)),this.ne.startIfEnabled(),this.i=!0)}ue(e,n){var i=this.instance.scrollManager.scrollY(),r=this.instance.scrollManager.scrollX(),s=this.instance.scrollManager.scrollElement(),o=function(a,l,c){for(var u=a;u&&ly(u)&&!$a(u,"body");){if(u===c)return!1;if(it(l,G==null?void 0:G.getComputedStyle(u).position))return!0;u=DR(u)}return!1}(IR(e),["fixed","sticky"],s);return{x:e.clientX+(o?0:r),y:e.clientY+(o?0:i),target_fixed:o,type:n}}ae(e,n){var i;if(n===void 0&&(n="click"),!gA(e.target)&&FA(e)){var r=this.ue(e,n);(i=this.rageclicks)!=null&&i.isRageClick(e.clientX,e.clientY,new Date().getTime())&&this.he(xe({},r,{type:"rageclick"})),this.he(r)}}le(e){!gA(e.target)&&FA(e)&&(clearTimeout(this.de),this.de=setTimeout(()=>{this.he(this.ue(e,"mousemove"))},500))}he(e){if(G){var n=G.location.href;this.C=this.C||{},this.C[n]||(this.C[n]=[]),this.C[n].push(e)}}se(){this.C&&!uu(this.C)&&this.instance.capture("$$heatmap",{$heatmap_data:this.getAndClearBuffer()})}}class DU{constructor(e){this._instance=e}doPageView(e,n){var i,r=this.ve(e,n);return this.ce={pathname:(i=G==null?void 0:G.location.pathname)!==null&&i!==void 0?i:"",pageViewId:n,timestamp:e},this._instance.scrollManager.resetContext(),r}doPageLeave(e){var n;return this.ve(e,(n=this.ce)==null?void 0:n.pageViewId)}doEvent(){var e;return{$pageview_id:(e=this.ce)==null?void 0:e.pageViewId}}ve(e,n){var i=this.ce;if(!i)return{$pageview_id:n};var r={$pageview_id:n,$prev_pageview_id:i.pageViewId},s=this._instance.scrollManager.getContext();if(s&&!this._instance.config.disable_scroll_properties){var{maxScrollHeight:o,lastScrollY:a,maxScrollY:l,maxContentHeight:c,lastContentY:u,maxContentY:d}=s;if(!(ge(o)||ge(a)||ge(l)||ge(c)||ge(u)||ge(d))){o=Math.ceil(o),a=Math.ceil(a),l=Math.ceil(l),c=Math.ceil(c),u=Math.ceil(u),d=Math.ceil(d);var f=o<=1?1:ir(a/o,0,1),p=o<=1?1:ir(l/o,0,1),m=c<=1?1:ir(u/c,0,1),g=c<=1?1:ir(d/c,0,1);r=sn(r,{$prev_pageview_last_scroll:a,$prev_pageview_last_scroll_percentage:f,$prev_pageview_max_scroll:l,$prev_pageview_max_scroll_percentage:p,$prev_pageview_last_content:u,$prev_pageview_last_content_percentage:m,$prev_pageview_max_content:d,$prev_pageview_max_content_percentage:g})}}return i.pathname&&(r.$prev_pageview_pathname=i.pathname),i.timestamp&&(r.$prev_pageview_duration=(e.getTime()-i.timestamp.getTime())/1e3),r}}var LU=function(t){var e,n,i,r,s="";for(e=n=0,i=(t=(t+"").replace(/\r\n/g,`
`).replace(/\r/g,`
`)).length,r=0;r<i;r++){var o=t.charCodeAt(r),a=null;o<128?n++:a=o>127&&o<2048?String.fromCharCode(o>>6|192,63&o|128):String.fromCharCode(o>>12|224,o>>6&63|128,63&o|128),gl(a)||(n>e&&(s+=t.substring(e,n)),s+=a,e=n=r+1)}return n>e&&(s+=t.substring(e,t.length)),s},jU=!!W1||!!H1,BA="text/plain",M0=(t,e)=>{var[n,i]=t.split("?"),r=xe({},e);i==null||i.split("&").forEach(o=>{var[a]=o.split("=");delete r[a]});var s=_7(r);return n+"?"+(s=s?(i?i+"&":"")+s:i)},Pf=(t,e)=>JSON.stringify(t,(n,i)=>typeof i=="bigint"?i.toString():i,e),Wb=t=>{var{data:e,compression:n}=t;if(e){if(n===Ao.GZipJS){var i=eO(tO(Pf(e)),{mtime:0}),r=new Blob([i],{type:BA});return{contentType:BA,body:r,estimatedSize:r.size}}if(n===Ao.Base64){var s=function(l){var c,u,d,f,p,m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",g=0,y=0,v="",b=[];if(!l)return l;l=LU(l);do c=(p=l.charCodeAt(g++)<<16|l.charCodeAt(g++)<<8|l.charCodeAt(g++))>>18&63,u=p>>12&63,d=p>>6&63,f=63&p,b[y++]=m.charAt(c)+m.charAt(u)+m.charAt(d)+m.charAt(f);while(g<l.length);switch(v=b.join(""),l.length%3){case 1:v=v.slice(0,-2)+"==";break;case 2:v=v.slice(0,-1)+"="}return v}(Pf(e)),o=(l=>"data="+encodeURIComponent(typeof l=="string"?l:Pf(l)))(s);return{contentType:"application/x-www-form-urlencoded",body:o,estimatedSize:new Blob([o]).size}}var a=Pf(e);return{contentType:"application/json",body:a,estimatedSize:new Blob([a]).size}}},Xf=[];H1&&Xf.push({transport:"fetch",method:t=>{var e,n,{contentType:i,body:r,estimatedSize:s}=(e=Wb(t))!==null&&e!==void 0?e:{},o=new Headers;kt(t.headers,function(u,d){o.append(d,u)}),i&&o.append("Content-Type",i);var a=t.url,l=null;if(nA){var c=new nA;l={signal:c.signal,timeout:setTimeout(()=>c.abort(),t.timeout)}}H1(a,xe({method:(t==null?void 0:t.method)||"GET",headers:o,keepalive:t.method==="POST"&&(s||0)<52428.8,body:r,signal:(n=l)==null?void 0:n.signal},t.fetchOptions)).then(u=>u.text().then(d=>{var f={statusCode:u.status,text:d};if(u.status===200)try{f.json=JSON.parse(d)}catch(p){Ae.error(p)}t.callback==null||t.callback(f)})).catch(u=>{Ae.error(u),t.callback==null||t.callback({statusCode:0,text:u})}).finally(()=>l?clearTimeout(l.timeout):null)}}),W1&&Xf.push({transport:"XHR",method:t=>{var e,n=new W1;n.open(t.method||"GET",t.url,!0);var{contentType:i,body:r}=(e=Wb(t))!==null&&e!==void 0?e:{};kt(t.headers,function(s,o){n.setRequestHeader(o,s)}),i&&n.setRequestHeader("Content-Type",i),t.timeout&&(n.timeout=t.timeout),n.withCredentials=!0,n.onreadystatechange=()=>{if(n.readyState===4){var s={statusCode:n.status,text:n.responseText};if(n.status===200)try{s.json=JSON.parse(n.responseText)}catch{}t.callback==null||t.callback(s)}},n.send(r)}}),nr!=null&&nr.sendBeacon&&Xf.push({transport:"sendBeacon",method:t=>{var e=M0(t.url,{beacon:"1"});try{var n,{contentType:i,body:r}=(n=Wb(t))!==null&&n!==void 0?n:{},s=typeof r=="string"?new Blob([r],{type:i}):r;nr.sendBeacon(e,s)}catch{}}});var sd=function(t,e){if(!function(n){try{new RegExp(n)}catch{return!1}return!0}(e))return!1;try{return new RegExp(e).test(t)}catch{return!1}};function zA(t,e,n){return Pf({distinct_id:t,userPropertiesToSet:e,userPropertiesToSetOnce:n})}var $U={exact:(t,e)=>e.some(n=>t.some(i=>n===i)),is_not:(t,e)=>e.every(n=>t.every(i=>n!==i)),regex:(t,e)=>e.some(n=>t.some(i=>sd(n,i))),not_regex:(t,e)=>e.every(n=>t.every(i=>!sd(n,i))),icontains:(t,e)=>e.map(mm).some(n=>t.map(mm).some(i=>n.includes(i))),not_icontains:(t,e)=>e.map(mm).every(n=>t.map(mm).every(i=>!n.includes(i)))},mm=t=>t.toLowerCase(),FU=Rn("[Error tracking]");class BU{constructor(e){var n,i;this.fe=[],this._instance=e,this.fe=(n=(i=this._instance.persistence)==null?void 0:i.get_property(Y1))!==null&&n!==void 0?n:[]}onRemoteConfig(e){var n,i,r=(n=(i=e.errorTracking)==null?void 0:i.suppressionRules)!==null&&n!==void 0?n:[];this.fe=r,this._instance.persistence&&this._instance.persistence.register({[Y1]:this.fe})}sendExceptionEvent(e){this.pe(e)?FU.info("Skipping exception capture because a suppression rule matched"):this._instance.capture("$exception",e,{_noTruncate:!0,_batchKey:"exceptionEvent"})}pe(e){var n=e.$exception_list;if(!n||!Ut(n)||n.length===0)return!1;var i=n.reduce((r,s)=>{var{type:o,value:a}=s;return tn(o)&&o.length>0&&r.$exception_types.push(o),tn(a)&&a.length>0&&r.$exception_values.push(a),r},{$exception_types:[],$exception_values:[]});return this.fe.some(r=>{var s=r.values.map(o=>{var a,l=$U[o.operator],c=Ut(o.value)?o.value:[o.value],u=(a=i[o.key])!==null&&a!==void 0?a:[];return c.length>0&&l(c,u)});return r.type==="OR"?s.some(Boolean):s.every(Boolean)})}}var Or="Mobile",T0="iOS",zs="Android",Sh="Tablet",oO=zs+" "+Sh,aO="iPad",lO="Apple",cO=lO+" Watch",kh="Safari",od="BlackBerry",uO="Samsung",dO=uO+"Browser",fO=uO+" Internet",vc="Chrome",zU=vc+" OS",hO=vc+" "+T0,Ik="Internet Explorer",pO=Ik+" "+Or,Dk="Opera",UU=Dk+" Mini",Lk="Edge",mO="Microsoft "+Lk,Ru="Firefox",gO=Ru+" "+T0,_h="Nintendo",Ch="PlayStation",Ou="Xbox",vO=zs+" "+Or,yO=Or+" "+kh,Mf="Windows",mx=Mf+" Phone",UA="Nokia",gx="Ouya",bO="Generic",VU=bO+" "+Or.toLowerCase(),wO=bO+" "+Sh.toLowerCase(),vx="Konqueror",ui="(\\d+(\\.\\d+)?)",Gb=new RegExp("Version/"+ui),HU=new RegExp(Ou,"i"),WU=new RegExp(Ch+" \\w+","i"),GU=new RegExp(_h+" \\w+","i"),jk=new RegExp(od+"|PlayBook|BB10","i"),KU={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},qU=(t,e)=>e&&it(e,lO)||function(n){return it(n,kh)&&!it(n,vc)&&!it(n,zs)}(t),xO=function(t,e){return e=e||"",it(t," OPR/")&&it(t,"Mini")?UU:it(t," OPR/")?Dk:jk.test(t)?od:it(t,"IE"+Or)||it(t,"WPDesktop")?pO:it(t,dO)?fO:it(t,Lk)||it(t,"Edg/")?mO:it(t,"FBIOS")?"Facebook "+Or:it(t,"UCWEB")||it(t,"UCBrowser")?"UC Browser":it(t,"CriOS")?hO:it(t,"CrMo")||it(t,vc)?vc:it(t,zs)&&it(t,kh)?vO:it(t,"FxiOS")?gO:it(t.toLowerCase(),vx.toLowerCase())?vx:qU(t,e)?it(t,Or)?yO:kh:it(t,Ru)?Ru:it(t,"MSIE")||it(t,"Trident/")?Ik:it(t,"Gecko")?Ru:""},YU={[pO]:[new RegExp("rv:"+ui)],[mO]:[new RegExp(Lk+"?\\/"+ui)],[vc]:[new RegExp("("+vc+"|CrMo)\\/"+ui)],[hO]:[new RegExp("CriOS\\/"+ui)],"UC Browser":[new RegExp("(UCBrowser|UCWEB)\\/"+ui)],[kh]:[Gb],[yO]:[Gb],[Dk]:[new RegExp("(Opera|OPR)\\/"+ui)],[Ru]:[new RegExp(Ru+"\\/"+ui)],[gO]:[new RegExp("FxiOS\\/"+ui)],[vx]:[new RegExp("Konqueror[:/]?"+ui,"i")],[od]:[new RegExp(od+" "+ui),Gb],[vO]:[new RegExp("android\\s"+ui,"i")],[fO]:[new RegExp(dO+"\\/"+ui)],[Ik]:[new RegExp("(rv:|MSIE )"+ui)],Mozilla:[new RegExp("rv:"+ui)]},XU=function(t,e){var n=xO(t,e),i=YU[n];if(ge(i))return null;for(var r=0;r<i.length;r++){var s=i[r],o=t.match(s);if(o)return parseFloat(o[o.length-2])}return null},VA=[[new RegExp(Ou+"; "+Ou+" (.*?)[);]","i"),t=>[Ou,t&&t[1]||""]],[new RegExp(_h,"i"),[_h,""]],[new RegExp(Ch,"i"),[Ch,""]],[jk,[od,""]],[new RegExp(Mf,"i"),(t,e)=>{if(/Phone/.test(e)||/WPDesktop/.test(e))return[mx,""];if(new RegExp(Or).test(e)&&!/IEMobile\b/.test(e))return[Mf+" "+Or,""];var n=/Windows NT ([0-9.]+)/i.exec(e);if(n&&n[1]){var i=n[1],r=KU[i]||"";return/arm/i.test(e)&&(r="RT"),[Mf,r]}return[Mf,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,t=>{if(t&&t[3]){var e=[t[3],t[4],t[5]||"0"];return[T0,e.join(".")]}return[T0,""]}],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,t=>{var e="";return t&&t.length>=3&&(e=ge(t[2])?t[3]:t[2]),["watchOS",e]}],[new RegExp("("+zs+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+zs+")","i"),t=>{if(t&&t[2]){var e=[t[2],t[3],t[4]||"0"];return[zs,e.join(".")]}return[zs,""]}],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,t=>{var e=["Mac OS X",""];if(t&&t[1]){var n=[t[1],t[2],t[3]||"0"];e[1]=n.join(".")}return e}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[zU,""]],[/Linux|debian/i,["Linux",""]]],HA=function(t){return GU.test(t)?_h:WU.test(t)?Ch:HU.test(t)?Ou:new RegExp(gx,"i").test(t)?gx:new RegExp("("+mx+"|WPDesktop)","i").test(t)?mx:/iPad/.test(t)?aO:/iPod/.test(t)?"iPod Touch":/iPhone/.test(t)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(t)?cO:jk.test(t)?od:/(kobo)\s(ereader|touch)/i.test(t)?"Kobo":new RegExp(UA,"i").test(t)?UA:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(t)||/(kf[a-z]+)( bui|\)).+silk\//i.test(t)?"Kindle Fire":/(Android|ZTE)/i.test(t)?!new RegExp(Or).test(t)||/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(t)?/pixel[\daxl ]{1,6}/i.test(t)&&!/pixel c/i.test(t)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(t)||/lmy47v/i.test(t)&&!/QTAQZ3/i.test(t)?zs:oO:zs:new RegExp("(pda|"+Or+")","i").test(t)?VU:new RegExp(Sh,"i").test(t)&&!new RegExp(Sh+" pc","i").test(t)?wO:""},gm="https?://(.*)",uy=["gclid","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","igshid","ttclid","rdt_cid","epik","qclid","sccid","irclid","_kx"],JU=ay(["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gad_source","mc_cid"],uy),$k="<masked>",ZU=["li_fat_id"];function SO(t,e,n){if(!Ce)return{};var i,r=e?ay([],uy,n||[]):[],s=kO(Ak(Ce.URL,r,$k),t),o=(i={},kt(ZU,function(a){var l=Ks.D(a);i[a]=l||null}),i);return sn(o,s)}function kO(t,e){var n=JU.concat(e||[]),i={};return kt(n,function(r){var s=C0(t,r);i[r]=s||null}),i}function _O(t){var e=function(s){return s?s.search(gm+"google.([^/?]*)")===0?"google":s.search(gm+"bing.com")===0?"bing":s.search(gm+"yahoo.com")===0?"yahoo":s.search(gm+"duckduckgo.com")===0?"duckduckgo":null:null}(t),n=e!="yahoo"?"q":"p",i={};if(!gl(e)){i.$search_engine=e;var r=Ce?C0(Ce.referrer,n):"";r.length&&(i.ph_keyword=r)}return i}function WA(){return navigator.language||navigator.userLanguage}function CO(){return(Ce==null?void 0:Ce.referrer)||"$direct"}function EO(t,e){var n=t?ay([],uy,e||[]):[],i=Mi==null?void 0:Mi.href.substring(0,1e3);return{r:CO().substring(0,1e3),u:i?Ak(i,n,$k):void 0}}function AO(t){var e,{r:n,u:i}=t,r={$referrer:n,$referring_domain:n==null?void 0:n=="$direct"?"$direct":(e=id(n))==null?void 0:e.host};if(i){r.$current_url=i;var s=id(i);r.$host=s==null?void 0:s.host,r.$pathname=s==null?void 0:s.pathname;var o=kO(i);sn(r,o)}if(n){var a=_O(n);sn(r,a)}return r}function NO(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch{return}}function QU(){try{return new Date().getTimezoneOffset()}catch{return}}function eV(t,e){if(!Ni)return{};var n,i,r,s=t?ay([],uy,e||[]):[],[o,a]=function(l){for(var c=0;c<VA.length;c++){var[u,d]=VA[c],f=u.exec(l),p=f&&(Tr(d)?d(f,l):d);if(p)return p}return["",""]}(Ni);return sn(Ck({$os:o,$os_version:a,$browser:xO(Ni,navigator.vendor),$device:HA(Ni),$device_type:(i=Ni,r=HA(i),r===aO||r===oO||r==="Kobo"||r==="Kindle Fire"||r===wO?Sh:r===_h||r===Ou||r===Ch||r===gx?"Console":r===cO?"Wearable":r?Or:"Desktop"),$timezone:NO(),$timezone_offset:QU()}),{$current_url:Ak(Mi==null?void 0:Mi.href,s,$k),$host:Mi==null?void 0:Mi.host,$pathname:Mi==null?void 0:Mi.pathname,$raw_user_agent:Ni.length>1e3?Ni.substring(0,997)+"...":Ni,$browser_version:XU(Ni,navigator.vendor),$browser_language:WA(),$browser_language_prefix:(n=WA(),typeof n=="string"?n.split("-")[0]:void 0),$screen_height:G==null?void 0:G.screen.height,$screen_width:G==null?void 0:G.screen.width,$viewport_height:G==null?void 0:G.innerHeight,$viewport_width:G==null?void 0:G.innerWidth,$lib:"web",$lib_version:po.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:Date.now()/1e3})}var _s=Rn("[FeatureFlags]"),Kb="$active_feature_flags",Hc="$override_feature_flags",GA="$feature_flag_payloads",Zd="$override_feature_flag_payloads",KA="$feature_flag_request_id",qA=t=>{var e={};for(var[n,i]of Ig(t||{}))i&&(e[n]=i);return e},tV=t=>{var e=t.flags;return e?(t.featureFlags=Object.fromEntries(Object.keys(e).map(n=>{var i;return[n,(i=e[n].variant)!==null&&i!==void 0?i:e[n].enabled]})),t.featureFlagPayloads=Object.fromEntries(Object.keys(e).filter(n=>e[n].enabled).filter(n=>{var i;return(i=e[n].metadata)==null?void 0:i.payload}).map(n=>{var i;return[n,(i=e[n].metadata)==null?void 0:i.payload]}))):_s.warn("Using an older version of the feature flags endpoint. Please upgrade your PostHog server to the latest version"),t},nV=function(t){return t.FeatureFlags="feature_flags",t.Recordings="recordings",t}({}),YA=new Set(["7c6f7b45","66c1f69c","2727f65a","f3287528","8cc9a311","eb9f671b","c0e1c6f9","057989ec","723f4019","7b102104","563359d3","bad973ea","f6f2c4f4","59454a61","89ad1076","4edd0da1","26c52e72","a970bd2e","89cf4454","16e2b4e7","fba0e7b6","301c8488","bc65d69e","fe66a3c5","37926ca6","52a196df","d32a7577","42c4c9ef","6883bd5a","04809ff7","e59430a8","61be3dd8","7fa5500b","bf027177","8cfdba9b","96f6df5f","569798e9","0ebc61a5","1b5d7b92","17ebb0a4","f97ea965","85cc817b","3044dfc1","0c3fe5c3","b1f95fa3","8a6342e8","72365c68","12d34ad9","733853ec","3beeb69a","0645bb64","32de7f98","5dcbee21","3fe85053","ad960278","9466e5dd","7ca97b2d","2ee2a65c","28fde5f2","85c52f49","0ad823f4","f11b6cc9","aacf8af9","ab3e62b3","3a85ff15","8a67d3c4","f5e91ef1","4b873698","c5dae949","5b643d76","9599c892","34377448","2189e408","3be9ad53","1a14ce7c","2a164ded","8d53ea86","53bdb37d","bfc3f590","8df38ede","bdb81e49","38fde5c0","8d707e6d","73cbc496","f9d8a5ef","d3a9f8c4","a980d8cd","5bcfe086","e4818f68","4f11fb39","a13c6ae3","150c7fbb","98f3d658","f84f7377","1924dd9c","1f6b63b3","24748755","7c0f717c","8a87f11b","49f57f22","3c9e9234","3772f65b","dff631b6","cd609d40","f853c7f7","952db5ee","c5aa8a79","2d21b6fd","79b7164c","4110e26c","a7d3b43f","84e1b8f6","75cc0998","07f78e33","10ca9b1a","ce441b18","01eb8256","c0ac4b67","8e8e5216","db7943dd","fa133a95","498a4508","21bbda67","7dbfed69","be3ec24c","fc80b8e2"]);class iV{constructor(e){this.ge=!1,this._e=!1,this.me=!1,this.be=!1,this.ye=!1,this.we=!1,this.Se=!1,this._instance=e,this.featureFlagEventHandlers=[]}flags(){if(this._instance.config.__preview_remote_config)this.we=!0;else{var e=!this.$e&&(this._instance.config.advanced_disable_feature_flags||this._instance.config.advanced_disable_feature_flags_on_first_load);this.ke({disableFlags:e})}}get hasLoadedFlags(){return this._e}getFlags(){return Object.keys(this.getFlagVariants())}getFlagsWithDetails(){var e=this._instance.get_property(Q1),n=this._instance.get_property(Hc),i=this._instance.get_property(Zd);if(!i&&!n)return e||{};var r=sn({},e||{}),s=[...new Set([...Object.keys(i||{}),...Object.keys(n||{})])];for(var o of s){var a,l,c=r[o],u=n==null?void 0:n[o],d=ge(u)?(a=c==null?void 0:c.enabled)!==null&&a!==void 0&&a:!!u,f=ge(u)?c.variant:typeof u=="string"?u:void 0,p=i==null?void 0:i[o],m=xe({},c,{enabled:d,variant:d?f??(c==null?void 0:c.variant):void 0});d!==(c==null?void 0:c.enabled)&&(m.original_enabled=c==null?void 0:c.enabled),f!==(c==null?void 0:c.variant)&&(m.original_variant=c==null?void 0:c.variant),p&&(m.metadata=xe({},c==null?void 0:c.metadata,{payload:p,original_payload:c==null||(l=c.metadata)==null?void 0:l.payload})),r[o]=m}return this.ge||(_s.warn(" Overriding feature flag details!",{flagDetails:e,overriddenPayloads:i,finalDetails:r}),this.ge=!0),r}getFlagVariants(){var e=this._instance.get_property(du),n=this._instance.get_property(Hc);if(!n)return e||{};for(var i=sn({},e),r=Object.keys(n),s=0;s<r.length;s++)i[r[s]]=n[r[s]];return this.ge||(_s.warn(" Overriding feature flags!",{enabledFlags:e,overriddenFlags:n,finalFlags:i}),this.ge=!0),i}getFlagPayloads(){var e=this._instance.get_property(GA),n=this._instance.get_property(Zd);if(!n)return e||{};for(var i=sn({},e||{}),r=Object.keys(n),s=0;s<r.length;s++)i[r[s]]=n[r[s]];return this.ge||(_s.warn(" Overriding feature flag payloads!",{flagPayloads:e,overriddenPayloads:n,finalPayloads:i}),this.ge=!0),i}reloadFeatureFlags(){this.be||this._instance.config.advanced_disable_feature_flags||this.$e||(this.$e=setTimeout(()=>{this.ke()},5))}xe(){clearTimeout(this.$e),this.$e=void 0}ensureFlagsLoaded(){this._e||this.me||this.$e||this.reloadFeatureFlags()}setAnonymousDistinctId(e){this.$anon_distinct_id=e}setReloadingPaused(e){this.be=e}ke(e){var n;if(this.xe(),!this._instance.I())if(this.me)this.ye=!0;else{var i={token:this._instance.config.token,distinct_id:this._instance.get_distinct_id(),groups:this._instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:xe({},((n=this._instance.persistence)==null?void 0:n.get_initial_props())||{},this._instance.get_property(Af)||{}),group_properties:this._instance.get_property(Vl)};(e!=null&&e.disableFlags||this._instance.config.advanced_disable_feature_flags)&&(i.disable_flags=!0);var r=this._instance.config.__preview_flags_v2&&this._instance.config.__preview_remote_config,s=function(l){var c=function(u){for(var d=2166136261,f=0;f<u.length;f++)d^=u.charCodeAt(f),d+=(d<<1)+(d<<4)+(d<<7)+(d<<8)+(d<<24);return("00000000"+(d>>>0).toString(16)).slice(-8)}(l);return YA==null?void 0:YA.has(c)}(this._instance.config.token)?"/decide?v=4":r?"/flags/?v=2":"/flags/?v=2&config=true",o=this._instance.config.advanced_only_evaluate_survey_feature_flags?"&only_evaluate_survey_feature_flags=true":"",a=this._instance.requestRouter.endpointFor("api",s+o);r&&(i.timezone=NO()),this.me=!0,this._instance.Ee({method:"POST",url:a,data:i,compression:this._instance.config.disable_compression?void 0:Ao.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:l=>{var c,u,d=!0;if(l.statusCode===200&&(this.ye||(this.$anon_distinct_id=void 0),d=!1),this.me=!1,this.we||(this.we=!0,this._instance.Ie((u=l.json)!==null&&u!==void 0?u:{})),!i.disable_flags||this.ye)if(this.Se=!d,l.json&&(c=l.json.quotaLimited)!=null&&c.includes(nV.FeatureFlags))_s.warn("You have hit your feature flags quota limit, and will not be able to load feature flags until the quota is reset.  Please visit https://posthog.com/docs/billing/limits-alerts to learn more.");else{var f;i.disable_flags||this.receivedFeatureFlags((f=l.json)!==null&&f!==void 0?f:{},d),this.ye&&(this.ye=!1,this.ke())}}})}}getFeatureFlag(e,n){if(n===void 0&&(n={}),this._e||this.getFlags()&&this.getFlags().length>0){var i=this.getFlagVariants()[e],r=""+i,s=this._instance.get_property(KA)||void 0,o=this._instance.get_property(x0)||{};if((n.send_event||!("send_event"in n))&&(!(e in o)||!o[e].includes(r))){var a,l,c,u,d,f,p,m,g;Ut(o[e])?o[e].push(r):o[e]=[r],(a=this._instance.persistence)==null||a.register({[x0]:o});var y=this.getFeatureFlagDetails(e),v={$feature_flag:e,$feature_flag_response:i,$feature_flag_payload:this.getFeatureFlagPayload(e)||null,$feature_flag_request_id:s,$feature_flag_bootstrapped_response:((l=this._instance.config.bootstrap)==null||(l=l.featureFlags)==null?void 0:l[e])||null,$feature_flag_bootstrapped_payload:((c=this._instance.config.bootstrap)==null||(c=c.featureFlagPayloads)==null?void 0:c[e])||null,$used_bootstrap_value:!this.Se};ge(y==null||(u=y.metadata)==null?void 0:u.version)||(v.$feature_flag_version=y.metadata.version);var b,w=(d=y==null||(f=y.reason)==null?void 0:f.description)!==null&&d!==void 0?d:y==null||(p=y.reason)==null?void 0:p.code;w&&(v.$feature_flag_reason=w),y!=null&&(m=y.metadata)!=null&&m.id&&(v.$feature_flag_id=y.metadata.id),ge(y==null?void 0:y.original_variant)&&ge(y==null?void 0:y.original_enabled)||(v.$feature_flag_original_response=ge(y.original_variant)?y.original_enabled:y.original_variant),y!=null&&(g=y.metadata)!=null&&g.original_payload&&(v.$feature_flag_original_payload=y==null||(b=y.metadata)==null?void 0:b.original_payload),this._instance.capture("$feature_flag_called",v)}return i}_s.warn('getFeatureFlag for key "'+e+`" failed. Feature flags didn't load in time.`)}getFeatureFlagDetails(e){return this.getFlagsWithDetails()[e]}getFeatureFlagPayload(e){return this.getFlagPayloads()[e]}getRemoteConfigPayload(e,n){var i=this._instance.config.token;this._instance.Ee({method:"POST",url:this._instance.requestRouter.endpointFor("api","/flags/?v=2&config=true"),data:{distinct_id:this._instance.get_distinct_id(),token:i},compression:this._instance.config.disable_compression?void 0:Ao.Base64,timeout:this._instance.config.feature_flag_request_timeout_ms,callback:r=>{var s,o=(s=r.json)==null?void 0:s.featureFlagPayloads;n((o==null?void 0:o[e])||void 0)}})}isFeatureEnabled(e,n){if(n===void 0&&(n={}),this._e||this.getFlags()&&this.getFlags().length>0)return!!this.getFeatureFlag(e,n);_s.warn('isFeatureEnabled for key "'+e+`" failed. Feature flags didn't load in time.`)}addFeatureFlagsHandler(e){this.featureFlagEventHandlers.push(e)}removeFeatureFlagsHandler(e){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter(n=>n!==e)}receivedFeatureFlags(e,n){if(this._instance.persistence){this._e=!0;var i=this.getFlagVariants(),r=this.getFlagPayloads(),s=this.getFlagsWithDetails();(function(o,a,l,c,u){l===void 0&&(l={}),c===void 0&&(c={}),u===void 0&&(u={});var d=tV(o),f=d.flags,p=d.featureFlags,m=d.featureFlagPayloads;if(p){var g=o.requestId;if(Ut(p)){_s.warn("v1 of the feature flags endpoint is deprecated. Please use the latest version.");var y={};if(p)for(var v=0;v<p.length;v++)y[p[v]]=!0;a&&a.register({[Kb]:p,[du]:y})}else{var b=p,w=m,k=f;o.errorsWhileComputingFlags&&(b=xe({},l,b),w=xe({},c,w),k=xe({},u,k)),a&&a.register(xe({[Kb]:Object.keys(qA(b)),[du]:b||{},[GA]:w||{},[Q1]:k||{}},g?{[KA]:g}:{}))}}})(e,this._instance.persistence,i,r,s),this.Pe(n)}}override(e,n){n===void 0&&(n=!1),_s.warn("override is deprecated. Please use overrideFeatureFlags instead."),this.overrideFeatureFlags({flags:e,suppressWarning:n})}overrideFeatureFlags(e){if(!this._instance.__loaded||!this._instance.persistence)return _s.uninitializedWarning("posthog.featureFlags.overrideFeatureFlags");if(e===!1)return this._instance.persistence.unregister(Hc),this._instance.persistence.unregister(Zd),void this.Pe();if(e&&typeof e=="object"&&("flags"in e||"payloads"in e)){var n,i=e;if(this.ge=!!((n=i.suppressWarning)!==null&&n!==void 0&&n),"flags"in i){if(i.flags===!1)this._instance.persistence.unregister(Hc);else if(i.flags)if(Ut(i.flags)){for(var r={},s=0;s<i.flags.length;s++)r[i.flags[s]]=!0;this._instance.persistence.register({[Hc]:r})}else this._instance.persistence.register({[Hc]:i.flags})}return"payloads"in i&&(i.payloads===!1?this._instance.persistence.unregister(Zd):i.payloads&&this._instance.persistence.register({[Zd]:i.payloads})),void this.Pe()}this.Pe()}onFeatureFlags(e){if(this.addFeatureFlagsHandler(e),this._e){var{flags:n,flagVariants:i}=this.Re();e(n,i)}return()=>this.removeFeatureFlagsHandler(e)}updateEarlyAccessFeatureEnrollment(e,n){var i,r=(this._instance.get_property(Dg)||[]).find(l=>l.flagKey===e),s={["$feature_enrollment/"+e]:n},o={$feature_flag:e,$feature_enrollment:n,$set:s};r&&(o.$early_access_feature_name=r.name),this._instance.capture("$feature_enrollment_update",o),this.setPersonPropertiesForFlags(s,!1);var a=xe({},this.getFlagVariants(),{[e]:n});(i=this._instance.persistence)==null||i.register({[Kb]:Object.keys(qA(a)),[du]:a}),this.Pe()}getEarlyAccessFeatures(e,n,i){n===void 0&&(n=!1);var r=this._instance.get_property(Dg),s=i?"&"+i.map(o=>"stage="+o).join("&"):"";if(r&&!n)return e(r);this._instance.Ee({url:this._instance.requestRouter.endpointFor("api","/api/early_access_features/?token="+this._instance.config.token+s),method:"GET",callback:o=>{var a;if(o.json){var l=o.json.earlyAccessFeatures;return(a=this._instance.persistence)==null||a.register({[Dg]:l}),e(l)}}})}Re(){var e=this.getFlags(),n=this.getFlagVariants();return{flags:e.filter(i=>n[i]),flagVariants:Object.keys(n).filter(i=>n[i]).reduce((i,r)=>(i[r]=n[r],i),{})}}Pe(e){var{flags:n,flagVariants:i}=this.Re();this.featureFlagEventHandlers.forEach(r=>r(n,i,{errorsLoading:e}))}setPersonPropertiesForFlags(e,n){n===void 0&&(n=!0);var i=this._instance.get_property(Af)||{};this._instance.register({[Af]:xe({},i,e)}),n&&this._instance.reloadFeatureFlags()}resetPersonPropertiesForFlags(){this._instance.unregister(Af)}setGroupPropertiesForFlags(e,n){n===void 0&&(n=!0);var i=this._instance.get_property(Vl)||{};Object.keys(i).length!==0&&Object.keys(i).forEach(r=>{i[r]=xe({},i[r],e[r]),delete e[r]}),this._instance.register({[Vl]:xe({},i,e)}),n&&this._instance.reloadFeatureFlags()}resetGroupPropertiesForFlags(e){if(e){var n=this._instance.get_property(Vl)||{};this._instance.register({[Vl]:xe({},n,{[e]:{}})})}else this._instance.unregister(Vl)}}var rV=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"];class qb{constructor(e){this.S=e,this.props={},this.Te=!1,this.Me=(n=>{var i="";return n.token&&(i=n.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),n.persistence_name?"ph_"+n.persistence_name:"ph_"+i+"_posthog"})(e),this.B=this.Ce(e),this.load(),e.debug&&Ae.info("Persistence loaded",e.persistence,xe({},this.props)),this.update_config(e,e),this.save()}Ce(e){rV.indexOf(e.persistence.toLowerCase())===-1&&(Ae.critical("Unknown persistence type "+e.persistence+"; falling back to localStorage+cookie"),e.persistence="localStorage+cookie");var n=e.persistence.toLowerCase();return n==="localstorage"&&bn.O()?bn:n==="localstorage+cookie"&&lm.O()?lm:n==="sessionstorage"&&jn.O()?jn:n==="memory"?L7:n==="cookie"?Ks:lm.O()?lm:Ks}properties(){var e={};return kt(this.props,function(n,i){if(i===du&&en(n))for(var r=Object.keys(n),s=0;s<r.length;s++)e["$feature/"+r[s]]=n[r[s]];else a=i,l=!1,(gl(o=m7)?l:tA&&o.indexOf===tA?o.indexOf(a)!=-1:(kt(o,function(c){if(l||(l=c===a))return b0}),l))||(e[i]=n);var o,a,l}),e}load(){if(!this.Fe){var e=this.B.L(this.Me);e&&(this.props=sn({},e))}}save(){this.Fe||this.B.j(this.Me,this.props,this.Oe,this.Ae,this.De,this.S.debug)}remove(){this.B.N(this.Me,!1),this.B.N(this.Me,!0)}clear(){this.remove(),this.props={}}register_once(e,n,i){if(en(e)){ge(n)&&(n="None"),this.Oe=ge(i)?this.Le:i;var r=!1;if(kt(e,(s,o)=>{this.props.hasOwnProperty(o)&&this.props[o]!==n||(this.props[o]=s,r=!0)}),r)return this.save(),!0}return!1}register(e,n){if(en(e)){this.Oe=ge(n)?this.Le:n;var i=!1;if(kt(e,(r,s)=>{e.hasOwnProperty(s)&&this.props[s]!==r&&(this.props[s]=r,i=!0)}),i)return this.save(),!0}return!1}unregister(e){e in this.props&&(delete this.props[e],this.save())}update_campaign_params(){if(!this.Te){var e=SO(this.S.custom_campaign_params,this.S.mask_personal_data_properties,this.S.custom_personal_data_properties);uu(Ck(e))||this.register(e),this.Te=!0}}update_search_keyword(){var e;this.register((e=Ce==null?void 0:Ce.referrer)?_O(e):{})}update_referrer_info(){var e;this.register_once({$referrer:CO(),$referring_domain:Ce!=null&&Ce.referrer&&((e=id(Ce.referrer))==null?void 0:e.host)||"$direct"},void 0)}set_initial_person_info(){this.props[ix]||this.props[rx]||this.register_once({[S0]:EO(this.S.mask_personal_data_properties,this.S.custom_personal_data_properties)},void 0)}get_initial_props(){var e={};kt([rx,ix],o=>{var a=this.props[o];a&&kt(a,function(l,c){e["$initial_"+G1(c)]=l})});var n,i,r=this.props[S0];if(r){var s=(n=AO(r),i={},kt(n,function(o,a){i["$initial_"+G1(a)]=o}),i);sn(e,s)}return e}safe_merge(e){return kt(this.props,function(n,i){i in e||(e[i]=n)}),e}update_config(e,n){if(this.Le=this.Oe=e.cookie_expiration,this.set_disabled(e.disable_persistence),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie),e.persistence!==n.persistence){var i=this.Ce(e),r=this.props;this.clear(),this.B=i,this.props=r,this.save()}}set_disabled(e){this.Fe=e,this.Fe?this.remove():this.save()}set_cross_subdomain(e){e!==this.Ae&&(this.Ae=e,this.remove(),this.save())}set_secure(e){e!==this.De&&(this.De=e,this.remove(),this.save())}set_event_timer(e,n){var i=this.props[Cf]||{};i[e]=n,this.props[Cf]=i,this.save()}remove_event_timer(e){var n=(this.props[Cf]||{})[e];return ge(n)||(delete this.props[Cf][e],this.save()),n}get_property(e){return this.props[e]}set_property(e,n){this.props[e]=n,this.save()}}class PO{constructor(){this.je={},this.je={}}on(e,n){return this.je[e]||(this.je[e]=[]),this.je[e].push(n),()=>{this.je[e]=this.je[e].filter(i=>i!==n)}}emit(e,n){for(var i of this.je[e]||[])i(n);for(var r of this.je["*"]||[])r(e,n)}}class ql{constructor(e){this.Ne=new PO,this.ze=(n,i)=>this.Ue(n,i)&&this.qe(n,i)&&this.Be(n,i),this.Ue=(n,i)=>i==null||!i.event||(n==null?void 0:n.event)===(i==null?void 0:i.event),this._instance=e,this.He=new Set,this.We=new Set}init(){var e;if(!ge((e=this._instance)==null?void 0:e.Ge)){var n;(n=this._instance)==null||n.Ge((i,r)=>{this.on(i,r)})}}register(e){var n,i;if(!ge((n=this._instance)==null?void 0:n.Ge)&&(e.forEach(o=>{var a,l;(a=this.We)==null||a.add(o),(l=o.steps)==null||l.forEach(c=>{var u;(u=this.He)==null||u.add((c==null?void 0:c.event)||"")})}),(i=this._instance)!=null&&i.autocapture)){var r,s=new Set;e.forEach(o=>{var a;(a=o.steps)==null||a.forEach(l=>{l!=null&&l.selector&&s.add(l==null?void 0:l.selector)})}),(r=this._instance)==null||r.autocapture.setElementSelectors(s)}}on(e,n){var i;n!=null&&e.length!=0&&(this.He.has(e)||this.He.has(n==null?void 0:n.event))&&this.We&&((i=this.We)==null?void 0:i.size)>0&&this.We.forEach(r=>{this.Je(n,r)&&this.Ne.emit("actionCaptured",r.name)})}Ve(e){this.onAction("actionCaptured",n=>e(n))}Je(e,n){if((n==null?void 0:n.steps)==null)return!1;for(var i of n.steps)if(this.ze(e,i))return!0;return!1}onAction(e,n){return this.Ne.on(e,n)}qe(e,n){if(n!=null&&n.url){var i,r=e==null||(i=e.properties)==null?void 0:i.$current_url;if(!r||typeof r!="string"||!ql.Ke(r,n==null?void 0:n.url,(n==null?void 0:n.url_matching)||"contains"))return!1}return!0}static Ke(e,n,i){switch(i){case"regex":return!!G&&sd(e,n);case"exact":return n===e;case"contains":var r=ql.Ye(n).replace(/_/g,".").replace(/%/g,".*");return sd(e,r);default:return!1}}static Ye(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}Be(e,n){if((n!=null&&n.href||n!=null&&n.tag_name||n!=null&&n.text)&&!this.Xe(e).some(s=>!(n!=null&&n.href&&!ql.Ke(s.href||"",n==null?void 0:n.href,(n==null?void 0:n.href_matching)||"exact"))&&(n==null||!n.tag_name||s.tag_name===(n==null?void 0:n.tag_name))&&!(n!=null&&n.text&&!ql.Ke(s.text||"",n==null?void 0:n.text,(n==null?void 0:n.text_matching)||"exact")&&!ql.Ke(s.$el_text||"",n==null?void 0:n.text,(n==null?void 0:n.text_matching)||"exact"))))return!1;if(n!=null&&n.selector){var i,r=e==null||(i=e.properties)==null?void 0:i.$element_selectors;if(!r||!r.includes(n==null?void 0:n.selector))return!1}return!0}Xe(e){return(e==null?void 0:e.properties.$elements)==null?[]:e==null?void 0:e.properties.$elements}}var Nn=Rn("[Surveys]"),yx="seenSurvey_",sV=(t,e)=>{var n="$survey_"+e+"/"+t.id;return t.current_iteration&&t.current_iteration>0&&(n="$survey_"+e+"/"+t.id+"/"+t.current_iteration),n};class oV{constructor(e){this._instance=e,this.Qe=new Map,this.Ze=new Map}register(e){var n;ge((n=this._instance)==null?void 0:n.Ge)||(this.tr(e),this.ir(e))}ir(e){var n=e.filter(i=>{var r,s;return((r=i.conditions)==null?void 0:r.actions)&&((s=i.conditions)==null||(s=s.actions)==null||(s=s.values)==null?void 0:s.length)>0});n.length!==0&&(this.er==null&&(this.er=new ql(this._instance),this.er.init(),this.er.Ve(i=>{this.onAction(i)})),n.forEach(i=>{var r,s,o,a,l;i.conditions&&(r=i.conditions)!=null&&r.actions&&(s=i.conditions)!=null&&(s=s.actions)!=null&&s.values&&((o=i.conditions)==null||(o=o.actions)==null||(o=o.values)==null?void 0:o.length)>0&&((a=this.er)==null||a.register(i.conditions.actions.values),(l=i.conditions)==null||(l=l.actions)==null||(l=l.values)==null||l.forEach(c=>{if(c&&c.name){var u=this.Ze.get(c.name);u&&u.push(i.id),this.Ze.set(c.name,u||[i.id])}}))}))}tr(e){var n;e.filter(i=>{var r,s;return((r=i.conditions)==null?void 0:r.events)&&((s=i.conditions)==null||(s=s.events)==null||(s=s.values)==null?void 0:s.length)>0}).length!==0&&((n=this._instance)==null||n.Ge((i,r)=>{this.onEvent(i,r)}),e.forEach(i=>{var r;(r=i.conditions)==null||(r=r.events)==null||(r=r.values)==null||r.forEach(s=>{if(s&&s.name){var o=this.Qe.get(s.name);o&&o.push(i.id),this.Qe.set(s.name,o||[i.id])}})}))}onEvent(e,n){var i,r=((i=this._instance)==null||(i=i.persistence)==null?void 0:i.props[om])||[];if(e==="survey shown"&&n&&r.length>0){var s;Nn.info("survey event matched, removing survey from activated surveys",{event:e,eventPayload:n,existingActivatedSurveys:r});var o=n==null||(s=n.properties)==null?void 0:s.$survey_id;if(o){var a=r.indexOf(o);a>=0&&(r.splice(a,1),this.rr(r))}}else this.Qe.has(e)&&(Nn.info("survey event matched, updating activated surveys",{event:e,surveys:this.Qe.get(e)}),this.rr(r.concat(this.Qe.get(e)||[])))}onAction(e){var n,i=((n=this._instance)==null||(n=n.persistence)==null?void 0:n.props[om])||[];this.Ze.has(e)&&this.rr(i.concat(this.Ze.get(e)||[]))}rr(e){var n;(n=this._instance)==null||(n=n.persistence)==null||n.register({[om]:[...new Set(e)]})}getSurveys(){var e,n=(e=this._instance)==null||(e=e.persistence)==null?void 0:e.props[om];return n||[]}getEventToSurveys(){return this.Qe}sr(){return this.er}}class aV{constructor(e){this.nr=void 0,this.ar=null,this.lr=!1,this.ur=!1,this.hr=[],this._instance=e,this._surveyEventReceiver=null}onRemoteConfig(e){var n=e.surveys;if(yt(n))return Nn.warn("Flags not loaded yet. Not loading surveys.");var i=Ut(n);this.nr=i?n.length>0:n,Nn.info("flags response received, isSurveysEnabled: "+this.nr),this.loadIfEnabled()}reset(){localStorage.removeItem("lastSeenSurveyDate");for(var e=[],n=0;n<localStorage.length;n++){var i=localStorage.key(n);(i!=null&&i.startsWith(yx)||i!=null&&i.startsWith("inProgressSurvey_"))&&e.push(i)}e.forEach(r=>localStorage.removeItem(r))}loadIfEnabled(){if(!this.ar)if(this.ur)Nn.info("Already initializing surveys, skipping...");else if(this._instance.config.disable_surveys)Nn.info("Disabled. Not loading surveys.");else{var e=Ve==null?void 0:Ve.__PosthogExtensions__;if(e){var n=this.nr;if(!ge(n)){this.ur=!0;try{var i=e.generateSurveys;if(i)return void this.dr(i,n);var r=e.loadExternalDependency;if(!r)return void this.vr("PostHog loadExternalDependency extension not found.");r(this._instance,"surveys",s=>{s||!e.generateSurveys?this.vr("Could not load surveys script",s):this.dr(e.generateSurveys,n)})}catch(s){throw this.vr("Error initializing surveys",s),s}finally{this.ur=!1}}}else Nn.error("PostHog Extensions not found.")}}dr(e,n){this.ar=e(this._instance,n),this._surveyEventReceiver=new oV(this._instance),Nn.info("Surveys loaded successfully"),this.cr({isLoaded:!0})}vr(e,n){Nn.error(e,n),this.cr({isLoaded:!1,error:e})}onSurveysLoaded(e){return this.hr.push(e),this.ar&&this.cr({isLoaded:!0}),()=>{this.hr=this.hr.filter(n=>n!==e)}}getSurveys(e,n){if(n===void 0&&(n=!1),this._instance.config.disable_surveys)return Nn.info("Disabled. Not loading surveys."),e([]);var i=this._instance.get_property(ex);if(i&&!n)return e(i,{isLoaded:!0});if(this.lr)return e([],{isLoaded:!1,error:"Surveys are already being loaded"});try{this.lr=!0,this._instance.Ee({url:this._instance.requestRouter.endpointFor("api","/api/surveys/?token="+this._instance.config.token),method:"GET",timeout:this._instance.config.surveys_request_timeout_ms,callback:r=>{var s;this.lr=!1;var o=r.statusCode;if(o!==200||!r.json){var a="Surveys API could not be loaded, status: "+o;return Nn.error(a),e([],{isLoaded:!1,error:a})}var l,c=r.json.surveys||[],u=c.filter(d=>function(f){return!(!f.start_date||f.end_date)}(d)&&(function(f){var p;return!((p=f.conditions)==null||(p=p.events)==null||(p=p.values)==null||!p.length)}(d)||function(f){var p;return!((p=f.conditions)==null||(p=p.actions)==null||(p=p.values)==null||!p.length)}(d)));return u.length>0&&((l=this._surveyEventReceiver)==null||l.register(u)),(s=this._instance.persistence)==null||s.register({[ex]:c}),e(c,{isLoaded:!0})}})}catch(r){throw this.lr=!1,r}}cr(e){for(var n of this.hr)try{e.isLoaded?this.getSurveys(n):n([],e)}catch(i){Nn.error("Error in survey callback",i)}}getActiveMatchingSurveys(e,n){if(n===void 0&&(n=!1),!yt(this.ar))return this.ar.getActiveMatchingSurveys(e,n);Nn.warn("init was not called")}pr(e){var n=null;return this.getSurveys(i=>{var r;n=(r=i.find(s=>s.id===e))!==null&&r!==void 0?r:null}),n}gr(e){if(yt(this.ar))return{eligible:!1,reason:"SDK is not enabled or survey functionality is not yet loaded"};var n=typeof e=="string"?this.pr(e):e;return n?this.ar.checkSurveyEligibility(n):{eligible:!1,reason:"Survey not found"}}canRenderSurvey(e){if(yt(this.ar))return Nn.warn("init was not called"),{visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"};var n=this.gr(e);return{visible:n.eligible,disabledReason:n.reason}}canRenderSurveyAsync(e,n){return yt(this.ar)?(Nn.warn("init was not called"),Promise.resolve({visible:!1,disabledReason:"SDK is not enabled or survey functionality is not yet loaded"})):new Promise(i=>{this.getSurveys(r=>{var s,o=(s=r.find(l=>l.id===e))!==null&&s!==void 0?s:null;if(o){var a=this.gr(o);i({visible:a.eligible,disabledReason:a.reason})}else i({visible:!1,disabledReason:"Survey not found"})},n)})}renderSurvey(e,n){if(yt(this.ar))Nn.warn("init was not called");else{var i=this.pr(e),r=Ce==null?void 0:Ce.querySelector(n);i?r?this.ar.renderSurvey(i,r):Nn.warn("Survey element not found"):Nn.warn("Survey not found")}}}(function(t){return t.Button="button",t.Tab="tab",t.Selector="selector",t})({});(function(t){return t.TopLeft="top_left",t.TopRight="top_right",t.TopCenter="top_center",t.MiddleLeft="middle_left",t.MiddleRight="middle_right",t.MiddleCenter="middle_center",t.Left="left",t.Center="center",t.Right="right",t.NextToTrigger="next_to_trigger",t})({});(function(t){return t.Popover="popover",t.API="api",t.Widget="widget",t})({});(function(t){return t.Open="open",t.MultipleChoice="multiple_choice",t.SingleChoice="single_choice",t.Rating="rating",t.Link="link",t})({});(function(t){return t.NextQuestion="next_question",t.End="end",t.ResponseBased="response_based",t.SpecificQuestion="specific_question",t})({});(function(t){return t.Once="once",t.Recurring="recurring",t.Always="always",t})({});var Yb=function(t){return t.SHOWN="survey shown",t.DISMISSED="survey dismissed",t.SENT="survey sent",t}({}),XA=function(t){return t.SURVEY_ID="$survey_id",t.SURVEY_NAME="$survey_name",t.SURVEY_RESPONSE="$survey_response",t.SURVEY_ITERATION="$survey_iteration",t.SURVEY_ITERATION_START_DATE="$survey_iteration_start_date",t.SURVEY_PARTIALLY_COMPLETED="$survey_partially_completed",t.SURVEY_SUBMISSION_ID="$survey_submission_id",t.SURVEY_QUESTIONS="$survey_questions",t.SURVEY_COMPLETED="$survey_completed",t}({}),JA=Rn("[RateLimiter]");let lV=class{constructor(e){var n,i;this.serverLimits={},this.lastEventRateLimited=!1,this.checkForLimiting=r=>{var s=r.text;if(s&&s.length)try{(JSON.parse(s).quota_limited||[]).forEach(o=>{JA.info((o||"events")+" is quota limited."),this.serverLimits[o]=new Date().getTime()+6e4})}catch(o){return void JA.warn('could not rate limit - continuing. Error: "'+(o==null?void 0:o.message)+'"',{text:s})}},this.instance=e,this.captureEventsPerSecond=((n=e.config.rate_limiting)==null?void 0:n.events_per_second)||10,this.captureEventsBurstLimit=Math.max(((i=e.config.rate_limiting)==null?void 0:i.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond),this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}clientRateLimitContext(e){var n,i,r;e===void 0&&(e=!1);var s=new Date().getTime(),o=(n=(i=this.instance.persistence)==null?void 0:i.get_property(nx))!==null&&n!==void 0?n:{tokens:this.captureEventsBurstLimit,last:s};o.tokens+=(s-o.last)/1e3*this.captureEventsPerSecond,o.last=s,o.tokens>this.captureEventsBurstLimit&&(o.tokens=this.captureEventsBurstLimit);var a=o.tokens<1;return a||e||(o.tokens=Math.max(0,o.tokens-1)),!a||this.lastEventRateLimited||e||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:"posthog-js client rate limited. Config is set to "+this.captureEventsPerSecond+" events per second and "+this.captureEventsBurstLimit+" events burst limit."},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=a,(r=this.instance.persistence)==null||r.set_property(nx,o),{isRateLimited:a,remainingTokens:o.tokens}}isServerRateLimited(e){var n=this.serverLimits[e||"events"]||!1;return n!==!1&&new Date().getTime()<n}};var Il=Rn("[RemoteConfig]");class cV{constructor(e){this._instance=e}get remoteConfig(){var e;return(e=Ve._POSTHOG_REMOTE_CONFIG)==null||(e=e[this._instance.config.token])==null?void 0:e.config}_r(e){var n,i;(n=Ve.__PosthogExtensions__)!=null&&n.loadExternalDependency?(i=Ve.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,"remote-config",()=>e(this.remoteConfig)):(Il.error("PostHog Extensions not found. Cannot load remote config."),e())}mr(e){this._instance.Ee({method:"GET",url:this._instance.requestRouter.endpointFor("assets","/array/"+this._instance.config.token+"/config"),callback:n=>{e(n.json)}})}load(){try{if(this.remoteConfig)return Il.info("Using preloaded remote config",this.remoteConfig),void this.Ie(this.remoteConfig);if(this._instance.I())return void Il.warn("Remote config is disabled. Falling back to local config.");this._r(e=>{if(!e)return Il.info("No config found after loading remote JS config. Falling back to JSON."),void this.mr(n=>{this.Ie(n)});this.Ie(e)})}catch(e){Il.error("Error loading remote config",e)}}Ie(e){e?this._instance.config.__preview_remote_config?(this._instance.Ie(e),e.hasFeatureFlags!==!1&&this._instance.featureFlags.ensureFlagsLoaded()):Il.info("__preview_remote_config is disabled. Logging config instead",e):Il.error("Failed to fetch remote config from PostHog.")}}var bx=3e3;class uV{constructor(e,n){this.br=!0,this.yr=[],this.wr=ir((n==null?void 0:n.flush_interval_ms)||bx,250,5e3,"flush interval",bx),this.Sr=e}enqueue(e){this.yr.push(e),this.$r||this.kr()}unload(){this.Er();var e=this.yr.length>0?this.Ir():{},n=Object.values(e);[...n.filter(i=>i.url.indexOf("/e")===0),...n.filter(i=>i.url.indexOf("/e")!==0)].map(i=>{this.Sr(xe({},i,{transport:"sendBeacon"}))})}enable(){this.br=!1,this.kr()}kr(){var e=this;this.br||(this.$r=setTimeout(()=>{if(this.Er(),this.yr.length>0){var n=this.Ir(),i=function(){var s=n[r],o=new Date().getTime();s.data&&Ut(s.data)&&kt(s.data,a=>{a.offset=Math.abs(a.timestamp-o),delete a.timestamp}),e.Sr(s)};for(var r in n)i()}},this.wr))}Er(){clearTimeout(this.$r),this.$r=void 0}Ir(){var e={};return kt(this.yr,n=>{var i,r=n,s=(r?r.batchKey:null)||r.url;ge(e[s])&&(e[s]=xe({},r,{data:[]})),(i=e[s].data)==null||i.push(r.data)}),this.yr=[],e}}var dV=["retriesPerformedSoFar"];class fV{constructor(e){this.Pr=!1,this.Rr=3e3,this.yr=[],this._instance=e,this.yr=[],this.Tr=!0,!ge(G)&&"onLine"in G.navigator&&(this.Tr=G.navigator.onLine,Kt(G,"online",()=>{this.Tr=!0,this.se()}),Kt(G,"offline",()=>{this.Tr=!1}))}get length(){return this.yr.length}retriableRequest(e){var{retriesPerformedSoFar:n}=e,i=ER(e,dV);ei(n)&&n>0&&(i.url=M0(i.url,{retry_count:n})),this._instance.Ee(xe({},i,{callback:r=>{r.statusCode!==200&&(r.statusCode<400||r.statusCode>=500)&&(n??0)<10?this.Mr(xe({retriesPerformedSoFar:n},i)):i.callback==null||i.callback(r)}}))}Mr(e){var n=e.retriesPerformedSoFar||0;e.retriesPerformedSoFar=n+1;var i=function(o){var a=3e3*Math.pow(2,o),l=a/2,c=Math.min(18e5,a),u=(Math.random()-.5)*(c-l);return Math.ceil(c+u)}(n),r=Date.now()+i;this.yr.push({retryAt:r,requestOptions:e});var s="Enqueued failed request for retry in "+i;navigator.onLine||(s+=" (Browser is offline)"),Ae.warn(s),this.Pr||(this.Pr=!0,this.Cr())}Cr(){this.Fr&&clearTimeout(this.Fr),this.Fr=setTimeout(()=>{this.Tr&&this.yr.length>0&&this.se(),this.Cr()},this.Rr)}se(){var e=Date.now(),n=[],i=this.yr.filter(s=>s.retryAt<e||(n.push(s),!1));if(this.yr=n,i.length>0)for(var{requestOptions:r}of i)this.retriableRequest(r)}unload(){for(var{requestOptions:e}of(this.Fr&&(clearTimeout(this.Fr),this.Fr=void 0),this.yr))try{this._instance.Ee(xe({},e,{transport:"sendBeacon"}))}catch(n){Ae.error(n)}this.yr=[]}}class hV{constructor(e){this.Or=()=>{var n,i,r,s;this.Ar||(this.Ar={});var o=this.scrollElement(),a=this.scrollY(),l=o?Math.max(0,o.scrollHeight-o.clientHeight):0,c=a+((o==null?void 0:o.clientHeight)||0),u=(o==null?void 0:o.scrollHeight)||0;this.Ar.lastScrollY=Math.ceil(a),this.Ar.maxScrollY=Math.max(a,(n=this.Ar.maxScrollY)!==null&&n!==void 0?n:0),this.Ar.maxScrollHeight=Math.max(l,(i=this.Ar.maxScrollHeight)!==null&&i!==void 0?i:0),this.Ar.lastContentY=c,this.Ar.maxContentY=Math.max(c,(r=this.Ar.maxContentY)!==null&&r!==void 0?r:0),this.Ar.maxContentHeight=Math.max(u,(s=this.Ar.maxContentHeight)!==null&&s!==void 0?s:0)},this._instance=e}getContext(){return this.Ar}resetContext(){var e=this.Ar;return setTimeout(this.Or,0),e}startMeasuringScrollPosition(){Kt(G,"scroll",this.Or,{capture:!0}),Kt(G,"scrollend",this.Or,{capture:!0}),Kt(G,"resize",this.Or)}scrollElement(){if(!this._instance.config.scroll_root_selector)return G==null?void 0:G.document.documentElement;var e=Ut(this._instance.config.scroll_root_selector)?this._instance.config.scroll_root_selector:[this._instance.config.scroll_root_selector];for(var n of e){var i=G==null?void 0:G.document.querySelector(n);if(i)return i}}scrollY(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollTop||0}return G&&(G.scrollY||G.pageYOffset||G.document.documentElement.scrollTop)||0}scrollX(){if(this._instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollLeft||0}return G&&(G.scrollX||G.pageXOffset||G.document.documentElement.scrollLeft)||0}}var pV=t=>EO(t==null?void 0:t.config.mask_personal_data_properties,t==null?void 0:t.config.custom_personal_data_properties);class mV{constructor(e,n,i,r){this.Dr=s=>{var o=this.Lr();if(!o||o.sessionId!==s){var a={sessionId:s,props:this.jr(this._instance)};this.Nr.register({[tx]:a})}},this._instance=e,this.zr=n,this.Nr=i,this.jr=r||pV,this.zr.onSessionId(this.Dr)}Lr(){return this.Nr.props[tx]}getSetOnceProps(){var e,n=(e=this.Lr())==null?void 0:e.props;return n?"r"in n?AO(n):{$referring_domain:n.referringDomain,$pathname:n.initialPathName,utm_source:n.utm_source,utm_campaign:n.utm_campaign,utm_medium:n.utm_medium,utm_content:n.utm_content,utm_term:n.utm_term}:{}}getSessionProps(){var e={};return kt(Ck(this.getSetOnceProps()),(n,i)=>{i==="$current_url"&&(i="url"),e["$session_entry_"+G1(i)]=n}),e}}var ZA=Rn("[SessionId]");class gV{constructor(e,n,i){var r;if(this.Ur=[],!e.persistence)throw new Error("SessionIdManager requires a PostHogPersistence instance");if(e.config.__preview_experimental_cookieless_mode)throw new Error("SessionIdManager cannot be used with __preview_experimental_cookieless_mode");this.S=e.config,this.Nr=e.persistence,this.fi=void 0,this.Ct=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this.qr=n||_a,this.Br=i||_a;var s=this.S.persistence_name||this.S.token,o=this.S.session_idle_timeout_seconds||1800;if(this._sessionTimeoutMs=1e3*ir(o,60,36e3,"session_idle_timeout_seconds",1800),e.register({$configured_session_timeout_ms:this._sessionTimeoutMs}),this.Hr(),this.Wr="ph_"+s+"_window_id",this.Gr="ph_"+s+"_primary_window_exists",this.Jr()){var a=jn.L(this.Wr),l=jn.L(this.Gr);a&&!l?this.fi=a:jn.N(this.Wr),jn.j(this.Gr,!0)}if((r=this.S.bootstrap)!=null&&r.sessionID)try{var c=(u=>{var d=u.replace(/-/g,"");if(d.length!==32)throw new Error("Not a valid UUID");if(d[12]!=="7")throw new Error("Not a UUIDv7");return parseInt(d.substring(0,12),16)})(this.S.bootstrap.sessionID);this.Vr(this.S.bootstrap.sessionID,new Date().getTime(),c)}catch(u){ZA.error("Invalid sessionID in bootstrap",u)}this.Kr()}get sessionTimeoutMs(){return this._sessionTimeoutMs}onSessionId(e){return ge(this.Ur)&&(this.Ur=[]),this.Ur.push(e),this.Ct&&e(this.Ct,this.fi),()=>{this.Ur=this.Ur.filter(n=>n!==e)}}Jr(){return this.S.persistence!=="memory"&&!this.Nr.Fe&&jn.O()}Yr(e){e!==this.fi&&(this.fi=e,this.Jr()&&jn.j(this.Wr,e))}Xr(){return this.fi?this.fi:this.Jr()?jn.L(this.Wr):null}Vr(e,n,i){e===this.Ct&&n===this._sessionActivityTimestamp&&i===this._sessionStartTimestamp||(this._sessionStartTimestamp=i,this._sessionActivityTimestamp=n,this.Ct=e,this.Nr.register({[w0]:[n,e,i]}))}Qr(){if(this.Ct&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this.Ct,this._sessionStartTimestamp];var e=this.Nr.props[w0];return Ut(e)&&e.length===2&&e.push(e[0]),e||[0,null,0]}resetSessionId(){this.Vr(null,null,null)}Kr(){Kt(G,"beforeunload",()=>{this.Jr()&&jn.N(this.Gr)},{capture:!1})}checkAndGetSessionAndWindowId(e,n){if(e===void 0&&(e=!1),n===void 0&&(n=null),this.S.__preview_experimental_cookieless_mode)throw new Error("checkAndGetSessionAndWindowId should not be called in __preview_experimental_cookieless_mode");var i=n||new Date().getTime(),[r,s,o]=this.Qr(),a=this.Xr(),l=ei(o)&&o>0&&Math.abs(i-o)>864e5,c=!1,u=!s,d=!e&&Math.abs(i-r)>this.sessionTimeoutMs;u||d||l?(s=this.qr(),a=this.Br(),ZA.info("new session ID generated",{sessionId:s,windowId:a,changeReason:{noSessionId:u,activityTimeout:d,sessionPastMaximumLength:l}}),o=i,c=!0):a||(a=this.Br(),c=!0);var f=r===0||!e||l?i:r,p=o===0?new Date().getTime():o;return this.Yr(a),this.Vr(s,f,p),e||this.Hr(),c&&this.Ur.forEach(m=>m(s,a,c?{noSessionId:u,activityTimeout:d,sessionPastMaximumLength:l}:void 0)),{sessionId:s,windowId:a,sessionStartTimestamp:p,changeReason:c?{noSessionId:u,activityTimeout:d,sessionPastMaximumLength:l}:void 0,lastActivityTimestamp:r}}Hr(){clearTimeout(this.Zr),this.Zr=setTimeout(()=>{this.resetSessionId()},1.1*this.sessionTimeoutMs)}}var vV=["$set_once","$set"],ea=Rn("[SiteApps]");class yV{constructor(e){this._instance=e,this.ts=[],this.apps={}}get isEnabled(){return!!this._instance.config.opt_in_site_apps}es(e,n){if(n){var i=this.globalsForEvent(n);this.ts.push(i),this.ts.length>1e3&&(this.ts=this.ts.slice(10))}}get siteAppLoaders(){var e;return(e=Ve._POSTHOG_REMOTE_CONFIG)==null||(e=e[this._instance.config.token])==null?void 0:e.siteApps}init(){if(this.isEnabled){var e=this._instance.Ge(this.es.bind(this));this.rs=()=>{e(),this.ts=[],this.rs=void 0}}}globalsForEvent(e){var n,i,r,s,o,a,l;if(!e)throw new Error("Event payload is required");var c={},u=this._instance.get_property("$groups")||[],d=this._instance.get_property("$stored_group_properties")||{};for(var[f,p]of Object.entries(d))c[f]={id:u[f],type:f,properties:p};var{$set_once:m,$set:g}=e;return{event:xe({},ER(e,vV),{properties:xe({},e.properties,g?{$set:xe({},(n=(i=e.properties)==null?void 0:i.$set)!==null&&n!==void 0?n:{},g)}:{},m?{$set_once:xe({},(r=(s=e.properties)==null?void 0:s.$set_once)!==null&&r!==void 0?r:{},m)}:{}),elements_chain:(o=(a=e.properties)==null?void 0:a.$elements_chain)!==null&&o!==void 0?o:"",distinct_id:(l=e.properties)==null?void 0:l.distinct_id}),person:{properties:this._instance.get_property("$stored_person_properties")},groups:c}}setupSiteApp(e){var n=this.apps[e.id],i=()=>{var a;!n.errored&&this.ts.length&&(ea.info("Processing "+this.ts.length+" events for site app with id "+e.id),this.ts.forEach(l=>n.processEvent==null?void 0:n.processEvent(l)),n.processedBuffer=!0),Object.values(this.apps).every(l=>l.processedBuffer||l.errored)&&((a=this.rs)==null||a.call(this))},r=!1,s=a=>{n.errored=!a,n.loaded=!0,ea.info("Site app with id "+e.id+" "+(a?"loaded":"errored")),r&&i()};try{var{processEvent:o}=e.init({posthog:this._instance,callback:a=>{s(a)}});o&&(n.processEvent=o),r=!0}catch(a){ea.error("Error while initializing PostHog app with config id "+e.id,a),s(!1)}if(r&&n.loaded)try{i()}catch(a){ea.error("Error while processing buffered events PostHog app with config id "+e.id,a),n.errored=!0}}ss(){var e=this.siteAppLoaders||[];for(var n of e)this.apps[n.id]={id:n.id,loaded:!1,errored:!1,processedBuffer:!1};for(var i of e)this.setupSiteApp(i)}ns(e){if(Object.keys(this.apps).length!==0){var n=this.globalsForEvent(e);for(var i of Object.values(this.apps))try{i.processEvent==null||i.processEvent(n)}catch(r){ea.error("Error while processing event "+e.event+" for site app "+i.id,r)}}}onRemoteConfig(e){var n,i,r,s=this;if((n=this.siteAppLoaders)!=null&&n.length)return this.isEnabled?(this.ss(),void this._instance.on("eventCaptured",c=>this.ns(c))):void ea.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.');if((i=this.rs)==null||i.call(this),(r=e.siteApps)!=null&&r.length)if(this.isEnabled){var o=function(c){var u;Ve["__$$ph_site_app_"+c]=s._instance,(u=Ve.__PosthogExtensions__)==null||u.loadSiteApp==null||u.loadSiteApp(s._instance,l,d=>{if(d)return ea.error("Error while initializing PostHog app with config id "+c,d)})};for(var{id:a,url:l}of e.siteApps)o(a)}else ea.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}}var bV=["amazonbot","amazonproductbot","app.hypefactors.com","applebot","archive.org_bot","awariobot","backlinksextendedbot","baiduspider","bingbot","bingpreview","chrome-lighthouse","dataforseobot","deepscan","duckduckbot","facebookexternal","facebookcatalog","http://yandex.com/bots","hubspot","ia_archiver","leikibot","linkedinbot","meta-externalagent","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","sebot-wa","sitebulb","slackbot","slurp","trendictionbot","turnitin","twitterbot","vercelbot","yahoo! slurp","yandexbot","zoombot","bot.htm","bot.php","(bot;","bot/","crawler","ahrefsbot","ahrefssiteaudit","semrushbot","siteauditbot","splitsignalbot","gptbot","oai-searchbot","chatgpt-user","perplexitybot","better uptime bot","sentryuptimebot","uptimerobot","headlesschrome","cypress","google-hoteladsverifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleother","google-cloudvertexbot","googleweblight","mediapartners-google","storebot-google","google-inspectiontool","bytespider"],QA=function(t,e){if(!t)return!1;var n=t.toLowerCase();return bV.concat(e||[]).some(i=>{var r=i.toLowerCase();return n.indexOf(r)!==-1})},MO=function(t,e){if(!t)return!1;var n=t.userAgent;if(n&&QA(n,e))return!0;try{var i=t==null?void 0:t.userAgentData;if(i!=null&&i.brands&&i.brands.some(r=>QA(r==null?void 0:r.brand,e)))return!0}catch{}return!!t.webdriver},Tf=function(t){return t.US="us",t.EU="eu",t.CUSTOM="custom",t}({}),eN="i.posthog.com";class wV{constructor(e){this.os={},this.instance=e}get apiHost(){var e=this.instance.config.api_host.trim().replace(/\/$/,"");return e==="https://app.posthog.com"?"https://us.i.posthog.com":e}get uiHost(){var e,n=(e=this.instance.config.ui_host)==null?void 0:e.replace(/\/$/,"");return n||(n=this.apiHost.replace("."+eN,".posthog.com")),n==="https://app.posthog.com"?"https://us.posthog.com":n}get region(){return this.os[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.os[this.apiHost]=Tf.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this.os[this.apiHost]=Tf.EU:this.os[this.apiHost]=Tf.CUSTOM),this.os[this.apiHost]}endpointFor(e,n){if(n===void 0&&(n=""),n&&(n=n[0]==="/"?n:"/"+n),e==="ui")return this.uiHost+n;if(this.region===Tf.CUSTOM)return this.apiHost+n;var i=eN+n;switch(e){case"assets":return"https://"+this.region+"-assets."+i;case"api":return"https://"+this.region+"."+i}}}var xV={icontains:(t,e)=>!!G&&e.href.toLowerCase().indexOf(t.toLowerCase())>-1,not_icontains:(t,e)=>!!G&&e.href.toLowerCase().indexOf(t.toLowerCase())===-1,regex:(t,e)=>!!G&&sd(e.href,t),not_regex:(t,e)=>!!G&&!sd(e.href,t),exact:(t,e)=>e.href===t,is_not:(t,e)=>e.href!==t};let SV=class di{constructor(e){var n=this;this.getWebExperimentsAndEvaluateDisplayLogic=function(i){i===void 0&&(i=!1),n.getWebExperiments(r=>{di.ls("retrieved web experiments from the server"),n.us=new Map,r.forEach(s=>{if(s.feature_flag_key){var o;n.us&&(di.ls("setting flag key ",s.feature_flag_key," to web experiment ",s),(o=n.us)==null||o.set(s.feature_flag_key,s));var a=n._instance.getFeatureFlag(s.feature_flag_key);tn(a)&&s.variants[a]&&n.hs(s.name,a,s.variants[a].transforms)}else if(s.variants)for(var l in s.variants){var c=s.variants[l];di.ds(c)&&n.hs(s.name,l,c.transforms)}})},i)},this._instance=e,this._instance.onFeatureFlags(i=>{this.onFeatureFlags(i)})}onFeatureFlags(e){if(this._is_bot())di.ls("Refusing to render web experiment since the viewer is a likely bot");else if(!this._instance.config.disable_web_experiments){if(yt(this.us))return this.us=new Map,this.loadIfEnabled(),void this.previewWebExperiment();di.ls("applying feature flags",e),e.forEach(n=>{var i;if(this.us&&(i=this.us)!=null&&i.has(n)){var r,s=this._instance.getFeatureFlag(n),o=(r=this.us)==null?void 0:r.get(n);s&&o!=null&&o.variants[s]&&this.hs(o.name,s,o.variants[s].transforms)}})}}previewWebExperiment(){var e=di.getWindowLocation();if(e!=null&&e.search){var n=C0(e==null?void 0:e.search,"__experiment_id"),i=C0(e==null?void 0:e.search,"__experiment_variant");n&&i&&(di.ls("previewing web experiments "+n+" && "+i),this.getWebExperiments(r=>{this.vs(parseInt(n),i,r)},!1,!0))}}loadIfEnabled(){this._instance.config.disable_web_experiments||this.getWebExperimentsAndEvaluateDisplayLogic()}getWebExperiments(e,n,i){if(this._instance.config.disable_web_experiments&&!i)return e([]);var r=this._instance.get_property("$web_experiments");if(r&&!n)return e(r);this._instance.Ee({url:this._instance.requestRouter.endpointFor("api","/api/web_experiments/?token="+this._instance.config.token),method:"GET",callback:s=>{if(s.statusCode!==200||!s.json)return e([]);var o=s.json.experiments||[];return e(o)}})}vs(e,n,i){var r=i.filter(s=>s.id===e);r&&r.length>0&&(di.ls("Previewing web experiment ["+r[0].name+"] with variant ["+n+"]"),this.hs(r[0].name,n,r[0].variants[n].transforms))}static ds(e){return!yt(e.conditions)&&di.cs(e)&&di.fs(e)}static cs(e){var n;if(yt(e.conditions)||yt((n=e.conditions)==null?void 0:n.url))return!0;var i,r,s,o=di.getWindowLocation();return!!o&&((i=e.conditions)==null||!i.url||xV[(r=(s=e.conditions)==null?void 0:s.urlMatchType)!==null&&r!==void 0?r:"icontains"](e.conditions.url,o))}static getWindowLocation(){return G==null?void 0:G.location}static fs(e){var n;if(yt(e.conditions)||yt((n=e.conditions)==null?void 0:n.utm))return!0;var i=SO();if(i.utm_source){var r,s,o,a,l,c,u,d,f=(r=e.conditions)==null||(r=r.utm)==null||!r.utm_campaign||((s=e.conditions)==null||(s=s.utm)==null?void 0:s.utm_campaign)==i.utm_campaign,p=(o=e.conditions)==null||(o=o.utm)==null||!o.utm_source||((a=e.conditions)==null||(a=a.utm)==null?void 0:a.utm_source)==i.utm_source,m=(l=e.conditions)==null||(l=l.utm)==null||!l.utm_medium||((c=e.conditions)==null||(c=c.utm)==null?void 0:c.utm_medium)==i.utm_medium,g=(u=e.conditions)==null||(u=u.utm)==null||!u.utm_term||((d=e.conditions)==null||(d=d.utm)==null?void 0:d.utm_term)==i.utm_term;return f&&m&&g&&p}return!1}static ls(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];Ae.info("[WebExperiments] "+e,i)}hs(e,n,i){this._is_bot()?di.ls("Refusing to render web experiment since the viewer is a likely bot"):n!=="control"?i.forEach(r=>{if(r.selector){var s;di.ls("applying transform of variant "+n+" for experiment "+e+" ",r);var o=(s=document)==null?void 0:s.querySelectorAll(r.selector);o==null||o.forEach(a=>{var l=a;r.html&&(l.innerHTML=r.html),r.css&&l.setAttribute("style",r.css)})}}):di.ls("Control variants leave the page unmodified.")}_is_bot(){return nr&&this._instance?MO(nr,this._instance.config.custom_blocked_useragents):void 0}};var kV=Rn("[PostHog ExternalIntegrations]"),_V={intercom:"intercom-integration",crispChat:"crisp-chat-integration"};let CV=class{constructor(e){this._instance=e}J(e,n){var i;(i=Ve.__PosthogExtensions__)==null||i.loadExternalDependency==null||i.loadExternalDependency(this._instance,e,r=>{if(r)return kV.error("failed to load script",r);n()})}startIfEnabledOrStop(){var e=this,n=function(o){var a,l,c;!r||(a=Ve.__PosthogExtensions__)!=null&&(a=a.integrations)!=null&&a[o]||e.J(_V[o],()=>{var u;(u=Ve.__PosthogExtensions__)==null||(u=u.integrations)==null||(u=u[o])==null||u.start(e._instance)}),!r&&(l=Ve.__PosthogExtensions__)!=null&&(l=l.integrations)!=null&&l[o]&&((c=Ve.__PosthogExtensions__)==null||(c=c.integrations)==null||(c=c[o])==null||c.stop())};for(var[i,r]of Object.entries((s=this._instance.config.integrations)!==null&&s!==void 0?s:{})){var s;n(i)}}};var Jf={},wx=()=>{},nu="posthog",TO=!jU&&(Ni==null?void 0:Ni.indexOf("MSIE"))===-1&&(Ni==null?void 0:Ni.indexOf("Mozilla"))===-1,tN=t=>{var e;return{api_host:"https://us.i.posthog.com",ui_host:null,token:"",autocapture:!0,rageclick:!0,cross_subdomain_cookie:p7(Ce==null?void 0:Ce.location),persistence:"localStorage+cookie",persistence_name:"",loaded:wx,save_campaign_params:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageview:t!=="2025-05-24"||"history_change",capture_pageleave:"if_capture_pageview",defaults:t??"unset",debug:Mi&&tn(Mi==null?void 0:Mi.search)&&Mi.search.indexOf("__posthog_debug=true")!==-1||!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_web_experiments:!0,disable_surveys:!1,disable_surveys_automatic_display:!1,disable_external_dependency_loading:!1,enable_recording_console_log:void 0,secure_cookie:(G==null||(e=G.location)==null?void 0:e.protocol)==="https:",ip:!1,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},request_batching:!0,properties_string_max_length:65535,session_recording:{},mask_all_element_attributes:!1,mask_all_text:!1,mask_personal_data_properties:!1,custom_personal_data_properties:[],advanced_disable_flags:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_only_evaluate_survey_feature_flags:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,surveys_request_timeout_ms:1e4,on_request_error:n=>{var i="Bad HTTP status: "+n.statusCode+" "+n.text;Ae.error(i)},get_device_id:n=>n,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"identified_only",before_send:void 0,request_queue_config:{flush_interval_ms:bx},error_tracking:{},_onCapture:wx}},nN=t=>{var e={};ge(t.process_person)||(e.person_profiles=t.process_person),ge(t.xhr_headers)||(e.request_headers=t.xhr_headers),ge(t.cookie_name)||(e.persistence_name=t.cookie_name),ge(t.disable_cookie)||(e.disable_persistence=t.disable_cookie),ge(t.store_google)||(e.save_campaign_params=t.store_google),ge(t.verbose)||(e.debug=t.verbose);var n=sn({},e,t);return Ut(t.property_blacklist)&&(ge(t.property_denylist)?n.property_denylist=t.property_blacklist:Ut(t.property_denylist)?n.property_denylist=[...t.property_blacklist,...t.property_denylist]:Ae.error("Invalid value for property_denylist config: "+t.property_denylist)),n};let EV=class{constructor(){this.__forceAllowLocalhost=!1}get ps(){return this.__forceAllowLocalhost}set ps(e){Ae.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=e}},RO=class OO{get decideEndpointWasHit(){var e,n;return(e=(n=this.featureFlags)==null?void 0:n.hasLoadedFlags)!==null&&e!==void 0&&e}get flagsEndpointWasHit(){var e,n;return(e=(n=this.featureFlags)==null?void 0:n.hasLoadedFlags)!==null&&e!==void 0&&e}constructor(){this.webPerformance=new EV,this.gs=!1,this.version=po.LIB_VERSION,this._s=new PO,this._calculate_event_properties=this.calculateEventProperties.bind(this),this.config=tN(),this.SentryIntegration=AU,this.sentryIntegration=e=>function(n,i){var r=sO(n,i);return{name:rO,processEvent:s=>r(s)}}(this,e),this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this.bs=!1,this.ys=null,this.ws=null,this.Ss=null,this.featureFlags=new iV(this),this.toolbar=new PU(this),this.scrollManager=new hV(this),this.pageViewManager=new DU(this),this.surveys=new aV(this),this.experiments=new SV(this),this.exceptions=new BU(this),this.rateLimiter=new lV(this),this.requestRouter=new wV(this),this.consent=new j7(this),this.externalIntegrations=new CV(this),this.people={set:(e,n,i)=>{var r=tn(e)?{[e]:n}:e;this.setPersonProperties(r),i==null||i({})},set_once:(e,n,i)=>{var r=tn(e)?{[e]:n}:e;this.setPersonProperties(void 0,r),i==null||i({})}},this.on("eventCaptured",e=>Ae.info('send "'+(e==null?void 0:e.event)+'"',e))}init(e,n,i){if(i&&i!==nu){var r,s=(r=Jf[i])!==null&&r!==void 0?r:new OO;return s._init(e,n,i),Jf[i]=s,Jf[nu][i]=s,s}return this._init(e,n,i)}_init(e,n,i){var r,s;if(n===void 0&&(n={}),ge(e)||K1(e))return Ae.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return Ae.warn("You have already initialized PostHog! Re-initializing is a no-op"),this;this.__loaded=!0,this.config={},this.$s=n,this.ks=[],n.person_profiles&&(this.ws=n.person_profiles),this.set_config(sn({},tN(n.defaults),nN(n),{name:i,token:e})),this.config.on_xhr_error&&Ae.error("on_xhr_error is deprecated. Use on_request_error instead"),this.compression=n.disable_compression?void 0:Ao.GZipJS,this.persistence=new qb(this.config),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new qb(xe({},this.config,{persistence:"sessionStorage"}));var o=xe({},this.persistence.props),a=xe({},this.sessionPersistence.props);if(this.register({$initialization_time:new Date().toISOString()}),this.xs=new uV(v=>this.Es(v),this.config.request_queue_config),this.Is=new fV(this),this.__request_queue=[],this.config.__preview_experimental_cookieless_mode||(this.sessionManager=new gV(this),this.sessionPropsManager=new mV(this,this.sessionManager,this.persistence)),new TU(this).startIfEnabledOrStop(),this.siteApps=new yV(this),(r=this.siteApps)==null||r.init(),this.config.__preview_experimental_cookieless_mode||(this.sessionRecording=new CU(this),this.sessionRecording.startIfEnabledOrStop()),this.config.disable_scroll_properties||this.scrollManager.startMeasuringScrollPosition(),this.autocapture=new N7(this),this.autocapture.startIfEnabled(),this.surveys.loadIfEnabled(),this.heatmaps=new IU(this),this.heatmaps.startIfEnabled(),this.webVitalsAutocapture=new RU(this),this.exceptionObserver=new B7(this),this.exceptionObserver.startIfEnabled(),this.deadClicksAutocapture=new VR(this,F7),this.deadClicksAutocapture.startIfEnabled(),this.historyAutocapture=new eU(this),this.historyAutocapture.startIfEnabled(),po.DEBUG=po.DEBUG||this.config.debug,po.DEBUG&&Ae.info("Starting in debug mode",{this:this,config:n,thisC:xe({},this.config),p:o,s:a}),this.Ps(),((s=n.bootstrap)==null?void 0:s.distinctID)!==void 0){var l,c,u=this.config.get_device_id(_a()),d=(l=n.bootstrap)!=null&&l.isIdentifiedID?u:n.bootstrap.distinctID;this.persistence.set_property(co,(c=n.bootstrap)!=null&&c.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:n.bootstrap.distinctID,$device_id:d})}if(this.Rs()){var f,p,m=Object.keys(((f=n.bootstrap)==null?void 0:f.featureFlags)||{}).filter(v=>{var b;return!((b=n.bootstrap)==null||(b=b.featureFlags)==null||!b[v])}).reduce((v,b)=>{var w;return v[b]=((w=n.bootstrap)==null||(w=w.featureFlags)==null?void 0:w[b])||!1,v},{}),g=Object.keys(((p=n.bootstrap)==null?void 0:p.featureFlagPayloads)||{}).filter(v=>m[v]).reduce((v,b)=>{var w,k;return(w=n.bootstrap)!=null&&(w=w.featureFlagPayloads)!=null&&w[b]&&(v[b]=(k=n.bootstrap)==null||(k=k.featureFlagPayloads)==null?void 0:k[b]),v},{});this.featureFlags.receivedFeatureFlags({featureFlags:m,featureFlagPayloads:g})}if(this.config.__preview_experimental_cookieless_mode)this.register_once({distinct_id:am,$device_id:null},"");else if(!this.get_distinct_id()){var y=this.config.get_device_id(_a());this.register_once({distinct_id:y,$device_id:y},""),this.persistence.set_property(co,"anonymous")}return Kt(G,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this),{passive:!1}),this.toolbar.maybeLoadToolbar(),n.segment?EU(this,()=>this.Ts()):this.Ts(),Tr(this.config._onCapture)&&this.config._onCapture!==wx&&(Ae.warn("onCapture is deprecated. Please use `before_send` instead"),this.on("eventCaptured",v=>this.config._onCapture(v.event,v))),this.config.ip&&Ae.warn('The `ip` config option has NO EFFECT AT ALL and has been deprecated. Use a custom transformation or "Discard IP data" project setting instead. See https://posthog.com/tutorials/web-redact-properties#hiding-customer-ip-address for more information.'),this}Ie(e){var n,i,r,s,o,a,l,c;if(!Ce||!Ce.body)return Ae.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout(()=>{this.Ie(e)},500);this.compression=void 0,e.supportedCompression&&!this.config.disable_compression&&(this.compression=it(e.supportedCompression,Ao.GZipJS)?Ao.GZipJS:it(e.supportedCompression,Ao.Base64)?Ao.Base64:void 0),(n=e.analytics)!=null&&n.endpoint&&(this.analyticsDefaultEndpoint=e.analytics.endpoint),this.set_config({person_profiles:this.ws?this.ws:"identified_only"}),(i=this.siteApps)==null||i.onRemoteConfig(e),(r=this.sessionRecording)==null||r.onRemoteConfig(e),(s=this.autocapture)==null||s.onRemoteConfig(e),(o=this.heatmaps)==null||o.onRemoteConfig(e),this.surveys.onRemoteConfig(e),(a=this.webVitalsAutocapture)==null||a.onRemoteConfig(e),(l=this.exceptionObserver)==null||l.onRemoteConfig(e),this.exceptions.onRemoteConfig(e),(c=this.deadClicksAutocapture)==null||c.onRemoteConfig(e)}Ts(){try{this.config.loaded(this)}catch(e){Ae.critical("`loaded` function failed",e)}this.Ms(),this.config.capture_pageview&&setTimeout(()=>{this.consent.isOptedIn()&&this.Cs()},1),new cV(this).load(),this.featureFlags.flags()}Ms(){var e;this.has_opted_out_capturing()||this.config.request_batching&&((e=this.xs)==null||e.enable())}_dom_loaded(){this.has_opted_out_capturing()||ja(this.__request_queue,e=>this.Es(e)),this.__request_queue=[],this.Ms()}_handle_unload(){var e,n;this.config.request_batching?(this.Fs()&&this.capture("$pageleave"),(e=this.xs)==null||e.unload(),(n=this.Is)==null||n.unload()):this.Fs()&&this.capture("$pageleave",null,{transport:"sendBeacon"})}Ee(e){this.__loaded&&(TO?this.__request_queue.push(e):this.rateLimiter.isServerRateLimited(e.batchKey)||(e.transport=e.transport||this.config.api_transport,e.url=M0(e.url,{ip:this.config.ip?1:0}),e.headers=xe({},this.config.request_headers),e.compression=e.compression==="best-available"?this.compression:e.compression,e.fetchOptions=e.fetchOptions||this.config.fetch_options,(n=>{var i,r,s,o=xe({},n);o.timeout=o.timeout||6e4,o.url=M0(o.url,{_:new Date().getTime().toString(),ver:po.LIB_VERSION,compression:o.compression});var a=(i=o.transport)!==null&&i!==void 0?i:"fetch",l=(r=(s=AR(Xf,c=>c.transport===a))==null?void 0:s.method)!==null&&r!==void 0?r:Xf[0].method;if(!l)throw new Error("No available transport method");l(o)})(xe({},e,{callback:n=>{var i,r;this.rateLimiter.checkForLimiting(n),n.statusCode>=400&&((i=(r=this.config).on_request_error)==null||i.call(r,n)),e.callback==null||e.callback(n)}}))))}Es(e){this.Is?this.Is.retriableRequest(e):this.Ee(e)}_execute_array(e){var n,i=[],r=[],s=[];ja(e,a=>{a&&(n=a[0],Ut(n)?s.push(a):Tr(a)?a.call(this):Ut(a)&&n==="alias"?i.push(a):Ut(a)&&n.indexOf("capture")!==-1&&Tr(this[n])?s.push(a):r.push(a))});var o=function(a,l){ja(a,function(c){if(Ut(c[0])){var u=l;kt(c,function(d){u=u[d[0]].apply(u,d.slice(1))})}else this[c[0]].apply(this,c.slice(1))},l)};o(i,this),o(r,this),o(s,this)}Rs(){var e,n;return((e=this.config.bootstrap)==null?void 0:e.featureFlags)&&Object.keys((n=this.config.bootstrap)==null?void 0:n.featureFlags).length>0||!1}push(e){this._execute_array([e])}capture(e,n,i){var r;if(this.__loaded&&this.persistence&&this.sessionPersistence&&this.xs){if(!this.consent.isOptedOut())if(!ge(e)&&tn(e)){if(this.config.opt_out_useragent_filter||!this._is_bot()){var s=i!=null&&i.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(s==null||!s.isRateLimited){n!=null&&n.$current_url&&!tn(n==null?void 0:n.$current_url)&&(Ae.error("Invalid `$current_url` property provided to `posthog.capture`. Input must be a string. Ignoring provided value."),n==null||delete n.$current_url),this.sessionPersistence.update_search_keyword(),this.config.save_campaign_params&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),(this.config.save_campaign_params||this.config.save_referrer)&&this.persistence.set_initial_person_info();var o=new Date,a=(i==null?void 0:i.timestamp)||o,l=_a(),c={uuid:l,event:e,properties:this.calculateEventProperties(e,n||{},a,l)};s&&(c.properties.$lib_rate_limit_remaining_tokens=s.remainingTokens),i!=null&&i.$set&&(c.$set=i==null?void 0:i.$set);var u,d,f=this.Os(i==null?void 0:i.$set_once);if(f&&(c.$set_once=f),(c=f7(c,i!=null&&i._noTruncate?null:this.config.properties_string_max_length)).timestamp=a,ge(i==null?void 0:i.timestamp)||(c.properties.$event_time_override_provided=!0,c.properties.$event_time_override_system_time=o),e===Yb.DISMISSED||e===Yb.SENT){var p=n==null?void 0:n[XA.SURVEY_ID],m=n==null?void 0:n[XA.SURVEY_ITERATION];localStorage.setItem((d=""+yx+(u={id:p,current_iteration:m}).id,u.current_iteration&&u.current_iteration>0&&(d=""+yx+u.id+"_"+u.current_iteration),d),"true"),c.$set=xe({},c.$set,{[sV({id:p,current_iteration:m},e===Yb.SENT?"responded":"dismissed")]:!0})}var g=xe({},c.properties.$set,c.$set);if(uu(g)||this.setPersonPropertiesForFlags(g),!yt(this.config.before_send)){var y=this.As(c);if(!y)return;c=y}this._s.emit("eventCaptured",c);var v={method:"POST",url:(r=i==null?void 0:i._url)!==null&&r!==void 0?r:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:c,compression:"best-available",batchKey:i==null?void 0:i._batchKey};return!this.config.request_batching||i&&(i==null||!i._batchKey)||i!=null&&i.send_instantly?this.Es(v):this.xs.enqueue(v),c}Ae.critical("This capture call is ignored due to client rate limiting.")}}else Ae.error("No event name provided to posthog.capture")}else Ae.uninitializedWarning("posthog.capture")}Ge(e){return this.on("eventCaptured",n=>e(n.event,n))}calculateEventProperties(e,n,i,r,s){if(i=i||new Date,!this.persistence||!this.sessionPersistence)return n;var o=s?void 0:this.persistence.remove_event_timer(e),a=xe({},n);if(a.token=this.config.token,a.$config_defaults=this.config.defaults,this.config.__preview_experimental_cookieless_mode&&(a.$cookieless_mode=!0),e==="$snapshot"){var l=xe({},this.persistence.properties(),this.sessionPersistence.properties());return a.distinct_id=l.distinct_id,(!tn(a.distinct_id)&&!ei(a.distinct_id)||K1(a.distinct_id))&&Ae.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),a}var c,u=eV(this.config.mask_personal_data_properties,this.config.custom_personal_data_properties);if(this.sessionManager){var{sessionId:d,windowId:f}=this.sessionManager.checkAndGetSessionAndWindowId(s,i.getTime());a.$session_id=d,a.$window_id=f}this.sessionPropsManager&&sn(a,this.sessionPropsManager.getSessionProps());try{var p;this.sessionRecording&&sn(a,this.sessionRecording.sdkDebugProperties),a.$sdk_debug_retry_queue_size=(p=this.Is)==null?void 0:p.length}catch(v){a.$sdk_debug_error_capturing_properties=String(v)}if(this.requestRouter.region===Tf.CUSTOM&&(a.$lib_custom_api_host=this.config.api_host),c=e!=="$pageview"||s?e!=="$pageleave"||s?this.pageViewManager.doEvent():this.pageViewManager.doPageLeave(i):this.pageViewManager.doPageView(i,r),a=sn(a,c),e==="$pageview"&&Ce&&(a.title=Ce.title),!ge(o)){var m=i.getTime()-o;a.$duration=parseFloat((m/1e3).toFixed(3))}Ni&&this.config.opt_out_useragent_filter&&(a.$browser_type=this._is_bot()?"bot":"browser"),(a=sn({},u,this.persistence.properties(),this.sessionPersistence.properties(),a)).$is_identified=this._isIdentified(),Ut(this.config.property_denylist)?kt(this.config.property_denylist,function(v){delete a[v]}):Ae.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);var g=this.config.sanitize_properties;g&&(Ae.error("sanitize_properties is deprecated. Use before_send instead"),a=g(a,e));var y=this.Ds();return a.$process_person_profile=y,y&&!s&&this.Ls("_calculate_event_properties"),a}Os(e){var n;if(!this.persistence||!this.Ds()||this.gs)return e;var i=this.persistence.get_initial_props(),r=(n=this.sessionPropsManager)==null?void 0:n.getSetOnceProps(),s=sn({},i,r||{},e||{}),o=this.config.sanitize_properties;return o&&(Ae.error("sanitize_properties is deprecated. Use before_send instead"),s=o(s,"$set_once")),this.gs=!0,uu(s)?void 0:s}register(e,n){var i;(i=this.persistence)==null||i.register(e,n)}register_once(e,n,i){var r;(r=this.persistence)==null||r.register_once(e,n,i)}register_for_session(e){var n;(n=this.sessionPersistence)==null||n.register(e)}unregister(e){var n;(n=this.persistence)==null||n.unregister(e)}unregister_for_session(e){var n;(n=this.sessionPersistence)==null||n.unregister(e)}js(e,n){this.register({[e]:n})}getFeatureFlag(e,n){return this.featureFlags.getFeatureFlag(e,n)}getFeatureFlagPayload(e){var n=this.featureFlags.getFeatureFlagPayload(e);try{return JSON.parse(n)}catch{return n}}isFeatureEnabled(e,n){return this.featureFlags.isFeatureEnabled(e,n)}reloadFeatureFlags(){this.featureFlags.reloadFeatureFlags()}updateEarlyAccessFeatureEnrollment(e,n){this.featureFlags.updateEarlyAccessFeatureEnrollment(e,n)}getEarlyAccessFeatures(e,n,i){return n===void 0&&(n=!1),this.featureFlags.getEarlyAccessFeatures(e,n,i)}on(e,n){return this._s.on(e,n)}onFeatureFlags(e){return this.featureFlags.onFeatureFlags(e)}onSurveysLoaded(e){return this.surveys.onSurveysLoaded(e)}onSessionId(e){var n,i;return(n=(i=this.sessionManager)==null?void 0:i.onSessionId(e))!==null&&n!==void 0?n:()=>{}}getSurveys(e,n){n===void 0&&(n=!1),this.surveys.getSurveys(e,n)}getActiveMatchingSurveys(e,n){n===void 0&&(n=!1),this.surveys.getActiveMatchingSurveys(e,n)}renderSurvey(e,n){this.surveys.renderSurvey(e,n)}canRenderSurvey(e){return this.surveys.canRenderSurvey(e)}canRenderSurveyAsync(e,n){return n===void 0&&(n=!1),this.surveys.canRenderSurveyAsync(e,n)}identify(e,n,i){if(!this.__loaded||!this.persistence)return Ae.uninitializedWarning("posthog.identify");if(ei(e)&&(e=e.toString(),Ae.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),e)if(["distinct_id","distinctid"].includes(e.toLowerCase()))Ae.critical('The string "'+e+'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.');else if(e!==am){if(this.Ls("posthog.identify")){var r=this.get_distinct_id();if(this.register({$user_id:e}),!this.get_property("$device_id")){var s=r;this.register_once({$had_persisted_distinct_id:!0,$device_id:s},"")}e!==r&&e!==this.get_property(_f)&&(this.unregister(_f),this.register({distinct_id:e}));var o=(this.persistence.get_property(co)||"anonymous")==="anonymous";e!==r&&o?(this.persistence.set_property(co,"identified"),this.setPersonPropertiesForFlags(xe({},i||{},n||{}),!1),this.capture("$identify",{distinct_id:e,$anon_distinct_id:r},{$set:n||{},$set_once:i||{}}),this.Ss=zA(e,n,i),this.featureFlags.setAnonymousDistinctId(r)):(n||i)&&this.setPersonProperties(n,i),e!==r&&(this.reloadFeatureFlags(),this.unregister(x0))}}else Ae.critical('The string "'+am+'" was set in posthog.identify which indicates an error. This ID is only used as a sentinel value.');else Ae.error("Unique user id has not been set in posthog.identify")}setPersonProperties(e,n){if((e||n)&&this.Ls("posthog.setPersonProperties")){var i=zA(this.get_distinct_id(),e,n);this.Ss!==i?(this.setPersonPropertiesForFlags(xe({},n||{},e||{})),this.capture("$set",{$set:e||{},$set_once:n||{}}),this.Ss=i):Ae.info("A duplicate setPersonProperties call was made with the same properties. It has been ignored.")}}group(e,n,i){if(e&&n){if(this.Ls("posthog.group")){var r=this.getGroups();r[e]!==n&&this.resetGroupPropertiesForFlags(e),this.register({$groups:xe({},r,{[e]:n})}),i&&(this.capture("$groupidentify",{$group_type:e,$group_key:n,$group_set:i}),this.setGroupPropertiesForFlags({[e]:i})),r[e]===n||i||this.reloadFeatureFlags()}}else Ae.error("posthog.group requires a group type and group key")}resetGroups(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}setPersonPropertiesForFlags(e,n){n===void 0&&(n=!0),this.featureFlags.setPersonPropertiesForFlags(e,n)}resetPersonPropertiesForFlags(){this.featureFlags.resetPersonPropertiesForFlags()}setGroupPropertiesForFlags(e,n){n===void 0&&(n=!0),this.Ls("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(e,n)}resetGroupPropertiesForFlags(e){this.featureFlags.resetGroupPropertiesForFlags(e)}reset(e){var n,i,r,s;if(Ae.info("reset"),!this.__loaded)return Ae.uninitializedWarning("posthog.reset");var o=this.get_property("$device_id");if(this.consent.reset(),(n=this.persistence)==null||n.clear(),(i=this.sessionPersistence)==null||i.clear(),this.surveys.reset(),(r=this.persistence)==null||r.set_property(co,"anonymous"),(s=this.sessionManager)==null||s.resetSessionId(),this.Ss=null,this.config.__preview_experimental_cookieless_mode)this.register_once({distinct_id:am,$device_id:null},"");else{var a=this.config.get_device_id(_a());this.register_once({distinct_id:a,$device_id:e?a:o},"")}this.register({$last_posthog_reset:new Date().toISOString()},1)}get_distinct_id(){return this.get_property("distinct_id")}getGroups(){return this.get_property("$groups")||{}}get_session_id(){var e,n;return(e=(n=this.sessionManager)==null?void 0:n.checkAndGetSessionAndWindowId(!0).sessionId)!==null&&e!==void 0?e:""}get_session_replay_url(e){if(!this.sessionManager)return"";var{sessionId:n,sessionStartTimestamp:i}=this.sessionManager.checkAndGetSessionAndWindowId(!0),r=this.requestRouter.endpointFor("ui","/project/"+this.config.token+"/replay/"+n);if(e!=null&&e.withTimestamp&&i){var s,o=(s=e.timestampLookBack)!==null&&s!==void 0?s:10;if(!i)return r;r+="?t="+Math.max(Math.floor((new Date().getTime()-i)/1e3)-o,0)}return r}alias(e,n){return e===this.get_property(NR)?(Ae.critical("Attempting to create alias for existing People user - aborting."),-2):this.Ls("posthog.alias")?(ge(n)&&(n=this.get_distinct_id()),e!==n?(this.js(_f,e),this.capture("$create_alias",{alias:e,distinct_id:n})):(Ae.warn("alias matches current distinct_id - skipping api call."),this.identify(e),-1)):void 0}set_config(e){var n,i,r,s,o,a=xe({},this.config);en(e)&&(sn(this.config,nN(e)),(n=this.persistence)==null||n.update_config(this.config,a),this.sessionPersistence=this.config.persistence==="sessionStorage"||this.config.persistence==="memory"?this.persistence:new qb(xe({},this.config,{persistence:"sessionStorage"})),bn.O()&&bn.D("ph_debug")==="true"&&(this.config.debug=!0),this.config.debug&&(po.DEBUG=!0,Ae.info("set_config",{config:e,oldConfig:a,newConfig:xe({},this.config)})),(i=this.sessionRecording)==null||i.startIfEnabledOrStop(),(r=this.autocapture)==null||r.startIfEnabled(),(s=this.heatmaps)==null||s.startIfEnabled(),this.surveys.loadIfEnabled(),this.Ps(),(o=this.externalIntegrations)==null||o.startIfEnabledOrStop())}startSessionRecording(e){var n=e===!0,i={sampling:n||!(e==null||!e.sampling),linked_flag:n||!(e==null||!e.linked_flag),url_trigger:n||!(e==null||!e.url_trigger),event_trigger:n||!(e==null||!e.event_trigger)};if(Object.values(i).some(Boolean)){var r,s,o,a,l;(r=this.sessionManager)==null||r.checkAndGetSessionAndWindowId(),i.sampling&&((s=this.sessionRecording)==null||s.overrideSampling()),i.linked_flag&&((o=this.sessionRecording)==null||o.overrideLinkedFlag()),i.url_trigger&&((a=this.sessionRecording)==null||a.overrideTrigger("url")),i.event_trigger&&((l=this.sessionRecording)==null||l.overrideTrigger("event"))}this.set_config({disable_session_recording:!1})}stopSessionRecording(){this.set_config({disable_session_recording:!0})}sessionRecordingStarted(){var e;return!((e=this.sessionRecording)==null||!e.started)}captureException(e,n){var i=new Error("PostHog syntheticException");this.exceptions.sendExceptionEvent(xe({},Q7((r=>r instanceof Error)(e)?{error:e,event:e.message}:{event:e},{syntheticException:i}),n))}loadToolbar(e){return this.toolbar.loadToolbar(e)}get_property(e){var n;return(n=this.persistence)==null?void 0:n.props[e]}getSessionProperty(e){var n;return(n=this.sessionPersistence)==null?void 0:n.props[e]}toString(){var e,n=(e=this.config.name)!==null&&e!==void 0?e:nu;return n!==nu&&(n=nu+"."+n),n}_isIdentified(){var e,n;return((e=this.persistence)==null?void 0:e.get_property(co))==="identified"||((n=this.sessionPersistence)==null?void 0:n.get_property(co))==="identified"}Ds(){var e,n;return!(this.config.person_profiles==="never"||this.config.person_profiles==="identified_only"&&!this._isIdentified()&&uu(this.getGroups())&&((e=this.persistence)==null||(e=e.props)==null||!e[_f])&&((n=this.persistence)==null||(n=n.props)==null||!n[k0]))}Fs(){return this.config.capture_pageleave===!0||this.config.capture_pageleave==="if_capture_pageview"&&(this.config.capture_pageview===!0||this.config.capture_pageview==="history_change")}createPersonProfile(){this.Ds()||this.Ls("posthog.createPersonProfile")&&this.setPersonProperties({},{})}Ls(e){return this.config.person_profiles==="never"?(Ae.error(e+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this.js(k0,!0),!0)}Ps(){var e,n,i,r,s=this.consent.isOptedOut(),o=this.config.opt_out_persistence_by_default,a=this.config.disable_persistence||s&&!!o;((e=this.persistence)==null?void 0:e.Fe)!==a&&((i=this.persistence)==null||i.set_disabled(a)),((n=this.sessionPersistence)==null?void 0:n.Fe)!==a&&((r=this.sessionPersistence)==null||r.set_disabled(a))}opt_in_capturing(e){var n;this.consent.optInOut(!0),this.Ps(),(ge(e==null?void 0:e.captureEventName)||e!=null&&e.captureEventName)&&this.capture((n=e==null?void 0:e.captureEventName)!==null&&n!==void 0?n:"$opt_in",e==null?void 0:e.captureProperties,{send_instantly:!0}),this.config.capture_pageview&&this.Cs()}opt_out_capturing(){this.consent.optInOut(!1),this.Ps()}has_opted_in_capturing(){return this.consent.isOptedIn()}has_opted_out_capturing(){return this.consent.isOptedOut()}clear_opt_in_out_capturing(){this.consent.reset(),this.Ps()}_is_bot(){return nr?MO(nr,this.config.custom_blocked_useragents):void 0}Cs(){Ce&&(Ce.visibilityState==="visible"?this.bs||(this.bs=!0,this.capture("$pageview",{title:Ce.title},{send_instantly:!0}),this.ys&&(Ce.removeEventListener("visibilitychange",this.ys),this.ys=null)):this.ys||(this.ys=this.Cs.bind(this),Kt(Ce,"visibilitychange",this.ys)))}debug(e){e===!1?(G==null||G.console.log("You've disabled debug mode."),localStorage&&localStorage.removeItem("ph_debug"),this.set_config({debug:!1})):(G==null||G.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),localStorage&&localStorage.setItem("ph_debug","true"),this.set_config({debug:!0}))}I(){var e,n,i,r,s,o,a,l=this.$s||{};return"advanced_disable_flags"in l?!!l.advanced_disable_flags:this.config.advanced_disable_flags!==!1?!!this.config.advanced_disable_flags:this.config.advanced_disable_decide===!0?(Ae.warn("Config field 'advanced_disable_decide' is deprecated. Please use 'advanced_disable_flags' instead. The old field will be removed in a future major version."),!0):(i="advanced_disable_decide",r=!1,s=Ae,o=(n="advanced_disable_flags")in(e=l)&&!ge(e[n]),a=i in e&&!ge(e[i]),o?e[n]:a?(s&&s.warn("Config field '"+i+"' is deprecated. Please use '"+n+"' instead. The old field will be removed in a future major version."),e[i]):r)}As(e){if(yt(this.config.before_send))return e;var n=Ut(this.config.before_send)?this.config.before_send:[this.config.before_send],i=e;for(var r of n){if(i=r(i),yt(i)){var s="Event '"+e.event+"' was rejected in beforeSend function";return c7(e.event)?Ae.warn(s+". This can cause unexpected behavior."):Ae.info(s),null}i.properties&&!uu(i.properties)||Ae.warn("Event '"+e.event+"' has no properties after beforeSend function, this is likely an error.")}return i}getPageViewId(){var e;return(e=this.pageViewManager.ce)==null?void 0:e.pageViewId}captureTraceFeedback(e,n){this.capture("$ai_feedback",{$ai_trace_id:String(e),$ai_feedback_text:n})}captureTraceMetric(e,n,i){this.capture("$ai_metric",{$ai_trace_id:String(e),$ai_metric_name:n,$ai_metric_value:String(i)})}};(function(t,e){for(var n=0;n<e.length;n++)t.prototype[e[n]]=d7(t.prototype[e[n]])})(RO,["identify"]);var iN,ga=(iN=Jf[nu]=new RO,function(){function t(){t.done||(t.done=!0,TO=!1,kt(Jf,function(e){e._dom_loaded()}))}Ce!=null&&Ce.addEventListener?Ce.readyState==="complete"?t():Kt(Ce,"DOMContentLoaded",t,{capture:!1}):G&&Ae.error("Browser doesn't support `document.addEventListener` so PostHog couldn't be initialized")}(),iN),IO=x.createContext({client:ga});function DO(t,e,n){if(n===void 0&&(n=new WeakMap),t===e)return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(n.has(t)&&n.get(t)===e)return!0;n.set(t,e);var i=Object.keys(t),r=Object.keys(e);if(i.length!==r.length)return!1;for(var s=0,o=i;s<o.length;s++){var a=o[s];if(!r.includes(a)||!DO(t[a],e[a],n))return!1}return!0}function AV(t){var e=t.children,n=t.client,i=t.apiKey,r=t.options,s=x.useRef(null),o=x.useMemo(function(){return n?(i&&console.warn("[PostHog.js] You have provided both `client` and `apiKey` to `PostHogProvider`. `apiKey` will be ignored in favour of `client`."),r&&console.warn("[PostHog.js] You have provided both `client` and `options` to `PostHogProvider`. `options` will be ignored in favour of `client`."),n):(i||console.warn("[PostHog.js] No `apiKey` or `client` were provided to `PostHogProvider`. Using default global `window.posthog` instance. You must initialize it manually. This is not recommended behavior."),ga)},[n,i,JSON.stringify(r)]);return x.useEffect(function(){if(!n){var a=s.current;a?(i!==a.apiKey&&console.warn("[PostHog.js] You have provided a different `apiKey` to `PostHogProvider` than the one that was already initialized. This is not supported by our provider and we'll keep using the previous key. If you need to toggle between API Keys you need to control the `client` yourself and pass it in as a prop rather than an `apiKey` prop."),r&&!DO(r,a.options)&&ga.set_config(r),s.current={apiKey:i,options:r??{}}):(ga.__loaded&&console.warn("[PostHog.js] `posthog` was already loaded elsewhere. This may cause issues."),ga.init(i,r),s.current={apiKey:i,options:r??{}})}},[n,i,JSON.stringify(r)]),Dt.createElement(IO.Provider,{value:{client:o}},e)}var xx=function(t,e){return xx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])},xx(t,e)};function NV(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");xx(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Xb=function(t){return typeof t=="function"},PV={componentStack:null,error:null},MV={INVALID_FALLBACK:"[PostHog.js][PostHogErrorBoundary] Invalid fallback prop, provide a valid React element or a function that returns a valid React element."};(function(t){NV(e,t);function e(n){var i=t.call(this,n)||this;return i.state=PV,i}return e.prototype.componentDidCatch=function(n,i){var r=i.componentStack,s=this.props.additionalProperties;this.setState({error:n,componentStack:r});var o;Xb(s)?o=s(n):typeof s=="object"&&(o=s);var a=this.context.client;a.captureException(n,o)},e.prototype.render=function(){var n=this.props,i=n.children,r=n.fallback,s=this.state;if(s.componentStack==null)return Xb(i)?i():i;var o=Xb(r)?Dt.createElement(r,{error:s.error,componentStack:s.componentStack}):r;return Dt.isValidElement(o)?o:(console.warn(MV.INVALID_FALLBACK),Dt.createElement(Dt.Fragment,null))},e.contextType=IO,e})(Dt.Component);var LO={exports:{}},pr={},jO={exports:{}},$O={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,$){var ie=V.length;V.push($);e:for(;0<ie;){var ke=ie-1>>>1,Z=V[ke];if(0<r(Z,$))V[ke]=$,V[ie]=Z,ie=ke;else break e}}function n(V){return V.length===0?null:V[0]}function i(V){if(V.length===0)return null;var $=V[0],ie=V.pop();if(ie!==$){V[0]=ie;e:for(var ke=0,Z=V.length,le=Z>>>1;ke<le;){var j=2*(ke+1)-1,L=V[j],U=j+1,S=V[U];if(0>r(L,ie))U<Z&&0>r(S,L)?(V[ke]=S,V[U]=ie,ke=U):(V[ke]=L,V[j]=ie,ke=j);else if(U<Z&&0>r(S,ie))V[ke]=S,V[U]=ie,ke=U;else break e}}return $}function r(V,$){var ie=V.sortIndex-$.sortIndex;return ie!==0?ie:V.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,p=!1,m=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(V){for(var $=n(c);$!==null;){if($.callback===null)i(c);else if($.startTime<=V)i(c),$.sortIndex=$.expirationTime,e(l,$);else break;$=n(c)}}function k(V){if(g=!1,w(V),!m)if(n(l)!==null)m=!0,Y(_);else{var $=n(c);$!==null&&te(k,$.startTime-V)}}function _(V,$){m=!1,g&&(g=!1,v(N),N=-1),p=!0;var ie=f;try{for(w($),d=n(l);d!==null&&(!(d.expirationTime>$)||V&&!I());){var ke=d.callback;if(typeof ke=="function"){d.callback=null,f=d.priorityLevel;var Z=ke(d.expirationTime<=$);$=t.unstable_now(),typeof Z=="function"?d.callback=Z:d===n(l)&&i(l),w($)}else i(l);d=n(l)}if(d!==null)var le=!0;else{var j=n(c);j!==null&&te(k,j.startTime-$),le=!1}return le}finally{d=null,f=ie,p=!1}}var E=!1,C=null,N=-1,M=5,R=-1;function I(){return!(t.unstable_now()-R<M)}function D(){if(C!==null){var V=t.unstable_now();R=V;var $=!0;try{$=C(!0,V)}finally{$?K():(E=!1,C=null)}}else E=!1}var K;if(typeof b=="function")K=function(){b(D)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,W=B.port2;B.port1.onmessage=D,K=function(){W.postMessage(null)}}else K=function(){y(D,0)};function Y(V){C=V,E||(E=!0,K())}function te(V,$){N=y(function(){V(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,Y(_))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(V){switch(f){case 1:case 2:case 3:var $=3;break;default:$=f}var ie=f;f=$;try{return V()}finally{f=ie}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,$){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var ie=f;f=V;try{return $()}finally{f=ie}},t.unstable_scheduleCallback=function(V,$,ie){var ke=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?ke+ie:ke):ie=ke,V){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=ie+Z,V={id:u++,callback:$,priorityLevel:V,startTime:ie,expirationTime:Z,sortIndex:-1},ie>ke?(V.sortIndex=ie,e(c,V),n(l)===null&&V===n(c)&&(g?(v(N),N=-1):g=!0,te(k,ie-ke))):(V.sortIndex=Z,e(l,V),m||p||(m=!0,Y(_))),V},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(V){var $=f;return function(){var ie=f;f=$;try{return V.apply(this,arguments)}finally{f=ie}}}})($O);jO.exports=$O;var TV=jO.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RV=x,ur=TV;function ae(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var FO=new Set,Eh={};function jc(t,e){ad(t,e),ad(t+"Capture",e)}function ad(t,e){for(Eh[t]=e,t=0;t<e.length;t++)FO.add(e[t])}var Do=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sx=Object.prototype.hasOwnProperty,OV=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,rN={},sN={};function IV(t){return Sx.call(sN,t)?!0:Sx.call(rN,t)?!1:OV.test(t)?sN[t]=!0:(rN[t]=!0,!1)}function DV(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function LV(t,e,n,i){if(e===null||typeof e>"u"||DV(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function xi(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Gn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Gn[t]=new xi(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Gn[e]=new xi(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Gn[t]=new xi(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Gn[t]=new xi(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Gn[t]=new xi(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Gn[t]=new xi(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Gn[t]=new xi(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Gn[t]=new xi(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Gn[t]=new xi(t,5,!1,t.toLowerCase(),null,!1,!1)});var Fk=/[\-:]([a-z])/g;function Bk(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Fk,Bk);Gn[e]=new xi(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Fk,Bk);Gn[e]=new xi(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Fk,Bk);Gn[e]=new xi(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Gn[t]=new xi(t,1,!1,t.toLowerCase(),null,!1,!1)});Gn.xlinkHref=new xi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Gn[t]=new xi(t,1,!1,t.toLowerCase(),null,!0,!0)});function zk(t,e,n,i){var r=Gn.hasOwnProperty(e)?Gn[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(LV(e,n,r,i)&&(n=null),i||r===null?IV(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Wo=RV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,vm=Symbol.for("react.element"),hu=Symbol.for("react.portal"),pu=Symbol.for("react.fragment"),Uk=Symbol.for("react.strict_mode"),kx=Symbol.for("react.profiler"),BO=Symbol.for("react.provider"),zO=Symbol.for("react.context"),Vk=Symbol.for("react.forward_ref"),_x=Symbol.for("react.suspense"),Cx=Symbol.for("react.suspense_list"),Hk=Symbol.for("react.memo"),la=Symbol.for("react.lazy"),UO=Symbol.for("react.offscreen"),oN=Symbol.iterator;function Qd(t){return t===null||typeof t!="object"?null:(t=oN&&t[oN]||t["@@iterator"],typeof t=="function"?t:null)}var Jt=Object.assign,Jb;function Rf(t){if(Jb===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Jb=e&&e[1]||""}return`
`+Jb+t}var Zb=!1;function Qb(t,e){if(!t||Zb)return"";Zb=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Zb=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Rf(t):""}function jV(t){switch(t.tag){case 5:return Rf(t.type);case 16:return Rf("Lazy");case 13:return Rf("Suspense");case 19:return Rf("SuspenseList");case 0:case 2:case 15:return t=Qb(t.type,!1),t;case 11:return t=Qb(t.type.render,!1),t;case 1:return t=Qb(t.type,!0),t;default:return""}}function Ex(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case pu:return"Fragment";case hu:return"Portal";case kx:return"Profiler";case Uk:return"StrictMode";case _x:return"Suspense";case Cx:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case zO:return(t.displayName||"Context")+".Consumer";case BO:return(t._context.displayName||"Context")+".Provider";case Vk:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Hk:return e=t.displayName||null,e!==null?e:Ex(t.type)||"Memo";case la:e=t._payload,t=t._init;try{return Ex(t(e))}catch{}}return null}function $V(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ex(e);case 8:return e===Uk?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Za(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function VO(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function FV(t){var e=VO(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ym(t){t._valueTracker||(t._valueTracker=FV(t))}function HO(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=VO(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function R0(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ax(t,e){var n=e.checked;return Jt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function aN(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Za(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function WO(t,e){e=e.checked,e!=null&&zk(t,"checked",e,!1)}function Nx(t,e){WO(t,e);var n=Za(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Px(t,e.type,n):e.hasOwnProperty("defaultValue")&&Px(t,e.type,Za(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function lN(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Px(t,e,n){(e!=="number"||R0(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Of=Array.isArray;function Iu(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Za(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Mx(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ae(91));return Jt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function cN(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ae(92));if(Of(n)){if(1<n.length)throw Error(ae(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Za(n)}}function GO(t,e){var n=Za(e.value),i=Za(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function uN(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function KO(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Tx(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?KO(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var bm,qO=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(bm=bm||document.createElement("div"),bm.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=bm.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ah(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Zf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},BV=["Webkit","ms","Moz","O"];Object.keys(Zf).forEach(function(t){BV.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Zf[e]=Zf[t]})});function YO(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Zf.hasOwnProperty(t)&&Zf[t]?(""+e).trim():e+"px"}function XO(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=YO(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var zV=Jt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Rx(t,e){if(e){if(zV[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ae(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ae(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ae(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ae(62))}}function Ox(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ix=null;function Wk(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Dx=null,Du=null,Lu=null;function dN(t){if(t=Mp(t)){if(typeof Dx!="function")throw Error(ae(280));var e=t.stateNode;e&&(e=my(e),Dx(t.stateNode,t.type,e))}}function JO(t){Du?Lu?Lu.push(t):Lu=[t]:Du=t}function ZO(){if(Du){var t=Du,e=Lu;if(Lu=Du=null,dN(t),e)for(t=0;t<e.length;t++)dN(e[t])}}function QO(t,e){return t(e)}function eI(){}var ew=!1;function tI(t,e,n){if(ew)return t(e,n);ew=!0;try{return QO(t,e,n)}finally{ew=!1,(Du!==null||Lu!==null)&&(eI(),ZO())}}function Nh(t,e){var n=t.stateNode;if(n===null)return null;var i=my(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ae(231,e,typeof n));return n}var Lx=!1;if(Do)try{var ef={};Object.defineProperty(ef,"passive",{get:function(){Lx=!0}}),window.addEventListener("test",ef,ef),window.removeEventListener("test",ef,ef)}catch{Lx=!1}function UV(t,e,n,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Qf=!1,O0=null,I0=!1,jx=null,VV={onError:function(t){Qf=!0,O0=t}};function HV(t,e,n,i,r,s,o,a,l){Qf=!1,O0=null,UV.apply(VV,arguments)}function WV(t,e,n,i,r,s,o,a,l){if(HV.apply(this,arguments),Qf){if(Qf){var c=O0;Qf=!1,O0=null}else throw Error(ae(198));I0||(I0=!0,jx=c)}}function $c(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function nI(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function fN(t){if($c(t)!==t)throw Error(ae(188))}function GV(t){var e=t.alternate;if(!e){if(e=$c(t),e===null)throw Error(ae(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return fN(r),t;if(s===i)return fN(r),e;s=s.sibling}throw Error(ae(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(ae(189))}}if(n.alternate!==i)throw Error(ae(190))}if(n.tag!==3)throw Error(ae(188));return n.stateNode.current===n?t:e}function iI(t){return t=GV(t),t!==null?rI(t):null}function rI(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=rI(t);if(e!==null)return e;t=t.sibling}return null}var sI=ur.unstable_scheduleCallback,hN=ur.unstable_cancelCallback,KV=ur.unstable_shouldYield,qV=ur.unstable_requestPaint,on=ur.unstable_now,YV=ur.unstable_getCurrentPriorityLevel,Gk=ur.unstable_ImmediatePriority,oI=ur.unstable_UserBlockingPriority,D0=ur.unstable_NormalPriority,XV=ur.unstable_LowPriority,aI=ur.unstable_IdlePriority,dy=null,Ys=null;function JV(t){if(Ys&&typeof Ys.onCommitFiberRoot=="function")try{Ys.onCommitFiberRoot(dy,t,void 0,(t.current.flags&128)===128)}catch{}}var ls=Math.clz32?Math.clz32:eH,ZV=Math.log,QV=Math.LN2;function eH(t){return t>>>=0,t===0?32:31-(ZV(t)/QV|0)|0}var wm=64,xm=4194304;function If(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function L0(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=If(a):(s&=o,s!==0&&(i=If(s)))}else o=n&~r,o!==0?i=If(o):s!==0&&(i=If(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-ls(e),r=1<<n,i|=t[n],e&=~r;return i}function tH(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nH(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-ls(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=tH(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function $x(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function lI(){var t=wm;return wm<<=1,!(wm&4194240)&&(wm=64),t}function tw(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Np(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ls(e),t[e]=n}function iH(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-ls(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function Kk(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-ls(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var xt=0;function cI(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var uI,qk,dI,fI,hI,Fx=!1,Sm=[],Fa=null,Ba=null,za=null,Ph=new Map,Mh=new Map,va=[],rH="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pN(t,e){switch(t){case"focusin":case"focusout":Fa=null;break;case"dragenter":case"dragleave":Ba=null;break;case"mouseover":case"mouseout":za=null;break;case"pointerover":case"pointerout":Ph.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mh.delete(e.pointerId)}}function tf(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Mp(e),e!==null&&qk(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function sH(t,e,n,i,r){switch(e){case"focusin":return Fa=tf(Fa,t,e,n,i,r),!0;case"dragenter":return Ba=tf(Ba,t,e,n,i,r),!0;case"mouseover":return za=tf(za,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return Ph.set(s,tf(Ph.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Mh.set(s,tf(Mh.get(s)||null,t,e,n,i,r)),!0}return!1}function pI(t){var e=ec(t.target);if(e!==null){var n=$c(e);if(n!==null){if(e=n.tag,e===13){if(e=nI(n),e!==null){t.blockedOn=e,hI(t.priority,function(){dI(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function jg(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Bx(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Ix=i,n.target.dispatchEvent(i),Ix=null}else return e=Mp(n),e!==null&&qk(e),t.blockedOn=n,!1;e.shift()}return!0}function mN(t,e,n){jg(t)&&n.delete(e)}function oH(){Fx=!1,Fa!==null&&jg(Fa)&&(Fa=null),Ba!==null&&jg(Ba)&&(Ba=null),za!==null&&jg(za)&&(za=null),Ph.forEach(mN),Mh.forEach(mN)}function nf(t,e){t.blockedOn===e&&(t.blockedOn=null,Fx||(Fx=!0,ur.unstable_scheduleCallback(ur.unstable_NormalPriority,oH)))}function Th(t){function e(r){return nf(r,t)}if(0<Sm.length){nf(Sm[0],t);for(var n=1;n<Sm.length;n++){var i=Sm[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Fa!==null&&nf(Fa,t),Ba!==null&&nf(Ba,t),za!==null&&nf(za,t),Ph.forEach(e),Mh.forEach(e),n=0;n<va.length;n++)i=va[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<va.length&&(n=va[0],n.blockedOn===null);)pI(n),n.blockedOn===null&&va.shift()}var ju=Wo.ReactCurrentBatchConfig,j0=!0;function aH(t,e,n,i){var r=xt,s=ju.transition;ju.transition=null;try{xt=1,Yk(t,e,n,i)}finally{xt=r,ju.transition=s}}function lH(t,e,n,i){var r=xt,s=ju.transition;ju.transition=null;try{xt=4,Yk(t,e,n,i)}finally{xt=r,ju.transition=s}}function Yk(t,e,n,i){if(j0){var r=Bx(t,e,n,i);if(r===null)dw(t,e,i,$0,n),pN(t,i);else if(sH(r,t,e,n,i))i.stopPropagation();else if(pN(t,i),e&4&&-1<rH.indexOf(t)){for(;r!==null;){var s=Mp(r);if(s!==null&&uI(s),s=Bx(t,e,n,i),s===null&&dw(t,e,i,$0,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else dw(t,e,i,null,n)}}var $0=null;function Bx(t,e,n,i){if($0=null,t=Wk(i),t=ec(t),t!==null)if(e=$c(t),e===null)t=null;else if(n=e.tag,n===13){if(t=nI(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return $0=t,null}function mI(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(YV()){case Gk:return 1;case oI:return 4;case D0:case XV:return 16;case aI:return 536870912;default:return 16}default:return 16}}var Ca=null,Xk=null,$g=null;function gI(){if($g)return $g;var t,e=Xk,n=e.length,i,r="value"in Ca?Ca.value:Ca.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return $g=r.slice(t,1<i?1-i:void 0)}function Fg(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function km(){return!0}function gN(){return!1}function mr(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?km:gN,this.isPropagationStopped=gN,this}return Jt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=km)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=km)},persist:function(){},isPersistent:km}),e}var Ld={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jk=mr(Ld),Pp=Jt({},Ld,{view:0,detail:0}),cH=mr(Pp),nw,iw,rf,fy=Jt({},Pp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zk,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==rf&&(rf&&t.type==="mousemove"?(nw=t.screenX-rf.screenX,iw=t.screenY-rf.screenY):iw=nw=0,rf=t),nw)},movementY:function(t){return"movementY"in t?t.movementY:iw}}),vN=mr(fy),uH=Jt({},fy,{dataTransfer:0}),dH=mr(uH),fH=Jt({},Pp,{relatedTarget:0}),rw=mr(fH),hH=Jt({},Ld,{animationName:0,elapsedTime:0,pseudoElement:0}),pH=mr(hH),mH=Jt({},Ld,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),gH=mr(mH),vH=Jt({},Ld,{data:0}),yN=mr(vH),yH={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bH={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wH={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xH(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=wH[t])?!!e[t]:!1}function Zk(){return xH}var SH=Jt({},Pp,{key:function(t){if(t.key){var e=yH[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Fg(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?bH[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zk,charCode:function(t){return t.type==="keypress"?Fg(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Fg(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),kH=mr(SH),_H=Jt({},fy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bN=mr(_H),CH=Jt({},Pp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zk}),EH=mr(CH),AH=Jt({},Ld,{propertyName:0,elapsedTime:0,pseudoElement:0}),NH=mr(AH),PH=Jt({},fy,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),MH=mr(PH),TH=[9,13,27,32],Qk=Do&&"CompositionEvent"in window,eh=null;Do&&"documentMode"in document&&(eh=document.documentMode);var RH=Do&&"TextEvent"in window&&!eh,vI=Do&&(!Qk||eh&&8<eh&&11>=eh),wN=" ",xN=!1;function yI(t,e){switch(t){case"keyup":return TH.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bI(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var mu=!1;function OH(t,e){switch(t){case"compositionend":return bI(e);case"keypress":return e.which!==32?null:(xN=!0,wN);case"textInput":return t=e.data,t===wN&&xN?null:t;default:return null}}function IH(t,e){if(mu)return t==="compositionend"||!Qk&&yI(t,e)?(t=gI(),$g=Xk=Ca=null,mu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return vI&&e.locale!=="ko"?null:e.data;default:return null}}var DH={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function SN(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!DH[t.type]:e==="textarea"}function wI(t,e,n,i){JO(i),e=F0(e,"onChange"),0<e.length&&(n=new Jk("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var th=null,Rh=null;function LH(t){TI(t,0)}function hy(t){var e=yu(t);if(HO(e))return t}function jH(t,e){if(t==="change")return e}var xI=!1;if(Do){var sw;if(Do){var ow="oninput"in document;if(!ow){var kN=document.createElement("div");kN.setAttribute("oninput","return;"),ow=typeof kN.oninput=="function"}sw=ow}else sw=!1;xI=sw&&(!document.documentMode||9<document.documentMode)}function _N(){th&&(th.detachEvent("onpropertychange",SI),Rh=th=null)}function SI(t){if(t.propertyName==="value"&&hy(Rh)){var e=[];wI(e,Rh,t,Wk(t)),tI(LH,e)}}function $H(t,e,n){t==="focusin"?(_N(),th=e,Rh=n,th.attachEvent("onpropertychange",SI)):t==="focusout"&&_N()}function FH(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return hy(Rh)}function BH(t,e){if(t==="click")return hy(e)}function zH(t,e){if(t==="input"||t==="change")return hy(e)}function UH(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ds=typeof Object.is=="function"?Object.is:UH;function Oh(t,e){if(ds(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Sx.call(e,r)||!ds(t[r],e[r]))return!1}return!0}function CN(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function EN(t,e){var n=CN(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=CN(n)}}function kI(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?kI(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function _I(){for(var t=window,e=R0();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=R0(t.document)}return e}function e_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function VH(t){var e=_I(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&kI(n.ownerDocument.documentElement,n)){if(i!==null&&e_(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=EN(n,s);var o=EN(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var HH=Do&&"documentMode"in document&&11>=document.documentMode,gu=null,zx=null,nh=null,Ux=!1;function AN(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ux||gu==null||gu!==R0(i)||(i=gu,"selectionStart"in i&&e_(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),nh&&Oh(nh,i)||(nh=i,i=F0(zx,"onSelect"),0<i.length&&(e=new Jk("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=gu)))}function _m(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var vu={animationend:_m("Animation","AnimationEnd"),animationiteration:_m("Animation","AnimationIteration"),animationstart:_m("Animation","AnimationStart"),transitionend:_m("Transition","TransitionEnd")},aw={},CI={};Do&&(CI=document.createElement("div").style,"AnimationEvent"in window||(delete vu.animationend.animation,delete vu.animationiteration.animation,delete vu.animationstart.animation),"TransitionEvent"in window||delete vu.transitionend.transition);function py(t){if(aw[t])return aw[t];if(!vu[t])return t;var e=vu[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in CI)return aw[t]=e[n];return t}var EI=py("animationend"),AI=py("animationiteration"),NI=py("animationstart"),PI=py("transitionend"),MI=new Map,NN="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vl(t,e){MI.set(t,e),jc(e,[t])}for(var lw=0;lw<NN.length;lw++){var cw=NN[lw],WH=cw.toLowerCase(),GH=cw[0].toUpperCase()+cw.slice(1);vl(WH,"on"+GH)}vl(EI,"onAnimationEnd");vl(AI,"onAnimationIteration");vl(NI,"onAnimationStart");vl("dblclick","onDoubleClick");vl("focusin","onFocus");vl("focusout","onBlur");vl(PI,"onTransitionEnd");ad("onMouseEnter",["mouseout","mouseover"]);ad("onMouseLeave",["mouseout","mouseover"]);ad("onPointerEnter",["pointerout","pointerover"]);ad("onPointerLeave",["pointerout","pointerover"]);jc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));jc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));jc("onBeforeInput",["compositionend","keypress","textInput","paste"]);jc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));jc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));jc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Df="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),KH=new Set("cancel close invalid load scroll toggle".split(" ").concat(Df));function PN(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,WV(i,e,void 0,t),t.currentTarget=null}function TI(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;PN(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;PN(r,a,c),s=l}}}if(I0)throw t=jx,I0=!1,jx=null,t}function Ot(t,e){var n=e[Kx];n===void 0&&(n=e[Kx]=new Set);var i=t+"__bubble";n.has(i)||(RI(e,t,2,!1),n.add(i))}function uw(t,e,n){var i=0;e&&(i|=4),RI(n,t,i,e)}var Cm="_reactListening"+Math.random().toString(36).slice(2);function Ih(t){if(!t[Cm]){t[Cm]=!0,FO.forEach(function(n){n!=="selectionchange"&&(KH.has(n)||uw(n,!1,t),uw(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Cm]||(e[Cm]=!0,uw("selectionchange",!1,e))}}function RI(t,e,n,i){switch(mI(e)){case 1:var r=aH;break;case 4:r=lH;break;default:r=Yk}n=r.bind(null,e,n,t),r=void 0,!Lx||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function dw(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=ec(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}tI(function(){var c=s,u=Wk(n),d=[];e:{var f=MI.get(t);if(f!==void 0){var p=Jk,m=t;switch(t){case"keypress":if(Fg(n)===0)break e;case"keydown":case"keyup":p=kH;break;case"focusin":m="focus",p=rw;break;case"focusout":m="blur",p=rw;break;case"beforeblur":case"afterblur":p=rw;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=vN;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=dH;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=EH;break;case EI:case AI:case NI:p=pH;break;case PI:p=NH;break;case"scroll":p=cH;break;case"wheel":p=MH;break;case"copy":case"cut":case"paste":p=gH;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=bN}var g=(e&4)!==0,y=!g&&t==="scroll",v=g?f!==null?f+"Capture":null:f;g=[];for(var b=c,w;b!==null;){w=b;var k=w.stateNode;if(w.tag===5&&k!==null&&(w=k,v!==null&&(k=Nh(b,v),k!=null&&g.push(Dh(b,k,w)))),y)break;b=b.return}0<g.length&&(f=new p(f,m,null,n,u),d.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==Ix&&(m=n.relatedTarget||n.fromElement)&&(ec(m)||m[Lo]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=n.relatedTarget||n.toElement,p=c,m=m?ec(m):null,m!==null&&(y=$c(m),m!==y||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=c),p!==m)){if(g=vN,k="onMouseLeave",v="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(g=bN,k="onPointerLeave",v="onPointerEnter",b="pointer"),y=p==null?f:yu(p),w=m==null?f:yu(m),f=new g(k,b+"leave",p,n,u),f.target=y,f.relatedTarget=w,k=null,ec(u)===c&&(g=new g(v,b+"enter",m,n,u),g.target=w,g.relatedTarget=y,k=g),y=k,p&&m)t:{for(g=p,v=m,b=0,w=g;w;w=Wc(w))b++;for(w=0,k=v;k;k=Wc(k))w++;for(;0<b-w;)g=Wc(g),b--;for(;0<w-b;)v=Wc(v),w--;for(;b--;){if(g===v||v!==null&&g===v.alternate)break t;g=Wc(g),v=Wc(v)}g=null}else g=null;p!==null&&MN(d,f,p,g,!1),m!==null&&y!==null&&MN(d,y,m,g,!0)}}e:{if(f=c?yu(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var _=jH;else if(SN(f))if(xI)_=zH;else{_=FH;var E=$H}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=BH);if(_&&(_=_(t,c))){wI(d,_,n,u);break e}E&&E(t,f,c),t==="focusout"&&(E=f._wrapperState)&&E.controlled&&f.type==="number"&&Px(f,"number",f.value)}switch(E=c?yu(c):window,t){case"focusin":(SN(E)||E.contentEditable==="true")&&(gu=E,zx=c,nh=null);break;case"focusout":nh=zx=gu=null;break;case"mousedown":Ux=!0;break;case"contextmenu":case"mouseup":case"dragend":Ux=!1,AN(d,n,u);break;case"selectionchange":if(HH)break;case"keydown":case"keyup":AN(d,n,u)}var C;if(Qk)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else mu?yI(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(vI&&n.locale!=="ko"&&(mu||N!=="onCompositionStart"?N==="onCompositionEnd"&&mu&&(C=gI()):(Ca=u,Xk="value"in Ca?Ca.value:Ca.textContent,mu=!0)),E=F0(c,N),0<E.length&&(N=new yN(N,t,null,n,u),d.push({event:N,listeners:E}),C?N.data=C:(C=bI(n),C!==null&&(N.data=C)))),(C=RH?OH(t,n):IH(t,n))&&(c=F0(c,"onBeforeInput"),0<c.length&&(u=new yN("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=C))}TI(d,e)})}function Dh(t,e,n){return{instance:t,listener:e,currentTarget:n}}function F0(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Nh(t,n),s!=null&&i.unshift(Dh(t,s,r)),s=Nh(t,e),s!=null&&i.push(Dh(t,s,r))),t=t.return}return i}function Wc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function MN(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=Nh(n,s),l!=null&&o.unshift(Dh(n,l,a))):r||(l=Nh(n,s),l!=null&&o.push(Dh(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var qH=/\r\n?/g,YH=/\u0000|\uFFFD/g;function TN(t){return(typeof t=="string"?t:""+t).replace(qH,`
`).replace(YH,"")}function Em(t,e,n){if(e=TN(e),TN(t)!==e&&n)throw Error(ae(425))}function B0(){}var Vx=null,Hx=null;function Wx(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Gx=typeof setTimeout=="function"?setTimeout:void 0,XH=typeof clearTimeout=="function"?clearTimeout:void 0,RN=typeof Promise=="function"?Promise:void 0,JH=typeof queueMicrotask=="function"?queueMicrotask:typeof RN<"u"?function(t){return RN.resolve(null).then(t).catch(ZH)}:Gx;function ZH(t){setTimeout(function(){throw t})}function fw(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Th(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Th(e)}function Ua(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ON(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var jd=Math.random().toString(36).slice(2),Ds="__reactFiber$"+jd,Lh="__reactProps$"+jd,Lo="__reactContainer$"+jd,Kx="__reactEvents$"+jd,QH="__reactListeners$"+jd,eW="__reactHandles$"+jd;function ec(t){var e=t[Ds];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Lo]||n[Ds]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=ON(t);t!==null;){if(n=t[Ds])return n;t=ON(t)}return e}t=n,n=t.parentNode}return null}function Mp(t){return t=t[Ds]||t[Lo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function yu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ae(33))}function my(t){return t[Lh]||null}var qx=[],bu=-1;function yl(t){return{current:t}}function jt(t){0>bu||(t.current=qx[bu],qx[bu]=null,bu--)}function Tt(t,e){bu++,qx[bu]=t.current,t.current=e}var Qa={},si=yl(Qa),$i=yl(!1),yc=Qa;function ld(t,e){var n=t.type.contextTypes;if(!n)return Qa;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Fi(t){return t=t.childContextTypes,t!=null}function z0(){jt($i),jt(si)}function IN(t,e,n){if(si.current!==Qa)throw Error(ae(168));Tt(si,e),Tt($i,n)}function OI(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(ae(108,$V(t)||"Unknown",r));return Jt({},n,i)}function U0(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Qa,yc=si.current,Tt(si,t),Tt($i,$i.current),!0}function DN(t,e,n){var i=t.stateNode;if(!i)throw Error(ae(169));n?(t=OI(t,e,yc),i.__reactInternalMemoizedMergedChildContext=t,jt($i),jt(si),Tt(si,t)):jt($i),Tt($i,n)}var mo=null,gy=!1,hw=!1;function II(t){mo===null?mo=[t]:mo.push(t)}function tW(t){gy=!0,II(t)}function bl(){if(!hw&&mo!==null){hw=!0;var t=0,e=xt;try{var n=mo;for(xt=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}mo=null,gy=!1}catch(r){throw mo!==null&&(mo=mo.slice(t+1)),sI(Gk,bl),r}finally{xt=e,hw=!1}}return null}var wu=[],xu=0,V0=null,H0=0,Sr=[],kr=0,bc=null,Mo=1,To="";function Hl(t,e){wu[xu++]=H0,wu[xu++]=V0,V0=t,H0=e}function DI(t,e,n){Sr[kr++]=Mo,Sr[kr++]=To,Sr[kr++]=bc,bc=t;var i=Mo;t=To;var r=32-ls(i)-1;i&=~(1<<r),n+=1;var s=32-ls(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Mo=1<<32-ls(e)+r|n<<r|i,To=s+t}else Mo=1<<s|n<<r|i,To=t}function t_(t){t.return!==null&&(Hl(t,1),DI(t,1,0))}function n_(t){for(;t===V0;)V0=wu[--xu],wu[xu]=null,H0=wu[--xu],wu[xu]=null;for(;t===bc;)bc=Sr[--kr],Sr[kr]=null,To=Sr[--kr],Sr[kr]=null,Mo=Sr[--kr],Sr[kr]=null}var lr=null,rr=null,Vt=!1,ts=null;function LI(t,e){var n=Nr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function LN(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,lr=t,rr=Ua(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,lr=t,rr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=bc!==null?{id:Mo,overflow:To}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Nr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,lr=t,rr=null,!0):!1;default:return!1}}function Yx(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Xx(t){if(Vt){var e=rr;if(e){var n=e;if(!LN(t,e)){if(Yx(t))throw Error(ae(418));e=Ua(n.nextSibling);var i=lr;e&&LN(t,e)?LI(i,n):(t.flags=t.flags&-4097|2,Vt=!1,lr=t)}}else{if(Yx(t))throw Error(ae(418));t.flags=t.flags&-4097|2,Vt=!1,lr=t}}}function jN(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;lr=t}function Am(t){if(t!==lr)return!1;if(!Vt)return jN(t),Vt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Wx(t.type,t.memoizedProps)),e&&(e=rr)){if(Yx(t))throw jI(),Error(ae(418));for(;e;)LI(t,e),e=Ua(e.nextSibling)}if(jN(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ae(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){rr=Ua(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}rr=null}}else rr=lr?Ua(t.stateNode.nextSibling):null;return!0}function jI(){for(var t=rr;t;)t=Ua(t.nextSibling)}function cd(){rr=lr=null,Vt=!1}function i_(t){ts===null?ts=[t]:ts.push(t)}var nW=Wo.ReactCurrentBatchConfig;function sf(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ae(309));var i=n.stateNode}if(!i)throw Error(ae(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(ae(284));if(!n._owner)throw Error(ae(290,t))}return t}function Nm(t,e){throw t=Object.prototype.toString.call(e),Error(ae(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function $N(t){var e=t._init;return e(t._payload)}function $I(t){function e(v,b){if(t){var w=v.deletions;w===null?(v.deletions=[b],v.flags|=16):w.push(b)}}function n(v,b){if(!t)return null;for(;b!==null;)e(v,b),b=b.sibling;return null}function i(v,b){for(v=new Map;b!==null;)b.key!==null?v.set(b.key,b):v.set(b.index,b),b=b.sibling;return v}function r(v,b){return v=Ga(v,b),v.index=0,v.sibling=null,v}function s(v,b,w){return v.index=w,t?(w=v.alternate,w!==null?(w=w.index,w<b?(v.flags|=2,b):w):(v.flags|=2,b)):(v.flags|=1048576,b)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,b,w,k){return b===null||b.tag!==6?(b=ww(w,v.mode,k),b.return=v,b):(b=r(b,w),b.return=v,b)}function l(v,b,w,k){var _=w.type;return _===pu?u(v,b,w.props.children,k,w.key):b!==null&&(b.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===la&&$N(_)===b.type)?(k=r(b,w.props),k.ref=sf(v,b,w),k.return=v,k):(k=Gg(w.type,w.key,w.props,null,v.mode,k),k.ref=sf(v,b,w),k.return=v,k)}function c(v,b,w,k){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=xw(w,v.mode,k),b.return=v,b):(b=r(b,w.children||[]),b.return=v,b)}function u(v,b,w,k,_){return b===null||b.tag!==7?(b=cc(w,v.mode,k,_),b.return=v,b):(b=r(b,w),b.return=v,b)}function d(v,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return b=ww(""+b,v.mode,w),b.return=v,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case vm:return w=Gg(b.type,b.key,b.props,null,v.mode,w),w.ref=sf(v,null,b),w.return=v,w;case hu:return b=xw(b,v.mode,w),b.return=v,b;case la:var k=b._init;return d(v,k(b._payload),w)}if(Of(b)||Qd(b))return b=cc(b,v.mode,w,null),b.return=v,b;Nm(v,b)}return null}function f(v,b,w,k){var _=b!==null?b.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return _!==null?null:a(v,b,""+w,k);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case vm:return w.key===_?l(v,b,w,k):null;case hu:return w.key===_?c(v,b,w,k):null;case la:return _=w._init,f(v,b,_(w._payload),k)}if(Of(w)||Qd(w))return _!==null?null:u(v,b,w,k,null);Nm(v,w)}return null}function p(v,b,w,k,_){if(typeof k=="string"&&k!==""||typeof k=="number")return v=v.get(w)||null,a(b,v,""+k,_);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case vm:return v=v.get(k.key===null?w:k.key)||null,l(b,v,k,_);case hu:return v=v.get(k.key===null?w:k.key)||null,c(b,v,k,_);case la:var E=k._init;return p(v,b,w,E(k._payload),_)}if(Of(k)||Qd(k))return v=v.get(w)||null,u(b,v,k,_,null);Nm(b,k)}return null}function m(v,b,w,k){for(var _=null,E=null,C=b,N=b=0,M=null;C!==null&&N<w.length;N++){C.index>N?(M=C,C=null):M=C.sibling;var R=f(v,C,w[N],k);if(R===null){C===null&&(C=M);break}t&&C&&R.alternate===null&&e(v,C),b=s(R,b,N),E===null?_=R:E.sibling=R,E=R,C=M}if(N===w.length)return n(v,C),Vt&&Hl(v,N),_;if(C===null){for(;N<w.length;N++)C=d(v,w[N],k),C!==null&&(b=s(C,b,N),E===null?_=C:E.sibling=C,E=C);return Vt&&Hl(v,N),_}for(C=i(v,C);N<w.length;N++)M=p(C,v,N,w[N],k),M!==null&&(t&&M.alternate!==null&&C.delete(M.key===null?N:M.key),b=s(M,b,N),E===null?_=M:E.sibling=M,E=M);return t&&C.forEach(function(I){return e(v,I)}),Vt&&Hl(v,N),_}function g(v,b,w,k){var _=Qd(w);if(typeof _!="function")throw Error(ae(150));if(w=_.call(w),w==null)throw Error(ae(151));for(var E=_=null,C=b,N=b=0,M=null,R=w.next();C!==null&&!R.done;N++,R=w.next()){C.index>N?(M=C,C=null):M=C.sibling;var I=f(v,C,R.value,k);if(I===null){C===null&&(C=M);break}t&&C&&I.alternate===null&&e(v,C),b=s(I,b,N),E===null?_=I:E.sibling=I,E=I,C=M}if(R.done)return n(v,C),Vt&&Hl(v,N),_;if(C===null){for(;!R.done;N++,R=w.next())R=d(v,R.value,k),R!==null&&(b=s(R,b,N),E===null?_=R:E.sibling=R,E=R);return Vt&&Hl(v,N),_}for(C=i(v,C);!R.done;N++,R=w.next())R=p(C,v,N,R.value,k),R!==null&&(t&&R.alternate!==null&&C.delete(R.key===null?N:R.key),b=s(R,b,N),E===null?_=R:E.sibling=R,E=R);return t&&C.forEach(function(D){return e(v,D)}),Vt&&Hl(v,N),_}function y(v,b,w,k){if(typeof w=="object"&&w!==null&&w.type===pu&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case vm:e:{for(var _=w.key,E=b;E!==null;){if(E.key===_){if(_=w.type,_===pu){if(E.tag===7){n(v,E.sibling),b=r(E,w.props.children),b.return=v,v=b;break e}}else if(E.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===la&&$N(_)===E.type){n(v,E.sibling),b=r(E,w.props),b.ref=sf(v,E,w),b.return=v,v=b;break e}n(v,E);break}else e(v,E);E=E.sibling}w.type===pu?(b=cc(w.props.children,v.mode,k,w.key),b.return=v,v=b):(k=Gg(w.type,w.key,w.props,null,v.mode,k),k.ref=sf(v,b,w),k.return=v,v=k)}return o(v);case hu:e:{for(E=w.key;b!==null;){if(b.key===E)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){n(v,b.sibling),b=r(b,w.children||[]),b.return=v,v=b;break e}else{n(v,b);break}else e(v,b);b=b.sibling}b=xw(w,v.mode,k),b.return=v,v=b}return o(v);case la:return E=w._init,y(v,b,E(w._payload),k)}if(Of(w))return m(v,b,w,k);if(Qd(w))return g(v,b,w,k);Nm(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,b!==null&&b.tag===6?(n(v,b.sibling),b=r(b,w),b.return=v,v=b):(n(v,b),b=ww(w,v.mode,k),b.return=v,v=b),o(v)):n(v,b)}return y}var ud=$I(!0),FI=$I(!1),W0=yl(null),G0=null,Su=null,r_=null;function s_(){r_=Su=G0=null}function o_(t){var e=W0.current;jt(W0),t._currentValue=e}function Jx(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function $u(t,e){G0=t,r_=Su=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Li=!0),t.firstContext=null)}function Fr(t){var e=t._currentValue;if(r_!==t)if(t={context:t,memoizedValue:e,next:null},Su===null){if(G0===null)throw Error(ae(308));Su=t,G0.dependencies={lanes:0,firstContext:t}}else Su=Su.next=t;return e}var tc=null;function a_(t){tc===null?tc=[t]:tc.push(t)}function BI(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,a_(e)):(n.next=r.next,r.next=n),e.interleaved=n,jo(t,i)}function jo(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ca=!1;function l_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zI(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ro(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Va(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,dt&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,jo(t,n)}return r=i.interleaved,r===null?(e.next=e,a_(i)):(e.next=r.next,r.next=e),i.interleaved=e,jo(t,n)}function Bg(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Kk(t,n)}}function FN(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function K0(t,e,n,i){var r=t.updateQueue;ca=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,u=c=l=null,a=s;do{var f=a.lane,p=a.eventTime;if((i&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,g=a;switch(f=e,p=n,g.tag){case 1:if(m=g.payload,typeof m=="function"){d=m.call(p,d,f);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,f=typeof m=="function"?m.call(p,d,f):m,f==null)break e;d=Jt({},d,f);break e;case 2:ca=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=d):u=u.next=p,o|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;f=a,a=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(u===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);xc|=o,t.lanes=o,t.memoizedState=d}}function BN(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(ae(191,r));r.call(i)}}}var Tp={},Xs=yl(Tp),jh=yl(Tp),$h=yl(Tp);function nc(t){if(t===Tp)throw Error(ae(174));return t}function c_(t,e){switch(Tt($h,e),Tt(jh,t),Tt(Xs,Tp),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Tx(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Tx(e,t)}jt(Xs),Tt(Xs,e)}function dd(){jt(Xs),jt(jh),jt($h)}function UI(t){nc($h.current);var e=nc(Xs.current),n=Tx(e,t.type);e!==n&&(Tt(jh,t),Tt(Xs,n))}function u_(t){jh.current===t&&(jt(Xs),jt(jh))}var Gt=yl(0);function q0(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var pw=[];function d_(){for(var t=0;t<pw.length;t++)pw[t]._workInProgressVersionPrimary=null;pw.length=0}var zg=Wo.ReactCurrentDispatcher,mw=Wo.ReactCurrentBatchConfig,wc=0,Xt=null,vn=null,Mn=null,Y0=!1,ih=!1,Fh=0,iW=0;function Xn(){throw Error(ae(321))}function f_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ds(t[n],e[n]))return!1;return!0}function h_(t,e,n,i,r,s){if(wc=s,Xt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,zg.current=t===null||t.memoizedState===null?aW:lW,t=n(i,r),ih){s=0;do{if(ih=!1,Fh=0,25<=s)throw Error(ae(301));s+=1,Mn=vn=null,e.updateQueue=null,zg.current=cW,t=n(i,r)}while(ih)}if(zg.current=X0,e=vn!==null&&vn.next!==null,wc=0,Mn=vn=Xt=null,Y0=!1,e)throw Error(ae(300));return t}function p_(){var t=Fh!==0;return Fh=0,t}function Es(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mn===null?Xt.memoizedState=Mn=t:Mn=Mn.next=t,Mn}function Br(){if(vn===null){var t=Xt.alternate;t=t!==null?t.memoizedState:null}else t=vn.next;var e=Mn===null?Xt.memoizedState:Mn.next;if(e!==null)Mn=e,vn=t;else{if(t===null)throw Error(ae(310));vn=t,t={memoizedState:vn.memoizedState,baseState:vn.baseState,baseQueue:vn.baseQueue,queue:vn.queue,next:null},Mn===null?Xt.memoizedState=Mn=t:Mn=Mn.next=t}return Mn}function Bh(t,e){return typeof e=="function"?e(t):e}function gw(t){var e=Br(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var i=vn,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((wc&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,Xt.lanes|=u,xc|=u}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,ds(i,e.memoizedState)||(Li=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,Xt.lanes|=s,xc|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function vw(t){var e=Br(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);ds(s,e.memoizedState)||(Li=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function VI(){}function HI(t,e){var n=Xt,i=Br(),r=e(),s=!ds(i.memoizedState,r);if(s&&(i.memoizedState=r,Li=!0),i=i.queue,m_(KI.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||Mn!==null&&Mn.memoizedState.tag&1){if(n.flags|=2048,zh(9,GI.bind(null,n,i,r,e),void 0,null),Tn===null)throw Error(ae(349));wc&30||WI(n,e,r)}return r}function WI(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Xt.updateQueue,e===null?(e={lastEffect:null,stores:null},Xt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function GI(t,e,n,i){e.value=n,e.getSnapshot=i,qI(e)&&YI(t)}function KI(t,e,n){return n(function(){qI(e)&&YI(t)})}function qI(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ds(t,n)}catch{return!0}}function YI(t){var e=jo(t,1);e!==null&&cs(e,t,1,-1)}function zN(t){var e=Es();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bh,lastRenderedState:t},e.queue=t,t=t.dispatch=oW.bind(null,Xt,t),[e.memoizedState,t]}function zh(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Xt.updateQueue,e===null?(e={lastEffect:null,stores:null},Xt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function XI(){return Br().memoizedState}function Ug(t,e,n,i){var r=Es();Xt.flags|=t,r.memoizedState=zh(1|e,n,void 0,i===void 0?null:i)}function vy(t,e,n,i){var r=Br();i=i===void 0?null:i;var s=void 0;if(vn!==null){var o=vn.memoizedState;if(s=o.destroy,i!==null&&f_(i,o.deps)){r.memoizedState=zh(e,n,s,i);return}}Xt.flags|=t,r.memoizedState=zh(1|e,n,s,i)}function UN(t,e){return Ug(8390656,8,t,e)}function m_(t,e){return vy(2048,8,t,e)}function JI(t,e){return vy(4,2,t,e)}function ZI(t,e){return vy(4,4,t,e)}function QI(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function e5(t,e,n){return n=n!=null?n.concat([t]):null,vy(4,4,QI.bind(null,e,t),n)}function g_(){}function t5(t,e){var n=Br();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&f_(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function n5(t,e){var n=Br();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&f_(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function i5(t,e,n){return wc&21?(ds(n,e)||(n=lI(),Xt.lanes|=n,xc|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Li=!0),t.memoizedState=n)}function rW(t,e){var n=xt;xt=n!==0&&4>n?n:4,t(!0);var i=mw.transition;mw.transition={};try{t(!1),e()}finally{xt=n,mw.transition=i}}function r5(){return Br().memoizedState}function sW(t,e,n){var i=Wa(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},s5(t))o5(e,n);else if(n=BI(t,e,n,i),n!==null){var r=vi();cs(n,t,i,r),a5(n,e,i)}}function oW(t,e,n){var i=Wa(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(s5(t))o5(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,ds(a,o)){var l=e.interleaved;l===null?(r.next=r,a_(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=BI(t,e,r,i),n!==null&&(r=vi(),cs(n,t,i,r),a5(n,e,i))}}function s5(t){var e=t.alternate;return t===Xt||e!==null&&e===Xt}function o5(t,e){ih=Y0=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function a5(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Kk(t,n)}}var X0={readContext:Fr,useCallback:Xn,useContext:Xn,useEffect:Xn,useImperativeHandle:Xn,useInsertionEffect:Xn,useLayoutEffect:Xn,useMemo:Xn,useReducer:Xn,useRef:Xn,useState:Xn,useDebugValue:Xn,useDeferredValue:Xn,useTransition:Xn,useMutableSource:Xn,useSyncExternalStore:Xn,useId:Xn,unstable_isNewReconciler:!1},aW={readContext:Fr,useCallback:function(t,e){return Es().memoizedState=[t,e===void 0?null:e],t},useContext:Fr,useEffect:UN,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ug(4194308,4,QI.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ug(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ug(4,2,t,e)},useMemo:function(t,e){var n=Es();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Es();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=sW.bind(null,Xt,t),[i.memoizedState,t]},useRef:function(t){var e=Es();return t={current:t},e.memoizedState=t},useState:zN,useDebugValue:g_,useDeferredValue:function(t){return Es().memoizedState=t},useTransition:function(){var t=zN(!1),e=t[0];return t=rW.bind(null,t[1]),Es().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Xt,r=Es();if(Vt){if(n===void 0)throw Error(ae(407));n=n()}else{if(n=e(),Tn===null)throw Error(ae(349));wc&30||WI(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,UN(KI.bind(null,i,s,t),[t]),i.flags|=2048,zh(9,GI.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=Es(),e=Tn.identifierPrefix;if(Vt){var n=To,i=Mo;n=(i&~(1<<32-ls(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Fh++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=iW++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},lW={readContext:Fr,useCallback:t5,useContext:Fr,useEffect:m_,useImperativeHandle:e5,useInsertionEffect:JI,useLayoutEffect:ZI,useMemo:n5,useReducer:gw,useRef:XI,useState:function(){return gw(Bh)},useDebugValue:g_,useDeferredValue:function(t){var e=Br();return i5(e,vn.memoizedState,t)},useTransition:function(){var t=gw(Bh)[0],e=Br().memoizedState;return[t,e]},useMutableSource:VI,useSyncExternalStore:HI,useId:r5,unstable_isNewReconciler:!1},cW={readContext:Fr,useCallback:t5,useContext:Fr,useEffect:m_,useImperativeHandle:e5,useInsertionEffect:JI,useLayoutEffect:ZI,useMemo:n5,useReducer:vw,useRef:XI,useState:function(){return vw(Bh)},useDebugValue:g_,useDeferredValue:function(t){var e=Br();return vn===null?e.memoizedState=t:i5(e,vn.memoizedState,t)},useTransition:function(){var t=vw(Bh)[0],e=Br().memoizedState;return[t,e]},useMutableSource:VI,useSyncExternalStore:HI,useId:r5,unstable_isNewReconciler:!1};function Yr(t,e){if(t&&t.defaultProps){e=Jt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Zx(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Jt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var yy={isMounted:function(t){return(t=t._reactInternals)?$c(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=vi(),r=Wa(t),s=Ro(i,r);s.payload=e,n!=null&&(s.callback=n),e=Va(t,s,r),e!==null&&(cs(e,t,r,i),Bg(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=vi(),r=Wa(t),s=Ro(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Va(t,s,r),e!==null&&(cs(e,t,r,i),Bg(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=vi(),i=Wa(t),r=Ro(n,i);r.tag=2,e!=null&&(r.callback=e),e=Va(t,r,i),e!==null&&(cs(e,t,i,n),Bg(e,t,i))}};function VN(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!Oh(n,i)||!Oh(r,s):!0}function l5(t,e,n){var i=!1,r=Qa,s=e.contextType;return typeof s=="object"&&s!==null?s=Fr(s):(r=Fi(e)?yc:si.current,i=e.contextTypes,s=(i=i!=null)?ld(t,r):Qa),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=yy,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function HN(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&yy.enqueueReplaceState(e,e.state,null)}function Qx(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},l_(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Fr(s):(s=Fi(e)?yc:si.current,r.context=ld(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Zx(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&yy.enqueueReplaceState(r,r.state,null),K0(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function fd(t,e){try{var n="",i=e;do n+=jV(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function yw(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function eS(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var uW=typeof WeakMap=="function"?WeakMap:Map;function c5(t,e,n){n=Ro(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Z0||(Z0=!0,uS=i),eS(t,e)},n}function u5(t,e,n){n=Ro(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){eS(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){eS(t,e),typeof i!="function"&&(Ha===null?Ha=new Set([this]):Ha.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function WN(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new uW;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=_W.bind(null,t,e,n),e.then(t,t))}function GN(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function KN(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ro(-1,1),e.tag=2,Va(n,e,1))),n.lanes|=1),t)}var dW=Wo.ReactCurrentOwner,Li=!1;function mi(t,e,n,i){e.child=t===null?FI(e,null,n,i):ud(e,t.child,n,i)}function qN(t,e,n,i,r){n=n.render;var s=e.ref;return $u(e,r),i=h_(t,e,n,i,s,r),n=p_(),t!==null&&!Li?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,$o(t,e,r)):(Vt&&n&&t_(e),e.flags|=1,mi(t,e,i,r),e.child)}function YN(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!__(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,d5(t,e,s,i,r)):(t=Gg(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Oh,n(o,i)&&t.ref===e.ref)return $o(t,e,r)}return e.flags|=1,t=Ga(s,i),t.ref=e.ref,t.return=e,e.child=t}function d5(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(Oh(s,i)&&t.ref===e.ref)if(Li=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(Li=!0);else return e.lanes=t.lanes,$o(t,e,r)}return tS(t,e,n,i,r)}function f5(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Tt(_u,Ji),Ji|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Tt(_u,Ji),Ji|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,Tt(_u,Ji),Ji|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,Tt(_u,Ji),Ji|=i;return mi(t,e,r,n),e.child}function h5(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function tS(t,e,n,i,r){var s=Fi(n)?yc:si.current;return s=ld(e,s),$u(e,r),n=h_(t,e,n,i,s,r),i=p_(),t!==null&&!Li?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,$o(t,e,r)):(Vt&&i&&t_(e),e.flags|=1,mi(t,e,n,r),e.child)}function XN(t,e,n,i,r){if(Fi(n)){var s=!0;U0(e)}else s=!1;if($u(e,r),e.stateNode===null)Vg(t,e),l5(e,n,i),Qx(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Fr(c):(c=Fi(n)?yc:si.current,c=ld(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&HN(e,o,i,c),ca=!1;var f=e.memoizedState;o.state=f,K0(e,i,o,r),l=e.memoizedState,a!==i||f!==l||$i.current||ca?(typeof u=="function"&&(Zx(e,n,u,i),l=e.memoizedState),(a=ca||VN(e,n,a,i,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,zI(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Yr(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Fr(l):(l=Fi(n)?yc:si.current,l=ld(e,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&HN(e,o,i,l),ca=!1,f=e.memoizedState,o.state=f,K0(e,i,o,r);var m=e.memoizedState;a!==d||f!==m||$i.current||ca?(typeof p=="function"&&(Zx(e,n,p,i),m=e.memoizedState),(c=ca||VN(e,n,c,i,f,m,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=m),o.props=i,o.state=m,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),i=!1)}return nS(t,e,n,i,s,r)}function nS(t,e,n,i,r,s){h5(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&DN(e,n,!1),$o(t,e,s);i=e.stateNode,dW.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=ud(e,t.child,null,s),e.child=ud(e,null,a,s)):mi(t,e,a,s),e.memoizedState=i.state,r&&DN(e,n,!0),e.child}function p5(t){var e=t.stateNode;e.pendingContext?IN(t,e.pendingContext,e.pendingContext!==e.context):e.context&&IN(t,e.context,!1),c_(t,e.containerInfo)}function JN(t,e,n,i,r){return cd(),i_(r),e.flags|=256,mi(t,e,n,i),e.child}var iS={dehydrated:null,treeContext:null,retryLane:0};function rS(t){return{baseLanes:t,cachePool:null,transitions:null}}function m5(t,e,n){var i=e.pendingProps,r=Gt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Tt(Gt,r&1),t===null)return Xx(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=xy(o,i,0,null),t=cc(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=rS(n),e.memoizedState=iS,t):v_(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return fW(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Ga(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=Ga(a,s):(s=cc(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?rS(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=iS,i}return s=t.child,t=s.sibling,i=Ga(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function v_(t,e){return e=xy({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Pm(t,e,n,i){return i!==null&&i_(i),ud(e,t.child,null,n),t=v_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function fW(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=yw(Error(ae(422))),Pm(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=xy({mode:"visible",children:i.children},r,0,null),s=cc(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&ud(e,t.child,null,o),e.child.memoizedState=rS(o),e.memoizedState=iS,s);if(!(e.mode&1))return Pm(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(ae(419)),i=yw(s,i,void 0),Pm(t,e,o,i)}if(a=(o&t.childLanes)!==0,Li||a){if(i=Tn,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,jo(t,r),cs(i,t,r,-1))}return k_(),i=yw(Error(ae(421))),Pm(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=CW.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,rr=Ua(r.nextSibling),lr=e,Vt=!0,ts=null,t!==null&&(Sr[kr++]=Mo,Sr[kr++]=To,Sr[kr++]=bc,Mo=t.id,To=t.overflow,bc=e),e=v_(e,i.children),e.flags|=4096,e)}function ZN(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Jx(t.return,e,n)}function bw(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function g5(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(mi(t,e,i.children,n),i=Gt.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ZN(t,n,e);else if(t.tag===19)ZN(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Tt(Gt,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&q0(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),bw(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&q0(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}bw(e,!0,n,null,s);break;case"together":bw(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Vg(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function $o(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),xc|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ae(153));if(e.child!==null){for(t=e.child,n=Ga(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ga(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function hW(t,e,n){switch(e.tag){case 3:p5(e),cd();break;case 5:UI(e);break;case 1:Fi(e.type)&&U0(e);break;case 4:c_(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Tt(W0,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Tt(Gt,Gt.current&1),e.flags|=128,null):n&e.child.childLanes?m5(t,e,n):(Tt(Gt,Gt.current&1),t=$o(t,e,n),t!==null?t.sibling:null);Tt(Gt,Gt.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return g5(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Tt(Gt,Gt.current),i)break;return null;case 22:case 23:return e.lanes=0,f5(t,e,n)}return $o(t,e,n)}var v5,sS,y5,b5;v5=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};sS=function(){};y5=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,nc(Xs.current);var s=null;switch(n){case"input":r=Ax(t,r),i=Ax(t,i),s=[];break;case"select":r=Jt({},r,{value:void 0}),i=Jt({},i,{value:void 0}),s=[];break;case"textarea":r=Mx(t,r),i=Mx(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=B0)}Rx(n,i);var o;n=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Eh.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Eh.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ot("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};b5=function(t,e,n,i){n!==i&&(e.flags|=4)};function of(t,e){if(!Vt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Jn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function pW(t,e,n){var i=e.pendingProps;switch(n_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jn(e),null;case 1:return Fi(e.type)&&z0(),Jn(e),null;case 3:return i=e.stateNode,dd(),jt($i),jt(si),d_(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Am(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ts!==null&&(hS(ts),ts=null))),sS(t,e),Jn(e),null;case 5:u_(e);var r=nc($h.current);if(n=e.type,t!==null&&e.stateNode!=null)y5(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(ae(166));return Jn(e),null}if(t=nc(Xs.current),Am(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[Ds]=e,i[Lh]=s,t=(e.mode&1)!==0,n){case"dialog":Ot("cancel",i),Ot("close",i);break;case"iframe":case"object":case"embed":Ot("load",i);break;case"video":case"audio":for(r=0;r<Df.length;r++)Ot(Df[r],i);break;case"source":Ot("error",i);break;case"img":case"image":case"link":Ot("error",i),Ot("load",i);break;case"details":Ot("toggle",i);break;case"input":aN(i,s),Ot("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Ot("invalid",i);break;case"textarea":cN(i,s),Ot("invalid",i)}Rx(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&Em(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Em(i.textContent,a,t),r=["children",""+a]):Eh.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ot("scroll",i)}switch(n){case"input":ym(i),lN(i,s,!0);break;case"textarea":ym(i),uN(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=B0)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=KO(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[Ds]=e,t[Lh]=i,v5(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ox(n,i),n){case"dialog":Ot("cancel",t),Ot("close",t),r=i;break;case"iframe":case"object":case"embed":Ot("load",t),r=i;break;case"video":case"audio":for(r=0;r<Df.length;r++)Ot(Df[r],t);r=i;break;case"source":Ot("error",t),r=i;break;case"img":case"image":case"link":Ot("error",t),Ot("load",t),r=i;break;case"details":Ot("toggle",t),r=i;break;case"input":aN(t,i),r=Ax(t,i),Ot("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Jt({},i,{value:void 0}),Ot("invalid",t);break;case"textarea":cN(t,i),r=Mx(t,i),Ot("invalid",t);break;default:r=i}Rx(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?XO(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&qO(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ah(t,l):typeof l=="number"&&Ah(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Eh.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ot("scroll",t):l!=null&&zk(t,s,l,o))}switch(n){case"input":ym(t),lN(t,i,!1);break;case"textarea":ym(t),uN(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Za(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?Iu(t,!!i.multiple,s,!1):i.defaultValue!=null&&Iu(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=B0)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Jn(e),null;case 6:if(t&&e.stateNode!=null)b5(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(ae(166));if(n=nc($h.current),nc(Xs.current),Am(e)){if(i=e.stateNode,n=e.memoizedProps,i[Ds]=e,(s=i.nodeValue!==n)&&(t=lr,t!==null))switch(t.tag){case 3:Em(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Em(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Ds]=e,e.stateNode=i}return Jn(e),null;case 13:if(jt(Gt),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Vt&&rr!==null&&e.mode&1&&!(e.flags&128))jI(),cd(),e.flags|=98560,s=!1;else if(s=Am(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(ae(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ae(317));s[Ds]=e}else cd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Jn(e),s=!1}else ts!==null&&(hS(ts),ts=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Gt.current&1?kn===0&&(kn=3):k_())),e.updateQueue!==null&&(e.flags|=4),Jn(e),null);case 4:return dd(),sS(t,e),t===null&&Ih(e.stateNode.containerInfo),Jn(e),null;case 10:return o_(e.type._context),Jn(e),null;case 17:return Fi(e.type)&&z0(),Jn(e),null;case 19:if(jt(Gt),s=e.memoizedState,s===null)return Jn(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)of(s,!1);else{if(kn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=q0(t),o!==null){for(e.flags|=128,of(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Tt(Gt,Gt.current&1|2),e.child}t=t.sibling}s.tail!==null&&on()>hd&&(e.flags|=128,i=!0,of(s,!1),e.lanes=4194304)}else{if(!i)if(t=q0(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),of(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Vt)return Jn(e),null}else 2*on()-s.renderingStartTime>hd&&n!==1073741824&&(e.flags|=128,i=!0,of(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=on(),e.sibling=null,n=Gt.current,Tt(Gt,i?n&1|2:n&1),e):(Jn(e),null);case 22:case 23:return S_(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Ji&1073741824&&(Jn(e),e.subtreeFlags&6&&(e.flags|=8192)):Jn(e),null;case 24:return null;case 25:return null}throw Error(ae(156,e.tag))}function mW(t,e){switch(n_(e),e.tag){case 1:return Fi(e.type)&&z0(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return dd(),jt($i),jt(si),d_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return u_(e),null;case 13:if(jt(Gt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ae(340));cd()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return jt(Gt),null;case 4:return dd(),null;case 10:return o_(e.type._context),null;case 22:case 23:return S_(),null;case 24:return null;default:return null}}var Mm=!1,ti=!1,gW=typeof WeakSet=="function"?WeakSet:Set,Ne=null;function ku(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Qt(t,e,i)}else n.current=null}function oS(t,e,n){try{n()}catch(i){Qt(t,e,i)}}var QN=!1;function vW(t,e){if(Vx=j0,t=_I(),e_(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var p;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===t)break t;if(f===n&&++c===r&&(a=o),f===s&&++u===i&&(l=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Hx={focusedElem:t,selectionRange:n},j0=!1,Ne=e;Ne!==null;)if(e=Ne,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ne=t;else for(;Ne!==null;){e=Ne;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,y=m.memoizedState,v=e.stateNode,b=v.getSnapshotBeforeUpdate(e.elementType===e.type?g:Yr(e.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ae(163))}}catch(k){Qt(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,Ne=t;break}Ne=e.return}return m=QN,QN=!1,m}function rh(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&oS(e,n,s)}r=r.next}while(r!==i)}}function by(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function aS(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function w5(t){var e=t.alternate;e!==null&&(t.alternate=null,w5(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ds],delete e[Lh],delete e[Kx],delete e[QH],delete e[eW])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function x5(t){return t.tag===5||t.tag===3||t.tag===4}function eP(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||x5(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function lS(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=B0));else if(i!==4&&(t=t.child,t!==null))for(lS(t,e,n),t=t.sibling;t!==null;)lS(t,e,n),t=t.sibling}function cS(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(cS(t,e,n),t=t.sibling;t!==null;)cS(t,e,n),t=t.sibling}var Dn=null,Qr=!1;function ta(t,e,n){for(n=n.child;n!==null;)S5(t,e,n),n=n.sibling}function S5(t,e,n){if(Ys&&typeof Ys.onCommitFiberUnmount=="function")try{Ys.onCommitFiberUnmount(dy,n)}catch{}switch(n.tag){case 5:ti||ku(n,e);case 6:var i=Dn,r=Qr;Dn=null,ta(t,e,n),Dn=i,Qr=r,Dn!==null&&(Qr?(t=Dn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Dn.removeChild(n.stateNode));break;case 18:Dn!==null&&(Qr?(t=Dn,n=n.stateNode,t.nodeType===8?fw(t.parentNode,n):t.nodeType===1&&fw(t,n),Th(t)):fw(Dn,n.stateNode));break;case 4:i=Dn,r=Qr,Dn=n.stateNode.containerInfo,Qr=!0,ta(t,e,n),Dn=i,Qr=r;break;case 0:case 11:case 14:case 15:if(!ti&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&oS(n,e,o),r=r.next}while(r!==i)}ta(t,e,n);break;case 1:if(!ti&&(ku(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Qt(n,e,a)}ta(t,e,n);break;case 21:ta(t,e,n);break;case 22:n.mode&1?(ti=(i=ti)||n.memoizedState!==null,ta(t,e,n),ti=i):ta(t,e,n);break;default:ta(t,e,n)}}function tP(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new gW),e.forEach(function(i){var r=EW.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function Wr(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Dn=a.stateNode,Qr=!1;break e;case 3:Dn=a.stateNode.containerInfo,Qr=!0;break e;case 4:Dn=a.stateNode.containerInfo,Qr=!0;break e}a=a.return}if(Dn===null)throw Error(ae(160));S5(s,o,r),Dn=null,Qr=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){Qt(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)k5(e,t),e=e.sibling}function k5(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Wr(e,t),ws(t),i&4){try{rh(3,t,t.return),by(3,t)}catch(g){Qt(t,t.return,g)}try{rh(5,t,t.return)}catch(g){Qt(t,t.return,g)}}break;case 1:Wr(e,t),ws(t),i&512&&n!==null&&ku(n,n.return);break;case 5:if(Wr(e,t),ws(t),i&512&&n!==null&&ku(n,n.return),t.flags&32){var r=t.stateNode;try{Ah(r,"")}catch(g){Qt(t,t.return,g)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&WO(r,s),Ox(a,o);var c=Ox(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?XO(r,d):u==="dangerouslySetInnerHTML"?qO(r,d):u==="children"?Ah(r,d):zk(r,u,d,c)}switch(a){case"input":Nx(r,s);break;case"textarea":GO(r,s);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?Iu(r,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?Iu(r,!!s.multiple,s.defaultValue,!0):Iu(r,!!s.multiple,s.multiple?[]:"",!1))}r[Lh]=s}catch(g){Qt(t,t.return,g)}}break;case 6:if(Wr(e,t),ws(t),i&4){if(t.stateNode===null)throw Error(ae(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(g){Qt(t,t.return,g)}}break;case 3:if(Wr(e,t),ws(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Th(e.containerInfo)}catch(g){Qt(t,t.return,g)}break;case 4:Wr(e,t),ws(t);break;case 13:Wr(e,t),ws(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(w_=on())),i&4&&tP(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(ti=(c=ti)||u,Wr(e,t),ti=c):Wr(e,t),ws(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(Ne=t,u=t.child;u!==null;){for(d=Ne=u;Ne!==null;){switch(f=Ne,p=f.child,f.tag){case 0:case 11:case 14:case 15:rh(4,f,f.return);break;case 1:ku(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){i=f,n=f.return;try{e=i,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){Qt(i,n,g)}}break;case 5:ku(f,f.return);break;case 22:if(f.memoizedState!==null){iP(d);continue}}p!==null?(p.return=f,Ne=p):iP(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{r=d.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=YO("display",o))}catch(g){Qt(t,t.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){Qt(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Wr(e,t),ws(t),i&4&&tP(t);break;case 21:break;default:Wr(e,t),ws(t)}}function ws(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(x5(n)){var i=n;break e}n=n.return}throw Error(ae(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Ah(r,""),i.flags&=-33);var s=eP(t);cS(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=eP(t);lS(t,a,o);break;default:throw Error(ae(161))}}catch(l){Qt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function yW(t,e,n){Ne=t,_5(t)}function _5(t,e,n){for(var i=(t.mode&1)!==0;Ne!==null;){var r=Ne,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Mm;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||ti;a=Mm;var c=ti;if(Mm=o,(ti=l)&&!c)for(Ne=r;Ne!==null;)o=Ne,l=o.child,o.tag===22&&o.memoizedState!==null?rP(r):l!==null?(l.return=o,Ne=l):rP(r);for(;s!==null;)Ne=s,_5(s),s=s.sibling;Ne=r,Mm=a,ti=c}nP(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,Ne=s):nP(t)}}function nP(t){for(;Ne!==null;){var e=Ne;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ti||by(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!ti)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Yr(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&BN(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}BN(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Th(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ae(163))}ti||e.flags&512&&aS(e)}catch(f){Qt(e,e.return,f)}}if(e===t){Ne=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ne=n;break}Ne=e.return}}function iP(t){for(;Ne!==null;){var e=Ne;if(e===t){Ne=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ne=n;break}Ne=e.return}}function rP(t){for(;Ne!==null;){var e=Ne;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{by(4,e)}catch(l){Qt(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){Qt(e,r,l)}}var s=e.return;try{aS(e)}catch(l){Qt(e,s,l)}break;case 5:var o=e.return;try{aS(e)}catch(l){Qt(e,o,l)}}}catch(l){Qt(e,e.return,l)}if(e===t){Ne=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ne=a;break}Ne=e.return}}var bW=Math.ceil,J0=Wo.ReactCurrentDispatcher,y_=Wo.ReactCurrentOwner,Ir=Wo.ReactCurrentBatchConfig,dt=0,Tn=null,hn=null,Wn=0,Ji=0,_u=yl(0),kn=0,Uh=null,xc=0,wy=0,b_=0,sh=null,Ti=null,w_=0,hd=1/0,fo=null,Z0=!1,uS=null,Ha=null,Tm=!1,Ea=null,Q0=0,oh=0,dS=null,Hg=-1,Wg=0;function vi(){return dt&6?on():Hg!==-1?Hg:Hg=on()}function Wa(t){return t.mode&1?dt&2&&Wn!==0?Wn&-Wn:nW.transition!==null?(Wg===0&&(Wg=lI()),Wg):(t=xt,t!==0||(t=window.event,t=t===void 0?16:mI(t.type)),t):1}function cs(t,e,n,i){if(50<oh)throw oh=0,dS=null,Error(ae(185));Np(t,n,i),(!(dt&2)||t!==Tn)&&(t===Tn&&(!(dt&2)&&(wy|=n),kn===4&&ya(t,Wn)),Bi(t,i),n===1&&dt===0&&!(e.mode&1)&&(hd=on()+500,gy&&bl()))}function Bi(t,e){var n=t.callbackNode;nH(t,e);var i=L0(t,t===Tn?Wn:0);if(i===0)n!==null&&hN(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&hN(n),e===1)t.tag===0?tW(sP.bind(null,t)):II(sP.bind(null,t)),JH(function(){!(dt&6)&&bl()}),n=null;else{switch(cI(i)){case 1:n=Gk;break;case 4:n=oI;break;case 16:n=D0;break;case 536870912:n=aI;break;default:n=D0}n=R5(n,C5.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function C5(t,e){if(Hg=-1,Wg=0,dt&6)throw Error(ae(327));var n=t.callbackNode;if(Fu()&&t.callbackNode!==n)return null;var i=L0(t,t===Tn?Wn:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=ev(t,i);else{e=i;var r=dt;dt|=2;var s=A5();(Tn!==t||Wn!==e)&&(fo=null,hd=on()+500,lc(t,e));do try{SW();break}catch(a){E5(t,a)}while(!0);s_(),J0.current=s,dt=r,hn!==null?e=0:(Tn=null,Wn=0,e=kn)}if(e!==0){if(e===2&&(r=$x(t),r!==0&&(i=r,e=fS(t,r))),e===1)throw n=Uh,lc(t,0),ya(t,i),Bi(t,on()),n;if(e===6)ya(t,i);else{if(r=t.current.alternate,!(i&30)&&!wW(r)&&(e=ev(t,i),e===2&&(s=$x(t),s!==0&&(i=s,e=fS(t,s))),e===1))throw n=Uh,lc(t,0),ya(t,i),Bi(t,on()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(ae(345));case 2:Wl(t,Ti,fo);break;case 3:if(ya(t,i),(i&130023424)===i&&(e=w_+500-on(),10<e)){if(L0(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){vi(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Gx(Wl.bind(null,t,Ti,fo),e);break}Wl(t,Ti,fo);break;case 4:if(ya(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-ls(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=on()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*bW(i/1960))-i,10<i){t.timeoutHandle=Gx(Wl.bind(null,t,Ti,fo),i);break}Wl(t,Ti,fo);break;case 5:Wl(t,Ti,fo);break;default:throw Error(ae(329))}}}return Bi(t,on()),t.callbackNode===n?C5.bind(null,t):null}function fS(t,e){var n=sh;return t.current.memoizedState.isDehydrated&&(lc(t,e).flags|=256),t=ev(t,e),t!==2&&(e=Ti,Ti=n,e!==null&&hS(e)),t}function hS(t){Ti===null?Ti=t:Ti.push.apply(Ti,t)}function wW(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!ds(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ya(t,e){for(e&=~b_,e&=~wy,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ls(e),i=1<<n;t[n]=-1,e&=~i}}function sP(t){if(dt&6)throw Error(ae(327));Fu();var e=L0(t,0);if(!(e&1))return Bi(t,on()),null;var n=ev(t,e);if(t.tag!==0&&n===2){var i=$x(t);i!==0&&(e=i,n=fS(t,i))}if(n===1)throw n=Uh,lc(t,0),ya(t,e),Bi(t,on()),n;if(n===6)throw Error(ae(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Wl(t,Ti,fo),Bi(t,on()),null}function x_(t,e){var n=dt;dt|=1;try{return t(e)}finally{dt=n,dt===0&&(hd=on()+500,gy&&bl())}}function Sc(t){Ea!==null&&Ea.tag===0&&!(dt&6)&&Fu();var e=dt;dt|=1;var n=Ir.transition,i=xt;try{if(Ir.transition=null,xt=1,t)return t()}finally{xt=i,Ir.transition=n,dt=e,!(dt&6)&&bl()}}function S_(){Ji=_u.current,jt(_u)}function lc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,XH(n)),hn!==null)for(n=hn.return;n!==null;){var i=n;switch(n_(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&z0();break;case 3:dd(),jt($i),jt(si),d_();break;case 5:u_(i);break;case 4:dd();break;case 13:jt(Gt);break;case 19:jt(Gt);break;case 10:o_(i.type._context);break;case 22:case 23:S_()}n=n.return}if(Tn=t,hn=t=Ga(t.current,null),Wn=Ji=e,kn=0,Uh=null,b_=wy=xc=0,Ti=sh=null,tc!==null){for(e=0;e<tc.length;e++)if(n=tc[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}tc=null}return t}function E5(t,e){do{var n=hn;try{if(s_(),zg.current=X0,Y0){for(var i=Xt.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Y0=!1}if(wc=0,Mn=vn=Xt=null,ih=!1,Fh=0,y_.current=null,n===null||n.return===null){kn=1,Uh=e,hn=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Wn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=GN(o);if(p!==null){p.flags&=-257,KN(p,o,a,s,e),p.mode&1&&WN(s,c,e),e=p,l=c;var m=e.updateQueue;if(m===null){var g=new Set;g.add(l),e.updateQueue=g}else m.add(l);break e}else{if(!(e&1)){WN(s,c,e),k_();break e}l=Error(ae(426))}}else if(Vt&&a.mode&1){var y=GN(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),KN(y,o,a,s,e),i_(fd(l,a));break e}}s=l=fd(l,a),kn!==4&&(kn=2),sh===null?sh=[s]:sh.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=c5(s,l,e);FN(s,v);break e;case 1:a=l;var b=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ha===null||!Ha.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var k=u5(s,a,e);FN(s,k);break e}}s=s.return}while(s!==null)}P5(n)}catch(_){e=_,hn===n&&n!==null&&(hn=n=n.return);continue}break}while(!0)}function A5(){var t=J0.current;return J0.current=X0,t===null?X0:t}function k_(){(kn===0||kn===3||kn===2)&&(kn=4),Tn===null||!(xc&268435455)&&!(wy&268435455)||ya(Tn,Wn)}function ev(t,e){var n=dt;dt|=2;var i=A5();(Tn!==t||Wn!==e)&&(fo=null,lc(t,e));do try{xW();break}catch(r){E5(t,r)}while(!0);if(s_(),dt=n,J0.current=i,hn!==null)throw Error(ae(261));return Tn=null,Wn=0,kn}function xW(){for(;hn!==null;)N5(hn)}function SW(){for(;hn!==null&&!KV();)N5(hn)}function N5(t){var e=T5(t.alternate,t,Ji);t.memoizedProps=t.pendingProps,e===null?P5(t):hn=e,y_.current=null}function P5(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=mW(n,e),n!==null){n.flags&=32767,hn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{kn=6,hn=null;return}}else if(n=pW(n,e,Ji),n!==null){hn=n;return}if(e=e.sibling,e!==null){hn=e;return}hn=e=t}while(e!==null);kn===0&&(kn=5)}function Wl(t,e,n){var i=xt,r=Ir.transition;try{Ir.transition=null,xt=1,kW(t,e,n,i)}finally{Ir.transition=r,xt=i}return null}function kW(t,e,n,i){do Fu();while(Ea!==null);if(dt&6)throw Error(ae(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ae(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(iH(t,s),t===Tn&&(hn=Tn=null,Wn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Tm||(Tm=!0,R5(D0,function(){return Fu(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ir.transition,Ir.transition=null;var o=xt;xt=1;var a=dt;dt|=4,y_.current=null,vW(t,n),k5(n,t),VH(Hx),j0=!!Vx,Hx=Vx=null,t.current=n,yW(n),qV(),dt=a,xt=o,Ir.transition=s}else t.current=n;if(Tm&&(Tm=!1,Ea=t,Q0=r),s=t.pendingLanes,s===0&&(Ha=null),JV(n.stateNode),Bi(t,on()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Z0)throw Z0=!1,t=uS,uS=null,t;return Q0&1&&t.tag!==0&&Fu(),s=t.pendingLanes,s&1?t===dS?oh++:(oh=0,dS=t):oh=0,bl(),null}function Fu(){if(Ea!==null){var t=cI(Q0),e=Ir.transition,n=xt;try{if(Ir.transition=null,xt=16>t?16:t,Ea===null)var i=!1;else{if(t=Ea,Ea=null,Q0=0,dt&6)throw Error(ae(331));var r=dt;for(dt|=4,Ne=t.current;Ne!==null;){var s=Ne,o=s.child;if(Ne.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Ne=c;Ne!==null;){var u=Ne;switch(u.tag){case 0:case 11:case 15:rh(8,u,s)}var d=u.child;if(d!==null)d.return=u,Ne=d;else for(;Ne!==null;){u=Ne;var f=u.sibling,p=u.return;if(w5(u),u===c){Ne=null;break}if(f!==null){f.return=p,Ne=f;break}Ne=p}}}var m=s.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(g!==null)}}Ne=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Ne=o;else e:for(;Ne!==null;){if(s=Ne,s.flags&2048)switch(s.tag){case 0:case 11:case 15:rh(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,Ne=v;break e}Ne=s.return}}var b=t.current;for(Ne=b;Ne!==null;){o=Ne;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Ne=w;else e:for(o=b;Ne!==null;){if(a=Ne,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:by(9,a)}}catch(_){Qt(a,a.return,_)}if(a===o){Ne=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,Ne=k;break e}Ne=a.return}}if(dt=r,bl(),Ys&&typeof Ys.onPostCommitFiberRoot=="function")try{Ys.onPostCommitFiberRoot(dy,t)}catch{}i=!0}return i}finally{xt=n,Ir.transition=e}}return!1}function oP(t,e,n){e=fd(n,e),e=c5(t,e,1),t=Va(t,e,1),e=vi(),t!==null&&(Np(t,1,e),Bi(t,e))}function Qt(t,e,n){if(t.tag===3)oP(t,t,n);else for(;e!==null;){if(e.tag===3){oP(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Ha===null||!Ha.has(i))){t=fd(n,t),t=u5(e,t,1),e=Va(e,t,1),t=vi(),e!==null&&(Np(e,1,t),Bi(e,t));break}}e=e.return}}function _W(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=vi(),t.pingedLanes|=t.suspendedLanes&n,Tn===t&&(Wn&n)===n&&(kn===4||kn===3&&(Wn&130023424)===Wn&&500>on()-w_?lc(t,0):b_|=n),Bi(t,e)}function M5(t,e){e===0&&(t.mode&1?(e=xm,xm<<=1,!(xm&130023424)&&(xm=4194304)):e=1);var n=vi();t=jo(t,e),t!==null&&(Np(t,e,n),Bi(t,n))}function CW(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),M5(t,n)}function EW(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(ae(314))}i!==null&&i.delete(e),M5(t,n)}var T5;T5=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||$i.current)Li=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Li=!1,hW(t,e,n);Li=!!(t.flags&131072)}else Li=!1,Vt&&e.flags&1048576&&DI(e,H0,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Vg(t,e),t=e.pendingProps;var r=ld(e,si.current);$u(e,n),r=h_(null,e,i,t,r,n);var s=p_();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Fi(i)?(s=!0,U0(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,l_(e),r.updater=yy,e.stateNode=r,r._reactInternals=e,Qx(e,i,t,n),e=nS(null,e,i,!0,s,n)):(e.tag=0,Vt&&s&&t_(e),mi(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Vg(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=NW(i),t=Yr(i,t),r){case 0:e=tS(null,e,i,t,n);break e;case 1:e=XN(null,e,i,t,n);break e;case 11:e=qN(null,e,i,t,n);break e;case 14:e=YN(null,e,i,Yr(i.type,t),n);break e}throw Error(ae(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Yr(i,r),tS(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Yr(i,r),XN(t,e,i,r,n);case 3:e:{if(p5(e),t===null)throw Error(ae(387));i=e.pendingProps,s=e.memoizedState,r=s.element,zI(t,e),K0(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=fd(Error(ae(423)),e),e=JN(t,e,i,n,r);break e}else if(i!==r){r=fd(Error(ae(424)),e),e=JN(t,e,i,n,r);break e}else for(rr=Ua(e.stateNode.containerInfo.firstChild),lr=e,Vt=!0,ts=null,n=FI(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(cd(),i===r){e=$o(t,e,n);break e}mi(t,e,i,n)}e=e.child}return e;case 5:return UI(e),t===null&&Xx(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,Wx(i,r)?o=null:s!==null&&Wx(i,s)&&(e.flags|=32),h5(t,e),mi(t,e,o,n),e.child;case 6:return t===null&&Xx(e),null;case 13:return m5(t,e,n);case 4:return c_(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=ud(e,null,i,n):mi(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Yr(i,r),qN(t,e,i,r,n);case 7:return mi(t,e,e.pendingProps,n),e.child;case 8:return mi(t,e,e.pendingProps.children,n),e.child;case 12:return mi(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Tt(W0,i._currentValue),i._currentValue=o,s!==null)if(ds(s.value,o)){if(s.children===r.children&&!$i.current){e=$o(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Ro(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Jx(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ae(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Jx(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}mi(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,$u(e,n),r=Fr(r),i=i(r),e.flags|=1,mi(t,e,i,n),e.child;case 14:return i=e.type,r=Yr(i,e.pendingProps),r=Yr(i.type,r),YN(t,e,i,r,n);case 15:return d5(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Yr(i,r),Vg(t,e),e.tag=1,Fi(i)?(t=!0,U0(e)):t=!1,$u(e,n),l5(e,i,r),Qx(e,i,r,n),nS(null,e,i,!0,t,n);case 19:return g5(t,e,n);case 22:return f5(t,e,n)}throw Error(ae(156,e.tag))};function R5(t,e){return sI(t,e)}function AW(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nr(t,e,n,i){return new AW(t,e,n,i)}function __(t){return t=t.prototype,!(!t||!t.isReactComponent)}function NW(t){if(typeof t=="function")return __(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Vk)return 11;if(t===Hk)return 14}return 2}function Ga(t,e){var n=t.alternate;return n===null?(n=Nr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Gg(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")__(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case pu:return cc(n.children,r,s,e);case Uk:o=8,r|=8;break;case kx:return t=Nr(12,n,e,r|2),t.elementType=kx,t.lanes=s,t;case _x:return t=Nr(13,n,e,r),t.elementType=_x,t.lanes=s,t;case Cx:return t=Nr(19,n,e,r),t.elementType=Cx,t.lanes=s,t;case UO:return xy(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case BO:o=10;break e;case zO:o=9;break e;case Vk:o=11;break e;case Hk:o=14;break e;case la:o=16,i=null;break e}throw Error(ae(130,t==null?t:typeof t,""))}return e=Nr(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function cc(t,e,n,i){return t=Nr(7,t,i,e),t.lanes=n,t}function xy(t,e,n,i){return t=Nr(22,t,i,e),t.elementType=UO,t.lanes=n,t.stateNode={isHidden:!1},t}function ww(t,e,n){return t=Nr(6,t,null,e),t.lanes=n,t}function xw(t,e,n){return e=Nr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function PW(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tw(0),this.expirationTimes=tw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tw(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function C_(t,e,n,i,r,s,o,a,l){return t=new PW(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Nr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},l_(s),t}function MW(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:hu,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function O5(t){if(!t)return Qa;t=t._reactInternals;e:{if($c(t)!==t||t.tag!==1)throw Error(ae(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Fi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ae(171))}if(t.tag===1){var n=t.type;if(Fi(n))return OI(t,n,e)}return e}function I5(t,e,n,i,r,s,o,a,l){return t=C_(n,i,!0,t,r,s,o,a,l),t.context=O5(null),n=t.current,i=vi(),r=Wa(n),s=Ro(i,r),s.callback=e??null,Va(n,s,r),t.current.lanes=r,Np(t,r,i),Bi(t,i),t}function Sy(t,e,n,i){var r=e.current,s=vi(),o=Wa(r);return n=O5(n),e.context===null?e.context=n:e.pendingContext=n,e=Ro(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Va(r,e,o),t!==null&&(cs(t,r,o,s),Bg(t,r,o)),o}function tv(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function aP(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function E_(t,e){aP(t,e),(t=t.alternate)&&aP(t,e)}function TW(){return null}var D5=typeof reportError=="function"?reportError:function(t){console.error(t)};function A_(t){this._internalRoot=t}ky.prototype.render=A_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ae(409));Sy(t,e,null,null)};ky.prototype.unmount=A_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Sc(function(){Sy(null,t,null,null)}),e[Lo]=null}};function ky(t){this._internalRoot=t}ky.prototype.unstable_scheduleHydration=function(t){if(t){var e=fI();t={blockedOn:null,target:t,priority:e};for(var n=0;n<va.length&&e!==0&&e<va[n].priority;n++);va.splice(n,0,t),n===0&&pI(t)}};function N_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function _y(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function lP(){}function RW(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=tv(o);s.call(c)}}var o=I5(e,i,t,0,null,!1,!1,"",lP);return t._reactRootContainer=o,t[Lo]=o.current,Ih(t.nodeType===8?t.parentNode:t),Sc(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=tv(l);a.call(c)}}var l=C_(t,0,!1,null,null,!1,!1,"",lP);return t._reactRootContainer=l,t[Lo]=l.current,Ih(t.nodeType===8?t.parentNode:t),Sc(function(){Sy(e,l,n,i)}),l}function Cy(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=tv(o);a.call(l)}}Sy(e,o,t,r)}else o=RW(n,e,t,r,i);return tv(o)}uI=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=If(e.pendingLanes);n!==0&&(Kk(e,n|1),Bi(e,on()),!(dt&6)&&(hd=on()+500,bl()))}break;case 13:Sc(function(){var i=jo(t,1);if(i!==null){var r=vi();cs(i,t,1,r)}}),E_(t,1)}};qk=function(t){if(t.tag===13){var e=jo(t,134217728);if(e!==null){var n=vi();cs(e,t,134217728,n)}E_(t,134217728)}};dI=function(t){if(t.tag===13){var e=Wa(t),n=jo(t,e);if(n!==null){var i=vi();cs(n,t,e,i)}E_(t,e)}};fI=function(){return xt};hI=function(t,e){var n=xt;try{return xt=t,e()}finally{xt=n}};Dx=function(t,e,n){switch(e){case"input":if(Nx(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=my(i);if(!r)throw Error(ae(90));HO(i),Nx(i,r)}}}break;case"textarea":GO(t,n);break;case"select":e=n.value,e!=null&&Iu(t,!!n.multiple,e,!1)}};QO=x_;eI=Sc;var OW={usingClientEntryPoint:!1,Events:[Mp,yu,my,JO,ZO,x_]},af={findFiberByHostInstance:ec,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},IW={bundleType:af.bundleType,version:af.version,rendererPackageName:af.rendererPackageName,rendererConfig:af.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wo.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=iI(t),t===null?null:t.stateNode},findFiberByHostInstance:af.findFiberByHostInstance||TW,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rm.isDisabled&&Rm.supportsFiber)try{dy=Rm.inject(IW),Ys=Rm}catch{}}pr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=OW;pr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!N_(e))throw Error(ae(200));return MW(t,e,null,n)};pr.createRoot=function(t,e){if(!N_(t))throw Error(ae(299));var n=!1,i="",r=D5;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=C_(t,1,!1,null,null,n,!1,i,r),t[Lo]=e.current,Ih(t.nodeType===8?t.parentNode:t),new A_(e)};pr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ae(188)):(t=Object.keys(t).join(","),Error(ae(268,t)));return t=iI(e),t=t===null?null:t.stateNode,t};pr.flushSync=function(t){return Sc(t)};pr.hydrate=function(t,e,n){if(!_y(e))throw Error(ae(200));return Cy(null,t,e,!0,n)};pr.hydrateRoot=function(t,e,n){if(!N_(t))throw Error(ae(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=D5;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=I5(e,null,t,1,n??null,r,!1,s,o),t[Lo]=e.current,Ih(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new ky(e)};pr.render=function(t,e,n){if(!_y(e))throw Error(ae(200));return Cy(null,t,e,!1,n)};pr.unmountComponentAtNode=function(t){if(!_y(t))throw Error(ae(40));return t._reactRootContainer?(Sc(function(){Cy(null,null,t,!1,function(){t._reactRootContainer=null,t[Lo]=null})}),!0):!1};pr.unstable_batchedUpdates=x_;pr.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!_y(n))throw Error(ae(200));if(t==null||t._reactInternals===void 0)throw Error(ae(38));return Cy(t,e,n,!1,i)};pr.version="18.3.1-next-f1338f8080-20240426";function L5(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(L5)}catch(t){console.error(t)}}L5(),LO.exports=pr;var wl=LO.exports;const DW=Lc(wl);var j5,cP=wl;j5=cP.createRoot,cP.hydrateRoot;function ve(t,e,{checkForDefaultPrevented:n=!0}={}){return function(r){if(t==null||t(r),n===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function vs(t,e=[]){let n=[];function i(s,o){const a=x.createContext(o),l=n.length;n=[...n,o];const c=d=>{var v;const{scope:f,children:p,...m}=d,g=((v=f==null?void 0:f[t])==null?void 0:v[l])||a,y=x.useMemo(()=>m,Object.values(m));return h.jsx(g.Provider,{value:y,children:p})};c.displayName=s+"Provider";function u(d,f){var g;const p=((g=f==null?void 0:f[t])==null?void 0:g[l])||a,m=x.useContext(p);if(m)return m;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return[c,u]}const r=()=>{const s=n.map(o=>x.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return x.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return r.scopeName=t,[i,LW(r,...e)]}function LW(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const i=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(s){const o=i.reduce((a,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...a,...d}},{});return x.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function uP(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Ey(...t){return e=>{let n=!1;const i=t.map(r=>{const s=uP(r,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let r=0;r<i.length;r++){const s=i[r];typeof s=="function"?s():uP(t[r],null)}}}}function st(...t){return x.useCallback(Ey(...t),t)}function pd(t){const e=jW(t),n=x.forwardRef((i,r)=>{const{children:s,...o}=i,a=x.Children.toArray(s),l=a.find(FW);if(l){const c=l.props.children,u=a.map(d=>d===l?x.Children.count(c)>1?x.Children.only(null):x.isValidElement(c)?c.props.children:null:d);return h.jsx(e,{...o,ref:r,children:x.isValidElement(c)?x.cloneElement(c,void 0,u):null})}return h.jsx(e,{...o,ref:r,children:s})});return n.displayName=`${t}.Slot`,n}function jW(t){const e=x.forwardRef((n,i)=>{const{children:r,...s}=n;if(x.isValidElement(r)){const o=zW(r),a=BW(s,r.props);return r.type!==x.Fragment&&(a.ref=i?Ey(i,o):o),x.cloneElement(r,a)}return x.Children.count(r)>1?x.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var $W=Symbol("radix.slottable");function FW(t){return x.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===$W}function BW(t,e){const n={...e};for(const i in e){const r=t[i],s=e[i];/^on[A-Z]/.test(i)?r&&s?n[i]=(...a)=>{const l=s(...a);return r(...a),l}:r&&(n[i]=r):i==="style"?n[i]={...r,...s}:i==="className"&&(n[i]=[r,s].filter(Boolean).join(" "))}return{...t,...n}}function zW(t){var i,r;let e=(i=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Rp(t){const e=t+"CollectionProvider",[n,i]=vs(e),[r,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:y,children:v}=g,b=Dt.useRef(null),w=Dt.useRef(new Map).current;return h.jsx(r,{scope:y,itemMap:w,collectionRef:b,children:v})};o.displayName=e;const a=t+"CollectionSlot",l=pd(a),c=Dt.forwardRef((g,y)=>{const{scope:v,children:b}=g,w=s(a,v),k=st(y,w.collectionRef);return h.jsx(l,{ref:k,children:b})});c.displayName=a;const u=t+"CollectionItemSlot",d="data-radix-collection-item",f=pd(u),p=Dt.forwardRef((g,y)=>{const{scope:v,children:b,...w}=g,k=Dt.useRef(null),_=st(y,k),E=s(u,v);return Dt.useEffect(()=>(E.itemMap.set(k,{ref:k,...w}),()=>void E.itemMap.delete(k))),h.jsx(f,{[d]:"",ref:_,children:b})});p.displayName=u;function m(g){const y=s(t+"CollectionConsumer",g);return Dt.useCallback(()=>{const b=y.collectionRef.current;if(!b)return[];const w=Array.from(b.querySelectorAll(`[${d}]`));return Array.from(y.itemMap.values()).sort((E,C)=>w.indexOf(E.ref.current)-w.indexOf(C.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:o,Slot:c,ItemSlot:p},m,i]}var Kn=globalThis!=null&&globalThis.document?x.useLayoutEffect:()=>{},UW=ry[" useId ".trim().toString()]||(()=>{}),VW=0;function $d(t){const[e,n]=x.useState(UW());return Kn(()=>{n(i=>i??String(VW++))},[t]),e?`radix-${e}`:""}var HW=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ue=HW.reduce((t,e)=>{const n=pd(`Primitive.${e}`),i=x.forwardRef((r,s)=>{const{asChild:o,...a}=r,l=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(l,{...a,ref:s})});return i.displayName=`Primitive.${e}`,{...t,[e]:i}},{});function P_(t,e){t&&wl.flushSync(()=>t.dispatchEvent(e))}function dr(t){const e=x.useRef(t);return x.useEffect(()=>{e.current=t}),x.useMemo(()=>(...n)=>{var i;return(i=e.current)==null?void 0:i.call(e,...n)},[])}var WW=ry[" useInsertionEffect ".trim().toString()]||Kn;function el({prop:t,defaultProp:e,onChange:n=()=>{},caller:i}){const[r,s,o]=GW({defaultProp:e,onChange:n}),a=t!==void 0,l=a?t:r;{const u=x.useRef(t!==void 0);x.useEffect(()=>{const d=u.current;d!==a&&console.warn(`${i} is changing from ${d?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,i])}const c=x.useCallback(u=>{var d;if(a){const f=KW(u)?u(t):u;f!==t&&((d=o.current)==null||d.call(o,f))}else s(u)},[a,t,s,o]);return[l,c]}function GW({defaultProp:t,onChange:e}){const[n,i]=x.useState(t),r=x.useRef(n),s=x.useRef(e);return WW(()=>{s.current=e},[e]),x.useEffect(()=>{var o;r.current!==n&&((o=s.current)==null||o.call(s,n),r.current=n)},[n,r]),[n,i,s]}function KW(t){return typeof t=="function"}var qW=x.createContext(void 0);function Ay(t){const e=x.useContext(qW);return t||e||"ltr"}var Sw="rovingFocusGroup.onEntryFocus",YW={bubbles:!1,cancelable:!0},Op="RovingFocusGroup",[pS,$5,XW]=Rp(Op),[JW,Ny]=vs(Op,[XW]),[ZW,QW]=JW(Op),F5=x.forwardRef((t,e)=>h.jsx(pS.Provider,{scope:t.__scopeRovingFocusGroup,children:h.jsx(pS.Slot,{scope:t.__scopeRovingFocusGroup,children:h.jsx(eG,{...t,ref:e})})}));F5.displayName=Op;var eG=x.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:i,loop:r=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=t,f=x.useRef(null),p=st(e,f),m=Ay(s),[g,y]=el({prop:o,defaultProp:a??null,onChange:l,caller:Op}),[v,b]=x.useState(!1),w=dr(c),k=$5(n),_=x.useRef(!1),[E,C]=x.useState(0);return x.useEffect(()=>{const N=f.current;if(N)return N.addEventListener(Sw,w),()=>N.removeEventListener(Sw,w)},[w]),h.jsx(ZW,{scope:n,orientation:i,dir:m,loop:r,currentTabStopId:g,onItemFocus:x.useCallback(N=>y(N),[y]),onItemShiftTab:x.useCallback(()=>b(!0),[]),onFocusableItemAdd:x.useCallback(()=>C(N=>N+1),[]),onFocusableItemRemove:x.useCallback(()=>C(N=>N-1),[]),children:h.jsx(Ue.div,{tabIndex:v||E===0?-1:0,"data-orientation":i,...d,ref:p,style:{outline:"none",...t.style},onMouseDown:ve(t.onMouseDown,()=>{_.current=!0}),onFocus:ve(t.onFocus,N=>{const M=!_.current;if(N.target===N.currentTarget&&M&&!v){const R=new CustomEvent(Sw,YW);if(N.currentTarget.dispatchEvent(R),!R.defaultPrevented){const I=k().filter(Y=>Y.focusable),D=I.find(Y=>Y.active),K=I.find(Y=>Y.id===g),W=[D,K,...I].filter(Boolean).map(Y=>Y.ref.current);U5(W,u)}}_.current=!1}),onBlur:ve(t.onBlur,()=>b(!1))})})}),B5="RovingFocusGroupItem",z5=x.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:i=!0,active:r=!1,tabStopId:s,children:o,...a}=t,l=$d(),c=s||l,u=QW(B5,n),d=u.currentTabStopId===c,f=$5(n),{onFocusableItemAdd:p,onFocusableItemRemove:m,currentTabStopId:g}=u;return x.useEffect(()=>{if(i)return p(),()=>m()},[i,p,m]),h.jsx(pS.ItemSlot,{scope:n,id:c,focusable:i,active:r,children:h.jsx(Ue.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...a,ref:e,onMouseDown:ve(t.onMouseDown,y=>{i?u.onItemFocus(c):y.preventDefault()}),onFocus:ve(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:ve(t.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){u.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const v=iG(y,u.orientation,u.dir);if(v!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let w=f().filter(k=>k.focusable).map(k=>k.ref.current);if(v==="last")w.reverse();else if(v==="prev"||v==="next"){v==="prev"&&w.reverse();const k=w.indexOf(y.currentTarget);w=u.loop?rG(w,k+1):w.slice(k+1)}setTimeout(()=>U5(w))}}),children:typeof o=="function"?o({isCurrentTabStop:d,hasTabStop:g!=null}):o})})});z5.displayName=B5;var tG={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function nG(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function iG(t,e,n){const i=nG(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return tG[i]}function U5(t,e=!1){const n=document.activeElement;for(const i of t)if(i===n||(i.focus({preventScroll:e}),document.activeElement!==n))return}function rG(t,e){return t.map((n,i)=>t[(e+i)%t.length])}var V5=F5,H5=z5;function sG(t,e){return x.useReducer((n,i)=>e[n][i]??n,t)}var Go=t=>{const{present:e,children:n}=t,i=oG(e),r=typeof n=="function"?n({present:i.isPresent}):x.Children.only(n),s=st(i.ref,aG(r));return typeof n=="function"||i.isPresent?x.cloneElement(r,{ref:s}):null};Go.displayName="Presence";function oG(t){const[e,n]=x.useState(),i=x.useRef(null),r=x.useRef(t),s=x.useRef("none"),o=t?"mounted":"unmounted",[a,l]=sG(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const c=Om(i.current);s.current=a==="mounted"?c:"none"},[a]),Kn(()=>{const c=i.current,u=r.current;if(u!==t){const f=s.current,p=Om(c);t?l("MOUNT"):p==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&f!==p?"ANIMATION_OUT":"UNMOUNT"),r.current=t}},[t,l]),Kn(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,d=p=>{const g=Om(i.current).includes(p.animationName);if(p.target===e&&g&&(l("ANIMATION_END"),!r.current)){const y=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=y)})}},f=p=>{p.target===e&&(s.current=Om(i.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:x.useCallback(c=>{i.current=c?getComputedStyle(c):null,n(c)},[])}}function Om(t){return(t==null?void 0:t.animationName)||"none"}function aG(t){var i,r;let e=(i=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Py="Tabs",[lG,nge]=vs(Py,[Ny]),W5=Ny(),[cG,M_]=lG(Py),G5=x.forwardRef((t,e)=>{const{__scopeTabs:n,value:i,onValueChange:r,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=t,u=Ay(a),[d,f]=el({prop:i,onChange:r,defaultProp:s??"",caller:Py});return h.jsx(cG,{scope:n,baseId:$d(),value:d,onValueChange:f,orientation:o,dir:u,activationMode:l,children:h.jsx(Ue.div,{dir:u,"data-orientation":o,...c,ref:e})})});G5.displayName=Py;var K5="TabsList",q5=x.forwardRef((t,e)=>{const{__scopeTabs:n,loop:i=!0,...r}=t,s=M_(K5,n),o=W5(n);return h.jsx(V5,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:i,children:h.jsx(Ue.div,{role:"tablist","aria-orientation":s.orientation,...r,ref:e})})});q5.displayName=K5;var Y5="TabsTrigger",Kg=x.forwardRef((t,e)=>{const{__scopeTabs:n,value:i,disabled:r=!1,...s}=t,o=M_(Y5,n),a=W5(n),l=J5(o.baseId,i),c=Z5(o.baseId,i),u=i===o.value;return h.jsx(H5,{asChild:!0,...a,focusable:!r,active:u,children:h.jsx(Ue.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:l,...s,ref:e,onMouseDown:ve(t.onMouseDown,d=>{!r&&d.button===0&&d.ctrlKey===!1?o.onValueChange(i):d.preventDefault()}),onKeyDown:ve(t.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(i)}),onFocus:ve(t.onFocus,()=>{const d=o.activationMode!=="manual";!u&&!r&&d&&o.onValueChange(i)})})})});Kg.displayName=Y5;var X5="TabsContent",qg=x.forwardRef((t,e)=>{const{__scopeTabs:n,value:i,forceMount:r,children:s,...o}=t,a=M_(X5,n),l=J5(a.baseId,i),c=Z5(a.baseId,i),u=i===a.value,d=x.useRef(u);return x.useEffect(()=>{const f=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(f)},[]),h.jsx(Go,{present:r||u,children:({present:f})=>h.jsx(Ue.div,{"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!f,id:c,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:d.current?"0s":void 0},children:f&&s})})});qg.displayName=X5;function J5(t,e){return`${t}-trigger-${e}`}function Z5(t,e){return`${t}-content-${e}`}const Lf={},dP=(t,e)=>t.unstable_is?t.unstable_is(e):e===t,fP=t=>"init"in t,kw=t=>!!t.write,hP=t=>"v"in t||"e"in t,Im=t=>{if("e"in t)throw t.e;if((Lf?"production":void 0)!=="production"&&!("v"in t))throw new Error("[Bug] atom state is not initialized");return t.v},nv=new WeakMap,pP=t=>{var e;return iv(t)&&!!((e=nv.get(t))!=null&&e[0])},uG=t=>{const e=nv.get(t);e!=null&&e[0]&&(e[0]=!1,e[1].forEach(n=>n()))},Q5=(t,e)=>{let n=nv.get(t);if(!n){n=[!0,new Set],nv.set(t,n);const i=()=>{n[0]=!1};t.then(i,i)}n[1].add(e)},iv=t=>typeof(t==null?void 0:t.then)=="function",eD=(t,e,n)=>{n.p.has(t)||(n.p.add(t),e.then(()=>{n.p.delete(t)},()=>{n.p.delete(t)}))},_w=(t,e,n)=>{const i=n(t),r="v"in i,s=i.v;if(iv(e))for(const o of i.d.keys())eD(t,e,n(o));i.v=e,delete i.e,(!r||!Object.is(s,i.v))&&(++i.n,iv(s)&&uG(s))},mP=(t,e,n)=>{var i;const r=new Set;for(const s of((i=n.get(t))==null?void 0:i.t)||[])n.has(s)&&r.add(s);for(const s of e.p)r.add(s);return r},dG=()=>{const t=new Set,e=()=>{t.forEach(n=>n())};return e.add=n=>(t.add(n),()=>{t.delete(n)}),e},Cw=()=>{const t={},e=new WeakMap,n=i=>{var r,s;(r=e.get(t))==null||r.forEach(o=>o(i)),(s=e.get(i))==null||s.forEach(o=>o())};return n.add=(i,r)=>{const s=i||t,o=(e.has(s)?e:e.set(s,new Set)).get(s);return o.add(r),()=>{o==null||o.delete(r),o.size||e.delete(s)}},n},fG=t=>(t.c||(t.c=Cw()),t.m||(t.m=Cw()),t.u||(t.u=Cw()),t.f||(t.f=dG()),t),hG=Symbol(),pG=(t=new WeakMap,e=new WeakMap,n=new WeakMap,i=new Set,r=new Set,s=new Set,o={},a=(f,...p)=>f.read(...p),l=(f,...p)=>f.write(...p),c=(f,p)=>{var m;return(m=f.unstable_onInit)==null?void 0:m.call(f,p)},u=(f,p)=>{var m;return(m=f.onMount)==null?void 0:m.call(f,p)},...d)=>{const f=d[0]||(C=>{if((Lf?"production":void 0)!=="production"&&!C)throw new Error("Atom is undefined or null");let N=t.get(C);return N||(N={d:new Map,p:new Set,n:0},t.set(C,N),c==null||c(C,E)),N}),p=d[1]||(()=>{const C=[],N=M=>{try{M()}catch(R){C.push(R)}};do{o.f&&N(o.f);const M=new Set,R=M.add.bind(M);i.forEach(I=>{var D;return(D=e.get(I))==null?void 0:D.l.forEach(R)}),i.clear(),s.forEach(R),s.clear(),r.forEach(R),r.clear(),M.forEach(N),i.size&&m()}while(i.size||s.size||r.size);if(C.length)throw new AggregateError(C)}),m=d[2]||(()=>{const C=[],N=new WeakSet,M=new WeakSet,R=Array.from(i);for(;R.length;){const I=R[R.length-1],D=f(I);if(M.has(I)){R.pop();continue}if(N.has(I)){if(n.get(I)===D.n)C.push([I,D]);else if((Lf?"production":void 0)!=="production"&&n.has(I))throw new Error("[Bug] invalidated atom exists");M.add(I),R.pop();continue}N.add(I);for(const K of mP(I,D,e))N.has(K)||R.push(K)}for(let I=C.length-1;I>=0;--I){const[D,K]=C[I];let B=!1;for(const W of K.d.keys())if(W!==D&&i.has(W)){B=!0;break}B&&(g(D),b(D)),n.delete(D)}}),g=d[3]||(C=>{var N;const M=f(C);if(hP(M)&&(e.has(C)&&n.get(C)!==M.n||Array.from(M.d).every(([te,V])=>g(te).n===V)))return M;M.d.clear();let R=!0;const I=()=>{e.has(C)&&(b(C),m(),p())},D=te=>{var V;if(dP(C,te)){const ie=f(te);if(!hP(ie))if(fP(te))_w(te,te.init,f);else throw new Error("no atom init");return Im(ie)}const $=g(te);try{return Im($)}finally{M.d.set(te,$.n),pP(M.v)&&eD(C,M.v,$),(V=e.get(te))==null||V.t.add(C),R||I()}};let K,B;const W={get signal(){return K||(K=new AbortController),K.signal},get setSelf(){return(Lf?"production":void 0)!=="production"&&!kw(C)&&console.warn("setSelf function cannot be used with read-only atom"),!B&&kw(C)&&(B=(...te)=>{if((Lf?"production":void 0)!=="production"&&R&&console.warn("setSelf function cannot be called in sync"),!R)try{return v(C,...te)}finally{m(),p()}}),B}},Y=M.n;try{const te=a(C,D,W);return _w(C,te,f),iv(te)&&(Q5(te,()=>K==null?void 0:K.abort()),te.then(I,I)),M}catch(te){return delete M.v,M.e=te,++M.n,M}finally{R=!1,Y!==M.n&&n.get(C)===Y&&(n.set(C,M.n),i.add(C),(N=o.c)==null||N.call(o,C))}}),y=d[4]||(C=>{const N=[C];for(;N.length;){const M=N.pop(),R=f(M);for(const I of mP(M,R,e)){const D=f(I);n.set(I,D.n),N.push(I)}}}),v=d[5]||((C,...N)=>{let M=!0;const R=D=>Im(g(D)),I=(D,...K)=>{var B;const W=f(D);try{if(dP(C,D)){if(!fP(D))throw new Error("atom not writable");const Y=W.n,te=K[0];_w(D,te,f),b(D),Y!==W.n&&(i.add(D),(B=o.c)==null||B.call(o,D),y(D));return}else return v(D,...K)}finally{M||(m(),p())}};try{return l(C,R,I,...N)}finally{M=!1}}),b=d[6]||(C=>{var N;const M=f(C),R=e.get(C);if(R&&!pP(M.v)){for(const[I,D]of M.d)if(!R.d.has(I)){const K=f(I);w(I).t.add(C),R.d.add(I),D!==K.n&&(i.add(I),(N=o.c)==null||N.call(o,I),y(I))}for(const I of R.d||[])if(!M.d.has(I)){R.d.delete(I);const D=k(I);D==null||D.t.delete(C)}}}),w=d[7]||(C=>{var N;const M=f(C);let R=e.get(C);if(!R){g(C);for(const I of M.d.keys())w(I).t.add(C);if(R={l:new Set,d:new Set(M.d.keys()),t:new Set},e.set(C,R),(N=o.m)==null||N.call(o,C),kw(C)){const I=()=>{let D=!0;const K=(...B)=>{try{return v(C,...B)}finally{D||(m(),p())}};try{const B=u(C,K);B&&(R.u=()=>{D=!0;try{B()}finally{D=!1}})}finally{D=!1}};r.add(I)}}return R}),k=d[8]||(C=>{var N;const M=f(C);let R=e.get(C);if(R&&!R.l.size&&!Array.from(R.t).some(I=>{var D;return(D=e.get(I))==null?void 0:D.d.has(C)})){R.u&&s.add(R.u),R=void 0,e.delete(C),(N=o.u)==null||N.call(o,C);for(const I of M.d.keys()){const D=k(I);D==null||D.t.delete(C)}return}return R}),_=[t,e,n,i,r,s,o,a,l,c,u,f,p,m,g,y,v,b,w,k],E={get:C=>Im(g(C)),set:(C,...N)=>{try{return v(C,...N)}finally{m(),p()}},sub:(C,N)=>{const R=w(C).l;return R.add(N),p(),()=>{R.delete(N),k(C),p()}}};return Object.defineProperty(E,hG,{value:_}),E},tD=pG,mG=fG,gP=Q5,T_={};let gG=0;function de(t,e){const n=`atom${++gG}`,i={toString(){return(T_?"production":void 0)!=="production"&&this.debugLabel?n+":"+this.debugLabel:n}};return typeof t=="function"?i.read=t:(i.init=t,i.read=vG,i.write=yG),e&&(i.write=e),i}function vG(t){return t(this)}function yG(t,e,n){return e(this,typeof n=="function"?n(t(this)):n)}const bG=()=>{let t=0;const e=mG({}),n=new WeakMap,i=new WeakMap,r=tD(n,i,void 0,void 0,void 0,void 0,e,void 0,(a,l,c,...u)=>t?c(a,...u):a.write(l,c,...u)),s=new Set;return e.m.add(void 0,a=>{s.add(a);const l=n.get(a);l.m=i.get(a)}),e.u.add(void 0,a=>{s.delete(a);const l=n.get(a);delete l.m}),Object.assign(r,{dev4_get_internal_weak_map:()=>(console.log("Deprecated: Use devstore from the devtools library"),n),dev4_get_mounted_atoms:()=>s,dev4_restore_atoms:a=>{const l={read:()=>null,write:(c,u)=>{++t;try{for(const[d,f]of a)"init"in d&&u(d,f)}finally{--t}}};r.set(l)}})};function R_(){return(T_?"production":void 0)!=="production"?bG():tD()}let lf;function wG(){return lf||(lf=R_(),(T_?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=lf),globalThis.__JOTAI_DEFAULT_STORE__!==lf&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),lf}const xG={},nD=x.createContext(void 0);function iD(t){return x.useContext(nD)||wG()}function SG({children:t,store:e}){const n=x.useRef(void 0);return!e&&!n.current&&(n.current=R_()),x.createElement(nD.Provider,{value:e||n.current},t)}const mS=t=>typeof(t==null?void 0:t.then)=="function",gS=t=>{t.status||(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}))},kG=Dt.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(gS(t),t)}),Ew=new WeakMap,vP=(t,e)=>{let n=Ew.get(t);return n||(n=new Promise((i,r)=>{let s=t;const o=c=>u=>{s===c&&i(u)},a=c=>u=>{s===c&&r(u)},l=()=>{try{const c=e();mS(c)?(Ew.set(c,n),s=c,c.then(o(c),a(c)),gP(c,l)):i(c)}catch(c){r(c)}};t.then(o(t),a(t)),gP(t,l)}),Ew.set(t,n)),n};function at(t,e){const{delay:n,unstable_promiseStatus:i=!Dt.use}={},r=iD(),[[s,o,a],l]=x.useReducer(u=>{const d=r.get(t);return Object.is(u[0],d)&&u[1]===r&&u[2]===t?u:[d,r,t]},void 0,()=>[r.get(t),r,t]);let c=s;if((o!==r||a!==t)&&(l(),c=r.get(t)),x.useEffect(()=>{const u=r.sub(t,()=>{if(i)try{const d=r.get(t);mS(d)&&gS(vP(d,()=>r.get(t)))}catch{}if(typeof n=="number"){setTimeout(l,n);return}l()});return l(),u},[r,t,n,i]),x.useDebugValue(c),mS(c)){const u=vP(c,()=>r.get(t));return i&&gS(u),kG(u)}return c}function vS(t,e){const n=iD();return x.useCallback((...r)=>{if((xG?"production":void 0)!=="production"&&!("write"in t))throw new Error("not writable atom");return n.set(t,...r)},[n,t])}function Ip(t,e){return[at(t),vS(t)]}const{createElement:md,createContext:_G,forwardRef:rD,useCallback:ki,useContext:sD,useEffect:uc,useImperativeHandle:oD,useLayoutEffect:CG,useMemo:EG,useRef:Qi,useState:rv}=ry,yP=ry.useId,My=_G(null);My.displayName="PanelGroupContext";const Vh=CG,AG=typeof yP=="function"?yP:()=>null;let NG=0;function O_(t=null){const e=AG(),n=Qi(t||e||null);return n.current===null&&(n.current=""+NG++),t??n.current}function aD({children:t,className:e="",collapsedSize:n,collapsible:i,defaultSize:r,forwardedRef:s,id:o,maxSize:a,minSize:l,onCollapse:c,onExpand:u,onResize:d,order:f,style:p,tagName:m="div",...g}){const y=sD(My);if(y===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:v,expandPanel:b,getPanelSize:w,getPanelStyle:k,groupId:_,isPanelCollapsed:E,reevaluatePanelConstraints:C,registerPanel:N,resizePanel:M,unregisterPanel:R}=y,I=O_(o),D=Qi({callbacks:{onCollapse:c,onExpand:u,onResize:d},constraints:{collapsedSize:n,collapsible:i,defaultSize:r,maxSize:a,minSize:l},id:I,idIsFromProps:o!==void 0,order:f});Qi({didLogMissingDefaultSizeWarning:!1}),Vh(()=>{const{callbacks:B,constraints:W}=D.current,Y={...W};D.current.id=I,D.current.idIsFromProps=o!==void 0,D.current.order=f,B.onCollapse=c,B.onExpand=u,B.onResize=d,W.collapsedSize=n,W.collapsible=i,W.defaultSize=r,W.maxSize=a,W.minSize=l,(Y.collapsedSize!==W.collapsedSize||Y.collapsible!==W.collapsible||Y.maxSize!==W.maxSize||Y.minSize!==W.minSize)&&C(D.current,Y)}),Vh(()=>{const B=D.current;return N(B),()=>{R(B)}},[f,I,N,R]),oD(s,()=>({collapse:()=>{v(D.current)},expand:()=>{b(D.current)},getId(){return I},getSize(){return w(D.current)},isCollapsed(){return E(D.current)},isExpanded(){return!E(D.current)},resize:B=>{M(D.current,B)}}),[v,b,w,E,I,M]);const K=k(D.current,r);return md(m,{...g,children:t,className:e,style:{...K,...p},"data-panel":"","data-panel-id":I,"data-panel-group-id":_,"data-panel-collapsible":void 0,"data-panel-size":void 0})}const Yg=rD((t,e)=>md(aD,{...t,forwardedRef:e}));aD.displayName="Panel";Yg.displayName="forwardRef(Panel)";function Xe(t,e="Assertion failed!"){if(!t)throw console.error(e),Error(e)}const lD=10;function Hh(t,e,n=lD){t=parseFloat(t.toFixed(n)),e=parseFloat(e.toFixed(n));const i=t-e;return i===0?0:i>0?1:-1}function Xi(t,e,n){return Hh(t,e,n)===0}function Cu({panelConstraints:t,panelIndex:e,size:n}){const i=t[e];Xe(i!=null);let{collapsedSize:r=0,collapsible:s,maxSize:o=100,minSize:a=0}=i;if(Hh(n,a)<0)if(s){const l=(r+a)/2;Hh(n,l)<0?n=r:n=a}else n=a;return n=Math.min(o,n),n=parseFloat(n.toFixed(lD)),n}function jf({delta:t,layout:e,panelConstraints:n,pivotIndices:i,trigger:r}){if(Xi(t,0))return e;const s=[...e],[o,a]=i;Xe(o!=null),Xe(a!=null);let l=0;if(r==="keyboard"){{const u=t<0?a:o,d=n[u];if(Xe(d),d.collapsible){const f=e[u];Xe(f!=null);const p=n[u];Xe(p);const{collapsedSize:m=0,minSize:g=0}=p;if(Xi(f,m)){const y=g-f;Hh(y,Math.abs(t))>0&&(t=t<0?0-y:y)}}}{const u=t<0?o:a,d=n[u];Xe(d);const{collapsible:f}=d;if(f){const p=e[u];Xe(p!=null);const m=n[u];Xe(m);const{collapsedSize:g=0,minSize:y=0}=m;if(Xi(p,y)){const v=p-g;Hh(v,Math.abs(t))>0&&(t=t<0?0-v:v)}}}}{const u=t<0?1:-1;let d=t<0?a:o,f=0;for(;;){const m=e[d];Xe(m!=null);const y=Cu({panelConstraints:n,panelIndex:d,size:100})-m;if(f+=y,d+=u,d<0||d>=n.length)break}const p=Math.min(Math.abs(t),Math.abs(f));t=t<0?0-p:p}{let d=t<0?o:a;for(;d>=0&&d<n.length;){const f=Math.abs(t)-Math.abs(l),p=e[d];Xe(p!=null);const m=p-f,g=Cu({panelConstraints:n,panelIndex:d,size:m});if(!Xi(p,g)&&(l+=p-g,s[d]=g,l.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?d--:d++}}if(Xi(l,0))return e;{const u=t<0?a:o,d=e[u];Xe(d!=null);const f=d+l,p=Cu({panelConstraints:n,panelIndex:u,size:f});if(s[u]=p,!Xi(p,f)){let m=f-p,y=t<0?a:o;for(;y>=0&&y<n.length;){const v=s[y];Xe(v!=null);const b=v+m,w=Cu({panelConstraints:n,panelIndex:y,size:b});if(Xi(v,w)||(m-=w-v,s[y]=w),Xi(m,0))break;t>0?y--:y++}}}const c=s.reduce((u,d)=>d+u,0);return Xi(c,100)?s:e}function PG({layout:t,panelsArray:e,pivotIndices:n}){let i=0,r=100,s=0,o=0;const a=n[0];Xe(a!=null),e.forEach((d,f)=>{const{constraints:p}=d,{maxSize:m=100,minSize:g=0}=p;f===a?(i=g,r=m):(s+=g,o+=m)});const l=Math.min(r,100-s),c=Math.max(i,100-o),u=t[a];return{valueMax:l,valueMin:c,valueNow:u}}function Wh(t,e=document){return Array.from(e.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${t}"]`))}function cD(t,e,n=document){const r=Wh(t,n).findIndex(s=>s.getAttribute("data-panel-resize-handle-id")===e);return r??null}function uD(t,e,n){const i=cD(t,e,n);return i!=null?[i,i+1]:[-1,-1]}function dD(t,e=document){var n;if(e instanceof HTMLElement&&(e==null||(n=e.dataset)===null||n===void 0?void 0:n.panelGroupId)==t)return e;const i=e.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return i||null}function Ty(t,e=document){const n=e.querySelector(`[data-panel-resize-handle-id="${t}"]`);return n||null}function MG(t,e,n,i=document){var r,s,o,a;const l=Ty(e,i),c=Wh(t,i),u=l?c.indexOf(l):-1,d=(r=(s=n[u])===null||s===void 0?void 0:s.id)!==null&&r!==void 0?r:null,f=(o=(a=n[u+1])===null||a===void 0?void 0:a.id)!==null&&o!==void 0?o:null;return[d,f]}function TG({committedValuesRef:t,eagerValuesRef:e,groupId:n,layout:i,panelDataArray:r,panelGroupElement:s,setLayout:o}){Qi({didWarnAboutMissingResizeHandle:!1}),Vh(()=>{if(!s)return;const a=Wh(n,s);for(let l=0;l<r.length-1;l++){const{valueMax:c,valueMin:u,valueNow:d}=PG({layout:i,panelsArray:r,pivotIndices:[l,l+1]}),f=a[l];if(f!=null){const p=r[l];Xe(p),f.setAttribute("aria-controls",p.id),f.setAttribute("aria-valuemax",""+Math.round(c)),f.setAttribute("aria-valuemin",""+Math.round(u)),f.setAttribute("aria-valuenow",d!=null?""+Math.round(d):"")}}return()=>{a.forEach((l,c)=>{l.removeAttribute("aria-controls"),l.removeAttribute("aria-valuemax"),l.removeAttribute("aria-valuemin"),l.removeAttribute("aria-valuenow")})}},[n,i,r,s]),uc(()=>{if(!s)return;const a=e.current;Xe(a);const{panelDataArray:l}=a,c=dD(n,s);Xe(c!=null,`No group found for id "${n}"`);const u=Wh(n,s);Xe(u);const d=u.map(f=>{const p=f.getAttribute("data-panel-resize-handle-id");Xe(p);const[m,g]=MG(n,p,l,s);if(m==null||g==null)return()=>{};const y=v=>{if(!v.defaultPrevented)switch(v.key){case"Enter":{v.preventDefault();const b=l.findIndex(w=>w.id===m);if(b>=0){const w=l[b];Xe(w);const k=i[b],{collapsedSize:_=0,collapsible:E,minSize:C=0}=w.constraints;if(k!=null&&E){const N=jf({delta:Xi(k,_)?C-_:_-k,layout:i,panelConstraints:l.map(M=>M.constraints),pivotIndices:uD(n,p,s),trigger:"keyboard"});i!==N&&o(N)}}break}}};return f.addEventListener("keydown",y),()=>{f.removeEventListener("keydown",y)}});return()=>{d.forEach(f=>f())}},[s,t,e,n,i,r,o])}function bP(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function fD(t){return t.type==="keydown"}function hD(t){return t.type.startsWith("mouse")}function pD(t){return t.type.startsWith("touch")}function mD(t,e){const n=t==="horizontal";if(hD(e))return n?e.clientX:e.clientY;if(pD(e)){const i=e.touches[0];return Xe(i),n?i.screenX:i.screenY}else throw Error(`Unsupported event type "${e.type}"`)}function RG(t,e,n,i,r){const s=n==="horizontal",o=Ty(e,r);Xe(o);const a=o.getAttribute("data-panel-group-id");Xe(a);let{initialCursorPosition:l}=i;const c=mD(n,t),u=dD(a,r);Xe(u);const d=u.getBoundingClientRect(),f=s?d.width:d.height;return(c-l)/f*100}function OG(t,e,n,i,r,s){if(fD(t)){const o=n==="horizontal";let a=0;t.shiftKey?a=100:r!=null?a=r:a=10;let l=0;switch(t.key){case"ArrowDown":l=o?0:a;break;case"ArrowLeft":l=o?-a:0;break;case"ArrowRight":l=o?a:0;break;case"ArrowUp":l=o?0:-a;break;case"End":l=100;break;case"Home":l=-100;break}return l}else return i==null?0:RG(t,e,n,i,s)}function IG({panelDataArray:t}){const e=Array(t.length),n=t.map(s=>s.constraints);let i=0,r=100;for(let s=0;s<t.length;s++){const o=n[s];Xe(o);const{defaultSize:a}=o;a!=null&&(i++,e[s]=a,r-=a)}for(let s=0;s<t.length;s++){const o=n[s];Xe(o);const{defaultSize:a}=o;if(a!=null)continue;const l=t.length-i,c=r/l;i++,e[s]=c,r-=c}return e}function Gc(t,e,n){e.forEach((i,r)=>{const s=t[r];Xe(s);const{callbacks:o,constraints:a,id:l}=s,{collapsedSize:c=0,collapsible:u}=a,d=n[l];if(d==null||i!==d){n[l]=i;const{onCollapse:f,onExpand:p,onResize:m}=o;m&&m(i,d),u&&(f||p)&&(p&&(d==null||d===c)&&i!==c&&p(),f&&(d==null||d!==c)&&i===c&&f())}})}function Dm(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function DG({defaultSize:t,dragState:e,layout:n,panelData:i,panelIndex:r,precision:s=3}){const o=n[r];let a;return o==null?a=t??"1":i.length===1?a="1":a=o.toPrecision(s),{flexBasis:0,flexGrow:a,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}let yS=null,ic=null;function gD(t){switch(t){case"horizontal":return"ew-resize";case"horizontal-max":return"w-resize";case"horizontal-min":return"e-resize";case"vertical":return"ns-resize";case"vertical-max":return"n-resize";case"vertical-min":return"s-resize"}}function LG(){ic!==null&&(document.head.removeChild(ic),yS=null,ic=null)}function Aw(t){if(yS===t)return;yS=t;const e=gD(t);ic===null&&(ic=document.createElement("style"),document.head.appendChild(ic)),ic.innerHTML=`*{cursor: ${e}!important;}`}function jG(t,e=10){let n=null;return(...r)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...r)},e)}}function wP(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,n)=>{localStorage.setItem(e,n)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}function vD(t){return`react-resizable-panels:${t}`}function yD(t){return t.map(e=>{const{constraints:n,id:i,idIsFromProps:r,order:s}=e;return r?i:s?`${s}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((e,n)=>e.localeCompare(n)).join(",")}function bD(t,e){try{const n=vD(t),i=e.getItem(n);if(i){const r=JSON.parse(i);if(typeof r=="object"&&r!=null)return r}}catch{}return null}function $G(t,e,n){var i,r;const s=(i=bD(t,n))!==null&&i!==void 0?i:{},o=yD(e);return(r=s[o])!==null&&r!==void 0?r:null}function FG(t,e,n,i,r){var s;const o=vD(t),a=yD(e),l=(s=bD(t,r))!==null&&s!==void 0?s:{};l[a]={expandToSizes:Object.fromEntries(n.entries()),layout:i};try{r.setItem(o,JSON.stringify(l))}catch(c){console.error(c)}}function xP({layout:t,panelConstraints:e}){const n=[...t],i=n.reduce((s,o)=>s+o,0);if(n.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${n.map(s=>`${s}%`).join(", ")}`);if(!Xi(i,100))for(let s=0;s<e.length;s++){const o=n[s];Xe(o!=null);const a=100/i*o;n[s]=a}let r=0;for(let s=0;s<e.length;s++){const o=n[s];Xe(o!=null);const a=Cu({panelConstraints:e,panelIndex:s,size:o});o!=a&&(r+=o-a,n[s]=a)}if(!Xi(r,0))for(let s=0;s<e.length;s++){const o=n[s];Xe(o!=null);const a=o+r,l=Cu({panelConstraints:e,panelIndex:s,size:a});if(o!==l&&(r-=l-o,n[s]=l,Xi(r,0)))break}return n}const BG=100,$f={getItem:t=>(wP($f),$f.getItem(t)),setItem:(t,e)=>{wP($f),$f.setItem(t,e)}},SP={};function wD({autoSaveId:t=null,children:e,className:n="",direction:i,forwardedRef:r,id:s=null,onLayout:o=null,keyboardResizeBy:a=null,storage:l=$f,style:c,tagName:u="div",...d}){const f=O_(s),p=Qi(null),[m,g]=rv(null),[y,v]=rv([]),b=Qi({}),w=Qi(new Map),k=Qi(0),_=Qi({autoSaveId:t,direction:i,dragState:m,id:f,keyboardResizeBy:a,onLayout:o,storage:l}),E=Qi({layout:y,panelDataArray:[],panelDataArrayChanged:!1});Qi({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),oD(r,()=>({getId:()=>_.current.id,getLayout:()=>{const{layout:Z}=E.current;return Z},setLayout:Z=>{const{onLayout:le}=_.current,{layout:j,panelDataArray:L}=E.current,U=xP({layout:Z,panelConstraints:L.map(S=>S.constraints)});bP(j,U)||(v(U),E.current.layout=U,le&&le(U),Gc(L,U,b.current))}}),[]),Vh(()=>{_.current.autoSaveId=t,_.current.direction=i,_.current.dragState=m,_.current.id=f,_.current.onLayout=o,_.current.storage=l}),TG({committedValuesRef:_,eagerValuesRef:E,groupId:f,layout:y,panelDataArray:E.current.panelDataArray,setLayout:v,panelGroupElement:p.current}),uc(()=>{const{panelDataArray:Z}=E.current;if(t){if(y.length===0||y.length!==Z.length)return;let le=SP[t];le==null&&(le=jG(FG,BG),SP[t]=le);const j=[...Z],L=new Map(w.current);le(t,j,L,y,l)}},[t,y,l]),uc(()=>{});const C=ki(Z=>{const{onLayout:le}=_.current,{layout:j,panelDataArray:L}=E.current;if(Z.constraints.collapsible){const U=L.map(T=>T.constraints),{collapsedSize:S=0,panelSize:P,pivotIndices:O}=Dl(L,Z,j);if(Xe(P!=null),P!==S){w.current.set(Z.id,P);const q=iu(L,Z)===L.length-1?P-S:S-P,H=jf({delta:q,layout:j,panelConstraints:U,pivotIndices:O,trigger:"imperative-api"});Dm(j,H)||(v(H),E.current.layout=H,le&&le(H),Gc(L,H,b.current))}}},[]),N=ki(Z=>{const{onLayout:le}=_.current,{layout:j,panelDataArray:L}=E.current;if(Z.constraints.collapsible){const U=L.map(q=>q.constraints),{collapsedSize:S=0,panelSize:P,minSize:O=0,pivotIndices:T}=Dl(L,Z,j);if(P===S){const q=w.current.get(Z.id),H=q!=null&&q>=O?q:O,J=iu(L,Z)===L.length-1?P-H:H-P,Pe=jf({delta:J,layout:j,panelConstraints:U,pivotIndices:T,trigger:"imperative-api"});Dm(j,Pe)||(v(Pe),E.current.layout=Pe,le&&le(Pe),Gc(L,Pe,b.current))}}},[]),M=ki(Z=>{const{layout:le,panelDataArray:j}=E.current,{panelSize:L}=Dl(j,Z,le);return Xe(L!=null),L},[]),R=ki((Z,le)=>{const{panelDataArray:j}=E.current,L=iu(j,Z);return DG({defaultSize:le,dragState:m,layout:y,panelData:j,panelIndex:L})},[m,y]),I=ki(Z=>{const{layout:le,panelDataArray:j}=E.current,{collapsedSize:L=0,collapsible:U,panelSize:S}=Dl(j,Z,le);return U===!0&&S===L},[]),D=ki(Z=>{const{layout:le,panelDataArray:j}=E.current,{collapsedSize:L=0,collapsible:U,panelSize:S}=Dl(j,Z,le);return Xe(S!=null),!U||S>L},[]),K=ki(Z=>{const{panelDataArray:le}=E.current;le.push(Z),le.sort((j,L)=>{const U=j.order,S=L.order;return U==null&&S==null?0:U==null?-1:S==null?1:U-S}),E.current.panelDataArrayChanged=!0},[]);Vh(()=>{if(E.current.panelDataArrayChanged){E.current.panelDataArrayChanged=!1;const{autoSaveId:Z,onLayout:le,storage:j}=_.current,{layout:L,panelDataArray:U}=E.current;let S=null;if(Z){const O=$G(Z,U,j);O&&(w.current=new Map(Object.entries(O.expandToSizes)),S=O.layout)}S==null&&(S=IG({panelDataArray:U}));const P=xP({layout:S,panelConstraints:U.map(O=>O.constraints)});bP(L,P)||(v(P),E.current.layout=P,le&&le(P),Gc(U,P,b.current))}});const B=ki(Z=>function(j){j.preventDefault();const L=p.current;if(!L)return()=>null;const{direction:U,dragState:S,id:P,keyboardResizeBy:O,onLayout:T}=_.current,{layout:q,panelDataArray:H}=E.current,{initialLayout:ne}=S??{},J=uD(P,Z,L);let Pe=OG(j,Z,U,S,O,L);if(Pe===0)return;const je=U==="horizontal";document.dir==="rtl"&&je&&(Pe=-Pe);const Be=H.map(pe=>pe.constraints),De=jf({delta:Pe,layout:ne??q,panelConstraints:Be,pivotIndices:J,trigger:fD(j)?"keyboard":"mouse-or-touch"}),Ge=!Dm(q,De);(hD(j)||pD(j))&&k.current!=Pe&&(k.current=Pe,Aw(Ge?je?"horizontal":"vertical":je?Pe<0?"horizontal-min":"horizontal-max":Pe<0?"vertical-min":"vertical-max")),Ge&&(v(De),E.current.layout=De,T&&T(De),Gc(H,De,b.current))},[]),W=ki((Z,le)=>{const{onLayout:j}=_.current,{layout:L,panelDataArray:U}=E.current,S=U.map(ne=>ne.constraints),{panelSize:P,pivotIndices:O}=Dl(U,Z,L);Xe(P!=null);const q=iu(U,Z)===U.length-1?P-le:le-P,H=jf({delta:q,layout:L,panelConstraints:S,pivotIndices:O,trigger:"imperative-api"});Dm(L,H)||(v(H),E.current.layout=H,j&&j(H),Gc(U,H,b.current))},[]),Y=ki((Z,le)=>{const{layout:j,panelDataArray:L}=E.current,{collapsedSize:U=0,collapsible:S}=le,{collapsedSize:P=0,collapsible:O,maxSize:T=100,minSize:q=0}=Z.constraints,{panelSize:H}=Dl(L,Z,j);Xe(H!=null),S&&O&&H===U?U!==P&&W(Z,P):H<q?W(Z,q):H>T&&W(Z,T)},[W]),te=ki((Z,le)=>{const{direction:j}=_.current,{layout:L}=E.current;if(!p.current)return;const U=Ty(Z,p.current);Xe(U);const S=mD(j,le);g({dragHandleId:Z,dragHandleRect:U.getBoundingClientRect(),initialCursorPosition:S,initialLayout:L})},[]),V=ki(()=>{LG(),g(null)},[]),$=ki(Z=>{const{panelDataArray:le}=E.current,j=iu(le,Z);j>=0&&(le.splice(j,1),delete b.current[Z.id],E.current.panelDataArrayChanged=!0)},[]),ie=EG(()=>({collapsePanel:C,direction:i,dragState:m,expandPanel:N,getPanelSize:M,getPanelStyle:R,groupId:f,isPanelCollapsed:I,isPanelExpanded:D,reevaluatePanelConstraints:Y,registerPanel:K,registerResizeHandle:B,resizePanel:W,startDragging:te,stopDragging:V,unregisterPanel:$,panelGroupElement:p.current}),[C,m,i,N,M,R,f,I,D,Y,K,B,W,te,V,$]),ke={display:"flex",flexDirection:i==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return md(My.Provider,{value:ie},md(u,{...d,children:e,className:n,style:{...ke,...c},ref:p,"data-panel-group":"","data-panel-group-direction":i,"data-panel-group-id":f}))}const xD=rD((t,e)=>md(wD,{...t,forwardedRef:e}));wD.displayName="PanelGroup";xD.displayName="forwardRef(PanelGroup)";function iu(t,e){return t.findIndex(n=>n===e||n.id===e.id)}function Dl(t,e,n){const i=iu(t,e),s=i===t.length-1?[i-1,i]:[i,i+1],o=n[i];return{...e.constraints,panelSize:o,pivotIndices:s}}function zG({disabled:t,handleId:e,resizeHandler:n,panelGroupElement:i}){uc(()=>{if(t||n==null||i==null)return;const r=Ty(e,i);if(r==null)return;const s=o=>{if(!o.defaultPrevented)switch(o.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{o.preventDefault(),n(o);break}case"F6":{o.preventDefault();const a=r.getAttribute("data-panel-group-id");Xe(a);const l=Wh(a,i),c=cD(a,e,i);Xe(c!==null);const u=o.shiftKey?c>0?c-1:l.length-1:c+1<l.length?c+1:0;l[u].focus();break}}};return r.addEventListener("keydown",s),()=>{r.removeEventListener("keydown",s)}},[i,t,e,n])}function bS({children:t=null,className:e="",disabled:n=!1,id:i,onDragging:r,style:s={},tabIndex:o=0,tagName:a="div",...l}){const c=Qi(null),u=Qi({onDragging:r});uc(()=>{u.current.onDragging=r});const d=sD(My);if(d===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:f,dragState:p,groupId:m,registerResizeHandle:g,startDragging:y,stopDragging:v,panelGroupElement:b}=d,w=O_(i),k=(p==null?void 0:p.dragHandleId)===w,[_,E]=rv(!1),[C,N]=rv(null),M=ki(()=>{const I=c.current;Xe(I),I.blur(),v();const{onDragging:D}=u.current;D&&D(!1)},[v]);uc(()=>{if(n)N(null);else{const I=g(w);N(()=>I)}},[n,w,g]),uc(()=>{if(n||C==null||!k)return;const I=W=>{C(W)},D=W=>{C(W)},K=c.current;Xe(K);const B=K.ownerDocument;return B.body.addEventListener("contextmenu",M),B.body.addEventListener("mousemove",I),B.body.addEventListener("touchmove",I),B.body.addEventListener("mouseleave",D),window.addEventListener("mouseup",M),window.addEventListener("touchend",M),()=>{B.body.removeEventListener("contextmenu",M),B.body.removeEventListener("mousemove",I),B.body.removeEventListener("touchmove",I),B.body.removeEventListener("mouseleave",D),window.removeEventListener("mouseup",M),window.removeEventListener("touchend",M)}},[f,n,k,C,M]),zG({disabled:n,handleId:w,resizeHandler:C,panelGroupElement:b});const R={cursor:gD(f),touchAction:"none",userSelect:"none"};return md(a,{...l,children:t,className:e,onBlur:()=>E(!1),onFocus:()=>E(!0),onMouseDown:I=>{y(w,I.nativeEvent);const D=u.current;Xe(D);const{onDragging:K}=D;K&&K(!0)},onMouseUp:M,onTouchCancel:M,onTouchEnd:M,onTouchStart:I=>{y(w,I.nativeEvent);const D=u.current;Xe(D);const{onDragging:K}=D;K&&K(!0)},ref:c,role:"separator",style:{...R,...s},tabIndex:o,"data-panel-group-direction":f,"data-panel-group-id":m,"data-resize-handle":"","data-resize-handle-active":k?"pointer":_?"keyboard":void 0,"data-panel-resize-handle-enabled":!n,"data-panel-resize-handle-id":w})}bS.displayName="PanelResizeHandle";var Ls=function(){return Ls=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ls.apply(this,arguments)};function SD(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function UG(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))}var VG=function(){};function HG(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.addEventListener&&t.addEventListener.apply(t,e)}function WG(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.removeEventListener&&t.removeEventListener.apply(t,e)}var kD=typeof window<"u",GG=kD?window:null,kP=function(t){return!!t.addEventListener},_P=function(t){return!!t.on},KG=function(t,e,n,i){n===void 0&&(n=GG),x.useEffect(function(){if(e&&n)return kP(n)?HG(n,t,e,i):_P(n)&&n.on(t,e,i),function(){kP(n)?WG(n,t,e,i):_P(n)&&n.off(t,e,i)}},[t,e,n,JSON.stringify(i)])},qG=function(t){return typeof t=="function"?t:typeof t=="string"?function(e){return e.key===t}:t?function(){return!0}:function(){return!1}},ru=function(t,e,n,i){e===void 0&&(e=VG),n===void 0&&(n={}),i===void 0&&(i=[t]);var r=n.event,s=r===void 0?"keydown":r,o=n.target,a=n.options,l=x.useMemo(function(){var c=qG(t),u=function(d){if(c(d))return e(d)};return u},i);KG(s,l,o,a)},YG=function(t,e){return kD?window.matchMedia(t).matches:!1},XG=function(t,e){var n=x.useState(YG(t)),i=n[0],r=n[1];return x.useEffect(function(){var s=!0,o=window.matchMedia(t),a=function(){s&&r(!!o.matches)};return o.addEventListener("change",a),r(o.matches),function(){s=!1,o.removeEventListener("change",a)}},[t]),i};/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const JG={prefix:"fab",iconName:"github",icon:[496,512,[],"f09b","M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"]};/*!
 * Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */function ZG(t,e,n){return(e=eK(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function CP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function oe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?CP(Object(n),!0).forEach(function(i){ZG(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):CP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function QG(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function eK(t){var e=QG(t,"string");return typeof e=="symbol"?e:e+""}const EP=()=>{};let I_={},_D={},CD=null,ED={mark:EP,measure:EP};try{typeof window<"u"&&(I_=window),typeof document<"u"&&(_D=document),typeof MutationObserver<"u"&&(CD=MutationObserver),typeof performance<"u"&&(ED=performance)}catch{}const{userAgent:AP=""}=I_.navigator||{},tl=I_,$t=_D,NP=CD,Lm=ED;tl.document;const Ko=!!$t.documentElement&&!!$t.head&&typeof $t.addEventListener=="function"&&typeof $t.createElement=="function",AD=~AP.indexOf("MSIE")||~AP.indexOf("Trident/");var tK=/fa(s|r|l|t|d|dr|dl|dt|b|k|kd|ss|sr|sl|st|sds|sdr|sdl|sdt)?[\-\ ]/,nK=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit)?.*/i,ND={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fab:"brands","fa-brands":"brands"},duotone:{fa:"solid",fad:"solid","fa-solid":"solid","fa-duotone":"solid",fadr:"regular","fa-regular":"regular",fadl:"light","fa-light":"light",fadt:"thin","fa-thin":"thin"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid",fasdr:"regular","fa-regular":"regular",fasdl:"light","fa-light":"light",fasdt:"thin","fa-thin":"thin"}},iK={GROUP:"duotone-group",PRIMARY:"primary",SECONDARY:"secondary"},PD=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],oi="classic",Ry="duotone",rK="sharp",sK="sharp-duotone",MD=[oi,Ry,rK,sK],oK={classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},duotone:{900:"fad",400:"fadr",300:"fadl",100:"fadt"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds",400:"fasdr",300:"fasdl",100:"fasdt"}},aK={"Font Awesome 6 Free":{900:"fas",400:"far"},"Font Awesome 6 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 6 Brands":{400:"fab",normal:"fab"},"Font Awesome 6 Duotone":{900:"fad",400:"fadr",normal:"fadr",300:"fadl",100:"fadt"},"Font Awesome 6 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 6 Sharp Duotone":{900:"fasds",400:"fasdr",normal:"fasdr",300:"fasdl",100:"fasdt"}},lK=new Map([["classic",{defaultShortPrefixId:"fas",defaultStyleId:"solid",styleIds:["solid","regular","light","thin","brands"],futureStyleIds:[],defaultFontWeight:900}],["sharp",{defaultShortPrefixId:"fass",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["duotone",{defaultShortPrefixId:"fad",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp-duotone",{defaultShortPrefixId:"fasds",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}]]),cK={classic:{solid:"fas",regular:"far",light:"fal",thin:"fat",brands:"fab"},duotone:{solid:"fad",regular:"fadr",light:"fadl",thin:"fadt"},sharp:{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"},"sharp-duotone":{solid:"fasds",regular:"fasdr",light:"fasdl",thin:"fasdt"}},uK=["fak","fa-kit","fakd","fa-kit-duotone"],PP={kit:{fak:"kit","fa-kit":"kit"},"kit-duotone":{fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"}},dK=["kit"],fK={kit:{"fa-kit":"fak"}},hK=["fak","fakd"],pK={kit:{fak:"fa-kit"}},MP={kit:{kit:"fak"},"kit-duotone":{"kit-duotone":"fakd"}},jm={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},mK=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],gK=["fak","fa-kit","fakd","fa-kit-duotone"],vK={"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}},yK={classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},duotone:{"fa-regular":"fadr","fa-light":"fadl","fa-thin":"fadt"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds","fa-regular":"fasdr","fa-light":"fasdl","fa-thin":"fasdt"}},bK={classic:["fas","far","fal","fat","fad"],duotone:["fadr","fadl","fadt"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds","fasdr","fasdl","fasdt"]},wS={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},duotone:{fadr:"fa-regular",fadl:"fa-light",fadt:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid",fasdr:"fa-regular",fasdl:"fa-light",fasdt:"fa-thin"}},wK=["fa-solid","fa-regular","fa-light","fa-thin","fa-duotone","fa-brands"],xS=["fa","fas","far","fal","fat","fad","fadr","fadl","fadt","fab","fass","fasr","fasl","fast","fasds","fasdr","fasdl","fasdt",...mK,...wK],xK=["solid","regular","light","thin","duotone","brands"],TD=[1,2,3,4,5,6,7,8,9,10],SK=TD.concat([11,12,13,14,15,16,17,18,19,20]),kK=[...Object.keys(bK),...xK,"2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",jm.GROUP,jm.SWAP_OPACITY,jm.PRIMARY,jm.SECONDARY].concat(TD.map(t=>"".concat(t,"x"))).concat(SK.map(t=>"w-".concat(t))),_K={"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}};const Fo="___FONT_AWESOME___",SS=16,RD="fa",OD="svg-inline--fa",kc="data-fa-i2svg",kS="data-fa-pseudo-element",CK="data-fa-pseudo-element-pending",D_="data-prefix",L_="data-icon",TP="fontawesome-i2svg",EK="async",AK=["HTML","HEAD","STYLE","SCRIPT"],ID=(()=>{try{return!0}catch{return!1}})();function Dp(t){return new Proxy(t,{get(e,n){return n in e?e[n]:e[oi]}})}const DD=oe({},ND);DD[oi]=oe(oe(oe(oe({},{"fa-duotone":"duotone"}),ND[oi]),PP.kit),PP["kit-duotone"]);const NK=Dp(DD),_S=oe({},cK);_S[oi]=oe(oe(oe(oe({},{duotone:"fad"}),_S[oi]),MP.kit),MP["kit-duotone"]);const RP=Dp(_S),CS=oe({},wS);CS[oi]=oe(oe({},CS[oi]),pK.kit);const j_=Dp(CS),ES=oe({},yK);ES[oi]=oe(oe({},ES[oi]),fK.kit);Dp(ES);const PK=tK,LD="fa-layers-text",MK=nK,TK=oe({},oK);Dp(TK);const RK=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],Nw=iK,OK=[...dK,...kK],ah=tl.FontAwesomeConfig||{};function IK(t){var e=$t.querySelector("script["+t+"]");if(e)return e.getAttribute(t)}function DK(t){return t===""?!0:t==="false"?!1:t==="true"?!0:t}$t&&typeof $t.querySelector=="function"&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(e=>{let[n,i]=e;const r=DK(IK(n));r!=null&&(ah[i]=r)});const jD={styleDefault:"solid",familyDefault:oi,cssPrefix:RD,replacementClass:OD,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};ah.familyPrefix&&(ah.cssPrefix=ah.familyPrefix);const gd=oe(oe({},jD),ah);gd.autoReplaceSvg||(gd.observeMutations=!1);const Oe={};Object.keys(jD).forEach(t=>{Object.defineProperty(Oe,t,{enumerable:!0,set:function(e){gd[t]=e,lh.forEach(n=>n(Oe))},get:function(){return gd[t]}})});Object.defineProperty(Oe,"familyPrefix",{enumerable:!0,set:function(t){gd.cssPrefix=t,lh.forEach(e=>e(Oe))},get:function(){return gd.cssPrefix}});tl.FontAwesomeConfig=Oe;const lh=[];function LK(t){return lh.push(t),()=>{lh.splice(lh.indexOf(t),1)}}const na=SS,Us={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function jK(t){if(!t||!Ko)return;const e=$t.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t;const n=$t.head.childNodes;let i=null;for(let r=n.length-1;r>-1;r--){const s=n[r],o=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(i=s)}return $t.head.insertBefore(e,i),t}const $K="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function Gh(){let t=12,e="";for(;t-- >0;)e+=$K[Math.random()*62|0];return e}function Fd(t){const e=[];for(let n=(t||[]).length>>>0;n--;)e[n]=t[n];return e}function $_(t){return t.classList?Fd(t.classList):(t.getAttribute("class")||"").split(" ").filter(e=>e)}function $D(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function FK(t){return Object.keys(t||{}).reduce((e,n)=>e+"".concat(n,'="').concat($D(t[n]),'" '),"").trim()}function Oy(t){return Object.keys(t||{}).reduce((e,n)=>e+"".concat(n,": ").concat(t[n].trim(),";"),"")}function F_(t){return t.size!==Us.size||t.x!==Us.x||t.y!==Us.y||t.rotate!==Us.rotate||t.flipX||t.flipY}function BK(t){let{transform:e,containerWidth:n,iconWidth:i}=t;const r={transform:"translate(".concat(n/2," 256)")},s="translate(".concat(e.x*32,", ").concat(e.y*32,") "),o="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),a="rotate(".concat(e.rotate," 0 0)"),l={transform:"".concat(s," ").concat(o," ").concat(a)},c={transform:"translate(".concat(i/2*-1," -256)")};return{outer:r,inner:l,path:c}}function zK(t){let{transform:e,width:n=SS,height:i=SS,startCentered:r=!1}=t,s="";return r&&AD?s+="translate(".concat(e.x/na-n/2,"em, ").concat(e.y/na-i/2,"em) "):r?s+="translate(calc(-50% + ".concat(e.x/na,"em), calc(-50% + ").concat(e.y/na,"em)) "):s+="translate(".concat(e.x/na,"em, ").concat(e.y/na,"em) "),s+="scale(".concat(e.size/na*(e.flipX?-1:1),", ").concat(e.size/na*(e.flipY?-1:1),") "),s+="rotate(".concat(e.rotate,"deg) "),s}var UK=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Free";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Pro";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Pro";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-regular: normal 400 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-light: normal 300 1em/1 "Font Awesome 6 Duotone";
  --fa-font-duotone-thin: normal 100 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-regular: normal 400 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-light: normal 300 1em/1 "Font Awesome 6 Sharp Duotone";
  --fa-font-sharp-duotone-thin: normal 100 1em/1 "Font Awesome 6 Sharp Duotone";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-counter-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(-1 * var(--fa-li-width, 2em));
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  animation-name: fa-beat;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  animation-name: fa-bounce;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  animation-name: fa-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  animation-name: fa-beat-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  animation-name: fa-flip;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  animation-name: fa-shake;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  animation-name: fa-spin;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 2s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  animation-name: fa-spin;
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    animation-delay: -1ms;
    animation-duration: 1ms;
    animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@keyframes fa-beat {
  0%, 90% {
    transform: scale(1);
  }
  45% {
    transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-bounce {
  0% {
    transform: scale(1, 1) translateY(0);
  }
  10% {
    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    transform: scale(1, 1) translateY(0);
  }
  100% {
    transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-flip {
  50% {
    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-shake {
  0% {
    transform: rotate(-15deg);
  }
  4% {
    transform: rotate(15deg);
  }
  8%, 24% {
    transform: rotate(-18deg);
  }
  12%, 28% {
    transform: rotate(18deg);
  }
  16% {
    transform: rotate(-22deg);
  }
  20% {
    transform: rotate(22deg);
  }
  32% {
    transform: rotate(-12deg);
  }
  36% {
    transform: rotate(12deg);
  }
  40%, 100% {
    transform: rotate(0deg);
  }
}
@keyframes fa-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  transform: rotate(90deg);
}

.fa-rotate-180 {
  transform: rotate(180deg);
}

.fa-rotate-270 {
  transform: rotate(270deg);
}

.fa-flip-horizontal {
  transform: scale(-1, 1);
}

.fa-flip-vertical {
  transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  transform: scale(-1, -1);
}

.fa-rotate-by {
  transform: rotate(var(--fa-rotate-angle, 0));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}`;function FD(){const t=RD,e=OD,n=Oe.cssPrefix,i=Oe.replacementClass;let r=UK;if(n!==t||i!==e){const s=new RegExp("\\.".concat(t,"\\-"),"g"),o=new RegExp("\\--".concat(t,"\\-"),"g"),a=new RegExp("\\.".concat(e),"g");r=r.replace(s,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(a,".".concat(i))}return r}let OP=!1;function Pw(){Oe.autoAddCss&&!OP&&(jK(FD()),OP=!0)}var VK={mixout(){return{dom:{css:FD,insertCss:Pw}}},hooks(){return{beforeDOMElementCreation(){Pw()},beforeI2svg(){Pw()}}}};const Bo=tl||{};Bo[Fo]||(Bo[Fo]={});Bo[Fo].styles||(Bo[Fo].styles={});Bo[Fo].hooks||(Bo[Fo].hooks={});Bo[Fo].shims||(Bo[Fo].shims=[]);var Vs=Bo[Fo];const BD=[],zD=function(){$t.removeEventListener("DOMContentLoaded",zD),sv=1,BD.map(t=>t())};let sv=!1;Ko&&(sv=($t.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test($t.readyState),sv||$t.addEventListener("DOMContentLoaded",zD));function HK(t){Ko&&(sv?setTimeout(t,0):BD.push(t))}function Lp(t){const{tag:e,attributes:n={},children:i=[]}=t;return typeof t=="string"?$D(t):"<".concat(e," ").concat(FK(n),">").concat(i.map(Lp).join(""),"</").concat(e,">")}function IP(t,e,n){if(t&&t[e]&&t[e][n])return{prefix:e,iconName:n,icon:t[e][n]}}var Mw=function(e,n,i,r){var s=Object.keys(e),o=s.length,a=n,l,c,u;for(i===void 0?(l=1,u=e[s[0]]):(l=0,u=i);l<o;l++)c=s[l],u=a(u,e[c],c,e);return u};function WK(t){const e=[];let n=0;const i=t.length;for(;n<i;){const r=t.charCodeAt(n++);if(r>=55296&&r<=56319&&n<i){const s=t.charCodeAt(n++);(s&64512)==56320?e.push(((r&1023)<<10)+(s&1023)+65536):(e.push(r),n--)}else e.push(r)}return e}function AS(t){const e=WK(t);return e.length===1?e[0].toString(16):null}function GK(t,e){const n=t.length;let i=t.charCodeAt(e),r;return i>=55296&&i<=56319&&n>e+1&&(r=t.charCodeAt(e+1),r>=56320&&r<=57343)?(i-55296)*1024+r-56320+65536:i}function DP(t){return Object.keys(t).reduce((e,n)=>{const i=t[n];return!!i.icon?e[i.iconName]=i.icon:e[n]=i,e},{})}function NS(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{skipHooks:i=!1}=n,r=DP(e);typeof Vs.hooks.addPack=="function"&&!i?Vs.hooks.addPack(t,DP(e)):Vs.styles[t]=oe(oe({},Vs.styles[t]||{}),r),t==="fas"&&NS("fa",e)}const{styles:Kh,shims:KK}=Vs,UD=Object.keys(j_),qK=UD.reduce((t,e)=>(t[e]=Object.keys(j_[e]),t),{});let B_=null,VD={},HD={},WD={},GD={},KD={};function YK(t){return~OK.indexOf(t)}function XK(t,e){const n=e.split("-"),i=n[0],r=n.slice(1).join("-");return i===t&&r!==""&&!YK(r)?r:null}const qD=()=>{const t=i=>Mw(Kh,(r,s,o)=>(r[o]=Mw(s,i,{}),r),{});VD=t((i,r,s)=>(r[3]&&(i[r[3]]=s),r[2]&&r[2].filter(a=>typeof a=="number").forEach(a=>{i[a.toString(16)]=s}),i)),HD=t((i,r,s)=>(i[s]=s,r[2]&&r[2].filter(a=>typeof a=="string").forEach(a=>{i[a]=s}),i)),KD=t((i,r,s)=>{const o=r[2];return i[s]=s,o.forEach(a=>{i[a]=s}),i});const e="far"in Kh||Oe.autoFetchSvg,n=Mw(KK,(i,r)=>{const s=r[0];let o=r[1];const a=r[2];return o==="far"&&!e&&(o="fas"),typeof s=="string"&&(i.names[s]={prefix:o,iconName:a}),typeof s=="number"&&(i.unicodes[s.toString(16)]={prefix:o,iconName:a}),i},{names:{},unicodes:{}});WD=n.names,GD=n.unicodes,B_=Iy(Oe.styleDefault,{family:Oe.familyDefault})};LK(t=>{B_=Iy(t.styleDefault,{family:Oe.familyDefault})});qD();function z_(t,e){return(VD[t]||{})[e]}function JK(t,e){return(HD[t]||{})[e]}function rc(t,e){return(KD[t]||{})[e]}function YD(t){return WD[t]||{prefix:null,iconName:null}}function ZK(t){const e=GD[t],n=z_("fas",t);return e||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}function nl(){return B_}const XD=()=>({prefix:null,iconName:null,rest:[]});function QK(t){let e=oi;const n=UD.reduce((i,r)=>(i[r]="".concat(Oe.cssPrefix,"-").concat(r),i),{});return MD.forEach(i=>{(t.includes(n[i])||t.some(r=>qK[i].includes(r)))&&(e=i)}),e}function Iy(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{family:n=oi}=e,i=NK[n][t];if(n===Ry&&!t)return"fad";const r=RP[n][t]||RP[n][i],s=t in Vs.styles?t:null;return r||s||null}function eq(t){let e=[],n=null;return t.forEach(i=>{const r=XK(Oe.cssPrefix,i);r?n=r:i&&e.push(i)}),{iconName:n,rest:e}}function LP(t){return t.sort().filter((e,n,i)=>i.indexOf(e)===n)}function Dy(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{skipLookups:n=!1}=e;let i=null;const r=xS.concat(gK),s=LP(t.filter(d=>r.includes(d))),o=LP(t.filter(d=>!xS.includes(d))),a=s.filter(d=>(i=d,!PD.includes(d))),[l=null]=a,c=QK(s),u=oe(oe({},eq(o)),{},{prefix:Iy(l,{family:c})});return oe(oe(oe({},u),rq({values:t,family:c,styles:Kh,config:Oe,canonical:u,givenPrefix:i})),tq(n,i,u))}function tq(t,e,n){let{prefix:i,iconName:r}=n;if(t||!i||!r)return{prefix:i,iconName:r};const s=e==="fa"?YD(r):{},o=rc(i,r);return r=s.iconName||o||r,i=s.prefix||i,i==="far"&&!Kh.far&&Kh.fas&&!Oe.autoFetchSvg&&(i="fas"),{prefix:i,iconName:r}}const nq=MD.filter(t=>t!==oi||t!==Ry),iq=Object.keys(wS).filter(t=>t!==oi).map(t=>Object.keys(wS[t])).flat();function rq(t){const{values:e,family:n,canonical:i,givenPrefix:r="",styles:s={},config:o={}}=t,a=n===Ry,l=e.includes("fa-duotone")||e.includes("fad"),c=o.familyDefault==="duotone",u=i.prefix==="fad"||i.prefix==="fa-duotone";if(!a&&(l||c||u)&&(i.prefix="fad"),(e.includes("fa-brands")||e.includes("fab"))&&(i.prefix="fab"),!i.prefix&&nq.includes(n)&&(Object.keys(s).find(f=>iq.includes(f))||o.autoFetchSvg)){const f=lK.get(n).defaultShortPrefixId;i.prefix=f,i.iconName=rc(i.prefix,i.iconName)||i.iconName}return(i.prefix==="fa"||r==="fa")&&(i.prefix=nl()||"fas"),i}class sq{constructor(){this.definitions={}}add(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];const r=n.reduce(this._pullDefinitions,{});Object.keys(r).forEach(s=>{this.definitions[s]=oe(oe({},this.definitions[s]||{}),r[s]),NS(s,r[s]);const o=j_[oi][s];o&&NS(o,r[s]),qD()})}reset(){this.definitions={}}_pullDefinitions(e,n){const i=n.prefix&&n.iconName&&n.icon?{0:n}:n;return Object.keys(i).map(r=>{const{prefix:s,iconName:o,icon:a}=i[r],l=a[2];e[s]||(e[s]={}),l.length>0&&l.forEach(c=>{typeof c=="string"&&(e[s][c]=a)}),e[s][o]=a}),e}}let jP=[],Eu={};const Bu={},oq=Object.keys(Bu);function aq(t,e){let{mixoutsTo:n}=e;return jP=t,Eu={},Object.keys(Bu).forEach(i=>{oq.indexOf(i)===-1&&delete Bu[i]}),jP.forEach(i=>{const r=i.mixout?i.mixout():{};if(Object.keys(r).forEach(s=>{typeof r[s]=="function"&&(n[s]=r[s]),typeof r[s]=="object"&&Object.keys(r[s]).forEach(o=>{n[s]||(n[s]={}),n[s][o]=r[s][o]})}),i.hooks){const s=i.hooks();Object.keys(s).forEach(o=>{Eu[o]||(Eu[o]=[]),Eu[o].push(s[o])})}i.provides&&i.provides(Bu)}),n}function PS(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return(Eu[t]||[]).forEach(o=>{e=o.apply(null,[e,...i])}),e}function _c(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];(Eu[t]||[]).forEach(s=>{s.apply(null,n)})}function il(){const t=arguments[0],e=Array.prototype.slice.call(arguments,1);return Bu[t]?Bu[t].apply(null,e):void 0}function MS(t){t.prefix==="fa"&&(t.prefix="fas");let{iconName:e}=t;const n=t.prefix||nl();if(e)return e=rc(n,e)||e,IP(JD.definitions,n,e)||IP(Vs.styles,n,e)}const JD=new sq,lq=()=>{Oe.autoReplaceSvg=!1,Oe.observeMutations=!1,_c("noAuto")},cq={i2svg:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Ko?(_c("beforeI2svg",t),il("pseudoElements2svg",t),il("i2svg",t)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e}=t;Oe.autoReplaceSvg===!1&&(Oe.autoReplaceSvg=!0),Oe.observeMutations=!0,HK(()=>{dq({autoReplaceSvgRoot:e}),_c("watch",t)})}},uq={icon:t=>{if(t===null)return null;if(typeof t=="object"&&t.prefix&&t.iconName)return{prefix:t.prefix,iconName:rc(t.prefix,t.iconName)||t.iconName};if(Array.isArray(t)&&t.length===2){const e=t[1].indexOf("fa-")===0?t[1].slice(3):t[1],n=Iy(t[0]);return{prefix:n,iconName:rc(n,e)||e}}if(typeof t=="string"&&(t.indexOf("".concat(Oe.cssPrefix,"-"))>-1||t.match(PK))){const e=Dy(t.split(" "),{skipLookups:!0});return{prefix:e.prefix||nl(),iconName:rc(e.prefix,e.iconName)||e.iconName}}if(typeof t=="string"){const e=nl();return{prefix:e,iconName:rc(e,t)||t}}}},gr={noAuto:lq,config:Oe,dom:cq,parse:uq,library:JD,findIconDefinition:MS,toHtml:Lp},dq=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{autoReplaceSvgRoot:e=$t}=t;(Object.keys(Vs.styles).length>0||Oe.autoFetchSvg)&&Ko&&Oe.autoReplaceSvg&&gr.dom.i2svg({node:e})};function Ly(t,e){return Object.defineProperty(t,"abstract",{get:e}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map(n=>Lp(n))}}),Object.defineProperty(t,"node",{get:function(){if(!Ko)return;const n=$t.createElement("div");return n.innerHTML=t.html,n.children}}),t}function fq(t){let{children:e,main:n,mask:i,attributes:r,styles:s,transform:o}=t;if(F_(o)&&n.found&&!i.found){const{width:a,height:l}=n,c={x:a/l/2,y:.5};r.style=Oy(oe(oe({},s),{},{"transform-origin":"".concat(c.x+o.x/16,"em ").concat(c.y+o.y/16,"em")}))}return[{tag:"svg",attributes:r,children:e}]}function hq(t){let{prefix:e,iconName:n,children:i,attributes:r,symbol:s}=t;const o=s===!0?"".concat(e,"-").concat(Oe.cssPrefix,"-").concat(n):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:oe(oe({},r),{},{id:o}),children:i}]}]}function U_(t){const{icons:{main:e,mask:n},prefix:i,iconName:r,transform:s,symbol:o,title:a,maskId:l,titleId:c,extra:u,watchable:d=!1}=t,{width:f,height:p}=n.found?n:e,m=hK.includes(i),g=[Oe.replacementClass,r?"".concat(Oe.cssPrefix,"-").concat(r):""].filter(_=>u.classes.indexOf(_)===-1).filter(_=>_!==""||!!_).concat(u.classes).join(" ");let y={children:[],attributes:oe(oe({},u.attributes),{},{"data-prefix":i,"data-icon":r,class:g,role:u.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(f," ").concat(p)})};const v=m&&!~u.classes.indexOf("fa-fw")?{width:"".concat(f/p*16*.0625,"em")}:{};d&&(y.attributes[kc]=""),a&&(y.children.push({tag:"title",attributes:{id:y.attributes["aria-labelledby"]||"title-".concat(c||Gh())},children:[a]}),delete y.attributes.title);const b=oe(oe({},y),{},{prefix:i,iconName:r,main:e,mask:n,maskId:l,transform:s,symbol:o,styles:oe(oe({},v),u.styles)}),{children:w,attributes:k}=n.found&&e.found?il("generateAbstractMask",b)||{children:[],attributes:{}}:il("generateAbstractIcon",b)||{children:[],attributes:{}};return b.children=w,b.attributes=k,o?hq(b):fq(b)}function $P(t){const{content:e,width:n,height:i,transform:r,title:s,extra:o,watchable:a=!1}=t,l=oe(oe(oe({},o.attributes),s?{title:s}:{}),{},{class:o.classes.join(" ")});a&&(l[kc]="");const c=oe({},o.styles);F_(r)&&(c.transform=zK({transform:r,startCentered:!0,width:n,height:i}),c["-webkit-transform"]=c.transform);const u=Oy(c);u.length>0&&(l.style=u);const d=[];return d.push({tag:"span",attributes:l,children:[e]}),s&&d.push({tag:"span",attributes:{class:"sr-only"},children:[s]}),d}function pq(t){const{content:e,title:n,extra:i}=t,r=oe(oe(oe({},i.attributes),n?{title:n}:{}),{},{class:i.classes.join(" ")}),s=Oy(i.styles);s.length>0&&(r.style=s);const o=[];return o.push({tag:"span",attributes:r,children:[e]}),n&&o.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),o}const{styles:Tw}=Vs;function TS(t){const e=t[0],n=t[1],[i]=t.slice(4);let r=null;return Array.isArray(i)?r={tag:"g",attributes:{class:"".concat(Oe.cssPrefix,"-").concat(Nw.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Oe.cssPrefix,"-").concat(Nw.SECONDARY),fill:"currentColor",d:i[0]}},{tag:"path",attributes:{class:"".concat(Oe.cssPrefix,"-").concat(Nw.PRIMARY),fill:"currentColor",d:i[1]}}]}:r={tag:"path",attributes:{fill:"currentColor",d:i}},{found:!0,width:e,height:n,icon:r}}const mq={found:!1,width:512,height:512};function gq(t,e){!ID&&!Oe.showMissingIcons&&t&&console.error('Icon with name "'.concat(t,'" and prefix "').concat(e,'" is missing.'))}function RS(t,e){let n=e;return e==="fa"&&Oe.styleDefault!==null&&(e=nl()),new Promise((i,r)=>{if(n==="fa"){const s=YD(t)||{};t=s.iconName||t,e=s.prefix||e}if(t&&e&&Tw[e]&&Tw[e][t]){const s=Tw[e][t];return i(TS(s))}gq(t,e),i(oe(oe({},mq),{},{icon:Oe.showMissingIcons&&t?il("missingIconAbstract")||{}:{}}))})}const FP=()=>{},OS=Oe.measurePerformance&&Lm&&Lm.mark&&Lm.measure?Lm:{mark:FP,measure:FP},Ff='FA "6.7.1"',vq=t=>(OS.mark("".concat(Ff," ").concat(t," begins")),()=>ZD(t)),ZD=t=>{OS.mark("".concat(Ff," ").concat(t," ends")),OS.measure("".concat(Ff," ").concat(t),"".concat(Ff," ").concat(t," begins"),"".concat(Ff," ").concat(t," ends"))};var V_={begin:vq,end:ZD};const Xg=()=>{};function BP(t){return typeof(t.getAttribute?t.getAttribute(kc):null)=="string"}function yq(t){const e=t.getAttribute?t.getAttribute(D_):null,n=t.getAttribute?t.getAttribute(L_):null;return e&&n}function bq(t){return t&&t.classList&&t.classList.contains&&t.classList.contains(Oe.replacementClass)}function wq(){return Oe.autoReplaceSvg===!0?Jg.replace:Jg[Oe.autoReplaceSvg]||Jg.replace}function xq(t){return $t.createElementNS("http://www.w3.org/2000/svg",t)}function Sq(t){return $t.createElement(t)}function QD(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{ceFn:n=t.tag==="svg"?xq:Sq}=e;if(typeof t=="string")return $t.createTextNode(t);const i=n(t.tag);return Object.keys(t.attributes||[]).forEach(function(s){i.setAttribute(s,t.attributes[s])}),(t.children||[]).forEach(function(s){i.appendChild(QD(s,{ceFn:n}))}),i}function kq(t){let e=" ".concat(t.outerHTML," ");return e="".concat(e,"Font Awesome fontawesome.com "),e}const Jg={replace:function(t){const e=t[0];if(e.parentNode)if(t[1].forEach(n=>{e.parentNode.insertBefore(QD(n),e)}),e.getAttribute(kc)===null&&Oe.keepOriginalSource){let n=$t.createComment(kq(e));e.parentNode.replaceChild(n,e)}else e.remove()},nest:function(t){const e=t[0],n=t[1];if(~$_(e).indexOf(Oe.replacementClass))return Jg.replace(t);const i=new RegExp("".concat(Oe.cssPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){const s=n[0].attributes.class.split(" ").reduce((o,a)=>(a===Oe.replacementClass||a.match(i)?o.toSvg.push(a):o.toNode.push(a),o),{toNode:[],toSvg:[]});n[0].attributes.class=s.toSvg.join(" "),s.toNode.length===0?e.removeAttribute("class"):e.setAttribute("class",s.toNode.join(" "))}const r=n.map(s=>Lp(s)).join(`
`);e.setAttribute(kc,""),e.innerHTML=r}};function zP(t){t()}function eL(t,e){const n=typeof e=="function"?e:Xg;if(t.length===0)n();else{let i=zP;Oe.mutateApproach===EK&&(i=tl.requestAnimationFrame||zP),i(()=>{const r=wq(),s=V_.begin("mutate");t.map(r),s(),n()})}}let H_=!1;function tL(){H_=!0}function IS(){H_=!1}let ov=null;function UP(t){if(!NP||!Oe.observeMutations)return;const{treeCallback:e=Xg,nodeCallback:n=Xg,pseudoElementsCallback:i=Xg,observeMutationsRoot:r=$t}=t;ov=new NP(s=>{if(H_)return;const o=nl();Fd(s).forEach(a=>{if(a.type==="childList"&&a.addedNodes.length>0&&!BP(a.addedNodes[0])&&(Oe.searchPseudoElements&&i(a.target),e(a.target)),a.type==="attributes"&&a.target.parentNode&&Oe.searchPseudoElements&&i(a.target.parentNode),a.type==="attributes"&&BP(a.target)&&~RK.indexOf(a.attributeName))if(a.attributeName==="class"&&yq(a.target)){const{prefix:l,iconName:c}=Dy($_(a.target));a.target.setAttribute(D_,l||o),c&&a.target.setAttribute(L_,c)}else bq(a.target)&&n(a.target)})}),Ko&&ov.observe(r,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}function _q(){ov&&ov.disconnect()}function Cq(t){const e=t.getAttribute("style");let n=[];return e&&(n=e.split(";").reduce((i,r)=>{const s=r.split(":"),o=s[0],a=s.slice(1);return o&&a.length>0&&(i[o]=a.join(":").trim()),i},{})),n}function Eq(t){const e=t.getAttribute("data-prefix"),n=t.getAttribute("data-icon"),i=t.innerText!==void 0?t.innerText.trim():"";let r=Dy($_(t));return r.prefix||(r.prefix=nl()),e&&n&&(r.prefix=e,r.iconName=n),r.iconName&&r.prefix||(r.prefix&&i.length>0&&(r.iconName=JK(r.prefix,t.innerText)||z_(r.prefix,AS(t.innerText))),!r.iconName&&Oe.autoFetchSvg&&t.firstChild&&t.firstChild.nodeType===Node.TEXT_NODE&&(r.iconName=t.firstChild.data)),r}function Aq(t){const e=Fd(t.attributes).reduce((r,s)=>(r.name!=="class"&&r.name!=="style"&&(r[s.name]=s.value),r),{}),n=t.getAttribute("title"),i=t.getAttribute("data-fa-title-id");return Oe.autoA11y&&(n?e["aria-labelledby"]="".concat(Oe.replacementClass,"-title-").concat(i||Gh()):(e["aria-hidden"]="true",e.focusable="false")),e}function Nq(){return{iconName:null,title:null,titleId:null,prefix:null,transform:Us,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function VP(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0};const{iconName:n,prefix:i,rest:r}=Eq(t),s=Aq(t),o=PS("parseNodeAttributes",{},t);let a=e.styleParser?Cq(t):[];return oe({iconName:n,title:t.getAttribute("title"),titleId:t.getAttribute("data-fa-title-id"),prefix:i,transform:Us,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:r,styles:a,attributes:s}},o)}const{styles:Pq}=Vs;function nL(t){const e=Oe.autoReplaceSvg==="nest"?VP(t,{styleParser:!1}):VP(t);return~e.extra.classes.indexOf(LD)?il("generateLayersText",t,e):il("generateSvgReplacementMutation",t,e)}function Mq(){return[...uK,...xS]}function HP(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!Ko)return Promise.resolve();const n=$t.documentElement.classList,i=u=>n.add("".concat(TP,"-").concat(u)),r=u=>n.remove("".concat(TP,"-").concat(u)),s=Oe.autoFetchSvg?Mq():PD.concat(Object.keys(Pq));s.includes("fa")||s.push("fa");const o=[".".concat(LD,":not([").concat(kc,"])")].concat(s.map(u=>".".concat(u,":not([").concat(kc,"])"))).join(", ");if(o.length===0)return Promise.resolve();let a=[];try{a=Fd(t.querySelectorAll(o))}catch{}if(a.length>0)i("pending"),r("complete");else return Promise.resolve();const l=V_.begin("onTree"),c=a.reduce((u,d)=>{try{const f=nL(d);f&&u.push(f)}catch(f){ID||f.name==="MissingIcon"&&console.error(f)}return u},[]);return new Promise((u,d)=>{Promise.all(c).then(f=>{eL(f,()=>{i("active"),i("complete"),r("pending"),typeof e=="function"&&e(),l(),u()})}).catch(f=>{l(),d(f)})})}function Tq(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;nL(t).then(n=>{n&&eL([n],e)})}function Rq(t){return function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=(e||{}).icon?e:MS(e||{});let{mask:r}=n;return r&&(r=(r||{}).icon?r:MS(r||{})),t(i,oe(oe({},n),{},{mask:r}))}}const Oq=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:n=Us,symbol:i=!1,mask:r=null,maskId:s=null,title:o=null,titleId:a=null,classes:l=[],attributes:c={},styles:u={}}=e;if(!t)return;const{prefix:d,iconName:f,icon:p}=t;return Ly(oe({type:"icon"},t),()=>(_c("beforeDOMElementCreation",{iconDefinition:t,params:e}),Oe.autoA11y&&(o?c["aria-labelledby"]="".concat(Oe.replacementClass,"-title-").concat(a||Gh()):(c["aria-hidden"]="true",c.focusable="false")),U_({icons:{main:TS(p),mask:r?TS(r.icon):{found:!1,width:null,height:null,icon:{}}},prefix:d,iconName:f,transform:oe(oe({},Us),n),symbol:i,title:o,maskId:s,titleId:a,extra:{attributes:c,styles:u,classes:l}})))};var Iq={mixout(){return{icon:Rq(Oq)}},hooks(){return{mutationObserverCallbacks(t){return t.treeCallback=HP,t.nodeCallback=Tq,t}}},provides(t){t.i2svg=function(e){const{node:n=$t,callback:i=()=>{}}=e;return HP(n,i)},t.generateSvgReplacementMutation=function(e,n){const{iconName:i,title:r,titleId:s,prefix:o,transform:a,symbol:l,mask:c,maskId:u,extra:d}=n;return new Promise((f,p)=>{Promise.all([RS(i,o),c.iconName?RS(c.iconName,c.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(m=>{let[g,y]=m;f([e,U_({icons:{main:g,mask:y},prefix:o,iconName:i,transform:a,symbol:l,maskId:u,title:r,titleId:s,extra:d,watchable:!0})])}).catch(p)})},t.generateAbstractIcon=function(e){let{children:n,attributes:i,main:r,transform:s,styles:o}=e;const a=Oy(o);a.length>0&&(i.style=a);let l;return F_(s)&&(l=il("generateAbstractTransformGrouping",{main:r,transform:s,containerWidth:r.width,iconWidth:r.width})),n.push(l||r.icon),{children:n,attributes:i}}}},Dq={mixout(){return{layer(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{classes:n=[]}=e;return Ly({type:"layer"},()=>{_c("beforeDOMElementCreation",{assembler:t,params:e});let i=[];return t(r=>{Array.isArray(r)?r.map(s=>{i=i.concat(s.abstract)}):i=i.concat(r.abstract)}),[{tag:"span",attributes:{class:["".concat(Oe.cssPrefix,"-layers"),...n].join(" ")},children:i}]})}}}},Lq={mixout(){return{counter(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{title:n=null,classes:i=[],attributes:r={},styles:s={}}=e;return Ly({type:"counter",content:t},()=>(_c("beforeDOMElementCreation",{content:t,params:e}),pq({content:t.toString(),title:n,extra:{attributes:r,styles:s,classes:["".concat(Oe.cssPrefix,"-layers-counter"),...i]}})))}}}},jq={mixout(){return{text(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{transform:n=Us,title:i=null,classes:r=[],attributes:s={},styles:o={}}=e;return Ly({type:"text",content:t},()=>(_c("beforeDOMElementCreation",{content:t,params:e}),$P({content:t,transform:oe(oe({},Us),n),title:i,extra:{attributes:s,styles:o,classes:["".concat(Oe.cssPrefix,"-layers-text"),...r]}})))}}},provides(t){t.generateLayersText=function(e,n){const{title:i,transform:r,extra:s}=n;let o=null,a=null;if(AD){const l=parseInt(getComputedStyle(e).fontSize,10),c=e.getBoundingClientRect();o=c.width/l,a=c.height/l}return Oe.autoA11y&&!i&&(s.attributes["aria-hidden"]="true"),Promise.resolve([e,$P({content:e.innerHTML,width:o,height:a,transform:r,title:i,extra:s,watchable:!0})])}}};const $q=new RegExp('"',"ug"),WP=[1105920,1112319],GP=oe(oe(oe(oe({},{FontAwesome:{normal:"fas",400:"fas"}}),aK),_K),vK),DS=Object.keys(GP).reduce((t,e)=>(t[e.toLowerCase()]=GP[e],t),{}),Fq=Object.keys(DS).reduce((t,e)=>{const n=DS[e];return t[e]=n[900]||[...Object.entries(n)][0][1],t},{});function Bq(t){const e=t.replace($q,""),n=GK(e,0),i=n>=WP[0]&&n<=WP[1],r=e.length===2?e[0]===e[1]:!1;return{value:AS(r?e[0]:e),isSecondary:i||r}}function zq(t,e){const n=t.replace(/^['"]|['"]$/g,"").toLowerCase(),i=parseInt(e),r=isNaN(i)?"normal":i;return(DS[n]||{})[r]||Fq[n]}function KP(t,e){const n="".concat(CK).concat(e.replace(":","-"));return new Promise((i,r)=>{if(t.getAttribute(n)!==null)return i();const o=Fd(t.children).filter(f=>f.getAttribute(kS)===e)[0],a=tl.getComputedStyle(t,e),l=a.getPropertyValue("font-family"),c=l.match(MK),u=a.getPropertyValue("font-weight"),d=a.getPropertyValue("content");if(o&&!c)return t.removeChild(o),i();if(c&&d!=="none"&&d!==""){const f=a.getPropertyValue("content");let p=zq(l,u);const{value:m,isSecondary:g}=Bq(f),y=c[0].startsWith("FontAwesome");let v=z_(p,m),b=v;if(y){const w=ZK(m);w.iconName&&w.prefix&&(v=w.iconName,p=w.prefix)}if(v&&!g&&(!o||o.getAttribute(D_)!==p||o.getAttribute(L_)!==b)){t.setAttribute(n,b),o&&t.removeChild(o);const w=Nq(),{extra:k}=w;k.attributes[kS]=e,RS(v,p).then(_=>{const E=U_(oe(oe({},w),{},{icons:{main:_,mask:XD()},prefix:p,iconName:b,extra:k,watchable:!0})),C=$t.createElementNS("http://www.w3.org/2000/svg","svg");e==="::before"?t.insertBefore(C,t.firstChild):t.appendChild(C),C.outerHTML=E.map(N=>Lp(N)).join(`
`),t.removeAttribute(n),i()}).catch(r)}else i()}else i()})}function Uq(t){return Promise.all([KP(t,"::before"),KP(t,"::after")])}function Vq(t){return t.parentNode!==document.head&&!~AK.indexOf(t.tagName.toUpperCase())&&!t.getAttribute(kS)&&(!t.parentNode||t.parentNode.tagName!=="svg")}function qP(t){if(Ko)return new Promise((e,n)=>{const i=Fd(t.querySelectorAll("*")).filter(Vq).map(Uq),r=V_.begin("searchPseudoElements");tL(),Promise.all(i).then(()=>{r(),IS(),e()}).catch(()=>{r(),IS(),n()})})}var Hq={hooks(){return{mutationObserverCallbacks(t){return t.pseudoElementsCallback=qP,t}}},provides(t){t.pseudoElements2svg=function(e){const{node:n=$t}=e;Oe.searchPseudoElements&&qP(n)}}};let YP=!1;var Wq={mixout(){return{dom:{unwatch(){tL(),YP=!0}}}},hooks(){return{bootstrap(){UP(PS("mutationObserverCallbacks",{}))},noAuto(){_q()},watch(t){const{observeMutationsRoot:e}=t;YP?IS():UP(PS("mutationObserverCallbacks",{observeMutationsRoot:e}))}}}};const XP=t=>{let e={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return t.toLowerCase().split(" ").reduce((n,i)=>{const r=i.toLowerCase().split("-"),s=r[0];let o=r.slice(1).join("-");if(s&&o==="h")return n.flipX=!0,n;if(s&&o==="v")return n.flipY=!0,n;if(o=parseFloat(o),isNaN(o))return n;switch(s){case"grow":n.size=n.size+o;break;case"shrink":n.size=n.size-o;break;case"left":n.x=n.x-o;break;case"right":n.x=n.x+o;break;case"up":n.y=n.y-o;break;case"down":n.y=n.y+o;break;case"rotate":n.rotate=n.rotate+o;break}return n},e)};var Gq={mixout(){return{parse:{transform:t=>XP(t)}}},hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-transform");return n&&(t.transform=XP(n)),t}}},provides(t){t.generateAbstractTransformGrouping=function(e){let{main:n,transform:i,containerWidth:r,iconWidth:s}=e;const o={transform:"translate(".concat(r/2," 256)")},a="translate(".concat(i.x*32,", ").concat(i.y*32,") "),l="scale(".concat(i.size/16*(i.flipX?-1:1),", ").concat(i.size/16*(i.flipY?-1:1),") "),c="rotate(".concat(i.rotate," 0 0)"),u={transform:"".concat(a," ").concat(l," ").concat(c)},d={transform:"translate(".concat(s/2*-1," -256)")},f={outer:o,inner:u,path:d};return{tag:"g",attributes:oe({},f.outer),children:[{tag:"g",attributes:oe({},f.inner),children:[{tag:n.icon.tag,children:n.icon.children,attributes:oe(oe({},n.icon.attributes),f.path)}]}]}}}};const Rw={x:0,y:0,width:"100%",height:"100%"};function JP(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.attributes&&(t.attributes.fill||e)&&(t.attributes.fill="black"),t}function Kq(t){return t.tag==="g"?t.children:[t]}var qq={hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-mask"),i=n?Dy(n.split(" ").map(r=>r.trim())):XD();return i.prefix||(i.prefix=nl()),t.mask=i,t.maskId=e.getAttribute("data-fa-mask-id"),t}}},provides(t){t.generateAbstractMask=function(e){let{children:n,attributes:i,main:r,mask:s,maskId:o,transform:a}=e;const{width:l,icon:c}=r,{width:u,icon:d}=s,f=BK({transform:a,containerWidth:u,iconWidth:l}),p={tag:"rect",attributes:oe(oe({},Rw),{},{fill:"white"})},m=c.children?{children:c.children.map(JP)}:{},g={tag:"g",attributes:oe({},f.inner),children:[JP(oe({tag:c.tag,attributes:oe(oe({},c.attributes),f.path)},m))]},y={tag:"g",attributes:oe({},f.outer),children:[g]},v="mask-".concat(o||Gh()),b="clip-".concat(o||Gh()),w={tag:"mask",attributes:oe(oe({},Rw),{},{id:v,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[p,y]},k={tag:"defs",children:[{tag:"clipPath",attributes:{id:b},children:Kq(d)},w]};return n.push(k,{tag:"rect",attributes:oe({fill:"currentColor","clip-path":"url(#".concat(b,")"),mask:"url(#".concat(v,")")},Rw)}),{children:n,attributes:i}}}},Yq={provides(t){let e=!1;tl.matchMedia&&(e=tl.matchMedia("(prefers-reduced-motion: reduce)").matches),t.missingIconAbstract=function(){const n=[],i={fill:"currentColor"},r={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};n.push({tag:"path",attributes:oe(oe({},i),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});const s=oe(oe({},r),{},{attributeName:"opacity"}),o={tag:"circle",attributes:oe(oe({},i),{},{cx:"256",cy:"364",r:"28"}),children:[]};return e||o.children.push({tag:"animate",attributes:oe(oe({},r),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:oe(oe({},s),{},{values:"1;0;1;1;0;1;"})}),n.push(o),n.push({tag:"path",attributes:oe(oe({},i),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:e?[]:[{tag:"animate",attributes:oe(oe({},s),{},{values:"1;0;0;0;0;1;"})}]}),e||n.push({tag:"path",attributes:oe(oe({},i),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:oe(oe({},s),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:n}}}},Xq={hooks(){return{parseNodeAttributes(t,e){const n=e.getAttribute("data-fa-symbol"),i=n===null?!1:n===""?!0:n;return t.symbol=i,t}}}},Jq=[VK,Iq,Dq,Lq,jq,Hq,Wq,Gq,qq,Yq,Xq];aq(Jq,{mixoutsTo:gr});gr.noAuto;gr.config;gr.library;gr.dom;const LS=gr.parse;gr.findIconDefinition;gr.toHtml;const Zq=gr.icon;gr.layer;gr.text;gr.counter;var iL={exports:{}},Qq="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",eY=Qq,tY=eY;function rL(){}function sL(){}sL.resetWarningCache=rL;var nY=function(){function t(i,r,s,o,a,l){if(l!==tY){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:sL,resetWarningCache:rL};return n.PropTypes=n,n};iL.exports=nY();var iY=iL.exports;const nt=Lc(iY);function ZP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Is(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZP(Object(n),!0).forEach(function(i){Au(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function av(t){"@babel/helpers - typeof";return av=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},av(t)}function Au(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rY(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function sY(t,e){if(t==null)return{};var n=rY(t,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function jS(t){return oY(t)||aY(t)||lY(t)||cY()}function oY(t){if(Array.isArray(t))return $S(t)}function aY(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function lY(t,e){if(t){if(typeof t=="string")return $S(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $S(t,e)}}function $S(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function cY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uY(t){var e,n=t.beat,i=t.fade,r=t.beatFade,s=t.bounce,o=t.shake,a=t.flash,l=t.spin,c=t.spinPulse,u=t.spinReverse,d=t.pulse,f=t.fixedWidth,p=t.inverse,m=t.border,g=t.listItem,y=t.flip,v=t.size,b=t.rotation,w=t.pull,k=(e={"fa-beat":n,"fa-fade":i,"fa-beat-fade":r,"fa-bounce":s,"fa-shake":o,"fa-flash":a,"fa-spin":l,"fa-spin-reverse":u,"fa-spin-pulse":c,"fa-pulse":d,"fa-fw":f,"fa-inverse":p,"fa-border":m,"fa-li":g,"fa-flip":y===!0,"fa-flip-horizontal":y==="horizontal"||y==="both","fa-flip-vertical":y==="vertical"||y==="both"},Au(e,"fa-".concat(v),typeof v<"u"&&v!==null),Au(e,"fa-rotate-".concat(b),typeof b<"u"&&b!==null&&b!==0),Au(e,"fa-pull-".concat(w),typeof w<"u"&&w!==null),Au(e,"fa-swap-opacity",t.swapOpacity),e);return Object.keys(k).map(function(_){return k[_]?_:null}).filter(function(_){return _})}function dY(t){return t=t-0,t===t}function oL(t){return dY(t)?t:(t=t.replace(/[\-_\s]+(.)?/g,function(e,n){return n?n.toUpperCase():""}),t.substr(0,1).toLowerCase()+t.substr(1))}var fY=["style"];function hY(t){return t.charAt(0).toUpperCase()+t.slice(1)}function pY(t){return t.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,n){var i=n.indexOf(":"),r=oL(n.slice(0,i)),s=n.slice(i+1).trim();return r.startsWith("webkit")?e[hY(r)]=s:e[r]=s,e},{})}function aL(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string")return e;var i=(e.children||[]).map(function(l){return aL(t,l)}),r=Object.keys(e.attributes||{}).reduce(function(l,c){var u=e.attributes[c];switch(c){case"class":l.attrs.className=u,delete e.attributes.class;break;case"style":l.attrs.style=pY(u);break;default:c.indexOf("aria-")===0||c.indexOf("data-")===0?l.attrs[c.toLowerCase()]=u:l.attrs[oL(c)]=u}return l},{attrs:{}}),s=n.style,o=s===void 0?{}:s,a=sY(n,fY);return r.attrs.style=Is(Is({},r.attrs.style),o),t.apply(void 0,[e.tag,Is(Is({},r.attrs),a)].concat(jS(i)))}var lL=!1;try{lL=!0}catch{}function mY(){if(!lL&&console&&typeof console.error=="function"){var t;(t=console).error.apply(t,arguments)}}function QP(t){if(t&&av(t)==="object"&&t.prefix&&t.iconName&&t.icon)return t;if(LS.icon)return LS.icon(t);if(t===null)return null;if(t&&av(t)==="object"&&t.prefix&&t.iconName)return t;if(Array.isArray(t)&&t.length===2)return{prefix:t[0],iconName:t[1]};if(typeof t=="string")return{prefix:"fas",iconName:t}}function Ow(t,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?Au({},t,e):{}}var e3={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1},Fe=Dt.forwardRef(function(t,e){var n=Is(Is({},e3),t),i=n.icon,r=n.mask,s=n.symbol,o=n.className,a=n.title,l=n.titleId,c=n.maskId,u=QP(i),d=Ow("classes",[].concat(jS(uY(n)),jS((o||"").split(" ")))),f=Ow("transform",typeof n.transform=="string"?LS.transform(n.transform):n.transform),p=Ow("mask",QP(r)),m=Zq(u,Is(Is(Is(Is({},d),f),p),{},{symbol:s,title:a,titleId:l,maskId:c}));if(!m)return mY("Could not find icon",u),null;var g=m.abstract,y={ref:e};return Object.keys(n).forEach(function(v){e3.hasOwnProperty(v)||(y[v]=n[v])}),gY(g[0],y)});Fe.displayName="FontAwesomeIcon";Fe.propTypes={beat:nt.bool,border:nt.bool,beatFade:nt.bool,bounce:nt.bool,className:nt.string,fade:nt.bool,flash:nt.bool,mask:nt.oneOfType([nt.object,nt.array,nt.string]),maskId:nt.string,fixedWidth:nt.bool,inverse:nt.bool,flip:nt.oneOf([!0,!1,"horizontal","vertical","both"]),icon:nt.oneOfType([nt.object,nt.array,nt.string]),listItem:nt.bool,pull:nt.oneOf(["right","left"]),pulse:nt.bool,rotation:nt.oneOf([0,90,180,270]),shake:nt.bool,size:nt.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:nt.bool,spinPulse:nt.bool,spinReverse:nt.bool,symbol:nt.oneOfType([nt.bool,nt.string]),title:nt.string,titleId:nt.string,transform:nt.oneOfType([nt.string,nt.object]),swapOpacity:nt.bool};var gY=aL.bind(null,Dt.createElement);function cL(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=cL(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function ee(){for(var t,e,n=0,i="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=cL(t))&&(i&&(i+=" "),i+=e);return i}/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const t3={prefix:"fas",iconName:"info",icon:[192,512,[],"f129","M48 80a48 48 0 1 1 96 0A48 48 0 1 1 48 80zM0 224c0-17.7 14.3-32 32-32l64 0c17.7 0 32 14.3 32 32l0 224 32 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 512c-17.7 0-32-14.3-32-32s14.3-32 32-32l32 0 0-192-32 0c-17.7 0-32-14.3-32-32z"]},vY={prefix:"fas",iconName:"forward-step",icon:[320,512,["step-forward"],"f051","M52.5 440.6c-9.5 7.9-22.8 9.7-34.1 4.4S0 428.4 0 416L0 96C0 83.6 7.2 72.3 18.4 67s24.5-3.6 34.1 4.4l192 160L256 241l0-145c0-17.7 14.3-32 32-32s32 14.3 32 32l0 320c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-145-11.5 9.6-192 160z"]},W_=vY,dc={prefix:"fas",iconName:"lightbulb",icon:[384,512,[128161],"f0eb","M272 384c9.6-31.9 29.5-59.1 49.2-86.2c0 0 0 0 0 0c5.2-7.1 10.4-14.2 15.4-21.4c19.8-28.5 31.4-63 31.4-100.3C368 78.8 289.2 0 192 0S16 78.8 16 176c0 37.3 11.6 71.9 31.4 100.3c5 7.2 10.2 14.3 15.4 21.4c0 0 0 0 0 0c19.8 27.1 39.7 54.4 49.2 86.2l160 0zM192 512c44.2 0 80-35.8 80-80l0-16-160 0 0 16c0 44.2 35.8 80 80 80zM112 176c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-61.9 50.1-112 112-112c8.8 0 16 7.2 16 16s-7.2 16-16 16c-44.2 0-80 35.8-80 80z"]},yY={prefix:"fas",iconName:"compress",icon:[448,512,[],"f066","M160 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 64-64 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l96 0c17.7 0 32-14.3 32-32l0-96zM32 320c-17.7 0-32 14.3-32 32s14.3 32 32 32l64 0 0 64c0 17.7 14.3 32 32 32s32-14.3 32-32l0-96c0-17.7-14.3-32-32-32l-96 0zM352 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 96c0 17.7 14.3 32 32 32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-64 0 0-64zM320 320c-17.7 0-32 14.3-32 32l0 96c0 17.7 14.3 32 32 32s32-14.3 32-32l0-64 64 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-96 0z"]},bY={prefix:"fas",iconName:"user",icon:[448,512,[128100,62144],"f007","M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512l388.6 0c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304l-91.4 0z"]},wY={prefix:"fas",iconName:"star",icon:[576,512,[11088,61446],"f005","M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"]},xY={prefix:"fas",iconName:"microchip",icon:[512,512,[],"f2db","M176 24c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40c-35.3 0-64 28.7-64 64l-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0 0 56-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0 0 56-40 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l40 0c0 35.3 28.7 64 64 64l0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40 56 0 0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40 56 0 0 40c0 13.3 10.7 24 24 24s24-10.7 24-24l0-40c35.3 0 64-28.7 64-64l40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0 0-56 40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0 0-56 40 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-40 0c0-35.3-28.7-64-64-64l0-40c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40-56 0 0-40c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40-56 0 0-40zM160 128l192 0c17.7 0 32 14.3 32 32l0 192c0 17.7-14.3 32-32 32l-192 0c-17.7 0-32-14.3-32-32l0-192c0-17.7 14.3-32 32-32zm192 32l-192 0 0 192 192 0 0-192z"]},SY={prefix:"fas",iconName:"rotate-left",icon:[512,512,["rotate-back","rotate-backward","undo-alt"],"f2ea","M48.5 224L40 224c-13.3 0-24-10.7-24-24L16 72c0-9.7 5.8-18.5 14.8-22.2s19.3-1.7 26.2 5.2L98.6 96.6c87.6-86.5 228.7-86.2 315.8 1c87.5 87.5 87.5 229.3 0 316.8s-229.3 87.5-316.8 0c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0c62.5 62.5 163.8 62.5 226.3 0s62.5-163.8 0-226.3c-62.2-62.2-162.7-62.5-225.3-1L185 183c6.9 6.9 8.9 17.2 5.2 26.2s-12.5 14.8-22.2 14.8L48.5 224z"]},kY={prefix:"fas",iconName:"circle-check",icon:[512,512,[61533,"check-circle"],"f058","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"]},_Y=kY,jy={prefix:"fas",iconName:"pause",icon:[320,512,[9208],"f04c","M48 64C21.5 64 0 85.5 0 112L0 400c0 26.5 21.5 48 48 48l32 0c26.5 0 48-21.5 48-48l0-288c0-26.5-21.5-48-48-48L48 64zm192 0c-26.5 0-48 21.5-48 48l0 288c0 26.5 21.5 48 48 48l32 0c26.5 0 48-21.5 48-48l0-288c0-26.5-21.5-48-48-48l-32 0z"]},CY={prefix:"fas",iconName:"chart-line",icon:[512,512,["line-chart"],"f201","M64 64c0-17.7-14.3-32-32-32S0 46.3 0 64L0 400c0 44.2 35.8 80 80 80l400 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L80 416c-8.8 0-16-7.2-16-16L64 64zm406.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L320 210.7l-57.4-57.4c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L240 221.3l57.4 57.4c12.5 12.5 32.8 12.5 45.3 0l128-128z"]},EY={prefix:"fas",iconName:"circle-question",icon:[512,512,[62108,"question-circle"],"f059","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM169.8 165.3c7.9-22.3 29.1-37.3 52.8-37.3l58.3 0c34.9 0 63.1 28.3 63.1 63.1c0 22.6-12.1 43.5-31.7 54.8L280 264.4c-.2 13-10.9 23.6-24 23.6c-13.3 0-24-10.7-24-24l0-13.5c0-8.6 4.6-16.5 12.1-20.8l44.3-25.4c4.7-2.7 7.6-7.7 7.6-13.1c0-8.4-6.8-15.1-15.1-15.1l-58.3 0c-3.4 0-6.4 2.1-7.5 5.3l-.4 1.2c-4.4 12.5-18.2 19-30.6 14.6s-19-18.2-14.6-30.6l.4-1.2zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"]},AY=EY,Iw={prefix:"fas",iconName:"eye",icon:[576,512,[128065],"f06e","M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"]},NY={prefix:"fas",iconName:"arrow-rotate-right",icon:[512,512,[8635,"arrow-right-rotate","arrow-rotate-forward","redo"],"f01e","M386.3 160L336 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l128 0c17.7 0 32-14.3 32-32l0-128c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 51.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0s-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3s163.8-62.5 226.3 0L386.3 160z"]},uL=NY,PY={prefix:"fas",iconName:"circle-info",icon:[512,512,["info-circle"],"f05a","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336l24 0 0-64-24 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l48 0c13.3 0 24 10.7 24 24l0 88 8 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-80 0c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"]},dL=PY,MY={prefix:"fas",iconName:"backward-step",icon:[320,512,["step-backward"],"f048","M267.5 440.6c9.5 7.9 22.8 9.7 34.1 4.4s18.4-16.6 18.4-29l0-320c0-12.4-7.2-23.7-18.4-29s-24.5-3.6-34.1 4.4l-192 160L64 241 64 96c0-17.7-14.3-32-32-32S0 78.3 0 96L0 416c0 17.7 14.3 32 32 32s32-14.3 32-32l0-145 11.5 9.6 192 160z"]},fL=MY,n3={prefix:"fas",iconName:"bell",icon:[448,512,[128276,61602],"f0f3","M224 0c-17.7 0-32 14.3-32 32l0 19.2C119 66 64 130.6 64 208l0 18.8c0 47-17.3 92.4-48.5 127.6l-7.4 8.3c-8.4 9.4-10.4 22.9-5.3 34.4S19.4 416 32 416l384 0c12.6 0 24-7.4 29.2-18.9s3.1-25-5.3-34.4l-7.4-8.3C401.3 319.2 384 273.9 384 226.8l0-18.8c0-77.4-55-142-128-156.8L256 32c0-17.7-14.3-32-32-32zm45.3 493.3c12-12 18.7-28.3 18.7-45.3l-64 0-64 0c0 17 6.7 33.3 18.7 45.3s28.3 18.7 45.3 18.7s33.3-6.7 45.3-18.7z"]},vd={prefix:"fas",iconName:"play",icon:[384,512,[9654],"f04b","M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80L0 432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"]},TY={prefix:"fas",iconName:"expand",icon:[448,512,[],"f065","M32 32C14.3 32 0 46.3 0 64l0 96c0 17.7 14.3 32 32 32s32-14.3 32-32l0-64 64 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L32 32zM64 352c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 96c0 17.7 14.3 32 32 32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-64 0 0-64zM320 32c-17.7 0-32 14.3-32 32s14.3 32 32 32l64 0 0 64c0 17.7 14.3 32 32 32s32-14.3 32-32l0-96c0-17.7-14.3-32-32-32l-96 0zM448 352c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 64-64 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l96 0c17.7 0 32-14.3 32-32l0-96z"]},RY={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},$y=RY,hL={prefix:"fas",iconName:"rocket",icon:[512,512,[],"f135","M156.6 384.9L125.7 354c-8.5-8.5-11.5-20.8-7.7-32.2c3-8.9 7-20.5 11.8-33.8L24 288c-8.6 0-16.6-4.6-20.9-12.1s-4.2-16.7 .2-24.1l52.5-88.5c13-21.9 36.5-35.3 61.9-35.3l82.3 0c2.4-4 4.8-7.7 7.2-11.3C289.1-4.1 411.1-8.1 483.9 5.3c11.6 2.1 20.6 11.2 22.8 22.8c13.4 72.9 9.3 194.8-111.4 276.7c-3.5 2.4-7.3 4.8-11.3 7.2l0 82.3c0 25.4-13.4 49-35.3 61.9l-88.5 52.5c-7.4 4.4-16.6 4.5-24.1 .2s-12.1-12.2-12.1-20.9l0-107.2c-14.1 4.9-26.4 8.9-35.7 11.9c-11.2 3.6-23.4 .5-31.8-7.8zM384 168a40 40 0 1 0 0-80 40 40 0 1 0 0 80z"]},OY={prefix:"fas",iconName:"chevron-left",icon:[320,512,[9001],"f053","M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l192 192c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256 246.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192z"]},IY={prefix:"fas",iconName:"chevron-right",icon:[320,512,[9002],"f054","M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"]},pL={prefix:"fas",iconName:"trophy",icon:[576,512,[127942],"f091","M400 0L176 0c-26.5 0-48.1 21.8-47.1 48.2c.2 5.3 .4 10.6 .7 15.8L24 64C10.7 64 0 74.7 0 88c0 92.6 33.5 157 78.5 200.7c44.3 43.1 98.3 64.8 138.1 75.8c23.4 6.5 39.4 26 39.4 45.6c0 20.9-17 37.9-37.9 37.9L192 448c-17.7 0-32 14.3-32 32s14.3 32 32 32l192 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-26.1 0C337 448 320 431 320 410.1c0-19.6 15.9-39.2 39.4-45.6c39.9-11 93.9-32.7 138.2-75.8C542.5 245 576 180.6 576 88c0-13.3-10.7-24-24-24L446.4 64c.3-5.2 .5-10.4 .7-15.8C448.1 21.8 426.5 0 400 0zM48.9 112l84.4 0c9.1 90.1 29.2 150.3 51.9 190.6c-24.9-11-50.8-26.5-73.2-48.3c-32-31.1-58-76-63-142.3zM464.1 254.3c-22.4 21.8-48.3 37.3-73.2 48.3c22.7-40.3 42.8-100.5 51.9-190.6l84.4 0c-5.1 66.3-31.1 111.2-63 142.3z"]},mL={prefix:"fas",iconName:"spinner",icon:[512,512,[],"f110","M304 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm0 416a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm464-48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM142.9 437A48 48 0 1 0 75 369.1 48 48 0 1 0 142.9 437zm0-294.2A48 48 0 1 0 75 75a48 48 0 1 0 67.9 67.9zM369.1 437A48 48 0 1 0 437 369.1 48 48 0 1 0 369.1 437z"]},DY={prefix:"fas",iconName:"gears",icon:[640,512,["cogs"],"f085","M308.5 135.3c7.1-6.3 9.9-16.2 6.2-25c-2.3-5.3-4.8-10.5-7.6-15.5L304 89.4c-3-5-6.3-9.9-9.8-14.6c-5.7-7.6-15.7-10.1-24.7-7.1l-28.2 9.3c-10.7-8.8-23-16-36.2-20.9L199 27.1c-1.9-9.3-9.1-16.7-18.5-17.8C173.9 8.4 167.2 8 160.4 8l-.7 0c-6.8 0-13.5 .4-20.1 1.2c-9.4 1.1-16.6 8.6-18.5 17.8L115 56.1c-13.3 5-25.5 12.1-36.2 20.9L50.5 67.8c-9-3-19-.5-24.7 7.1c-3.5 4.7-6.8 9.6-9.9 14.6l-3 5.3c-2.8 5-5.3 10.2-7.6 15.6c-3.7 8.7-.9 18.6 6.2 25l22.2 19.8C32.6 161.9 32 168.9 32 176s.6 14.1 1.7 20.9L11.5 216.7c-7.1 6.3-9.9 16.2-6.2 25c2.3 5.3 4.8 10.5 7.6 15.6l3 5.2c3 5.1 6.3 9.9 9.9 14.6c5.7 7.6 15.7 10.1 24.7 7.1l28.2-9.3c10.7 8.8 23 16 36.2 20.9l6.1 29.1c1.9 9.3 9.1 16.7 18.5 17.8c6.7 .8 13.5 1.2 20.4 1.2s13.7-.4 20.4-1.2c9.4-1.1 16.6-8.6 18.5-17.8l6.1-29.1c13.3-5 25.5-12.1 36.2-20.9l28.2 9.3c9 3 19 .5 24.7-7.1c3.5-4.7 6.8-9.5 9.8-14.6l3.1-5.4c2.8-5 5.3-10.2 7.6-15.5c3.7-8.7 .9-18.6-6.2-25l-22.2-19.8c1.1-6.8 1.7-13.8 1.7-20.9s-.6-14.1-1.7-20.9l22.2-19.8zM112 176a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zM504.7 500.5c6.3 7.1 16.2 9.9 25 6.2c5.3-2.3 10.5-4.8 15.5-7.6l5.4-3.1c5-3 9.9-6.3 14.6-9.8c7.6-5.7 10.1-15.7 7.1-24.7l-9.3-28.2c8.8-10.7 16-23 20.9-36.2l29.1-6.1c9.3-1.9 16.7-9.1 17.8-18.5c.8-6.7 1.2-13.5 1.2-20.4s-.4-13.7-1.2-20.4c-1.1-9.4-8.6-16.6-17.8-18.5L583.9 307c-5-13.3-12.1-25.5-20.9-36.2l9.3-28.2c3-9 .5-19-7.1-24.7c-4.7-3.5-9.6-6.8-14.6-9.9l-5.3-3c-5-2.8-10.2-5.3-15.6-7.6c-8.7-3.7-18.6-.9-25 6.2l-19.8 22.2c-6.8-1.1-13.8-1.7-20.9-1.7s-14.1 .6-20.9 1.7l-19.8-22.2c-6.3-7.1-16.2-9.9-25-6.2c-5.3 2.3-10.5 4.8-15.6 7.6l-5.2 3c-5.1 3-9.9 6.3-14.6 9.9c-7.6 5.7-10.1 15.7-7.1 24.7l9.3 28.2c-8.8 10.7-16 23-20.9 36.2L315.1 313c-9.3 1.9-16.7 9.1-17.8 18.5c-.8 6.7-1.2 13.5-1.2 20.4s.4 13.7 1.2 20.4c1.1 9.4 8.6 16.6 17.8 18.5l29.1 6.1c5 13.3 12.1 25.5 20.9 36.2l-9.3 28.2c-3 9-.5 19 7.1 24.7c4.7 3.5 9.5 6.8 14.6 9.8l5.4 3.1c5 2.8 10.2 5.3 15.5 7.6c8.7 3.7 18.6 .9 25-6.2l19.8-22.2c6.8 1.1 13.8 1.7 20.9 1.7s14.1-.6 20.9-1.7l19.8 22.2zM464 304a48 48 0 1 1 0 96 48 48 0 1 1 0-96z"]},LY=DY,jY={prefix:"fas",iconName:"infinity",icon:[640,512,[8734,9854],"f534","M0 241.1C0 161 65 96 145.1 96c38.5 0 75.4 15.3 102.6 42.5L320 210.7l72.2-72.2C419.5 111.3 456.4 96 494.9 96C575 96 640 161 640 241.1l0 29.7C640 351 575 416 494.9 416c-38.5 0-75.4-15.3-102.6-42.5L320 301.3l-72.2 72.2C220.5 400.7 183.6 416 145.1 416C65 416 0 351 0 270.9l0-29.7zM274.7 256l-72.2-72.2c-15.2-15.2-35.9-23.8-57.4-23.8C100.3 160 64 196.3 64 241.1l0 29.7c0 44.8 36.3 81.1 81.1 81.1c21.5 0 42.2-8.5 57.4-23.8L274.7 256zm90.5 0l72.2 72.2c15.2 15.2 35.9 23.8 57.4 23.8c44.8 0 81.1-36.3 81.1-81.1l0-29.7c0-44.8-36.3-81.1-81.1-81.1c-21.5 0-42.2 8.5-57.4 23.8L365.3 256z"]},$Y={prefix:"fas",iconName:"book",icon:[448,512,[128212],"f02d","M96 0C43 0 0 43 0 96L0 416c0 53 43 96 96 96l288 0 32 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l0-64c17.7 0 32-14.3 32-32l0-320c0-17.7-14.3-32-32-32L384 0 96 0zm0 384l256 0 0 64L96 448c-17.7 0-32-14.3-32-32s14.3-32 32-32zm32-240c0-8.8 7.2-16 16-16l192 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-192 0c-8.8 0-16-7.2-16-16zm16 48l192 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-192 0c-8.8 0-16-7.2-16-16s7.2-16 16-16z"]},gL={prefix:"fas",iconName:"check",icon:[448,512,[10003,10004],"f00c","M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"]},FY={prefix:"fas",iconName:"triangle-exclamation",icon:[512,512,[9888,"exclamation-triangle","warning"],"f071","M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480L40 480c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24l0 112c0 13.3 10.7 24 24 24s24-10.7 24-24l0-112c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"]},FS=FY,BY={prefix:"fas",iconName:"database",icon:[448,512,[],"f1c0","M448 80l0 48c0 44.2-100.3 80-224 80S0 172.2 0 128L0 80C0 35.8 100.3 0 224 0S448 35.8 448 80zM393.2 214.7c20.8-7.4 39.9-16.9 54.8-28.6L448 288c0 44.2-100.3 80-224 80S0 332.2 0 288L0 186.1c14.9 11.8 34 21.2 54.8 28.6C99.7 230.7 159.5 240 224 240s124.3-9.3 169.2-25.3zM0 346.1c14.9 11.8 34 21.2 54.8 28.6C99.7 390.7 159.5 400 224 400s124.3-9.3 169.2-25.3c20.8-7.4 39.9-16.9 54.8-28.6l0 85.9c0 44.2-100.3 80-224 80S0 476.2 0 432l0-85.9z"]},jp={prefix:"fas",iconName:"graduation-cap",icon:[640,512,[127891,"mortar-board"],"f19d","M320 32c-8.1 0-16.1 1.4-23.7 4.1L15.8 137.4C6.3 140.9 0 149.9 0 160s6.3 19.1 15.8 22.6l57.9 20.9C57.3 229.3 48 259.8 48 291.9l0 28.1c0 28.4-10.8 57.7-22.3 80.8c-6.5 13-13.9 25.8-22.5 37.6C0 442.7-.9 448.3 .9 453.4s6 8.9 11.2 10.2l64 16c4.2 1.1 8.7 .3 12.4-2s6.3-6.1 7.1-10.4c8.6-42.8 4.3-81.2-2.1-108.7C90.3 344.3 86 329.8 80 316.5l0-24.6c0-30.2 10.2-58.7 27.9-81.5c12.9-15.5 29.6-28 49.2-35.7l157-61.7c8.2-3.2 17.5 .8 20.7 9s-.8 17.5-9 20.7l-157 61.7c-12.4 4.9-23.3 12.4-32.2 21.6l159.6 57.6c7.6 2.7 15.6 4.1 23.7 4.1s16.1-1.4 23.7-4.1L624.2 182.6c9.5-3.4 15.8-12.5 15.8-22.6s-6.3-19.1-15.8-22.6L343.7 36.1C336.1 33.4 328.1 32 320 32zM128 408c0 35.3 86 72 192 72s192-36.7 192-72L496.7 262.6 354.5 314c-11.1 4-22.8 6-34.5 6s-23.5-2-34.5-6L143.3 262.6 128 408z"]},vL={default:"bg-stone-800 text-white hover:bg-stone-700 focus:ring-stone-500",destructive:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",outline:"border border-stone-600 bg-transparent text-white hover:bg-stone-800 focus:ring-stone-500",secondary:"bg-stone-700 text-white hover:bg-stone-600 focus:ring-stone-500",ghost:"bg-transparent text-stone-300 hover:bg-stone-800 hover:text-white focus:ring-stone-500",link:"bg-transparent text-mantis-400 hover:text-mantis-300 hover:underline focus:ring-mantis-500",primary:"bg-mantis-600 text-white hover:bg-mantis-700 focus:ring-mantis-500",success:"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500",warning:"bg-yellow-600 text-white hover:bg-yellow-700 focus:ring-yellow-500",error:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"},zY={sm:"h-8 px-3 text-xs",md:"h-10 px-4 text-sm",lg:"h-12 px-6 text-base",xl:"h-14 px-8 text-lg"},ht=x.memo(x.forwardRef(({variant:t="default",size:e="md",isLoading:n=!1,loadingText:i,leftIcon:r,rightIcon:s,disabled:o=!1,fullWidth:a=!1,className:l,children:c,onClick:u,type:d="button","aria-label":f,title:p,...m},g)=>{const y=o||n;return h.jsxs("button",{ref:g,type:d,disabled:y,onClick:u,"aria-label":f,title:p,className:ee("inline-flex items-center justify-center gap-2 rounded-lg font-medium transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-stone-900","disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50","hover:scale-105 active:scale-95",vL[t],zY[e],a&&"w-full",l),...m,children:[n&&h.jsx(Fe,{icon:mL,className:"animate-spin","aria-hidden":"true"}),!n&&r&&h.jsx("span",{className:"flex items-center","aria-hidden":"true",children:r}),h.jsx("span",{children:n&&i?i:c}),!n&&s&&h.jsx("span",{className:"flex items-center","aria-hidden":"true",children:s})]})}));ht.displayName="Button";const Zg=x.memo(x.forwardRef(({icon:t,variant:e="ghost",size:n="md",isLoading:i=!1,disabled:r=!1,className:s,onClick:o,"aria-label":a,title:l,...c},u)=>{const d=r||i,f={sm:"size-8",md:"size-10",lg:"size-12",xl:"size-14"};return h.jsx("button",{ref:u,disabled:d,onClick:o,"aria-label":a,title:l,className:ee("inline-flex items-center justify-center rounded-lg transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-stone-900","disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50","hover:scale-105 active:scale-95",vL[e],f[n],s),...c,children:i?h.jsx(Fe,{icon:mL,className:"animate-spin","aria-hidden":"true"}):h.jsx("span",{className:"flex items-center justify-center","aria-hidden":"true",children:t})})}));Zg.displayName="IconButton";const UY=x.memo(({children:t,orientation:e="horizontal",className:n})=>h.jsx("div",{className:ee("inline-flex",e==="horizontal"?"flex-row":"flex-col",n),role:"group",children:t}));UY.displayName="ButtonGroup";const yL={top:"bottom-full left-1/2 transform -translate-x-1/2 mb-2",bottom:"top-full left-1/2 transform -translate-x-1/2 mt-2",left:"right-full top-1/2 transform -translate-y-1/2 mr-2",right:"left-full top-1/2 transform -translate-y-1/2 ml-2","top-start":"bottom-full left-0 mb-2","top-end":"bottom-full right-0 mb-2","bottom-start":"top-full left-0 mt-2","bottom-end":"top-full right-0 mt-2"},bL={top:"top-full left-1/2 transform -translate-x-1/2 border-t-stone-800",bottom:"bottom-full left-1/2 transform -translate-x-1/2 border-b-stone-800",left:"left-full top-1/2 transform -translate-y-1/2 border-l-stone-800",right:"right-full top-1/2 transform -translate-y-1/2 border-r-stone-800","top-start":"top-full left-4 border-t-stone-800","top-end":"top-full right-4 border-t-stone-800","bottom-start":"bottom-full left-4 border-b-stone-800","bottom-end":"bottom-full right-4 border-b-stone-800"},us=x.memo(({content:t,children:e,position:n="top",delay:i=200,className:r,maxWidth:s=200,showArrow:o=!0,disabled:a=!1})=>{const[l,c]=x.useState(!1),[u,d]=x.useState(n),f=x.useRef(null),p=x.useRef(null),m=x.useRef(),g=x.useCallback(()=>{a||(m.current=setTimeout(()=>{c(!0)},i))},[a,i]),y=x.useCallback(()=>{m.current&&clearTimeout(m.current),c(!1)},[]);return x.useEffect(()=>{if(!l||!p.current||!f.current)return;const v=p.current,w=f.current.getBoundingClientRect(),k=v.getBoundingClientRect();let _=n;w.left+k.width>window.innerWidth&&(n.includes("right")?_="left":n.includes("top")?_="top-end":n.includes("bottom")&&(_="bottom-end")),w.left-k.width<0&&(n.includes("left")?_="right":n.includes("top")?_="top-start":n.includes("bottom")&&(_="bottom-start")),w.top-k.height<0&&n.includes("top")&&(_="bottom"),w.bottom+k.height>window.innerHeight&&n.includes("bottom")&&(_="top"),d(_)},[l,n]),h.jsxs("div",{ref:f,className:ee("relative inline-block",r),onMouseEnter:g,onMouseLeave:y,onFocus:g,onBlur:y,children:[e,l&&h.jsxs("div",{ref:p,className:ee("absolute z-50 rounded-lg border border-stone-600 bg-stone-800 px-3 py-2 text-sm text-white shadow-lg","animate-fade-in",yL[u]),style:{maxWidth:`${s}px`},role:"tooltip",children:[t,o&&h.jsx("div",{className:ee("absolute size-0 border-4 border-transparent",bL[u])})]})]})});us.displayName="Tooltip";const VY=x.memo(({content:t,className:e,size:n="md"})=>{const i={sm:"size-3",md:"size-4",lg:"size-5"};return h.jsx(us,{content:t,className:e,children:h.jsx(Fe,{icon:dL,className:ee("cursor-help text-stone-400 transition-colors hover:text-stone-300",i[n])})})});VY.displayName="InfoTooltip";const HY=x.memo(({content:t,trigger:e,position:n="top",delay:i=200,className:r,maxWidth:s=200,showArrow:o=!0,disabled:a=!1})=>{const[l,c]=x.useState(!1),u=x.useRef(null),d=x.useRef(null),f=x.useRef(),p=x.useCallback(()=>{a||(f.current=setTimeout(()=>{c(!0)},i))},[a,i]),m=x.useCallback(()=>{f.current&&clearTimeout(f.current),c(!1)},[]);return h.jsxs("div",{ref:u,className:ee("relative inline-block",r),onMouseEnter:p,onMouseLeave:m,onFocus:p,onBlur:m,children:[e,l&&h.jsxs("div",{ref:d,className:ee("absolute z-50 rounded-lg border border-stone-600 bg-stone-800 px-3 py-2 text-sm text-white shadow-lg","animate-fade-in",yL[n]),style:{maxWidth:`${s}px`},role:"tooltip",children:[t,o&&h.jsx("div",{className:ee("absolute size-0 border-4 border-transparent",bL[n])})]})]})});HY.displayName="CustomTooltip";function wL(t,e){const n=e.split(".");let i=t;for(const r of n)if(r in i)i=i[r];else throw new ReferenceError(`Couldn't find path "${e}".`);return i}const xL=["en","es"];function G_(t){return function(n,i,...r){const s=wL(t[n],i);if(typeof s=="function")return s(...r);if(typeof s=="string")return s;throw new Error(`Missing translation for key ${i}`)}}const K_={},WY=Symbol((K_?"production":void 0)!=="production"?"RESET":""),SL=t=>typeof(t==null?void 0:t.then)=="function";function GY(t=()=>{try{return window.localStorage}catch(n){(K_?"production":void 0)!=="production"&&typeof window<"u"&&console.warn(n);return}},e){var n;let i,r;const s={getItem:(l,c)=>{var u,d;const f=m=>{if(m=m||"",i!==m){try{r=JSON.parse(m,e==null?void 0:e.reviver)}catch{return c}i=m}return r},p=(d=(u=t())==null?void 0:u.getItem(l))!=null?d:null;return SL(p)?p.then(f):f(p)},setItem:(l,c)=>{var u;return(u=t())==null?void 0:u.setItem(l,JSON.stringify(c,void 0))},removeItem:l=>{var c;return(c=t())==null?void 0:c.removeItem(l)}},o=l=>(c,u,d)=>l(c,f=>{let p;try{p=JSON.parse(f||"")}catch{p=d}u(p)});let a;try{a=(n=t())==null?void 0:n.subscribe}catch{}return!a&&typeof window<"u"&&typeof window.addEventListener=="function"&&window.Storage&&(a=(l,c)=>{if(!(t()instanceof window.Storage))return()=>{};const u=d=>{d.storageArea===t()&&d.key===l&&c(d.newValue)};return window.addEventListener("storage",u),()=>{window.removeEventListener("storage",u)}}),a&&(s.subscribe=o(a)),s}const KY=GY();function kL(t,e,n=KY,i){const r=i==null?void 0:i.getOnInit,s=de(r?n.getItem(t,e):e);return(K_?"production":void 0)!=="production"&&(s.debugPrivate=!0),s.onMount=a=>{a(n.getItem(t,e));let l;return n.subscribe&&(l=n.subscribe(t,a,e)),l},de(a=>a(s),(a,l,c)=>{const u=typeof c=="function"?c(a(s)):c;return u===WY?(l(s,e),n.removeItem(t)):SL(u)?u.then(d=>(l(s,d),n.setItem(t,d))):(l(s,u),n.setItem(t,u))})}const z=R_();function qY(t){return h.jsx(SG,{store:z,children:t.children})}var pt;(function(t){t.assertEqual=r=>{};function e(r){}t.assertIs=e;function n(r){throw new Error}t.assertNever=n,t.arrayToEnum=r=>{const s={};for(const o of r)s[o]=o;return s},t.getValidEnumValues=r=>{const s=t.objectKeys(r).filter(a=>typeof r[r[a]]!="number"),o={};for(const a of s)o[a]=r[a];return t.objectValues(o)},t.objectValues=r=>t.objectKeys(r).map(function(s){return r[s]}),t.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{const s=[];for(const o in r)Object.prototype.hasOwnProperty.call(r,o)&&s.push(o);return s},t.find=(r,s)=>{for(const o of r)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&Number.isFinite(r)&&Math.floor(r)===r;function i(r,s=" | "){return r.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=i,t.jsonStringifyReplacer=(r,s)=>typeof s=="bigint"?s.toString():s})(pt||(pt={}));var i3;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(i3||(i3={}));const Me=pt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ua=t=>{switch(typeof t){case"undefined":return Me.undefined;case"string":return Me.string;case"number":return Number.isNaN(t)?Me.nan:Me.number;case"boolean":return Me.boolean;case"function":return Me.function;case"bigint":return Me.bigint;case"symbol":return Me.symbol;case"object":return Array.isArray(t)?Me.array:t===null?Me.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Me.promise:typeof Map<"u"&&t instanceof Map?Me.map:typeof Set<"u"&&t instanceof Set?Me.set:typeof Date<"u"&&t instanceof Date?Me.date:Me.object;default:return Me.unknown}},ce=pt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class zo extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(s){return s.message},i={_errors:[]},r=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(r);else if(o.code==="invalid_return_type")r(o.returnTypeError);else if(o.code==="invalid_arguments")r(o.argumentsError);else if(o.path.length===0)i._errors.push(n(o));else{let a=i,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(n(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return r(this),i}static assert(e){if(!(e instanceof zo))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,pt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},i=[];for(const r of this.issues)if(r.path.length>0){const s=r.path[0];n[s]=n[s]||[],n[s].push(e(r))}else i.push(e(r));return{formErrors:i,fieldErrors:n}}get formErrors(){return this.flatten()}}zo.create=t=>new zo(t);const BS=(t,e)=>{let n;switch(t.code){case ce.invalid_type:t.received===Me.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case ce.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,pt.jsonStringifyReplacer)}`;break;case ce.unrecognized_keys:n=`Unrecognized key(s) in object: ${pt.joinValues(t.keys,", ")}`;break;case ce.invalid_union:n="Invalid input";break;case ce.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${pt.joinValues(t.options)}`;break;case ce.invalid_enum_value:n=`Invalid enum value. Expected ${pt.joinValues(t.options)}, received '${t.received}'`;break;case ce.invalid_arguments:n="Invalid function arguments";break;case ce.invalid_return_type:n="Invalid function return type";break;case ce.invalid_date:n="Invalid date";break;case ce.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:pt.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case ce.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case ce.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case ce.custom:n="Invalid input";break;case ce.invalid_intersection_types:n="Intersection results could not be merged";break;case ce.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case ce.not_finite:n="Number must be finite";break;default:n=e.defaultError,pt.assertNever(t)}return{message:n}};let YY=BS;function XY(){return YY}const JY=t=>{const{data:e,path:n,errorMaps:i,issueData:r}=t,s=[...n,...r.path||[]],o={...r,path:s};if(r.message!==void 0)return{...r,path:s,message:r.message};let a="";const l=i.filter(c=>!!c).slice().reverse();for(const c of l)a=c(o,{data:e,defaultError:a}).message;return{...r,path:s,message:a}};function be(t,e){const n=XY(),i=JY({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===BS?void 0:BS].filter(r=>!!r)});t.common.issues.push(i)}class fr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const i=[];for(const r of n){if(r.status==="aborted")return He;r.status==="dirty"&&e.dirty(),i.push(r.value)}return{status:e.value,value:i}}static async mergeObjectAsync(e,n){const i=[];for(const r of n){const s=await r.key,o=await r.value;i.push({key:s,value:o})}return fr.mergeObjectSync(e,i)}static mergeObjectSync(e,n){const i={};for(const r of n){const{key:s,value:o}=r;if(s.status==="aborted"||o.status==="aborted")return He;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||r.alwaysSet)&&(i[s.value]=o.value)}return{status:e.value,value:i}}}const He=Object.freeze({status:"aborted"}),Bf=t=>({status:"dirty",value:t}),Vr=t=>({status:"valid",value:t}),r3=t=>t.status==="aborted",s3=t=>t.status==="dirty",yd=t=>t.status==="valid",lv=t=>typeof Promise<"u"&&t instanceof Promise;var Re;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Re||(Re={}));class rl{constructor(e,n,i,r){this._cachedPath=[],this.parent=e,this.data=n,this._path=i,this._key=r}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const o3=(t,e)=>{if(yd(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new zo(t.common.issues);return this._error=n,this._error}}};function tt(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:i,description:r}=t;if(e&&(n||i))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(o,a)=>{const{message:l}=t;return o.code==="invalid_enum_value"?{message:l??a.defaultError}:typeof a.data>"u"?{message:l??i??a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:l??n??a.defaultError}},description:r}}class ft{get description(){return this._def.description}_getType(e){return ua(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:ua(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new fr,ctx:{common:e.parent.common,data:e.data,parsedType:ua(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(lv(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const i=this.safeParse(e,n);if(i.success)return i.data;throw i.error}safeParse(e,n){const i={common:{issues:[],async:(n==null?void 0:n.async)??!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ua(e)},r=this._parseSync({data:e,path:i.path,parent:i});return o3(i,r)}"~validate"(e){var i,r;const n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ua(e)};if(!this["~standard"].async)try{const s=this._parseSync({data:e,path:[],parent:n});return yd(s)?{value:s.value}:{issues:n.common.issues}}catch(s){(r=(i=s==null?void 0:s.message)==null?void 0:i.toLowerCase())!=null&&r.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(s=>yd(s)?{value:s.value}:{issues:n.common.issues})}async parseAsync(e,n){const i=await this.safeParseAsync(e,n);if(i.success)return i.data;throw i.error}async safeParseAsync(e,n){const i={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ua(e)},r=this._parse({data:e,path:i.path,parent:i}),s=await(lv(r)?r:Promise.resolve(r));return o3(i,s)}refine(e,n){const i=r=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(r):n;return this._refinement((r,s)=>{const o=e(r),a=()=>s.addIssue({code:ce.custom,...i(r)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((i,r)=>e(i)?!0:(r.addIssue(typeof n=="function"?n(i,r):n),!1))}_refinement(e){return new xd({schema:this,typeName:We.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Ka.create(this,this._def)}nullable(){return Sd.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Js.create(this)}promise(){return fv.create(this,this._def)}or(e){return uv.create([this,e],this._def)}and(e){return dv.create(this,e,this._def)}transform(e){return new xd({...tt(this._def),schema:this,typeName:We.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new VS({...tt(this._def),innerType:this,defaultValue:n,typeName:We.ZodDefault})}brand(){return new wX({typeName:We.ZodBranded,type:this,...tt(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new HS({...tt(this._def),innerType:this,catchValue:n,typeName:We.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return q_.create(this,e)}readonly(){return WS.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const ZY=/^c[^\s-]{8,}$/i,QY=/^[0-9a-z]+$/,eX=/^[0-9A-HJKMNP-TV-Z]{26}$/i,tX=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,nX=/^[a-z0-9_-]{21}$/i,iX=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,rX=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,sX=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,oX="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Dw;const aX=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,lX=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,cX=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,uX=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,dX=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,fX=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,_L="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",hX=new RegExp(`^${_L}$`);function CL(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const n=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${n}`}function pX(t){return new RegExp(`^${CL(t)}$`)}function mX(t){let e=`${_L}T${CL(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function gX(t,e){return!!((e==="v4"||!e)&&aX.test(t)||(e==="v6"||!e)&&cX.test(t))}function vX(t,e){if(!iX.test(t))return!1;try{const[n]=t.split(".");if(!n)return!1;const i=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),r=JSON.parse(atob(i));return!(typeof r!="object"||r===null||"typ"in r&&(r==null?void 0:r.typ)!=="JWT"||!r.alg||e&&r.alg!==e)}catch{return!1}}function yX(t,e){return!!((e==="v4"||!e)&&lX.test(t)||(e==="v6"||!e)&&uX.test(t))}class sc extends ft{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Me.string){const s=this._getOrReturnCtx(e);return be(s,{code:ce.invalid_type,expected:Me.string,received:s.parsedType}),He}const i=new fr;let r;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(r=this._getOrReturnCtx(e,r),be(r,{code:ce.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="max")e.data.length>s.value&&(r=this._getOrReturnCtx(e,r),be(r,{code:ce.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(r=this._getOrReturnCtx(e,r),o?be(r,{code:ce.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&be(r,{code:ce.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),i.dirty())}else if(s.kind==="email")sX.test(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{validation:"email",code:ce.invalid_string,message:s.message}),i.dirty());else if(s.kind==="emoji")Dw||(Dw=new RegExp(oX,"u")),Dw.test(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{validation:"emoji",code:ce.invalid_string,message:s.message}),i.dirty());else if(s.kind==="uuid")tX.test(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{validation:"uuid",code:ce.invalid_string,message:s.message}),i.dirty());else if(s.kind==="nanoid")nX.test(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{validation:"nanoid",code:ce.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid")ZY.test(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{validation:"cuid",code:ce.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid2")QY.test(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{validation:"cuid2",code:ce.invalid_string,message:s.message}),i.dirty());else if(s.kind==="ulid")eX.test(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{validation:"ulid",code:ce.invalid_string,message:s.message}),i.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),be(r,{validation:"url",code:ce.invalid_string,message:s.message}),i.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{validation:"regex",code:ce.invalid_string,message:s.message}),i.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(r=this._getOrReturnCtx(e,r),be(r,{code:ce.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),i.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(r=this._getOrReturnCtx(e,r),be(r,{code:ce.invalid_string,validation:{startsWith:s.value},message:s.message}),i.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(r=this._getOrReturnCtx(e,r),be(r,{code:ce.invalid_string,validation:{endsWith:s.value},message:s.message}),i.dirty()):s.kind==="datetime"?mX(s).test(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{code:ce.invalid_string,validation:"datetime",message:s.message}),i.dirty()):s.kind==="date"?hX.test(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{code:ce.invalid_string,validation:"date",message:s.message}),i.dirty()):s.kind==="time"?pX(s).test(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{code:ce.invalid_string,validation:"time",message:s.message}),i.dirty()):s.kind==="duration"?rX.test(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{validation:"duration",code:ce.invalid_string,message:s.message}),i.dirty()):s.kind==="ip"?gX(e.data,s.version)||(r=this._getOrReturnCtx(e,r),be(r,{validation:"ip",code:ce.invalid_string,message:s.message}),i.dirty()):s.kind==="jwt"?vX(e.data,s.alg)||(r=this._getOrReturnCtx(e,r),be(r,{validation:"jwt",code:ce.invalid_string,message:s.message}),i.dirty()):s.kind==="cidr"?yX(e.data,s.version)||(r=this._getOrReturnCtx(e,r),be(r,{validation:"cidr",code:ce.invalid_string,message:s.message}),i.dirty()):s.kind==="base64"?dX.test(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{validation:"base64",code:ce.invalid_string,message:s.message}),i.dirty()):s.kind==="base64url"?fX.test(e.data)||(r=this._getOrReturnCtx(e,r),be(r,{validation:"base64url",code:ce.invalid_string,message:s.message}),i.dirty()):pt.assertNever(s);return{status:i.value,value:e.data}}_regex(e,n,i){return this.refinement(r=>e.test(r),{validation:n,code:ce.invalid_string,...Re.errToObj(i)})}_addCheck(e){return new sc({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Re.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Re.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Re.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Re.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Re.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Re.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Re.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Re.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Re.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Re.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Re.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Re.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Re.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(e==null?void 0:e.offset)??!1,local:(e==null?void 0:e.local)??!1,...Re.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Re.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Re.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Re.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Re.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Re.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Re.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Re.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Re.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Re.errToObj(n)})}nonempty(e){return this.min(1,Re.errToObj(e))}trim(){return new sc({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new sc({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new sc({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}sc.create=t=>new sc({checks:[],typeName:We.ZodString,coerce:(t==null?void 0:t.coerce)??!1,...tt(t)});function bX(t,e){const n=(t.toString().split(".")[1]||"").length,i=(e.toString().split(".")[1]||"").length,r=n>i?n:i,s=Number.parseInt(t.toFixed(r).replace(".","")),o=Number.parseInt(e.toFixed(r).replace(".",""));return s%o/10**r}class bd extends ft{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Me.number){const s=this._getOrReturnCtx(e);return be(s,{code:ce.invalid_type,expected:Me.number,received:s.parsedType}),He}let i;const r=new fr;for(const s of this._def.checks)s.kind==="int"?pt.isInteger(e.data)||(i=this._getOrReturnCtx(e,i),be(i,{code:ce.invalid_type,expected:"integer",received:"float",message:s.message}),r.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(i=this._getOrReturnCtx(e,i),be(i,{code:ce.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(i=this._getOrReturnCtx(e,i),be(i,{code:ce.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="multipleOf"?bX(e.data,s.value)!==0&&(i=this._getOrReturnCtx(e,i),be(i,{code:ce.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(i=this._getOrReturnCtx(e,i),be(i,{code:ce.not_finite,message:s.message}),r.dirty()):pt.assertNever(s);return{status:r.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Re.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Re.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Re.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Re.toString(n))}setLimit(e,n,i,r){return new bd({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:Re.toString(r)}]})}_addCheck(e){return new bd({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Re.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Re.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Re.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Re.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Re.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Re.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Re.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Re.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Re.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&pt.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const i of this._def.checks){if(i.kind==="finite"||i.kind==="int"||i.kind==="multipleOf")return!0;i.kind==="min"?(n===null||i.value>n)&&(n=i.value):i.kind==="max"&&(e===null||i.value<e)&&(e=i.value)}return Number.isFinite(n)&&Number.isFinite(e)}}bd.create=t=>new bd({checks:[],typeName:We.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...tt(t)});class qh extends ft{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Me.bigint)return this._getInvalidInput(e);let i;const r=new fr;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(i=this._getOrReturnCtx(e,i),be(i,{code:ce.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(i=this._getOrReturnCtx(e,i),be(i,{code:ce.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(i=this._getOrReturnCtx(e,i),be(i,{code:ce.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):pt.assertNever(s);return{status:r.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return be(n,{code:ce.invalid_type,expected:Me.bigint,received:n.parsedType}),He}gte(e,n){return this.setLimit("min",e,!0,Re.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Re.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Re.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Re.toString(n))}setLimit(e,n,i,r){return new qh({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:Re.toString(r)}]})}_addCheck(e){return new qh({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Re.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Re.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Re.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Re.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Re.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}qh.create=t=>new qh({checks:[],typeName:We.ZodBigInt,coerce:(t==null?void 0:t.coerce)??!1,...tt(t)});class zS extends ft{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Me.boolean){const i=this._getOrReturnCtx(e);return be(i,{code:ce.invalid_type,expected:Me.boolean,received:i.parsedType}),He}return Vr(e.data)}}zS.create=t=>new zS({typeName:We.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...tt(t)});class cv extends ft{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Me.date){const s=this._getOrReturnCtx(e);return be(s,{code:ce.invalid_type,expected:Me.date,received:s.parsedType}),He}if(Number.isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return be(s,{code:ce.invalid_date}),He}const i=new fr;let r;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(r=this._getOrReturnCtx(e,r),be(r,{code:ce.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),i.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(r=this._getOrReturnCtx(e,r),be(r,{code:ce.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),i.dirty()):pt.assertNever(s);return{status:i.value,value:new Date(e.data.getTime())}}_addCheck(e){return new cv({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Re.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Re.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}cv.create=t=>new cv({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:We.ZodDate,...tt(t)});class a3 extends ft{_parse(e){if(this._getType(e)!==Me.symbol){const i=this._getOrReturnCtx(e);return be(i,{code:ce.invalid_type,expected:Me.symbol,received:i.parsedType}),He}return Vr(e.data)}}a3.create=t=>new a3({typeName:We.ZodSymbol,...tt(t)});class l3 extends ft{_parse(e){if(this._getType(e)!==Me.undefined){const i=this._getOrReturnCtx(e);return be(i,{code:ce.invalid_type,expected:Me.undefined,received:i.parsedType}),He}return Vr(e.data)}}l3.create=t=>new l3({typeName:We.ZodUndefined,...tt(t)});class c3 extends ft{_parse(e){if(this._getType(e)!==Me.null){const i=this._getOrReturnCtx(e);return be(i,{code:ce.invalid_type,expected:Me.null,received:i.parsedType}),He}return Vr(e.data)}}c3.create=t=>new c3({typeName:We.ZodNull,...tt(t)});class u3 extends ft{constructor(){super(...arguments),this._any=!0}_parse(e){return Vr(e.data)}}u3.create=t=>new u3({typeName:We.ZodAny,...tt(t)});class d3 extends ft{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Vr(e.data)}}d3.create=t=>new d3({typeName:We.ZodUnknown,...tt(t)});class sl extends ft{_parse(e){const n=this._getOrReturnCtx(e);return be(n,{code:ce.invalid_type,expected:Me.never,received:n.parsedType}),He}}sl.create=t=>new sl({typeName:We.ZodNever,...tt(t)});class f3 extends ft{_parse(e){if(this._getType(e)!==Me.undefined){const i=this._getOrReturnCtx(e);return be(i,{code:ce.invalid_type,expected:Me.void,received:i.parsedType}),He}return Vr(e.data)}}f3.create=t=>new f3({typeName:We.ZodVoid,...tt(t)});class Js extends ft{_parse(e){const{ctx:n,status:i}=this._processInputParams(e),r=this._def;if(n.parsedType!==Me.array)return be(n,{code:ce.invalid_type,expected:Me.array,received:n.parsedType}),He;if(r.exactLength!==null){const o=n.data.length>r.exactLength.value,a=n.data.length<r.exactLength.value;(o||a)&&(be(n,{code:o?ce.too_big:ce.too_small,minimum:a?r.exactLength.value:void 0,maximum:o?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),i.dirty())}if(r.minLength!==null&&n.data.length<r.minLength.value&&(be(n,{code:ce.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),i.dirty()),r.maxLength!==null&&n.data.length>r.maxLength.value&&(be(n,{code:ce.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),i.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>r.type._parseAsync(new rl(n,o,n.path,a)))).then(o=>fr.mergeArray(i,o));const s=[...n.data].map((o,a)=>r.type._parseSync(new rl(n,o,n.path,a)));return fr.mergeArray(i,s)}get element(){return this._def.type}min(e,n){return new Js({...this._def,minLength:{value:e,message:Re.toString(n)}})}max(e,n){return new Js({...this._def,maxLength:{value:e,message:Re.toString(n)}})}length(e,n){return new Js({...this._def,exactLength:{value:e,message:Re.toString(n)}})}nonempty(e){return this.min(1,e)}}Js.create=(t,e)=>new Js({type:t,minLength:null,maxLength:null,exactLength:null,typeName:We.ZodArray,...tt(e)});function su(t){if(t instanceof dn){const e={};for(const n in t.shape){const i=t.shape[n];e[n]=Ka.create(su(i))}return new dn({...t._def,shape:()=>e})}else return t instanceof Js?new Js({...t._def,type:su(t.element)}):t instanceof Ka?Ka.create(su(t.unwrap())):t instanceof Sd?Sd.create(su(t.unwrap())):t instanceof Cc?Cc.create(t.items.map(e=>su(e))):t}class dn extends ft{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=pt.objectKeys(e);return this._cached={shape:e,keys:n},this._cached}_parse(e){if(this._getType(e)!==Me.object){const c=this._getOrReturnCtx(e);return be(c,{code:ce.invalid_type,expected:Me.object,received:c.parsedType}),He}const{status:i,ctx:r}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof sl&&this._def.unknownKeys==="strip"))for(const c in r.data)o.includes(c)||a.push(c);const l=[];for(const c of o){const u=s[c],d=r.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new rl(r,d,r.path,c)),alwaysSet:c in r.data})}if(this._def.catchall instanceof sl){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of a)l.push({key:{status:"valid",value:u},value:{status:"valid",value:r.data[u]}});else if(c==="strict")a.length>0&&(be(r,{code:ce.unrecognized_keys,keys:a}),i.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of a){const d=r.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new rl(r,d,r.path,u)),alwaysSet:u in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const d=await u.key,f=await u.value;c.push({key:d,value:f,alwaysSet:u.alwaysSet})}return c}).then(c=>fr.mergeObjectSync(i,c)):fr.mergeObjectSync(i,l)}get shape(){return this._def.shape()}strict(e){return Re.errToObj,new dn({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,i)=>{var s,o;const r=((o=(s=this._def).errorMap)==null?void 0:o.call(s,n,i).message)??i.defaultError;return n.code==="unrecognized_keys"?{message:Re.errToObj(e).message??r}:{message:r}}}:{}})}strip(){return new dn({...this._def,unknownKeys:"strip"})}passthrough(){return new dn({...this._def,unknownKeys:"passthrough"})}extend(e){return new dn({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new dn({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:We.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new dn({...this._def,catchall:e})}pick(e){const n={};for(const i of pt.objectKeys(e))e[i]&&this.shape[i]&&(n[i]=this.shape[i]);return new dn({...this._def,shape:()=>n})}omit(e){const n={};for(const i of pt.objectKeys(this.shape))e[i]||(n[i]=this.shape[i]);return new dn({...this._def,shape:()=>n})}deepPartial(){return su(this)}partial(e){const n={};for(const i of pt.objectKeys(this.shape)){const r=this.shape[i];e&&!e[i]?n[i]=r:n[i]=r.optional()}return new dn({...this._def,shape:()=>n})}required(e){const n={};for(const i of pt.objectKeys(this.shape))if(e&&!e[i])n[i]=this.shape[i];else{let s=this.shape[i];for(;s instanceof Ka;)s=s._def.innerType;n[i]=s}return new dn({...this._def,shape:()=>n})}keyof(){return EL(pt.objectKeys(this.shape))}}dn.create=(t,e)=>new dn({shape:()=>t,unknownKeys:"strip",catchall:sl.create(),typeName:We.ZodObject,...tt(e)});dn.strictCreate=(t,e)=>new dn({shape:()=>t,unknownKeys:"strict",catchall:sl.create(),typeName:We.ZodObject,...tt(e)});dn.lazycreate=(t,e)=>new dn({shape:t,unknownKeys:"strip",catchall:sl.create(),typeName:We.ZodObject,...tt(e)});class uv extends ft{_parse(e){const{ctx:n}=this._processInputParams(e),i=this._def.options;function r(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new zo(a.ctx.common.issues));return be(n,{code:ce.invalid_union,unionErrors:o}),He}if(n.common.async)return Promise.all(i.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(r);{let s;const o=[];for(const l of i){const c={...n,common:{...n.common,issues:[]},parent:null},u=l._parseSync({data:n.data,path:n.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!s&&(s={result:u,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(l=>new zo(l));return be(n,{code:ce.invalid_union,unionErrors:a}),He}}get options(){return this._def.options}}uv.create=(t,e)=>new uv({options:t,typeName:We.ZodUnion,...tt(e)});function US(t,e){const n=ua(t),i=ua(e);if(t===e)return{valid:!0,data:t};if(n===Me.object&&i===Me.object){const r=pt.objectKeys(e),s=pt.objectKeys(t).filter(a=>r.indexOf(a)!==-1),o={...t,...e};for(const a of s){const l=US(t[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(n===Me.array&&i===Me.array){if(t.length!==e.length)return{valid:!1};const r=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],l=US(o,a);if(!l.valid)return{valid:!1};r.push(l.data)}return{valid:!0,data:r}}else return n===Me.date&&i===Me.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class dv extends ft{_parse(e){const{status:n,ctx:i}=this._processInputParams(e),r=(s,o)=>{if(r3(s)||r3(o))return He;const a=US(s.value,o.value);return a.valid?((s3(s)||s3(o))&&n.dirty(),{status:n.value,value:a.data}):(be(i,{code:ce.invalid_intersection_types}),He)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([s,o])=>r(s,o)):r(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}dv.create=(t,e,n)=>new dv({left:t,right:e,typeName:We.ZodIntersection,...tt(n)});class Cc extends ft{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==Me.array)return be(i,{code:ce.invalid_type,expected:Me.array,received:i.parsedType}),He;if(i.data.length<this._def.items.length)return be(i,{code:ce.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),He;!this._def.rest&&i.data.length>this._def.items.length&&(be(i,{code:ce.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...i.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new rl(i,o,i.path,a)):null}).filter(o=>!!o);return i.common.async?Promise.all(s).then(o=>fr.mergeArray(n,o)):fr.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new Cc({...this._def,rest:e})}}Cc.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Cc({items:t,typeName:We.ZodTuple,rest:null,...tt(e)})};class h3 extends ft{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==Me.map)return be(i,{code:ce.invalid_type,expected:Me.map,received:i.parsedType}),He;const r=this._def.keyType,s=this._def.valueType,o=[...i.data.entries()].map(([a,l],c)=>({key:r._parse(new rl(i,a,i.path,[c,"key"])),value:s._parse(new rl(i,l,i.path,[c,"value"]))}));if(i.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return He;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of o){const c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return He;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}}}}h3.create=(t,e,n)=>new h3({valueType:e,keyType:t,typeName:We.ZodMap,...tt(n)});class Yh extends ft{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==Me.set)return be(i,{code:ce.invalid_type,expected:Me.set,received:i.parsedType}),He;const r=this._def;r.minSize!==null&&i.data.size<r.minSize.value&&(be(i,{code:ce.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),n.dirty()),r.maxSize!==null&&i.data.size>r.maxSize.value&&(be(i,{code:ce.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),n.dirty());const s=this._def.valueType;function o(l){const c=new Set;for(const u of l){if(u.status==="aborted")return He;u.status==="dirty"&&n.dirty(),c.add(u.value)}return{status:n.value,value:c}}const a=[...i.data.values()].map((l,c)=>s._parse(new rl(i,l,i.path,c)));return i.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,n){return new Yh({...this._def,minSize:{value:e,message:Re.toString(n)}})}max(e,n){return new Yh({...this._def,maxSize:{value:e,message:Re.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Yh.create=(t,e)=>new Yh({valueType:t,minSize:null,maxSize:null,typeName:We.ZodSet,...tt(e)});class p3 extends ft{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}p3.create=(t,e)=>new p3({getter:t,typeName:We.ZodLazy,...tt(e)});class m3 extends ft{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return be(n,{received:n.data,code:ce.invalid_literal,expected:this._def.value}),He}return{status:"valid",value:e.data}}get value(){return this._def.value}}m3.create=(t,e)=>new m3({value:t,typeName:We.ZodLiteral,...tt(e)});function EL(t,e){return new wd({values:t,typeName:We.ZodEnum,...tt(e)})}class wd extends ft{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),i=this._def.values;return be(n,{expected:pt.joinValues(i),received:n.parsedType,code:ce.invalid_type}),He}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const n=this._getOrReturnCtx(e),i=this._def.values;return be(n,{received:n.data,code:ce.invalid_enum_value,options:i}),He}return Vr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return wd.create(e,{...this._def,...n})}exclude(e,n=this._def){return wd.create(this.options.filter(i=>!e.includes(i)),{...this._def,...n})}}wd.create=EL;class g3 extends ft{_parse(e){const n=pt.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(e);if(i.parsedType!==Me.string&&i.parsedType!==Me.number){const r=pt.objectValues(n);return be(i,{expected:pt.joinValues(r),received:i.parsedType,code:ce.invalid_type}),He}if(this._cache||(this._cache=new Set(pt.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const r=pt.objectValues(n);return be(i,{received:i.data,code:ce.invalid_enum_value,options:r}),He}return Vr(e.data)}get enum(){return this._def.values}}g3.create=(t,e)=>new g3({values:t,typeName:We.ZodNativeEnum,...tt(e)});class fv extends ft{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Me.promise&&n.common.async===!1)return be(n,{code:ce.invalid_type,expected:Me.promise,received:n.parsedType}),He;const i=n.parsedType===Me.promise?n.data:Promise.resolve(n.data);return Vr(i.then(r=>this._def.type.parseAsync(r,{path:n.path,errorMap:n.common.contextualErrorMap})))}}fv.create=(t,e)=>new fv({type:t,typeName:We.ZodPromise,...tt(e)});class xd extends ft{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===We.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:i}=this._processInputParams(e),r=this._def.effect||null,s={addIssue:o=>{be(i,o),o.fatal?n.abort():n.dirty()},get path(){return i.path}};if(s.addIssue=s.addIssue.bind(s),r.type==="preprocess"){const o=r.transform(i.data,s);if(i.common.async)return Promise.resolve(o).then(async a=>{if(n.value==="aborted")return He;const l=await this._def.schema._parseAsync({data:a,path:i.path,parent:i});return l.status==="aborted"?He:l.status==="dirty"||n.value==="dirty"?Bf(l.value):l});{if(n.value==="aborted")return He;const a=this._def.schema._parseSync({data:o,path:i.path,parent:i});return a.status==="aborted"?He:a.status==="dirty"||n.value==="dirty"?Bf(a.value):a}}if(r.type==="refinement"){const o=a=>{const l=r.refinement(a,s);if(i.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(i.common.async===!1){const a=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return a.status==="aborted"?He:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(a=>a.status==="aborted"?He:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(r.type==="transform")if(i.common.async===!1){const o=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!yd(o))return He;const a=r.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(o=>yd(o)?Promise.resolve(r.transform(o.value,s)).then(a=>({status:n.value,value:a})):He);pt.assertNever(r)}}xd.create=(t,e,n)=>new xd({schema:t,typeName:We.ZodEffects,effect:e,...tt(n)});xd.createWithPreprocess=(t,e,n)=>new xd({schema:e,effect:{type:"preprocess",transform:t},typeName:We.ZodEffects,...tt(n)});class Ka extends ft{_parse(e){return this._getType(e)===Me.undefined?Vr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ka.create=(t,e)=>new Ka({innerType:t,typeName:We.ZodOptional,...tt(e)});class Sd extends ft{_parse(e){return this._getType(e)===Me.null?Vr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Sd.create=(t,e)=>new Sd({innerType:t,typeName:We.ZodNullable,...tt(e)});class VS extends ft{_parse(e){const{ctx:n}=this._processInputParams(e);let i=n.data;return n.parsedType===Me.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}VS.create=(t,e)=>new VS({innerType:t,typeName:We.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...tt(e)});class HS extends ft{_parse(e){const{ctx:n}=this._processInputParams(e),i={...n,common:{...n.common,issues:[]}},r=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return lv(r)?r.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new zo(i.common.issues)},input:i.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new zo(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}HS.create=(t,e)=>new HS({innerType:t,typeName:We.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...tt(e)});class v3 extends ft{_parse(e){if(this._getType(e)!==Me.nan){const i=this._getOrReturnCtx(e);return be(i,{code:ce.invalid_type,expected:Me.nan,received:i.parsedType}),He}return{status:"valid",value:e.data}}}v3.create=t=>new v3({typeName:We.ZodNaN,...tt(t)});class wX extends ft{_parse(e){const{ctx:n}=this._processInputParams(e),i=n.data;return this._def.type._parse({data:i,path:n.path,parent:n})}unwrap(){return this._def.type}}class q_ extends ft{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return s.status==="aborted"?He:s.status==="dirty"?(n.dirty(),Bf(s.value)):this._def.out._parseAsync({data:s.value,path:i.path,parent:i})})();{const r=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return r.status==="aborted"?He:r.status==="dirty"?(n.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:i.path,parent:i})}}static create(e,n){return new q_({in:e,out:n,typeName:We.ZodPipeline})}}class WS extends ft{_parse(e){const n=this._def.innerType._parse(e),i=r=>(yd(r)&&(r.value=Object.freeze(r.value)),r);return lv(n)?n.then(r=>i(r)):i(n)}unwrap(){return this._def.innerType}}WS.create=(t,e)=>new WS({innerType:t,typeName:We.ZodReadonly,...tt(e)});var We;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(We||(We={}));const Ll=bd.create,Kc=zS.create;sl.create;Js.create;const y3=dn.create;uv.create;dv.create;Cc.create;const cf=wd.create;fv.create;Ka.create;Sd.create;const xX=["randomize","clean","unchanged"],SX=["switches-and-leds","printer","null"],kX=["printer","null"],GS=y3({showInstructionCycle:Kc().catch(!1),showStatsCPU:Kc().catch(!1),language:cf(xL).catch(_X),editorFontSize:Ll().int().min(8).max(64).catch(14),dataOnLoad:cf(xX).catch("clean"),devices:y3({keyboardAndScreen:Kc(),pic:Kc(),pio:cf(["switches-and-leds","printer"]).nullable(),handshake:cf(["printer"]).nullable()}).catch({keyboardAndScreen:!1,pic:!1,pio:null,handshake:null}),animations:Kc().catch(!0),executionUnit:Ll().min(1).max(500).catch(150),clockSpeed:Ll().min(100).max(3e3).catch(1e3),printerSpeed:Ll().min(500).max(2e4).catch(5e3),flagsVisibility:cf(["CF_ZF","SF_OF_CF_ZF"]).catch("CF_ZF"),filterBightness:Ll().min(0).catch(1),filterContrast:Ll().min(0).catch(1),filterInvert:Kc().catch(!1),filterSaturation:Ll().min(0).catch(1)}),ou=GS.parse({});function _X(){const t=navigator.language.toLowerCase();for(const e of xL)if(t.startsWith(e))return e;return"en"}const Hr=kL("vonsim-settings",ou,{getItem(t,e){try{const n=localStorage.getItem(t);return GS.parse(JSON.parse(n??""))}catch{return e}},setItem(t,e){localStorage.setItem(t,JSON.stringify(e))},removeItem(t){localStorage.removeItem(t)},subscribe(t,e,n){const i=r=>{if(r.storageArea===localStorage&&r.key===t){let s;try{s=GS.parse(JSON.parse(r.newValue??""))}catch{s=n}e(s)}};return window==null||window.addEventListener("storage",i),()=>window==null?void 0:window.removeEventListener("storage",i)}},{getOnInit:!0}),yn=()=>z.get(Hr),Fy=()=>Ip(Hr);de(t=>t(Hr).showInstructionCycle);de(t=>t(Hr).showStatsCPU);const CX=de(t=>t(Hr).language),Y_=()=>at(CX);de(t=>t(Hr).flagsVisibility);const EX=de(t=>t(Hr).editorFontSize),AX=()=>at(EX);de(t=>t(Hr).dataOnLoad);const NX=de(t=>t(Hr).devices),AL=()=>at(NX);de(t=>{const e=t(Hr);return{executionUnit:e.executionUnit,clock:e.clockSpeed,printer:e.printerSpeed}});const PX=de(t=>{const e=t(Hr);return[`brightness(${e.filterBightness})`,`contrast(${e.filterContrast})`,`invert(${e.filterInvert?1:0})`,`saturate(${e.filterSaturation})`].filter(Boolean).join(" ")}),MX=()=>at(PX);function Xh(t){const e=t.charCodeAt(0);return F.fitsUnsigned(e,8)?e:null}function X_(t){return F.fitsUnsigned(t,8)?String.fromCharCode(t):null}function NL(t){return TX.at(t)??null}const TX=["NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","HT","LF","VT","FF","CR","SO","SI","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US","SPACE","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","<","=",">","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","\\","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","DEL","XXX","XXX","BPH","NBH","IND","NEL","SSA","ESA","HTS","HTJ","VTS","PLD","PLU","RI","SS2","SS3","DCS","PU1","PU2","STS","CCH","MW","SPA","EPA","SOS","XXX","SCI","CSI","ST","OSC","PM","APC","NBSP","¡","¢","£","¤","¥","¦","§","¨","©","ª","«","¬","SHY","®","¯","°","±","²","³","´","µ","¶","·","¸","¹","º","»","¼","½","¾","¿","À","Á","Â","Ã","Ä","Å","Æ","Ç","È","É","Ê","Ë","Ì","Í","Î","Ï","Ð","Ñ","Ò","Ó","Ô","Õ","Ö","×","Ø","Ù","Ú","Û","Ü","Ý","Þ","ß","à","á","â","ã","ä","å","æ","ç","è","é","ê","ë","ì","í","î","ï","ð","ñ","ò","ó","ô","õ","ö","÷","ø","ù","ú","û","ü","ý","þ","ÿ"];var Bt,Wt;const lt=class lt{constructor(e,n){Ie(this,Bt);Ie(this,Wt);Q(this,Bt,e|0),Q(this,Wt,n)}get size(){return A(this,Wt)}is8bits(){return A(this,Wt)===8}is16bits(){return A(this,Wt)===16}get unsigned(){return A(this,Bt)}get signed(){return A(this,Bt)<=lt.maxSignedValue(A(this,Wt))?A(this,Bt):A(this,Bt)-(lt.maxValue(A(this,Wt))+1)}get low(){return this.is8bits()?this:lt.fromUnsigned(A(this,Bt)&lt.maxValue(8),8)}get high(){return this.is8bits()?new lt(0,8):lt.fromUnsigned(A(this,Bt)>>8&lt.maxValue(8),8)}withLow(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return lt.fromUnsigned(A(this,Bt)&~lt.maxValue(8)|e.unsigned,A(this,Wt))}withHigh(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return lt.fromUnsigned(A(this,Bt)&lt.maxValue(8)|e.unsigned<<8,16)}bit(e){if(!Number.isSafeInteger(e)||e<0||e>=A(this,Wt))throw new RangeError(`Index ${e} out of bounds for byte of size ${A(this,Wt)}`);return(A(this,Bt)&1<<e)!==0}withBit(e,n){if(!Number.isSafeInteger(e)||e<0||e>=A(this,Wt))throw new RangeError(`Index ${e} out of bounds for byte of size ${A(this,Wt)}`);return n?lt.fromUnsigned(A(this,Bt)|1<<e,A(this,Wt)):lt.fromUnsigned(A(this,Bt)&~(1<<e),A(this,Wt))}add(e){return e=Number(e),lt.fromUnsigned(A(this,Bt)+e,A(this,Wt))}isZero(){return this.unsigned===0}equals(e){return typeof e=="number"?e<0?this.signed===e:this.unsigned===e:A(this,Bt)===A(e,Bt)}toUint8Array(){return this.is8bits()?new Uint8Array([this.unsigned]):new Uint8Array([this.low.unsigned,this.high.unsigned])}toArray(){const e=new Array(A(this,Wt));for(let n=0;n<A(this,Wt);n++)e[n]=this.bit(n);return e}toString(e="int"){switch(e){case"hex":return A(this,Bt).toString(16).padStart(A(this,Wt)/4,"0").toUpperCase();case"bin":return A(this,Bt).toString(2).padStart(A(this,Wt),"0");case"int":return this.signed.toString(10);case"uint":return this.unsigned.toString(10);case"ascii":return A(this,Wt)===8?X_(A(this,Bt))??"---":this.low.toString("ascii")+this.high.toString("ascii");case"safe-ascii":return A(this,Wt)===8?NL(A(this,Bt))??"---":this.low.toString("safe-ascii")+" "+this.high.toString("safe-ascii")}}toJSON(){return A(this,Bt)}valueOf(){return A(this,Bt)}static minValue(){return 0}static maxValue(e){return 2**e-1}static minSignedValue(e){return-(2**(e-1))}static maxSignedValue(e){return 2**(e-1)-1}static fits(e,n){return Number.isSafeInteger(e)&&e>=lt.minSignedValue(n)&&e<=lt.maxValue(n)}static fitsUnsigned(e,n){return Number.isSafeInteger(e)&&e>=lt.minValue()&&e<=lt.maxValue(n)}static fitsSigned(e,n){return Number.isSafeInteger(e)&&e>=lt.minSignedValue(n)&&e<=lt.maxSignedValue(n)}static fromUnsigned(e,n){if(!lt.fitsUnsigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return new lt(e,n)}static fromSigned(e,n){if(!lt.fitsSigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return e<0?new lt(e+lt.maxValue(n)+1,n):new lt(e,n)}static fromNumber(e,n){return e<0?lt.fromSigned(e,n):lt.fromUnsigned(e,n)}static fromChar(e){const n=Xh(e)??-1;return lt.fromUnsigned(n,8)}static random(e){const n=Math.round(Math.random()*lt.maxValue(e));return new lt(n,e)}static zero(e){return new lt(0,e)}};Bt=new WeakMap,Wt=new WeakMap;let F=lt;var go;const pa=class pa{constructor(e){Ie(this,go);Q(this,go,e)}get value(){return A(this,go).unsigned}get byte(){return A(this,go)}toString(e=!1){let n=A(this,go).toString("hex");return e&&(n+="h"),n.slice(-2)}toJSON(){return A(this,go).toJSON()}valueOf(){return A(this,go).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=pa.MIN_ADDRESS&&e<=pa.MAX_ADDRESS}static from(e){if(e=Number(e),!pa.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=F.fromUnsigned(e,16);return new pa(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"????";let i=e.toString(16).padStart(4,"0").toUpperCase();return n&&(i+="h"),i.slice(-3)}};go=new WeakMap,fe(pa,"MIN_ADDRESS",0),fe(pa,"MAX_ADDRESS",255);let Se=pa;var vo;const ma=class ma{constructor(e){Ie(this,vo);Q(this,vo,e)}get value(){return A(this,vo).unsigned}get byte(){return A(this,vo)}toString(e=!0){let n=A(this,vo).toString("hex");return e&&(n+="h"),n}toJSON(){return A(this,vo).toJSON()}valueOf(){return A(this,vo).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=ma.MIN_ADDRESS&&e<=ma.MAX_ADDRESS}static from(e){if(e=Number(e),!ma.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=F.fromUnsigned(e,8);return new ma(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"??";let i=e.toString(16).padStart(2,"0").toUpperCase();return n&&(i+="h"),i}};vo=new WeakMap,fe(ma,"MIN_ADDRESS",0),fe(ma,"MAX_ADDRESS",127);let hr=ma;function b3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function w3(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?b3(Object(n),!0).forEach(function(i){RX(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b3(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function RX(t,e,n){return e=OX(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function OX(t){var e=IX(t,"string");return typeof e=="symbol"?e:String(e)}function IX(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const hv=PL({});function PL(t){return e.withOptions=n=>PL(w3(w3({},t),n)),e;function e(n,...i){const r=typeof n=="string"?[n]:n.raw,{escapeSpecialCharacters:s=Array.isArray(n),trimWhitespace:o=!0}=t;let a="";for(let u=0;u<r.length;u++){let d=r[u];s&&(d=d.replace(/\\\n[ \t]*/g,"").replace(/\\`/g,"`").replace(/\\\$/g,"$").replace(/\\\{/g,"{")),a+=d,u<i.length&&(a+=i[u])}const l=a.split(`
`);let c=null;for(const u of l){const d=u.match(/^(\s+)\S+/);if(d){const f=d[1].length;c?c=Math.min(c,f):c=f}}if(c!==null){const u=c;a=l.map(d=>d[0]===" "||d[0]==="	"?d.slice(u):d).join(`
`)}return o&&(a=a.trim()),s&&(a=a.replace(/\\n/g,`
`)),a}}const DX=Se.from(Se.MAX_ADDRESS).toString(),LX={generics:{clean:"Clean","io-register":(t,e)=>`${t} register (${hr.format(e)})`,"byte-representation":{hex:"Hexadecimal",bin:"Binary",uint:"Unsigned integer",int:"Signed integer","safe-ascii":"ASCII"}},update:{"update-available":"There's a new version available!","new-version-available":"There's a new version available in the repository.","local-update":"A new local version has been detected.",reload:"Update"},messages:{"assemble-error":"Assemble error. Fix the errors and try again.","invalid-action":"Invalid action."},editor:{lintSummary:t=>t===0?"Ready to compile":t===1?"There's an error":`There're ${t} errors`,files:{unsupported:"Your browser doesn't support the FileSystem API","no-file":"No file open",open:"Open file",unsaved:"There are unsaved changes, do you want to discard them?","open-error":"Error opening file",save:"Save file","save-as":"Save file as","save-error":"Error saving file"},example:hv`
      ; Welcome to VonSim!
      ; This is an example program that calculates the first
      ; n numbers of the Fibonacci sequence, and stores them
      ; starting at memory position 1000h.
      
           n  equ 10    ; Calculate the first 10 numbers
      
              org 1000h
      start   db 1
      
              org 2000h
              mov bx, offset start + 1
              mov al, 0
              mov ah, start
      
      loop:   cmp bx, offset start + n
              jns finish
              mov cl, ah
              add cl, al
              mov al, ah
              mov ah, cl
              mov [bx], cl
              inc bx
              jmp loop
      finish: hlt
              end
    `},control:{action:{start:"Start",continue:"Continue",running:"Running...",run:{"cycle-change":"Cycle","end-of-instruction":"Instruction",infinity:"End"},stop:"Stop",reset:"Reset",pause:"Pause"},tabs:{editor:"Editor",computer:"Computer"},zoom:{in:"Zoom in",out:"Zoom out"}},computer:{cpu:{name:"CPU",register:t=>`${t} register`,"control-unit":"Control unit",decoder:"Decoder",stats:"stats CPU","instruction-cycle":"Ciclo de instrucción",status:{fetching:"Fetching instruction...","fetching-operands":"Fetching operands...",executing:"Executing...",writeback:"Saving results...",interrupt:"Handling interrupt...",stopped:"Stopped","stopped-error":"Error","waiting-for-input":"Waiting for input...",int6:"Running INT 6...",int7:"Running INT 7..."}},memory:{name:"Memory",cell:t=>`Cell ${Se.format(t)}`,"fix-address":"Fix address","unfix-address":"Unfix address","address-must-be-integer":"Start address must be an hexadecimal integer.","address-out-of-range":`Start address must be less or equal to ${DX}.`,"address-increment":"Increment address (Page Up)","address-decrement":"Decrement address (Page Down)"},"chip-select":{name:"Chip select",mem:"mem",pic:"pic",timer:"timer",pio:"pio",handshake:"handshake"},bus:{"read-memory":"READ MEMORY","write-memory":"WRITE MEMORY"},f10:"F10 key",keyboard:"Keyboard",leds:"LEDs",printer:{name:"Printer",buffer:"Buffer"},screen:"Screen",switches:"Switches",handshake:{name:"Handshake",data:"Data",state:"State"},pic:"PIC",pio:{name:"PIO",port:t=>`Port ${t}`},timer:"Timer"},settings:{title:"Settings",instructionCycle:{label:"Instruction Cycle"},statsCPU:{label:"CPU Statistics"},flags:{label:"Flags",description:"Select which flags to display in the ALU."},language:{label:"Language"},editorFontSize:{label:"Editor font size",increase:"Increase font size",decrease:"Decrease font size"},dataOnLoad:{label:"Data on load",description:"What to do with the memory when loading a new program.",randomize:"Randomize",clean:"Empty",unchanged:"Unchanged"},devices:{label:"Devices",description:"Which devices should be enabled.","keyboard-and-screen":"Keyboard and screen",pic:{label:"PIC",description:"Also adds a timer and the F10 key."},pio:{label:"PIO","switches-and-leds":"Switches and LEDs",printer:"Printer",null:"Disconnected"},handshake:{label:"Handshake",printer:"Printer",null:"Disconnected"}},animations:{label:"Animations",description:["Enabling animations."].join(" ")},speeds:{executionUnit:"Simulation speed",clockSpeed:"Clock speed",printerSpeed:"Printer speed"},filters:{label:"Filters",description:"Filters applied to the page. Useful when you're using a projector.",revert:"Revert to default filters",brightness:"Brightness",contrast:"Contrast",invert:"Invert",saturation:"Saturation"},reset:"Reset settings"},footer:{documentation:"Documentation",copyright:"III-LIDI, FI, UNLP",issue:{report:"Report an issue",body:(t,e)=>hv`
        <!-- Please describe the problem you are having in as much detail as possible. -->
        <!-- Most importantly, add the steps to reproduce the problem. -->

        <details>
          <summary>Debug info (PLEASE, DO NOT DELETE)</summary>

          **Version**: [${"86d1953"}](https://github.com/ruiz-jose/VonSim8/commit/${"86d1953"})

          #### Program

          \`\`\`asm
          ${e.split(`
`).map(n=>n.trim()).join(`
`)}
          \`\`\`

          #### Settings

          \`\`\`json
          ${JSON.stringify(t,null,2)}
          \`\`\`
          
        </details>
      `}}},jX=Se.from(Se.MAX_ADDRESS).toString(),$X={generics:{clean:"Limpiar","io-register":(t,e)=>`Registro ${t} (${hr.format(e)})`,"byte-representation":{hex:"Hexadecimal",bin:"Binario",uint:"Entero sin signo",int:"Entero con signo","safe-ascii":"ASCII"}},update:{"update-available":"¡Hay una nueva versión disponible!","new-version-available":"Hay una nueva versión disponible en el repositorio.","local-update":"Se ha detectado una nueva versión local.",reload:"Actualizar"},messages:{"assemble-error":"Error de ensamblado. Solucione los errores y vuelva a intentar.","invalid-action":"Acción inválida."},editor:{lintSummary:t=>t===0?"Listo para compilar":t===1?"Hay un error":`Hay ${t} errores`,files:{unsupported:"Tu navegador no soporta la “FileSystem API”","no-file":"No hay ningún archivo abierto",open:"Abrir",unsaved:"Hay cambios sin guardar, ¿desea descartarlos?","open-error":"Error al abrir el archivo",save:"Guardar","save-as":"Guardar como","save-error":"Error al guardar el archivo"},example:hv`
      ; ¡Bienvenido a VonSim 8!
      ; Este es un ejemplo de código que suma dos variables z = x + y      
        x  db 3
        y  db 2
        z  db 0
        mov al, x
        add al, y
        mov z, al
        hlt
    `},control:{action:{start:"Iniciar",continue:"Continuar",running:"Ejecutando...",run:{"cycle-change":"Ciclo","end-of-instruction":"Instrucción",infinity:"Final"},stop:"Detener",reset:"Reiniciar",pause:"Pausar"},tabs:{editor:"Editor",computer:"Computadora"},zoom:{in:"Acercar",out:"Alejar"}},computer:{cpu:{name:"CPU",register:t=>`Registro ${t}`,"control-unit":"Unidad de control",decoder:"Decodificador",stats:"Estadísticas CPU","instruction-cycle":"Ciclo de instrucción",status:{fetching:"Captación instrucción...","fetching-operands":"Leyendo operandos...",executing:"Ejecutando...",writeback:"Escribiendo resultados...",interrupt:"Manejando interrupción...",stopped:"Detenido","stopped-error":"Error","waiting-for-input":"Esperando tecla...",int6:"Ejecutando INT 6...",int7:"Ejecutando INT 7..."}},memory:{name:"Memoria",cell:t=>`Celda ${Se.format(t)}`,"fix-address":"Fijar dirección","unfix-address":"Desfijar dirección","address-must-be-integer":"El valor de inicio debe ser un número entero hexadecimal.","address-out-of-range":`El valor de inicio debe ser menor o igual a ${jX}.`,"address-increment":"Incrementar dirección (Page Up)","address-decrement":"Decrementar dirección (Page Down)"},"chip-select":{name:"Chip select",mem:"mem",pic:"pic",timer:"timer",pio:"pio",handshake:"handshake"},bus:{"read-memory":"LEER MEMORIA","write-memory":"ESCRIBIR MEMORIA"},f10:"Tecla F10",keyboard:"Teclado",leds:"Leds",printer:{name:"Impresora",buffer:"Buffer"},screen:"Pantalla",switches:"Llaves",handshake:{name:"Handshake",data:"Dato",state:"Estado"},pic:"PIC",pio:{name:"PIO",port:t=>`Puerto ${t}`},timer:"Timer"},settings:{title:"Configuración",instructionCycle:{label:"Ciclo de Instrucción"},statsCPU:{label:"Estadísticas CPU"},flags:{label:"Banderas",description:"Selecciona qué banderas mostrar en la ALU."},language:{label:"Idioma"},editorFontSize:{label:"Tamaño de fuente del editor",increase:"Aumentar",decrease:"Disminuir"},dataOnLoad:{label:"Memoria al cargar",description:"Qué hacer con la memoria al cargar un nuevo programa.",randomize:"Aleatoria",clean:"Vaciar",unchanged:"Reusar"},devices:{label:"Dispositivos",description:"Qué dispositivos deben estar habilitados.","keyboard-and-screen":"Teclado y pantalla",pic:{label:"PIC",description:"También agrega un timer y la tecla F10."},pio:{label:"PIO","switches-and-leds":"Llaves y luces",printer:"Impresora",null:"Desconectado"},handshake:{label:"Handshake",printer:"Impresora",null:"Desconectado"}},animations:{label:"Animaciones",description:["Habilitación de animaciones."].join(" ")},speeds:{executionUnit:"Velocidad de simulación",clockSpeed:"Velocidad del reloj",printerSpeed:"Velocidad de impresión"},filters:{label:"Filtros",description:"Filtros aplicados a la página. Útil cuando se usa un proyector.",revert:"Revertir a los valores por defecto",brightness:"Brillo",contrast:"Contraste",invert:"Invertir",saturation:"Saturación"},reset:"Restablecer configuración"},footer:{documentation:"Documentación",copyright:"III-LIDI, FI, UNLP, UNER",issue:{report:"Reportar un error",body:(t,e)=>hv`
        <!-- Por favor, describa el problema que está teniendo en la mayor cantidad de detalle posible. -->
        <!-- Por sobre todo, agregue los pasos para reproducir el problema. -->

        <details>
          <summary>Información extra (POR FAVOR, NO BORRAR)</summary>

          **Versión**: [${"86d1953"}](https://github.com/ruiz-jose/VonSim8/commit/${"86d1953"})

          #### Programa

          \`\`\`asm
          ${e.split(`
`).map(n=>n.trim()).join(`
`)}
          \`\`\`

          #### Configuración

          \`\`\`json
          ${JSON.stringify(t,null,2)}
          \`\`\`
          
        </details>
      `}}},By=G_({en:LX,es:$X});function Rt(){const t=Y_();return x.useCallback((e,...n)=>By(t,e,...n),[t])}const FX=[{name:"Documentación",url:"https://ruiz-jose.github.io/VonSim8/docs/",icon:"icon-[lucide--book-open]"},{name:"GitHub",url:"https://github.com/ruiz-jose/VonSim8",icon:JG}],ML=x.memo(({name:t,url:e,icon:n})=>h.jsx(us,{content:t,position:"top",children:h.jsx(ht,{variant:"ghost",size:"sm",onClick:()=>window.open(e,"_blank"),className:"hover-lift","aria-label":t,children:typeof n=="string"?h.jsx("span",{className:ee(n,"size-4")}):h.jsx(Fe,{icon:n,className:"size-4"})})}));ML.displayName="SocialLink";const TL=x.memo(()=>{const t=Rt(),e=yn(),n=x.useMemo(()=>{var s;const i=((s=window.codemirror)==null?void 0:s.state.doc.toString())||"",r=t("footer.issue.body",e,i);return`https://github.com/ruiz-jose/VonSim8/issues/new?body=${encodeURIComponent(r)}`},[t,e]);return h.jsx("footer",{className:"bg-black px-3 py-1.5 text-xs text-white","data-testid":"footer",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("span",{className:"text-stone-400",children:["© Copyright 2017-2025 — III-LIDI, FI, UNLP, UNER — v","86d1953"]}),h.jsxs("div",{className:"flex items-center gap-1","data-testid":"footer-links",children:[FX.map(i=>h.jsx(ML,{name:i.name,url:i.url,icon:i.icon},i.name)),h.jsx(us,{content:t("footer.issue.report"),position:"top",children:h.jsx(ht,{variant:"ghost",size:"sm",onClick:()=>window.open(n,"_blank"),className:"hover-lift","aria-label":t("footer.issue.report"),children:h.jsx("span",{className:"icon-[lucide--bug] size-4"})})})]})]})})});TL.displayName="Footer";function Jh(t,e,n){const i=[];for(let r=0;r<t.length;r++)try{const s=e(t[r],r,t);s&&(Array.isArray(s)?s.forEach(o=>o&&i.push(n(o,r,t))):i.push(n(s,r,t)))}catch(s){i.push(n(s,r,t))}return i}class rn{constructor(e,n){fe(this,"start");fe(this,"end");this.start=e|0,this.end=(n??e)|0}get range(){return[this.start,this.end]}toString(){let e=`${this.start}`;return this.end!==this.start&&(e+=`:${this.end}`),e}static merge(...e){const n=e.filter(Boolean);if(n.length===0)throw new Error("Cannot merge 0 positions");let i=n[0].start,r=n[0].end;for(const s of n)s.start<i&&(i=s.start),s.end>r&&(r=s.end);return new rn(i,r)}toJSON(){return this.range}}const x3=Se.from(Se.MAX_ADDRESS).toString(),BX=hr.from(hr.MAX_ADDRESS).toString(),zX={"address-has-code":t=>`Memory address ${t} has instructions. It cannot be used as a data address.`,"address-out-of-range":t=>`Memory address ${Se.format(t)} is out of range (max memory address: ${x3}).`,"cannot-accept-strings":t=>`${t} can't accept strings.`,"cannot-be-indirect":"This operand can't be an indirect memory address.","cannot-be-unassinged":t=>`${t} can't be unassigned.`,"cannot-be-word":"This operand can't be of 16 bits.","circular-reference":"Circular reference detected.","constant-must-have-a-label":"Constant must have a label.","constant-must-have-one-value":"Constant must have exactly one value.","destination-cannot-be-immediate":"The destination can't be an immediate value.","double-memory-access":"Can't access to a memory location twice in the same instruction.","duplicated-label":t=>`Duplicated label "${t}".`,"empty-program":"Empty program. The program must have, at least, an END statement.","end-must-be-the-last-statement":"END must be the last statement.","equ-not-found":t=>`EQU "${t}" not found.`,"expects-ax":"This operand should be AX or AL.","expects-dx":"The only valid register is DX.","expects-immediate":"This operand should be immediate.","expects-label":"This operand should be a label.","expects-no-operands":"This instruction doesn't expect any operands.","expects-one-operand":"This instruction expects one operand.","expects-two-operands":"This instruction expects two operands.","expects-word-register":"This instruction expects a 16-bits register as its operand.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parámetros. Solo se permiten comentarios en la misma línea.","parser.code-block-no-parameters":"La directiva .CODE no debe tener parámetros. Solo se permiten comentarios en la misma línea.","instruction-out-of-range":t=>`This instruction would be placed in address ${Se.format(t)}, which is outside the memory range (max memory address: ${x3}).`,"invalid-interrupt":t=>`Invalid interrupt number ${t}.`,"io-address-out-of-range":t=>`I/O address ${t} is out of range (max I/O address: ${BX}).`,"label-not-found":t=>`Label "${t}" has not been defined.`,"label-should-be-a-number":t=>`Label ${t} should point to a EQU declaration or to a instruction. Maybe you ment to write OFFSET ${t}.`,"label-should-be-an-instruction":t=>`Label ${t} should point to a instruction.`,"missing-org":"No ORG before this instruction — cannot determine its location in memory.","must-have-one-or-more-values":t=>`${t} must have at least one value.`,"occupied-address":t=>`This instruction would be placed in address ${t}, which is already occupied.`,"offset-only-with-data-directive":"OFFSET can only be use with data directives.","reserved-address":t=>`This instruction would be placed in address ${t}, which is reserved by the system.`,"size-mismatch":(t,e)=>`The source (${t}-bit) and destination (${e}-bit) must be the same size.`,"unexpected-error":t=>`Unexpected error: ${String(t)}`,"unknown-size":"Addressing an unknown memory address with an immediate operand requires specifying the type of pointer with WORD PTR or BYTE PTR before the address.","value-out-of-range":(t,e)=>`The number ${t} cannot be represented with ${e} bits.`,lexer:{"character-too-long":"Character literals can only have one character.","empty-character":"Character literals can't be empty.","invalid-binary":"Invalid binary number. It should only contain 0s and 1s.","invalid-decimal":"Invalid decimal number. It should only contain digits.","only-ascii":"Only ASCII character are supported for characters literals and strings.","unexpected-character":t=>`Unexpected character "${t}".`,"unterminated-character":"Unterminated character.","unterminated-string":"Unterminated string."},parser:{"ambiguous-unary":"Ambiguous unary expression detected. Use parentheses to disambiguate.","expected-address-after-org":"Expected address after ORG.","expected-argument":"Expected argument.","expected-eos":"Expected end of statement.","expected-instruction":t=>`Expected instruction, got ${t.type}.`,"expected-label-after-offset":"Expected label after OFFSET.","expected-instruction-after-label":t=>`Expected instruction after label, got ${t.type}.`,"expected-literal-after-expression":t=>`Expected "${t}" after expression.`,"expected-literal-after-literal":(t,e)=>`Expected "${t}" after "${e}".`,"expected-type":(t,e)=>`Expected ${t}, got ${e}.`,"indirect-addressing-must-be-bx":"The only register supported for indirect addressing is BX.","unclosed-parenthesis":"Unclosed parenthesis.","unexpected-identifier":"Unexpected identifier. You may have forgotten a colon (:) to make it a label.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parámetros. Solo se permiten comentarios en la misma línea."}},S3=Se.from(Se.MAX_ADDRESS).toString(),UX=hr.from(hr.MAX_ADDRESS).toString(),VX={"address-has-code":t=>`La dirección de memoria ${Se.format(t)} tiene instrucciones. No se puede usar como dirección de datos.`,"address-out-of-range":t=>`La dirección de memoria ${Se.format(t)} está fuera de rango (dirección máxima de memoria: ${S3}).`,"cannot-accept-strings":t=>`${t} no puede aceptar cadenas de texto.`,"cannot-be-indirect":"Este operando no puede ser una dirección de memoria indirecta.","cannot-be-unassinged":t=>`${t} no puede estar sin asignar.`,"cannot-be-word":"Este operando no puede ser de 16 bits.","circular-reference":"Se detectó una referencia circular.","constant-must-have-a-label":"La constante debe tener una etiqueta.","constant-must-have-one-value":"La constante debe tener una exactamente un valor.","destination-cannot-be-immediate":"El destino no puede ser un valor inmediato.","double-memory-access":"No se puede acceder a una memoria dos veces en la misma instrucción.","duplicated-label":t=>`Etiqueta duplicada "${t}".`,"empty-program":"Programa vacío. El programa debe tener, al menos, una instrucción END.","end-must-be-the-last-statement":"END debe ser la última instrucción.","equ-not-found":t=>`EQU "${t}" no encontrado.`,"expects-ax":"Este operando debe ser AX o AL.","expects-dx":"El único registro válido es DX.","expects-immediate":"Este operando debe ser inmediato.","expects-label":"Este operando debe ser una etiqueta.","expects-no-operands":"Esta instrucción no espera ningún operando.","expects-one-operand":"Esta instrucción espera un operando.","expects-two-operands":"Esta instrucción espera dos operandos.","expects-word-register":"Esta instrucción espera un registro de 16 bits como su operando.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parámetros. Solo se permiten comentarios en la misma línea.","parser.code-block-no-parameters":"La directiva .CODE no debe tener parámetros. Solo se permiten comentarios en la misma línea.","instruction-out-of-range":t=>`Esta instrucción se colocaría en la dirección ${Se.format(t)}, la cual se encuentra fuera del rango de memoria (dirección máxima de memoria: ${S3}).`,"invalid-interrupt":t=>`${t} no es un número de interrupción válido.`,"io-address-out-of-range":t=>`La dirección de E/S ${t} está fuera de rango (dirección máxima de memoria E/S: ${UX}).`,"label-not-found":t=>`La etiqueta "${t}" no ha sido definida.`,"label-should-be-a-number":t=>`La etiqueta ${t} debería apuntar a una constante EQU o a una instrucción. Quizás quiso escribir OFFSET ${t}.`,"label-should-be-an-instruction":t=>`La etiqueta ${t} debería apuntar a una instrucción.`,"missing-org":"No hay ningún ORG antes de esta instrucción, por lo que no se puede determinar su ubicación en memoria.","must-have-one-or-more-values":t=>`${t} debe tener al menos un valor.`,"occupied-address":t=>`Esta instrucción sería colocada en la dirección ${Se.format(t)}, la cual ya está ocupada.`,"offset-only-with-data-directive":"OFFSET solo puede ser usado con variables.","reserved-address":t=>`Esta instrucción sería colocada en la dirección ${Se.format(t)}, la cual ya está reservada por el sistema.`,"size-mismatch":(t,e)=>`La fuente (${t} bits) y el destino (${e} bits) deben ser del mismo tamaño.`,"unexpected-error":t=>`Error inesperado: ${String(t)}`,"unknown-size":"Acceder a una dirección de memoria desconocida con un operando inmediato requiere especificar el tipo de puntero con WORD PTR o BYTE PTR antes de la dirección.","value-out-of-range":(t,e)=>`El número ${t} no puede ser representado con ${e} bits.`,lexer:{"character-too-long":"El carácter solo puede contener un carácter.","empty-character":"Los carácter no puede estar vacío.","invalid-binary":"Número binario inválido. Solo puede contener ceros y unos.","invalid-decimal":"Número decimal inválido. Solo puede contener dígitos.","only-ascii":"Solo se soportan caracteres ASCII para caracteres y cadenas de texto.","unexpected-character":t=>`Carácter inesperado "${t}".`,"unterminated-character":"Carácter sin terminar.","unterminated-string":"Cadena sin terminar."},parser:{"ambiguous-unary":"Se detectó una expresión unaria ambigua. Use paréntesis para evitar ambigüedades.","expected-address-after-org":"Se esperaba una dirección después de ORG.","expected-argument":"Se esperaba un argumento.","expected-eos":"Se esperaba que la instrucción termine.","expected-instruction":t=>`Se esperaba una instrucción, se obtuvo ${t.type}.`,"expected-label-after-offset":"Se esperaba una etiqueta después de OFFSET.","expected-instruction-after-label":t=>`Se esperaba una instrucción después de la etiqueta, se obtuvo ${t.type}.`,"expected-literal-after-expression":t=>`Se esperaba "${t}" después de la expresión.`,"expected-literal-after-literal":(t,e)=>`Se esperaba "${t}" después de "${e}".`,"expected-type":(t,e)=>`Se esperaba ${t}, se obtuvo ${e}.`,"indirect-addressing-must-be-bx":"El único registro válido para el direccionamiento indirecto es BL.","unclosed-parenthesis":"Paréntesis sin cerrar.","unexpected-identifier":"Identificador inesperado. Tal vez te olvidaste agregar dos puntos (:) para hacerlo una etiqueta.","parser.data-block-no-parameters":"La directiva .DATA no debe tener parámetros. Solo se permiten comentarios en la misma línea."}},HX=G_({en:zX,es:VX});class se extends Error{constructor(n,...i){super();fe(this,"code");fe(this,"context");fe(this,"position");this.code=n,this.context=i,this.position=null,n==="unexpected-error"&&console.error("[Unexpected Assembler Error]",...i)}at(n){return n&&(n instanceof rn?this.position=n:"position"in n?this.position=n.position:"meta"in n&&(this.position=n.meta.position)),this}translate(n){return HX(n,this.code,...this.context)}get message(){let n=this.translate("en");return this.position&&(n+=` (${this.position})`),n}toString(){return this.message}static from(n){return n instanceof se?n:new se("unexpected-error",n)}}const J_=[[0,F.fromUnsigned(160,8)],[3,F.fromUnsigned(176,8)],[6,F.fromUnsigned(192,8)],[7,F.fromUnsigned(208,8)]],k3=new Set(...J_.map(([t])=>[t]));var wa,Yu;class WX{constructor(){fe(this,"codeMemory",new Set);fe(this,"labels",new Map);fe(this,"hasORG",!1);Ie(this,wa,!1);Ie(this,Yu,!1)}loadStatements(e){if(A(this,wa))throw new Error("Tried to load statements twice");Q(this,wa,!0),this.labels.clear();const n=[];for(const i of e)if("label"in i&&i.label){if(this.labels.has(i.label)){n.push(new se("duplicated-label",i.label).at(i.position));continue}i.isInstruction()?this.labels.set(i.label,{type:"instruction",address:Se.from(0)}):i.directive==="EQU"?this.labels.set(i.label,{type:"EQU",constant:i}):this.labels.set(i.label,{type:i.directive,address:Se.from(0)})}return n}computeAddresses(e){if(A(this,Yu))throw new Error("Tried to compute addresses twice");Q(this,Yu,!0),this.codeMemory.clear();const n=new Set,i=e.some(u=>u.isInstruction()&&u.instruction==="INT");if(this.hasORG=e.some(u=>u.isOriginChange()),this.hasORG&&!e[0].isOriginChange())throw new se("missing-org").at(e[0].position);let r=i&&!this.hasORG?8:this.hasORG?32:0,s=null,o=r;const a=[],l=[],c=[];for(const u of e)u.isInstruction()?a.push(u):u.isOriginChange()?l.push(u):u.isDataDirective()&&c.push(u);if(this.hasORG){const u=[],d=[];return Jh(e,f=>{if(f.isEnd()||f.isDataDirective()&&f.directive==="EQU")return;if(f.isOriginChange()){r=f.newAddress;return}const p=r;if(p===null)throw new se("missing-org").at(f);const m=f.length,g=p,y=p+m-1;for(const b of d)if(Math.max(g,b.start)<=Math.min(y,b.end)){u.push(new se("occupied-address",Se.from(g)).at(f));return}d.push({start:g,end:y,statement:f});for(let b=0;b<m;b++){if(!Se.inRange(p+b))throw new se("instruction-out-of-range",p+b).at(f);const w=Se.from(p+b);if(n.has(w.value))throw new se("occupied-address",w).at(f);if(i&&k3.has(w.value))throw new se("reserved-address",w).at(f);n.add(w.value),f.isInstruction()&&this.codeMemory.add(w.value)}const v=Se.from(p);f.setStart(v),f.label&&this.labels.set(f.label,{type:f.isInstruction()?"instruction":f.directive,address:v}),(f.isDataDirective()||f.isInstruction())&&(r+=m,o=Math.max(o,r))},se.from),u}else return Jh([...a,...l,...c],d=>{if(d.isDataDirective()&&d.directive==="EQU")return;if(d.isOriginChange()){const g=d.newAddress;g<32?s=g:r=g;return}let f;if(d.isDataDirective())s===null&&(s=o),f=s;else if(d.isInstruction())f=r;else throw new se("missing-org").at(d);const p=d.length;for(let g=0;g<p;g++){if(!Se.inRange(f+g))throw new se("instruction-out-of-range",f+g).at(d);const y=Se.from(f+g);if(n.has(y.value))throw new se("occupied-address",y).at(d);if(i&&k3.has(y.value))throw new se("reserved-address",y).at(d);n.add(y.value),d.isInstruction()&&this.codeMemory.add(y.value)}const m=Se.from(f);if(d.setStart(m),d.label&&this.labels.set(d.label,{type:d.isInstruction()?"instruction":d.directive,address:m}),d.isDataDirective()){if(s===null)throw new Error("Data pointer is null");s+=p}else d.isInstruction()&&(r+=p,o=Math.max(o,r))},se.from)}labelExists(e){if(!A(this,wa))throw new Error("Tried to check if label exists before loading statements");return this.labels.has(e)}getLabelType(e){var n;if(!A(this,wa))throw new Error("Tried to get type of label before loading statements");return(n=this.labels.get(e))==null?void 0:n.type}getLabelValue(e){if(!A(this,wa))throw new Error("Tried to get type of label before loading statements");const n=this.labels.get(e);if(n){if(n.type==="EQU")return n.constant.evaluate(this);if(!A(this,Yu))throw new Error("Tried to get address of label before computing addresses");return n.address.value}}addressIsReserved(e){return e instanceof Se&&(e=e.value),this.codeMemory.has(e)}hasOriginDirective(){return this.hasORG}}wa=new WeakMap,Yu=new WeakMap;const GX=["AL","BL","CL","DL","AH","BH","CH","DH"],RL=["AX","BX","CX","DX","SP"],pv=[...GX,...RL],Z_=["DB","DW","EQU"],Q_=["MOV","PUSH","POP","IN","OUT","PUSHF","POPF","ADD","ADC","INC","SUB","SBB","DEC","NEG","CMP","NOT","AND","OR","XOR","CALL","JMP","RET","JZ","JO","JS","JC","JNZ","JNO","JNS","JNC","INT","IRET","CLI","STI","NOP","HLT"],KX=["OFFSET","ORG","BYTE","WORD","PTR","END",".DATA",".CODE",...pv,...Q_,...Z_];class qX{constructor(e,n,i){fe(this,"type");fe(this,"lexeme");fe(this,"position");this.type=e,this.lexeme=n,this.position=i}toJSON(){return{type:this.type,lexeme:this.lexeme,position:this.position.toJSON()}}}class YX{constructor(e){fe(this,"scanned",!1);fe(this,"tokens",[]);fe(this,"position",new rn(0));this.source=e}scanTokens(){if(this.scanned)throw new Error("Scanner has already been used.");for(this.scanned=!0;!this.isAtEnd();){this.position=new rn(this.position.end);const e=this.advance();switch(e){case"(":this.addToken("LEFT_PAREN");continue;case")":this.addToken("RIGHT_PAREN");continue;case"[":this.addToken("LEFT_BRACKET");continue;case"]":this.addToken("RIGHT_BRACKET");continue;case",":this.addToken("COMMA");continue;case"?":this.addToken("QUESTION_MARK");continue;case"+":this.addToken("PLUS");continue;case"-":this.addToken("MINUS");continue;case"*":this.addToken("ASTERISK");continue;case"'":{let n=0;for(;this.peek()!=="'";){if(this.isAtEnd()||this.peek()===`
`)throw new se("lexer.unterminated-character").at(this.position);if(Xh(this.peek())===null)throw new se("lexer.only-ascii").at(new rn(this.position.end,this.position.end+1));this.advance(),n++}if(this.advance(),n===0)throw new se("lexer.empty-character").at(this.position);if(n>=2)throw new se("lexer.character-too-long").at(this.position);this.addToken("CHARACTER");continue}case'"':for(;this.peek()!=='"';){if(this.isAtEnd()||this.peek()===`
`)throw new se("lexer.unterminated-string").at(this.position);if(Xh(this.peek())===null)throw new se("lexer.only-ascii").at(new rn(this.position.end,this.position.end+1));this.advance()}this.advance(),this.addToken("STRING");continue;case";":for(;this.peek()!==`
`&&!this.isAtEnd();)this.advance();continue;case" ":case"\r":case"	":continue;case`
`:this.addToken("EOL");continue}if(this.isDigit(e)){for(;this.isDigit(this.peek())||this.peek()>="a"&&this.peek()<="f"||this.peek()>="A"&&this.peek()<="F";)this.advance();if(this.peek()===".")throw new se("lexer.unexpected-character",".").at(new rn(this.position.end,this.position.end+1));if(this.peek()==="H"||this.peek()==="h")this.advance();else{const n=this.source.slice(this.position.start,this.position.end);if(n.at(-1)==="b"||n.at(-1)==="B"){if(!/^[01]+b$/i.test(n))throw new se("lexer.invalid-binary").at(this.position)}else if(!/^\d+$/.test(n))throw new se("lexer.invalid-decimal").at(this.position)}this.addToken("NUMBER");continue}if(this.isAlpha(e)||e==="."){if(e==="."&&this.isDigit(this.peek()))throw new se("lexer.unexpected-character",".").at(new rn(this.position.start,this.position.start+1));for(;this.isAlphaNumeric(this.peek())||this.peek()===".";)this.advance();const n=this.source.slice(this.position.start,this.position.end).toUpperCase();KX.includes(n)?this.addToken(n):this.peek()===":"?(this.advance(),this.addToken("LABEL")):this.addToken("IDENTIFIER");continue}throw new se("lexer.unexpected-character",e).at(this.position)}return this.position=new rn(this.position.end),this.addToken("EOF"),this.tokens}addToken(e){this.tokens.push(new qX(e,this.source.slice(this.position.start,this.position.end),this.position))}advance(){const e=this.source.charAt(this.position.end);return this.position=new rn(this.position.start,this.position.end+1),e}isAlpha(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e==="_"}isAlphaNumeric(e){return this.isAlpha(e)||this.isDigit(e)}isAtEnd(){return this.position.end>=this.source.length}isDigit(e){return e>="0"&&e<="9"}peek(){return this.isAtEnd()?"\0":this.source.charAt(this.position.end)}}class $n{constructor(e){this.position=e}isNumberLiteral(){return this.type==="number-literal"}isLabel(){return this.type==="label"}isUnaryOperation(){return this.type==="unary-operation"}isBinaryOperation(){return this.type==="binary-operation"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}fe($n,"numberLiteral",(...e)=>new XX(...e)),fe($n,"label",(...e)=>new JX(...e)),fe($n,"unaryOperation",(...e)=>new ZX(...e)),fe($n,"binaryOperation",(...e)=>new QX(...e));class XX extends $n{constructor(n,i){super(i);fe(this,"type","number-literal");this.value=n}evaluate(){return this.value}toJSON(){return{...super.toJSON(),value:this.value}}}let JX=class extends $n{constructor(n,i,r){super(r);fe(this,"type","label");this.value=n,this.offset=i}evaluate(n){if(!n.labelExists(this.value))throw new se("label-not-found",this.value).at(this.position);const i=n.getLabelType(this.value);if((i==="DB"||i==="DW")&&!this.offset)throw new se("label-should-be-a-number",this.value).at(this.position);if((i==="EQU"||i==="instruction")&&this.offset)throw new se("offset-only-with-data-directive").at(this.position);return n.getLabelValue(this.value)}toJSON(){return{...super.toJSON(),value:this.value,offset:this.offset}}};class ZX extends $n{constructor(n,i,r){super(r);fe(this,"type","unary-operation");this.operator=n,this.right=i}evaluate(n){return this.operator==="+"?this.right.evaluate(n):-this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,right:this.right.toJSON()}}}class QX extends $n{constructor(n,i,r,s){super(s);fe(this,"type","binary-operation");this.left=n,this.operator=i,this.right=r}evaluate(n){return this.operator==="+"?this.left.evaluate(n)+this.right.evaluate(n):this.operator==="-"?this.left.evaluate(n)-this.right.evaluate(n):this.left.evaluate(n)*this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,left:this.left.toJSON(),right:this.right.toJSON()}}}class zy{constructor(e){this.position=e}isOriginChange(){return this.type==="origin-change"}isEnd(){return this.type==="end"}isDataDirective(){return this.type==="data-directive"}isInstruction(){return this.type==="instruction"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}var yo;class OL extends zy{constructor(n,i,r){super(r);fe(this,"type","data-directive");fe(this,"label");fe(this,"values");Ie(this,yo,null);this.values=n,this.label=i}get start(){if(A(this,yo)===null)throw new Error("Start not set");return A(this,yo)}setStart(n){if(A(this,yo)!==null)throw new Error("Start already set");Q(this,yo,n)}toJSON(){return{...super.toJSON(),...A(this,yo)?{start:A(this,yo).toJSON()}:{},directive:this.directive,label:this.label}}}yo=new WeakMap;var ac,xa,Xu;class eJ extends OL{constructor(n,i,r){super(n,i,r);fe(this,"directive","EQU");Ie(this,ac,"not-processed");Ie(this,xa,null);Ie(this,Xu,null)}toJSON(){var n;return{...super.toJSON(),value:A(this,Xu)??((n=A(this,xa))==null?void 0:n.toJSON())??this.values.map(i=>i.toJSON())}}validate(){if(A(this,xa))throw new Error("Constant already validated");if(!this.label)throw new se("constant-must-have-a-label").at(this);if(this.values.length!==1)throw new se("constant-must-have-one-value").at(this);const n=this.values[0];if(n.type==="string")throw new se("cannot-accept-strings","EQU").at(n);if(n.type==="unassigned")throw new se("cannot-be-unassinged","EQU").at(n);Q(this,xa,n.value)}evaluateExpressions(n){if(!A(this,xa))throw new Error("Constant not validated");if(A(this,ac)==="processed")return A(this,Xu);if(A(this,ac)==="processing")throw new se("circular-reference").at(this.position);Q(this,ac,"processed");const i=A(this,xa).evaluate(n);return Q(this,ac,"processed"),Q(this,Xu,i),i}evaluate(n){return this.evaluateExpressions(n)}}ac=new WeakMap,xa=new WeakMap,Xu=new WeakMap;const zf=Symbol("unassigned");var Ci,Xr;class tJ extends OL{constructor(n,i,r,s){super(i,r,s);fe(this,"size");Ie(this,Ci,null);Ie(this,Xr,null);this.directive=n,this.size=n==="DB"?8:16}get length(){if(!A(this,Ci))throw new Error("Data directive not validated");return A(this,Ci).length*(this.size/8)}getValues(){if(!A(this,Xr))throw new Error("Data directive not evaluated");return A(this,Xr)}toJSON(){return{...super.toJSON(),values:(A(this,Xr)??A(this,Ci)??this.values).map(n=>n===zf?"?":n.toJSON())}}validate(){if(A(this,Ci))throw new Error("Data directive already validated");Q(this,Ci,[]);for(const n of this.values)if(n.isUnassigned())A(this,Ci).push(zf);else if(n.isString()){if(this.directive!=="DB")throw new se("cannot-accept-strings",this.directive).at(n);const i=n.value;for(let r=0;r<i.length;r++){const s=Xh(i[r]);if(s===null)throw new Error("Invalid character, should not happen");const o=new rn(n.position.start+r,n.position.start+r+1),a=$n.numberLiteral(s,o);A(this,Ci).push(a)}}else A(this,Ci).push(n.value);if(A(this,Ci).length===0)throw new se("must-have-one-or-more-values",this.directive).at(this)}evaluateExpressions(n){if(!A(this,Ci))throw new Error("Data directive not validated");if(A(this,Xr))throw new Error("Data directive already evaluated");Q(this,Xr,[]);const i=Jh(A(this,Ci),r=>{if(r===zf)A(this,Xr).push(zf);else{const s=r.evaluate(n);if(!F.fits(s,this.size))throw new se("value-out-of-range",s,this.size).at(this);const o=F.fromNumber(s,this.size);A(this,Xr).push(o)}},se.from);return i.length>0&&Q(this,Xr,null),i}}Ci=new WeakMap,Xr=new WeakMap;class eC{constructor(e){this.position=e}isString(){return this.type==="string"}isUnassigned(){return this.type==="unassigned"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class nJ extends eC{constructor(n,i){super(i);fe(this,"type","string");this.value=n}toJSON(){return{...super.toJSON(),value:this.value}}}class iJ extends eC{constructor(n){super(n);fe(this,"type","unassigned")}}class rJ extends eC{constructor(n){super(n.position);fe(this,"type","number-expression");this.value=n}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function sJ(t,e,n){const i=rn.merge(t.position,...e.map(r=>r.position));switch(t.type){case"DB":case"DW":return new tJ(t.type,e,n,i);case"EQU":return new eJ(e,n,i)}}class Lw extends zy{constructor(n){super(n);fe(this,"type","end")}}function Yl(t){switch(t){case"AL":case"AX":return 0;case"BL":case"BX":return 1;case"CL":case"CX":return 2;case"DL":case"DX":return 3;case"AH":case"SP":return 4;case"CH":return 5;case"DH":return 6;case"BH":return 7;default:throw new Error(`Registro no soportado: ${t}`)}}var bo;class Fc extends zy{constructor(n,i,r){super(r);fe(this,"type","instruction");fe(this,"label");fe(this,"operands");Ie(this,bo,null);this.operands=n,this.label=i}getOperands(){return this.operands}get start(){if(A(this,bo)===null)throw new Error("Start not set");return A(this,bo)}setStart(n){if(A(this,bo)!==null)throw new Error("Start already set");Q(this,bo,n)}toJSON(){return{...super.toJSON(),...A(this,bo)?{start:A(this,bo).toJSON()}:{},instruction:this.instruction,label:this.label}}}bo=new WeakMap;var Zn,br;class oJ extends Fc{constructor(n,i,r,s){super(i,r,s);Ie(this,Zn,null);Ie(this,br,null);this.instruction=n}get length(){if(!A(this,Zn))throw new Error("Instruction not validated");const{mode:n,size:i,out:r,src:s}=A(this,Zn);let o=1;return(n==="reg<-mem"&&s.mode==="direct"||(n==="mem<-reg"||n==="mem<-imd")&&r.mode==="direct")&&(o+=1),(n==="reg<-imd"||n==="mem<-imd")&&(o+=i/8),o}get operation(){if(!A(this,br))throw new Error("Instruction not evaluated");return A(this,br)}toBytes(){const{mode:n,size:i,out:r,src:s}=this.operation,o=[],a={MOV:0,AND:130,OR:132,XOR:134,ADD:64,ADC:138,SUB:140,SBB:142,CMP:144};switch(o[0]=a[this.instruction],i===16&&(o[0]|=1),n){case"reg<-reg":{o[0]|=(Yl(r)&3)<<2,o[0]|=(Yl(s)&3)<<0;break}case"reg<-mem":{s.mode==="direct"?(o[0]=16,o.push(s.address.byte.low.unsigned)):o[0]=17,o[0]|=(Yl(r)&3)<<2;break}case"reg<-imd":{o[0]=18,o.push(s.low.unsigned),o[0]|=(Yl(r)&3)<<2;break}case"mem<-reg":{r.mode==="direct"?(o[0]=32,o.push(r.address.byte.low.unsigned)):o[0]=65,o[0]|=(Yl(s)&3)<<2;break}case"mem<-imd":{r.mode==="direct"?(o[0]=44,o.push(r.address.byte.low.unsigned)):o[0]=45,o.push(s.low.unsigned),i===16&&o.push(s.high.unsigned);break}default:return n}return new Uint8Array(o)}toJSON(){return{...super.toJSON(),...A(this,br)??A(this,Zn)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(A(this,Zn))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new se("expects-two-operands").at(this);const[i,r]=this.operands;if(i.isRegister()){if(r.isRegister()){if(i.size!==r.size)throw new se("size-mismatch",r.size,i.size).at(this);Q(this,Zn,{mode:"reg<-reg",size:i.size,out:i.value,src:r.value});return}if(r.isDirectAddress()){if(r.size!=="auto"&&r.size!==i.size)throw new se("size-mismatch",r.size,i.size).at(this);Q(this,Zn,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"direct",address:r.value}});return}if(r.isIndirectAddress()){if(r.size!=="auto"&&r.size!==i.size)throw new se("size-mismatch",r.size,i.size).at(this);Q(this,Zn,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"indirect"}});return}const s=r.getAsDirectAddress(n);if(s){if(s.size!==i.size)throw new se("size-mismatch",s.size,i.size).at(this);Q(this,Zn,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"direct",address:s.expression}});return}Q(this,Zn,{mode:"reg<-imd",size:i.size,out:i.value,src:r.value});return}else{let s,o;if(i.isIndirectAddress())s=i.size,o={mode:"indirect"};else if(i.isDirectAddress())s=i.size,o={mode:"direct",address:i.value};else{const a=i.getAsDirectAddress(n);if(a)s=a.size,o={mode:"direct",address:a.expression};else throw new se("destination-cannot-be-immediate").at(i)}if(r.isRegister()){if(s!=="auto"&&s!==r.size)throw new se("size-mismatch",s,r.size).at(this);Q(this,Zn,{mode:"mem<-reg",size:r.size,out:o,src:r.value});return}if(r.isNumberExpression()){if(r.getAsDirectAddress(n))throw new se("double-memory-access").at(this);s==="auto"&&(s=8),Q(this,Zn,{mode:"mem<-imd",size:s,out:o,src:r.value});return}throw new se("double-memory-access").at(this)}}evaluateExpressions(n){if(!A(this,Zn))throw new Error("Instruction not validated");if(A(this,br))throw new Error("Instruction aready evaluated");const{mode:i,size:r,out:s,src:o}=A(this,Zn),a=l=>{const c=l.evaluate(n);if(!Se.inRange(c))throw new se("address-out-of-range",c).at(l);const u=Se.from(c);if(n.addressIsReserved(u))throw new se("address-has-code",u).at(l);return u};switch(i){case"reg<-reg":{Q(this,br,{mode:i,size:r,out:s,src:o});return}case"reg<-mem":{Q(this,br,{mode:i,size:r,out:s,src:o.mode==="direct"?{mode:"direct",address:a(o.address)}:{mode:"indirect"}});return}case"reg<-imd":{const l=o.evaluate(n);if(!F.fits(l,r))throw new se("value-out-of-range",l,r).at(o);const c=F.fromNumber(l,r);Q(this,br,{mode:i,size:r,out:s,src:c});return}case"mem<-reg":{Q(this,br,{mode:i,size:r,out:s.mode==="direct"?{mode:"direct",address:a(s.address)}:{mode:"indirect"},src:o});return}case"mem<-imd":{const l=o.evaluate(n);if(!F.fits(l,r))throw new se("value-out-of-range",l,r).at(o);const c=F.fromNumber(l,r);Q(this,br,{mode:i,size:r,out:s.mode==="direct"?{mode:"direct",address:a(s.address)}:{mode:"indirect"},src:c});return}default:return i}}}Zn=new WeakMap,br=new WeakMap;var Ps,wo;class aJ extends Fc{constructor(n,i,r,s){super(i,r,s);Ie(this,Ps,null);Ie(this,wo,null);fe(this,"length",2);this.instruction=n}toBytes(){return new Uint8Array([26,this.value.unsigned])}get value(){if(!A(this,wo))throw new Error("Instruction not evaluated");return A(this,wo)}toJSON(){return{...super.toJSON(),...A(this,wo)?{value:A(this,wo).toJSON()}:A(this,Ps)?{initialValue:A(this,Ps).toJSON()}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(A(this,Ps))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new se("expects-one-operand").at(this);const n=this.operands[0];if(!n.isNumberExpression())throw new se("expects-immediate").at(n);Q(this,Ps,n.value)}evaluateExpressions(n){if(!A(this,Ps))throw new Error("Instruction not validated");if(A(this,wo))throw new Error("Instruction aready evaluated");const i=A(this,Ps).evaluate(n);if(!F.fitsUnsigned(i,8))throw new se("invalid-interrupt",i).at(A(this,Ps));Q(this,wo,F.fromUnsigned(i,8))}}Ps=new WeakMap,wo=new WeakMap;var Jr,xo,tR;let lJ=(tR=class extends Fc{constructor(n,i,r,s){super(i,r,s);Ie(this,Jr,null);Ie(this,xo,null);this.instruction=n}get length(){if(!A(this,Jr))throw new Error("Instruction not validated");return A(this,Jr).port==="fixed"?2:1}toBytes(){const n=[],i={IN:216,OUT:220};return n[0]=i[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.port==="fixed"?n[1]=this.operation.address.value:n[0]|=2,new Uint8Array(n)}get operation(){if(A(this,xo)===null)throw new Error("Operation not set");return A(this,xo)}toJSON(){return{...super.toJSON(),...A(this,xo)??A(this,Jr)??{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(A(this,Jr))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new se("expects-two-operands").at(this);const n=this.operands[this.instruction==="IN"?0:1],i=this.operands[this.instruction==="IN"?1:0];if(!n.isRegister()||n.value!=="AL"&&n.value!=="AX")throw new se("expects-ax").at(n);const r=n.value==="AX"?16:8;if(i.isRegister()){if(i.value!=="DX")throw new se("expects-dx").at(i);Q(this,Jr,{port:"variable",size:r});return}if(i.isNumberExpression()){Q(this,Jr,{port:"fixed",size:r,address:i.value});return}throw new se("expects-immediate").at(i)}evaluateExpressions(n){if(!A(this,Jr))throw new Error("Instruction not validated");if(A(this,xo))throw new Error("Instruction aready evaluated");const i=A(this,Jr);if(i.port==="fixed"){const r=i.address.evaluate(n);if(!hr.inRange(r))throw new se("io-address-out-of-range",r).at(this);const s=hr.from(r);Q(this,xo,{port:"fixed",size:i.size,address:s})}else Q(this,xo,{port:"variable",size:i.size})}},Jr=new WeakMap,xo=new WeakMap,tR);var So,Ms,nR;let cJ=(nR=class extends Fc{constructor(n,i,r,s){super(i,r,s);Ie(this,So,null);Ie(this,Ms,null);fe(this,"length",2);this.instruction=n}toBytes(){const n=[],i={JC:195,JNC:196,JZ:193,JNZ:34,JS:197,JNS:198,JO:199,JNO:200,JMP:192,CALL:201};return n.push(i[this.instruction]),n.push(this.address.byte.low.unsigned),new Uint8Array(n)}get address(){if(A(this,Ms)===null)throw new Error("Instruction not evaluated");return A(this,Ms)}toJSON(){return{...super.toJSON(),...A(this,Ms)?{address:A(this,Ms).toJSON()}:A(this,So)?{jumpTo:A(this,So)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(A(this,So))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new se("expects-one-operand").at(this);const i=this.operands[0];if(!i.isNumberExpression()||!i.value.isLabel()&&!i.value.isNumberLiteral())throw new se("expects-label").at(i);if(i.value.isLabel()){const r=i.value.value,s=n.getLabelType(r);if(!s)throw new se("label-not-found",r).at(i);if(s!=="instruction")throw new se("label-should-be-an-instruction",r).at(i);Q(this,So,r)}else if(i.value.isNumberLiteral()){const r=i.value.value;if(!Se.inRange(r))throw new se("address-out-of-range",r).at(i);Q(this,Ms,Se.from(r))}}evaluateExpressions(n){if(!A(this,Ms)&&A(this,So)){const i=n.getLabelValue(A(this,So));if(!Se.inRange(i))throw new se("address-out-of-range",i).at(this);Q(this,Ms,Se.from(i))}}},So=new WeakMap,Ms=new WeakMap,nR);var Ts,iR;let uJ=(iR=class extends Fc{constructor(n,i,r,s){super(i,r,s);Ie(this,Ts,null);fe(this,"length",1);this.instruction=n}toBytes(){let i={PUSH:208,POP:212}[this.instruction];return i|=Yl(this.register),new Uint8Array([i])}get register(){if(!A(this,Ts))throw new Error("Instruction not evaluated");return A(this,Ts)}toJSON(){return{...super.toJSON(),...A(this,Ts)?{register:A(this,Ts)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(A(this,Ts))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new se("expects-one-operand").at(this);const n=this.operands[0];if(!n.isRegister()||n.size!==8)throw new se("expects-word-register").at(n);Q(this,Ts,n.value)}evaluateExpressions(){if(!A(this,Ts))throw new Error("Instruction not validated")}},Ts=new WeakMap,iR);var Ki,Rs;class dJ extends Fc{constructor(n,i,r,s){super(i,r,s);Ie(this,Ki,null);Ie(this,Rs,null);this.instruction=n}get length(){if(!A(this,Ki))throw new Error("Instruction not validated");const{mode:n}=A(this,Ki);let i=1;return n==="mem-direct"&&(i+=1),i}toBytes(){const n=[],i={NOT:64,NEG:66,INC:68,DEC:70};switch(n[0]=i[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.mode){case"reg":{n[0]|=Yl(this.operation.reg);break}case"mem-direct":{const r=this.operation.address.byte;n.push(r.low.unsigned);break}case"mem-indirect":break;default:return this.operation}return new Uint8Array(n)}get operation(){if(!A(this,Rs))throw new Error("Instruction not evaluated");return A(this,Rs)}toJSON(){return{...super.toJSON(),...A(this,Rs)??A(this,Ki)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(A(this,Ki))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new se("expects-one-operand").at(this);const i=this.operands[0];if(i.isRegister()){Q(this,Ki,{mode:"reg",size:i.size,reg:i.value});return}if(i.isDirectAddress()){if(i.size==="auto")throw new se("unknown-size").at(i);Q(this,Ki,{mode:"mem-direct",size:i.size,address:i.value});return}if(i.isIndirectAddress()){if(i.size==="auto")throw new se("unknown-size").at(i);Q(this,Ki,{mode:"mem-indirect",size:i.size});return}const r=i.getAsDirectAddress(n);if(r){Q(this,Ki,{mode:"mem-direct",size:r.size,address:r.expression});return}throw new se("destination-cannot-be-immediate").at(i)}evaluateExpressions(n){if(!A(this,Ki))throw new Error("Instruction not validated");if(A(this,Rs))throw new Error("Instruction aready evaluated");const i=A(this,Ki);switch(i.mode){case"reg":{Q(this,Rs,{mode:"reg",size:i.size,reg:i.reg});return}case"mem-direct":{const r=i.address.evaluate(n);if(!Se.inRange(r))throw new se("address-out-of-range",r).at(i.address);const s=Se.from(r);if(n.addressIsReserved(s))throw new se("address-has-code",s).at(i.address);Q(this,Rs,{mode:"mem-direct",size:i.size,address:s});return}case"mem-indirect":{Q(this,Rs,{mode:"mem-indirect",size:i.size});return}default:return i}}}Ki=new WeakMap,Rs=new WeakMap;var Ju;class fJ extends Fc{constructor(n,i,r,s){super(i,r,s);Ie(this,Ju,!1);fe(this,"length",1);this.instruction=n}toBytes(){const n={PUSHF:112,POPF:120,RET:51,CLI:226,STI:227,IRET:225,NOP:240,HLT:241};return new Uint8Array([n[this.instruction]])}validate(){if(A(this,Ju))throw new Error("Instruction already validated");if(this.operands.length>0)throw new se("expects-no-operands").at(this);Q(this,Ju,!0)}evaluateExpressions(){if(!A(this,Ju))throw new Error("Instruction not validated")}}Ju=new WeakMap;class Uy{constructor(e){this.position=e}isRegister(){return this.type==="register"}isIndirectAddress(){return this.type==="indirect-address"}isDirectAddress(){return this.type==="direct-address"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class hJ extends Uy{constructor(n){super(n.position);fe(this,"type","register");fe(this,"value");this.value=n.type}get size(){return RL.includes(this.value)?16:8}toJSON(){return{...super.toJSON(),value:this.value}}}class pJ extends Uy{constructor(n,i){super(i);fe(this,"type","indirect-address");fe(this,"size");n?this.size=n==="BYTE"?8:16:this.size="auto"}toJSON(){return{...super.toJSON(),size:this.size}}}class mJ extends Uy{constructor(n,i,r){super(r);fe(this,"type","direct-address");fe(this,"size");this.value=n,i?this.size=i==="BYTE"?8:16:this.size=8}toJSON(){return{...super.toJSON(),size:this.size,value:this.value.toJSON()}}}class mv extends Uy{constructor(n){super(n.position);fe(this,"type","number-expression");this.value=n}getAsDirectAddress(n){return mv.recursiveGetAsDirectAddress(this.value,n)}static recursiveGetAsDirectAddress(n,i){if(n.isLabel()){const r=n;if(r.offset)return!1;if(!i.labelExists(r.value))throw new se("label-not-found",r.value).at(n.position);const s=i.getLabelType(r.value),o=s==="DB"?8:s==="DW"?16:!1;return o?{size:o,expression:$n.label(r.value,!0,n.position)}:!1}else if(n.isBinaryOperation()){if(n.operator!=="+"&&n.operator!=="-")return!1;const r=mv.recursiveGetAsDirectAddress(n.left,i);return r?{size:r.size,expression:$n.binaryOperation(r.expression,n.operator,n.right,n.position)}:!1}return!1}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function _3(t,e,n){const i=rn.merge(t.position,...e.map(r=>r.position));switch(t.type){case"PUSHF":case"POPF":case"RET":case"IRET":case"CLI":case"STI":case"NOP":case"HLT":return new fJ(t.type,e,n,i);case"MOV":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":case"AND":case"OR":case"XOR":return new oJ(t.type,e,n,i);case"NEG":case"INC":case"DEC":case"NOT":return new dJ(t.type,e,n,i);case"PUSH":case"POP":return new uJ(t.type,e,n,i);case"CALL":case"JZ":case"JNZ":case"JS":case"JNS":case"JC":case"JNC":case"JO":case"JNO":case"JMP":return new cJ(t.type,e,n,i);case"IN":case"OUT":return new lJ(t.type,e,n,i);case"INT":return new aJ(t.type,e,n,i)}}class gJ extends zy{constructor(n,i){super(i);fe(this,"type","origin-change");this.newAddress=n}toJSON(){return{...super.toJSON(),newAddress:this.newAddress}}}let vJ=class{constructor(e){fe(this,"tokens");fe(this,"current",0);this.tokens=e}parse(){this.current=0;const e=[];for(;!this.isAtEnd();)this.match("EOL")||e.push(this.statement());return e}statement(){const e=this.originChangeStatement()??this.endStatement()??this.dataBlockStatement()??this.codeBlockStatement()??this.dataDirectiveStatement()??this.instructionStatement();if(!e){const n=this.peek();throw new se("parser.expected-instruction",n).at(n)}return e}originChangeStatement(){const e=this.match("ORG");if(!e)return null;const n=this.consume("NUMBER",new se("parser.expected-address-after-org")),i=this.parseNumber(n);return this.endOfStatement(),new gJ(i,rn.merge(e.position,n.position))}endStatement(){const e=this.match("END");if(!e)return null;for(;!this.isAtEnd();)if(!this.match("EOL"))throw new se("end-must-be-the-last-statement").at(e);return new Lw(e.position)}dataBlockStatement(){const e=this.match(".DATA");return e?new Lw(e.position):null}codeBlockStatement(){const e=this.match(".CODE");return e?new Lw(e.position):null}dataDirectiveStatement(){const e=this.match("IDENTIFIER"),n=this.match(...Z_);if(e&&!n)throw new se("parser.unexpected-identifier").at(e);if(!n)return null;const i=(e==null?void 0:e.lexeme.toUpperCase())||null,r=[this.dataDirectiveValue()];for(;this.match("COMMA");)r.push(this.dataDirectiveValue());return this.endOfStatement(),sJ(n,r,i)}dataDirectiveValue(){if(this.match("STRING")){const e=this.previous();return new nJ(this.parseString(e),e.position)}if(this.match("QUESTION_MARK")){const e=this.previous();return new iJ(e.position)}return new rJ(this.numberExpression())}instructionStatement(){const e=this.match("LABEL");for(;this.match("EOL"););const n=this.match(...Q_);if(e&&!n){const s=this.peek();throw new se("parser.expected-instruction-after-label",s).at(s)}if(!n)return null;const i=(e==null?void 0:e.lexeme.toUpperCase().slice(0,-1))||null;if(this.isAtEndOfStatement())return _3(n,[],i);const r=[this.instructionOperand()];for(;this.match("COMMA");)r.push(this.instructionOperand());return this.endOfStatement(),_3(n,r,i)}instructionOperand(){if(this.match(...pv)){const n=this.previous();return new hJ(n)}const e=this.match("BYTE","WORD");if(e&&this.consume("PTR",new se("parser.expected-literal-after-literal","PTR",this.previous().type)),this.match("LEFT_BRACKET")){const n=this.previous();if(this.check(...pv)){if(!this.check("BX","BL"))throw new se("parser.indirect-addressing-must-be-bx");const i=this.advance(),r=this.consume("RIGHT_BRACKET",new se("parser.expected-literal-after-literal","]",i.lexeme));return new pJ(e==null?void 0:e.type,rn.merge(e==null?void 0:e.position,n.position,r.position))}else{const i=this.numberExpression(),r=this.consume("RIGHT_BRACKET",new se("parser.expected-literal-after-expression","]"));return new mJ(i,e==null?void 0:e.type,rn.merge(e==null?void 0:e.position,n.position,r.position))}}else if(e)throw new se("parser.expected-literal-after-literal","[","PTR");return new mv(this.numberExpression())}advance(){return this.tokens[this.current++]}check(...e){if(this.isAtEnd())return!1;for(const n of e)if(this.peek().type===n)return!0;return!1}consume(e,n){Array.isArray(e)||(e=[e]);const i=this.match(...e);if(i)return i;throw n||(n=new se("parser.expected-type",e.join(","),this.peek().type)),n.at(this.peek())}endOfStatement(){if(!this.isAtEnd()){if(this.check("EOL"))return this.advance();throw new se("parser.expected-eos").at(this.peek())}}isAtEnd(){return this.peek().type==="EOF"}isAtEndOfStatement(){return this.check("EOL")||this.isAtEnd()}match(...e){return this.check(...e)?this.advance():null}parseNumber(e){return e.lexeme.at(-1)==="h"||e.lexeme.at(-1)==="H"?parseInt(e.lexeme.slice(0,-1),16):e.lexeme.at(-1)==="b"||e.lexeme.at(-1)==="B"?parseInt(e.lexeme.slice(0,-1),2):parseInt(e.lexeme,10)}parseString(e){return e.lexeme.slice(1,-1)}peek(){return this.tokens[this.current]}previous(){return this.tokens[this.current-1]}primaryNE(){if(this.match("NUMBER")){const i=this.previous(),r=this.parseNumber(i);return $n.numberLiteral(r,i.position)}if(this.match("CHARACTER")){const i=this.previous(),r=Xh(i.lexeme.slice(1,-1));return $n.numberLiteral(r,i.position)}if(this.match("LEFT_PAREN")){const i=this.numberExpression();return this.consume("RIGHT_PAREN",new se("parser.unclosed-parenthesis")),i}const e=this.match("OFFSET"),n=this.match("IDENTIFIER");if(e&&!n)throw new se("parser.expected-label-after-offset").at(this.peek());if(!n)throw new se("parser.expected-argument").at(this.peek());return $n.label(n.lexeme.toUpperCase(),e!==null,rn.merge(e==null?void 0:e.position,n.position))}unaryNE(){if(this.match("PLUS","MINUS")){const e=this.previous();if(this.check("PLUS","MINUS"))throw new se("parser.ambiguous-unary").at(this.peek());const n=this.unaryNE();return $n.unaryOperation(e.type==="PLUS"?"+":"-",n,rn.merge(e.position,n.position))}return this.primaryNE()}factorNE(){let e=this.unaryNE();for(;this.match("ASTERISK");){const n=this.unaryNE();e=$n.binaryOperation(e,"*",n,rn.merge(e.position,n.position))}return e}termNE(){let e=this.factorNE();for(;this.match("PLUS","MINUS");){const n=this.previous(),i=this.factorNE();e=$n.binaryOperation(e,n.type==="PLUS"?"+":"-",i,rn.merge(e.position,i.position))}return e}numberExpression(){return this.termNE()}};function IL(t){try{const n=new YX(t).scanTokens(),r=new vJ(n).parse();if(!r.at(-1))throw new se("empty-program");let o=[];const a=new WX;if(o=a.loadStatements(r),o.length>0)return{success:!1,errors:o};if(o=Jh(r,u=>{u.isOriginChange()||u.isEnd()||u.validate(a)},se.from),o.length>0)return{success:!1,errors:o};if(o=a.computeAddresses(r),o.length>0)return{success:!1,errors:o};const l=[],c=[];return o=Jh(r,u=>{if(u.isDataDirective())if(u.directive==="EQU")u.evaluateExpressions(a);else{const d=u.evaluateExpressions(a);return l.push(u),d}else u.isInstruction()&&(u.evaluateExpressions(a),c.push(u))},se.from),o.length>0?{success:!1,errors:o}:{success:!0,data:l,instructions:c,hasORG:a.hasOriginDirective()}}catch(e){return{success:!1,errors:[se.from(e)]}}}class ys{constructor(e){fe(this,"computer");this.computer=e.computer}}const yJ=t=>Se.format(t).slice(-2),bJ=yJ(Se.MAX_ADDRESS),wJ={"address-has-instruction":t=>`Memory address ${Se.format(t)} has an instruction, and cannot be written.`,"address-is-reserved":t=>`Memory address ${Se.format(t)} is reserved, and cannot be written.`,"address-out-of-range":t=>`Memory address ${Se.format(t)} is out of range (max memory address: ${bJ}).`,"device-not-connected":t=>`"${t}" is not connected to the computer.`,"io-memory-not-connected":t=>`Didn't found a module connected to I/O memory address ${hr.format(t)}.`,"io-printer-conflict":()=>"Printer must be connected to either the PIO or the Handshake, but not both.","no-instruction":t=>`Expected instruction at memory address ${Se.format(t)} but none was found.`,"no-program":"No program loaded. Assemble before running.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Unexpected error: ${String(t)}`},xJ=Se.from(Se.MAX_ADDRESS).toString(),SJ={"address-has-instruction":t=>`La dirección de memoria ${Se.format(t)} tiene una instrucción, y no se puede escribir.`,"address-is-reserved":t=>`La dirección de memoria ${Se.format(t)} está reservada, y no se puede escribir.`,"address-out-of-range":t=>`La dirección de memoria ${Se.format(t)} está fuera de rango (dirección máxima de memoria: ${xJ}).`,"device-not-connected":t=>`"${t}" no está conectado a la computadora.`,"io-memory-not-connected":t=>`No se encontró ningún módulo conectado a la dirección de memoria E/S ${hr.format(t)}.`,"io-printer-conflict":()=>"La impresora debe estar conectada a la PIO o al Handshake, pero no a ambos.","no-instruction":t=>`Se esperaba una instrucción en la dirección de memoria ${Se.format(t)} pero no se encontró ninguna.`,"no-program":"No hay ningún programa cargado. Ensamblá antes de ejecutar.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Error inesperado: ${String(t)}`},kJ=G_({en:wJ,es:SJ});class qt extends Error{constructor(n,...i){super();fe(this,"code");fe(this,"context");this.code=n,this.context=i,n==="unexpected-error"&&console.error("[Unexpected Simulator Error]",...i)}translate(n){return kJ(n,this.code,...this.context)}get message(){return this.translate("en")}toString(){return this.message}static from(n){return n instanceof qt?n:new qt("unexpected-error",n)}}class qo{constructor(e){this.statement=e}get name(){return this.statement.instruction}get start(){return this.statement.start}get position(){return this.statement.position}*consumeInstruction(e,n,i){if(yield*e.cpu.setMAR("IP"),!(yield*e.cpu.useBus("mem-read"))){const s=e.cpu.getRegister("IP").toString("hex");throw new qt("unexpected-error",`Could not read instruction byte at address ${s}h`)}yield*e.cpu.updateWordRegister("IP",s=>s.add(1)),i||(yield*e.cpu.getMBR(n))}}var Qv,DL;class _J extends qo{constructor(){super(...arguments);Ie(this,Qv)}get operation(){return this.statement.operation}*execute(n){const{mode:i,size:r,out:s,src:o}=this.operation;if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Ct(this,Qv,DL).call(this),willUse:{id:this.operation.mode==="mem<-imd"&&this.operation.out.mode==="direct",ri:this.operation.mode==="mem<-imd"&&this.operation.out.mode==="direct"&&this.name!=="CMP"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},i==="reg<-reg"||i==="reg<-mem"||i==="reg<-imd")i!=="reg<-mem"&&(r===8?yield*n.cpu.copyByteRegister(s,"left.l"):yield*n.cpu.copyWordRegister(s,"left"));else{if(s.mode==="direct"?yield*this.consumeInstruction(n,"ri.l"):yield*n.cpu.copyByteRegister("BL","ri.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(this.operation.mode==="mem<-imd"?yield*n.cpu.getMBR("id.l"):yield*n.cpu.getMBR("left.l"),r===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}if(i==="reg<-reg"||i==="mem<-reg")r===8?yield*n.cpu.copyByteRegister(o,"right.l"):yield*n.cpu.copyWordRegister(o,"right");else if(i==="reg<-imd"||i==="mem<-imd")yield*this.consumeInstruction(n,"right.l"),r===16&&(yield*this.consumeInstruction(n,"right.h"));else{if(o.mode==="direct"?yield*this.consumeInstruction(n,"ri.l"):yield*n.cpu.copyByteRegister("BL","ri.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("right.l"),r===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("right.h")}i==="reg<-mem"&&(r===8?yield*n.cpu.copyByteRegister(s,"left.l"):yield*n.cpu.copyWordRegister(s,"left"))}i==="mem<-imd"&&(yield*n.cpu.copyByteRegister("id.l","left.l")),yield{type:"cpu:cycle.update",phase:"execute"};const a=r===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left"),l=r===8?n.cpu.getRegister("right.l"):n.cpu.getRegister("right");let c;const u={};switch(this.name){case"AND":case"OR":case"XOR":{const d=this.name==="AND"?a.signed&l.signed:this.name==="OR"?a.signed|l.signed:a.signed^l.signed;c=F.fromSigned(d,r),u.CF=!1,u.OF=!1;break}case"ADD":case"ADC":{const d=this.name==="ADC"&&n.cpu.getFlag("CF")?1:0,f=a.unsigned+l.unsigned+d;f>F.maxValue(r)?(u.CF=!0,c=F.fromUnsigned(f-F.maxValue(r)-1,r)):(u.CF=!1,c=F.fromUnsigned(f,r)),u.OF=a.signed>=0&&l.signed>=0&&c.signed<0||a.signed<0&&l.signed<0&&c.signed>=0;break}case"SUB":case"SBB":case"CMP":{const d=this.name==="SBB"&&n.cpu.getFlag("CF")?1:0,f=a.unsigned-l.unsigned-d;f<0?(u.CF=!0,c=F.fromUnsigned(f+F.maxValue(r)+1,r)):(u.CF=!1,c=F.fromUnsigned(f,r)),u.OF=a.signed>=0&&l.signed<0&&c.signed<0||a.signed<0&&l.signed>=0&&c.signed>=0;break}}if(u.ZF=c.isZero(),u.SF=c.signed<0,yield*n.cpu.aluExecute(this.name==="CMP"?"SUB":this.name,c,u),this.name==="CMP")return!0;if(yield{type:"cpu:cycle.update",phase:"writeback"},i==="reg<-reg"||i==="reg<-mem"||i==="reg<-imd")r===8?yield*n.cpu.copyByteRegister("result.l",s):yield*n.cpu.copyWordRegister("result",s);else{if(r===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",d=>d.add(-1))}if(yield*n.cpu.setMBR("result.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}Qv=new WeakSet,DL=function(){const{mode:n,out:i,src:r}=this.operation;switch(n){case"reg<-reg":return[i,r];case"reg<-mem":{const s=r.mode==="direct"?r.address.toString():"BL";return[i,`[${s}]`]}case"reg<-imd":return[i,`${r.toString("hex")}h`];case"mem<-reg":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,r];case"mem<-imd":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,`${r.toString("hex")}h`];default:return n}};var ey,LL;class CJ extends qo{constructor(){super(...arguments);Ie(this,ey)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Ct(this,ey,LL).call(this),willUse:{ri:!1}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister(this.operation.reg,"left.l"):yield*n.cpu.copyWordRegister(this.operation.reg,"left");else{if(this.operation.mode==="mem-direct"?yield*this.consumeInstruction(n,"ri.l"):yield*n.cpu.copyByteRegister("BL","ri.l"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("left.l"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",o=>o.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}yield{type:"cpu:cycle.update",phase:"execute"};const i=this.operation.size===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left");let r;const s={};switch(this.name){case"NOT":{r=F.fromSigned(~i.signed,this.operation.size),s.CF=!1,s.OF=!1;break}case"NEG":{r=F.fromSigned(-i.signed,this.operation.size),s.CF=!i.isZero(),s.OF=i.signed===F.minSignedValue(this.operation.size);break}case"INC":{yield*n.cpu.updateWordRegister("right",F.fromSigned(1,16));const o=i.unsigned+1;o>F.maxValue(this.operation.size)?(s.CF=!0,r=F.fromUnsigned(o-F.maxValue(this.operation.size)-1,this.operation.size)):(s.CF=!1,r=F.fromUnsigned(o,this.operation.size)),s.OF=i.signed>=0&&r.signed<0;break}case"DEC":{yield*n.cpu.updateWordRegister("right",F.fromSigned(1,16));const o=i.unsigned-1;o<0?(s.CF=!0,r=F.fromUnsigned(o+F.maxValue(this.operation.size)+1,this.operation.size)):(s.CF=!1,r=F.fromUnsigned(o,this.operation.size)),s.OF=i.signed<0&&r.signed>=0;break}}if(s.ZF=r.isZero(),s.SF=r.signed<0,yield*n.cpu.aluExecute(this.name==="INC"?"ADD":this.name==="DEC"?"SUB":this.name,r,s),yield{type:"cpu:cycle.update",phase:"writeback"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister("result.l",this.operation.reg):yield*n.cpu.copyWordRegister("result",this.operation.reg);else{if(this.operation.size===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",o=>o.add(-1))}if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.l"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}ey=new WeakSet,LL=function(){switch(this.operation.mode){case"reg":return[this.operation.reg];case"mem-direct":return[`[${this.operation.address.toString()}]`];case"mem-indirect":return["[BL]"];default:return this.operation}};class EJ extends qo{get number(){return this.statement.value}*execute(e){return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.number.toString("uint")],willUse:{ri:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"ri.l"),yield{type:"cpu:cycle.update",phase:"execute"},yield*e.cpu.startInterrupt(this.number)}}var ty,jL;class AJ extends qo{constructor(){super(...arguments);Ie(this,ty)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Ct(this,ty,jL).call(this),willUse:{ri:!1}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.port==="fixed")yield*super.consumeInstruction(n,"ri.l");else if(yield*n.cpu.copyWordRegister("DX","ri"),!n.cpu.getRegister("DX").high.isZero())return yield{type:"cpu:error",error:new qt("io-memory-not-connected",n.cpu.getRegister("DX"))},!1;if(yield{type:"cpu:cycle.update",phase:"writeback"},this.name==="IN"){if(yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("io-read")))return!1;if(yield*n.cpu.getMBR("AL"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",i=>i.add(1)),yield*n.cpu.setMAR("ri"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new qt("io-memory-not-connected",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-read")))return!1;yield*n.cpu.getMBR("AH")}}else{if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AL"),!(yield*n.cpu.useBus("io-write")))return!1;if(this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",i=>i.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AH"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new qt("io-memory-not-connected",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-write")))return!1}}return!0}}ty=new WeakSet,jL=function(){const n=[];return this.operation.port==="variable"?n.push("DX"):n.push(this.operation.address.toString()),this.operation.size===8?n.push("AL"):n.push("AX"),this.name==="IN"?n.reverse():n};class NJ extends qo{get jumpTo(){return this.statement.address}*execute(e){yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.jumpTo.toString(!1)],willUse:{id:!1,ri:this.name==="CALL"}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"ri.l"),yield{type:"cpu:cycle.update",phase:"execute"};let n;switch(this.name){case"JC":n=e.cpu.getFlag("CF");break;case"JNC":n=!e.cpu.getFlag("CF");break;case"JZ":n=e.cpu.getFlag("ZF");break;case"JNZ":n=!e.cpu.getFlag("ZF");break;case"JS":n=e.cpu.getFlag("SF");break;case"JNS":n=!e.cpu.getFlag("SF");break;case"JO":n=e.cpu.getFlag("OF");break;case"JNO":n=!e.cpu.getFlag("OF");break;case"CALL":case"JMP":n=!0;break;default:return this.name}if(n)if(this.name==="CALL"){if(!(yield*e.cpu.pushToStack("IP.l")))return!1;yield*e.cpu.copyByteRegister("ri.l","IP.l")}else yield*e.cpu.copyByteRegister("ri.l","IP.l");return!0}}class PJ extends qo{*execute(e){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},this.name==="CLI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!1});else if(this.name==="STI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!0});else if(this.name==="HLT")return yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield{type:"cpu:halt"},!1;return!0}}function KS(t){switch(t){case"AL":return["AX","low"];case"AH":return["AX","high"];case"BL":return["BX","low"];case"BH":return["BX","high"];case"CL":return["CX","low"];case"CH":return["CX","high"];case"DL":return["DX","low"];case"DH":return["DX","high"];default:{const[e,n]=t.split(".");return e==="MBR"?[e,null]:[e,n==="l"?"low":n==="h"?"high":null]}}}function MJ(t){switch(t){case"AX":return["AL","AH"];case"BX":return["BL","BH"];case"CX":return["CL","CH"];case"DX":return["DL","DH"];case"SP":return["SP.l","SP.h"];case"IP":return["IP.l","IP.h"];case"ri":return["ri.l","ri.h"];case"id":return["id.l","id.h"];case"left":return["left.l","left.h"];case"right":return["right.l","right.h"];case"result":return["result.l","result.h"];case"FLAGS":return["FLAGS.l","FLAGS.h"];default:return[t,null]}}var ny,$L;class TJ extends qo{constructor(){super(...arguments);Ie(this,ny)}get operation(){return this.statement.operation}*execute(n){const{mode:i,size:r,out:s,src:o}=this.operation;switch(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:Ct(this,ny,$L).call(this),willUse:{id:!1,ri:this.operation.mode==="mem<-imd"&&this.operation.out.mode==="direct"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},(this.operation.mode==="reg<-mem"||this.operation.mode==="mem<-reg"||this.operation.mode==="mem<-imd")&&((this.operation.mode==="reg<-mem"?this.operation.src.mode:this.operation.out.mode)==="direct"?yield*super.consumeInstruction(n,"ri.l"):(this.operation.mode==="mem<-reg"||this.operation.mode==="reg<-mem")&&(yield*n.cpu.copyByteRegister("BL","ri.l"))),this.operation.mode==="reg<-imd"&&(r===8&&typeof s=="string"&&(yield*super.consumeInstruction(n,s)),this.operation.size===16&&(yield*super.consumeInstruction(n,"id.h"))),this.operation.mode==="mem<-imd"&&(yield*super.consumeInstruction(n,"ri.l",!0),this.operation.size===16&&(yield*super.consumeInstruction(n,"id.h"))),yield{type:"cpu:cycle.update",phase:"writeback"},i){case"reg<-reg":return r===8?yield*n.cpu.copyByteRegister(o,s):yield*n.cpu.copyWordRegister(o,s),!0;case"reg<-mem":return yield*n.cpu.setMAR("ri"),(yield*n.cpu.useBus("mem-read"))?(r===8&&(yield*n.cpu.getMBR(s)),!0):!1;case"reg<-imd":return r===16&&(yield*n.cpu.setMBR("id.h")),!0;case"mem<-reg":{const[a]=MJ(o);return yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR(a),!!(yield*n.cpu.useBus("mem-write"))}case"mem<-imd":return s.mode==="direct"||(yield*n.cpu.copyByteRegister("BL","ri.l")),yield*n.cpu.setMAR("ri"),!(!(yield*n.cpu.useBus("mem-write"))||r===16&&(yield*n.cpu.updateWordRegister("ri",a=>a.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("id.h"),!(yield*n.cpu.useBus("mem-write"))));default:return i}}}ny=new WeakSet,$L=function(){const{mode:n,out:i,src:r}=this.operation;switch(n){case"reg<-reg":return[i,r];case"reg<-mem":{const s=r.mode==="direct"?r.address.toString():"BL";return[i,`[${s}]`]}case"reg<-imd":return[i,`${r.toString("hex")}h`];case"mem<-reg":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,r];case"mem<-imd":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,`${r.toString("hex")}h`];default:return n}};class RJ extends qo{*execute(e){return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{id:!1}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},!(!(yield*e.cpu.popFromStack("IP.l"))||this.name==="IRET"&&!(yield*e.cpu.popFromStack("FLAGS.l")))}}class OJ extends qo{*execute(e){const n=this.statement.instruction==="PUSH"||this.statement.instruction==="POP"?this.statement.register:"FLAGS";if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:n!=="FLAGS"?[n]:[],willUse:{id:!1}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},this.name==="PUSH"||this.name==="PUSHF"){const i=n==="FLAGS"?"FLAGS.l":`${n[0]}L`;return yield*e.cpu.pushToStack(i)}else{const i=n==="FLAGS"?"FLAGS.l":`${n[0]}L`;return!!(yield*e.cpu.popFromStack(i))}}}function IJ(t){switch(t.instruction){case"MOV":return new TJ(t);case"AND":case"OR":case"XOR":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":return new _J(t);case"NOT":case"NEG":case"INC":case"DEC":return new CJ(t);case"IN":case"OUT":return new AJ(t);case"PUSH":case"POP":case"PUSHF":case"POPF":return new OJ(t);case"JC":case"JNC":case"JZ":case"JNZ":case"JS":case"JNS":case"JO":case"JNO":case"JMP":case"CALL":return new NJ(t);case"RET":case"IRET":return new RJ(t);case"INT":return new EJ(t);case"CLI":case"STI":case"NOP":case"HLT":return new PJ(t)}}function DJ(t){for(const[e,n]of J_)if(n.unsigned===t.unsigned)return e;return null}function*LJ(t,e){switch(e){case 0:return yield{type:"cpu:int.0"},!1;case 3:{yield{type:"cpu:int.3"};break}case 6:{if(yield{type:"cpu:int.6"},!("keyboard"in t.io))return yield{type:"cpu:error",error:new qt("device-not-connected","keyboard")},!1;if(yield*t.cpu.setMAR("IP"),!(yield*t.cpu.useBus("mem-read"))||(yield*t.cpu.updateWordRegister("IP",r=>r.add(1)),yield*t.cpu.getMBR("IR"),!(yield*t.cpu.pushToStack("AL"))))return!1;const n=t.io.keyboard;if(!n)return yield{type:"cpu:error",error:new qt("device-not-connected","keyboard")},!1;const i=yield*n.readChar();if(yield*t.cpu.updateByteRegister("AL",i),yield*t.cpu.copyByteRegister("BL","ri.l"),yield*t.cpu.setMAR("ri"),yield*t.cpu.setMBR("AL"),!(yield*t.cpu.useBus("mem-write"))||!(yield*t.cpu.popFromStack("AL")))return!1;break}case 7:{if(yield{type:"cpu:int.7"},!("screen"in t.io))return yield{type:"cpu:error",error:new qt("device-not-connected","screen")},!1;if(!(yield*t.cpu.pushToStack("DL")))return!1;let n=216;for(;!t.cpu.getRegister("AL").isZero();){if(yield*t.cpu.copyWordRegister("BX","ri"),yield*t.cpu.setMAR("ri"),!(yield*t.cpu.useBus("mem-read"))||(yield*t.cpu.getMBR("DL"),yield*t.cpu.updateByteRegister("ri.l",F.fromUnsigned(n,8)),yield*t.cpu.setMAR("ri"),yield*t.cpu.setMBR("DL"),!(yield*t.cpu.useBus("mem-write"))))return!1;const i=t.cpu.getRegister("DL");if(t.io.screen)yield*t.io.screen.sendChar(i);else return yield{type:"cpu:error",error:new qt("device-not-connected","screen")},!1;n++,yield*t.cpu.copyWordRegister("BX","left"),yield*t.cpu.updateWordRegister("right",F.fromUnsigned(1,16));const r=t.cpu.getRegister("BX").add(1);yield*t.cpu.aluExecute("ADD",r,{CF:!1,OF:r.signed<0,SF:r.signed<0,ZF:!1}),yield*t.cpu.copyWordRegister("result","BX"),yield*t.cpu.copyByteRegister("AL","left.l"),yield*t.cpu.updateByteRegister("right.l",F.fromUnsigned(1,8));const s=t.cpu.getRegister("AL").add(-1);yield*t.cpu.aluExecute("SUB",s,{CF:!1,OF:s.signed===F.maxSignedValue(8),SF:s.signed<0,ZF:s.isZero()}),yield*t.cpu.copyByteRegister("result.l","AL")}if(!(yield*t.cpu.popFromStack("DL")))return!1;break}default:throw new Error("Invalid interrupt number")}return!(!(yield*t.cpu.popFromStack("IP.l"))||!(yield*t.cpu.popFromStack("FLAGS.l")))}var Zu,qe,wr,Ei,un,au,yr,rR;let jJ=(rR=class extends ys{constructor(n){super(n);Ie(this,un);Ie(this,Zu);Ie(this,qe);Ie(this,wr);Ie(this,Ei);n.data==="unchanged"?(Q(this,qe,A(n.previous.cpu,qe)),Q(this,wr,A(n.previous.cpu,wr)),Q(this,Ei,A(n.previous.cpu,Ei))):(Q(this,qe,{AX:F.zero(16),BX:F.zero(16),CX:F.zero(16),DX:F.zero(16),SP:F.zero(16),IP:F.zero(16),IR:F.zero(8),ri:F.zero(16),id:F.zero(16),left:F.zero(16),right:F.zero(16),result:F.zero(16),FLAGS:F.zero(16)}),Q(this,wr,F.zero(16)),Q(this,Ei,F.zero(8))),A(this,qe).SP=F.fromUnsigned(Se.MAX_ADDRESS,16);const i=n.program.instructions.some(o=>o.isInstruction()&&o.instruction==="INT"),r=n.hasORG??!1;let s;r?s=32:i?s=8:s=0,A(this,qe).IP=F.fromUnsigned(s,16),A(this,qe).ri=F.fromUnsigned(0,16),A(this,qe).id=F.fromUnsigned(0,16),Ct(this,un,yr).call(this,"IF",!0),Q(this,Zu,new Map);for(const o of n.program.instructions){const a=IJ(o);A(this,Zu).set(a.start.value,a)}}*run(){var n;for(;;){const i=A(this,qe).IP,r=DJ(i);if(r!==null){if(!(yield*LJ(this.computer,r)))return}else{const s=A(this,Zu).get(i.unsigned);if(!s){yield{type:"cpu:error",error:new qt("no-instruction",A(this,qe).IP)};return}if(!(yield*s.execute(this.computer)))return}if(this.getFlag("IF")&&((n=this.computer.io.pic)!=null&&n.isINTRActive())){yield{type:"cpu:cycle.interrupt"};const s=yield*this.computer.io.pic.handleINTR();yield*this.getMBR("ri.l"),yield*this.updateByteRegister("ri.h",F.zero(8)),yield*this.startInterrupt(s)}yield{type:"cpu:cycle.end"}}}*startInterrupt(n){if(!(yield*this.pushToStack("FLAGS.l"))||(yield*this.updateFLAGS({IF:!1}),!(yield*this.pushToStack("IP.l"))))return!1;const i=F.fromUnsigned(n.unsigned,8);return yield*this.updateByteRegister("ri.l",i),yield*this.copyWordRegister("ri","IP"),yield*this.setMAR("ri"),(yield*this.useBus("mem-read"))?(yield*this.getMBR("IP.l"),!0):!1}toJSON(){return{...Object.entries(A(this,qe)).reduce((i,[r,s])=>({...i,[r]:s.toJSON()}),{}),MAR:A(this,wr).toJSON(),MBR:A(this,Ei).toJSON()}}getRegister(n){const[i,r]=KS(n);return r==="low"?A(this,qe)[i].low:r==="high"?A(this,qe)[i].high:A(this,qe)[i]}*copyByteRegister(n,i){const r=this.getRegister(n);Ct(this,un,au).call(this,i,r),yield{type:"cpu:register.copy",size:8,src:n,dest:i}}*copyWordRegister(n,i){const r=this.getRegister(n);Ct(this,un,au).call(this,i,r.withHigh(F.zero(8))),yield{type:"cpu:register.copy",size:16,src:n,dest:i}}*updateByteRegister(n,i){i=typeof i=="function"?i(this.getRegister(n)):i,Ct(this,un,au).call(this,n,i),yield{type:"cpu:register.update",size:8,register:n,value:i}}*updateWordRegister(n,i){i=typeof i=="function"?i(this.getRegister(n)):i,Ct(this,un,au).call(this,n,i),yield{type:"cpu:register.update",size:16,register:n,value:i}}getFlag(n){switch(n){case"CF":return A(this,qe).FLAGS.bit(1);case"ZF":return A(this,qe).FLAGS.bit(0);case"SF":return A(this,qe).FLAGS.bit(3);case"IF":return A(this,qe).FLAGS.bit(4);case"OF":return A(this,qe).FLAGS.bit(2);default:throw new TypeError(`Invalid flag ${n}`)}}*updateFLAGS(n){typeof n.CF=="boolean"&&Ct(this,un,yr).call(this,"CF",n.CF),typeof n.ZF=="boolean"&&Ct(this,un,yr).call(this,"ZF",n.ZF),typeof n.SF=="boolean"&&Ct(this,un,yr).call(this,"SF",n.SF),typeof n.IF=="boolean"&&Ct(this,un,yr).call(this,"IF",n.IF),typeof n.OF=="boolean"&&Ct(this,un,yr).call(this,"OF",n.OF),yield{type:"cpu:register.update",size:16,register:"FLAGS",value:A(this,qe).FLAGS}}*aluExecute(n,i,r){A(this,qe).result=i.is8bits()?A(this,qe).result.withLow(i):i,typeof r.CF=="boolean"&&Ct(this,un,yr).call(this,"CF",r.CF),typeof r.ZF=="boolean"&&Ct(this,un,yr).call(this,"ZF",r.ZF),typeof r.SF=="boolean"&&Ct(this,un,yr).call(this,"SF",r.SF),typeof r.IF=="boolean"&&Ct(this,un,yr).call(this,"IF",r.IF),typeof r.OF=="boolean"&&Ct(this,un,yr).call(this,"OF",r.OF),yield{type:"cpu:alu.execute",operation:n,size:i.size,result:A(this,qe).result,flags:A(this,qe).FLAGS}}*setMAR(n){const i=this.getRegister(n);Q(this,wr,i.withHigh(F.zero(8))),yield{type:"cpu:mar.set",register:n}}*getMBR(n){Ct(this,un,au).call(this,n,A(this,Ei)),yield{type:"cpu:mbr.get",register:n}}*setMBR(n){const i=this.getRegister(n);Q(this,Ei,i),yield{type:"cpu:mbr.set",register:n}}*useBus(n){switch(n){case"mem-read":{yield{type:"cpu:rd.on"};const i=yield*this.computer.memory.read(A(this,wr));return i?(Q(this,Ei,i),yield{type:"bus:reset"},!0):!1}case"mem-write":return yield{type:"cpu:wr.on"},(yield*this.computer.memory.write(A(this,wr),A(this,Ei)))?(yield{type:"bus:reset"},!0):!1;case"io-read":{yield{type:"cpu:iom.on"};const i=yield*this.computer.io.chipSelect(A(this,wr).low);if(!i)return!1;yield{type:"cpu:rd.on"};const r=yield*this.computer.io.read(i);return r?(Q(this,Ei,r),yield{type:"bus:reset"},!0):!1}case"io-write":{yield{type:"cpu:iom.on"};const i=yield*this.computer.io.chipSelect(A(this,wr).low);return!i||(yield{type:"cpu:wr.on"},!(yield*this.computer.io.write(i,A(this,Ei))))?!1:(yield{type:"bus:reset"},!0)}case"intr-read":{if(!this.computer.io.pic)return!1;const i=yield*this.computer.io.pic.handleINTR();return Q(this,Ei,i),yield{type:"bus:reset"},!0}default:return n}}*pushToStack(n){let i=this.getRegister("SP");return Se.inRange(i.unsigned-1)?(i=i.add(-1),yield*this.updateWordRegister("SP",i),yield*this.setMAR("SP"),yield*this.setMBR(n),(yield*this.useBus("mem-write"))?Se.inRange(i.unsigned-1)?!0:(yield{type:"cpu:error",error:new qt("stack-overflow")},!1):!1):(yield{type:"cpu:error",error:new qt("stack-overflow")},!1)}*popFromStack(n){let i=this.getRegister("SP");return Se.inRange(i)?(yield*this.setMAR("SP"),(yield*this.useBus("mem-read"))?(yield*this.getMBR(n),i=i.add(1),yield*this.updateWordRegister("SP",i),!0):!1):(yield{type:"cpu:error",error:new qt("stack-underflow")},!1)}},Zu=new WeakMap,qe=new WeakMap,wr=new WeakMap,Ei=new WeakMap,un=new WeakSet,au=function(n,i){const[r,s]=KS(n);if(s===null){if(A(this,qe)[r].size!==i.size)throw new TypeError(`Cannot set register ${n} with value ${i} of different size`);A(this,qe)[r]=i}else{if(!i.is8bits())throw new TypeError(`Cannot set register ${n} with value ${i} of different size`);s==="low"?A(this,qe)[r]=A(this,qe)[r].withLow(i):A(this,qe)[r]=A(this,qe)[r].withHigh(i)}},yr=function(n,i){switch(n){case"CF":A(this,qe).FLAGS=A(this,qe).FLAGS.withBit(1,i);return;case"ZF":A(this,qe).FLAGS=A(this,qe).FLAGS.withBit(0,i);return;case"SF":A(this,qe).FLAGS=A(this,qe).FLAGS.withBit(3,i);return;case"IF":A(this,qe).FLAGS=A(this,qe).FLAGS.withBit(4,i);return;case"OF":A(this,qe).FLAGS=A(this,qe).FLAGS.withBit(2,i);return;default:throw new TypeError(`Invalid flag ${n}`)}},rR);var Da,qi,ko,Sa;let FL=(Da=class extends ys{constructor(n){super(n);Ie(this,qi);Ie(this,ko);Ie(this,Sa,!1);n.data==="unchanged"&&n.previous.io.printer?(Q(this,qi,A(n.previous.io.printer,qi)),Q(this,ko,A(n.previous.io.printer,ko)),Q(this,Sa,A(n.previous.io.printer,Sa))):(Q(this,qi,[]),Q(this,ko,""),Q(this,Sa,!1))}get busy(){return A(this,qi).length>=Da.BUFFER_SIZE}*setStrobe(n){const i=A(this,Sa);if(i===n)return;if(Q(this,Sa,n),n?yield{type:"printer:strobe.on"}:yield{type:"printer:strobe.off"},n&&!i&&!this.busy){const s=yield*this.readData();A(this,qi).push(s),yield{type:"printer:buffer.add",char:s},yield*this.updateBusy(!0),this.busy||(yield*this.updateBusy(!1))}}*clear(){Q(this,ko,""),yield{type:"printer:paper.replace"}}*print(){if(A(this,qi).length===0)return;const[n,...i]=A(this,qi);if(Q(this,qi,i),yield{type:"printer:buffer.pop",char:n},i.length===Da.BUFFER_SIZE-1&&(yield*this.updateBusy(!1)),n.unsigned===12)yield*this.clear();else{const r=X_(n.unsigned);Q(this,ko,A(this,ko)+r),yield{type:"printer:paper.print",char:r}}}get hasPending(){return A(this,qi).length>0}toJSON(){return{paper:A(this,ko),buffer:[...A(this,qi).map(n=>n.unsigned)]}}},qi=new WeakMap,ko=new WeakMap,Sa=new WeakMap,fe(Da,"BUFFER_SIZE",5),Da);class Vy extends ys{}let BL=class extends Vy{constructor(n){super(n);fe(this,"PA");fe(this,"PB");fe(this,"CA");fe(this,"CB");fe(this,"leds",null);fe(this,"printer",null);fe(this,"switches",null);n.data==="unchanged"&&n.previous.io.pio?(this.PA=n.previous.io.pio.PA,this.PB=n.previous.io.pio.PB,this.CA=n.previous.io.pio.CA,this.CB=n.previous.io.pio.CB):n.data==="randomize"?(this.PA=F.random(8),this.PB=F.random(8),this.CA=F.random(8),this.CB=F.random(8)):(this.PA=F.zero(8),this.PB=F.zero(8),this.CA=F.zero(8),this.CB=F.zero(8))}chipSelect(n){return n=Number(n),n===48?"PA":n===49?"PB":n===50?"CA":n===51?"CB":null}*read(n){yield{type:"pio:read",register:n};let i;if(n==="PA")i=this.PA;else if(n==="PB")i=this.PB;else if(n==="CA")i=this.CA;else if(n==="CB")i=this.CB;else return n;return yield{type:"pio:read.ok",value:i},i}*write(n,i){if(yield{type:"pio:write",register:n,value:i},n==="PA")this.PA=i;else if(n==="PB")this.PB=i;else if(n==="CA")this.CA=i;else if(n==="CB")this.CB=i;else return n;yield{type:"pio:register.update",register:n,value:i},n==="PA"||n==="CA"?yield*this.updatePort("A"):yield*this.updatePort("B"),yield{type:"pio:write.ok"}}line(n,i){return n==="A"?this.CA.bit(i)?"input":"output":this.CB.bit(i)?"input":"output"}toJSON(){return{PA:this.PA.toJSON(),PB:this.PB.toJSON(),CA:this.CA.toJSON(),CB:this.CB.toJSON()}}};class C3 extends BL{constructor(e){super(e),this.PA=this.PA.withBit(1,!1);const n=this;this.printer=new class extends FL{*readData(){const i=n.readData();return yield{type:"printer:data.read",char:i},i}*updateBusy(i){i?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*n.updatePort("A")}}(e)}readData(){const e=this.PB.unsigned&~this.CB.unsigned;return F.fromUnsigned(e,8)}*updatePort(e){if(e==="B")return;let n=this.PA.unsigned;const i=this.CA.unsigned,r=this.printer.busy;n=n&~i,this.line("A",0)==="input"&&r&&(n|=1),n!==this.PA.unsigned&&(this.PA=F.fromUnsigned(n,8),yield{type:"pio:register.update",register:"PA",value:this.PA}),this.line("A",1)==="output"&&(yield*this.printer.setStrobe(this.PA.bit(1)))}}var _o,sR;let $J=(sR=class extends ys{constructor(n){super(n);Ie(this,_o);n.data==="unchanged"&&n.previous.io.leds?Q(this,_o,A(n.previous.io.leds,_o)):n.data==="randomize"?Q(this,_o,F.random(8)):Q(this,_o,F.zero(8))}get state(){return A(this,_o)}*update(n){yield{type:"leds:update",state:n}}toJSON(){return A(this,_o).toJSON()}},_o=new WeakMap,sR);var xr,oR;let FJ=(oR=class extends ys{constructor(n){super(n);Ie(this,xr);n.data==="unchanged"&&n.previous.io.switches?Q(this,xr,A(n.previous.io.switches,xr)):n.data==="randomize"?Q(this,xr,F.random(8)):Q(this,xr,F.zero(8))}get state(){return A(this,xr)}*toggle(n){Q(this,xr,A(this,xr).withBit(n,!A(this,xr).bit(n))),yield{type:"switches:toggle",index:n}}toJSON(){return A(this,xr).toJSON()}},xr=new WeakMap,oR);class BJ extends BL{constructor(e){super(e);const n=this;this.leds=new class extends $J{}(e),this.switches=new class extends FJ{*toggle(i){yield*super.toggle(i),yield*n.updatePort("A")}}(e)}*updatePort(e){if(e==="A"){const n=this.switches.state.unsigned;let i=this.PA.unsigned;const r=this.CA.unsigned;i=n&r|i&~r,i!==this.PA.unsigned&&(this.PA=F.fromUnsigned(i,8),yield{type:"pio:register.update",register:"PA",value:this.PA})}else{let n=this.PB.unsigned;const i=this.CB.unsigned;n=n&~i,yield*this.leds.update(F.fromUnsigned(n,8))}}}let zJ=class extends ys{*tick(){yield{type:"clock:tick"},this.computer.io.timer&&(yield*this.computer.io.timer.tick())}toJSON(){return null}},UJ=class extends ys{*press(){yield{type:"f10:press"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(0))}toJSON(){return null}};var Qu,aR;let VJ=(aR=class extends ys{constructor(){super(...arguments);Ie(this,Qu,null)}*readChar(){yield{type:"keyboard:listen-key"};const n=A(this,Qu);if(!n)throw new Error("INT 6 was not given a valid 8-bit character!");return yield{type:"keyboard:read",char:n},Q(this,Qu,null),n}setLastCharRead(n){Q(this,Qu,n)}toJSON(){return null}},Qu=new WeakMap,aR);var Yi,lR;let HJ=(lR=class extends ys{constructor(n){super(n);Ie(this,Yi);n.data==="unchanged"&&n.previous.io.screen?Q(this,Yi,A(n.previous.io.screen,Yi)):Q(this,Yi,"")}clear(){return this.sendChar(F.fromUnsigned(12,8))}*sendChar(n){switch(n.unsigned){case 8:Q(this,Yi,A(this,Yi).slice(0,-1));break;case 10:Q(this,Yi,A(this,Yi)+`
`);break;case 12:Q(this,Yi,"");break;default:Q(this,Yi,A(this,Yi)+X_(n.unsigned));break}yield{type:"screen:send-char",char:n,output:A(this,Yi)}}toJSON(){return A(this,Yi)}},Yi=new WeakMap,lR);var Co,fi,cR;let WJ=(cR=class extends Vy{constructor(n){super(n);Ie(this,Co);Ie(this,fi);fe(this,"printer");n.data==="randomize"?Q(this,Co,F.random(8)):Q(this,Co,F.zero(8)),Q(this,fi,F.zero(8));const i=this;this.printer=new class extends FL{*readData(){const r=A(i,Co);return yield{type:"printer:data.read",char:r},r}*updateBusy(r){r?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*i.updateBusy(r)}}(n)}get interrupts(){return A(this,fi).bit(7)}chipSelect(n){return n=Number(n),n===64?"DATA":n===65?"STATE":null}*read(n){yield{type:"handshake:read",register:n};let i;if(n==="DATA")i=A(this,Co);else if(n==="STATE")i=A(this,fi);else return n;return yield{type:"handshake:read.ok",value:i},i}*write(n,i){if(yield{type:"handshake:write",register:n,value:i},n==="DATA")Q(this,Co,i),yield{type:"handshake:register.update",register:n,value:i},yield*this.printer.setStrobe(!0),yield*this.printer.setStrobe(!1);else if(n==="STATE")i=i.withBit(0,this.printer.busy),Q(this,fi,i),yield{type:"handshake:register.update",register:n,value:i},A(this,fi).bit(1)?(yield*this.printer.setStrobe(!0),yield*this.printer.setStrobe(!1),Q(this,fi,A(this,fi).withBit(1,!1)),yield{type:"handshake:register.update",register:n,value:A(this,fi)}):this.interrupts&&!this.printer.busy?(yield{type:"handshake:int.on"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(2))):yield{type:"handshake:int.off"};else return n;yield{type:"handshake:write.ok"}}*updateBusy(n){Q(this,fi,A(this,fi).withBit(0,n)),yield{type:"handshake:register.update",register:"STATE",value:A(this,fi)},this.interrupts&&!n?(yield{type:"handshake:int.on"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(2))):yield{type:"handshake:int.off"}}toJSON(){return{DATA:A(this,Co).toJSON(),STATE:A(this,fi).toJSON()}}},Co=new WeakMap,fi=new WeakMap,cR);var rs,Eo,Ai,hi,Zr,eo,Qg,e0;let GJ=(rs=class extends Vy{constructor(n){super(n);Ie(this,eo);Ie(this,Eo);Ie(this,Ai);Ie(this,hi);Ie(this,Zr);Q(this,Eo,F.fromUnsigned(255,8)),Q(this,Ai,F.fromUnsigned(0,8)),Q(this,hi,F.fromUnsigned(0,8)),n.data==="unchanged"&&n.previous.io.pic?Q(this,Zr,A(n.previous.io.pic,Zr)):n.data==="randomize"?Q(this,Zr,new Array(rs.LINES).fill(F.zero(8)).map(()=>F.random(8))):Q(this,Zr,new Array(rs.LINES).fill(F.zero(8)))}chipSelect(n){const r=4+rs.LINES;return n=Number(n)-32,n<0||n>=r?null:n===0?"EOI":n===1?"IMR":n===2?"IRR":n===3?"ISR":`INT${n-4}`}*read(n){yield{type:"pic:read",register:n};let i;if(n==="EOI")i=F.zero(8);else if(n==="IMR")i=A(this,Eo);else if(n==="IRR")i=A(this,Ai);else if(n==="ISR")i=A(this,hi);else{const r=Number(n.slice(3));i=A(this,Zr)[r]}return yield{type:"pic:read.ok",value:i},i}*write(n,i){if(yield{type:"pic:write",register:n,value:i},n==="EOI")A(this,hi).isZero()||(yield{type:"pic:intr.off"},Q(this,hi,F.zero(8)),yield{type:"pic:register.update",register:"ISR",value:A(this,hi)},yield*Ct(this,eo,e0).call(this));else if(n==="IMR")Q(this,Eo,i),yield{type:"pic:register.update",register:"IMR",value:A(this,Eo)},yield*Ct(this,eo,e0).call(this);else if(!(n==="IRR"||n==="ISR")){const r=Number(n.slice(3));A(this,Zr)[r]=i,yield{type:"pic:register.update",register:n,value:i}}yield{type:"pic:write.ok"}}*interrupt(n){if(n<0||n>=rs.LINES)throw new RangeError(`Invalid interrupt line ${n}`);A(this,Ai).bit(n)||(Q(this,Ai,A(this,Ai).withBit(n,!0)),yield{type:"pic:register.update",register:"IRR",value:A(this,Ai)},yield*Ct(this,eo,e0).call(this))}isINTRActive(){return A(this,hi).isZero()&&Ct(this,eo,Qg).call(this)!==null}*handleINTR(){if(yield{type:"cpu:inta.on"},!A(this,hi).isZero())throw new Error("INTR line is active but ISR is not zero");const n=Ct(this,eo,Qg).call(this);if(n===null)throw new Error("INTR line is active but no interrupt is pending");Q(this,hi,A(this,hi).withBit(n,!0)),yield{type:"pic:register.update",register:"ISR",value:A(this,hi)},Q(this,Ai,A(this,Ai).withBit(n,!1)),yield{type:"pic:register.update",register:"IRR",value:A(this,Ai)},yield{type:"cpu:inta.off"},yield{type:"cpu:inta.on"};const i=A(this,Zr)[n];return yield{type:"pic:int.send",number:i},yield{type:"cpu:inta.off"},yield{type:"pic:intr.off"},i}toJSON(){return{IMR:A(this,Eo).toJSON(),IRR:A(this,Ai).toJSON(),ISR:A(this,hi).toJSON(),lines:A(this,Zr).map(n=>n.toJSON())}}},Eo=new WeakMap,Ai=new WeakMap,hi=new WeakMap,Zr=new WeakMap,eo=new WeakSet,Qg=function(){for(let n=0;n<rs.LINES;n++)if(A(this,Ai).bit(n)&&!A(this,Eo).bit(n))return n;return null},e0=function*(){A(this,hi).isZero()&&Ct(this,eo,Qg).call(this)!==null&&(yield{type:"pic:intr.on"})},fe(rs,"LINES",8),rs);var Os,ka,uR;let KJ=(uR=class extends Vy{constructor(n){super(n);Ie(this,Os);Ie(this,ka);Q(this,Os,F.zero(8)),Q(this,ka,F.zero(8))}chipSelect(n){return n=Number(n),n===16?"CONT":n===17?"COMP":null}*read(n){yield{type:"timer:read",register:n};let i;if(n==="CONT")i=A(this,Os);else if(n==="COMP")i=A(this,ka);else return n;return yield{type:"timer:read.ok",value:i},i}*write(n,i){if(yield{type:"timer:write",register:n,value:i},n==="CONT")Q(this,Os,i);else if(n==="COMP")Q(this,ka,i);else return n;yield{type:"timer:register.update",register:n,value:i},yield{type:"timer:write.ok"}}*tick(){const n=A(this,Os).unsigned===F.maxValue(8)?F.zero(8):A(this,Os).add(1);Q(this,Os,n),yield{type:"timer:register.update",register:"CONT",value:n},A(this,ka).equals(n)?(yield{type:"timer:int.on"},this.computer.io.pic&&(yield*this.computer.io.pic.interrupt(1))):yield{type:"timer:int.off"}}toJSON(){return{CONT:A(this,Os).toJSON(),COMP:A(this,ka).toJSON()}}},Os=new WeakMap,ka=new WeakMap,uR);class qJ extends ys{constructor(n){super(n);fe(this,"clock",null);fe(this,"f10",null);fe(this,"keyboard",null);fe(this,"screen",null);fe(this,"handshake",null);fe(this,"pic",null);fe(this,"pio",null);fe(this,"timer",null);if(n.devices.keyboardAndScreen&&(this.keyboard=new VJ(n),this.screen=new HJ(n)),n.devices.pic&&(this.clock=new zJ(n),this.f10=new UJ(n),this.timer=new KJ(n),this.pic=new GJ(n)),this.pio=n.devices.pio==="switches-and-leds"?new BJ(n):n.devices.pio==="printer"?new C3(n):null,n.devices.handshake){if(this.pio instanceof C3)throw new qt("io-printer-conflict");this.handshake=new WJ(n)}}get leds(){var n;return((n=this.pio)==null?void 0:n.leds)??null}get printer(){var n,i;return((n=this.pio)==null?void 0:n.printer)??((i=this.handshake)==null?void 0:i.printer)??null}get switches(){var n;return((n=this.pio)==null?void 0:n.switches)??null}*chipSelect(n){var a,l,c,u;const i=(a=this.handshake)==null?void 0:a.chipSelect(n);if(i)return yield{type:"bus:io.selected",chip:"handshake"},{chip:"handshake",register:i};const r=(l=this.pic)==null?void 0:l.chipSelect(n);if(r)return yield{type:"bus:io.selected",chip:"pic"},{chip:"pic",register:r};const s=(c=this.pio)==null?void 0:c.chipSelect(n);if(s)return yield{type:"bus:io.selected",chip:"pio"},{chip:"pio",register:s};const o=(u=this.timer)==null?void 0:u.chipSelect(n);return o?(yield{type:"bus:io.selected",chip:"timer"},{chip:"timer",register:o}):(yield{type:"bus:io.error",error:new qt("io-memory-not-connected",n)},null)}*read(n){const{chip:i,register:r}=n;return this[i]?yield*this[i].read(r):(yield{type:"bus:io.error",error:new qt("device-not-connected",i)},null)}*write(n,i){const{chip:r,register:s}=n;return this[r]?(yield*this[r].write(s,i),!0):(yield{type:"bus:io.error",error:new qt("device-not-connected",r)},!1)}toJSON(){var n,i,r,s,o,a,l,c,u,d,f;return{clock:((n=this.clock)==null?void 0:n.toJSON())??null,f10:((i=this.f10)==null?void 0:i.toJSON())??null,keyboard:((r=this.keyboard)==null?void 0:r.toJSON())??null,leds:((s=this.leds)==null?void 0:s.toJSON())??null,printer:((o=this.printer)==null?void 0:o.toJSON())??null,screen:((a=this.screen)==null?void 0:a.toJSON())??null,switches:((l=this.switches)==null?void 0:l.toJSON())??null,handshake:((c=this.handshake)==null?void 0:c.toJSON())??null,pic:((u=this.pic)==null?void 0:u.toJSON())??null,pio:((d=this.pio)==null?void 0:d.toJSON())??null,timer:((f=this.timer)==null?void 0:f.toJSON())??null}}}var La,pi,ed,td;let YJ=(La=class extends ys{constructor(n){super(n);Ie(this,pi);Ie(this,ed);Ie(this,td);n.data==="unchanged"?Q(this,pi,A(n.previous.memory,pi)):n.data==="randomize"?Q(this,pi,new Uint8Array(La.SIZE).map(()=>F.random(8).unsigned)):Q(this,pi,new Uint8Array(La.SIZE).fill(0)),A(this,pi)[255]=1;const i=n.program.instructions.some(r=>r.instruction==="INT");if(Q(this,td,new Set),i)for(const[r,s]of J_){const o=r;if(A(this,pi)[o]=s.unsigned,A(this,td).add(o),r===6){const a=[208,216,48,18,1,193,193,216,49,212,65,225],l=s.unsigned;for(let c=0;c<a.length;c++)A(this,pi)[l+c]=a[c],A(this,td).add(l+c)}}for(const r of n.program.data){let s=r.start.value;for(const o of r.getValues())o!==zf&&A(this,pi).set(o.toUint8Array(),s),s+=r.size/8}Q(this,ed,new Set);for(const r of n.program.instructions){A(this,pi).set(r.toBytes(),r.start.value);for(let s=0;s<r.length;s++)A(this,ed).add(r.start.value+s)}}*read(n){if(n=Number(n),yield{type:"memory:read",address:n},!Se.inRange(n))return yield{type:"memory:read.error",error:new qt("address-out-of-range",n)},null;const i=F.fromUnsigned(A(this,pi).at(n),8);return yield{type:"memory:read.ok",address:Se.from(n),value:i},i}*write(n,i){return n=Number(n),yield{type:"memory:write",address:n,value:i},Se.inRange(n)?(A(this,ed).has(n)&&(yield{type:"memory:write.warning",warning:`Sobrescribiendo instrucción en la dirección ${Se.format(n)}`},console.warn(`Advertencia: Sobrescribiendo instrucción en la dirección ${Se.format(n)}`)),A(this,pi).set([i.unsigned],n),yield{type:"memory:write.ok",address:Se.from(n),value:i},!0):(yield{type:"memory:write.error",error:new qt("address-out-of-range",n)},!1)}toJSON(){return[...A(this,pi)]}},pi=new WeakMap,ed=new WeakMap,td=new WeakMap,fe(La,"SIZE",Se.MAX_ADDRESS+1),La);class E3{constructor(e){fe(this,"cpu");fe(this,"memory");fe(this,"io");const n={computer:this,...e};this.cpu=new jJ(n),this.memory=new YJ(n),this.io=new qJ(n)}toJSON(){return{cpu:this.cpu.toJSON(),memory:this.memory.toJSON(),io:this.io.toJSON()}}}var vt;class XJ{constructor(){Ie(this,vt,new E3({program:{data:[],instructions:[]},devices:{keyboardAndScreen:!1,pic:!1,pio:null,handshake:null},data:"clean"}))}loadProgram(e){Q(this,vt,new E3({...e,previous:A(this,vt)}))}getComputerState(){var e;return((e=A(this,vt))==null?void 0:e.toJSON())||null}startCPU(){if(!A(this,vt))throw new qt("no-program");return A(this,vt).cpu.run()}get devices(){if(!A(this,vt))throw new Error("No computer loaded!");return{clock:{connected:()=>A(this,vt).io.clock!==null,tick:()=>{if(A(this,vt).io.clock)return A(this,vt).io.clock.tick();console.warn("Called clock.tick() when no clock was connected to the computer")}},f10:{connected:()=>"f10"in A(this,vt).io,press:()=>{if(A(this,vt).io.f10)return A(this,vt).io.f10.press();console.warn("Called f10.press() when no f10 was connected to the computer")}},keyboard:{connected:()=>"keyboard"in A(this,vt).io,readChar:e=>{if(A(this,vt).io.keyboard)return A(this,vt).io.keyboard.setLastCharRead(e);console.warn("Called keyboard.press() when no keyboard was connected to the computer")}},leds:{connected:()=>"leds"in A(this,vt).io},printer:{connected:()=>A(this,vt).io.printer!==null,clear:()=>{if(A(this,vt).io.printer)return A(this,vt).io.printer.clear();console.warn("No printer connected to the computer!")},print:()=>{if(A(this,vt).io.printer)return A(this,vt).io.printer.print();console.warn("No printer connected to the computer!")},hasPending:()=>{var e;return((e=A(this,vt).io.printer)==null?void 0:e.hasPending)??!1}},screen:{connected:()=>"screen"in A(this,vt).io,clear:()=>{if(A(this,vt).io.screen)return A(this,vt).io.screen.clear();console.warn("Called screen.clear() when no screen was connected to the computer")}},switches:{connected:()=>"switches"in A(this,vt).io,toggle:e=>{if(A(this,vt).io.switches)return A(this,vt).io.switches.toggle(e);console.warn("Called switches.toggle() when no switches were connected to the computer")}}}}}vt=new WeakMap;const jw=de(F.zero(16)),$w=de(F.zero(16)),JJ=de(F.zero(8)),Fw=de(F.zero(16)),Bw=de(F.zero(16)),zw=de(F.zero(16)),Uw=de(F.zero(16)),Vw=de(F.zero(16)),Hw=de(F.zero(16)),zL=de(F.zero(16)),Zh=de(F.zero(8)),gt=de(""),kd=de(0),tC=de(!1),ZJ=de(!1),Hy=de(0),gv=de([]),UL=de(!1);de(!0);de(!0);const qS=de(!1),ia=t=>de(e=>e(t).low,(e,n,i)=>{const r=e(t),s=typeof i=="function"?i(r.low):i;n(t,r.withLow(s))}),ra=t=>de(e=>e(t).high,(e,n,i)=>{const r=e(t),s=typeof i=="function"?i(r.high):i;n(t,r.withHigh(s))}),Ye={AL:de(F.zero(8)),BL:de(F.zero(8)),CL:de(F.zero(8)),DL:de(F.zero(8)),SP:jw,"SP.l":ia(jw),"SP.h":ra(jw),IP:$w,"IP.l":ia($w),"IP.h":ra($w),IR:JJ,ri:Fw,"ri.l":ia(Fw),"ri.h":ra(Fw),id:Bw,"id.l":ia(Bw),"id.h":ra(Bw),left:zw,"left.l":ia(zw),"left.h":ra(zw),right:Uw,"right.l":ia(Uw),"right.h":ra(Uw),result:Vw,"result.l":ia(Vw),"result.h":ra(Vw),FLAGS:Hw,"FLAGS.l":ia(Hw),"FLAGS.h":ra(Hw),MAR:zL,MBR:Zh},es=de({phase:"stopped"}),VL=de("ADD");function QJ(t,e=!1){e?(z.set(Ye.AL,F.zero(8)),z.set(Ye.BL,F.zero(8)),z.set(Ye.CL,F.zero(8)),z.set(Ye.DL,F.zero(8)),z.set(Ye.SP,F.fromUnsigned(255,16)),z.set(Ye.IP,F.zero(16)),z.set(Ye.IR,F.zero(8)),z.set(Ye.ri,F.zero(16)),z.set(Ye.id,F.zero(16)),z.set(Ye.left,F.zero(16)),z.set(Ye.right,F.zero(16)),z.set(Ye.result,F.zero(16)),z.set(Ye.FLAGS,F.zero(16)),z.set(Ye.MAR,F.zero(16)),z.set(Ye.MBR,F.zero(8))):(z.set(Ye.AL,F.fromUnsigned(t.cpu.AX&255,8)),z.set(Ye.BL,F.fromUnsigned(t.cpu.BX&255,8)),z.set(Ye.CL,F.fromUnsigned(t.cpu.CX&255,8)),z.set(Ye.DL,F.fromUnsigned(t.cpu.DX&255,8)),z.set(Ye.SP,F.fromUnsigned(t.cpu.SP,16)),z.set(Ye.IP,F.fromUnsigned(t.cpu.IP,16)),z.set(Ye.IR,F.fromUnsigned(t.cpu.IR,8)),z.set(Ye.ri,F.fromUnsigned(t.cpu.ri,16)),z.set(Ye.id,F.fromUnsigned(t.cpu.id,16)),z.set(Ye.left,F.fromUnsigned(t.cpu.left,16)),z.set(Ye.right,F.fromUnsigned(t.cpu.right,16)),z.set(Ye.result,F.fromUnsigned(t.cpu.result,16)),t.cpu.FLAGS=16,z.set(Ye.FLAGS,F.fromUnsigned(t.cpu.FLAGS,16)),z.set(Ye.MAR,F.fromUnsigned(t.cpu.MAR,16)),z.set(Ye.MBR,F.fromUnsigned(t.cpu.MBR,8))),z.set(es,{phase:"stopped"})}const HL=de([]),WL=de([]),vv=de(new Array(Se.MAX_ADDRESS+1).fill(F.zero(8))),Qh=de(Se.from(32)),eZ=de(null),$m=256,tZ=de(t=>{const e=t(eZ)??t(Qh);let n=e.value-e.value%$m,i=n+$m-1;i>Se.MAX_ADDRESS&&(i=Se.MAX_ADDRESS,n=i-$m+1);const r=t(vv),s=[];for(let o=0;o<$m;o++)s.push({address:Se.from(n+o),value:r[n+o]});return s});function nZ(t,e=!1){e?z.set(vv,new Array(Se.MAX_ADDRESS+1).fill(F.zero(8))):z.set(vv,t.memory.map(n=>F.fromUnsigned(n,8))),z.set(Qh,Se.from(32))}let YS=[],GL=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,n=0;e<t.length;e++)(e%2?GL:YS).push(n=n+t[e])})();function iZ(t){if(t<768)return!1;for(let e=0,n=YS.length;;){let i=e+n>>1;if(t<YS[i])n=i;else if(t>=GL[i])e=i+1;else return!0;if(e==n)return!1}}function A3(t){return t>=127462&&t<=127487}const N3=8205;function rZ(t,e,n=!0,i=!0){return(n?KL:sZ)(t,e,i)}function KL(t,e,n){if(e==t.length)return e;e&&qL(t.charCodeAt(e))&&YL(t.charCodeAt(e-1))&&e--;let i=Ww(t,e);for(e+=P3(i);e<t.length;){let r=Ww(t,e);if(i==N3||r==N3||n&&iZ(r))e+=P3(r),i=r;else if(A3(r)){let s=0,o=e-2;for(;o>=0&&A3(Ww(t,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function sZ(t,e,n){for(;e>0;){let i=KL(t,e-2,n);if(i<e)return i;e--}return 0}function Ww(t,e){let n=t.charCodeAt(e);if(!YL(n)||e+1==t.length)return n;let i=t.charCodeAt(e+1);return qL(i)?(n-55296<<10)+(i-56320)+65536:n}function qL(t){return t>=56320&&t<57344}function YL(t){return t>=55296&&t<56320}function P3(t){return t<65536?1:2}class ut{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,i){[e,n]=_d(this,e,n);let r=[];return this.decompose(0,e,r,2),i.length&&i.decompose(0,i.length,r,3),this.decompose(n,this.length,r,1),js.from(r,this.length-(n-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=_d(this,e,n);let i=[];return this.decompose(e,n,i,0),js.from(i,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),r=new ch(this),s=new ch(e);for(let o=n,a=n;;){if(r.next(o),s.next(o),o=0,r.lineBreak!=s.lineBreak||r.done!=s.done||r.value!=s.value)return!1;if(a+=r.value.length,r.done||a>=i)return!0}}iter(e=1){return new ch(this,e)}iterRange(e,n=this.length){return new XL(this,e,n)}iterLines(e,n){let i;if(e==null)i=this.iter();else{n==null&&(n=this.lines+1);let r=this.line(e).from;i=this.iterRange(r,Math.max(r,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new JL(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?ut.empty:e.length<=32?new nn(e):js.from(nn.split(e,[]))}}class nn extends ut{constructor(e,n=oZ(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,i,r){for(let s=0;;s++){let o=this.text[s],a=r+o.length;if((n?i:a)>=e)return new aZ(r,a,i,o);r=a+1,i++}}decompose(e,n,i,r){let s=e<=0&&n>=this.length?this:new nn(M3(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(r&1){let o=i.pop(),a=t0(s.text,o.text.slice(),0,s.length);if(a.length<=32)i.push(new nn(a,o.length+s.length));else{let l=a.length>>1;i.push(new nn(a.slice(0,l)),new nn(a.slice(l)))}}else i.push(s)}replace(e,n,i){if(!(i instanceof nn))return super.replace(e,n,i);[e,n]=_d(this,e,n);let r=t0(this.text,t0(i.text,M3(this.text,0,e)),n),s=this.length+i.length-(n-e);return r.length<=32?new nn(r,s):js.from(nn.split(r,[]),s)}sliceString(e,n=this.length,i=`
`){[e,n]=_d(this,e,n);let r="";for(let s=0,o=0;s<=n&&o<this.text.length;o++){let a=this.text[o],l=s+a.length;s>e&&o&&(r+=i),e<l&&n>s&&(r+=a.slice(Math.max(0,e-s),n-s)),s=l+1}return r}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let i=[],r=-1;for(let s of e)i.push(s),r+=s.length+1,i.length==32&&(n.push(new nn(i,r)),i=[],r=-1);return r>-1&&n.push(new nn(i,r)),n}}class js extends ut{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,n,i,r){for(let s=0;;s++){let o=this.children[s],a=r+o.length,l=i+o.lines-1;if((n?l:a)>=e)return o.lineInner(e,n,i,r);r=a+1,i=l+1}}decompose(e,n,i,r){for(let s=0,o=0;o<=n&&s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(e<=l&&n>=o){let c=r&((o<=e?1:0)|(l>=n?2:0));o>=e&&l<=n&&!c?i.push(a):a.decompose(e-o,n-o,i,c)}o=l+1}}replace(e,n,i){if([e,n]=_d(this,e,n),i.lines<this.lines)for(let r=0,s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.length;if(e>=s&&n<=a){let l=o.replace(e-s,n-s,i),c=this.lines-o.lines+l.lines;if(l.lines<c>>4&&l.lines>c>>6){let u=this.children.slice();return u[r]=l,new js(u,this.length-(n-e)+i.length)}return super.replace(s,a,l)}s=a+1}return super.replace(e,n,i)}sliceString(e,n=this.length,i=`
`){[e,n]=_d(this,e,n);let r="";for(let s=0,o=0;s<this.children.length&&o<=n;s++){let a=this.children[s],l=o+a.length;o>e&&s&&(r+=i),e<l&&n>o&&(r+=a.sliceString(e-o,n-o,i)),o=l+1}return r}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof js))return 0;let i=0,[r,s,o,a]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=n,s+=n){if(r==o||s==a)return i;let l=this.children[r],c=e.children[s];if(l!=c)return i+l.scanIdentical(c,n);i+=l.length+1}}static from(e,n=e.reduce((i,r)=>i+r.length+1,-1)){let i=0;for(let p of e)i+=p.lines;if(i<32){let p=[];for(let m of e)m.flatten(p);return new nn(p,n)}let r=Math.max(32,i>>5),s=r<<1,o=r>>1,a=[],l=0,c=-1,u=[];function d(p){let m;if(p.lines>s&&p instanceof js)for(let g of p.children)d(g);else p.lines>o&&(l>o||!l)?(f(),a.push(p)):p instanceof nn&&l&&(m=u[u.length-1])instanceof nn&&p.lines+m.lines<=32?(l+=p.lines,c+=p.length+1,u[u.length-1]=new nn(m.text.concat(p.text),m.length+1+p.length)):(l+p.lines>r&&f(),l+=p.lines,c+=p.length+1,u.push(p))}function f(){l!=0&&(a.push(u.length==1?u[0]:js.from(u,c)),c=-1,l=u.length=0)}for(let p of e)d(p);return f(),a.length==1?a[0]:new js(a,n)}}ut.empty=new nn([""],0);function oZ(t){let e=-1;for(let n of t)e+=n.length+1;return e}function t0(t,e,n=0,i=1e9){for(let r=0,s=0,o=!0;s<t.length&&r<=i;s++){let a=t[s],l=r+a.length;l>=n&&(l>i&&(a=a.slice(0,i-r)),r<n&&(a=a.slice(n-r)),o?(e[e.length-1]+=a,o=!1):e.push(a)),r=l+1}return e}function M3(t,e,n){return t0(t,[""],e,n)}class ch{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof nn?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,r=this.nodes[i],s=this.offsets[i],o=s>>1,a=r instanceof nn?r.text.length:r.children.length;if(o==(n>0?a:0)){if(i==0)return this.done=!0,this.value="",this;n>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[i]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof nn){let l=r.text[o+(n<0?-1:0)];if(this.offsets[i]+=n,l.length>Math.max(0,e))return this.value=e==0?l:n>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=r.children[o+(n<0?-1:0)];e>l.length?(e-=l.length,this.offsets[i]+=n):(n<0&&this.offsets[i]--,this.nodes.push(l),this.offsets.push(n>0?1:(l instanceof nn?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class XL{constructor(e,n,i){this.value="",this.done=!1,this.cursor=new ch(e,n>i?-1:1),this.pos=n>i?e.length:0,this.from=Math.min(n,i),this.to=Math.max(n,i)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let i=n<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*n,this.value=r.length<=i?r:n<0?r.slice(r.length-i):r.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class JL{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:i,value:r}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(ut.prototype[Symbol.iterator]=function(){return this.iter()},ch.prototype[Symbol.iterator]=XL.prototype[Symbol.iterator]=JL.prototype[Symbol.iterator]=function(){return this});class aZ{constructor(e,n,i,r){this.from=e,this.to=n,this.number=i,this.text=r}get length(){return this.to-this.from}}function _d(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}function Vn(t,e,n=!0,i=!0){return rZ(t,e,n,i)}function lZ(t){return t>=56320&&t<57344}function cZ(t){return t>=55296&&t<56320}function _r(t,e){let n=t.charCodeAt(e);if(!cZ(n)||e+1==t.length)return n;let i=t.charCodeAt(e+1);return lZ(i)?(n-55296<<10)+(i-56320)+65536:n}function nC(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function No(t){return t<65536?1:2}const XS=/\r\n?|\n/;var Oi=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(Oi||(Oi={}));class Zs{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n+1];e+=i<0?this.sections[n]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,i=0,r=0;n<this.sections.length;){let s=this.sections[n++],o=this.sections[n++];o<0?(e(i,r,s),r+=s):r+=o,i+=s}}iterChangedRanges(e,n=!1){JS(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];r<0?e.push(i,r):e.push(r,i)}return new Zs(e)}composeDesc(e){return this.empty?e:e.empty?this:ZL(this,e)}mapDesc(e,n=!1){return e.empty?this:ZS(this,e,n)}mapPos(e,n=-1,i=Oi.Simple){let r=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],c=r+a;if(l<0){if(c>e)return s+(e-r);s+=a}else{if(i!=Oi.Simple&&c>=e&&(i==Oi.TrackDel&&r<e&&c>e||i==Oi.TrackBefore&&r<e||i==Oi.TrackAfter&&c>e))return null;if(c>e||c==e&&n<0&&!a)return e==r||n<0?s:s+l;s+=l}r=c}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return s}touchesRange(e,n=e){for(let i=0,r=0;i<this.sections.length&&r<=n;){let s=this.sections[i++],o=this.sections[i++],a=r+s;if(o>=0&&r<=n&&a>=e)return r<e&&a>n?"cover":!0;r=a}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];e+=(e?" ":"")+i+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Zs(e)}static create(e){return new Zs(e)}}class wn extends Zs{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return JS(this,(n,i,r,s,o)=>e=e.replace(r,r+(i-n),o),!1),e}mapDesc(e,n=!1){return ZS(this,e,n,!0)}invert(e){let n=this.sections.slice(),i=[];for(let r=0,s=0;r<n.length;r+=2){let o=n[r],a=n[r+1];if(a>=0){n[r]=a,n[r+1]=o;let l=r>>1;for(;i.length<l;)i.push(ut.empty);i.push(o?e.slice(s,s+o):ut.empty)}s+=o}return new wn(n,i)}compose(e){return this.empty?e:e.empty?this:ZL(this,e,!0)}map(e,n=!1){return e.empty?this:ZS(this,e,n,!0)}iterChanges(e,n=!1){JS(this,e,n)}get desc(){return Zs.create(this.sections)}filter(e){let n=[],i=[],r=[],s=new ep(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&s.len==0;){if(s.done)break e;let u=Math.min(s.len,l-a);Qn(r,u,-1);let d=s.ins==-1?-1:s.off==0?s.ins:0;Qn(n,u,d),d>0&&Aa(i,n,s.text),s.forward(u),a+=u}let c=e[o++];for(;a<c;){if(s.done)break e;let u=Math.min(s.len,c-a);Qn(n,u,-1),Qn(r,u,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(u),a+=u}}return{changes:new wn(n,i),filtered:Zs.create(r)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n],r=this.sections[n+1];r<0?e.push(i):r==0?e.push([i]):e.push([i].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,i){let r=[],s=[],o=0,a=null;function l(u=!1){if(!u&&!r.length)return;o<n&&Qn(r,n-o,-1);let d=new wn(r,s);a=a?a.compose(d.map(a)):d,r=[],s=[],o=0}function c(u){if(Array.isArray(u))for(let d of u)c(d);else if(u instanceof wn){if(u.length!=n)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${n})`);l(),a=a?a.compose(u.map(a)):u}else{let{from:d,to:f=d,insert:p}=u;if(d>f||d<0||f>n)throw new RangeError(`Invalid change range ${d} to ${f} (in doc of length ${n})`);let m=p?typeof p=="string"?ut.of(p.split(i||XS)):p:ut.empty,g=m.length;if(d==f&&g==0)return;d<o&&l(),d>o&&Qn(r,d-o,-1),Qn(r,f-d,g),Aa(s,r,m),o=f}}return c(e),l(!a),a}static empty(e){return new wn(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],i=[];for(let r=0;r<e.length;r++){let s=e[r];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;i.length<r;)i.push(ut.empty);i[r]=ut.of(s.slice(1)),n.push(s[0],i[r].length)}}}return new wn(n,i)}static createSet(e,n){return new wn(e,n)}}function Qn(t,e,n,i=!1){if(e==0&&n<=0)return;let r=t.length-2;r>=0&&n<=0&&n==t[r+1]?t[r]+=e:r>=0&&e==0&&t[r]==0?t[r+1]+=n:i?(t[r]+=e,t[r+1]+=n):t.push(e,n)}function Aa(t,e,n){if(n.length==0)return;let i=e.length-2>>1;if(i<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<i;)t.push(ut.empty);t.push(n)}}function JS(t,e,n){let i=t.inserted;for(let r=0,s=0,o=0;o<t.sections.length;){let a=t.sections[o++],l=t.sections[o++];if(l<0)r+=a,s+=a;else{let c=r,u=s,d=ut.empty;for(;c+=a,u+=l,l&&i&&(d=d.append(i[o-2>>1])),!(n||o==t.sections.length||t.sections[o+1]<0);)a=t.sections[o++],l=t.sections[o++];e(r,c,s,u,d),r=c,s=u}}}function ZS(t,e,n,i=!1){let r=[],s=i?[]:null,o=new ep(t),a=new ep(e);for(let l=-1;;){if(o.done&&a.len||a.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&a.ins==-1){let c=Math.min(o.len,a.len);Qn(r,c,-1),o.forward(c),a.forward(c)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!n))){let c=a.len;for(Qn(r,a.ins,-1);c;){let u=Math.min(o.len,c);o.ins>=0&&l<o.i&&o.len<=u&&(Qn(r,0,o.ins),s&&Aa(s,r,o.text),l=o.i),o.forward(u),c-=u}a.next()}else if(o.ins>=0){let c=0,u=o.len;for(;u;)if(a.ins==-1){let d=Math.min(u,a.len);c+=d,u-=d,a.forward(d)}else if(a.ins==0&&a.len<u)u-=a.len,a.next();else break;Qn(r,c,l<o.i?o.ins:0),s&&l<o.i&&Aa(s,r,o.text),l=o.i,o.forward(o.len-u)}else{if(o.done&&a.done)return s?wn.createSet(r,s):Zs.create(r);throw new Error("Mismatched change set lengths")}}}function ZL(t,e,n=!1){let i=[],r=n?[]:null,s=new ep(t),o=new ep(e);for(let a=!1;;){if(s.done&&o.done)return r?wn.createSet(i,r):Zs.create(i);if(s.ins==0)Qn(i,s.len,0,a),s.next();else if(o.len==0&&!o.done)Qn(i,0,o.ins,a),r&&Aa(r,i,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(s.len2,o.len),c=i.length;if(s.ins==-1){let u=o.ins==-1?-1:o.off?0:o.ins;Qn(i,l,u,a),r&&u&&Aa(r,i,o.text)}else o.ins==-1?(Qn(i,s.off?0:s.len,l,a),r&&Aa(r,i,s.textBit(l))):(Qn(i,s.off?0:s.len,o.off?0:o.ins,a),r&&!o.off&&Aa(r,i,o.text));a=(s.ins>l||o.ins>=0&&o.len>l)&&(a||i.length>c),s.forward2(l),o.forward(l)}}}}class ep{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?ut.empty:e[n]}textBit(e){let{inserted:n}=this.set,i=this.i-2>>1;return i>=n.length&&!e?ut.empty:n[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class oc{constructor(e,n,i){this.from=e,this.to=n,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let i,r;return this.empty?i=r=e.mapPos(this.from,n):(i=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),i==this.from&&r==this.to?this:new oc(i,r,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return re.range(e,n);let i=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return re.range(this.anchor,i)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return re.range(e.anchor,e.head)}static create(e,n,i){return new oc(e,n,i)}}class re{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:re.create(this.ranges.map(i=>i.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new re([this.main],0)}addRange(e,n=!0){return re.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let i=this.ranges.slice();return i[n]=e,re.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new re(e.ranges.map(n=>oc.fromJSON(n)),e.main)}static single(e,n=e){return new re([re.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,r=0;r<e.length;r++){let s=e[r];if(s.empty?s.from<=i:s.from<i)return re.normalized(e.slice(),n);i=s.to}return new re(e,n)}static cursor(e,n=0,i,r){return oc.create(e,e,(n==0?0:n<0?8:16)|(i==null?7:Math.min(6,i))|(r??16777215)<<6)}static range(e,n,i,r){let s=(i??16777215)<<6|(r==null?7:Math.min(6,r));return n<e?oc.create(n,e,48|s):oc.create(e,n,(n>e?8:0)|s)}static normalized(e,n=0){let i=e[n];e.sort((r,s)=>r.from-s.from),n=e.indexOf(i);for(let r=1;r<e.length;r++){let s=e[r],o=e[r-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,l=Math.max(s.to,o.to);r<=n&&n--,e.splice(--r,2,s.anchor>s.head?re.range(l,a):re.range(a,l))}}return new re(e,n)}}function QL(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let iC=0;class Ee{constructor(e,n,i,r,s){this.combine=e,this.compareInput=n,this.compare=i,this.isStatic=r,this.id=iC++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new Ee(e.combine||(n=>n),e.compareInput||((n,i)=>n===i),e.compare||(e.combine?(n,i)=>n===i:rC),!!e.static,e.enables)}of(e){return new n0([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new n0(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new n0(e,this,2,n)}from(e,n){return n||(n=i=>i),this.compute([e],i=>n(i.field(e)))}}function rC(t,e){return t==e||t.length==e.length&&t.every((n,i)=>n===e[i])}class n0{constructor(e,n,i,r){this.dependencies=e,this.facet=n,this.type=i,this.value=r,this.id=iC++}dynamicSlot(e){var n;let i=this.value,r=this.facet.compareInput,s=this.id,o=e[s]>>1,a=this.type==2,l=!1,c=!1,u=[];for(let d of this.dependencies)d=="doc"?l=!0:d=="selection"?c=!0:((n=e[d.id])!==null&&n!==void 0?n:1)&1||u.push(e[d.id]);return{create(d){return d.values[o]=i(d),1},update(d,f){if(l&&f.docChanged||c&&(f.docChanged||f.selection)||QS(d,u)){let p=i(d);if(a?!T3(p,d.values[o],r):!r(p,d.values[o]))return d.values[o]=p,1}return 0},reconfigure:(d,f)=>{let p,m=f.config.address[s];if(m!=null){let g=bv(f,m);if(this.dependencies.every(y=>y instanceof Ee?f.facet(y)===d.facet(y):y instanceof Si?f.field(y,!1)==d.field(y,!1):!0)||(a?T3(p=i(d),g,r):r(p=i(d),g)))return d.values[o]=g,0}else p=i(d);return d.values[o]=p,1}}}}function T3(t,e,n){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!n(t[i],e[i]))return!1;return!0}function QS(t,e){let n=!1;for(let i of e)uh(t,i)&1&&(n=!0);return n}function uZ(t,e,n){let i=n.map(l=>t[l.id]),r=n.map(l=>l.type),s=i.filter(l=>!(l&1)),o=t[e.id]>>1;function a(l){let c=[];for(let u=0;u<i.length;u++){let d=bv(l,i[u]);if(r[u]==2)for(let f of d)c.push(f);else c.push(d)}return e.combine(c)}return{create(l){for(let c of i)uh(l,c);return l.values[o]=a(l),1},update(l,c){if(!QS(l,s))return 0;let u=a(l);return e.compare(u,l.values[o])?0:(l.values[o]=u,1)},reconfigure(l,c){let u=QS(l,i),d=c.config.facets[e.id],f=c.facet(e);if(d&&!u&&rC(n,d))return l.values[o]=f,0;let p=a(l);return e.compare(p,f)?(l.values[o]=f,0):(l.values[o]=p,1)}}}const Fm=Ee.define({static:!0});class Si{constructor(e,n,i,r,s){this.id=e,this.createF=n,this.updateF=i,this.compareF=r,this.spec=s,this.provides=void 0}static define(e){let n=new Si(iC++,e.create,e.update,e.compare||((i,r)=>i===r),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(Fm).find(i=>i.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:i=>(i.values[n]=this.create(i),1),update:(i,r)=>{let s=i.values[n],o=this.updateF(s,r);return this.compareF(s,o)?0:(i.values[n]=o,1)},reconfigure:(i,r)=>{let s=i.facet(Fm),o=r.facet(Fm),a;return(a=s.find(l=>l.field==this))&&a!=o.find(l=>l.field==this)?(i.values[n]=a.create(i),1):r.config.address[this.id]!=null?(i.values[n]=r.field(this),0):(i.values[n]=this.create(i),1)}}}init(e){return[this,Fm.of({field:this,create:e})]}get extension(){return this}}const Xl={lowest:4,low:3,default:2,high:1,highest:0};function uf(t){return e=>new ej(e,t)}const $p={highest:uf(Xl.highest),high:uf(Xl.high),default:uf(Xl.default),low:uf(Xl.low),lowest:uf(Xl.lowest)};class ej{constructor(e,n){this.inner=e,this.prec=n}}class Fp{of(e){return new e2(this,e)}reconfigure(e){return Fp.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class e2{constructor(e,n){this.compartment=e,this.inner=n}}class yv{constructor(e,n,i,r,s,o){for(this.base=e,this.compartments=n,this.dynamicSlots=i,this.address=r,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,i){let r=[],s=Object.create(null),o=new Map;for(let f of dZ(e,n,o))f instanceof Si?r.push(f):(s[f.facet.id]||(s[f.facet.id]=[])).push(f);let a=Object.create(null),l=[],c=[];for(let f of r)a[f.id]=c.length<<1,c.push(p=>f.slot(p));let u=i==null?void 0:i.config.facets;for(let f in s){let p=s[f],m=p[0].facet,g=u&&u[f]||[];if(p.every(y=>y.type==0))if(a[m.id]=l.length<<1|1,rC(g,p))l.push(i.facet(m));else{let y=m.combine(p.map(v=>v.value));l.push(i&&m.compare(y,i.facet(m))?i.facet(m):y)}else{for(let y of p)y.type==0?(a[y.id]=l.length<<1|1,l.push(y.value)):(a[y.id]=c.length<<1,c.push(v=>y.dynamicSlot(v)));a[m.id]=c.length<<1,c.push(y=>uZ(y,m,p))}}let d=c.map(f=>f(a));return new yv(e,o,d,a,l,s)}}function dZ(t,e,n){let i=[[],[],[],[],[]],r=new Map;function s(o,a){let l=r.get(o);if(l!=null){if(l<=a)return;let c=i[l].indexOf(o);c>-1&&i[l].splice(c,1),o instanceof e2&&n.delete(o.compartment)}if(r.set(o,a),Array.isArray(o))for(let c of o)s(c,a);else if(o instanceof e2){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=e.get(o.compartment)||o.inner;n.set(o.compartment,c),s(c,a)}else if(o instanceof ej)s(o.inner,o.prec);else if(o instanceof Si)i[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof n0)i[a].push(o),o.facet.extensions&&s(o.facet.extensions,Xl.default);else{let c=o.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(c,a)}}return s(t,Xl.default),i.reduce((o,a)=>o.concat(a))}function uh(t,e){if(e&1)return 2;let n=e>>1,i=t.status[n];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;t.status[n]=4;let r=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|r}function bv(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const tj=Ee.define(),t2=Ee.define({combine:t=>t.some(e=>e),static:!0}),nj=Ee.define({combine:t=>t.length?t[0]:void 0,static:!0}),ij=Ee.define(),rj=Ee.define(),sj=Ee.define(),oj=Ee.define({combine:t=>t.length?t[0]:!1});class Yo{constructor(e,n){this.type=e,this.value=n}static define(){return new fZ}}class fZ{of(e){return new Yo(this,e)}}class hZ{constructor(e){this.map=e}of(e){return new Ze(this,e)}}class Ze{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new Ze(this.type,n)}is(e){return this.type==e}static define(e={}){return new hZ(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let i=[];for(let r of e){let s=r.map(n);s&&i.push(s)}return i}}Ze.reconfigure=Ze.define();Ze.appendConfig=Ze.define();class _n{constructor(e,n,i,r,s,o){this.startState=e,this.changes=n,this.selection=i,this.effects=r,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,i&&QL(i,n.newLength),s.some(a=>a.type==_n.time)||(this.annotations=s.concat(_n.time.of(Date.now())))}static create(e,n,i,r,s,o){return new _n(e,n,i,r,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(_n.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}_n.time=Yo.define();_n.userEvent=Yo.define();_n.addToHistory=Yo.define();_n.remote=Yo.define();function pZ(t,e){let n=[];for(let i=0,r=0;;){let s,o;if(i<t.length&&(r==e.length||e[r]>=t[i]))s=t[i++],o=t[i++];else if(r<e.length)s=e[r++],o=e[r++];else return n;!n.length||n[n.length-1]<s?n.push(s,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function aj(t,e,n){var i;let r,s,o;return n?(r=e.changes,s=wn.empty(e.changes.length),o=t.changes.compose(e.changes)):(r=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(r)),{changes:o,selection:e.selection?e.selection.map(s):(i=t.selection)===null||i===void 0?void 0:i.map(r),effects:Ze.mapEffects(t.effects,r).concat(Ze.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function n2(t,e,n){let i=e.selection,r=zu(e.annotations);return e.userEvent&&(r=r.concat(_n.userEvent.of(e.userEvent))),{changes:e.changes instanceof wn?e.changes:wn.of(e.changes||[],n,t.facet(nj)),selection:i&&(i instanceof re?i:re.single(i.anchor,i.head)),effects:zu(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function lj(t,e,n){let i=n2(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let o=!!e[s].sequential;i=aj(i,n2(t,e[s],o?i.changes.newLength:t.doc.length),o)}let r=_n.create(t,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return gZ(n?mZ(r):r)}function mZ(t){let e=t.startState,n=!0;for(let r of e.facet(ij)){let s=r(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:pZ(n,s))}if(n!==!0){let r,s;if(n===!1)s=t.changes.invertedDesc,r=wn.empty(e.doc.length);else{let o=t.changes.filter(n);r=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}t=_n.create(e,r,t.selection&&t.selection.map(s),Ze.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let i=e.facet(rj);for(let r=i.length-1;r>=0;r--){let s=i[r](t);s instanceof _n?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof _n?t=s[0]:t=lj(e,zu(s),!1)}return t}function gZ(t){let e=t.startState,n=e.facet(sj),i=t;for(let r=n.length-1;r>=0;r--){let s=n[r](t);s&&Object.keys(s).length&&(i=aj(i,n2(e,s,t.changes.newLength),!0))}return i==t?t:_n.create(e,t.changes,t.selection,i.effects,i.annotations,i.scrollIntoView)}const vZ=[];function zu(t){return t==null?vZ:Array.isArray(t)?t:[t]}var Hn=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(Hn||(Hn={}));const yZ=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let i2;try{i2=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function bZ(t){if(i2)return i2.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||yZ.test(n)))return!0}return!1}function wZ(t){return e=>{if(!/\S/.test(e))return Hn.Space;if(bZ(e))return Hn.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return Hn.Word;return Hn.Other}}class ot{constructor(e,n,i,r,s,o){this.config=e,this.doc=n,this.selection=i,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)uh(this,a<<1);this.computeSlot=null}field(e,n=!0){let i=this.config.address[e.id];if(i==null){if(n)throw new RangeError("Field is not present in this state");return}return uh(this,i),bv(this,i)}update(...e){return lj(this,e,!0)}applyTransaction(e){let n=this.config,{base:i,compartments:r}=n;for(let a of e.effects)a.is(Fp.reconfigure)?(n&&(r=new Map,n.compartments.forEach((l,c)=>r.set(c,l)),n=null),r.set(a.value.compartment,a.value.extension)):a.is(Ze.reconfigure)?(n=null,i=a.value):a.is(Ze.appendConfig)&&(n=null,i=zu(i).concat(a.value));let s;n?s=e.startState.values.slice():(n=yv.resolve(i,r,this),s=new ot(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(l,c)=>c.reconfigure(l,this),null).values);let o=e.startState.facet(t2)?e.newSelection:e.newSelection.asSingle();new ot(n,e.newDoc,o,s,(a,l)=>l.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:re.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,i=e(n.ranges[0]),r=this.changes(i.changes),s=[i.range],o=zu(i.effects);for(let a=1;a<n.ranges.length;a++){let l=e(n.ranges[a]),c=this.changes(l.changes),u=c.map(r);for(let f=0;f<a;f++)s[f]=s[f].map(u);let d=r.mapDesc(c,!0);s.push(l.range.map(d)),r=r.compose(u),o=Ze.mapEffects(o,u).concat(Ze.mapEffects(zu(l.effects),d))}return{changes:r,selection:re.create(s,n.mainIndex),effects:o}}changes(e=[]){return e instanceof wn?e:wn.of(e,this.doc.length,this.facet(ot.lineSeparator))}toText(e){return ut.of(e.split(this.facet(ot.lineSeparator)||XS))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(uh(this,n),bv(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let r=e[i];r instanceof Si&&this.config.address[r.id]!=null&&(n[i]=r.spec.toJSON(this.field(e[i]),this))}return n}static fromJSON(e,n={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(i){for(let s in i)if(Object.prototype.hasOwnProperty.call(e,s)){let o=i[s],a=e[s];r.push(o.init(l=>o.spec.fromJSON(a,l)))}}return ot.create({doc:e.doc,selection:re.fromJSON(e.selection),extensions:n.extensions?r.concat([n.extensions]):r})}static create(e={}){let n=yv.resolve(e.extensions||[],new Map),i=e.doc instanceof ut?e.doc:ut.of((e.doc||"").split(n.staticFacet(ot.lineSeparator)||XS)),r=e.selection?e.selection instanceof re?e.selection:re.single(e.selection.anchor,e.selection.head):re.single(0);return QL(r,i.length),n.staticFacet(t2)||(r=r.asSingle()),new ot(n,i,r,n.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(ot.tabSize)}get lineBreak(){return this.facet(ot.lineSeparator)||`
`}get readOnly(){return this.facet(oj)}phrase(e,...n){for(let i of this.facet(ot.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(i,r)=>{if(r=="$")return"$";let s=+(r||1);return!s||s>n.length?i:n[s-1]})),e}languageDataAt(e,n,i=-1){let r=[];for(let s of this.facet(tj))for(let o of s(this,n,i))Object.prototype.hasOwnProperty.call(o,e)&&r.push(o[e]);return r}charCategorizer(e){return wZ(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:i,length:r}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-i,a=e-i;for(;o>0;){let l=Vn(n,o,!1);if(s(n.slice(l,o))!=Hn.Word)break;o=l}for(;a<r;){let l=Vn(n,a);if(s(n.slice(a,l))!=Hn.Word)break;a=l}return o==a?null:re.range(o+i,a+i)}}ot.allowMultipleSelections=t2;ot.tabSize=Ee.define({combine:t=>t.length?t[0]:4});ot.lineSeparator=nj;ot.readOnly=oj;ot.phrases=Ee.define({compare(t,e){let n=Object.keys(t),i=Object.keys(e);return n.length==i.length&&n.every(r=>t[r]==e[r])}});ot.languageData=tj;ot.changeFilter=ij;ot.transactionFilter=rj;ot.transactionExtender=sj;Fp.reconfigure=Ze.define();function xl(t,e,n={}){let i={};for(let r of t)for(let s of Object.keys(r)){let o=r[s],a=i[s];if(a===void 0)i[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(n,s))i[s]=n[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let r in e)i[r]===void 0&&(i[r]=e[r]);return i}class Ec{eq(e){return this==e}range(e,n=e){return r2.create(e,n,this)}}Ec.prototype.startSide=Ec.prototype.endSide=0;Ec.prototype.point=!1;Ec.prototype.mapMode=Oi.TrackDel;let r2=class cj{constructor(e,n,i){this.from=e,this.to=n,this.value=i}static create(e,n,i){return new cj(e,n,i)}};function s2(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class sC{constructor(e,n,i,r){this.from=e,this.to=n,this.value=i,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,n,i,r=0){let s=i?this.to:this.from;for(let o=r,a=s.length;;){if(o==a)return o;let l=o+a>>1,c=s[l]-e||(i?this.value[l].endSide:this.value[l].startSide)-n;if(l==o)return c>=0?o:a;c>=0?a=l:o=l+1}}between(e,n,i,r){for(let s=this.findIndex(n,-1e9,!0),o=this.findIndex(i,1e9,!1,s);s<o;s++)if(r(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let i=[],r=[],s=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let c=this.value[l],u=this.from[l]+e,d=this.to[l]+e,f,p;if(u==d){let m=n.mapPos(u,c.startSide,c.mapMode);if(m==null||(f=p=m,c.startSide!=c.endSide&&(p=n.mapPos(u,c.endSide),p<f)))continue}else if(f=n.mapPos(u,c.startSide),p=n.mapPos(d,c.endSide),f>p||f==p&&c.startSide>0&&c.endSide<=0)continue;(p-f||c.endSide-c.startSide)<0||(o<0&&(o=f),c.point&&(a=Math.max(a,p-f)),i.push(c),r.push(f-o),s.push(p-o))}return{mapped:i.length?new sC(r,s,i,a):null,pos:o}}}class bt{constructor(e,n,i,r){this.chunkPos=e,this.chunk=n,this.nextLayer=i,this.maxPoint=r}static create(e,n,i,r){return new bt(e,n,i,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:i=!1,filterFrom:r=0,filterTo:s=this.length}=e,o=e.filter;if(n.length==0&&!o)return this;if(i&&(n=n.slice().sort(s2)),this.isEmpty)return n.length?bt.of(n):this;let a=new uj(this,null,-1).goto(0),l=0,c=[],u=new ol;for(;a.value||l<n.length;)if(l<n.length&&(a.from-n[l].from||a.startSide-n[l].value.startSide)>=0){let d=n[l++];u.addInner(d.from,d.to,d.value)||c.push(d)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==n.length||this.chunkEnd(a.chunkIndex)<n[l].from)&&(!o||r>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&u.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||r>a.to||s<a.from||o(a.from,a.to,a.value))&&(u.addInner(a.from,a.to,a.value)||c.push(r2.create(a.from,a.to,a.value))),a.next());return u.finishInner(this.nextLayer.isEmpty&&!c.length?bt.empty:this.nextLayer.update({add:c,filter:o,filterFrom:r,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],i=[],r=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],c=e.touchesRange(a,a+l.length);if(c===!1)r=Math.max(r,l.maxPoint),n.push(l),i.push(e.mapPos(a));else if(c===!0){let{mapped:u,pos:d}=l.map(a,e);u&&(r=Math.max(r,u.maxPoint),n.push(u),i.push(d))}}let s=this.nextLayer.map(e);return n.length==0?s:new bt(i,n,s||bt.empty,r)}between(e,n,i){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let s=this.chunkPos[r],o=this.chunk[r];if(n>=s&&e<=s+o.length&&o.between(s,e-s,n-s,i)===!1)return}this.nextLayer.between(e,n,i)}}iter(e=0){return tp.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return tp.from(e).goto(n)}static compare(e,n,i,r,s=-1){let o=e.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),a=n.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),l=R3(o,a,i),c=new df(o,l,s),u=new df(a,l,s);i.iterGaps((d,f,p)=>O3(c,d,u,f,p,r)),i.empty&&i.length==0&&O3(c,0,u,0,0,r)}static eq(e,n,i=0,r){r==null&&(r=999999999);let s=e.filter(u=>!u.isEmpty&&n.indexOf(u)<0),o=n.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=R3(s,o),l=new df(s,a,0).goto(i),c=new df(o,a,0).goto(i);for(;;){if(l.to!=c.to||!o2(l.active,c.active)||l.point&&(!c.point||!l.point.eq(c.point)))return!1;if(l.to>r)return!0;l.next(),c.next()}}static spans(e,n,i,r,s=-1){let o=new df(e,null,s).goto(n),a=n,l=o.openStart;for(;;){let c=Math.min(o.to,i);if(o.point){let u=o.activeForPoint(o.to),d=o.pointFrom<n?u.length+1:o.point.startSide<0?u.length:Math.min(u.length,l);r.point(a,c,o.point,u,d,o.pointRank),l=Math.min(o.openEnd(c),u.length)}else c>a&&(r.span(a,c,o.active,l),l=o.openEnd(c));if(o.to>i)return l+(o.point&&o.to>i?1:0);a=o.to,o.next()}}static of(e,n=!1){let i=new ol;for(let r of e instanceof r2?[e]:n?xZ(e):e)i.add(r.from,r.to,r.value);return i.finish()}static join(e){if(!e.length)return bt.empty;let n=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let r=e[i];r!=bt.empty;r=r.nextLayer)n=new bt(r.chunkPos,r.chunk,n,Math.max(r.maxPoint,n.maxPoint));return n}}bt.empty=new bt([],[],null,-1);function xZ(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let i=t[n];if(s2(e,i)>0)return t.slice().sort(s2);e=i}return t}bt.empty.nextLayer=bt.empty;class ol{finishChunk(e){this.chunks.push(new sC(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,i){this.addInner(e,n,i)||(this.nextLayer||(this.nextLayer=new ol)).add(e,n,i)}addInner(e,n,i){let r=e-this.lastTo||i.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=n,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let i=n.value.length-1;return this.last=n.value[i],this.lastFrom=n.from[i]+e,this.lastTo=n.to[i]+e,!0}finish(){return this.finishInner(bt.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=bt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function R3(t,e,n){let i=new Map;for(let s of t)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&i.set(s.chunk[o],s.chunkPos[o]);let r=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let a=i.get(s.chunk[o]);a!=null&&(n?n.mapPos(a):a)==s.chunkPos[o]&&!(n!=null&&n.touchesRange(a,a+s.chunk[o].length))&&r.add(s.chunk[o])}return r}class uj{constructor(e,n,i,r=0){this.layer=e,this.skip=n,this.minPoint=i,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,i){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!i||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],i=e+n.from[this.rangeIndex];if(this.from=i,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class tp{constructor(e){this.heap=e}static from(e,n=null,i=-1){let r=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&r.push(new uj(o,n,i,s));return r.length==1?r[0]:new tp(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let i of this.heap)i.goto(e,n);for(let i=this.heap.length>>1;i>=0;i--)Gw(this.heap,i);return this.next(),this}forward(e,n){for(let i of this.heap)i.forward(e,n);for(let i=this.heap.length>>1;i>=0;i--)Gw(this.heap,i);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Gw(this.heap,0)}}}function Gw(t,e){for(let n=t[e];;){let i=(e<<1)+1;if(i>=t.length)break;let r=t[i];if(i+1<t.length&&r.compare(t[i+1])>=0&&(r=t[i+1],i++),n.compare(r)<0)break;t[i]=n,t[e]=r,e=i}}class df{constructor(e,n,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=tp.from(e,n,i)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){Bm(this.active,e),Bm(this.activeTo,e),Bm(this.activeRank,e),this.minActive=I3(this.active,this.activeTo)}addActive(e){let n=0,{value:i,to:r,rank:s}=this.cursor;for(;n<this.activeRank.length&&(s-this.activeRank[n]||r-this.activeTo[n])>0;)n++;zm(this.active,n,i),zm(this.activeTo,n,r),zm(this.activeRank,n,s),e&&zm(e,n,this.cursor.from),this.minActive=I3(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),i&&Bm(i,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(i),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let r=i.length-1;r>=0&&i[r]<e;r--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&n.push(this.active[i]);return n.reverse()}openEnd(e){let n=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)n++;return n}}function O3(t,e,n,i,r,s){t.goto(e),n.goto(i);let o=i+r,a=i,l=i-e;for(;;){let c=t.to+l-n.to,u=c||t.endSide-n.endSide,d=u<0?t.to+l:n.to,f=Math.min(d,o);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&o2(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(a,f,t.point,n.point):f>a&&!o2(t.active,n.active)&&s.compareRange(a,f,t.active,n.active),d>o)break;(c||t.openEnd!=n.openEnd)&&s.boundChange&&s.boundChange(d),a=d,u<=0&&t.next(),u>=0&&n.next()}}function o2(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function Bm(t,e){for(let n=e,i=t.length-1;n<i;n++)t[n]=t[n+1];t.pop()}function zm(t,e,n){for(let i=t.length-1;i>=e;i--)t[i+1]=t[i];t[e]=n}function I3(t,e){let n=-1,i=1e9;for(let r=0;r<e.length;r++)(e[r]-i||t[r].endSide-t[n].endSide)<0&&(n=r,i=e[r]);return n}function Bp(t,e,n=t.length){let i=0;for(let r=0;r<n&&r<t.length;)t.charCodeAt(r)==9?(i+=e-i%e,r++):(i++,r=Vn(t,r));return i}function SZ(t,e,n,i){for(let r=0,s=0;;){if(s>=e)return r;if(r==t.length)break;s+=t.charCodeAt(r)==9?n-s%n:1,r=Vn(t,r)}return t.length}const a2="ͼ",D3=typeof Symbol>"u"?"__"+a2:Symbol.for(a2),l2=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),L3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class al{constructor(e,n){this.rules=[];let{finish:i}=n||{};function r(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,l,c){let u=[],d=/^@(\w+)\b/.exec(o[0]),f=d&&d[1]=="keyframes";if(d&&a==null)return l.push(o[0]+";");for(let p in a){let m=a[p];if(/&/.test(p))s(p.split(/,\s*/).map(g=>o.map(y=>g.replace(/&/,y))).reduce((g,y)=>g.concat(y)),m,l);else if(m&&typeof m=="object"){if(!d)throw new RangeError("The value of a property ("+p+") should be a primitive value.");s(r(p),m,u,f)}else m!=null&&u.push(p.replace(/_.*/,"").replace(/[A-Z]/g,g=>"-"+g.toLowerCase())+": "+m+";")}(u.length||f)&&l.push((i&&!d&&!c?o.map(i):o).join(", ")+" {"+u.join(" ")+"}")}for(let o in e)s(r(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=L3[D3]||1;return L3[D3]=e+1,a2+e.toString(36)}static mount(e,n,i){let r=e[l2],s=i&&i.nonce;r?s&&r.setNonce(s):r=new kZ(e,s),r.mount(Array.isArray(n)?n:[n],e)}}let j3=new Map;class kZ{constructor(e,n){let i=e.ownerDocument||e,r=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let s=j3.get(i);if(s)return e[l2]=s;this.sheet=new r.CSSStyleSheet,j3.set(i,this)}else this.styleTag=i.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[l2]=this}mount(e,n){let i=this.sheet,r=0,s=0;for(let o=0;o<e.length;o++){let a=e[o],l=this.modules.indexOf(a);if(l<s&&l>-1&&(this.modules.splice(l,1),s--,l=-1),l==-1){if(this.modules.splice(s++,0,a),i)for(let c=0;c<a.rules.length;c++)i.insertRule(a.rules[c],r++)}else{for(;s<l;)r+=this.modules[s++].rules.length;r+=a.rules.length,s++}}if(i)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let o="";for(let l=0;l<this.modules.length;l++)o+=this.modules[l].getRules()+`
`;this.styleTag.textContent=o;let a=n.head||n;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var ll={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},np={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},_Z=typeof navigator<"u"&&/Mac/.test(navigator.platform),CZ=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Fn=0;Fn<10;Fn++)ll[48+Fn]=ll[96+Fn]=String(Fn);for(var Fn=1;Fn<=24;Fn++)ll[Fn+111]="F"+Fn;for(var Fn=65;Fn<=90;Fn++)ll[Fn]=String.fromCharCode(Fn+32),np[Fn]=String.fromCharCode(Fn);for(var Kw in ll)np.hasOwnProperty(Kw)||(np[Kw]=ll[Kw]);function EZ(t){var e=_Z&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||CZ&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?np:ll)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function Et(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var r=n[i];typeof r=="string"?t.setAttribute(i,r):r!=null&&(t[i]=r)}e++}for(;e<arguments.length;e++)dj(t,arguments[e]);return t}function dj(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)dj(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}function ip(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function c2(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function i0(t,e){if(!e.anchorNode)return!1;try{return c2(t,e.anchorNode)}catch{return!1}}function rp(t){return t.nodeType==3?Nc(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function dh(t,e,n,i){return n?$3(t,e,n,i,-1)||$3(t,e,n,i,1):!1}function Ac(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function wv(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function $3(t,e,n,i,r){for(;;){if(t==n&&e==i)return!0;if(e==(r<0?0:no(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=Ac(t)+(r<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(r<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=r<0?no(t):0}else return!1}}function no(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Wy(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function AZ(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function fj(t,e){let n=e.width/t.offsetWidth,i=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-t.offsetHeight)<1)&&(i=1),{scaleX:n,scaleY:i}}function NZ(t,e,n,i,r,s,o,a){let l=t.ownerDocument,c=l.defaultView||window;for(let u=t,d=!1;u&&!d;)if(u.nodeType==1){let f,p=u==l.body,m=1,g=1;if(p)f=AZ(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(u).position)&&(d=!0),u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let b=u.getBoundingClientRect();({scaleX:m,scaleY:g}=fj(u,b)),f={left:b.left,right:b.left+u.clientWidth*m,top:b.top,bottom:b.top+u.clientHeight*g}}let y=0,v=0;if(r=="nearest")e.top<f.top?(v=e.top-(f.top+o),n>0&&e.bottom>f.bottom+v&&(v=e.bottom-f.bottom+o)):e.bottom>f.bottom&&(v=e.bottom-f.bottom+o,n<0&&e.top-v<f.top&&(v=e.top-(f.top+o)));else{let b=e.bottom-e.top,w=f.bottom-f.top;v=(r=="center"&&b<=w?e.top+b/2-w/2:r=="start"||r=="center"&&n<0?e.top-o:e.bottom-w+o)-f.top}if(i=="nearest"?e.left<f.left?(y=e.left-(f.left+s),n>0&&e.right>f.right+y&&(y=e.right-f.right+s)):e.right>f.right&&(y=e.right-f.right+s,n<0&&e.left<f.left+y&&(y=e.left-(f.left+s))):y=(i=="center"?e.left+(e.right-e.left)/2-(f.right-f.left)/2:i=="start"==a?e.left-s:e.right-(f.right-f.left)+s)-f.left,y||v)if(p)c.scrollBy(y,v);else{let b=0,w=0;if(v){let k=u.scrollTop;u.scrollTop+=v/g,w=(u.scrollTop-k)*g}if(y){let k=u.scrollLeft;u.scrollLeft+=y/m,b=(u.scrollLeft-k)*m}e={left:e.left-b,top:e.top-w,right:e.right-b,bottom:e.bottom-w},b&&Math.abs(b-y)<1&&(i="nearest"),w&&Math.abs(w-v)<1&&(r="nearest")}if(p)break;(e.top<f.top||e.bottom>f.bottom||e.left<f.left||e.right>f.right)&&(e={left:Math.max(e.left,f.left),right:Math.min(e.right,f.right),top:Math.max(e.top,f.top),bottom:Math.min(e.bottom,f.bottom)}),u=u.assignedSlot||u.parentNode}else if(u.nodeType==11)u=u.host;else break}function PZ(t){let e=t.ownerDocument,n,i;for(let r=t.parentNode;r&&!(r==e.body||n&&i);)if(r.nodeType==1)!i&&r.scrollHeight>r.clientHeight&&(i=r),!n&&r.scrollWidth>r.clientWidth&&(n=r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;return{x:n,y:i}}class MZ{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:i}=e;this.set(n,Math.min(e.anchorOffset,n?no(n):0),i,Math.min(e.focusOffset,i?no(i):0))}set(e,n,i,r){this.anchorNode=e,this.anchorOffset=n,this.focusNode=i,this.focusOffset=r}}let qc=null;function hj(t){if(t.setActive)return t.setActive();if(qc)return t.focus(qc);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(qc==null?{get preventScroll(){return qc={preventScroll:!0},!0}}:void 0),!qc){qc=!1;for(let n=0;n<e.length;){let i=e[n++],r=e[n++],s=e[n++];i.scrollTop!=r&&(i.scrollTop=r),i.scrollLeft!=s&&(i.scrollLeft=s)}}}let F3;function Nc(t,e,n=e){let i=F3||(F3=document.createRange());return i.setEnd(t,n),i.setStart(t,e),i}function Uu(t,e,n,i){let r={key:e,code:e,keyCode:n,which:n,cancelable:!0};i&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=i);let s=new KeyboardEvent("keydown",r);s.synthetic=!0,t.dispatchEvent(s);let o=new KeyboardEvent("keyup",r);return o.synthetic=!0,t.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function TZ(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function pj(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function RZ(t,e){let n=e.focusNode,i=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=i)return!1;for(i=Math.min(i,no(n));;)if(i){if(n.nodeType!=1)return!1;let r=n.childNodes[i-1];r.contentEditable=="false"?i--:(n=r,i=no(n))}else{if(n==t)return!0;i=Ac(n),n=n.parentNode}}function mj(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function gj(t,e){for(let n=t,i=e;;){if(n.nodeType==3&&i>0)return{node:n,offset:i};if(n.nodeType==1&&i>0){if(n.contentEditable=="false")return null;n=n.childNodes[i-1],i=no(n)}else if(n.parentNode&&!wv(n))i=Ac(n),n=n.parentNode;else return null}}function vj(t,e){for(let n=t,i=e;;){if(n.nodeType==3&&i<n.nodeValue.length)return{node:n,offset:i};if(n.nodeType==1&&i<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[i],i=0}else if(n.parentNode&&!wv(n))i=Ac(n)+1,n=n.parentNode;else return null}}class ni{constructor(e,n,i=!0){this.node=e,this.offset=n,this.precise=i}static before(e,n){return new ni(e.parentNode,Ac(e),n)}static after(e,n){return new ni(e.parentNode,Ac(e)+1,n)}}const oC=[];class Nt{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let i of this.children){if(i==e)return n;n+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let i=this.dom,r=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=r?r.nextSibling:i.firstChild)){let a=Nt.get(s);(!a||!a.parent&&a.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,n),o.flags&=-8}if(s=r?r.nextSibling:i.firstChild,n&&!n.written&&n.node==i&&s!=o.dom&&(n.written=!0),o.dom.parentNode==i)for(;s&&s!=o.dom;)s=B3(s);else i.insertBefore(o.dom,s);r=o.dom}for(s=r?r.nextSibling:i.firstChild,s&&n&&n.node==i&&(n.written=!0);s;)s=B3(s)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,n),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let i;if(e==this.dom)i=this.dom.childNodes[n];else{let r=no(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;r==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?r=-1:r=1),e=s}r<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!Nt.get(i);)i=i.nextSibling;if(!i)return this.length;for(let r=0,s=0;;r++){let o=this.children[r];if(o.dom==i)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,n,i=0){let r=-1,s=-1,o=-1,a=-1;for(let l=0,c=i,u=i;l<this.children.length;l++){let d=this.children[l],f=c+d.length;if(c<e&&f>n)return d.domBoundsAround(e,n,c);if(f>=e&&r==-1&&(r=l,s=c),c>n&&d.dom.parentNode==this.dom){o=l,a=u;break}u=f,c=f+d.breakAfter}return{from:s,to:a<0?i+this.length:a,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,i=oC){this.markDirty();for(let r=e;r<n;r++){let s=this.children[r];s.parent==this&&i.indexOf(s)<0&&s.destroy()}i.length<250?this.children.splice(e,n-e,...i):this.children=[].concat(this.children.slice(0,e),i,this.children.slice(n));for(let r=0;r<i.length;r++)i[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new yj(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,i,r,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}Nt.prototype.breakAfter=0;function B3(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class yj{constructor(e,n,i){this.children=e,this.pos=n,this.i=i,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function bj(t,e,n,i,r,s,o,a,l){let{children:c}=t,u=c.length?c[e]:null,d=s.length?s[s.length-1]:null,f=d?d.breakAfter:o;if(!(e==i&&u&&!o&&!f&&s.length<2&&u.merge(n,r,s.length?d:null,n==0,a,l))){if(i<c.length){let p=c[i];p&&(r<p.length||p.breakAfter&&(d!=null&&d.breakAfter))?(e==i&&(p=p.split(r),r=0),!f&&d&&p.merge(0,r,d,!0,0,l)?s[s.length-1]=p:((r||p.children.length&&!p.children[0].length)&&p.merge(0,r,null,!1,0,l),s.push(p))):p!=null&&p.breakAfter&&(d?d.breakAfter=1:o=1),i++}for(u&&(u.breakAfter=o,n>0&&(!o&&s.length&&u.merge(n,u.length,s[0],!1,a,0)?u.breakAfter=s.shift().breakAfter:(n<u.length||u.children.length&&u.children[u.children.length-1].length==0)&&u.merge(n,u.length,null,!1,a,0),e++));e<i&&s.length;)if(c[i-1].become(s[s.length-1]))i--,s.pop(),l=s.length?0:a;else if(c[e].become(s[0]))e++,s.shift(),a=s.length?0:l;else break;!s.length&&e&&i<c.length&&!c[e-1].breakAfter&&c[i].merge(0,0,c[e-1],!1,a,l)&&e--,(e<i||s.length)&&t.replaceChildren(e,i,s)}}function wj(t,e,n,i,r,s){let o=t.childCursor(),{i:a,off:l}=o.findPos(n,1),{i:c,off:u}=o.findPos(e,-1),d=e-n;for(let f of i)d+=f.length;t.length+=d,bj(t,c,u,a,l,i,0,r,s)}let Ri=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},u2=typeof document<"u"?document:{documentElement:{style:{}}};const d2=/Edge\/(\d+)/.exec(Ri.userAgent),xj=/MSIE \d/.test(Ri.userAgent),f2=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ri.userAgent),Gy=!!(xj||f2||d2),z3=!Gy&&/gecko\/(\d+)/i.test(Ri.userAgent),qw=!Gy&&/Chrome\/(\d+)/.exec(Ri.userAgent),OZ="webkitFontSmoothing"in u2.documentElement.style,Sj=!Gy&&/Apple Computer/.test(Ri.vendor),U3=Sj&&(/Mobile\/\w+/.test(Ri.userAgent)||Ri.maxTouchPoints>2);var _e={mac:U3||/Mac/.test(Ri.platform),windows:/Win/.test(Ri.platform),linux:/Linux|X11/.test(Ri.platform),ie:Gy,ie_version:xj?u2.documentMode||6:f2?+f2[1]:d2?+d2[1]:0,gecko:z3,gecko_version:z3?+(/Firefox\/(\d+)/.exec(Ri.userAgent)||[0,0])[1]:0,chrome:!!qw,chrome_version:qw?+qw[1]:0,ios:U3,android:/Android\b/.test(Ri.userAgent),safari:Sj,webkit_version:OZ?+(/\bAppleWebKit\/(\d+)/.exec(Ri.userAgent)||[0,0])[1]:0,tabSize:u2.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const IZ=256;class fs extends Nt{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,i){return this.flags&8||i&&(!(i instanceof fs)||this.length-(n-e)+i.length>IZ||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new fs(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new ni(this.dom,e)}domBoundsAround(e,n,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return DZ(this.dom,e,n)}}class Uo extends Nt{constructor(e,n=[],i=0){super(),this.mark=e,this.children=n,this.length=i;for(let r of n)r.setParent(this)}setAttrs(e){if(pj(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,i,r,s,o){return i&&(!(i instanceof Uo&&i.mark.eq(this.mark))||e&&s<=0||n<this.length&&o<=0)?!1:(wj(this,e,n,i?i.children.slice():[],s-1,o-1),this.markDirty(),!0)}split(e){let n=[],i=0,r=-1,s=0;for(let a of this.children){let l=i+a.length;l>e&&n.push(i<e?a.split(e-i):a),r<0&&i>=e&&(r=s),i=l,s++}let o=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new Uo(this.mark,n,o)}domAtPos(e){return kj(this,e)}coordsAt(e,n){return Cj(this,e,n)}}function DZ(t,e,n){let i=t.nodeValue.length;e>i&&(e=i);let r=e,s=e,o=0;e==0&&n<0||e==i&&n>=0?_e.chrome||_e.gecko||(e?(r--,o=1):s<i&&(s++,o=-1)):n<0?r--:s<i&&s++;let a=Nc(t,r,s).getClientRects();if(!a.length)return null;let l=a[(o?o<0:n>=0)?0:a.length-1];return _e.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,c=>c.width)||l),o?Wy(l,o<0):l||null}class Na extends Nt{static create(e,n,i){return new Na(e,n,i)}constructor(e,n,i){super(),this.widget=e,this.length=n,this.side=i,this.prevWidget=null}split(e){let n=Na.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,n,i,r,s,o){return i&&(!(i instanceof Na)||!this.widget.compare(i.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}become(e){return e instanceof Na&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return ut.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,i=n&&n.state.doc,r=this.posAtStart;return i?i.slice(r,r+this.length):ut.empty}domAtPos(e){return(this.length?e==0:this.side>0)?ni.before(this.dom):ni.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let i=this.widget.coordsAt(this.dom,e,n);if(i)return i;let r=this.dom.getClientRects(),s=null;if(!r.length)return null;let o=this.side?this.side<0:e>0;for(let a=o?r.length-1:0;s=r[a],!(e>0?a==0:a==r.length-1||s.top<s.bottom);a+=o?-1:1);return Wy(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Cd extends Nt{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Cd&&e.side==this.side}split(){return new Cd(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?ni.before(this.dom):ni.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return ut.empty}get isHidden(){return!0}}fs.prototype.children=Na.prototype.children=Cd.prototype.children=oC;function kj(t,e){let n=t.dom,{children:i}=t,r=0;for(let s=0;r<i.length;r++){let o=i[r],a=s+o.length;if(!(a==s&&o.getSide()<=0)){if(e>s&&e<a&&o.dom.parentNode==n)return o.domAtPos(e-s);if(e<=s)break;s=a}}for(let s=r;s>0;s--){let o=i[s-1];if(o.dom.parentNode==n)return o.domAtPos(o.length)}for(let s=r;s<i.length;s++){let o=i[s];if(o.dom.parentNode==n)return o.domAtPos(0)}return new ni(n,0)}function _j(t,e,n){let i,{children:r}=t;n>0&&e instanceof Uo&&r.length&&(i=r[r.length-1])instanceof Uo&&i.mark.eq(e.mark)?_j(i,e.children[0],n-1):(r.push(e),e.setParent(t)),t.length+=e.length}function Cj(t,e,n){let i=null,r=-1,s=null,o=-1;function a(c,u){for(let d=0,f=0;d<c.children.length&&f<=u;d++){let p=c.children[d],m=f+p.length;m>=u&&(p.children.length?a(p,u-f):(!s||s.isHidden&&(n>0||jZ(s,p)))&&(m>u||f==m&&p.getSide()>0)?(s=p,o=u-f):(f<u||f==m&&p.getSide()<0&&!p.isHidden)&&(i=p,r=u-f)),f=m}}a(t,e);let l=(n<0?i:s)||i||s;return l?l.coordsAt(Math.max(0,l==i?r:o),n):LZ(t)}function LZ(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=rp(e);return n[n.length-1]||null}function jZ(t,e){let n=t.coordsAt(0,1),i=e.coordsAt(0,1);return n&&i&&i.top<n.bottom}function h2(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const V3=Object.create(null);function xv(t,e,n){if(t==e)return!0;t||(t=V3),e||(e=V3);let i=Object.keys(t),r=Object.keys(e);if(i.length-(n&&i.indexOf(n)>-1?1:0)!=r.length-(n&&r.indexOf(n)>-1?1:0))return!1;for(let s of i)if(s!=n&&(r.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function p2(t,e,n){let i=!1;if(e)for(let r in e)n&&r in n||(i=!0,r=="style"?t.style.cssText="":t.removeAttribute(r));if(n)for(let r in n)e&&e[r]==n[r]||(i=!0,r=="style"?t.style.cssText=n[r]:t.setAttribute(r,n[r]));return i}function $Z(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let i=t.attributes[n];e[i.name]=i.value}return e}class Sl{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var yi=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(yi||(yi={}));class Qe extends Ec{constructor(e,n,i,r){super(),this.startSide=e,this.endSide=n,this.widget=i,this.spec=r}get heightRelevant(){return!1}static mark(e){return new zp(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return n+=i&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new cl(e,n,n,i,e.widget||null,!1)}static replace(e){let n=!!e.block,i,r;if(e.isBlockGap)i=-5e8,r=4e8;else{let{start:s,end:o}=Ej(e,n);i=(s?n?-3e8:-1:5e8)-1,r=(o?n?2e8:1:-6e8)+1}return new cl(e,i,r,n,e.widget||null,!0)}static line(e){return new Up(e)}static set(e,n=!1){return bt.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Qe.none=bt.empty;class zp extends Qe{constructor(e){let{start:n,end:i}=Ej(e);super(n?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,i;return this==e||e instanceof zp&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&xv(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}zp.prototype.point=!1;class Up extends Qe{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Up&&this.spec.class==e.spec.class&&xv(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}Up.prototype.mapMode=Oi.TrackBefore;Up.prototype.point=!0;class cl extends Qe{constructor(e,n,i,r,s,o){super(n,i,s,e),this.block=r,this.isReplace=o,this.mapMode=r?n<=0?Oi.TrackBefore:Oi.TrackAfter:Oi.TrackDel}get type(){return this.startSide!=this.endSide?yi.WidgetRange:this.startSide<=0?yi.WidgetBefore:yi.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof cl&&FZ(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}cl.prototype.point=!0;function Ej(t,e=!1){let{inclusiveStart:n,inclusiveEnd:i}=t;return n==null&&(n=t.inclusive),i==null&&(i=t.inclusive),{start:n??e,end:i??e}}function FZ(t,e){return t==e||!!(t&&e&&t.compare(e))}function r0(t,e,n,i=0){let r=n.length-1;r>=0&&n[r]+i>=t?n[r]=Math.max(n[r],e):n.push(t,e)}class fn extends Nt{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,i,r,s,o){if(i){if(!(i instanceof fn))return!1;this.dom||i.transferDOM(this)}return r&&this.setDeco(i?i.attrs:null),wj(this,e,n,i?i.children.slice():[],s,o),!0}split(e){let n=new fn;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i,off:r}=this.childPos(e);r&&(n.append(this.children[i].split(r),0),this.children[i].merge(r,this.children[i].length,null,!1,0,0),i++);for(let s=i;s<this.children.length;s++)n.append(this.children[s],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){xv(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){_j(this,e,n)}addLineDeco(e){let n=e.spec.attributes,i=e.spec.class;n&&(this.attrs=h2(n,this.attrs||{})),i&&(this.attrs=h2({class:i},this.attrs||{}))}domAtPos(e){return kj(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var i;this.dom?this.flags&4&&(pj(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(p2(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let r=this.dom.lastChild;for(;r&&Nt.get(r)instanceof Uo;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((i=Nt.get(r))===null||i===void 0?void 0:i.isEditable)==!1&&(!_e.ios||!this.children.some(s=>s instanceof fs))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let i of this.children){if(!(i instanceof fs)||/[^ -~]/.test(i.text))return null;let r=rp(i.dom);if(r.length!=1)return null;e+=r[0].width,n=r[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let i=Cj(this,e,n);if(!this.children.length&&i&&this.parent){let{heightOracle:r}=this.parent.view.viewState,s=i.bottom-i.top;if(Math.abs(s-r.lineHeight)<2&&r.textHeight<s){let o=(s-r.textHeight)/2;return{top:i.top+o,bottom:i.bottom-o,left:i.left,right:i.left}}}return i}become(e){return e instanceof fn&&this.children.length==0&&e.children.length==0&&xv(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,n){for(let i=0,r=0;i<e.children.length;i++){let s=e.children[i],o=r+s.length;if(o>=n){if(s instanceof fn)return s;if(o>n)break}r=o+s.breakAfter}return null}}class Oo extends Nt{constructor(e,n,i){super(),this.widget=e,this.length=n,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,n,i,r,s,o){return i&&(!(i instanceof Oo)||!this.widget.compare(i.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?ni.before(this.dom):ni.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let i=new Oo(this.widget,n,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return oC}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):ut.empty}domBoundsAround(){return null}become(e){return e instanceof Oo&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){let i=this.widget.coordsAt(this.dom,e,n);return i||(this.widget instanceof m2?null:Wy(this.dom.getBoundingClientRect(),this.length?e==0:n<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:n,endSide:i}=this.deco;return n==i?!1:e<0?n<0:i>0}}class m2 extends Sl{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class fh{constructor(e,n,i,r){this.doc=e,this.pos=n,this.end=i,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Oo&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new fn),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Um(new Cd(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Oo)&&this.getLine()}buildText(e,n,i){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(n.slice(n.length-i)),this.getLine().append(Um(new fs(this.text.slice(this.textOff,this.textOff+r)),n),i),this.atCursorPos=!0,this.textOff+=r,e-=r,i=0}}span(e,n,i,r){this.buildText(n-e,i,r),this.pos=n,this.openStart<0&&(this.openStart=r)}point(e,n,i,r,s,o){if(this.disallowBlockEffectsFor[o]&&i instanceof cl){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=n-e;if(i instanceof cl)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Oo(i.widget||Ed.block,a,i));else{let l=Na.create(i.widget||Ed.inline,a,a?0:i.startSide),c=this.atCursorPos&&!l.isEditable&&s<=r.length&&(e<n||i.startSide>0),u=!l.isEditable&&(e<n||s>r.length||i.startSide<=0),d=this.getLine();this.pendingBuffer==2&&!c&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(r),c&&(d.append(Um(new Cd(1),r),s),s=r.length+Math.max(0,s-r.length)),d.append(Um(l,r),s),this.atCursorPos=u,this.pendingBuffer=u?e<n||s>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,i,r,s){let o=new fh(e,n,i,s);return o.openEnd=bt.spans(r,n,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function Um(t,e){for(let n of e)t=new Uo(n,[t],t.length);return t}class Ed extends Sl{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Ed.inline=new Ed("span");Ed.block=new Ed("div");var Ft=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(Ft||(Ft={}));const Pc=Ft.LTR,aC=Ft.RTL;function Aj(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const BZ=Aj("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),zZ=Aj("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),g2=Object.create(null),xs=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);g2[e]=n,g2[n]=-e}function Nj(t){return t<=247?BZ[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?zZ[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const UZ=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Pa{get dir(){return this.level%2?aC:Pc}constructor(e,n,i){this.from=e,this.to=n,this.level=i}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,i,r){let s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=n&&a.to>=n){if(a.level==i)return o;(s<0||(r!=0?r<0?a.from<n:a.to>n:e[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}function Pj(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let i=t[n],r=e[n];if(i.from!=r.from||i.to!=r.to||i.direction!=r.direction||!Pj(i.inner,r.inner))return!1}return!0}const At=[];function VZ(t,e,n,i,r){for(let s=0;s<=i.length;s++){let o=s?i[s-1].to:e,a=s<i.length?i[s].from:n,l=s?256:r;for(let c=o,u=l,d=l;c<a;c++){let f=Nj(t.charCodeAt(c));f==512?f=u:f==8&&d==4&&(f=16),At[c]=f==4?2:f,f&7&&(d=f),u=f}for(let c=o,u=l,d=l;c<a;c++){let f=At[c];if(f==128)c<a-1&&u==At[c+1]&&u&24?f=At[c]=u:At[c]=256;else if(f==64){let p=c+1;for(;p<a&&At[p]==64;)p++;let m=c&&u==8||p<n&&At[p]==8?d==1?1:8:256;for(let g=c;g<p;g++)At[g]=m;c=p-1}else f==8&&d==1&&(At[c]=1);u=f,f&7&&(d=f)}}}function HZ(t,e,n,i,r){let s=r==1?2:1;for(let o=0,a=0,l=0;o<=i.length;o++){let c=o?i[o-1].to:e,u=o<i.length?i[o].from:n;for(let d=c,f,p,m;d<u;d++)if(p=g2[f=t.charCodeAt(d)])if(p<0){for(let g=a-3;g>=0;g-=3)if(xs[g+1]==-p){let y=xs[g+2],v=y&2?r:y&4?y&1?s:r:0;v&&(At[d]=At[xs[g]]=v),a=g;break}}else{if(xs.length==189)break;xs[a++]=d,xs[a++]=f,xs[a++]=l}else if((m=At[d])==2||m==1){let g=m==r;l=g?0:1;for(let y=a-3;y>=0;y-=3){let v=xs[y+2];if(v&2)break;if(g)xs[y+2]|=2;else{if(v&4)break;xs[y+2]|=4}}}}}function WZ(t,e,n,i){for(let r=0,s=i;r<=n.length;r++){let o=r?n[r-1].to:t,a=r<n.length?n[r].from:e;for(let l=o;l<a;){let c=At[l];if(c==256){let u=l+1;for(;;)if(u==a){if(r==n.length)break;u=n[r++].to,a=r<n.length?n[r].from:e}else if(At[u]==256)u++;else break;let d=s==1,f=(u<e?At[u]:i)==1,p=d==f?d?1:2:i;for(let m=u,g=r,y=g?n[g-1].to:t;m>l;)m==y&&(m=n[--g].from,y=g?n[g-1].to:t),At[--m]=p;l=u}else s=c,l++}}}function v2(t,e,n,i,r,s,o){let a=i%2?2:1;if(i%2==r%2)for(let l=e,c=0;l<n;){let u=!0,d=!1;if(c==s.length||l<s[c].from){let g=At[l];g!=a&&(u=!1,d=g==16)}let f=!u&&a==1?[]:null,p=u?i:i+1,m=l;e:for(;;)if(c<s.length&&m==s[c].from){if(d)break e;let g=s[c];if(!u)for(let y=g.to,v=c+1;;){if(y==n)break e;if(v<s.length&&s[v].from==y)y=s[v++].to;else{if(At[y]==a)break e;break}}if(c++,f)f.push(g);else{g.from>l&&o.push(new Pa(l,g.from,p));let y=g.direction==Pc!=!(p%2);y2(t,y?i+1:i,r,g.inner,g.from,g.to,o),l=g.to}m=g.to}else{if(m==n||(u?At[m]!=a:At[m]==a))break;m++}f?v2(t,l,m,i+1,r,f,o):l<m&&o.push(new Pa(l,m,p)),l=m}else for(let l=n,c=s.length;l>e;){let u=!0,d=!1;if(!c||l>s[c-1].to){let g=At[l-1];g!=a&&(u=!1,d=g==16)}let f=!u&&a==1?[]:null,p=u?i:i+1,m=l;e:for(;;)if(c&&m==s[c-1].to){if(d)break e;let g=s[--c];if(!u)for(let y=g.from,v=c;;){if(y==e)break e;if(v&&s[v-1].to==y)y=s[--v].from;else{if(At[y-1]==a)break e;break}}if(f)f.push(g);else{g.to<l&&o.push(new Pa(g.to,l,p));let y=g.direction==Pc!=!(p%2);y2(t,y?i+1:i,r,g.inner,g.from,g.to,o),l=g.from}m=g.from}else{if(m==e||(u?At[m-1]!=a:At[m-1]==a))break;m--}f?v2(t,m,l,i+1,r,f,o):m<l&&o.push(new Pa(m,l,p)),l=m}}function y2(t,e,n,i,r,s,o){let a=e%2?2:1;VZ(t,r,s,i,a),HZ(t,r,s,i,a),WZ(r,s,i,a),v2(t,r,s,e,n,i,o)}function GZ(t,e,n){if(!t)return[new Pa(0,0,e==aC?1:0)];if(e==Pc&&!n.length&&!UZ.test(t))return Mj(t.length);if(n.length)for(;t.length>At.length;)At[At.length]=256;let i=[],r=e==Pc?0:1;return y2(t,r,r,n,0,t.length,i),i}function Mj(t){return[new Pa(0,t,0)]}let Tj="";function KZ(t,e,n,i,r){var s;let o=i.head-t.from,a=Pa.find(e,o,(s=i.bidiLevel)!==null&&s!==void 0?s:-1,i.assoc),l=e[a],c=l.side(r,n);if(o==c){let f=a+=r?1:-1;if(f<0||f>=e.length)return null;l=e[a=f],o=l.side(!r,n),c=l.side(r,n)}let u=Vn(t.text,o,l.forward(r,n));(u<l.from||u>l.to)&&(u=c),Tj=t.text.slice(Math.min(o,u),Math.max(o,u));let d=a==(r?e.length-1:0)?null:e[a+(r?1:-1)];return d&&u==c&&d.level+(r?0:1)<l.level?re.cursor(d.side(!r,n)+t.from,d.forward(r,n)?1:-1,d.level):re.cursor(u+t.from,l.forward(r,n)?-1:1,l.level)}function qZ(t,e,n){for(let i=e;i<n;i++){let r=Nj(t.charCodeAt(i));if(r==1)return Pc;if(r==2||r==4)return aC}return Pc}const Rj=Ee.define(),Oj=Ee.define(),Ij=Ee.define(),Dj=Ee.define(),b2=Ee.define(),Lj=Ee.define(),jj=Ee.define(),lC=Ee.define(),cC=Ee.define(),$j=Ee.define({combine:t=>t.some(e=>e)}),Fj=Ee.define({combine:t=>t.some(e=>e)}),Bj=Ee.define();class Vu{constructor(e,n="nearest",i="nearest",r=5,s=5,o=!1){this.range=e,this.y=n,this.x=i,this.yMargin=r,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new Vu(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new Vu(re.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Vm=Ze.define({map:(t,e)=>t.map(e)}),zj=Ze.define();function sr(t,e,n){let i=t.facet(Dj);i.length?i[0](e):window.onerror&&window.onerror(String(e),n,void 0,void 0,e)||(n?console.error(n+":",e):console.error(e))}const Po=Ee.define({combine:t=>t.length?t[0]:!0});let YZ=0;const Nu=Ee.define({combine(t){return t.filter((e,n)=>{for(let i=0;i<n;i++)if(t[i].plugin==e.plugin)return!1;return!0})}});class qn{constructor(e,n,i,r,s){this.id=e,this.create=n,this.domEventHandlers=i,this.domEventObservers=r,this.baseExtensions=s(this),this.extension=this.baseExtensions.concat(Nu.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(Nu.of({plugin:this,arg:e}))}static define(e,n){const{eventHandlers:i,eventObservers:r,provide:s,decorations:o}=n||{};return new qn(YZ++,e,i,r,a=>{let l=[];return o&&l.push(sp.of(c=>{let u=c.plugin(a);return u?o(u):Qe.none})),s&&l.push(s(a)),l})}static fromClass(e,n){return qn.define((i,r)=>new e(i,r),n)}}class Yw{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(i){if(sr(n.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(n){sr(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(i){sr(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const Uj=Ee.define(),uC=Ee.define(),sp=Ee.define(),Vj=Ee.define(),dC=Ee.define(),Hj=Ee.define();function H3(t,e){let n=t.state.facet(Hj);if(!n.length)return n;let i=n.map(s=>s instanceof Function?s(t):s),r=[];return bt.spans(i,e.from,e.to,{point(){},span(s,o,a,l){let c=s-e.from,u=o-e.from,d=r;for(let f=a.length-1;f>=0;f--,l--){let p=a[f].spec.bidiIsolate,m;if(p==null&&(p=qZ(e.text,c,u)),l>0&&d.length&&(m=d[d.length-1]).to==c&&m.direction==p)m.to=u,d=m.inner;else{let g={from:c,to:u,direction:p,inner:[]};d.push(g),d=g.inner}}}}),r}const Wj=Ee.define();function fC(t){let e=0,n=0,i=0,r=0;for(let s of t.state.facet(Wj)){let o=s(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(n=Math.max(n,o.right)),o.top!=null&&(i=Math.max(i,o.top)),o.bottom!=null&&(r=Math.max(r,o.bottom)))}return{left:e,right:n,top:i,bottom:r}}const Uf=Ee.define();class Dr{constructor(e,n,i,r){this.fromA=e,this.toA=n,this.fromB=i,this.toB=r}join(e){return new Dr(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,i=this;for(;n>0;n--){let r=e[n-1];if(!(r.fromA>i.toA)){if(r.toA<i.fromA)break;i=i.join(r),e.splice(n-1,1)}}return e.splice(n,0,i),e}static extendWithRanges(e,n){if(n.length==0)return e;let i=[];for(let r=0,s=0,o=0,a=0;;r++){let l=r==e.length?null:e[r],c=o-a,u=l?l.fromB:1e9;for(;s<n.length&&n[s]<u;){let d=n[s],f=n[s+1],p=Math.max(a,d),m=Math.min(u,f);if(p<=m&&new Dr(p+c,m+c,p,m).addToSet(i),f>u)break;s+=2}if(!l)return i;new Dr(l.fromA,l.toA,l.fromB,l.toB).addToSet(i),o=l.toA,a=l.toB}}}class Sv{constructor(e,n,i){this.view=e,this.state=n,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=wn.empty(this.startState.doc.length);for(let s of i)this.changes=this.changes.compose(s.changes);let r=[];this.changes.iterChangedRanges((s,o,a,l)=>r.push(new Dr(s,o,a,l))),this.changedRanges=r}static create(e,n,i){return new Sv(e,n,i)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class W3 extends Nt{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Qe.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new fn],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Dr(0,0,0,e.state.doc.length)],0,null)}update(e){var n;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:c,toA:u})=>u<this.minWidthFrom||c>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let r=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?r=this.domChanged.newSel.head:!nQ(e.changes,this.hasComposition)&&!e.selectionSet&&(r=e.state.selection.main.head));let s=r>-1?JZ(this.view,e.changes,r):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:c,to:u}=this.hasComposition;i=new Dr(c,u,e.changes.mapPos(c,-1),e.changes.mapPos(u,1)).addToSet(i.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(_e.ie||_e.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,a=this.updateDeco(),l=eQ(o,a,e.changes);return i=Dr.extendWithRanges(i,l),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,i);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=_e.chrome||_e.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||r.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof Oo&&o.widget instanceof m2&&s.push(o.dom);r.updateGaps(s)}updateChildren(e,n,i){let r=i?i.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let o=r.length-1;;o--){let a=o>=0?r[o]:null;if(!a)break;let{fromA:l,toA:c,fromB:u,toB:d}=a,f,p,m,g;if(i&&i.range.fromB<d&&i.range.toB>u){let k=fh.build(this.view.state.doc,u,i.range.fromB,this.decorations,this.dynamicDecorationMap),_=fh.build(this.view.state.doc,i.range.toB,d,this.decorations,this.dynamicDecorationMap);p=k.breakAtStart,m=k.openStart,g=_.openEnd;let E=this.compositionView(i);_.breakAtStart?E.breakAfter=1:_.content.length&&E.merge(E.length,E.length,_.content[0],!1,_.openStart,0)&&(E.breakAfter=_.content[0].breakAfter,_.content.shift()),k.content.length&&E.merge(0,0,k.content[k.content.length-1],!0,0,k.openEnd)&&k.content.pop(),f=k.content.concat(E).concat(_.content)}else({content:f,breakAtStart:p,openStart:m,openEnd:g}=fh.build(this.view.state.doc,u,d,this.decorations,this.dynamicDecorationMap));let{i:y,off:v}=s.findPos(c,1),{i:b,off:w}=s.findPos(l,-1);bj(this,b,w,y,v,f,p,m,g)}i&&this.fixCompositionDOM(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let i of n.effects)i.is(zj)&&(this.editContextFormatting=i.value)}compositionView(e){let n=new fs(e.text.nodeValue);n.flags|=8;for(let{deco:r}of e.marks)n=new Uo(r,[n],n.length);let i=new fn;return i.append(n,0),i}fixCompositionDOM(e){let n=(s,o)=>{o.flags|=8|(o.children.some(l=>l.flags&7)?1:0),this.markedForComposition.add(o);let a=Nt.get(s);a&&a!=o&&(a.dom=null),o.setDOM(s)},i=this.childPos(e.range.fromB,1),r=this.children[i.i];n(e.line,r);for(let s=e.marks.length-1;s>=-1;s--)i=r.childPos(i.off,1),r=r.children[i.i],n(s>=0?e.marks[s].node:e.text,r)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,r=i==this.dom,s=!r&&!(this.view.state.facet(Po)||this.dom.tabIndex>-1)&&i0(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(r||n||s))return;let o=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(a.anchor)),c=a.empty?l:this.moveToLine(this.domAtPos(a.head));if(_e.gecko&&a.empty&&!this.hasComposition&&XZ(l)){let d=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(d,l.node.childNodes[l.offset]||null)),l=c=new ni(d,0),o=!0}let u=this.view.observer.selectionRange;(o||!u.focusNode||(!dh(l.node,l.offset,u.anchorNode,u.anchorOffset)||!dh(c.node,c.offset,u.focusNode,u.focusOffset))&&!this.suppressWidgetCursorChange(u,a))&&(this.view.observer.ignore(()=>{_e.android&&_e.chrome&&this.dom.contains(u.focusNode)&&tQ(u.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let d=ip(this.view.root);if(d)if(a.empty){if(_e.gecko){let f=ZZ(l.node,l.offset);if(f&&f!=3){let p=(f==1?gj:vj)(l.node,l.offset);p&&(l=new ni(p.node,p.offset))}}d.collapse(l.node,l.offset),a.bidiLevel!=null&&d.caretBidiLevel!==void 0&&(d.caretBidiLevel=a.bidiLevel)}else if(d.extend){d.collapse(l.node,l.offset);try{d.extend(c.node,c.offset)}catch{}}else{let f=document.createRange();a.anchor>a.head&&([l,c]=[c,l]),f.setEnd(c.node,c.offset),f.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(f)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(l,c)),this.impreciseAnchor=l.precise?null:new ni(u.anchorNode,u.anchorOffset),this.impreciseHead=c.precise?null:new ni(u.focusNode,u.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&dh(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,i=ip(e.root),{anchorNode:r,anchorOffset:s}=e.observer.selectionRange;if(!i||!n.empty||!n.assoc||!i.modify)return;let o=fn.find(this,n.head);if(!o)return;let a=o.posAtStart;if(n.head==a||n.head==a+o.length)return;let l=this.coordsAt(n.head,-1),c=this.coordsAt(n.head,1);if(!l||!c||l.bottom>c.top)return;let u=this.domAtPos(n.head+n.assoc);i.collapse(u.node,u.offset),i.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let d=e.observer.selectionRange;e.docView.posFromDOM(d.anchorNode,d.anchorOffset)!=n.from&&i.collapse(r,s)}moveToLine(e){let n=this.dom,i;if(e.node!=n)return e;for(let r=e.offset;!i&&r<n.childNodes.length;r++){let s=Nt.get(n.childNodes[r]);s instanceof fn&&(i=s.domAtPos(0))}for(let r=e.offset-1;!i&&r>=0;r--){let s=Nt.get(n.childNodes[r]);s instanceof fn&&(i=s.domAtPos(s.length))}return i?new ni(i.node,i.offset,!0):e}nearest(e){for(let n=e;n;){let i=Nt.get(n);if(i&&i.rootView==this)return i;n=n.parentNode}return null}posFromDOM(e,n){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,n)+i.posAtStart}domAtPos(e){let{i:n,off:i}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let r=this.children[n];if(i<r.length||r instanceof fn)break;n++,i=0}return this.children[n].domAtPos(i)}coordsAt(e,n){let i=null,r=0;for(let s=this.length,o=this.children.length-1;o>=0;o--){let a=this.children[o],l=s-a.breakAfter,c=l-a.length;if(l<e)break;if(c<=e&&(c<e||a.covers(-1))&&(l>e||a.covers(1))&&(!i||a instanceof fn&&!(i instanceof fn&&n>=0)))i=a,r=c;else if(i&&c==e&&l==e&&a instanceof Oo&&Math.abs(n)<2){if(a.deco.startSide<0)break;o&&(i=null)}s=c}return i?i.coordsAt(e-r,n):null}coordsForChar(e){let{i:n,off:i}=this.childPos(e,1),r=this.children[n];if(!(r instanceof fn))return null;for(;r.children.length;){let{i:a,off:l}=r.childPos(i,1);for(;;a++){if(a==r.children.length)return null;if((r=r.children[a]).length)break}i=l}if(!(r instanceof fs))return null;let s=Vn(r.text,i);if(s==i)return null;let o=Nc(r.dom,i,s).getClientRects();for(let a=0;a<o.length;a++){let l=o[a];if(a==o.length-1||l.top<l.bottom&&l.left<l.right)return l}return null}measureVisibleLineHeights(e){let n=[],{from:i,to:r}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==Ft.LTR;for(let c=0,u=0;u<this.children.length;u++){let d=this.children[u],f=c+d.length;if(f>r)break;if(c>=i){let p=d.dom.getBoundingClientRect();if(n.push(p.height),o){let m=d.dom.lastChild,g=m?rp(m):[];if(g.length){let y=g[g.length-1],v=l?y.right-p.left:p.right-y.left;v>a&&(a=v,this.minWidth=s,this.minWidthFrom=c,this.minWidthTo=f)}}}c=f+d.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?Ft.RTL:Ft.LTR}measureTextSize(){for(let s of this.children)if(s instanceof fn){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),n,i,r;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=rp(e.firstChild)[0];n=e.getBoundingClientRect().height,i=s?s.width/27:7,r=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:i,textHeight:r}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new yj(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let i=0,r=0;;r++){let s=r==n.viewports.length?null:n.viewports[r],o=s?s.from-1:this.length;if(o>i){let a=(n.lineBlockAt(o).bottom-n.lineBlockAt(i).top)/this.view.scaleY;e.push(Qe.replace({widget:new m2(a),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!s)break;i=s.to+1}return Qe.set(e)}updateDeco(){let e=1,n=this.view.state.facet(sp).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),i=!1,r=this.view.state.facet(Vj).map((s,o)=>{let a=typeof s=="function";return a&&(i=!0),a?s(this.view):s});for(r.length&&(this.dynamicDecorationMap[e++]=i,n.push(bt.join(r))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let c=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=c.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let c of this.view.state.facet(Bj))try{if(c(this.view,e.range,e))return!0}catch(u){sr(this.view.state,u,"scroll handler")}let{range:n}=e,i=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),r;if(!i)return;!n.empty&&(r=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(i={left:Math.min(i.left,r.left),top:Math.min(i.top,r.top),right:Math.max(i.right,r.right),bottom:Math.max(i.bottom,r.bottom)});let s=fC(this.view),o={left:i.left-s.left,top:i.top-s.top,right:i.right+s.right,bottom:i.bottom+s.bottom},{offsetWidth:a,offsetHeight:l}=this.view.scrollDOM;NZ(this.view.scrollDOM,o,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==Ft.LTR)}}function XZ(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function Gj(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let i=gj(n.focusNode,n.focusOffset),r=vj(n.focusNode,n.focusOffset),s=i||r;if(r&&i&&r.node!=i.node){let a=Nt.get(r.node);if(!a||a instanceof fs&&a.text!=r.node.nodeValue)s=r;else if(t.docView.lastCompositionAfterCursor){let l=Nt.get(i.node);!l||l instanceof fs&&l.text!=i.node.nodeValue||(s=r)}}if(t.docView.lastCompositionAfterCursor=s!=i,!s)return null;let o=e-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}function JZ(t,e,n){let i=Gj(t,n);if(!i)return null;let{node:r,from:s,to:o}=i,a=r.nodeValue;if(/[\n\r]/.test(a)||t.state.doc.sliceString(i.from,i.to)!=a)return null;let l=e.invertedDesc,c=new Dr(l.mapPos(s),l.mapPos(o),s,o),u=[];for(let d=r.parentNode;;d=d.parentNode){let f=Nt.get(d);if(f instanceof Uo)u.push({node:d,deco:f.mark});else{if(f instanceof fn||d.nodeName=="DIV"&&d.parentNode==t.contentDOM)return{range:c,text:r,marks:u,line:d};if(d!=t.contentDOM)u.push({node:d,deco:new zp({inclusive:!0,attributes:$Z(d),tagName:d.tagName.toLowerCase()})});else return null}}}function ZZ(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let QZ=class{constructor(){this.changes=[]}compareRange(e,n){r0(e,n,this.changes)}comparePoint(e,n){r0(e,n,this.changes)}boundChange(e){r0(e,e,this.changes)}};function eQ(t,e,n){let i=new QZ;return bt.compare(t,e,n,i),i.changes}function tQ(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function nQ(t,e){let n=!1;return e&&t.iterChangedRanges((i,r)=>{i<e.to&&r>e.from&&(n=!0)}),n}function iQ(t,e,n=1){let i=t.charCategorizer(e),r=t.doc.lineAt(e),s=e-r.from;if(r.length==0)return re.cursor(e);s==0?n=1:s==r.length&&(n=-1);let o=s,a=s;n<0?o=Vn(r.text,s,!1):a=Vn(r.text,s);let l=i(r.text.slice(o,a));for(;o>0;){let c=Vn(r.text,o,!1);if(i(r.text.slice(c,o))!=l)break;o=c}for(;a<r.length;){let c=Vn(r.text,a);if(i(r.text.slice(a,c))!=l)break;a=c}return re.range(o+r.from,a+r.from)}function rQ(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function sQ(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function Xw(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function G3(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function K3(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function w2(t,e,n){let i,r,s,o,a=!1,l,c,u,d;for(let m=t.firstChild;m;m=m.nextSibling){let g=rp(m);for(let y=0;y<g.length;y++){let v=g[y];r&&Xw(r,v)&&(v=G3(K3(v,r.bottom),r.top));let b=rQ(e,v),w=sQ(n,v);if(b==0&&w==0)return m.nodeType==3?q3(m,e,n):w2(m,e,n);(!i||o>w||o==w&&s>b)&&(i=m,r=v,s=b,o=w,a=b?e<v.left?y>0:y<g.length-1:!0),b==0?n>v.bottom&&(!u||u.bottom<v.bottom)?(l=m,u=v):n<v.top&&(!d||d.top>v.top)&&(c=m,d=v):u&&Xw(u,v)?u=K3(u,v.bottom):d&&Xw(d,v)&&(d=G3(d,v.top))}}if(u&&u.bottom>=n?(i=l,r=u):d&&d.top<=n&&(i=c,r=d),!i)return{node:t,offset:0};let f=Math.max(r.left,Math.min(r.right,e));if(i.nodeType==3)return q3(i,f,n);if(a&&i.contentEditable!="false")return w2(i,f,n);let p=Array.prototype.indexOf.call(t.childNodes,i)+(e>=(r.left+r.right)/2?1:0);return{node:t,offset:p}}function q3(t,e,n){let i=t.nodeValue.length,r=-1,s=1e9,o=0;for(let a=0;a<i;a++){let l=Nc(t,a,a+1).getClientRects();for(let c=0;c<l.length;c++){let u=l[c];if(u.top==u.bottom)continue;o||(o=e-u.left);let d=(u.top>n?u.top-n:n-u.bottom)-1;if(u.left-1<=e&&u.right+1>=e&&d<s){let f=e>=(u.left+u.right)/2,p=f;if((_e.chrome||_e.gecko)&&Nc(t,a).getBoundingClientRect().left==u.right&&(p=!f),d<=0)return{node:t,offset:a+(p?1:0)};r=a+(p?1:0),s=d}}}return{node:t,offset:r>-1?r:o>0?t.nodeValue.length:0}}function Kj(t,e,n,i=-1){var r,s;let o=t.contentDOM.getBoundingClientRect(),a=o.top+t.viewState.paddingTop,l,{docHeight:c}=t.viewState,{x:u,y:d}=e,f=d-a;if(f<0)return 0;if(f>c)return t.state.doc.length;for(let k=t.viewState.heightOracle.textHeight/2,_=!1;l=t.elementAtHeight(f),l.type!=yi.Text;)for(;f=i>0?l.bottom+k:l.top-k,!(f>=0&&f<=c);){if(_)return n?null:0;_=!0,i=-i}d=a+f;let p=l.from;if(p<t.viewport.from)return t.viewport.from==0?0:n?null:Y3(t,o,l,u,d);if(p>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:Y3(t,o,l,u,d);let m=t.dom.ownerDocument,g=t.root.elementFromPoint?t.root:m,y=g.elementFromPoint(u,d);y&&!t.contentDOM.contains(y)&&(y=null),y||(u=Math.max(o.left+1,Math.min(o.right-1,u)),y=g.elementFromPoint(u,d),y&&!t.contentDOM.contains(y)&&(y=null));let v,b=-1;if(y&&((r=t.docView.nearest(y))===null||r===void 0?void 0:r.isEditable)!=!1){if(m.caretPositionFromPoint){let k=m.caretPositionFromPoint(u,d);k&&({offsetNode:v,offset:b}=k)}else if(m.caretRangeFromPoint){let k=m.caretRangeFromPoint(u,d);k&&({startContainer:v,startOffset:b}=k,(!t.contentDOM.contains(v)||_e.safari&&oQ(v,b,u)||_e.chrome&&aQ(v,b,u))&&(v=void 0))}v&&(b=Math.min(no(v),b))}if(!v||!t.docView.dom.contains(v)){let k=fn.find(t.docView,p);if(!k)return f>l.top+l.height/2?l.to:l.from;({node:v,offset:b}=w2(k.dom,u,d))}let w=t.docView.nearest(v);if(!w)return null;if(w.isWidget&&((s=w.dom)===null||s===void 0?void 0:s.nodeType)==1){let k=w.dom.getBoundingClientRect();return e.y<k.top||e.y<=k.bottom&&e.x<=(k.left+k.right)/2?w.posAtStart:w.posAtEnd}else return w.localPosFromDOM(v,b)+w.posAtStart}function Y3(t,e,n,i,r){let s=Math.round((i-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let a=t.viewState.heightOracle.textHeight,l=Math.floor((r-n.top-(t.defaultLineHeight-a)*.5)/a);s+=l*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(n.from,n.to);return n.from+SZ(o,s,t.state.tabSize)}function oQ(t,e,n){let i,r=t;if(t.nodeType!=3||e!=(i=t.nodeValue.length))return!1;for(;;){let s=r.nextSibling;if(s){if(s.nodeName=="BR")break;return!1}else{let o=r.parentNode;if(!o||o.nodeName=="DIV")break;r=o}}return Nc(t,i-1,i).getBoundingClientRect().right>n}function aQ(t,e,n){if(e!=0)return!1;for(let r=t;;){let s=r.parentNode;if(!s||s.nodeType!=1||s.firstChild!=r)return!1;if(s.classList.contains("cm-line"))break;r=s}let i=t.nodeType==1?t.getBoundingClientRect():Nc(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-i.left>5}function x2(t,e,n){let i=t.lineBlockAt(e);if(Array.isArray(i.type)){let r;for(let s of i.type){if(s.from>e)break;if(!(s.to<e)){if(s.from<e&&s.to>e)return s;(!r||s.type==yi.Text&&(r.type!=s.type||(n<0?s.from<e:s.to>e)))&&(r=s)}}return r||i}return i}function lQ(t,e,n,i){let r=x2(t,e.head,e.assoc||-1),s=!i||r.type!=yi.Text||!(t.lineWrapping||r.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(s){let o=t.dom.getBoundingClientRect(),a=t.textDirectionAt(r.from),l=t.posAtCoords({x:n==(a==Ft.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(l!=null)return re.cursor(l,n?-1:1)}return re.cursor(n?r.to:r.from,n?-1:1)}function X3(t,e,n,i){let r=t.state.doc.lineAt(e.head),s=t.bidiSpans(r),o=t.textDirectionAt(r.from);for(let a=e,l=null;;){let c=KZ(r,s,o,a,n),u=Tj;if(!c){if(r.number==(n?t.state.doc.lines:1))return a;u=`
`,r=t.state.doc.line(r.number+(n?1:-1)),s=t.bidiSpans(r),c=t.visualLineSide(r,!n)}if(l){if(!l(u))return a}else{if(!i)return c;l=i(u)}a=c}}function cQ(t,e,n){let i=t.state.charCategorizer(e),r=i(n);return s=>{let o=i(s);return r==Hn.Space&&(r=o),r==o}}function uQ(t,e,n,i){let r=e.head,s=n?1:-1;if(r==(n?t.state.doc.length:0))return re.cursor(r,e.assoc);let o=e.goalColumn,a,l=t.contentDOM.getBoundingClientRect(),c=t.coordsAtPos(r,e.assoc||-1),u=t.documentTop;if(c)o==null&&(o=c.left-l.left),a=s<0?c.top:c.bottom;else{let p=t.viewState.lineBlockAt(r);o==null&&(o=Math.min(l.right-l.left,t.defaultCharacterWidth*(r-p.from))),a=(s<0?p.top:p.bottom)+u}let d=l.left+o,f=i??t.viewState.heightOracle.textHeight>>1;for(let p=0;;p+=10){let m=a+(f+p)*s,g=Kj(t,{x:d,y:m},!1,s);if(m<l.top||m>l.bottom||(s<0?g<r:g>r)){let y=t.docView.coordsForChar(g),v=!y||m<y.top?-1:1;return re.cursor(g,v,void 0,o)}}}function s0(t,e,n){for(;;){let i=0;for(let r of t)r.between(e-1,e+1,(s,o,a)=>{if(e>s&&e<o){let l=i||n||(e-s<o-e?-1:1);e=l<0?s:o,i=l}});if(!i)return e}}function Jw(t,e,n){let i=s0(t.state.facet(dC).map(r=>r(t)),n.from,e.head>n.from?-1:1);return i==n.from?n:re.cursor(i,i<n.from?1:-1)}const Vf="￿";class dQ{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(ot.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Vf}readRange(e,n){if(!e)return this;let i=e.parentNode;for(let r=e;;){this.findPointBefore(i,r);let s=this.text.length;this.readNode(r);let o=r.nextSibling;if(o==n)break;let a=Nt.get(r),l=Nt.get(o);(a&&l?a.breakAfter:(a?a.breakAfter:wv(r))||wv(o)&&(r.nodeName!="BR"||r.cmIgnore)&&this.text.length>s)&&this.lineBreak(),r=o}return this.findPointBefore(i,n),this}readTextNode(e){let n=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,n.length));for(let i=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(a=r.exec(n))&&(s=a.index,o=a[0].length),this.append(n.slice(i,s<0?n.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);i=s+o}}readNode(e){if(e.cmIgnore)return;let n=Nt.get(e),i=n&&n.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let r=i.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==n&&(i.pos=this.text.length)}findPointInside(e,n){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(fQ(e,i.node,i.offset)?n:0))}}function fQ(t,e,n){for(;;){if(!e||n<no(e))return!1;if(e==t)return!0;n=Ac(e)+1,e=e.parentNode}}class J3{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class hQ{constructor(e,n,i,r){this.typeOver=r,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,i,0))){let a=s||o?[]:gQ(e),l=new dQ(a,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=vQ(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=s&&s.node==a.focusNode&&s.offset==a.focusOffset||!c2(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),c=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!c2(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),u=e.viewport;if((_e.ios||_e.chrome)&&e.state.selection.main.empty&&l!=c&&(u.from>0||u.to<e.state.doc.length)){let d=Math.min(l,c),f=Math.max(l,c),p=u.from-d,m=u.to-f;(p==0||p==1||d==0)&&(m==0||m==-1||f==e.state.doc.length)&&(l=0,c=e.state.doc.length)}this.newSel=re.single(c,l)}}}function qj(t,e){let n,{newSel:i}=e,r=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,l=r.from,c=null;(s===8||_e.android&&e.text.length<a-o)&&(l=r.to,c="end");let u=mQ(t.state.doc.sliceString(o,a,Vf),e.text,l-o,c);u&&(_e.chrome&&s==13&&u.toB==u.from+2&&e.text.slice(u.from,u.toB)==Vf+Vf&&u.toB--,n={from:o+u.from,to:o+u.toA,insert:ut.of(e.text.slice(u.from,u.toB).split(Vf))})}else i&&(!t.hasFocus&&t.state.facet(Po)||i.main.eq(r))&&(i=null);if(!n&&!i)return!1;if(!n&&e.typeOver&&!r.empty&&i&&i.main.empty?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,r.to)}:(_e.mac||_e.android)&&n&&n.from==n.to&&n.from==r.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(i&&n.insert.length==2&&(i=re.single(i.main.anchor-1,i.main.head-1)),n={from:n.from,to:n.to,insert:ut.of([n.insert.toString().replace("."," ")])}):n&&n.from>=r.from&&n.to<=r.to&&(n.from!=r.from||n.to!=r.to)&&r.to-r.from-(n.to-n.from)<=4?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,r.to))}:_e.chrome&&n&&n.from==n.to&&n.from==r.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(i&&(i=re.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:ut.of([" "])}),n)return hC(t,n,i,s);if(i&&!i.main.eq(r)){let o=!1,a="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),a=t.inputState.lastSelectionOrigin),t.dispatch({selection:i,scrollIntoView:o,userEvent:a}),!0}else return!1}function hC(t,e,n,i=-1){if(_e.ios&&t.inputState.flushIOSKey(e))return!0;let r=t.state.selection.main;if(_e.android&&(e.to==r.to&&(e.from==r.from||e.from==r.from-1&&t.state.sliceDoc(e.from,r.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&Uu(t.contentDOM,"Enter",13)||(e.from==r.from-1&&e.to==r.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>r.head)&&Uu(t.contentDOM,"Backspace",8)||e.from==r.from&&e.to==r.to+1&&e.insert.length==0&&Uu(t.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let o,a=()=>o||(o=pQ(t,e,n));return t.state.facet(Lj).some(l=>l(t,e.from,e.to,s,a))||t.dispatch(a()),!0}function pQ(t,e,n){let i,r=t.state,s=r.selection.main;if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let a=s.from<e.from?r.sliceDoc(s.from,e.from):"",l=s.to>e.to?r.sliceDoc(e.to,s.to):"";i=r.replaceSelection(t.state.toText(a+e.insert.sliceString(0,void 0,t.state.lineBreak)+l))}else{let a=r.changes(e),l=n&&n.main.to<=a.newLength?n.main:void 0;if(r.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let c=t.state.sliceDoc(e.from,e.to),u,d=n&&Gj(t,n.main.head);if(d){let m=e.insert.length-(e.to-e.from);u={from:d.from,to:d.to-m}}else u=t.state.doc.lineAt(s.head);let f=s.to-e.to,p=s.to-s.from;i=r.changeByRange(m=>{if(m.from==s.from&&m.to==s.to)return{changes:a,range:l||m.map(a)};let g=m.to-f,y=g-c.length;if(m.to-m.from!=p||t.state.sliceDoc(y,g)!=c||m.to>=u.from&&m.from<=u.to)return{range:m};let v=r.changes({from:y,to:g,insert:e.insert}),b=m.to-s.to;return{changes:v,range:l?re.range(Math.max(0,l.anchor+b),Math.max(0,l.head+b)):m.map(v)}})}else i={changes:a,selection:l&&r.selection.replaceRange(l)}}let o="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,o+=".compose",t.inputState.compositionFirstChange&&(o+=".start",t.inputState.compositionFirstChange=!1)),r.update(i,{userEvent:o,scrollIntoView:!0})}function mQ(t,e,n,i){let r=Math.min(t.length,e.length),s=0;for(;s<r&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==r&&t.length==e.length)return null;let o=t.length,a=e.length;for(;o>0&&a>0&&t.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(i=="end"){let l=Math.max(0,s-Math.min(o,a));n-=o+l-s}if(o<s&&t.length<e.length){let l=n<=s&&n>=o?s-n:0;s-=l,a=s+(a-o),o=s}else if(a<s){let l=n<=s&&n>=a?s-n:0;s-=l,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}function gQ(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new J3(n,i)),(r!=n||s!=i)&&e.push(new J3(r,s))),e}function vQ(t,e){if(t.length==0)return null;let n=t[0].pos,i=t.length==2?t[1].pos:n;return n>-1&&i>-1?re.single(n+e,i+e):null}class yQ{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,_e.safari&&e.contentDOM.addEventListener("input",()=>null),_e.gecko&&IQ(e.contentDOM.ownerDocument)}handleEvent(e){!EQ(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,n){let i=this.handlers[e];if(i){for(let r of i.observers)r(this.view,n);for(let r of i.handlers){if(n.defaultPrevented)break;if(r(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=bQ(e),i=this.handlers,r=this.view.contentDOM;for(let s in n)if(s!="scroll"){let o=!n[s].handlers.length,a=i[s];a&&o!=!a.handlers.length&&(r.removeEventListener(s,this.handleEvent),a=null),a||r.addEventListener(s,this.handleEvent,{passive:o})}for(let s in i)s!="scroll"&&!n[s]&&r.removeEventListener(s,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&Xj.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),_e.android&&_e.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return _e.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=Yj.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||wQ.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,Uu(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:_e.safari&&!_e.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function Z3(t,e){return(n,i)=>{try{return e.call(t,i,n)}catch(r){sr(n.state,r)}}}function bQ(t){let e=Object.create(null);function n(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of t){let r=i.spec,s=r&&r.plugin.domEventHandlers,o=r&&r.plugin.domEventObservers;if(s)for(let a in s){let l=s[a];l&&n(a).handlers.push(Z3(i.value,l))}if(o)for(let a in o){let l=o[a];l&&n(a).observers.push(Z3(i.value,l))}}for(let i in hs)n(i).handlers.push(hs[i]);for(let i in zr)n(i).observers.push(zr[i]);return e}const Yj=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],wQ="dthko",Xj=[16,17,18,20,91,92,224,225],Hm=6;function Wm(t){return Math.max(0,t)*.7+8}function xQ(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class SQ{constructor(e,n,i,r){this.view=e,this.startEvent=n,this.style=i,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=PZ(e.contentDOM),this.atoms=e.state.facet(dC).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(ot.allowMultipleSelections)&&kQ(e,n),this.dragging=CQ(e,n)&&Qj(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&xQ(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,i=0,r=0,s=0,o=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:r,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:a}=this.scrollParents.y.getBoundingClientRect());let l=fC(this.view);e.clientX-l.left<=r+Hm?n=-Wm(r-e.clientX):e.clientX+l.right>=o-Hm&&(n=Wm(e.clientX-o)),e.clientY-l.top<=s+Hm?i=-Wm(s-e.clientY):e.clientY+l.bottom>=a-Hm&&(i=Wm(e.clientY-a)),this.setScrollSpeed(n,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let n=null;for(let i=0;i<e.ranges.length;i++){let r=e.ranges[i],s=null;if(r.empty){let o=s0(this.atoms,r.from,0);o!=r.from&&(s=re.cursor(o,-1))}else{let o=s0(this.atoms,r.from,-1),a=s0(this.atoms,r.to,1);(o!=r.from||a!=r.to)&&(s=re.range(r.from==r.anchor?o:a,r.from==r.head?o:a))}s&&(n||(n=e.ranges.slice()),n[i]=s)}return n?re.create(n,e.mainIndex):e}select(e){let{view:n}=this,i=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function kQ(t,e){let n=t.state.facet(Rj);return n.length?n[0](e):_e.mac?e.metaKey:e.ctrlKey}function _Q(t,e){let n=t.state.facet(Oj);return n.length?n[0](e):_e.mac?!e.altKey:!e.ctrlKey}function CQ(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let i=ip(t.root);if(!i||i.rangeCount==0)return!0;let r=i.getRangeAt(0).getClientRects();for(let s=0;s<r.length;s++){let o=r[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function EQ(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,i;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(i=Nt.get(n))&&i.ignoreEvent(e))return!1;return!0}const hs=Object.create(null),zr=Object.create(null),Jj=_e.ie&&_e.ie_version<15||_e.ios&&_e.webkit_version<604;function AQ(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),Zj(t,n.value)},50)}function Ky(t,e,n){for(let i of t.facet(e))n=i(n,t);return n}function Zj(t,e){e=Ky(t.state,lC,e);let{state:n}=t,i,r=1,s=n.toText(e),o=s.lines==n.selection.ranges.length;if(S2!=null&&n.selection.ranges.every(l=>l.empty)&&S2==s.toString()){let l=-1;i=n.changeByRange(c=>{let u=n.doc.lineAt(c.from);if(u.from==l)return{range:c};l=u.from;let d=n.toText((o?s.line(r++).text:e)+n.lineBreak);return{changes:{from:u.from,insert:d},range:re.cursor(c.from+d.length)}})}else o?i=n.changeByRange(l=>{let c=s.line(r++);return{changes:{from:l.from,to:l.to,insert:c.text},range:re.cursor(l.from+c.length)}}):i=n.replaceSelection(s);t.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}zr.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};hs.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);zr.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};zr.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};hs.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let i of t.state.facet(Ij))if(n=i(t,e),n)break;if(!n&&e.button==0&&(n=MQ(t,e)),n){let i=!t.hasFocus;t.inputState.startMouseSelection(new SQ(t,e,n,i)),i&&t.observer.ignore(()=>{hj(t.contentDOM);let s=t.root.activeElement;s&&!s.contains(t.contentDOM)&&s.blur()});let r=t.inputState.mouseSelection;if(r)return r.start(e),r.dragging===!1}return!1};function Q3(t,e,n,i){if(i==1)return re.cursor(e,n);if(i==2)return iQ(t.state,e,n);{let r=fn.find(t.docView,e),s=t.state.doc.lineAt(r?r.posAtEnd:e),o=r?r.posAtStart:s.from,a=r?r.posAtEnd:s.to;return a<t.state.doc.length&&a==s.to&&a++,re.range(o,a)}}let e4=(t,e,n)=>e>=n.top&&e<=n.bottom&&t>=n.left&&t<=n.right;function NQ(t,e,n,i){let r=fn.find(t.docView,e);if(!r)return 1;let s=e-r.posAtStart;if(s==0)return 1;if(s==r.length)return-1;let o=r.coordsAt(s,-1);if(o&&e4(n,i,o))return-1;let a=r.coordsAt(s,1);return a&&e4(n,i,a)?1:o&&o.bottom>=i?-1:1}function t4(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:NQ(t,n,e.clientX,e.clientY)}}const PQ=_e.ie&&_e.ie_version<=11;let n4=null,i4=0,r4=0;function Qj(t){if(!PQ)return t.detail;let e=n4,n=r4;return n4=t,r4=Date.now(),i4=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(i4+1)%3:1}function MQ(t,e){let n=t4(t,e),i=Qj(e),r=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),r=r.map(s.changes))},get(s,o,a){let l=t4(t,s),c,u=Q3(t,l.pos,l.bias,i);if(n.pos!=l.pos&&!o){let d=Q3(t,n.pos,n.bias,i),f=Math.min(d.from,u.from),p=Math.max(d.to,u.to);u=f<u.from?re.range(f,p):re.range(p,f)}return o?r.replaceRange(r.main.extend(u.from,u.to)):a&&i==1&&r.ranges.length>1&&(c=TQ(r,l.pos))?c:a?r.addRange(u):re.create([u])}}}function TQ(t,e){for(let n=0;n<t.ranges.length;n++){let{from:i,to:r}=t.ranges[n];if(i<=e&&r>=e)return re.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}hs.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let r=t.docView.nearest(e.target);if(r&&r.isWidget){let s=r.posAtStart,o=s+r.length;(s>=n.to||o<=n.from)&&(n=re.range(s,o))}}let{inputState:i}=t;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",Ky(t.state,cC,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};hs.dragend=t=>(t.inputState.draggedContent=null,!1);function s4(t,e,n,i){if(n=Ky(t.state,lC,n),!n)return;let r=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=t.inputState,o=i&&s&&_Q(t,e)?{from:s.from,to:s.to}:null,a={from:r,insert:n},l=t.state.changes(o?[o,a]:a);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(r,-1),head:l.mapPos(r,1)},userEvent:o?"move.drop":"input.drop"}),t.inputState.draggedContent=null}hs.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let i=Array(n.length),r=0,s=()=>{++r==n.length&&s4(t,e,i.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<n.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(i[o]=a.result),s()},a.readAsText(n[o])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return s4(t,e,i,!0),!0}return!1};hs.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=Jj?null:e.clipboardData;return n?(Zj(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(AQ(t),!1)};function RQ(t,e){let n=t.dom.parentNode;if(!n)return;let i=n.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),t.focus()},50)}function OQ(t){let e=[],n=[],i=!1;for(let r of t.selection.ranges)r.empty||(e.push(t.sliceDoc(r.from,r.to)),n.push(r));if(!e.length){let r=-1;for(let{from:s}of t.selection.ranges){let o=t.doc.lineAt(s);o.number>r&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),r=o.number}i=!0}return{text:Ky(t,cC,e.join(t.lineBreak)),ranges:n,linewise:i}}let S2=null;hs.copy=hs.cut=(t,e)=>{let{text:n,ranges:i,linewise:r}=OQ(t.state);if(!n&&!r)return!1;S2=r?n:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let s=Jj?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",n),!0):(RQ(t,n),!1)};const e8=Yo.define();function t8(t,e){let n=[];for(let i of t.facet(jj)){let r=i(t,e);r&&n.push(r)}return n.length?t.update({effects:n,annotations:e8.of(!0)}):null}function n8(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=t8(t.state,e);n?t.dispatch(n):t.update([])}},10)}zr.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),n8(t)};zr.blur=t=>{t.observer.clearSelectionRange(),n8(t)};zr.compositionstart=zr.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};zr.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,_e.chrome&&_e.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};zr.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};hs.beforeinput=(t,e)=>{var n,i;if(e.inputType=="insertReplacementText"&&t.observer.editContext){let s=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),o=e.getTargetRanges();if(s&&o.length){let a=o[0],l=t.posAtDOM(a.startContainer,a.startOffset),c=t.posAtDOM(a.endContainer,a.endOffset);return hC(t,{from:l,to:c,insert:t.state.toText(s)},null),!0}}let r;if(_e.chrome&&_e.android&&(r=Yj.find(s=>s.inputType==e.inputType))&&(t.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let s=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>s+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return _e.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),_e.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>zr.compositionend(t,e),20),!1};const o4=new Set;function IQ(t){o4.has(t)||(o4.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const a4=["pre-wrap","normal","pre-line","break-spaces"];let Ad=!1;function l4(){Ad=!1}class DQ{constructor(e){this.lineWrapping=e,this.doc=ut.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let i=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((n-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return a4.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let i=0;i<e.length;i++){let r=e[i];r<0?i++:this.heightSamples[Math.floor(r*10)]||(n=!0,this.heightSamples[Math.floor(r*10)]=!0)}return n}refresh(e,n,i,r,s,o){let a=a4.indexOf(e)>-1,l=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=n,this.charWidth=i,this.textHeight=r,this.lineLength=s,l){this.heightSamples={};for(let c=0;c<o.length;c++){let u=o[c];u<0?c++:this.heightSamples[Math.floor(u*10)]=!0}}return l}}class LQ{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class $s{constructor(e,n,i,r,s){this.from=e,this.length=n,this.top=i,this.height=r,this._content=s}get type(){return typeof this._content=="number"?yi.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof cl?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new $s(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var It=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(It||(It={}));const o0=.001;class bi{constructor(e,n,i=2){this.length=e,this.height=n,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>o0&&(Ad=!0),this.height=e)}replace(e,n,i){return bi.of(i)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,i,r){let s=this,o=i.doc;for(let a=r.length-1;a>=0;a--){let{fromA:l,toA:c,fromB:u,toB:d}=r[a],f=s.lineAt(l,It.ByPosNoHeight,i.setDoc(n),0,0),p=f.to>=c?f:s.lineAt(c,It.ByPosNoHeight,i,0,0);for(d+=p.to-c,c=p.to;a>0&&f.from<=r[a-1].toA;)l=r[a-1].fromA,u=r[a-1].fromB,a--,l<f.from&&(f=s.lineAt(l,It.ByPosNoHeight,i,0,0));u+=f.from-l,l=f.from;let m=pC.build(i.setDoc(o),e,u,d);s=kv(s,s.replace(l,c,m))}return s.updateHeight(i,0)}static empty(){return new Zi(0,0)}static of(e){if(e.length==1)return e[0];let n=0,i=e.length,r=0,s=0;for(;;)if(n==i)if(r>s*2){let a=e[n-1];a.break?e.splice(--n,1,a.left,null,a.right):e.splice(--n,1,a.left,a.right),i+=1+a.break,r-=a.size}else if(s>r*2){let a=e[i];a.break?e.splice(i,1,a.left,null,a.right):e.splice(i,1,a.left,a.right),i+=2+a.break,s-=a.size}else break;else if(r<s){let a=e[n++];a&&(r+=a.size)}else{let a=e[--i];a&&(s+=a.size)}let o=0;return e[n-1]==null?(o=1,n--):e[n]==null&&(o=1,i++),new jQ(bi.of(e.slice(0,n)),o,bi.of(e.slice(i)))}}function kv(t,e){return t==e?t:(t.constructor!=e.constructor&&(Ad=!0),e)}bi.prototype.size=1;class i8 extends bi{constructor(e,n,i){super(e,n),this.deco=i}blockAt(e,n,i,r){return new $s(r,this.length,i,this.height,this.deco||0)}lineAt(e,n,i,r,s){return this.blockAt(0,i,r,s)}forEachLine(e,n,i,r,s,o){e<=s+this.length&&n>=s&&o(this.blockAt(0,i,r,s))}updateHeight(e,n=0,i=!1,r){return r&&r.from<=n&&r.more&&this.setHeight(r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Zi extends i8{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,i,r){return new $s(r,this.length,i,this.height,this.breaks)}replace(e,n,i){let r=i[0];return i.length==1&&(r instanceof Zi||r instanceof Ln&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof Ln?r=new Zi(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):bi.of(i)}updateHeight(e,n=0,i=!1,r){return r&&r.from<=n&&r.more?this.setHeight(r.heights[r.index++]):(i||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Ln extends bi{constructor(e){super(e,0)}heightMetrics(e,n){let i=e.doc.lineAt(n).number,r=e.doc.lineAt(n+this.length).number,s=r-i+1,o,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*s);o=l/s,this.length>s+1&&(a=(this.height-l)/(this.length-s-1))}else o=this.height/s;return{firstLine:i,lastLine:r,perLine:o,perChar:a}}blockAt(e,n,i,r){let{firstLine:s,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(n,r);if(n.lineWrapping){let c=r+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),u=n.doc.lineAt(c),d=a+u.length*l,f=Math.max(i,e-d/2);return new $s(u.from,u.length,f,d,0)}else{let c=Math.max(0,Math.min(o-s,Math.floor((e-i)/a))),{from:u,length:d}=n.doc.line(s+c);return new $s(u,d,i+a*c,a,0)}}lineAt(e,n,i,r,s){if(n==It.ByHeight)return this.blockAt(e,i,r,s);if(n==It.ByPosNoHeight){let{from:p,to:m}=i.doc.lineAt(e);return new $s(p,m-p,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(i,s),c=i.doc.lineAt(e),u=a+c.length*l,d=c.number-o,f=r+a*d+l*(c.from-s-d);return new $s(c.from,c.length,Math.max(r,Math.min(f,r+this.height-u)),u,0)}forEachLine(e,n,i,r,s,o){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:a,perLine:l,perChar:c}=this.heightMetrics(i,s);for(let u=e,d=r;u<=n;){let f=i.doc.lineAt(u);if(u==e){let m=f.number-a;d+=l*m+c*(e-s-m)}let p=l+c*f.length;o(new $s(f.from,f.length,d,p,0)),d+=p,u=f.to+1}}replace(e,n,i){let r=this.length-n;if(r>0){let s=i[i.length-1];s instanceof Ln?i[i.length-1]=new Ln(s.length+r):i.push(null,new Ln(r-1))}if(e>0){let s=i[0];s instanceof Ln?i[0]=new Ln(e+s.length):i.unshift(new Ln(e-1),null)}return bi.of(i)}decomposeLeft(e,n){n.push(new Ln(e-1),null)}decomposeRight(e,n){n.push(null,new Ln(this.length-e-1))}updateHeight(e,n=0,i=!1,r){let s=n+this.length;if(r&&r.from<=n+this.length&&r.more){let o=[],a=Math.max(n,r.from),l=-1;for(r.from>n&&o.push(new Ln(r.from-n-1).updateHeight(e,n));a<=s&&r.more;){let u=e.doc.lineAt(a).length;o.length&&o.push(null);let d=r.heights[r.index++];l==-1?l=d:Math.abs(d-l)>=o0&&(l=-2);let f=new Zi(u,d);f.outdated=!1,o.push(f),a+=u+1}a<=s&&o.push(null,new Ln(s-a).updateHeight(e,a));let c=bi.of(o);return(l<0||Math.abs(c.height-this.height)>=o0||Math.abs(l-this.heightMetrics(e,n).perLine)>=o0)&&(Ad=!0),kv(this,c)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class jQ extends bi{constructor(e,n,i){super(e.length+n+i.length,e.height+i.height,n|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,n,i,r){let s=i+this.left.height;return e<s?this.left.blockAt(e,n,i,r):this.right.blockAt(e,n,s,r+this.left.length+this.break)}lineAt(e,n,i,r,s){let o=r+this.left.height,a=s+this.left.length+this.break,l=n==It.ByHeight?e<o:e<a,c=l?this.left.lineAt(e,n,i,r,s):this.right.lineAt(e,n,i,o,a);if(this.break||(l?c.to<a:c.from>a))return c;let u=n==It.ByPosNoHeight?It.ByPosNoHeight:It.ByPos;return l?c.join(this.right.lineAt(a,u,i,o,a)):this.left.lineAt(a,u,i,r,s).join(c)}forEachLine(e,n,i,r,s,o){let a=r+this.left.height,l=s+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,n,i,r,s,o),n>=l&&this.right.forEachLine(e,n,i,a,l,o);else{let c=this.lineAt(l,It.ByPos,i,r,s);e<c.from&&this.left.forEachLine(e,c.from-1,i,r,s,o),c.to>=e&&c.from<=n&&o(c),n>c.to&&this.right.forEachLine(c.to+1,n,i,a,l,o)}}replace(e,n,i){let r=this.left.length+this.break;if(n<r)return this.balanced(this.left.replace(e,n,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,n-r,i));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let a of i)s.push(a);if(e>0&&c4(s,o-1),n<this.length){let a=s.length;this.decomposeRight(n,s),c4(s,a)}return bi.of(s)}decomposeLeft(e,n){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(i++,e>=i&&n.push(null)),e>i&&this.right.decomposeLeft(e-i,n)}decomposeRight(e,n){let i=this.left.length,r=i+this.break;if(e>=r)return this.right.decomposeRight(e-r,n);e<i&&this.left.decomposeRight(e,n),this.break&&e<r&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?bi.of(this.break?[e,null,n]:[e,n]):(this.left=kv(this.left,e),this.right=kv(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,i=!1,r){let{left:s,right:o}=this,a=n+s.length+this.break,l=null;return r&&r.from<=n+s.length&&r.more?l=s=s.updateHeight(e,n,i,r):s.updateHeight(e,n,i),r&&r.from<=a+o.length&&r.more?l=o=o.updateHeight(e,a,i,r):o.updateHeight(e,a,i),l?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function c4(t,e){let n,i;t[e]==null&&(n=t[e-1])instanceof Ln&&(i=t[e+1])instanceof Ln&&t.splice(e-1,3,new Ln(n.length+1+i.length))}const $Q=5;class pC{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let i=Math.min(n,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof Zi?r.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new Zi(i-this.pos,-1)),this.writtenTo=i,n>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,i){if(e<n||i.heightRelevant){let r=i.widget?i.widget.estimatedHeight:0,s=i.widget?i.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let o=n-e;i.block?this.addBlock(new i8(o,r,i)):(o||s||r>=$Q)&&this.addLineDeco(r,s,o)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Zi(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let i=new Ln(n-e);return this.oracle.doc.lineAt(e).to==n&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Zi)return e;let n=new Zi(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,i){let r=this.ensureLine();r.length+=i,r.collapsed+=i,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=n,this.writtenTo=this.pos=this.pos+i}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof Zi)&&!this.isCovered?this.nodes.push(new Zi(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let r of this.nodes)r instanceof Zi&&r.updateHeight(this.oracle,i),i+=r?r.length:1;return this.nodes}static build(e,n,i,r){let s=new pC(i,e);return bt.spans(n,i,r,s,0),s.finish(i)}}function FQ(t,e,n){let i=new BQ;return bt.compare(t,e,n,i,0),i.changes}class BQ{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,i,r){(e<n||i&&i.heightRelevant||r&&r.heightRelevant)&&r0(e,n,this.changes,5)}}function zQ(t,e){let n=t.getBoundingClientRect(),i=t.ownerDocument,r=i.defaultView||window,s=Math.max(0,n.left),o=Math.min(r.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(r.innerHeight,n.bottom);for(let c=t.parentNode;c&&c!=i.body;)if(c.nodeType==1){let u=c,d=window.getComputedStyle(u);if((u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&d.overflow!="visible"){let f=u.getBoundingClientRect();s=Math.max(s,f.left),o=Math.min(o,f.right),a=Math.max(a,f.top),l=Math.min(c==t.parentNode?r.innerHeight:l,f.bottom)}c=d.position=="absolute"||d.position=="fixed"?u.offsetParent:u.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:s-n.left,right:Math.max(s,o)-n.left,top:a-(n.top+e),bottom:Math.max(a,l)-(n.top+e)}}function UQ(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}function VQ(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class Zw{constructor(e,n,i,r){this.from=e,this.to=n,this.size=i,this.displaySize=r}static same(e,n){if(e.length!=n.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],s=n[i];if(r.from!=s.from||r.to!=s.to||r.size!=s.size)return!1}return!0}draw(e,n){return Qe.replace({widget:new HQ(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class HQ extends Sl{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class u4{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=d4,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Ft.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(uC).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new DQ(n),this.stateDeco=e.facet(sp).filter(i=>typeof i!="function"),this.heightMap=bi.empty().applyChanges(this.stateDeco,ut.empty,this.heightOracle.setDoc(e.doc),[new Dr(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Qe.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let i=0;i<=1;i++){let r=i?n.head:n.anchor;if(!e.some(({from:s,to:o})=>r>=s&&r<=o)){let{from:s,to:o}=this.lineBlockAt(r);e.push(new Gm(s,o))}}return this.viewports=e.sort((i,r)=>i.from-r.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?d4:new mC(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Hf(e,this.scaler))})}update(e,n=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(sp).filter(u=>typeof u!="function");let r=e.changedRanges,s=Dr.extendWithRanges(r,FQ(i,this.stateDeco,e?e.changes:wn.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);l4(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=o||Ad)&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<l.from||n.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,n));let c=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,e.flags|=this.updateForViewport(),(c||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(Fj)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,i=window.getComputedStyle(n),r=this.heightOracle,s=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?Ft.RTL:Ft.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),a=n.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let c=0,u=0;if(a.width&&a.height){let{scaleX:k,scaleY:_}=fj(n,a);(k>.005&&Math.abs(this.scaleX-k)>.005||_>.005&&Math.abs(this.scaleY-_)>.005)&&(this.scaleX=k,this.scaleY=_,c|=16,o=l=!0)}let d=(parseInt(i.paddingTop)||0)*this.scaleY,f=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=d||this.paddingBottom!=f)&&(this.paddingTop=d,this.paddingBottom=f,c|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,c|=16);let p=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=p&&(this.scrollAnchorHeight=-1,this.scrollTop=p),this.scrolledToBottom=mj(e.scrollDOM);let m=(this.printing?VQ:zQ)(n,this.paddingTop),g=m.top-this.pixelViewport.top,y=m.bottom-this.pixelViewport.bottom;this.pixelViewport=m;let v=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(v!=this.inView&&(this.inView=v,v&&(l=!0)),!this.inView&&!this.scrollTarget&&!UQ(e.dom))return 0;let b=a.width;if((this.contentDOMWidth!=b||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,c|=16),l){let k=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(k)&&(o=!0),o||r.lineWrapping&&Math.abs(b-this.contentDOMWidth)>r.charWidth){let{lineHeight:_,charWidth:E,textHeight:C}=e.docView.measureTextSize();o=_>0&&r.refresh(s,_,E,C,b/E,k),o&&(e.docView.minWidth=0,c|=16)}g>0&&y>0?u=Math.max(g,y):g<0&&y<0&&(u=Math.min(g,y)),l4();for(let _ of this.viewports){let E=_.from==this.viewport.from?k:e.docView.measureVisibleLineHeights(_);this.heightMap=(o?bi.empty().applyChanges(this.stateDeco,ut.empty,this.heightOracle,[new Dr(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,o,new LQ(_.from,E))}Ad&&(c|=2)}let w=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return w&&(c&2&&(c|=this.updateScaler()),this.viewport=this.getViewport(u,this.scrollTarget),c|=this.updateForViewport()),(c&2||w)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new Gm(r.lineAt(o-i*1e3,It.ByHeight,s,0,0).from,r.lineAt(a+(1-i)*1e3,It.ByHeight,s,0,0).to);if(n){let{head:c}=n.range;if(c<l.from||c>l.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),d=r.lineAt(c,It.ByPos,s,0,0),f;n.y=="center"?f=(d.top+d.bottom)/2-u/2:n.y=="start"||n.y=="nearest"&&c<l.from?f=d.top:f=d.bottom-u,l=new Gm(r.lineAt(f-1e3/2,It.ByHeight,s,0,0).from,r.lineAt(f+u+1e3/2,It.ByHeight,s,0,0).to)}}return l}mapViewport(e,n){let i=n.mapPos(e.from,-1),r=n.mapPos(e.to,1);return new Gm(this.heightMap.lineAt(i,It.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,It.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},i=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,It.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,It.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||r<=o-Math.max(10,Math.min(-i,250)))&&(n==this.state.doc.length||s>=a+Math.max(10,Math.min(i,250)))&&r>o-2*1e3&&s<a+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let i=[];for(let r of e)n.touchesRange(r.from,r.to)||i.push(new Zw(n.mapPos(r.from),n.mapPos(r.to),r.size,r.displaySize));return i}ensureLineGaps(e,n){let i=this.heightOracle.lineWrapping,r=i?1e4:2e3,s=r>>1,o=r<<1;if(this.defaultTextDirection!=Ft.LTR&&!i)return[];let a=[],l=(u,d,f,p)=>{if(d-u<s)return;let m=this.state.selection.main,g=[m.from];m.empty||g.push(m.to);for(let v of g)if(v>u&&v<d){l(u,v-10,f,p),l(v+10,d,f,p);return}let y=GQ(e,v=>v.from>=f.from&&v.to<=f.to&&Math.abs(v.from-u)<s&&Math.abs(v.to-d)<s&&!g.some(b=>v.from<b&&v.to>b));if(!y){if(d<f.to&&n&&i&&n.visibleRanges.some(w=>w.from<=d&&w.to>=d)){let w=n.moveToLineBoundary(re.cursor(d),!1,!0).head;w>u&&(d=w)}let v=this.gapSize(f,u,d,p),b=i||v<2e6?v:2e6;y=new Zw(u,d,v,b)}a.push(y)},c=u=>{if(u.length<o||u.type!=yi.Text)return;let d=WQ(u.from,u.to,this.stateDeco);if(d.total<o)return;let f=this.scrollTarget?this.scrollTarget.range.head:null,p,m;if(i){let g=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,y,v;if(f!=null){let b=qm(d,f),w=((this.visibleBottom-this.visibleTop)/2+g)/u.height;y=b-w,v=b+w}else y=(this.visibleTop-u.top-g)/u.height,v=(this.visibleBottom-u.top+g)/u.height;p=Km(d,y),m=Km(d,v)}else{let g=d.total*this.heightOracle.charWidth,y=r*this.heightOracle.charWidth,v=0;if(g>2e6)for(let E of e)E.from>=u.from&&E.from<u.to&&E.size!=E.displaySize&&E.from*this.heightOracle.charWidth+v<this.pixelViewport.left&&(v=E.size-E.displaySize);let b=this.pixelViewport.left+v,w=this.pixelViewport.right+v,k,_;if(f!=null){let E=qm(d,f),C=((w-b)/2+y)/g;k=E-C,_=E+C}else k=(b-y)/g,_=(w+y)/g;p=Km(d,k),m=Km(d,_)}p>u.from&&l(u.from,p,u,d),m<u.to&&l(m,u.to,u,d)};for(let u of this.viewportLines)Array.isArray(u.type)?u.type.forEach(c):c(u);return a}gapSize(e,n,i,r){let s=qm(r,i)-qm(r,n);return this.heightOracle.lineWrapping?e.height*s:r.total*this.heightOracle.charWidth*s}updateLineGaps(e){Zw.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Qe.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let n=this.stateDeco;this.lineGaps.length&&(n=n.concat(this.lineGapDeco));let i=[];bt.spans(n,this.viewport.from,this.viewport.to,{span(s,o){i.push({from:s,to:o})},point(){}},20);let r=0;if(i.length!=this.visibleRanges.length)r=12;else for(let s=0;s<i.length&&!(r&8);s++){let o=this.visibleRanges[s],a=i[s];(o.from!=a.from||o.to!=a.to)&&(r|=4,e&&e.mapPos(o.from,-1)==a.from&&e.mapPos(o.to,1)==a.to||(r|=8))}return this.visibleRanges=i,r}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||Hf(this.heightMap.lineAt(e,It.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||Hf(this.heightMap.lineAt(this.scaler.fromDOM(e),It.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return Hf(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}let Gm=class{constructor(e,n){this.from=e,this.to=n}};function WQ(t,e,n){let i=[],r=t,s=0;return bt.spans(n,t,e,{span(){},point(o,a){o>r&&(i.push({from:r,to:o}),s+=o-r),r=a}},20),r<e&&(i.push({from:r,to:e}),s+=e-r),{total:s,ranges:i}}function Km({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let i=Math.floor(t*n);for(let r=0;;r++){let{from:s,to:o}=e[r],a=o-s;if(i<=a)return s+i;i-=a}}function qm(t,e){let n=0;for(let{from:i,to:r}of t.ranges){if(e<=r){n+=e-i;break}n+=r-i}return n/t.total}function GQ(t,e){for(let n of t)if(e(n))return n}const d4={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class mC{constructor(e,n,i){let r=0,s=0,o=0;this.viewports=i.map(({from:a,to:l})=>{let c=n.lineAt(a,It.ByPos,e,0,0).top,u=n.lineAt(l,It.ByPos,e,0,0).bottom;return r+=u-c,{from:a,to:l,top:c,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(n.height-r);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(e){for(let n=0,i=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return r+(e-i)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);i=s.bottom,r=s.domBottom}}fromDOM(e){for(let n=0,i=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return i+(e-r)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);i=s.bottom,r=s.domBottom}}eq(e){return e instanceof mC?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,i)=>n.from==e.viewports[i].from&&n.to==e.viewports[i].to):!1}}function Hf(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),i=e.toDOM(t.bottom);return new $s(t.from,t.length,n,i-n,Array.isArray(t._content)?t._content.map(r=>Hf(r,e)):t._content)}const Ym=Ee.define({combine:t=>t.join(" ")}),k2=Ee.define({combine:t=>t.indexOf(!0)>-1}),_2=al.newName(),r8=al.newName(),s8=al.newName(),o8={"&light":"."+r8,"&dark":"."+s8};function C2(t,e,n){return new al(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,r=>{if(r=="&")return t;if(!n||!n[r])throw new RangeError(`Unsupported selector: ${r}`);return n[r]}):t+" "+i}})}const KQ=C2("."+_2,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},o8),qQ={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Qw=_e.ie&&_e.ie_version<=11;class YQ{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new MZ,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let i of n)this.queue.push(i);(_e.ie&&_e.ie_version<=11||_e.ios&&e.composing)&&n.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&_e.android&&e.constructor.EDIT_CONTEXT!==!1&&!(_e.chrome&&_e.chrome_version<126)&&(this.editContext=new JQ(e),e.state.facet(Po)&&(e.contentDOM.editContext=this.editContext.editContext)),Qw&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,i)=>n!=e[i]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,r=this.selectionRange;if(i.state.facet(Po)?i.root.activeElement!=this.dom:!i0(this.dom,r))return;let s=r.anchorNode&&i.docView.nearest(r.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(_e.ie&&_e.ie_version<=11||_e.android&&_e.chrome)&&!i.state.selection.main.empty&&r.focusNode&&dh(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=ip(e.root);if(!n)return!1;let i=_e.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&XQ(this.view,n)||n;if(!i||this.selectionRange.eq(i))return!1;let r=i0(this.dom,i);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&RZ(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let i=this.dom;i;)if(i.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=n)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,qQ),Qw&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Qw&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var i;if(!this.delayedAndroidKey){let r=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&Uu(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,i=-1,r=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(r=!0),n==-1?{from:n,to:i}=o:(n=Math.min(o.from,n),i=Math.max(o.to,i)))}return{from:n,to:i,typeOver:r}}readChange(){let{from:e,to:n,typeOver:i}=this.processRecords(),r=this.selectionChanged&&i0(this.dom,this.selectionRange);if(e<0&&!r)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new hQ(this.view,e,n,i);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let i=this.view.state,r=qj(this.view,n);return this.view.state==i&&(n.domChanged||n.newSel&&!n.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),r}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let i=f4(n,e.previousSibling||e.target.previousSibling,-1),r=f4(n,e.nextSibling||e.target.nextSibling,1);return{from:i?n.posAfter(i):n.posAtStart,to:r?n.posBefore(r):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Po)!=e.state.facet(Po)&&(e.view.contentDOM.editContext=e.state.facet(Po)?this.editContext.editContext:null))}destroy(){var e,n,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function f4(t,e,n){for(;e;){let i=Nt.get(e);if(i&&i.parent==t)return i;let r=e.parentNode;e=r!=t.dom?r:n>0?e.nextSibling:e.previousSibling}return null}function h4(t,e){let n=e.startContainer,i=e.startOffset,r=e.endContainer,s=e.endOffset,o=t.docView.domAtPos(t.state.selection.main.anchor);return dh(o.node,o.offset,r,s)&&([n,i,r,s]=[r,s,n,i]),{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s}}function XQ(t,e){if(e.getComposedRanges){let r=e.getComposedRanges(t.root)[0];if(r)return h4(t,r)}let n=null;function i(r){r.preventDefault(),r.stopImmediatePropagation(),n=r.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",i,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",i,!0),n?h4(t,n):null}class JQ{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let r=e.state.selection.main,{anchor:s,head:o}=r,a=this.toEditorPos(i.updateRangeStart),l=this.toEditorPos(i.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:a,drifted:!1});let c={from:a,to:l,insert:ut.of(i.text.split(`
`))};if(c.from==this.from&&s<this.from?c.from=s:c.to==this.to&&s>this.to&&(c.to=s),c.from==c.to&&!c.insert.length){let u=re.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd));u.main.eq(r)||e.dispatch({selection:u,userEvent:"select"});return}if((_e.mac||_e.android)&&c.from==o-1&&/^\. ?$/.test(i.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(c={from:a,to:l,insert:ut.of([i.text.replace("."," ")])}),this.pendingContextChange=c,!e.state.readOnly){let u=this.to-this.from+(c.to-c.from+c.insert.length);hC(e,c,re.single(this.toEditorPos(i.selectionStart,u),this.toEditorPos(i.selectionEnd,u)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state))},this.handlers.characterboundsupdate=i=>{let r=[],s=null;for(let o=this.toEditorPos(i.rangeStart),a=this.toEditorPos(i.rangeEnd);o<a;o++){let l=e.coordsForChar(o);s=l&&new DOMRect(l.left,l.top,l.right-l.left,l.bottom-l.top)||s||new DOMRect,r.push(s)}n.updateCharacterBounds(i.rangeStart,r)},this.handlers.textformatupdate=i=>{let r=[];for(let s of i.getTextFormats()){let o=s.underlineStyle,a=s.underlineThickness;if(o!="None"&&a!="None"){let l=this.toEditorPos(s.rangeStart),c=this.toEditorPos(s.rangeEnd);if(l<c){let u=`text-decoration: underline ${o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${a=="Thin"?1:2}px`;r.push(Qe.mark({attributes:{style:u}}).range(l,c))}}}e.dispatch({effects:zj.of(Qe.set(r))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(e.state)}};for(let i in this.handlers)n.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let r=ip(i.root);r&&r.rangeCount&&this.editContext.updateSelectionBounds(r.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,i=!1,r=this.pendingContextChange;return e.changes.iterChanges((s,o,a,l,c)=>{if(i)return;let u=c.length-(o-s);if(r&&o>=r.to)if(r.from==s&&r.to==o&&r.insert.eq(c)){r=this.pendingContextChange=null,n+=u,this.to+=u;return}else r=null,this.revertPending(e.state);if(s+=n,o+=n,o<=this.from)this.from+=u,this.to+=u;else if(s<this.to){if(s<this.from||o>this.to||this.to-this.from+c.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(o),c.toString()),this.to+=u}n+=u}),r&&!i&&this.revertPending(e.state),!i}update(e){let n=this.pendingContextChange,i=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(i.from,i.to)&&e.transactions.some(r=>!r.isUserEvent("input.type")&&r.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),r=this.toContextPos(n.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=r)&&this.editContext.updateSelection(i,r)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e,n=this.to-this.from){e=Math.min(e,n);let i=this.composing;return i&&i.drifted?i.editorBase+(e-i.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Te{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(r=>r.forEach(s=>i(s,this)))||(r=>this.update(r)),this.dispatch=this.dispatch.bind(this),this._root=e.root||TZ(e.parent)||document,this.viewState=new u4(e.state||ot.create(e)),e.scrollTo&&e.scrollTo.is(Vm)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Nu).map(r=>new Yw(r));for(let r of this.plugins)r.update(this);this.observer=new YQ(this),this.inputState=new yQ(this),this.inputState.ensureHandlers(this.plugins),this.docView=new W3(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let n=e.length==1&&e[0]instanceof _n?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,i=!1,r,s=this.state;for(let f of e){if(f.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=f.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,a=0,l=null;e.some(f=>f.annotation(e8))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=t8(s,o),l||(a=1));let c=this.observer.delayedAndroidKey,u=null;if(c?(this.observer.clearDelayedAndroidKey(),u=this.observer.readChange(),(u&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(u=null)):this.observer.clear(),s.facet(ot.phrases)!=this.state.facet(ot.phrases))return this.setState(s);r=Sv.create(this,s,e),r.flags|=a;let d=this.viewState.scrollTarget;try{this.updateState=2;for(let f of e){if(d&&(d=d.map(f.changes)),f.scrollIntoView){let{main:p}=f.state.selection;d=new Vu(p.empty?p:re.cursor(p.head,p.head>p.anchor?-1:1))}for(let p of f.effects)p.is(Vm)&&(d=p.value.clip(this.state))}this.viewState.update(r,d),this.bidiCache=_v.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),n=this.docView.update(r),this.state.facet(Uf)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(f=>f.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(Ym)!=r.state.facet(Ym)&&(this.viewState.mustMeasureContent=!0),(n||i||d||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!r.empty)for(let f of this.state.facet(b2))try{f(r)}catch(p){sr(this.state,p,"update listener")}(l||u)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),u&&!qj(this,u)&&c.force&&Uu(this.contentDOM,c.key,c.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new u4(e),this.plugins=e.facet(Nu).map(i=>new Yw(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new W3(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(Nu),i=e.state.facet(Nu);if(n!=i){let r=[];for(let s of i){let o=n.indexOf(s);if(o<0)r.push(new Yw(s));else{let a=this.plugins[o];a.mustUpdate=e,r.push(a)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=r,this.pluginMap.clear()}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this);n!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(i){sr(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,i=this.scrollDOM,r=i.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(r-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(mj(i))s=-1,o=this.viewState.heightMap.height;else{let p=this.viewState.scrollAnchorAt(r);s=p.from,o=p.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let c=[];l&4||([this.measureRequests,c]=[c,this.measureRequests]);let u=c.map(p=>{try{return p.read(this)}catch(m){return sr(this.state,m),p4}}),d=Sv.create(this,this.state,[]),f=!1;d.flags|=l,n?n.flags|=l:n=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),f=this.docView.update(d),f&&this.docViewUpdate());for(let p=0;p<c.length;p++)if(u[p]!=p4)try{let m=c[p];m.write&&m.write(u[p],this)}catch(m){sr(this.state,m)}if(f&&this.docView.updateSelection(!0),!d.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let m=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(m>1||m<-1){r=r+m,i.scrollTop=r/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let a of this.state.facet(b2))a(n)}get themeClasses(){return _2+" "+(this.state.facet(k2)?s8:r8)+" "+this.state.facet(Ym)}updateAttrs(){let e=m4(this,Uj,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(Po)?"true":"false",class:"cm-content",style:`${_e.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),m4(this,uC,n);let i=this.observer.ignore(()=>{let r=p2(this.contentDOM,this.contentAttrs,n),s=p2(this.dom,this.editorAttrs,e);return r||s});return this.editorAttrs=e,this.contentAttrs=n,i}showAnnouncements(e){let n=!0;for(let i of e)for(let r of i.effects)if(r.is(Te.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(Uf);let e=this.state.facet(Te.cspNonce);al.mount(this.root,this.styleModules.concat(KQ).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.plugin!=e)&&this.pluginMap.set(e,n=this.plugins.find(i=>i.plugin==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,i){return Jw(this,e,X3(this,e,n,i))}moveByGroup(e,n){return Jw(this,e,X3(this,e,n,i=>cQ(this,e.head,i)))}visualLineSide(e,n){let i=this.bidiSpans(e),r=this.textDirectionAt(e.from),s=i[n?i.length-1:0];return re.cursor(s.side(n,r)+e.from,s.forward(!n,r)?1:-1)}moveToLineBoundary(e,n,i=!0){return lQ(this,e,n,i)}moveVertically(e,n,i){return Jw(this,e,uQ(this,e,n,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),Kj(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let i=this.docView.coordsAt(e,n);if(!i||i.left==i.right)return i;let r=this.state.doc.lineAt(e),s=this.bidiSpans(r),o=s[Pa.find(s,e-r.from,-1,n)];return Wy(i,o.dir==Ft.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet($j)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>ZQ)return Mj(e.length);let n=this.textDirectionAt(e.from),i;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==n&&(s.fresh||Pj(s.isolates,i=H3(this,e))))return s.order;i||(i=H3(this,e));let r=GZ(e.text,n,i);return this.bidiCache.push(new _v(e.from,e.to,n,i,!0,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||_e.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{hj(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return Vm.of(new Vu(typeof e=="number"?re.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return Vm.of(new Vu(re.cursor(i.from),"start","start",i.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return qn.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return qn.define(()=>({}),{eventObservers:e})}static theme(e,n){let i=al.newName(),r=[Ym.of(i),Uf.of(C2(`.${i}`,e))];return n&&n.dark&&r.push(k2.of(!0)),r}static baseTheme(e){return $p.lowest(Uf.of(C2("."+_2,e,o8)))}static findFromDOM(e){var n;let i=e.querySelector(".cm-content"),r=i&&Nt.get(i)||Nt.get(e);return((n=r==null?void 0:r.rootView)===null||n===void 0?void 0:n.view)||null}}Te.styleModule=Uf;Te.inputHandler=Lj;Te.clipboardInputFilter=lC;Te.clipboardOutputFilter=cC;Te.scrollHandler=Bj;Te.focusChangeEffect=jj;Te.perLineTextDirection=$j;Te.exceptionSink=Dj;Te.updateListener=b2;Te.editable=Po;Te.mouseSelectionStyle=Ij;Te.dragMovesSelection=Oj;Te.clickAddsSelectionRange=Rj;Te.decorations=sp;Te.outerDecorations=Vj;Te.atomicRanges=dC;Te.bidiIsolatedRanges=Hj;Te.scrollMargins=Wj;Te.darkTheme=k2;Te.cspNonce=Ee.define({combine:t=>t.length?t[0]:""});Te.contentAttributes=uC;Te.editorAttributes=Uj;Te.lineWrapping=Te.contentAttributes.of({class:"cm-lineWrapping"});Te.announce=Ze.define();const ZQ=4096,p4={};class _v{constructor(e,n,i,r,s,o){this.from=e,this.to=n,this.dir=i,this.isolates=r,this.fresh=s,this.order=o}static update(e,n){if(n.empty&&!e.some(s=>s.fresh))return e;let i=[],r=e.length?e[e.length-1].dir:Ft.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==r&&!n.touchesRange(o.from,o.to)&&i.push(new _v(n.mapPos(o.from,1),n.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return i}}function m4(t,e,n){for(let i=t.state.facet(e),r=i.length-1;r>=0;r--){let s=i[r],o=typeof s=="function"?s(t):s;o&&h2(o,n)}return n}const QQ=_e.mac?"mac":_e.windows?"win":_e.linux?"linux":"key";function eee(t,e){const n=t.split(/-(?!$)/);let i=n[n.length-1];i=="Space"&&(i=" ");let r,s,o,a;for(let l=0;l<n.length-1;++l){const c=n[l];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))e=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+c)}return r&&(i="Alt-"+i),s&&(i="Ctrl-"+i),a&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function Xm(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const tee=$p.default(Te.domEventHandlers({keydown(t,e){return c8(l8(e.state),t,e,"editor")}})),a8=Ee.define({enables:tee}),g4=new WeakMap;function l8(t){let e=t.facet(a8),n=g4.get(e);return n||g4.set(e,n=ree(e.reduce((i,r)=>i.concat(r),[]))),n}function nee(t,e,n){return c8(l8(t.state),e,t,n)}let ba=null;const iee=4e3;function ree(t,e=QQ){let n=Object.create(null),i=Object.create(null),r=(o,a)=>{let l=i[o];if(l==null)i[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,l,c,u)=>{var d,f;let p=n[o]||(n[o]=Object.create(null)),m=a.split(/ (?!$)/).map(v=>eee(v,e));for(let v=1;v<m.length;v++){let b=m.slice(0,v).join(" ");r(b,!0),p[b]||(p[b]={preventDefault:!0,stopPropagation:!1,run:[w=>{let k=ba={view:w,prefix:b,scope:o};return setTimeout(()=>{ba==k&&(ba=null)},iee),!0}]})}let g=m.join(" ");r(g,!1);let y=p[g]||(p[g]={preventDefault:!1,stopPropagation:!1,run:((f=(d=p._any)===null||d===void 0?void 0:d.run)===null||f===void 0?void 0:f.slice())||[]});l&&y.run.push(l),c&&(y.preventDefault=!0),u&&(y.stopPropagation=!0)};for(let o of t){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let c of a){let u=n[c]||(n[c]=Object.create(null));u._any||(u._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:d}=o;for(let f in u)u[f].run.push(p=>d(p,E2))}let l=o[e]||o.key;if(l)for(let c of a)s(c,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(c,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return n}let E2=null;function c8(t,e,n,i){E2=e;let r=EZ(e),s=_r(r,0),o=No(s)==r.length&&r!=" ",a="",l=!1,c=!1,u=!1;ba&&ba.view==n&&ba.scope==i&&(a=ba.prefix+" ",Xj.indexOf(e.keyCode)<0&&(c=!0,ba=null));let d=new Set,f=y=>{if(y){for(let v of y.run)if(!d.has(v)&&(d.add(v),v(n)))return y.stopPropagation&&(u=!0),!0;y.preventDefault&&(y.stopPropagation&&(u=!0),c=!0)}return!1},p=t[i],m,g;return p&&(f(p[a+Xm(r,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(_e.windows&&e.ctrlKey&&e.altKey)&&(m=ll[e.keyCode])&&m!=r?(f(p[a+Xm(m,e,!0)])||e.shiftKey&&(g=np[e.keyCode])!=r&&g!=m&&f(p[a+Xm(g,e,!1)]))&&(l=!0):o&&e.shiftKey&&f(p[a+Xm(r,e,!0)])&&(l=!0),!l&&f(p._any)&&(l=!0)),c&&(l=!0),l&&u&&e.stopPropagation(),E2=null,l}class Vp{constructor(e,n,i,r,s){this.className=e,this.left=n,this.top=i,this.width=r,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,i){if(i.empty){let r=e.coordsAtPos(i.head,i.assoc||1);if(!r)return[];let s=u8(e);return[new Vp(n,r.left-s.left,r.top-s.top,null,r.bottom-r.top)]}else return see(e,n,i)}}function u8(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==Ft.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function v4(t,e,n,i){let r=t.coordsAtPos(e,n*2);if(!r)return i;let s=t.dom.getBoundingClientRect(),o=(r.top+r.bottom)/2,a=t.posAtCoords({x:s.left+1,y:o}),l=t.posAtCoords({x:s.right-1,y:o});return a==null||l==null?i:{from:Math.max(i.from,Math.min(a,l)),to:Math.min(i.to,Math.max(a,l))}}function see(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let i=Math.max(n.from,t.viewport.from),r=Math.min(n.to,t.viewport.to),s=t.textDirection==Ft.LTR,o=t.contentDOM,a=o.getBoundingClientRect(),l=u8(t),c=o.querySelector(".cm-line"),u=c&&window.getComputedStyle(c),d=a.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),f=a.right-(u?parseInt(u.paddingRight):0),p=x2(t,i,1),m=x2(t,r,-1),g=p.type==yi.Text?p:null,y=m.type==yi.Text?m:null;if(g&&(t.lineWrapping||p.widgetLineBreaks)&&(g=v4(t,i,1,g)),y&&(t.lineWrapping||m.widgetLineBreaks)&&(y=v4(t,r,-1,y)),g&&y&&g.from==y.from&&g.to==y.to)return b(w(n.from,n.to,g));{let _=g?w(n.from,null,g):k(p,!1),E=y?w(null,n.to,y):k(m,!0),C=[];return(g||p).to<(y||m).from-(g&&y?1:0)||p.widgetLineBreaks>1&&_.bottom+t.defaultLineHeight/2<E.top?C.push(v(d,_.bottom,f,E.top)):_.bottom<E.top&&t.elementAtHeight((_.bottom+E.top)/2).type==yi.Text&&(_.bottom=E.top=(_.bottom+E.top)/2),b(_).concat(C).concat(b(E))}function v(_,E,C,N){return new Vp(e,_-l.left,E-l.top,C-_,N-E)}function b({top:_,bottom:E,horizontal:C}){let N=[];for(let M=0;M<C.length;M+=2)N.push(v(C[M],_,C[M+1],E));return N}function w(_,E,C){let N=1e9,M=-1e9,R=[];function I(B,W,Y,te,V){let $=t.coordsAtPos(B,B==C.to?-2:2),ie=t.coordsAtPos(Y,Y==C.from?2:-2);!$||!ie||(N=Math.min($.top,ie.top,N),M=Math.max($.bottom,ie.bottom,M),V==Ft.LTR?R.push(s&&W?d:$.left,s&&te?f:ie.right):R.push(!s&&te?d:ie.left,!s&&W?f:$.right))}let D=_??C.from,K=E??C.to;for(let B of t.visibleRanges)if(B.to>D&&B.from<K)for(let W=Math.max(B.from,D),Y=Math.min(B.to,K);;){let te=t.state.doc.lineAt(W);for(let V of t.bidiSpans(te)){let $=V.from+te.from,ie=V.to+te.from;if($>=Y)break;ie>W&&I(Math.max($,W),_==null&&$<=D,Math.min(ie,Y),E==null&&ie>=K,V.dir)}if(W=te.to+1,W>=Y)break}return R.length==0&&I(D,_==null,K,E==null,t.textDirection),{top:N,bottom:M,horizontal:R}}function k(_,E){let C=a.top+(E?_.top:_.bottom);return{top:C,bottom:C,horizontal:[]}}}function oee(t,e){return t.constructor==e.constructor&&t.eq(e)}class aee{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(a0)!=e.state.facet(a0)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let n=0,i=e.facet(a0);for(;n<i.length&&i[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:n}=this.view;(e!=this.scaleX||n!=this.scaleY)&&(this.scaleX=e,this.scaleY=n,this.dom.style.transform=`scale(${1/e}, ${1/n})`)}draw(e){if(e.length!=this.drawn.length||e.some((n,i)=>!oee(n,this.drawn[i]))){let n=this.dom.firstChild,i=0;for(let r of e)r.update&&n&&r.constructor&&this.drawn[i].constructor&&r.update(n,this.drawn[i])?(n=n.nextSibling,i++):this.dom.insertBefore(r.draw(),n);for(;n;){let r=n.nextSibling;n.remove(),n=r}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const a0=Ee.define();function d8(t){return[qn.define(e=>new aee(e,t)),a0.of(t)]}const op=Ee.define({combine(t){return xl(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function lee(t={}){return[op.of(t),cee,uee,dee,Fj.of(!0)]}function f8(t){return t.startState.facet(op)!=t.state.facet(op)}const cee=d8({above:!0,markers(t){let{state:e}=t,n=e.facet(op),i=[];for(let r of e.selection.ranges){let s=r==e.selection.main;if(r.empty||n.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=r.empty?r:re.cursor(r.head,r.head>r.anchor?-1:1);for(let l of Vp.forRange(t,o,a))i.push(l)}}return i},update(t,e){t.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=f8(t);return n&&y4(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){y4(e.state,t)},class:"cm-cursorLayer"});function y4(t,e){e.style.animationDuration=t.facet(op).cursorBlinkRate+"ms"}const uee=d8({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:Vp.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||f8(t)},class:"cm-selectionLayer"}),dee=$p.highest(Te.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}}));function b4(t,e,n,i,r){e.lastIndex=0;for(let s=t.iterRange(n,i),o=n,a;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;a=e.exec(s.value);)r(o+a.index,a)}function fee(t,e){let n=t.visibleRanges;if(n.length==1&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let i=[];for(let{from:r,to:s}of n)r=Math.max(t.state.doc.lineAt(r).from,r-e),s=Math.min(t.state.doc.lineAt(s).to,s+e),i.length&&i[i.length-1].to>=r?i[i.length-1].to=s:i.push({from:r,to:s});return i}class hee{constructor(e){const{regexp:n,decoration:i,decorate:r,boundary:s,maxLength:o=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,r)this.addMatch=(a,l,c,u)=>r(u,c,c+a[0].length,a,l);else if(typeof i=="function")this.addMatch=(a,l,c,u)=>{let d=i(a,l,c);d&&u(c,c+a[0].length,d)};else if(i)this.addMatch=(a,l,c,u)=>u(c,c+a[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let n=new ol,i=n.add.bind(n);for(let{from:r,to:s}of fee(e,this.maxLength))b4(e.state.doc,this.regexp,r,s,(o,a)=>this.addMatch(a,e,o,i));return n.finish()}updateDeco(e,n){let i=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((s,o,a,l)=>{l>=e.view.viewport.from&&a<=e.view.viewport.to&&(i=Math.min(a,i),r=Math.max(l,r))}),e.viewportMoved||r-i>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,n.map(e.changes),i,r):n}updateRange(e,n,i,r){for(let s of e.visibleRanges){let o=Math.max(s.from,i),a=Math.min(s.to,r);if(a>=o){let l=e.state.doc.lineAt(o),c=l.to<a?e.state.doc.lineAt(a):l,u=Math.max(s.from,l.from),d=Math.min(s.to,c.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){u=o;break}for(;a<c.to;a++)if(this.boundary.test(c.text[a-c.from])){d=a;break}}let f=[],p,m=(g,y,v)=>f.push(v.range(g,y));if(l==c)for(this.regexp.lastIndex=u-l.from;(p=this.regexp.exec(l.text))&&p.index<d-l.from;)this.addMatch(p,e,p.index+l.from,m);else b4(e.state.doc,this.regexp,u,d,(g,y)=>this.addMatch(y,e,g,m));n=n.update({filterFrom:u,filterTo:d,filter:(g,y)=>g<u||y>d,add:f})}}return n}}const A2=/x/.unicode!=null?"gu":"g",pee=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,A2),mee={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let e1=null;function gee(){var t;if(e1==null&&typeof document<"u"&&document.body){let e=document.body.style;e1=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return e1||!1}const l0=Ee.define({combine(t){let e=xl(t,{render:null,specialChars:pee,addSpecialChars:null});return(e.replaceTabs=!gee())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,A2)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,A2)),e}});function vee(t={}){return[l0.of(t),yee()]}let w4=null;function yee(){return w4||(w4=qn.fromClass(class{constructor(t){this.view=t,this.decorations=Qe.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(l0)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new hee({regexp:t.specialChars,decoration:(e,n,i)=>{let{doc:r}=n.state,s=_r(e[0],0);if(s==9){let o=r.lineAt(i),a=n.state.tabSize,l=Bp(o.text,a,i-o.from);return Qe.replace({widget:new See((a-l%a)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=Qe.replace({widget:new xee(t,s)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(l0);t.startState.facet(l0)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const bee="•";function wee(t){return t>=32?bee:t==10?"␤":String.fromCharCode(9216+t)}class xee extends Sl{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=wee(this.code),i=e.state.phrase("Control character")+" "+(mee[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,i,n);if(r)return r;let s=document.createElement("span");return s.textContent=n,s.title=i,s.setAttribute("aria-label",i),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class See extends Sl{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function kee(){return Cee}const _ee=Qe.line({class:"cm-activeLine"}),Cee=qn.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let i of t.state.selection.ranges){let r=t.lineBlockAt(i.head);r.from>e&&(n.push(_ee.range(r.from)),e=r.from)}return Qe.set(n)}},{decorations:t=>t.decorations}),ff="-10000px";class h8{constructor(e,n,i,r){this.facet=n,this.createTooltipView=i,this.removeTooltipView=r,this.input=e.state.facet(n),this.tooltips=this.input.filter(o=>o);let s=null;this.tooltipViews=this.tooltips.map(o=>s=i(o,s))}update(e,n){var i;let r=e.state.facet(this.facet),s=r.filter(l=>l);if(r===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let o=[],a=n?[]:null;for(let l=0;l<s.length;l++){let c=s[l],u=-1;if(c){for(let d=0;d<this.tooltips.length;d++){let f=this.tooltips[d];f&&f.create==c.create&&(u=d)}if(u<0)o[l]=this.createTooltipView(c,l?o[l-1]:null),a&&(a[l]=!!c.above);else{let d=o[l]=this.tooltipViews[u];a&&(a[l]=n[u]),d.update&&d.update(e)}}}for(let l of this.tooltipViews)o.indexOf(l)<0&&(this.removeTooltipView(l),(i=l.destroy)===null||i===void 0||i.call(l));return n&&(a.forEach((l,c)=>n[c]=l),n.length=a.length),this.input=r,this.tooltips=s,this.tooltipViews=o,!0}}function Eee(t){let e=t.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const t1=Ee.define({combine:t=>{var e,n,i;return{position:_e.ios?"absolute":((e=t.find(r=>r.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(r=>r.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((i=t.find(r=>r.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||Eee}}}),x4=new WeakMap,gC=qn.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(t1);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new h8(t,vC,(n,i)=>this.createTooltip(n,i),n=>{this.resizeObserver&&this.resizeObserver.unobserve(n.dom),n.dom.remove()}),this.above=this.manager.tooltips.map(n=>!!n.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let n=e||t.geometryChanged,i=t.state.facet(t1);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;n=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t,e){let n=t.create(this.view),i=e?e.dom:null;if(n.dom.classList.add("cm-tooltip"),t.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let r=document.createElement("div");r.className="cm-tooltip-arrow",n.dom.appendChild(r)}return n.dom.style.position=this.position,n.dom.style.top=ff,n.dom.style.left="0px",this.container.insertBefore(n.dom,i),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var t,e,n;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(t=i.destroy)===null||t===void 0||t.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(n=this.intersectionObserver)===null||n===void 0||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=1,e=1,n=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:s}=this.manager.tooltipViews[0];if(_e.gecko)n=s.offsetParent!=this.container.ownerDocument.body;else if(s.style.top==ff&&s.style.left=="0px"){let o=s.getBoundingClientRect();n=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(n||this.position=="absolute")if(this.parent){let s=this.parent.getBoundingClientRect();s.width&&s.height&&(t=s.width/this.parent.offsetWidth,e=s.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:e}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),r=fC(this.view);return{visible:{left:i.left+r.left,top:i.top+r.top,right:i.right-r.right,bottom:i.bottom-r.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((s,o)=>{let a=this.manager.tooltipViews[o];return a.getCoords?a.getCoords(s.pos):this.view.coordsAtPos(s.pos)}),size:this.manager.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),space:this.view.state.facet(t1).tooltipSpace(this.view),scaleX:t,scaleY:e,makeAbsolute:n}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{visible:n,space:i,scaleX:r,scaleY:s}=t,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],c=this.manager.tooltipViews[a],{dom:u}=c,d=t.pos[a],f=t.size[a];if(!d||l.clip!==!1&&(d.bottom<=Math.max(n.top,i.top)||d.top>=Math.min(n.bottom,i.bottom)||d.right<Math.max(n.left,i.left)-.1||d.left>Math.min(n.right,i.right)+.1)){u.style.top=ff;continue}let p=l.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,m=p?7:0,g=f.right-f.left,y=(e=x4.get(c))!==null&&e!==void 0?e:f.bottom-f.top,v=c.offset||Nee,b=this.view.textDirection==Ft.LTR,w=f.width>i.right-i.left?b?i.left:i.right-f.width:b?Math.max(i.left,Math.min(d.left-(p?14:0)+v.x,i.right-g)):Math.min(Math.max(i.left,d.left-g+(p?14:0)-v.x),i.right-g),k=this.above[a];!l.strictSide&&(k?d.top-y-m-v.y<i.top:d.bottom+y+m+v.y>i.bottom)&&k==i.bottom-d.bottom>d.top-i.top&&(k=this.above[a]=!k);let _=(k?d.top-i.top:i.bottom-d.bottom)-m;if(_<y&&c.resize!==!1){if(_<this.view.defaultLineHeight){u.style.top=ff;continue}x4.set(c,y),u.style.height=(y=_)/s+"px"}else u.style.height&&(u.style.height="");let E=k?d.top-y-m-v.y:d.bottom+m+v.y,C=w+g;if(c.overlap!==!0)for(let N of o)N.left<C&&N.right>w&&N.top<E+y&&N.bottom>E&&(E=k?N.top-y-2-m:N.bottom+m+2);if(this.position=="absolute"?(u.style.top=(E-t.parent.top)/s+"px",S4(u,(w-t.parent.left)/r)):(u.style.top=E/s+"px",S4(u,w/r)),p){let N=d.left+(b?v.x:-v.x)-(w+14-7);p.style.left=N/r+"px"}c.overlap!==!0&&o.push({left:w,top:E,right:C,bottom:E+y}),u.classList.toggle("cm-tooltip-above",k),u.classList.toggle("cm-tooltip-below",!k),c.positioned&&c.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=ff}},{eventObservers:{scroll(){this.maybeMeasure()}}});function S4(t,e){let n=parseInt(t.style.left,10);(isNaN(n)||Math.abs(e-n)>1)&&(t.style.left=e+"px")}const Aee=Te.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),Nee={x:0,y:0},vC=Ee.define({enables:[gC,Aee]}),Cv=Ee.define({combine:t=>t.reduce((e,n)=>e.concat(n),[])});class qy{static create(e){return new qy(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new h8(e,Cv,(n,i)=>this.createHostedView(n,i),n=>n.dom.remove())}createHostedView(e,n){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,n?n.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}passProp(e){let n;for(let i of this.manager.tooltipViews){let r=i[e];if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}}return n}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const Pee=vC.compute([Cv],t=>{let e=t.facet(Cv);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.map(n=>{var i;return(i=n.end)!==null&&i!==void 0?i:n.pos})),create:qy.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class Mee{constructor(e,n,i,r,s){this.view=e,this.source=n,this.field=i,this.setHover=r,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:n}=this,i=e.docView.nearest(n.target);if(!i)return;let r,s=1;if(i instanceof Na)r=i.posAtStart;else{if(r=e.posAtCoords(n),r==null)return;let a=e.coordsAtPos(r);if(!a||n.y<a.top||n.y>a.bottom||n.x<a.left-e.defaultCharacterWidth||n.x>a.right+e.defaultCharacterWidth)return;let l=e.bidiSpans(e.state.doc.lineAt(r)).find(u=>u.from<=r&&u.to>=r),c=l&&l.dir==Ft.RTL?-1:1;s=n.x<a.left?-c:c}let o=this.source(e,r,s);if(o!=null&&o.then){let a=this.pending={pos:r};o.then(l=>{this.pending==a&&(this.pending=null,l&&!(Array.isArray(l)&&!l.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(l)?l:[l])}))},l=>sr(e.state,l,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(gC),n=e?e.manager.tooltips.findIndex(i=>i.create==qy.create):-1;return n>-1?e.manager.tooltipViews[n]:null}mousemove(e){var n,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:r,tooltip:s}=this;if(r.length&&s&&!Tee(s.dom,e)||this.pending){let{pos:o}=r[0]||this.pending,a=(i=(n=r[0])===null||n===void 0?void 0:n.end)!==null&&i!==void 0?i:o;(o==a?this.view.posAtCoords(this.lastMove)!=o:!Ree(this.view,o,a,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:n}=this;if(n.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let n=i=>{e.removeEventListener("mouseleave",n),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",n)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Jm=4;function Tee(t,e){let{left:n,right:i,top:r,bottom:s}=t.getBoundingClientRect(),o;if(o=t.querySelector(".cm-tooltip-arrow")){let a=o.getBoundingClientRect();r=Math.min(a.top,r),s=Math.max(a.bottom,s)}return e.clientX>=n-Jm&&e.clientX<=i+Jm&&e.clientY>=r-Jm&&e.clientY<=s+Jm}function Ree(t,e,n,i,r,s){let o=t.scrollDOM.getBoundingClientRect(),a=t.documentTop+t.documentPadding.top+t.contentHeight;if(o.left>i||o.right<i||o.top>r||Math.min(o.bottom,a)<r)return!1;let l=t.posAtCoords({x:i,y:r},!1);return l>=e&&l<=n}function Oee(t,e={}){let n=Ze.define(),i=Si.define({create(){return[]},update(r,s){if(r.length&&(e.hideOnChange&&(s.docChanged||s.selection)?r=[]:e.hideOn&&(r=r.filter(o=>!e.hideOn(s,o))),s.docChanged)){let o=[];for(let a of r){let l=s.changes.mapPos(a.pos,-1,Oi.TrackDel);if(l!=null){let c=Object.assign(Object.create(null),a);c.pos=l,c.end!=null&&(c.end=s.changes.mapPos(c.end)),o.push(c)}}r=o}for(let o of s.effects)o.is(n)&&(r=o.value),o.is(Dee)&&(r=[]);return r},provide:r=>Cv.from(r)});return{active:i,extension:[i,qn.define(r=>new Mee(r,t,i,n,e.hoverTime||300)),Pee]}}function Iee(t,e){let n=t.plugin(gC);if(!n)return null;let i=n.manager.tooltips.indexOf(e);return i<0?null:n.manager.tooltipViews[i]}const Dee=Ze.define(),k4=Ee.define({combine(t){let e,n;for(let i of t)e=e||i.topContainer,n=n||i.bottomContainer;return{topContainer:e,bottomContainer:n}}});function ap(t,e){let n=t.plugin(p8),i=n?n.specs.indexOf(e):-1;return i>-1?n.panels[i]:null}const p8=qn.fromClass(class{constructor(t){this.input=t.state.facet(lp),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(k4);this.top=new Zm(t,!0,e.topContainer),this.bottom=new Zm(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(k4);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Zm(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Zm(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(lp);if(n!=this.input){let i=n.filter(l=>l),r=[],s=[],o=[],a=[];for(let l of i){let c=this.specs.indexOf(l),u;c<0?(u=l(t.view),a.push(u)):(u=this.panels[c],u.update&&u.update(t)),r.push(u),(u.top?s:o).push(u)}this.specs=i,this.panels=r,this.top.sync(s),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let i of this.panels)i.update&&i.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>Te.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class Zm{constructor(e,n,i){this.view=e,this.top=n,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=_4(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=_4(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function _4(t){let e=t.nextSibling;return t.remove(),e}const lp=Ee.define({enables:p8});class ul extends Ec{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}ul.prototype.elementClass="";ul.prototype.toDOM=void 0;ul.prototype.mapMode=Oi.TrackBefore;ul.prototype.startSide=ul.prototype.endSide=-1;ul.prototype.point=!0;const c0=Ee.define(),Lee=Ee.define(),u0=Ee.define(),C4=Ee.define({combine:t=>t.some(e=>e)});function jee(t){return[$ee]}const $ee=qn.fromClass(class{constructor(t){this.view=t,this.domAfter=null,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(u0).map(e=>new A4(t,e)),this.fixed=!t.state.facet(C4);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,i=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(i<(n.to-n.from)*.8)}if(t.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(C4)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let n=bt.iter(this.view.state.facet(c0),this.view.viewport.from),i=[],r=this.gutters.map(s=>new Fee(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(s.type)){let o=!0;for(let a of s.type)if(a.type==yi.Text&&o){N2(n,i,a.from);for(let l of r)l.line(this.view,a,i);o=!1}else if(a.widget)for(let l of r)l.widget(this.view,a)}else if(s.type==yi.Text){N2(n,i,s.from);for(let o of r)o.line(this.view,s,i)}else if(s.widget)for(let o of r)o.widget(this.view,s);for(let s of r)s.finish();t&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(t){let e=t.startState.facet(u0),n=t.state.facet(u0),i=t.docChanged||t.heightChanged||t.viewportChanged||!bt.eq(t.startState.facet(c0),t.state.facet(c0),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let r of this.gutters)r.update(t)&&(i=!0);else{i=!0;let r=[];for(let s of n){let o=e.indexOf(s);o<0?r.push(new A4(this.view,s)):(this.gutters[o].update(t),r.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),r.indexOf(s)<0&&s.destroy();for(let s of r)s.config.side=="after"?this.getDOMAfter().appendChild(s.dom):this.dom.appendChild(s.dom);this.gutters=r}return i}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:t=>Te.scrollMargins.of(e=>{let n=e.plugin(t);if(!n||n.gutters.length==0||!n.fixed)return null;let i=n.dom.offsetWidth*e.scaleX,r=n.domAfter?n.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==Ft.LTR?{left:i,right:r}:{right:i,left:r}})});function E4(t){return Array.isArray(t)?t:[t]}function N2(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class Fee{constructor(e,n,i){this.gutter=e,this.height=i,this.i=0,this.cursor=bt.iter(e.markers,n.from)}addElement(e,n,i){let{gutter:r}=this,s=(n.top-this.height)/e.scaleY,o=n.height/e.scaleY;if(this.i==r.elements.length){let a=new m8(e,o,s,i);r.elements.push(a),r.dom.appendChild(a.dom)}else r.elements[this.i].update(e,o,s,i);this.height=n.bottom,this.i++}line(e,n,i){let r=[];N2(this.cursor,r,n.from),i.length&&(r=r.concat(i));let s=this.gutter.config.lineMarker(e,n,r);s&&r.unshift(s);let o=this.gutter;r.length==0&&!o.config.renderEmptyElements||this.addElement(e,n,r)}widget(e,n){let i=this.gutter.config.widgetMarker(e,n.widget,n),r=i?[i]:null;for(let s of e.state.facet(Lee)){let o=s(e,n.widget,n);o&&(r||(r=[])).push(o)}r&&this.addElement(e,n,r)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class A4{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in n.domEventHandlers)this.dom.addEventListener(i,r=>{let s=r.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let l=s.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=r.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);n.domEventHandlers[i](e,a,r)&&r.preventDefault()});this.markers=E4(n.markers(e)),n.initialSpacer&&(this.spacer=new m8(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=E4(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],e);r!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[r])}let i=e.view.viewport;return!bt.eq(this.markers,n,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class m8{constructor(e,n,i,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,i,r)}update(e,n,i,r){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),Bee(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,n){let i="cm-gutterElement",r=this.dom.firstChild;for(let s=0,o=0;;){let a=o,l=s<n.length?n[s++]:null,c=!1;if(l){let u=l.elementClass;u&&(i+=" "+u);for(let d=o;d<this.markers.length;d++)if(this.markers[d].compare(l)){a=d,c=!0;break}}else a=this.markers.length;for(;o<a;){let u=this.markers[o++];if(u.toDOM){u.destroy(r);let d=r.nextSibling;r.remove(),r=d}}if(!l)break;l.toDOM&&(c?r=r.nextSibling:this.dom.insertBefore(l.toDOM(e),r)),c&&o++}this.dom.className=i,this.markers=n}destroy(){this.setMarkers(null,[])}}function Bee(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const zee=Ee.define(),Uee=Ee.define(),Pu=Ee.define({combine(t){return xl(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let i=Object.assign({},e);for(let r in n){let s=i[r],o=n[r];i[r]=s?(a,l,c)=>s(a,l,c)||o(a,l,c):o}return i}})}});class n1 extends ul{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function i1(t,e){return t.state.facet(Pu).formatNumber(e,t.state)}const Vee=u0.compute([Pu],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(zee)},lineMarker(e,n,i){return i.some(r=>r.toDOM)?null:new n1(i1(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,i)=>{for(let r of e.state.facet(Uee)){let s=r(e,n,i);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(Pu)!=e.state.facet(Pu),initialSpacer(e){return new n1(i1(e,N4(e.state.doc.lines)))},updateSpacer(e,n){let i=i1(n.view,N4(n.view.state.doc.lines));return i==e.number?e:new n1(i)},domEventHandlers:t.facet(Pu).domEventHandlers,side:"before"}));function Hee(t={}){return[Pu.of(t),jee(),Vee]}function N4(t){let e=9;for(;e<t;)e=e*10+9;return e}const Wee=new class extends ul{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},Gee=c0.compute(["selection"],t=>{let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.head).from;r>n&&(n=r,e.push(Wee.range(r)))}return bt.of(e)});function Kee(){return Gee}const g8=new Fp;function qee(t){window.codemirror&&window.codemirror.dispatch({effects:g8.reconfigure(ot.readOnly.of(t))})}const v8=Ze.define(),P2=Ze.define(),Yee=Si.define({create(){return Qe.none},update(t,e){let n=t.map(e.changes);for(const i of e.effects)i.is(v8)&&(n=Qe.none,i.value!==null&&(n=n.update({add:[Xee.range(i.value)]}))),i.is(P2)&&(n=Qe.none,i.value!==null&&(n=n.update({add:[Jee.range(i.value)]})));return n},provide:t=>Te.decorations.from(t)}),Xee=Qe.line({class:"!bg-gradient-to-r !from-mantis-500/8 !via-mantis-500/5 !to-transparent !border-l-2 !border-mantis-400/40 !shadow-sm"}),Jee=Qe.line({class:"cm-current-instruction"});function Zee(t){window.codemirror&&window.codemirror.dispatch({effects:v8.of(null)})}function y8(t){if(window.codemirror)if(t===null)window.codemirror.dispatch({effects:P2.of(null)});else{const e=window.codemirror.state.doc.lineAt(t).from;window.codemirror.dispatch({effects:P2.of(e)})}}const Ev=de(!1),b8=ga.init("phc_Iq0zy6d8IRJY2ts0uHNWlSbectCsUgQK77MLj3ypSdM",{api_host:"https://us.posthog.com",autocapture:!1,capture_pageview:!0,persistence:"memory"})||ga,Qee=1,P4=5e3,As=new Map,hh=[];function ete(){let t=0;for(const e of As.keys())e>t&&(t=e);return t+1}function tte(){let t=1/0;for(const e of As.keys())e<t&&(t=e);return t}function Ma(t,e=!0){switch(t.type){case"ADD_TOAST":{const{toastId:n,toast:i}=t,r=i.duration??P4,s=Number.isFinite(r)?setTimeout(()=>Ma({type:"DISMISS_TOAST",toastId:n}),r):null;As.set(n,{...i,timeout:s,otherProps:{open:!0,onOpenChange:o=>{o||Ma({type:"DISMISS_TOAST",toastId:n})}}}),As.size>Qee&&Ma({type:"DISMISS_TOAST",toastId:tte()},!1);break}case"UPDATE_TOAST":{const{toastId:n,toast:i}=t,r=As.get(n);if(!r)return;if(typeof i.duration=="number"){r.timeout!==null&&clearTimeout(r.timeout);const s=i.duration??P4,o=Number.isFinite(s)?setTimeout(()=>Ma({type:"DISMISS_TOAST",toastId:n}),s):null;As.set(n,{...r,...i,timeout:o})}else As.set(n,{...r,...i});break}case"DISMISS_TOAST":{const{toastId:n}=t,i=As.get(n);if(!i)return;i.timeout!==null&&clearTimeout(i.timeout),As.delete(n);break}default:{const n=t;throw new Error(`Unhandled action: ${n}`)}}if(e&&hh.length>0){const n=Array.from(As.entries()).map(([i,r])=>({...r,id:i})).sort((i,r)=>r.id-i.id);for(const i of hh)i(n)}}function gi(t){const e=ete(),n=r=>Ma({type:"UPDATE_TOAST",toastId:e,toast:{...r}}),i=()=>Ma({type:"DISMISS_TOAST",toastId:e});return Ma({type:"ADD_TOAST",toastId:e,toast:t}),{id:e,dismiss:i,update:n}}function nte(){const[t,e]=x.useState([]);return x.useEffect(()=>(hh.push(e),()=>{const n=hh.indexOf(e);n>-1&&hh.splice(n,1)}),[]),{toastList:t,toast:gi,dismiss:n=>Ma({type:"DISMISS_TOAST",toastId:n})}}var yC=Wp(),Je=t=>Hp(t,yC),bC=Wp();Je.write=t=>Hp(t,bC);var Yy=Wp();Je.onStart=t=>Hp(t,Yy);var wC=Wp();Je.onFrame=t=>Hp(t,wC);var xC=Wp();Je.onFinish=t=>Hp(t,xC);var Hu=[];Je.setTimeout=(t,e)=>{const n=Je.now()+e,i=()=>{const s=Hu.findIndex(o=>o.cancel==i);~s&&Hu.splice(s,1),Ra-=~s?1:0},r={time:n,handler:t,cancel:i};return Hu.splice(w8(n),0,r),Ra+=1,x8(),r};var w8=t=>~(~Hu.findIndex(e=>e.time>t)||~Hu.length);Je.cancel=t=>{Yy.delete(t),wC.delete(t),xC.delete(t),yC.delete(t),bC.delete(t)};Je.sync=t=>{M2=!0,Je.batchedUpdates(t),M2=!1};Je.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function i(...r){e=r,Je.onStart(n)}return i.handler=t,i.cancel=()=>{Yy.delete(n),e=null},i};var SC=typeof window<"u"?window.requestAnimationFrame:()=>{};Je.use=t=>SC=t;Je.now=typeof performance<"u"?()=>performance.now():Date.now;Je.batchedUpdates=t=>t();Je.catch=console.error;Je.frameLoop="always";Je.advance=()=>{Je.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):k8()};var Ta=-1,Ra=0,M2=!1;function Hp(t,e){M2?(e.delete(t),t(0)):(e.add(t),x8())}function x8(){Ta<0&&(Ta=0,Je.frameLoop!=="demand"&&SC(S8))}function ite(){Ta=-1}function S8(){~Ta&&(SC(S8),Je.batchedUpdates(k8))}function k8(){const t=Ta;Ta=Je.now();const e=w8(Ta);if(e&&(_8(Hu.splice(0,e),n=>n.handler()),Ra-=e),!Ra){ite();return}Yy.flush(),yC.flush(t?Math.min(64,Ta-t):16.667),wC.flush(),bC.flush(),xC.flush()}function Wp(){let t=new Set,e=t;return{add(n){Ra+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return Ra-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,Ra-=e.size,_8(e,i=>i(n)&&t.add(i)),Ra+=t.size,e=t)}}}function _8(t,e){t.forEach(n=>{try{e(n)}catch(i){Je.catch(i)}})}var rte=Object.defineProperty,ste=(t,e)=>{for(var n in e)rte(t,n,{get:e[n],enumerable:!0})},ps={};ste(ps,{assign:()=>lte,colors:()=>qa,createStringInterpolator:()=>_C,skipAnimation:()=>A8,to:()=>E8,willAdvance:()=>CC});function ote(){}var ate=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),we={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function ho(t,e){if(we.arr(t)){if(!we.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}var zn=(t,e)=>t.forEach(e);function dl(t,e,n){if(we.arr(t)){for(let i=0;i<t.length;i++)e.call(n,t[i],`${i}`);return}for(const i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i)}var Oa=t=>we.und(t)?[]:we.arr(t)?t:[t];function C8(t,e){if(t.size){const n=Array.from(t);t.clear(),zn(n,e)}}var Qm=(t,...e)=>C8(t,n=>n(...e)),kC=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),_C,E8,qa=null,A8=!1,CC=ote,lte=t=>{t.to&&(E8=t.to),t.now&&(Je.now=t.now),t.colors!==void 0&&(qa=t.colors),t.skipAnimation!=null&&(A8=t.skipAnimation),t.createStringInterpolator&&(_C=t.createStringInterpolator),t.requestAnimationFrame&&Je.use(t.requestAnimationFrame),t.batchedUpdates&&(Je.batchedUpdates=t.batchedUpdates),t.willAdvance&&(CC=t.willAdvance),t.frameLoop&&(Je.frameLoop=t.frameLoop)},ph=new Set,Ar=[],r1=[],Av=0,Xy={get idle(){return!ph.size&&!Ar.length},start(t){Av>t.priority?(ph.add(t),Je.onStart(cte)):(N8(t),Je(T2))},advance:T2,sort(t){if(Av)Je.onFrame(()=>Xy.sort(t));else{const e=Ar.indexOf(t);~e&&(Ar.splice(e,1),P8(t))}},clear(){Ar=[],ph.clear()}};function cte(){ph.forEach(N8),ph.clear(),Je(T2)}function N8(t){Ar.includes(t)||P8(t)}function P8(t){Ar.splice(ute(Ar,e=>e.priority>t.priority),0,t)}function T2(t){const e=r1;for(let n=0;n<Ar.length;n++){const i=Ar[n];Av=i.priority,i.idle||(CC(i),i.advance(t),i.idle||e.push(i))}return Av=0,r1=Ar,r1.length=0,Ar=e,Ar.length>0}function ute(t,e){const n=t.findIndex(e);return n<0?t.length:n}var dte=(t,e,n)=>Math.min(Math.max(n,t),e),fte={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},ss="[-+]?\\d*\\.?\\d+",Nv=ss+"%";function Jy(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var hte=new RegExp("rgb"+Jy(ss,ss,ss)),pte=new RegExp("rgba"+Jy(ss,ss,ss,ss)),mte=new RegExp("hsl"+Jy(ss,Nv,Nv)),gte=new RegExp("hsla"+Jy(ss,Nv,Nv,ss)),vte=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,yte=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,bte=/^#([0-9a-fA-F]{6})$/,wte=/^#([0-9a-fA-F]{8})$/;function xte(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=bte.exec(t))?parseInt(e[1]+"ff",16)>>>0:qa&&qa[t]!==void 0?qa[t]:(e=hte.exec(t))?(Yc(e[1])<<24|Yc(e[2])<<16|Yc(e[3])<<8|255)>>>0:(e=pte.exec(t))?(Yc(e[1])<<24|Yc(e[2])<<16|Yc(e[3])<<8|R4(e[4]))>>>0:(e=vte.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=wte.exec(t))?parseInt(e[1],16)>>>0:(e=yte.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=mte.exec(t))?(M4(T4(e[1]),eg(e[2]),eg(e[3]))|255)>>>0:(e=gte.exec(t))?(M4(T4(e[1]),eg(e[2]),eg(e[3]))|R4(e[4]))>>>0:null}function s1(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function M4(t,e,n){const i=n<.5?n*(1+e):n+e-n*e,r=2*n-i,s=s1(r,i,t+1/3),o=s1(r,i,t),a=s1(r,i,t-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function Yc(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function T4(t){return(parseFloat(t)%360+360)%360/360}function R4(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function eg(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function O4(t){let e=xte(t);if(e===null)return t;e=e||0;const n=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,s=(e&255)/255;return`rgba(${n}, ${i}, ${r}, ${s})`}var cp=(t,e,n)=>{if(we.fun(t))return t;if(we.arr(t))return cp({range:t,output:e,extrapolate:n});if(we.str(t.output[0]))return _C(t);const i=t,r=i.output,s=i.range||[0,1],o=i.extrapolateLeft||i.extrapolate||"extend",a=i.extrapolateRight||i.extrapolate||"extend",l=i.easing||(c=>c);return c=>{const u=kte(c,s);return Ste(c,s[u],s[u+1],r[u],r[u+1],l,o,a,i.map)}};function Ste(t,e,n,i,r,s,o,a,l){let c=l?l(t):t;if(c<e){if(o==="identity")return c;o==="clamp"&&(c=e)}if(c>n){if(a==="identity")return c;a==="clamp"&&(c=n)}return i===r?i:e===n?t<=e?i:r:(e===-1/0?c=-c:n===1/0?c=c-e:c=(c-e)/(n-e),c=s(c),i===-1/0?c=-c:r===1/0?c=c+i:c=c*(r-i)+i,c)}function kte(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}var _te=(t,e="end")=>n=>{n=e==="end"?Math.min(n,.999):Math.max(n,.001);const i=n*t,r=e==="end"?Math.floor(i):Math.ceil(i);return dte(0,1,r/t)},Pv=1.70158,tg=Pv*1.525,I4=Pv+1,D4=2*Math.PI/3,L4=2*Math.PI/4.5,ng=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,M8={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>I4*t*t*t-Pv*t*t,easeOutBack:t=>1+I4*Math.pow(t-1,3)+Pv*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((tg+1)*2*t-tg)/2:(Math.pow(2*t-2,2)*((tg+1)*(t*2-2)+tg)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*D4),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*D4)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*L4))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*L4)/2+1,easeInBounce:t=>1-ng(1-t),easeOutBounce:ng,easeInOutBounce:t=>t<.5?(1-ng(1-2*t))/2:(1+ng(2*t-1))/2,steps:_te},up=Symbol.for("FluidValue.get"),Nd=Symbol.for("FluidValue.observers"),Cr=t=>!!(t&&t[up]),Pi=t=>t&&t[up]?t[up]():t,j4=t=>t[Nd]||null;function Cte(t,e){t.eventObserved?t.eventObserved(e):t(e)}function dp(t,e){const n=t[Nd];n&&n.forEach(i=>{Cte(i,e)})}var T8=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");Ete(this,t)}},Ete=(t,e)=>R8(t,up,e);function Zy(t,e){if(t[up]){let n=t[Nd];n||R8(t,Nd,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function fp(t,e){const n=t[Nd];if(n&&n.has(e)){const i=n.size-1;i?n.delete(e):t[Nd]=null,t.observerRemoved&&t.observerRemoved(i,e)}}var R8=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),d0=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Ate=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,$4=new RegExp(`(${d0.source})(%|[a-z]+)`,"i"),Nte=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,Qy=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,O8=t=>{const[e,n]=Pte(t);if(!e||kC())return t;const i=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(i)return i.trim();if(n&&n.startsWith("--")){const r=window.getComputedStyle(document.documentElement).getPropertyValue(n);return r||t}else{if(n&&Qy.test(n))return O8(n);if(n)return n}return t},Pte=t=>{const e=Qy.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]},o1,Mte=(t,e,n,i,r)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(i)}, ${r})`,I8=t=>{o1||(o1=qa?new RegExp(`(${Object.keys(qa).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(s=>Pi(s).replace(Qy,O8).replace(Ate,O4).replace(o1,O4)),n=e.map(s=>s.match(d0).map(Number)),r=n[0].map((s,o)=>n.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>cp({...t,output:s}));return s=>{var l;const o=!$4.test(e[0])&&((l=e.find(c=>$4.test(c)))==null?void 0:l.replace(d0,""));let a=0;return e[0].replace(d0,()=>`${r[a++](s)}${o||""}`).replace(Nte,Mte)}},D8="react-spring: ",L8=t=>{const e=t;let n=!1;if(typeof e!="function")throw new TypeError(`${D8}once requires a function parameter`);return(...i)=>{n||(e(...i),n=!0)}},Tte=L8(console.warn);function Rte(){Tte(`${D8}The "interpolate" function is deprecated in v9 (use "to" instead)`)}L8(console.warn);function eb(t){return we.str(t)&&(t[0]=="#"||/\d/.test(t)||!kC()&&Qy.test(t)||t in(qa||{}))}var j8=kC()?x.useEffect:x.useLayoutEffect,Ote=()=>{const t=x.useRef(!1);return j8(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function Ite(){const t=x.useState()[1],e=Ote();return()=>{e.current&&t(Math.random())}}function Dte(t,e){const[n]=x.useState(()=>({inputs:e,result:t()})),i=x.useRef(),r=i.current;let s=r;return s?e&&s.inputs&&Lte(e,s.inputs)||(s={inputs:e,result:t()}):s=n,x.useEffect(()=>{i.current=s,r==n&&(n.inputs=n.result=void 0)},[s]),s.result}function Lte(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var jte=t=>x.useEffect(t,$te),$te=[],hp=Symbol.for("Animated:node"),Fte=t=>!!t&&t[hp]===t,Ns=t=>t&&t[hp],EC=(t,e)=>ate(t,hp,e),tb=t=>t&&t[hp]&&t[hp].getPayload(),$8=class{constructor(){EC(this,this)}getPayload(){return this.payload||[]}},Gp=class extends $8{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,we.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new Gp(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return we.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,we.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},pp=class extends Gp{constructor(t){super(0),this._string=null,this._toString=cp({output:[t,t]})}static create(t){return new pp(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(we.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=cp({output:[this.getValue(),t]})),this._value=0,super.reset()}},Mv={dependencies:null},nb=class extends $8{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const e={};return dl(this.source,(n,i)=>{Fte(n)?e[i]=n.getValue(t):Cr(n)?e[i]=Pi(n):t||(e[i]=n)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&zn(this.payload,t=>t.reset())}_makePayload(t){if(t){const e=new Set;return dl(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){Mv.dependencies&&Cr(t)&&Mv.dependencies.add(t);const e=tb(t);e&&zn(e,n=>this.add(n))}},F8=class extends nb{constructor(t){super(t)}static create(t){return new F8(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const e=this.getPayload();return t.length==e.length?e.map((n,i)=>n.setValue(t[i])).some(Boolean):(super.setValue(t.map(Bte)),!0)}};function Bte(t){return(eb(t)?pp:Gp).create(t)}function R2(t){const e=Ns(t);return e?e.constructor:we.arr(t)?F8:eb(t)?pp:Gp}var F4=(t,e)=>{const n=!we.fun(t)||t.prototype&&t.prototype.isReactComponent;return x.forwardRef((i,r)=>{const s=x.useRef(null),o=n&&x.useCallback(m=>{s.current=Vte(r,m)},[r]),[a,l]=Ute(i,e),c=Ite(),u=()=>{const m=s.current;if(n&&!m)return;(m?e.applyAnimatedValues(m,a.getValue(!0)):!1)===!1&&c()},d=new zte(u,l),f=x.useRef();j8(()=>(f.current=d,zn(l,m=>Zy(m,d)),()=>{f.current&&(zn(f.current.deps,m=>fp(m,f.current)),Je.cancel(f.current.update))})),x.useEffect(u,[]),jte(()=>()=>{const m=f.current;zn(m.deps,g=>fp(g,m))});const p=e.getComponentProps(a.getValue());return x.createElement(t,{...p,ref:o})})},zte=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){t.type=="change"&&Je.write(this.update)}};function Ute(t,e){const n=new Set;return Mv.dependencies=n,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new nb(t),Mv.dependencies=null,[t,n]}function Vte(t,e){return t&&(we.fun(t)?t(e):t.current=e),e}var B4=Symbol.for("AnimatedComponent"),Hte=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=r=>new nb(r),getComponentProps:i=r=>r}={})=>{const r={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:i},s=o=>{const a=z4(o)||"Anonymous";return we.str(o)?o=s[o]||(s[o]=F4(o,r)):o=o[B4]||(o[B4]=F4(o,r)),o.displayName=`Animated(${a})`,o};return dl(t,(o,a)=>{we.arr(t)&&(a=z4(o)),s[a]=s(o)}),{animated:s}},z4=t=>we.str(t)?t:t&&we.str(t.displayName)?t.displayName:we.fun(t)&&t.name||null;function Jl(t,...e){return we.fun(t)?t(...e):t}var mh=(t,e)=>t===!0||!!(e&&t&&(we.fun(t)?t(e):Oa(t).includes(e))),B8=(t,e)=>we.obj(t)?e&&t[e]:t,Wte=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,Gte=t=>t,z8=(t,e=Gte)=>{let n=Kte;t.default&&t.default!==!0&&(t=t.default,n=Object.keys(t));const i={};for(const r of n){const s=e(t[r],r);we.und(s)||(i[r]=s)}return i},Kte=["config","onProps","onStart","onChange","onPause","onResume","onRest"],qte={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function Yte(t){const e={};let n=0;if(dl(t,(i,r)=>{qte[r]||(e[r]=i,n++)}),n)return e}function U8(t){const e=Yte(t);if(e){const n={to:e};return dl(t,(i,r)=>r in e||(n[r]=i)),n}return{...t}}function mp(t){return t=Pi(t),we.arr(t)?t.map(mp):eb(t)?ps.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function O2(t){return we.fun(t)||we.arr(t)&&we.obj(t[0])}var Xte={default:{tension:170,friction:26}},I2={...Xte.default,mass:1,damping:1,easing:M8.linear,clamp:!1},Jte=class{constructor(){this.velocity=0,Object.assign(this,I2)}};function Zte(t,e,n){n&&(n={...n},U4(n,e),e={...n,...e}),U4(t,e),Object.assign(t,e);for(const o in I2)t[o]==null&&(t[o]=I2[o]);let{frequency:i,damping:r}=t;const{mass:s}=t;return we.und(i)||(i<.01&&(i=.01),r<0&&(r=0),t.tension=Math.pow(2*Math.PI/i,2)*s,t.friction=4*Math.PI*r*s/i),t}function U4(t,e){if(!we.und(e.decay))t.duration=void 0;else{const n=!we.und(e.tension)||!we.und(e.friction);(n||!we.und(e.frequency)||!we.und(e.damping)||!we.und(e.mass))&&(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}}var V4=[],Qte=class{constructor(){this.changed=!1,this.values=V4,this.toValues=null,this.fromValues=V4,this.config=new Jte,this.immediate=!1}};function ene(t,{key:e,props:n,defaultProps:i,state:r,actions:s}){return new Promise((o,a)=>{let l,c,u=mh(n.cancel??(i==null?void 0:i.cancel),e);if(u)p();else{we.und(n.pause)||(r.paused=mh(n.pause,e));let m=i==null?void 0:i.pause;m!==!0&&(m=r.paused||mh(m,e)),l=Jl(n.delay||0,e),m?(r.resumeQueue.add(f),s.pause()):(s.resume(),f())}function d(){r.resumeQueue.add(f),r.timeouts.delete(c),c.cancel(),l=c.time-Je.now()}function f(){l>0&&!ps.skipAnimation?(r.delayed=!0,c=Je.setTimeout(p,l),r.pauseQueue.add(d),r.timeouts.add(c)):p()}function p(){r.delayed&&(r.delayed=!1),r.pauseQueue.delete(d),r.timeouts.delete(c),t<=(r.cancelId||0)&&(u=!0);try{s.start({...n,callId:t,cancel:u},o)}catch(m){a(m)}}})}var tne=(t,e)=>e.length==1?e[0]:e.some(n=>n.cancelled)?gh(t.get()):e.every(n=>n.noop)?V8(t.get()):ns(t.get(),e.every(n=>n.finished)),V8=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),ns=(t,e,n=!1)=>({value:t,finished:e,cancelled:n}),gh=t=>({value:t,cancelled:!0,finished:!1});function nne(t,e,n,i){const{callId:r,parentId:s,onRest:o}=e,{asyncTo:a,promise:l}=n;return!s&&t===a&&!e.reset?l:n.promise=(async()=>{n.asyncId=r,n.asyncTo=t;const c=z8(e,(y,v)=>v==="onRest"?void 0:y);let u,d;const f=new Promise((y,v)=>(u=y,d=v)),p=y=>{const v=r<=(n.cancelId||0)&&gh(i)||r!==n.asyncId&&ns(i,!1);if(v)throw y.result=v,d(y),y},m=(y,v)=>{const b=new H4,w=new W4;return(async()=>{if(ps.skipAnimation)throw D2(n),w.result=ns(i,!1),d(w),w;p(b);const k=we.obj(y)?{...y}:{...v,to:y};k.parentId=r,dl(c,(E,C)=>{we.und(k[C])&&(k[C]=E)});const _=await i.start(k);return p(b),n.paused&&await new Promise(E=>{n.resumeQueue.add(E)}),_})()};let g;if(ps.skipAnimation)return D2(n),ns(i,!1);try{let y;we.arr(t)?y=(async v=>{for(const b of v)await m(b)})(t):y=Promise.resolve(t(m,i.stop.bind(i))),await Promise.all([y.then(u),f]),g=ns(i.get(),!0,!1)}catch(y){if(y instanceof H4)g=y.result;else if(y instanceof W4)g=y.result;else throw y}finally{r==n.asyncId&&(n.asyncId=s,n.asyncTo=s?a:void 0,n.promise=s?l:void 0)}return we.fun(o)&&Je.batchedUpdates(()=>{o(g,i,i.item)}),g})()}function D2(t,e){C8(t.timeouts,n=>n.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}var H4=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},W4=class extends Error{constructor(){super("SkipAnimationSignal")}},L2=t=>t instanceof AC,ine=1,AC=class extends T8{constructor(){super(...arguments),this.id=ine++,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=Ns(this);return t&&t.getValue()}to(...t){return ps.to(this,t)}interpolate(...t){return Rte(),ps.to(this,t)}toJSON(){return this.get()}observerAdded(t){t==1&&this._attach()}observerRemoved(t){t==0&&this._detach()}_attach(){}_detach(){}_onChange(t,e=!1){dp(this,{type:"change",parent:this,value:t,idle:e})}_onPriorityChange(t){this.idle||Xy.sort(this),dp(this,{type:"priority",parent:this,priority:t})}},Mc=Symbol.for("SpringPhase"),H8=1,j2=2,$2=4,a1=t=>(t[Mc]&H8)>0,sa=t=>(t[Mc]&j2)>0,hf=t=>(t[Mc]&$2)>0,G4=(t,e)=>e?t[Mc]|=j2|H8:t[Mc]&=~j2,K4=(t,e)=>e?t[Mc]|=$2:t[Mc]&=~$2,St=class extends AC{constructor(t,e){if(super(),this.animation=new Qte,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!we.und(t)||!we.und(e)){const n=we.obj(t)?{...t}:{...e,from:t};we.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(sa(this)||this._state.asyncTo)||hf(this)}get goal(){return Pi(this.animation.to)}get velocity(){const t=Ns(this);return t instanceof Gp?t.lastVelocity||0:t.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return a1(this)}get isAnimating(){return sa(this)}get isPaused(){return hf(this)}get isDelayed(){return this._state.delayed}advance(t){let e=!0,n=!1;const i=this.animation;let{toValues:r}=i;const{config:s}=i,o=tb(i.to);!o&&Cr(i.to)&&(r=Oa(Pi(i.to))),i.values.forEach((c,u)=>{if(c.done)return;const d=c.constructor==pp?1:o?o[u].lastPosition:r[u];let f=i.immediate,p=d;if(!f){if(p=c.lastPosition,s.tension<=0){c.done=!0;return}let m=c.elapsedTime+=t;const g=i.fromValues[u],y=c.v0!=null?c.v0:c.v0=we.arr(s.velocity)?s.velocity[u]:s.velocity;let v;const b=s.precision||(g==d?.005:Math.min(1,Math.abs(d-g)*.001));if(we.und(s.duration))if(s.decay){const w=s.decay===!0?.998:s.decay,k=Math.exp(-(1-w)*m);p=g+y/(1-w)*(1-k),f=Math.abs(c.lastPosition-p)<=b,v=y*k}else{v=c.lastVelocity==null?y:c.lastVelocity;const w=s.restVelocity||b/10,k=s.clamp?0:s.bounce,_=!we.und(k),E=g==d?c.v0>0:g<d;let C,N=!1;const M=1,R=Math.ceil(t/M);for(let I=0;I<R&&(C=Math.abs(v)>w,!(!C&&(f=Math.abs(d-p)<=b,f)));++I){_&&(N=p==d||p>d==E,N&&(v=-v*k,p=d));const D=-s.tension*1e-6*(p-d),K=-s.friction*.001*v,B=(D+K)/s.mass;v=v+B*M,p=p+v*M}}else{let w=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,c.durationProgress>0&&(c.elapsedTime=s.duration*c.durationProgress,m=c.elapsedTime+=t)),w=(s.progress||0)+m/this._memoizedDuration,w=w>1?1:w<0?0:w,c.durationProgress=w),p=g+s.easing(w)*(d-g),v=(p-c.lastPosition)/t,f=w==1}c.lastVelocity=v,Number.isNaN(p)&&(console.warn("Got NaN while animating:",this),f=!0)}o&&!o[u].done&&(f=!1),f?c.done=!0:e=!1,c.setValue(p,s.round)&&(n=!0)});const a=Ns(this),l=a.getValue();if(e){const c=Pi(i.to);(l!==c||n)&&!s.decay?(a.setValue(c),this._onChange(c)):n&&s.decay&&this._onChange(l),this._stop()}else n&&this._onChange(l)}set(t){return Je.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(sa(this)){const{to:t,config:e}=this.animation;Je.batchedUpdates(()=>{this._onStart(),e.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,e){let n;return we.und(t)?(n=this.queue||[],this.queue=[]):n=[we.obj(t)?t:{...e,to:t}],Promise.all(n.map(i=>this._update(i))).then(i=>tne(this,i))}stop(t){const{to:e}=this.animation;return this._focus(this.get()),D2(this._state,t&&this._lastCallId),Je.batchedUpdates(()=>this._stop(e,t)),this}reset(){this._update({reset:!0})}eventObserved(t){t.type=="change"?this._start():t.type=="priority"&&(this.priority=t.priority+1)}_prepareNode(t){const e=this.key||"";let{to:n,from:i}=t;n=we.obj(n)?n[e]:n,(n==null||O2(n))&&(n=void 0),i=we.obj(i)?i[e]:i,i==null&&(i=void 0);const r={to:n,from:i};return a1(this)||(t.reverse&&([n,i]=[i,n]),i=Pi(i),we.und(i)?Ns(this)||this._set(n):this._set(i)),r}_update({...t},e){const{key:n,defaultProps:i}=this;t.default&&Object.assign(i,z8(t,(o,a)=>/^on/.test(a)?B8(o,n):o)),Y4(this,t,"onProps"),mf(this,"onProps",t,this);const r=this._prepareNode(t);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return ene(++this._lastCallId,{key:n,props:t,defaultProps:i,state:s,actions:{pause:()=>{hf(this)||(K4(this,!0),Qm(s.pauseQueue),mf(this,"onPause",ns(this,pf(this,this.animation.to)),this))},resume:()=>{hf(this)&&(K4(this,!1),sa(this)&&this._resume(),Qm(s.resumeQueue),mf(this,"onResume",ns(this,pf(this,this.animation.to)),this))},start:this._merge.bind(this,r)}}).then(o=>{if(t.loop&&o.finished&&!(e&&o.noop)){const a=rne(t);if(a)return this._update(a,!0)}return o})}_merge(t,e,n){if(e.cancel)return this.stop(!0),n(gh(this));const i=!we.und(t.to),r=!we.und(t.from);if(i||r)if(e.callId>this._lastToId)this._lastToId=e.callId;else return n(gh(this));const{key:s,defaultProps:o,animation:a}=this,{to:l,from:c}=a;let{to:u=l,from:d=c}=t;r&&!i&&(!e.default||we.und(u))&&(u=d),e.reverse&&([u,d]=[d,u]);const f=!ho(d,c);f&&(a.from=d),d=Pi(d);const p=!ho(u,l);p&&this._focus(u);const m=O2(e.to),{config:g}=a,{decay:y,velocity:v}=g;(i||r)&&(g.velocity=0),e.config&&!m&&Zte(g,Jl(e.config,s),e.config!==o.config?Jl(o.config,s):void 0);let b=Ns(this);if(!b||we.und(u))return n(ns(this,!0));const w=we.und(e.reset)?r&&!e.default:!we.und(d)&&mh(e.reset,s),k=w?d:this.get(),_=mp(u),E=we.num(_)||we.arr(_)||eb(_),C=!m&&(!E||mh(o.immediate||e.immediate,s));if(p){const I=R2(u);if(I!==b.constructor)if(C)b=this._set(_);else throw Error(`Cannot animate between ${b.constructor.name} and ${I.name}, as the "to" prop suggests`)}const N=b.constructor;let M=Cr(u),R=!1;if(!M){const I=w||!a1(this)&&f;(p||I)&&(R=ho(mp(k),_),M=!R),(!ho(a.immediate,C)&&!C||!ho(g.decay,y)||!ho(g.velocity,v))&&(M=!0)}if(R&&sa(this)&&(a.changed&&!w?M=!0:M||this._stop(l)),!m&&((M||Cr(l))&&(a.values=b.getPayload(),a.toValues=Cr(u)?null:N==pp?[1]:Oa(_)),a.immediate!=C&&(a.immediate=C,!C&&!w&&this._set(l)),M)){const{onRest:I}=a;zn(one,K=>Y4(this,e,K));const D=ns(this,pf(this,l));Qm(this._pendingCalls,D),this._pendingCalls.add(n),a.changed&&Je.batchedUpdates(()=>{var K;a.changed=!w,I==null||I(D,this),w?Jl(o.onRest,D):(K=a.onStart)==null||K.call(a,D,this)})}w&&this._set(k),m?n(nne(e.to,e,this._state,this)):M?this._start():sa(this)&&!p?this._pendingCalls.add(n):n(V8(k))}_focus(t){const e=this.animation;t!==e.to&&(j4(this)&&this._detach(),e.to=t,j4(this)&&this._attach())}_attach(){let t=0;const{to:e}=this.animation;Cr(e)&&(Zy(e,this),L2(e)&&(t=e.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;Cr(t)&&fp(t,this)}_set(t,e=!0){const n=Pi(t);if(!we.und(n)){const i=Ns(this);if(!i||!ho(n,i.getValue())){const r=R2(n);!i||i.constructor!=r?EC(this,r.create(n)):i.setValue(n),i&&Je.batchedUpdates(()=>{this._onChange(n,e)})}}return Ns(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,mf(this,"onStart",ns(this,pf(this,t.to)),this))}_onChange(t,e){e||(this._onStart(),Jl(this.animation.onChange,t,this)),Jl(this.defaultProps.onChange,t,this),super._onChange(t,e)}_start(){const t=this.animation;Ns(this).reset(Pi(t.to)),t.immediate||(t.fromValues=t.values.map(e=>e.lastPosition)),sa(this)||(G4(this,!0),hf(this)||this._resume())}_resume(){ps.skipAnimation?this.finish():Xy.start(this)}_stop(t,e){if(sa(this)){G4(this,!1);const n=this.animation;zn(n.values,r=>{r.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),dp(this,{type:"idle",parent:this});const i=e?gh(this.get()):ns(this.get(),pf(this,t??n.to));Qm(this._pendingCalls,i),n.changed&&(n.changed=!1,mf(this,"onRest",i,this))}}};function pf(t,e){const n=mp(e),i=mp(t.get());return ho(i,n)}function rne(t,e=t.loop,n=t.to){const i=Jl(e);if(i){const r=i!==!0&&U8(i),s=(r||t).reverse,o=!r||r.reset;return sne({...t,loop:e,default:!1,pause:void 0,to:!s||O2(n)?n:void 0,from:o?t.from:void 0,reset:o,...r})}}function sne(t){const{to:e,from:n}=t=U8(t),i=new Set;return we.obj(e)&&q4(e,i),we.obj(n)&&q4(n,i),t.keys=i.size?Array.from(i):null,t}function q4(t,e){dl(t,(n,i)=>n!=null&&e.add(i))}var one=["onStart","onRest","onChange","onPause","onResume"];function Y4(t,e,n){t.animation[n]=e[n]!==Wte(e,n)?B8(e[n],t.key):void 0}function mf(t,e,...n){var i,r,s,o;(r=(i=t.animation)[e])==null||r.call(i,...n),(o=(s=t.defaultProps)[e])==null||o.call(s,...n)}var NC=({children:t,...e})=>{const n=x.useContext(Tv),i=e.pause||!!n.pause,r=e.immediate||!!n.immediate;e=Dte(()=>({pause:i,immediate:r}),[i,r]);const{Provider:s}=Tv;return x.createElement(s,{value:e},t)},Tv=ane(NC,{});NC.Provider=Tv.Provider;NC.Consumer=Tv.Consumer;function ane(t,e){return Object.assign(t,x.createContext(e)),t.Provider._context=t,t.Consumer._context=t,t}var lne=class extends AC{constructor(t,e){super(),this.source=t,this.idle=!0,this._active=new Set,this.calc=cp(...e);const n=this._get(),i=R2(n);EC(this,i.create(n))}advance(t){const e=this._get(),n=this.get();ho(e,n)||(Ns(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&X4(this._active)&&l1(this)}_get(){const t=we.arr(this.source)?this.source.map(Pi):Oa(Pi(this.source));return this.calc(...t)}_start(){this.idle&&!X4(this._active)&&(this.idle=!1,zn(tb(this),t=>{t.done=!1}),ps.skipAnimation?(Je.batchedUpdates(()=>this.advance()),l1(this)):Xy.start(this))}_attach(){let t=1;zn(Oa(this.source),e=>{Cr(e)&&Zy(e,this),L2(e)&&(e.idle||this._active.add(e),t=Math.max(t,e.priority+1))}),this.priority=t,this._start()}_detach(){zn(Oa(this.source),t=>{Cr(t)&&fp(t,this)}),this._active.clear(),l1(this)}eventObserved(t){t.type=="change"?t.idle?this.advance():(this._active.add(t.parent),this._start()):t.type=="idle"?this._active.delete(t.parent):t.type=="priority"&&(this.priority=Oa(this.source).reduce((e,n)=>Math.max(e,(L2(n)?n.priority:0)+1),0))}};function cne(t){return t.idle!==!1}function X4(t){return!t.size||Array.from(t).every(cne)}function l1(t){t.idle||(t.idle=!0,zn(tb(t),e=>{e.done=!0}),dp(t,{type:"idle",parent:t}))}ps.assign({createStringInterpolator:I8,to:(t,e)=>new lne(t,e)});var W8=/^--/;function une(t,e){return e==null||typeof e=="boolean"||e===""?"":typeof e=="number"&&e!==0&&!W8.test(t)&&!(vh.hasOwnProperty(t)&&vh[t])?e+"px":(""+e).trim()}var J4={};function dne(t,e){if(!t.nodeType||!t.setAttribute)return!1;const n=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter",{className:i,style:r,children:s,scrollTop:o,scrollLeft:a,viewBox:l,...c}=e,u=Object.values(c),d=Object.keys(c).map(f=>n||t.hasAttribute(f)?f:J4[f]||(J4[f]=f.replace(/([A-Z])/g,p=>"-"+p.toLowerCase())));s!==void 0&&(t.textContent=s);for(const f in r)if(r.hasOwnProperty(f)){const p=une(f,r[f]);W8.test(f)?t.style.setProperty(f,p):t.style[f]=p}d.forEach((f,p)=>{t.setAttribute(f,u[p])}),i!==void 0&&(t.className=i),o!==void 0&&(t.scrollTop=o),a!==void 0&&(t.scrollLeft=a),l!==void 0&&t.setAttribute("viewBox",l)}var vh={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fne=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),hne=["Webkit","Ms","Moz","O"];vh=Object.keys(vh).reduce((t,e)=>(hne.forEach(n=>t[fne(n,e)]=t[e]),t),vh);var pne=/^(matrix|translate|scale|rotate|skew)/,mne=/^(translate)/,gne=/^(rotate|skew)/,c1=(t,e)=>we.num(t)&&t!==0?t+e:t,f0=(t,e)=>we.arr(t)?t.every(n=>f0(n,e)):we.num(t)?t===e:parseFloat(t)===e,vne=class extends nb{constructor({x:t,y:e,z:n,...i}){const r=[],s=[];(t||e||n)&&(r.push([t||0,e||0,n||0]),s.push(o=>[`translate3d(${o.map(a=>c1(a,"px")).join(",")})`,f0(o,0)])),dl(i,(o,a)=>{if(a==="transform")r.push([o||""]),s.push(l=>[l,l===""]);else if(pne.test(a)){if(delete i[a],we.und(o))return;const l=mne.test(a)?"px":gne.test(a)?"deg":"";r.push(Oa(o)),s.push(a==="rotate3d"?([c,u,d,f])=>[`rotate3d(${c},${u},${d},${c1(f,l)})`,f0(f,0)]:c=>[`${a}(${c.map(u=>c1(u,l)).join(",")})`,f0(c,a.startsWith("scale")?1:0)])}}),r.length&&(i.transform=new yne(r,s)),super(i)}},yne=class extends T8{constructor(t,e){super(),this.inputs=t,this.transforms=e,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let t="",e=!0;return zn(this.inputs,(n,i)=>{const r=Pi(n[0]),[s,o]=this.transforms[i](we.arr(r)?r:n.map(Pi));t+=" "+s,e=e&&o}),e?"none":t}observerAdded(t){t==1&&zn(this.inputs,e=>zn(e,n=>Cr(n)&&Zy(n,this)))}observerRemoved(t){t==0&&zn(this.inputs,e=>zn(e,n=>Cr(n)&&fp(n,this)))}eventObserved(t){t.type=="change"&&(this._value=null),dp(this,t)}},bne=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];ps.assign({batchedUpdates:wl.unstable_batchedUpdates,createStringInterpolator:I8,colors:fte});var wne=Hte(bne,{applyAnimatedValues:dne,createAnimatedStyle:t=>new vne(t),getComponentProps:({scrollTop:t,scrollLeft:e,...n})=>n}),an=wne.animated;const Ht={blue:{500:"#3b82f6"},mantis:{400:"#82bd69"},red:{500:"#ef4444"},stone:{600:"#57534e",700:"#44403c",800:"#292524"},white:"#ffffff"},Le=(t=Ht.stone[800])=>({backgroundColor:new St(t),opacity:new St(1)}),Cn=()=>({strokeDashoffset:new St(1),opacity:new St(1)}),ig=()=>({strokeDashoffset:new St(1),opacity:new St(1),path:new St("")}),Rv={bus:{address:ig(),data:ig(),rd:ig(),wr:ig(),iom:Cn(),mem:{stroke:new St(Ht.red[500])},handshake:Cn(),pic:Cn(),pio:Cn(),timer:Cn(),intr:Cn(),inta:Cn(),int0:Cn(),int1:Cn(),int2:Cn(),"switches->pio":Cn(),"pio->leds":Cn(),printer:{data:Cn(),strobe:Cn(),busy:Cn()}},clock:{angle:new St(0)},cpu:{internalBus:{address:{strokeDashoffset:new St(1),opacity:new St(1),path:new St("")},data:{strokeDashoffset:new St(1),opacity:new St(1),path:new St("")}},alu:{operands:Cn(),results:Cn(),cog:{rot:new St(0)},operation:{backgroundColor:new St(Ht.stone[800])}},decoder:{path:Cn(),progress:{progress:new St(0),opacity:new St(1)}},AX:Le(),BX:Le(),CX:Le(),DX:Le(),AL:Le(),BL:Le(),CL:Le(),DL:Le(),SP:Le(),"SP.l":Le(),"SP.h":Le(),IP:Le(),"IP.l":Le(),"IP.h":Le(),IR:Le(),ri:{...Le(),opacity:new St(0)},"ri.l":Le(),"ri.h":Le(),id:{...Le(),opacity:new St(0)},"id.l":Le(),"id.h":Le(),left:Le(),"left.l":Le(),"left.h":Le(),right:Le(),"right.l":Le(),"right.h":Le(),result:Le(),"result.l":Le(),"result.h":Le(),FLAGS:Le(),"FLAGS.l":Le(),"FLAGS.h":Le(),MAR:Le(),MBR:Le()},handshake:{DATA:Le(),STATE:Le()},memory:{"operating-cell":{color:new St(Ht.white)}},pic:{IMR:Le(),IRR:Le(),ISR:Le(),INT0:Le(),INT1:Le(),INT2:Le(),INT3:Le(),INT4:Le(),INT5:Le(),INT6:Le(),INT7:Le()},pio:{PA:Le(),PB:Le(),CA:Le(),CB:Le()},printer:{printing:{progress:new St(0),opacity:new St(1)}},timer:{CONT:Le(),COMP:Le()}};function mt(t){try{return wL(Rv,t)}catch{const n=t.split(".");let i=Rv;for(const r of n)if(r in i)i=i[r];else return console.warn(`Path not found: ${t}`),{backgroundColor:new St(Ht.stone[800]),opacity:new St(1),stop(){},pause(){},resume(){},start:()=>Promise.resolve(),set(){},get:()=>Ht.stone[800],isPaused:!1};return i}}function G8(t){const e={};for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];i instanceof St?e[n]=i.get():e[n]=G8(i)}return e}const xne=G8(Rv);function K8(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];i instanceof St?i.set(e[n]):K8(t[n],e[n])}}const Sne=()=>K8(Rv,xne),gp=new Set;async function Ke(t,e){const n=z.get(ln);if(n.type==="stopped")return null;if(n.type==="paused")return await new Promise(s=>{const o=z.sub(ln,()=>{z.get(ln).type!=="paused"&&(o(),s())})}),await Ke(t,e);const i=yn();if(!i.animations&&!e.forceMs)return null;const r={duration:e.forceMs?e.duration:i.animations?e.duration*i.executionUnit:1,easing:M8[e.easing]};return Array.isArray(t)||(t=[t]),await Promise.all(t.map(async({key:s,from:o,to:a})=>{if(a===void 0&&o===void 0)return null;try{const l=mt(s);if(a===void 0)return l.set(o);{gp.add(s);const c=await mt(s).start({from:o,to:a,config:r});return gp.delete(s),c}}catch(l){return console.warn(`Error animando la clave ${s}:`,l),null}}))}const kne=()=>gp.forEach(t=>{try{const e=mt(t);e&&typeof e.pause=="function"&&e.pause()}catch(e){console.warn(`Error pausing animation for key ${t}:`,e)}}),_ne=()=>gp.forEach(t=>{try{const e=mt(t);e&&typeof e.resume=="function"&&e.resume()}catch(e){console.warn(`Error resuming animation for key ${t}:`,e)}});function q8(){gp.forEach(t=>{try{const e=mt(t);e&&typeof e.stop=="function"&&(e.stop(!0),e.isPaused&&typeof e.resume=="function"&&e.resume())}catch(e){console.warn(`Error stopping animation for key ${t}:`,e)}}),setTimeout(()=>Sne(),10)}const Cne={AX:Ht.blue[500],BX:"#4F46E5",CX:"#3B82F6",DX:"#1E40AF",IP:Ht.red[500],SP:"#DC2626",MAR:Ht.blue[500],MBR:Ht.blue[500],IR:Ht.blue[500],FLAGS:"#F59E0B",result:"#10B981",id:"#F97316",ri:"#EA580C",left:"#22C55E",right:"#16A34A"};function Y8(t){const e=t.replace("cpu.","").split(".")[0];return Cne[e]||Ht.stone[600]}async function er(t,e){try{const n=e||Y8(t);await Ke({key:`${t}.backgroundColor`,to:n},{duration:2,easing:"easeOutCubic"}),await Ke({key:`${t}.backgroundColor`,to:Ht.stone[750]},{duration:3,easing:"easeInCubic"});return}catch(n){return console.warn(`No se pudo animar el registro ${t}:`,n),null}}async function Er(t){try{return await Ke({key:`${t}.backgroundColor`,to:Ht.stone[800]},{duration:2,easing:"easeInOutQuart"})}catch(e){return console.warn(`No se pudo desactivar el registro ${t}:`,e),null}}async function h0(t){try{const e=yn(),n=Y8(t);await Ke({key:`${t}.backgroundColor`,to:n},{duration:2,easing:"easeOutQuart"});const i=e.animations?1e3:1;await new Promise(r=>setTimeout(r,i)),await Ke({key:`${t}.backgroundColor`,to:Ht.stone[800]},{duration:2,easing:"easeInQuart"});return}catch(e){return console.warn(`No se pudo actualizar el registro ${t}:`,e),null}}async function vp(t){await er("cpu.MBR"),z.set(Zh,t),await Er("cpu.MBR")}function Ene(){setTimeout(()=>{try{mt("bus.rd.opacity").set(0)}catch{}try{mt("bus.wr.opacity").set(0)}catch{}},0)}function Ane(){try{mt("bus.rd.opacity").start({to:1})}catch{}}function Nne(){try{mt("bus.rd.opacity").start({to:0})}catch{}}function Pne(){try{mt("bus.wr.opacity").start({to:1})}catch{}}function Mne(){try{mt("bus.wr.opacity").start({to:0})}catch{}}async function zi(t,e){return await Ke([{key:`${t}.strokeDashoffset`,from:1,to:0},{key:`${t}.opacity`,from:1}],{duration:e,easing:"easeInOutSine"})}async function ii(t){return await Ke({key:`${t}.opacity`,to:0},{duration:1,easing:"easeInSine"})}async function Tne(t){switch(t.type){case"bus:io.selected":{await Promise.all([Ke({key:"bus.mem.stroke",to:Ht.stone[700]},{duration:1,easing:"easeInSine"}),zi(`bus.${t.chip}`,15)]);return}case"bus:io.error":{Tc(t.error);return}case"bus:reset":{await Promise.all([Ke([{key:"bus.address.strokeDashoffset",to:1},{key:"bus.data.strokeDashoffset",to:1},{key:"bus.rd.strokeDashoffset",to:1},{key:"bus.wr.strokeDashoffset",to:1}],{duration:1,easing:"easeInSine"}),Ke({key:"bus.mem.stroke",to:Ht.red[500]},{duration:1,easing:"easeOutSine"}),ii("bus.iom"),ii("bus.handshake"),ii("bus.pio"),ii("bus.pic"),ii("bus.timer")]);return}default:return t}}async function Rne(t){switch(t.type){case"clock:tick":return;default:return t.type}}function One(t,e,n){let i="";switch(e&&(i="M 470 388 H 550 V 349 H 659"),n&&(i="M 629 250 H 550 V 349 H 659"),t){case"SP":return"M 451 309 H 550 V 349 H 659";case"IP":return"M 451 349 H 659";case"ri":return e||n?i:"";default:throw new Error(`Invalid register ${t}`)}}function Ine({showSP:t,showri:e}){const{path:n,...i}=mt("cpu.internalBus.address"),[r]=x.useState(!1),s=[t?"M 451 309 H 550 V 250":"","M 451 349 H 550 V 255",e?"M 470 388 H 550 V 300":"","M 451 349 H 659"];return h.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[s.map((o,a)=>h.jsx("path",{className:`fill-none stroke-bus ${r&&o==="M 444 388 H 575 V 349"?"stroke-mantis-400":"stroke-stone-700"}`,strokeLinejoin:"round",d:o},a)),h.jsx(an.path,{d:n,className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:i})]})}var PC={exports:{}},Wu=typeof Reflect=="object"?Reflect:null,Z4=Wu&&typeof Wu.apply=="function"?Wu.apply:function(e,n,i){return Function.prototype.apply.call(e,n,i)},p0;Wu&&typeof Wu.ownKeys=="function"?p0=Wu.ownKeys:Object.getOwnPropertySymbols?p0=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:p0=function(e){return Object.getOwnPropertyNames(e)};function Dne(t){console&&console.warn&&console.warn(t)}var X8=Number.isNaN||function(e){return e!==e};function _t(){_t.init.call(this)}PC.exports=_t;PC.exports.once=Fne;_t.EventEmitter=_t;_t.prototype._events=void 0;_t.prototype._eventsCount=0;_t.prototype._maxListeners=void 0;var Q4=10;function ib(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(_t,"defaultMaxListeners",{enumerable:!0,get:function(){return Q4},set:function(t){if(typeof t!="number"||t<0||X8(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Q4=t}});_t.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};_t.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||X8(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function J8(t){return t._maxListeners===void 0?_t.defaultMaxListeners:t._maxListeners}_t.prototype.getMaxListeners=function(){return J8(this)};_t.prototype.emit=function(e){for(var n=[],i=1;i<arguments.length;i++)n.push(arguments[i]);var r=e==="error",s=this._events;if(s!==void 0)r=r&&s.error===void 0;else if(!r)return!1;if(r){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[e];if(l===void 0)return!1;if(typeof l=="function")Z4(l,this,n);else for(var c=l.length,u=n6(l,c),i=0;i<c;++i)Z4(u[i],this,n);return!0};function Z8(t,e,n,i){var r,s,o;if(ib(n),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),o===void 0)o=s[e]=n,++t._eventsCount;else if(typeof o=="function"?o=s[e]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),r=J8(t),r>0&&o.length>r&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,Dne(a)}return t}_t.prototype.addListener=function(e,n){return Z8(this,e,n,!1)};_t.prototype.on=_t.prototype.addListener;_t.prototype.prependListener=function(e,n){return Z8(this,e,n,!0)};function Lne(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Q8(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=Lne.bind(i);return r.listener=n,i.wrapFn=r,r}_t.prototype.once=function(e,n){return ib(n),this.on(e,Q8(this,e,n)),this};_t.prototype.prependOnceListener=function(e,n){return ib(n),this.prependListener(e,Q8(this,e,n)),this};_t.prototype.removeListener=function(e,n){var i,r,s,o,a;if(ib(n),r=this._events,r===void 0)return this;if(i=r[e],i===void 0)return this;if(i===n||i.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,i.listener||n));else if(typeof i!="function"){for(s=-1,o=i.length-1;o>=0;o--)if(i[o]===n||i[o].listener===n){a=i[o].listener,s=o;break}if(s<0)return this;s===0?i.shift():jne(i,s),i.length===1&&(r[e]=i[0]),r.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};_t.prototype.off=_t.prototype.removeListener;_t.prototype.removeAllListeners=function(e){var n,i,r;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var s=Object.keys(i),o;for(r=0;r<s.length;++r)o=s[r],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=i[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(r=n.length-1;r>=0;r--)this.removeListener(e,n[r]);return this};function e6(t,e,n){var i=t._events;if(i===void 0)return[];var r=i[e];return r===void 0?[]:typeof r=="function"?n?[r.listener||r]:[r]:n?$ne(r):n6(r,r.length)}_t.prototype.listeners=function(e){return e6(this,e,!0)};_t.prototype.rawListeners=function(e){return e6(this,e,!1)};_t.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):t6.call(t,e)};_t.prototype.listenerCount=t6;function t6(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}_t.prototype.eventNames=function(){return this._eventsCount>0?p0(this._events):[]};function n6(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}function jne(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function $ne(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function Fne(t,e){return new Promise(function(n,i){function r(o){t.removeListener(e,s),i(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",r),n([].slice.call(arguments))}i6(t,e,s,{once:!0}),e!=="error"&&Bne(t,r,{once:!0})})}function Bne(t,e,n){typeof t.on=="function"&&i6(t,"error",e,n)}function i6(t,e,n,i){if(typeof t.on=="function")i.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function r(s){i.once&&t.removeEventListener(e,r),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var zne=PC.exports;function io(t){if(typeof t!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=t}typeof Symbol<"u"&&(io.prototype[Symbol.iterator]=function(){return this});io.of=function(){var t=arguments,e=t.length,n=0;return new io(function(){return n>=e?{done:!0}:{done:!1,value:t[n++]}})};io.empty=function(){var t=new io(function(){return{done:!0}});return t};io.fromSequence=function(t){var e=0,n=t.length;return new io(function(){return e>=n?{done:!0}:{done:!1,value:t[e++]}})};io.is=function(t){return t instanceof io?!0:typeof t=="object"&&t!==null&&typeof t.next=="function"};var rb=io;const Ur=Lc(rb);var sb={};sb.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";sb.SYMBOL_SUPPORT=typeof Symbol<"u";var Une=rb,r6=sb,Vne=r6.ARRAY_BUFFER_SUPPORT,Hne=r6.SYMBOL_SUPPORT;function Wne(t){return typeof t=="string"||Array.isArray(t)||Vne&&ArrayBuffer.isView(t)?Une.fromSequence(t):typeof t!="object"||t===null?null:Hne&&typeof t[Symbol.iterator]=="function"?t[Symbol.iterator]():typeof t.next=="function"?t:null}var s6=function(e){var n=Wne(e);if(!n)throw new Error("obliterator: target is not iterable nor a valid iterator.");return n},Gne=s6,Kne=function(e,n){for(var i=arguments.length>1?n:1/0,r=i!==1/0?new Array(i):[],s,o=0,a=Gne(e);;){if(o===i)return r;if(s=a.next(),s.done)return o!==n&&(r.length=o),r;r[o++]=s.value}};const o6=Lc(Kne);var qne=rb,Yne=s6,Xne=function(){var e=arguments,n=null,i=-1;return new qne(function(){var s=null;do{if(n===null){if(i++,i>=e.length)return{done:!0};n=Yne(e[i])}if(s=n.next(),s.done===!0){n=null;continue}break}while(!0);return s})};const Io=Lc(Xne);function Jne(){const t=arguments[0];for(let e=1,n=arguments.length;e<n;e++)if(arguments[e])for(const i in arguments[e])t[i]=arguments[e][i];return t}let xn=Jne;typeof Object.assign=="function"&&(xn=Object.assign);function Lr(t,e,n,i){const r=t._nodes.get(e);let s=null;return r&&(i==="mixed"?s=r.out&&r.out[n]||r.undirected&&r.undirected[n]:i==="directed"?s=r.out&&r.out[n]:s=r.undirected&&r.undirected[n]),s}function Un(t){return typeof t=="object"&&t!==null}function a6(t){let e;for(e in t)return!1;return!0}function vr(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!0,value:n})}function Gr(t,e,n){const i={enumerable:!0,configurable:!0};typeof n=="function"?i.get=n:(i.value=n,i.writable=!1),Object.defineProperty(t,e,i)}function eM(t){return!(!Un(t)||t.attributes&&!Array.isArray(t.attributes))}function Zne(){let t=Math.floor(Math.random()*256)&255;return()=>t++}class MC extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}class ye extends MC{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,ye.prototype.constructor)}}class ue extends MC{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,ue.prototype.constructor)}}class $e extends MC{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,$e.prototype.constructor)}}function l6(t,e){this.key=t,this.attributes=e,this.clear()}l6.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function c6(t,e){this.key=t,this.attributes=e,this.clear()}c6.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function u6(t,e){this.key=t,this.attributes=e,this.clear()}u6.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function Bd(t,e,n,i,r){this.key=e,this.attributes=r,this.undirected=t,this.source=n,this.target=i}Bd.prototype.attach=function(){let t="out",e="in";this.undirected&&(t=e="undirected");const n=this.source.key,i=this.target.key;this.source[t][i]=this,!(this.undirected&&n===i)&&(this.target[e][n]=this)};Bd.prototype.attachMulti=function(){let t="out",e="in";const n=this.source.key,i=this.target.key;this.undirected&&(t=e="undirected");const r=this.source[t],s=r[i];if(typeof s>"u"){r[i]=this,this.undirected&&n===i||(this.target[e][n]=this);return}s.previous=this,this.next=s,r[i]=this,this.target[e][n]=this};Bd.prototype.detach=function(){const t=this.source.key,e=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),delete this.source[n][e],delete this.target[i][t]};Bd.prototype.detachMulti=function(){const t=this.source.key,e=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[n][e],delete this.target[i][t]):(this.next.previous=void 0,this.source[n][e]=this.next,this.target[i][t]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const d6=0,f6=1,Qne=2,h6=3;function Xo(t,e,n,i,r,s,o){let a,l,c,u;if(i=""+i,n===d6){if(a=t._nodes.get(i),!a)throw new ue(`Graph.${e}: could not find the "${i}" node in the graph.`);c=r,u=s}else if(n===h6){if(r=""+r,l=t._edges.get(r),!l)throw new ue(`Graph.${e}: could not find the "${r}" edge in the graph.`);const d=l.source.key,f=l.target.key;if(i===d)a=l.target;else if(i===f)a=l.source;else throw new ue(`Graph.${e}: the "${i}" node is not attached to the "${r}" edge (${d}, ${f}).`);c=s,u=o}else{if(l=t._edges.get(i),!l)throw new ue(`Graph.${e}: could not find the "${i}" edge in the graph.`);n===f6?a=l.source:a=l.target,c=r,u=s}return[a,c,u]}function eie(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=Xo(this,e,n,i,r,s);return o.attributes[a]}}function tie(t,e,n){t.prototype[e]=function(i,r){const[s]=Xo(this,e,n,i,r);return s.attributes}}function nie(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=Xo(this,e,n,i,r,s);return o.attributes.hasOwnProperty(a)}}function iie(t,e,n){t.prototype[e]=function(i,r,s,o){const[a,l,c]=Xo(this,e,n,i,r,s,o);return a.attributes[l]=c,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function rie(t,e,n){t.prototype[e]=function(i,r,s,o){const[a,l,c]=Xo(this,e,n,i,r,s,o);if(typeof c!="function")throw new ye(`Graph.${e}: updater should be a function.`);const u=a.attributes,d=c(u[l]);return u[l]=d,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function sie(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=Xo(this,e,n,i,r,s);return delete o.attributes[a],this.emit("nodeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:a}),this}}function oie(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=Xo(this,e,n,i,r,s);if(!Un(a))throw new ye(`Graph.${e}: provided attributes are not a plain object.`);return o.attributes=a,this.emit("nodeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function aie(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=Xo(this,e,n,i,r,s);if(!Un(a))throw new ye(`Graph.${e}: provided attributes are not a plain object.`);return xn(o.attributes,a),this.emit("nodeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:a}),this}}function lie(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=Xo(this,e,n,i,r,s);if(typeof a!="function")throw new ye(`Graph.${e}: provided updater is not a function.`);return o.attributes=a(o.attributes),this.emit("nodeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const cie=[{name:t=>`get${t}Attribute`,attacher:eie},{name:t=>`get${t}Attributes`,attacher:tie},{name:t=>`has${t}Attribute`,attacher:nie},{name:t=>`set${t}Attribute`,attacher:iie},{name:t=>`update${t}Attribute`,attacher:rie},{name:t=>`remove${t}Attribute`,attacher:sie},{name:t=>`replace${t}Attributes`,attacher:oie},{name:t=>`merge${t}Attributes`,attacher:aie},{name:t=>`update${t}Attributes`,attacher:lie}];function uie(t){cie.forEach(function({name:e,attacher:n}){n(t,e("Node"),d6),n(t,e("Source"),f6),n(t,e("Target"),Qne),n(t,e("Opposite"),h6)})}function die(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new $e(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new $e(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=Lr(this,o,a,n),!s)throw new ue(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new $e(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new ue(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes[r]}}function fie(t,e,n){t.prototype[e]=function(i){let r;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new $e(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new $e(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+i,o=""+arguments[1];if(r=Lr(this,s,o,n),!r)throw new ue(`Graph.${e}: could not find an edge for the given path ("${s}" - "${o}").`)}else{if(n!=="mixed")throw new $e(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,r=this._edges.get(i),!r)throw new ue(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return r.attributes}}function hie(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new $e(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new $e(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=Lr(this,o,a,n),!s)throw new ue(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new $e(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new ue(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes.hasOwnProperty(r)}}function pie(t,e,n){t.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new $e(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new $e(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,l=""+r;if(r=arguments[2],s=arguments[3],o=Lr(this,a,l,n),!o)throw new ue(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new $e(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new ue(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return o.attributes[r]=s,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function mie(t,e,n){t.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new $e(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new $e(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,l=""+r;if(r=arguments[2],s=arguments[3],o=Lr(this,a,l,n),!o)throw new ue(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new $e(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new ue(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof s!="function")throw new ye(`Graph.${e}: updater should be a function.`);return o.attributes[r]=s(o.attributes[r]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function gie(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new $e(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new $e(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=Lr(this,o,a,n),!s)throw new ue(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new $e(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new ue(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return delete s.attributes[r],this.emit("edgeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:r}),this}}function vie(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new $e(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new $e(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=Lr(this,o,a,n),!s)throw new ue(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new $e(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new ue(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!Un(r))throw new ye(`Graph.${e}: provided attributes are not a plain object.`);return s.attributes=r,this.emit("edgeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}function yie(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new $e(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new $e(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=Lr(this,o,a,n),!s)throw new ue(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new $e(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new ue(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!Un(r))throw new ye(`Graph.${e}: provided attributes are not a plain object.`);return xn(s.attributes,r),this.emit("edgeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:r}),this}}function bie(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new $e(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new $e(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=Lr(this,o,a,n),!s)throw new ue(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new $e(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new ue(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof r!="function")throw new ye(`Graph.${e}: provided updater is not a function.`);return s.attributes=r(s.attributes),this.emit("edgeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}const wie=[{name:t=>`get${t}Attribute`,attacher:die},{name:t=>`get${t}Attributes`,attacher:fie},{name:t=>`has${t}Attribute`,attacher:hie},{name:t=>`set${t}Attribute`,attacher:pie},{name:t=>`update${t}Attribute`,attacher:mie},{name:t=>`remove${t}Attribute`,attacher:gie},{name:t=>`replace${t}Attributes`,attacher:vie},{name:t=>`merge${t}Attributes`,attacher:yie},{name:t=>`update${t}Attributes`,attacher:bie}];function xie(t){wie.forEach(function({name:e,attacher:n}){n(t,e("Edge"),"mixed"),n(t,e("DirectedEdge"),"directed"),n(t,e("UndirectedEdge"),"undirected")})}const Sie=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function kie(t,e,n,i){let r=!1;for(const s in e){if(s===i)continue;const o=e[s];if(r=n(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),t&&r)return o.key}}function _ie(t,e,n,i){let r,s,o,a=!1;for(const l in e)if(l!==i){r=e[l];do{if(s=r.source,o=r.target,a=n(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected),t&&a)return r.key;r=r.next}while(r!==void 0)}}function u1(t,e){const n=Object.keys(t),i=n.length;let r,s=0;return new Ur(function(){do if(r)r=r.next;else{if(s>=i)return{done:!0};const a=n[s++];if(a===e){r=void 0;continue}r=t[a]}while(!r);return{done:!1,value:{edge:r.key,attributes:r.attributes,source:r.source.key,target:r.target.key,sourceAttributes:r.source.attributes,targetAttributes:r.target.attributes,undirected:r.undirected}}})}function Cie(t,e,n,i){const r=e[n];if(!r)return;const s=r.source,o=r.target;if(i(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected)&&t)return r.key}function Eie(t,e,n,i){let r=e[n];if(!r)return;let s=!1;do{if(s=i(r.key,r.attributes,r.source.key,r.target.key,r.source.attributes,r.target.attributes,r.undirected),t&&s)return r.key;r=r.next}while(r!==void 0)}function d1(t,e){let n=t[e];return n.next!==void 0?new Ur(function(){if(!n)return{done:!0};const i={edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected};return n=n.next,{done:!1,value:i}}):Ur.of({edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected})}function Aie(t,e){if(t.size===0)return[];if(e==="mixed"||e===t.type)return typeof Array.from=="function"?Array.from(t._edges.keys()):o6(t._edges.keys(),t._edges.size);const n=e==="undirected"?t.undirectedSize:t.directedSize,i=new Array(n),r=e==="undirected",s=t._edges.values();let o=0,a,l;for(;a=s.next(),a.done!==!0;)l=a.value,l.undirected===r&&(i[o++]=l.key);return i}function p6(t,e,n,i){if(e.size===0)return;const r=n!=="mixed"&&n!==e.type,s=n==="undirected";let o,a,l=!1;const c=e._edges.values();for(;o=c.next(),o.done!==!0;){if(a=o.value,r&&a.undirected!==s)continue;const{key:u,attributes:d,source:f,target:p}=a;if(l=i(u,d,f.key,p.key,f.attributes,p.attributes,a.undirected),t&&l)return u}}function Nie(t,e){if(t.size===0)return Ur.empty();const n=e!=="mixed"&&e!==t.type,i=e==="undirected",r=t._edges.values();return new Ur(function(){let o,a;for(;;){if(o=r.next(),o.done)return o;if(a=o.value,!(n&&a.undirected!==i))break}return{value:{edge:a.key,attributes:a.attributes,source:a.source.key,target:a.target.key,sourceAttributes:a.source.attributes,targetAttributes:a.target.attributes,undirected:a.undirected},done:!1}})}function TC(t,e,n,i,r,s){const o=e?_ie:kie;let a;if(n!=="undirected"&&(i!=="out"&&(a=o(t,r.in,s),t&&a)||i!=="in"&&(a=o(t,r.out,s,i?void 0:r.key),t&&a))||n!=="directed"&&(a=o(t,r.undirected,s),t&&a))return a}function Pie(t,e,n,i){const r=[];return TC(!1,t,e,n,i,function(s){r.push(s)}),r}function Mie(t,e,n){let i=Ur.empty();return t!=="undirected"&&(e!=="out"&&typeof n.in<"u"&&(i=Io(i,u1(n.in))),e!=="in"&&typeof n.out<"u"&&(i=Io(i,u1(n.out,e?void 0:n.key)))),t!=="directed"&&typeof n.undirected<"u"&&(i=Io(i,u1(n.undirected))),i}function RC(t,e,n,i,r,s,o){const a=n?Eie:Cie;let l;if(e!=="undirected"&&(typeof r.in<"u"&&i!=="out"&&(l=a(t,r.in,s,o),t&&l)||typeof r.out<"u"&&i!=="in"&&(i||r.key!==s)&&(l=a(t,r.out,s,o),t&&l))||e!=="directed"&&typeof r.undirected<"u"&&(l=a(t,r.undirected,s,o),t&&l))return l}function Tie(t,e,n,i,r){const s=[];return RC(!1,t,e,n,i,r,function(o){s.push(o)}),s}function Rie(t,e,n,i){let r=Ur.empty();return t!=="undirected"&&(typeof n.in<"u"&&e!=="out"&&i in n.in&&(r=Io(r,d1(n.in,i))),typeof n.out<"u"&&e!=="in"&&i in n.out&&(e||n.key!==i)&&(r=Io(r,d1(n.out,i)))),t!=="directed"&&typeof n.undirected<"u"&&i in n.undirected&&(r=Io(r,d1(n.undirected,i))),r}function Oie(t,e){const{name:n,type:i,direction:r}=e;t.prototype[n]=function(s,o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];if(!arguments.length)return Aie(this,i);if(arguments.length===1){s=""+s;const a=this._nodes.get(s);if(typeof a>"u")throw new ue(`Graph.${n}: could not find the "${s}" node in the graph.`);return Pie(this.multi,i==="mixed"?this.type:i,r,a)}if(arguments.length===2){s=""+s,o=""+o;const a=this._nodes.get(s);if(!a)throw new ue(`Graph.${n}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(o))throw new ue(`Graph.${n}:  could not find the "${o}" target node in the graph.`);return Tie(i,this.multi,r,a,o)}throw new ye(`Graph.${n}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function Iie(t,e){const{name:n,type:i,direction:r}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(c,u,d){if(!(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)){if(arguments.length===1)return d=c,p6(!1,this,i,d);if(arguments.length===2){c=""+c,d=u;const f=this._nodes.get(c);if(typeof f>"u")throw new ue(`Graph.${s}: could not find the "${c}" node in the graph.`);return TC(!1,this.multi,i==="mixed"?this.type:i,r,f,d)}if(arguments.length===3){c=""+c,u=""+u;const f=this._nodes.get(c);if(!f)throw new ue(`Graph.${s}:  could not find the "${c}" source node in the graph.`);if(!this._nodes.has(u))throw new ue(`Graph.${s}:  could not find the "${u}" target node in the graph.`);return RC(!1,i,this.multi,r,f,u,d)}throw new ye(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(){const c=Array.prototype.slice.call(arguments),u=c.pop();let d;if(c.length===0){let f=0;i!=="directed"&&(f+=this.undirectedSize),i!=="undirected"&&(f+=this.directedSize),d=new Array(f);let p=0;c.push((m,g,y,v,b,w,k)=>{d[p++]=u(m,g,y,v,b,w,k)})}else d=[],c.push((f,p,m,g,y,v,b)=>{d.push(u(f,p,m,g,y,v,b))});return this[s].apply(this,c),d};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(){const c=Array.prototype.slice.call(arguments),u=c.pop(),d=[];return c.push((f,p,m,g,y,v,b)=>{u(f,p,m,g,y,v,b)&&d.push(f)}),this[s].apply(this,c),d};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(){let c=Array.prototype.slice.call(arguments);if(c.length<2||c.length>4)throw new ye(`Graph.${l}: invalid number of arguments (expecting 2, 3 or 4 and got ${c.length}).`);if(typeof c[c.length-1]=="function"&&typeof c[c.length-2]!="function")throw new ye(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let u,d;c.length===2?(u=c[0],d=c[1],c=[]):c.length===3?(u=c[1],d=c[2],c=[c[0]]):c.length===4&&(u=c[2],d=c[3],c=[c[0],c[1]]);let f=d;return c.push((p,m,g,y,v,b,w)=>{f=u(f,p,m,g,y,v,b,w)}),this[s].apply(this,c),f}}function Die(t,e){const{name:n,type:i,direction:r}=e,s="find"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(l,c,u){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return!1;if(arguments.length===1)return u=l,p6(!0,this,i,u);if(arguments.length===2){l=""+l,u=c;const d=this._nodes.get(l);if(typeof d>"u")throw new ue(`Graph.${s}: could not find the "${l}" node in the graph.`);return TC(!0,this.multi,i==="mixed"?this.type:i,r,d,u)}if(arguments.length===3){l=""+l,c=""+c;const d=this._nodes.get(l);if(!d)throw new ue(`Graph.${s}:  could not find the "${l}" source node in the graph.`);if(!this._nodes.has(c))throw new ue(`Graph.${s}:  could not find the "${c}" target node in the graph.`);return RC(!0,i,this.multi,r,d,c,u)}throw new ye(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const o="some"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(){const l=Array.prototype.slice.call(arguments),c=l.pop();return l.push((d,f,p,m,g,y,v)=>c(d,f,p,m,g,y,v)),!!this[s].apply(this,l)};const a="every"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[a]=function(){const l=Array.prototype.slice.call(arguments),c=l.pop();return l.push((d,f,p,m,g,y,v)=>!c(d,f,p,m,g,y,v)),!this[s].apply(this,l)}}function Lie(t,e){const{name:n,type:i,direction:r}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o,a){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return Ur.empty();if(!arguments.length)return Nie(this,i);if(arguments.length===1){o=""+o;const l=this._nodes.get(o);if(!l)throw new ue(`Graph.${s}: could not find the "${o}" node in the graph.`);return Mie(i,r,l)}if(arguments.length===2){o=""+o,a=""+a;const l=this._nodes.get(o);if(!l)throw new ue(`Graph.${s}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(a))throw new ue(`Graph.${s}:  could not find the "${a}" target node in the graph.`);return Rie(i,r,l,a)}throw new ye(`Graph.${s}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function jie(t){Sie.forEach(e=>{Oie(t,e),Iie(t,e),Die(t,e),Lie(t,e)})}const $ie=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function ob(){this.A=null,this.B=null}ob.prototype.wrap=function(t){this.A===null?this.A=t:this.B===null&&(this.B=t)};ob.prototype.has=function(t){return this.A!==null&&t in this.A||this.B!==null&&t in this.B};function gf(t,e,n,i,r){for(const s in i){const o=i[s],a=o.source,l=o.target,c=a===n?l:a;if(e&&e.has(c.key))continue;const u=r(c.key,c.attributes);if(t&&u)return c.key}}function OC(t,e,n,i,r){if(e!=="mixed"){if(e==="undirected")return gf(t,null,i,i.undirected,r);if(typeof n=="string")return gf(t,null,i,i[n],r)}const s=new ob;let o;if(e!=="undirected"){if(n!=="out"){if(o=gf(t,null,i,i.in,r),t&&o)return o;s.wrap(i.in)}if(n!=="in"){if(o=gf(t,s,i,i.out,r),t&&o)return o;s.wrap(i.out)}}if(e!=="directed"&&(o=gf(t,s,i,i.undirected,r),t&&o))return o}function Fie(t,e,n){if(t!=="mixed"){if(t==="undirected")return Object.keys(n.undirected);if(typeof e=="string")return Object.keys(n[e])}const i=[];return OC(!1,t,e,n,function(r){i.push(r)}),i}function vf(t,e,n){const i=Object.keys(n),r=i.length;let s=0;return new Ur(function(){let a=null;do{if(s>=r)return t&&t.wrap(n),{done:!0};const l=n[i[s++]],c=l.source,u=l.target;if(a=c===e?u:c,t&&t.has(a.key)){a=null;continue}}while(a===null);return{done:!1,value:{neighbor:a.key,attributes:a.attributes}}})}function Bie(t,e,n){if(t!=="mixed"){if(t==="undirected")return vf(null,n,n.undirected);if(typeof e=="string")return vf(null,n,n[e])}let i=Ur.empty();const r=new ob;return t!=="undirected"&&(e!=="out"&&(i=Io(i,vf(r,n,n.in))),e!=="in"&&(i=Io(i,vf(r,n,n.out)))),t!=="directed"&&(i=Io(i,vf(r,n,n.undirected))),i}function zie(t,e){const{name:n,type:i,direction:r}=e;t.prototype[n]=function(s){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];s=""+s;const o=this._nodes.get(s);if(typeof o>"u")throw new ue(`Graph.${n}: could not find the "${s}" node in the graph.`);return Fie(i==="mixed"?this.type:i,r,o)}}function Uie(t,e){const{name:n,type:i,direction:r}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(c,u){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;c=""+c;const d=this._nodes.get(c);if(typeof d>"u")throw new ue(`Graph.${s}: could not find the "${c}" node in the graph.`);OC(!1,i==="mixed"?this.type:i,r,d,u)};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(c,u){const d=[];return this[s](c,(f,p)=>{d.push(u(f,p))}),d};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(c,u){const d=[];return this[s](c,(f,p)=>{u(f,p)&&d.push(f)}),d};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(c,u,d){if(arguments.length<3)throw new ye(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let f=d;return this[s](c,(p,m)=>{f=u(f,p,m)}),f}}function Vie(t,e){const{name:n,type:i,direction:r}=e,s=n[0].toUpperCase()+n.slice(1,-1),o="find"+s;t.prototype[o]=function(c,u){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;c=""+c;const d=this._nodes.get(c);if(typeof d>"u")throw new ue(`Graph.${o}: could not find the "${c}" node in the graph.`);return OC(!0,i==="mixed"?this.type:i,r,d,u)};const a="some"+s;t.prototype[a]=function(c,u){return!!this[o](c,u)};const l="every"+s;t.prototype[l]=function(c,u){return!this[o](c,(f,p)=>!u(f,p))}}function Hie(t,e){const{name:n,type:i,direction:r}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return Ur.empty();o=""+o;const a=this._nodes.get(o);if(typeof a>"u")throw new ue(`Graph.${s}: could not find the "${o}" node in the graph.`);return Bie(i==="mixed"?this.type:i,r,a)}}function Wie(t){$ie.forEach(e=>{zie(t,e),Uie(t,e),Vie(t,e),Hie(t,e)})}function rg(t,e,n,i,r){const s=i._nodes.values(),o=i.type;let a,l,c,u,d,f;for(;a=s.next(),a.done!==!0;){let p=!1;if(l=a.value,o!=="undirected"){u=l.out;for(c in u){d=u[c];do f=d.target,p=!0,r(l.key,f.key,l.attributes,f.attributes,d.key,d.attributes,d.undirected),d=d.next;while(d)}}if(o!=="directed"){u=l.undirected;for(c in u)if(!(e&&l.key>c)){d=u[c];do f=d.target,f.key!==c&&(f=d.source),p=!0,r(l.key,f.key,l.attributes,f.attributes,d.key,d.attributes,d.undirected),d=d.next;while(d)}}n&&!p&&r(l.key,null,l.attributes,null,null,null,null)}}function Gie(t,e){const n={key:t};return a6(e.attributes)||(n.attributes=xn({},e.attributes)),n}function Kie(t,e,n){const i={key:e,source:n.source.key,target:n.target.key};return a6(n.attributes)||(i.attributes=xn({},n.attributes)),t==="mixed"&&n.undirected&&(i.undirected=!0),i}function qie(t){if(!Un(t))throw new ye('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in t))throw new ye("Graph.import: serialized node is missing its key.");if("attributes"in t&&(!Un(t.attributes)||t.attributes===null))throw new ye("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function Yie(t){if(!Un(t))throw new ye('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in t))throw new ye("Graph.import: serialized edge is missing its source.");if(!("target"in t))throw new ye("Graph.import: serialized edge is missing its target.");if("attributes"in t&&(!Un(t.attributes)||t.attributes===null))throw new ye("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in t&&typeof t.undirected!="boolean")throw new ye("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const Xie=Zne(),Jie=new Set(["directed","undirected","mixed"]),tM=new Set(["domain","_events","_eventsCount","_maxListeners"]),Zie=[{name:t=>`${t}Edge`,generateKey:!0},{name:t=>`${t}DirectedEdge`,generateKey:!0,type:"directed"},{name:t=>`${t}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:t=>`${t}EdgeWithKey`},{name:t=>`${t}DirectedEdgeWithKey`,type:"directed"},{name:t=>`${t}UndirectedEdgeWithKey`,type:"undirected"}],Qie={allowSelfLoops:!0,multi:!1,type:"mixed"};function ere(t,e,n){if(n&&!Un(n))throw new ye(`Graph.addNode: invalid attributes. Expecting an object but got "${n}"`);if(e=""+e,n=n||{},t._nodes.has(e))throw new $e(`Graph.addNode: the "${e}" node already exist in the graph.`);const i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}function nM(t,e,n){const i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}function m6(t,e,n,i,r,s,o,a){if(!i&&t.type==="undirected")throw new $e(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(i&&t.type==="directed")throw new $e(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(a&&!Un(a))throw new ye(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`);if(s=""+s,o=""+o,a=a||{},!t.allowSelfLoops&&s===o)throw new $e(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const l=t._nodes.get(s),c=t._nodes.get(o);if(!l)throw new ue(`Graph.${e}: source node "${s}" not found.`);if(!c)throw new ue(`Graph.${e}: target node "${o}" not found.`);const u={key:null,undirected:i,source:s,target:o,attributes:a};if(n)r=t._edgeKeyGenerator();else if(r=""+r,t._edges.has(r))throw new $e(`Graph.${e}: the "${r}" edge already exists in the graph.`);if(!t.multi&&(i?typeof l.undirected[o]<"u":typeof l.out[o]<"u"))throw new $e(`Graph.${e}: an edge linking "${s}" to "${o}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const d=new Bd(i,r,l,c,a);t._edges.set(r,d);const f=s===o;return i?(l.undirectedDegree++,c.undirectedDegree++,f&&(l.undirectedLoops++,t._undirectedSelfLoopCount++)):(l.outDegree++,c.inDegree++,f&&(l.directedLoops++,t._directedSelfLoopCount++)),t.multi?d.attachMulti():d.attach(),i?t._undirectedSize++:t._directedSize++,u.key=r,t.emit("edgeAdded",u),r}function tre(t,e,n,i,r,s,o,a,l){if(!i&&t.type==="undirected")throw new $e(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(i&&t.type==="directed")throw new $e(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(a){if(l){if(typeof a!="function")throw new ye(`Graph.${e}: invalid updater function. Expecting a function but got "${a}"`)}else if(!Un(a))throw new ye(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`)}s=""+s,o=""+o;let c;if(l&&(c=a,a=void 0),!t.allowSelfLoops&&s===o)throw new $e(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let u=t._nodes.get(s),d=t._nodes.get(o),f,p;if(!n&&(f=t._edges.get(r),f)){if((f.source.key!==s||f.target.key!==o)&&(!i||f.source.key!==o||f.target.key!==s))throw new $e(`Graph.${e}: inconsistency detected when attempting to merge the "${r}" edge with "${s}" source & "${o}" target vs. ("${f.source.key}", "${f.target.key}").`);p=f}if(!p&&!t.multi&&u&&(p=i?u.undirected[o]:u.out[o]),p){const b=[p.key,!1,!1,!1];if(l?!c:!a)return b;if(l){const w=p.attributes;p.attributes=c(w),t.emit("edgeAttributesUpdated",{type:"replace",key:p.key,attributes:p.attributes})}else xn(p.attributes,a),t.emit("edgeAttributesUpdated",{type:"merge",key:p.key,attributes:p.attributes,data:a});return b}a=a||{},l&&c&&(a=c(a));const m={key:null,undirected:i,source:s,target:o,attributes:a};if(n)r=t._edgeKeyGenerator();else if(r=""+r,t._edges.has(r))throw new $e(`Graph.${e}: the "${r}" edge already exists in the graph.`);let g=!1,y=!1;u||(u=nM(t,s,{}),g=!0,s===o&&(d=u,y=!0)),d||(d=nM(t,o,{}),y=!0),f=new Bd(i,r,u,d,a),t._edges.set(r,f);const v=s===o;return i?(u.undirectedDegree++,d.undirectedDegree++,v&&(u.undirectedLoops++,t._undirectedSelfLoopCount++)):(u.outDegree++,d.inDegree++,v&&(u.directedLoops++,t._directedSelfLoopCount++)),t.multi?f.attachMulti():f.attach(),i?t._undirectedSize++:t._directedSize++,m.key=r,t.emit("edgeAdded",m),[r,!0,g,y]}function Xc(t,e){t._edges.delete(e.key);const{source:n,target:i,attributes:r}=e,s=e.undirected,o=n===i;s?(n.undirectedDegree--,i.undirectedDegree--,o&&(n.undirectedLoops--,t._undirectedSelfLoopCount--)):(n.outDegree--,i.inDegree--,o&&(n.directedLoops--,t._directedSelfLoopCount--)),t.multi?e.detachMulti():e.detach(),s?t._undirectedSize--:t._directedSize--,t.emit("edgeDropped",{key:e.key,attributes:r,source:n.key,target:i.key,undirected:s})}class Pt extends zne.EventEmitter{constructor(e){if(super(),e=xn({},Qie,e),typeof e.multi!="boolean")throw new ye(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!Jie.has(e.type))throw new ye(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new ye(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const n=e.type==="mixed"?l6:e.type==="directed"?c6:u6;vr(this,"NodeDataClass",n);const i="geid_"+Xie()+"_";let r=0;const s=()=>{let o;do o=i+r++;while(this._edges.has(o));return o};vr(this,"_attributes",{}),vr(this,"_nodes",new Map),vr(this,"_edges",new Map),vr(this,"_directedSize",0),vr(this,"_undirectedSize",0),vr(this,"_directedSelfLoopCount",0),vr(this,"_undirectedSelfLoopCount",0),vr(this,"_edgeKeyGenerator",s),vr(this,"_options",e),tM.forEach(o=>vr(this,o,this[o])),Gr(this,"order",()=>this._nodes.size),Gr(this,"size",()=>this._edges.size),Gr(this,"directedSize",()=>this._directedSize),Gr(this,"undirectedSize",()=>this._undirectedSize),Gr(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),Gr(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),Gr(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),Gr(this,"multi",this._options.multi),Gr(this,"type",this._options.type),Gr(this,"allowSelfLoops",this._options.allowSelfLoops),Gr(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,n){if(this.type==="undirected")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&!r.undirected}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?i.out.hasOwnProperty(n):!1}throw new ye(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,n){if(this.type==="directed")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&r.undirected}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?i.undirected.hasOwnProperty(n):!1}throw new ye(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,n){if(arguments.length===1){const i=""+e;return this._edges.has(i)}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?typeof i.out<"u"&&i.out.hasOwnProperty(n)||typeof i.undirected<"u"&&i.undirected.hasOwnProperty(n):!1}throw new ye(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,n){if(this.type==="undirected")return;if(e=""+e,n=""+n,this.multi)throw new $e("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const i=this._nodes.get(e);if(!i)throw new ue(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new ue(`Graph.directedEdge: could not find the "${n}" target node in the graph.`);const r=i.out&&i.out[n]||void 0;if(r)return r.key}undirectedEdge(e,n){if(this.type==="directed")return;if(e=""+e,n=""+n,this.multi)throw new $e("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const i=this._nodes.get(e);if(!i)throw new ue(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new ue(`Graph.undirectedEdge: could not find the "${n}" target node in the graph.`);const r=i.undirected&&i.undirected[n]||void 0;if(r)return r.key}edge(e,n){if(this.multi)throw new $e("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ue(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new ue(`Graph.edge: could not find the "${n}" target node in the graph.`);const r=i.out&&i.out[n]||i.undirected&&i.undirected[n]||void 0;if(r)return r.key}areDirectedNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ue(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.in||n in i.out}areOutNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ue(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.out}areInNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ue(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.in}areUndirectedNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ue(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:n in i.undirected}areNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ue(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(n in i.in||n in i.out)||this.type!=="directed"&&n in i.undirected}areInboundNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ue(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in i.in||this.type!=="directed"&&n in i.undirected}areOutboundNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new ue(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in i.out||this.type!=="directed"&&n in i.undirected}inDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree}outDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree}directedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree}undirectedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree}inboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.inDegree),i}outboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.outDegree),i}degree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.degree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.inDegree+n.outDegree),i}inDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree-n.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree-n.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree-n.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree-n.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.inDegree,r+=n.directedLoops),i-r}outboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.outDegree,r+=n.directedLoops),i-r}degreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.inDegree+n.outDegree,r+=n.directedLoops*2),i-r}source(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ue(`Graph.source: could not find the "${e}" edge in the graph.`);return n.source.key}target(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ue(`Graph.target: could not find the "${e}" edge in the graph.`);return n.target.key}extremities(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ue(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[n.source.key,n.target.key]}opposite(e,n){e=""+e,n=""+n;const i=this._edges.get(n);if(!i)throw new ue(`Graph.opposite: could not find the "${n}" edge in the graph.`);const r=i.source.key,s=i.target.key;if(e===r)return s;if(e===s)return r;throw new ue(`Graph.opposite: the "${e}" node is not attached to the "${n}" edge (${r}, ${s}).`)}hasExtremity(e,n){e=""+e,n=""+n;const i=this._edges.get(e);if(!i)throw new ue(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return i.source.key===n||i.target.key===n}isUndirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ue(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return n.undirected}isDirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ue(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!n.undirected}isSelfLoop(e){e=""+e;const n=this._edges.get(e);if(!n)throw new ue(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return n.source===n.target}addNode(e,n){return ere(this,e,n).key}mergeNode(e,n){if(n&&!Un(n))throw new ye(`Graph.mergeNode: invalid attributes. Expecting an object but got "${n}"`);e=""+e,n=n||{};let i=this._nodes.get(e);return i?(n&&(xn(i.attributes,n),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:i.attributes,data:n})),[e,!1]):(i=new this.NodeDataClass(e,n),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:n}),[e,!0])}updateNode(e,n){if(n&&typeof n!="function")throw new ye(`Graph.updateNode: invalid updater function. Expecting a function but got "${n}"`);e=""+e;let i=this._nodes.get(e);if(i){if(n){const s=i.attributes;i.attributes=n(s),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:i.attributes})}return[e,!1]}const r=n?n({}):{};return i=new this.NodeDataClass(e,r),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:r}),[e,!0]}dropNode(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new ue(`Graph.dropNode: could not find the "${e}" node in the graph.`);let i;if(this.type!=="undirected"){for(const r in n.out){i=n.out[r];do Xc(this,i),i=i.next;while(i)}for(const r in n.in){i=n.in[r];do Xc(this,i),i=i.next;while(i)}}if(this.type!=="directed")for(const r in n.undirected){i=n.undirected[r];do Xc(this,i),i=i.next;while(i)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:n.attributes})}dropEdge(e){let n;if(arguments.length>1){const i=""+arguments[0],r=""+arguments[1];if(n=Lr(this,i,r,this.type),!n)throw new ue(`Graph.dropEdge: could not find the "${i}" -> "${r}" edge in the graph.`)}else if(e=""+e,n=this._edges.get(e),!n)throw new ue(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return Xc(this,n),this}dropDirectedEdge(e,n){if(arguments.length<2)throw new $e("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new $e("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,n=""+n;const i=Lr(this,e,n,"directed");if(!i)throw new ue(`Graph.dropDirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return Xc(this,i),this}dropUndirectedEdge(e,n){if(arguments.length<2)throw new $e("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new $e("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const i=Lr(this,e,n,"undirected");if(!i)throw new ue(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return Xc(this,i),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let n;for(;n=e.next(),n.done!==!0;)n.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,n){return this._attributes[e]=n,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,n){if(typeof n!="function")throw new ye("Graph.updateAttribute: updater should be a function.");const i=this._attributes[e];return this._attributes[e]=n(i),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!Un(e))throw new ye("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!Un(e))throw new ye("Graph.mergeAttributes: provided attributes are not a plain object.");return xn(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new ye("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,n){if(typeof e!="function")throw new ye("Graph.updateEachNodeAttributes: expecting an updater function.");if(n&&!eM(n))throw new ye("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._nodes.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,s.attributes=e(s.key,s.attributes);this.emit("eachNodeAttributesUpdated",{hints:n||null})}updateEachEdgeAttributes(e,n){if(typeof e!="function")throw new ye("Graph.updateEachEdgeAttributes: expecting an updater function.");if(n&&!eM(n))throw new ye("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._edges.values();let r,s,o,a;for(;r=i.next(),r.done!==!0;)s=r.value,o=s.source,a=s.target,s.attributes=e(s.key,s.attributes,o.key,a.key,o.attributes,a.attributes,s.undirected);this.emit("eachEdgeAttributesUpdated",{hints:n||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new ye("Graph.forEachAdjacencyEntry: expecting a callback.");rg(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new ye("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");rg(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new ye("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");rg(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new ye("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");rg(!1,!0,!0,this,e)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):o6(this._nodes.keys(),this._nodes.size)}forEachNode(e){if(typeof e!="function")throw new ye("Graph.forEachNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)}findNode(e){if(typeof e!="function")throw new ye("Graph.findNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return r.key}mapNodes(e){if(typeof e!="function")throw new ye("Graph.mapNode: expecting a callback.");const n=this._nodes.values();let i,r;const s=new Array(this.order);let o=0;for(;i=n.next(),i.done!==!0;)r=i.value,s[o++]=e(r.key,r.attributes);return s}someNode(e){if(typeof e!="function")throw new ye("Graph.someNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new ye("Graph.everyNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,!e(r.key,r.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new ye("Graph.filterNodes: expecting a callback.");const n=this._nodes.values();let i,r;const s=[];for(;i=n.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)&&s.push(r.key);return s}reduceNodes(e,n){if(typeof e!="function")throw new ye("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new ye("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let i=n;const r=this._nodes.values();let s,o;for(;s=r.next(),s.done!==!0;)o=s.value,i=e(i,o.key,o.attributes);return i}nodeEntries(){const e=this._nodes.values();return new Ur(()=>{const n=e.next();if(n.done)return n;const i=n.value;return{value:{node:i.key,attributes:i.attributes},done:!1}})}export(){const e=new Array(this._nodes.size);let n=0;this._nodes.forEach((r,s)=>{e[n++]=Gie(s,r)});const i=new Array(this._edges.size);return n=0,this._edges.forEach((r,s)=>{i[n++]=Kie(this.type,s,r)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:i}}import(e,n=!1){if(e instanceof Pt)return e.forEachNode((l,c)=>{n?this.mergeNode(l,c):this.addNode(l,c)}),e.forEachEdge((l,c,u,d,f,p,m)=>{n?m?this.mergeUndirectedEdgeWithKey(l,u,d,c):this.mergeDirectedEdgeWithKey(l,u,d,c):m?this.addUndirectedEdgeWithKey(l,u,d,c):this.addDirectedEdgeWithKey(l,u,d,c)}),this;if(!Un(e))throw new ye("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!Un(e.attributes))throw new ye("Graph.import: invalid attributes. Expecting a plain object.");n?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let i,r,s,o,a;if(e.nodes){if(s=e.nodes,!Array.isArray(s))throw new ye("Graph.import: invalid nodes. Expecting an array.");for(i=0,r=s.length;i<r;i++){o=s[i],qie(o);const{key:l,attributes:c}=o;n?this.mergeNode(l,c):this.addNode(l,c)}}if(e.edges){let l=!1;if(this.type==="undirected"&&(l=!0),s=e.edges,!Array.isArray(s))throw new ye("Graph.import: invalid edges. Expecting an array.");for(i=0,r=s.length;i<r;i++){a=s[i],Yie(a);const{source:c,target:u,attributes:d,undirected:f=l}=a;let p;"key"in a?(p=n?f?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:f?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,p.call(this,a.key,c,u,d)):(p=n?f?this.mergeUndirectedEdge:this.mergeDirectedEdge:f?this.addUndirectedEdge:this.addDirectedEdge,p.call(this,c,u,d))}}return this}nullCopy(e){const n=new Pt(xn({},this._options,e));return n.replaceAttributes(xn({},this.getAttributes())),n}emptyCopy(e){const n=this.nullCopy(e);return this._nodes.forEach((i,r)=>{const s=xn({},i.attributes);i=new n.NodeDataClass(r,s),n._nodes.set(r,i)}),n}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new $e(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new $e("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new $e("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const n=this.emptyCopy(e),i=this._edges.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,m6(n,"copy",!1,s.undirected,s.key,s.source.key,s.target.key,xn({},s.attributes));return n}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((s,o)=>{e[o]=s.attributes});const n={},i={};this._edges.forEach((s,o)=>{const a=s.undirected?"--":"->";let l="",c=s.source.key,u=s.target.key,d;s.undirected&&c>u&&(d=c,c=u,u=d);const f=`(${c})${a}(${u})`;o.startsWith("geid_")?this.multi&&(typeof i[f]>"u"?i[f]=0:i[f]++,l+=`${i[f]}. `):l+=`[${o}]: `,l+=f,n[l]=s.attributes});const r={};for(const s in this)this.hasOwnProperty(s)&&!tM.has(s)&&typeof this[s]!="function"&&typeof s!="symbol"&&(r[s]=this[s]);return r.attributes=this._attributes,r.nodes=e,r.edges=n,vr(r,"constructor",this.constructor),r}}typeof Symbol<"u"&&(Pt.prototype[Symbol.for("nodejs.util.inspect.custom")]=Pt.prototype.inspect);Zie.forEach(t=>{["add","merge","update"].forEach(e=>{const n=t.name(e),i=e==="add"?m6:tre;t.generateKey?Pt.prototype[n]=function(r,s,o){return i(this,n,!0,(t.type||this.type)==="undirected",null,r,s,o,e==="update")}:Pt.prototype[n]=function(r,s,o,a){return i(this,n,!1,(t.type||this.type)==="undirected",r,s,o,a,e==="update")}})});uie(Pt);xie(Pt);jie(Pt);Wie(Pt);class g6 extends Pt{constructor(e){const n=xn({type:"directed"},e);if("multi"in n&&n.multi!==!1)throw new ye("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="directed")throw new ye('DirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class IC extends Pt{constructor(e){const n=xn({type:"undirected"},e);if("multi"in n&&n.multi!==!1)throw new ye("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="undirected")throw new ye('UndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class v6 extends Pt{constructor(e){const n=xn({multi:!0},e);if("multi"in n&&n.multi!==!0)throw new ye("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(n)}}class y6 extends Pt{constructor(e){const n=xn({type:"directed",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new ye("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="directed")throw new ye('MultiDirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class b6 extends Pt{constructor(e){const n=xn({type:"undirected",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new ye("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="undirected")throw new ye('MultiUndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}function zd(t){t.from=function(e,n){const i=xn({},e.options,n),r=new t(i);return r.import(e),r}}zd(Pt);zd(g6);zd(IC);zd(v6);zd(y6);zd(b6);Pt.Graph=Pt;Pt.DirectedGraph=g6;Pt.UndirectedGraph=IC;Pt.MultiGraph=v6;Pt.MultiDirectedGraph=y6;Pt.MultiUndirectedGraph=b6;Pt.InvalidArgumentsGraphError=ye;Pt.NotFoundGraphError=ue;Pt.UsageGraphError=$e;var nre=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"},w6=sb,ire=w6.ARRAY_BUFFER_SUPPORT,rre=w6.SYMBOL_SUPPORT,sre=function(e,n){var i,r,s,o,a;if(!e)throw new Error("obliterator/forEach: invalid iterable.");if(typeof n!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(e)||ire&&ArrayBuffer.isView(e)||typeof e=="string"||e.toString()==="[object Arguments]"){for(s=0,o=e.length;s<o;s++)n(e[s],s);return}if(typeof e.forEach=="function"){e.forEach(n);return}if(rre&&Symbol.iterator in e&&typeof e.next!="function"&&(e=e[Symbol.iterator]()),typeof e.next=="function"){for(i=e,s=0;a=i.next(),a.done!==!0;)n(a.value,s),s++;return}for(r in e)e.hasOwnProperty(r)&&n(e[r],r)},x6=rb,ore=sre;function pn(){this.clear()}pn.prototype.clear=function(){this.items=[],this.offset=0,this.size=0};pn.prototype.enqueue=function(t){return this.items.push(t),++this.size};pn.prototype.dequeue=function(){if(this.size){var t=this.items[this.offset];return++this.offset*2>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,t}};pn.prototype.peek=function(){if(this.size)return this.items[this.offset]};pn.prototype.forEach=function(t,e){e=arguments.length>1?e:this;for(var n=this.offset,i=0,r=this.items.length;n<r;n++,i++)t.call(e,this.items[n],i,this)};pn.prototype.toArray=function(){return this.items.slice(this.offset)};pn.prototype.values=function(){var t=this.items,e=this.offset;return new x6(function(){if(e>=t.length)return{done:!0};var n=t[e];return e++,{value:n,done:!1}})};pn.prototype.entries=function(){var t=this.items,e=this.offset,n=0;return new x6(function(){if(e>=t.length)return{done:!0};var i=t[e];return e++,{value:[n++,i],done:!1}})};typeof Symbol<"u"&&(pn.prototype[Symbol.iterator]=pn.prototype.values);pn.prototype.toString=function(){return this.toArray().join(",")};pn.prototype.toJSON=function(){return this.toArray()};pn.prototype.inspect=function(){var t=this.toArray();return Object.defineProperty(t,"constructor",{value:pn,enumerable:!1}),t};typeof Symbol<"u"&&(pn.prototype[Symbol.for("nodejs.util.inspect.custom")]=pn.prototype.inspect);pn.from=function(t){var e=new pn;return ore(t,function(n){e.enqueue(n)}),e};pn.of=function(){return pn.from(arguments)};var are=function(e,n){var i=n.length;if(i!==0){var r=e.length;e.length+=i;for(var s=0;s<i;s++)e[r+s]=n[s]}},S6=nre,lre=are;function cre(t,e,n){if(!S6(t))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!t.hasNode(e))throw new Error('graphology-shortest-path: the "'+e+'" source node does not exist in the given graph.');if(!t.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" target node does not exist in the given graph.');if(e=""+e,n=""+n,e===n)return[e];var i=t.inboundNeighbors.bind(t),r=t.outboundNeighbors.bind(t),s={},o={};s[e]=null,o[n]=null;var a=[e],l=[n],c,u,d,f,p,m,g,y,v=!1;e:for(;a.length&&l.length;)if(a.length<=l.length){for(c=a,a=[],p=0,g=c.length;p<g;p++)for(u=c[p],d=r(u),m=0,y=d.length;m<y;m++)if(f=d[m],f in s||(a.push(f),s[f]=u),f in o){v=!0;break e}}else for(c=l,l=[],p=0,g=c.length;p<g;p++)for(u=c[p],d=i(u),m=0,y=d.length;m<y;m++)if(f=d[m],f in o||(l.push(f),o[f]=u),f in s){v=!0;break e}if(!v)return null;for(var b=[];f;)b.unshift(f),f=s[f];for(f=o[b[b.length-1]];f;)b.push(f),f=o[f];return b.length?b:null}function k6(t,e,n){if(!S6(e))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!e.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" source node does not exist in the given graph.');n=""+n;var i=new Set,r={},s=0;r[n]=0;for(var o=[n],a,l,c;o.length!==0;){var u=[];for(a=0,l=o.length;a<l;a++)c=o[a],!i.has(c)&&(i.add(c),lre(u,e[t](c)),r[c]=s);s++,o=u}return r}k6.bind(null,"outboundNeighbors");k6.bind(null,"neighbors");var ure=cre;const X=new IC({allowSelfLoops:!1});X.addNode("MBR",{position:[620,250]});X.addNode("AL",{position:[455,45]});X.addNode("BL",{position:[455,85]});X.addNode("CL",{position:[455,125]});X.addNode("DL",{position:[455,165]});X.addNode("id",{position:[451,205]});X.addNode("SP",{position:[451,309]});X.addNode("IP",{position:[451,349]});X.addNode("ri",{position:[451,388]});X.addNode("MAR",{position:[698,349]});X.addNode("result",{position:[272,115]});X.addNode("ALUresult",{position:[370,115]});X.addNode("FLAGS",{position:[250,225]});X.addNode("IR",{position:[205,272]});X.addNode("left",{position:[130,85]});X.addNode("right",{position:[125,145]});X.addNode("rmbr",{position:[250,390]});X.addNode("bleft1",{position:[550,16]});X.addNode("bleft2",{position:[90,16]});X.addNode("bleft3",{position:[90,85]});X.addNode("AL join",{position:[425,45]});X.addNode("BL join",{position:[425,85]});X.addNode("CL join",{position:[425,125]});X.addNode("DL join",{position:[425,165]});X.addNode("id join",{position:[421,205]});X.addNode("data mbr join",{position:[421,250]});X.addNode("SP join",{position:[421,309]});X.addNode("IP join",{position:[421,349]});X.addNode("ri join",{position:[421,388]});X.addNode("MAR join1",{position:[550,388]});X.addNode("MAR join2",{position:[550,349]});X.addNode("addresses mbr join",{position:[421,250]});X.addNode("result mbr join",{position:[370,250]});X.addNode("FLAGS mbr join",{position:[250,250]});X.addNode("IR mbr join",{position:[205,250]});X.addNode("left join",{position:[30,85]});X.addNode("right join",{position:[90,145]});X.addNode("operands mbr join",{position:[90,250]});X.addNode("outr mbr join",{position:[550,250]});X.addNode("mbr reg join",{position:[421,250]});X.addNode("AL out",{position:[465,45]});X.addNode("BL out",{position:[465,85]});X.addNode("CL out",{position:[465,125]});X.addNode("DL out",{position:[465,165]});X.addNode("id out",{position:[460,205]});X.addNode("SP out",{position:[510,309]});X.addNode("IP out",{position:[510,349]});X.addNode("AL out join",{position:[550,45]});X.addNode("BL out join",{position:[550,85]});X.addNode("CL out join",{position:[550,125]});X.addNode("DL out join",{position:[550,165]});X.addNode("id out join",{position:[550,205]});X.addNode("SP out join",{position:[550,309]});X.addNode("IP out join",{position:[550,349]});X.addNode("ri out join",{position:[550,388]});X.addUndirectedEdge("AL","AL out");X.addUndirectedEdge("BL","BL out");X.addUndirectedEdge("CL","CL out");X.addUndirectedEdge("DL","DL out");X.addUndirectedEdge("id","id out");X.addUndirectedEdge("IP","IP out");X.addUndirectedEdge("SP","SP out");X.addUndirectedEdge("AL out","AL out join");X.addUndirectedEdge("BL out","BL out join");X.addUndirectedEdge("CL out","CL out join");X.addUndirectedEdge("DL out","DL out join");X.addUndirectedEdge("id out","id out join");X.addUndirectedEdge("AL out join","outr mbr join");X.addUndirectedEdge("BL out join","outr mbr join");X.addUndirectedEdge("CL out join","outr mbr join");X.addUndirectedEdge("DL out join","outr mbr join");X.addUndirectedEdge("id out join","outr mbr join");X.addUndirectedEdge("AL out join","bleft1");X.addUndirectedEdge("BL out join","bleft1");X.addUndirectedEdge("CL out join","bleft1");X.addUndirectedEdge("DL out join","bleft1");X.addUndirectedEdge("id out join","bleft1");X.addUndirectedEdge("bleft1","bleft2");X.addUndirectedEdge("bleft2","bleft3");X.addUndirectedEdge("bleft3","left");X.addUndirectedEdge("IP out join","outr mbr join");X.addUndirectedEdge("ri out join","outr mbr join");X.addUndirectedEdge("SP out join","outr mbr join");X.addUndirectedEdge("SP out join","MAR join2");X.addUndirectedEdge("outr mbr join","mbr reg join");X.addUndirectedEdge("MBR","outr mbr join");X.addUndirectedEdge("mbr reg join","AL join");X.addUndirectedEdge("mbr reg join","BL join");X.addUndirectedEdge("mbr reg join","CL join");X.addUndirectedEdge("mbr reg join","DL join");X.addUndirectedEdge("mbr reg join","id join");X.addUndirectedEdge("outr mbr join","operands mbr join");X.addUndirectedEdge("AL join","AL");X.addUndirectedEdge("BL join","BL");X.addUndirectedEdge("CL join","CL");X.addUndirectedEdge("DL join","DL");X.addUndirectedEdge("id join","data mbr join");X.addUndirectedEdge("MBR","data mbr join");X.addUndirectedEdge("IP","IP join");X.addUndirectedEdge("SP","SP join");X.addUndirectedEdge("ri","ri join");X.addUndirectedEdge("MAR join1","ri");X.addUndirectedEdge("MAR join2","MAR join1");X.addUndirectedEdge("MAR","MAR join2");X.addUndirectedEdge("IP join","SP join");X.addUndirectedEdge("SP join","ri join");X.addUndirectedEdge("IP join","addresses mbr join");X.addUndirectedEdge("addresses mbr join","data mbr join");X.addUndirectedEdge("result","ALUresult");X.addUndirectedEdge("ALUresult","result mbr join");X.addUndirectedEdge("result mbr join","addresses mbr join");X.addUndirectedEdge("FLAGS","FLAGS mbr join");X.addUndirectedEdge("FLAGS mbr join","result mbr join");X.addUndirectedEdge("IR","IR mbr join");X.addUndirectedEdge("IR mbr join","FLAGS mbr join");X.addUndirectedEdge("left","left join");X.addUndirectedEdge("right","right join");X.addUndirectedEdge("left join","right join");X.addUndirectedEdge("right join","operands mbr join");function dre(t,e,n,i){const r=f=>f.replace(/\.(l|h)$/,""),s=r(t),o=r(e);if(console.log("from:",t,"normalized:",s),console.log("to:",e,"normalized:",o),!X.hasNode(s))return console.warn(`Nodo origen '${s}' no existe en el grafo`),"";if(!X.hasNode(o))return console.warn(`Nodo destino '${o}' no existe en el grafo`),"";const a=(f,p)=>p==="left"?[f,"bleft1","bleft2","bleft3","left",`${f} out`,`${f} out join`,"outr mbr join","mbr reg join",`${p} join`,p]:[f,`${f} out`,`${f} out join`,"outr mbr join","mbr reg join",`${p} join`,p];let l=[];const c=["AL","BL","CL","DL","id"];if(s==="MBR"&&o==="left")l=["MBR","outr mbr join","bleft1","bleft2","bleft3","left"];else if(s==="MBR"&&o==="ri")l=["MBR","outr mbr join","SP out join","MAR join2","MAR"];else if(s==="MBR"&&c.includes(o))l=["MBR","mbr reg join",`${o} join`,o];else if(c.includes(s)&&c.includes(o))l=a(s,o);else if(s==="IP"&&o==="id")l=["IP out","IP out join","outr mbr join","mbr reg join","id join","id"];else if(s==="id"&&o==="ri")l=["id out","id out join","outr mbr join","MAR join2","MAR"];else if(s==="BL"&&o==="ri")l=["BL out","BL out join","outr mbr join","MAR join2","MAR"];else if(s==="id"&&o==="MBR")l=["id out","id out join","outr mbr join","MBR"];else if(s==="id"&&o==="IP"&&n==="RET")l=["MBR","mbr reg join","IP join","IP"];else try{l=ure(X,s,o)||[]}catch(f){return console.warn(`Error calculando ruta de ${s} a ${o}:`,f),""}if(s==="ri"&&o==="IP"&&(l=["MBR","mbr reg join","IP join","IP"]),s==="ri"&&o==="IP"&&n==="CALL"&&(l=["ri","ri out join","outr mbr join","mbr reg join","IP join","IP"]),s==="MBR"&&o==="ri"&&["JMP","JZ","JC"].includes(n??""))return"";if(s==="MBR"&&o==="ri"&&n==="CALL"&&(l=["MBR","mbr reg join","ri join","ri"]),s==="MBR"&&o==="ri"&&(n==="MOV"||n==="INT")&&i==="mem<-imd"&&(l=["MBR","mbr reg join","ri join","ri"]),s==="IP"&&o==="MBR"&&(n==="INT"||n==="CALL"))return"M 510 349 H 550 V 250 H 620";if(s==="MBR"&&o==="ri"&&i==="mem<-imd"&&(n==="ADD"||n==="SUB")&&(l=["MBR","mbr reg join","ri join","ri"]),l.length===0)return console.warn(`No se encontró ruta de ${s} a ${o}`),"";const u=X.getNodeAttribute(l[0],"position");let d=`M ${u[0]} ${u[1]}`;for(let f=1;f<l.length;f++){const[p,m]=X.getNodeAttribute(l[f],"position");d+=` L ${p} ${m}`}return d}function fre({showSP:t,showid:e,showri:n}){const{path:i,...r}=mt("cpu.internalBus.data");return h.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[h.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:["M 220 145 H 90","V 250 H 630","M 90 145 H 90","M 272 115 H 370 V 250","M 250 225 V 250","M 250 145 v 46","M 205 250 V 272","M 205 300 V 320","M 430 349 H 421","V 250","M 451 349 H 421",t?"M 451 309 H 421":"M 451 309",n?"M 470 388 H 421 V 300":"","M 455 45 H 425","V 250","M 455 85 H 425","M 455 125 H 425","M 455 165 H 425",e?"M 455 205 H 425":"","M 550 45 H 465","M 550 85 H 465","M 550 125 H 465","M 550 165 H 465",e?"M 550 205 H 460":"",n?"M 550 388 H 480":"","M 550 40 V 250","M 550 45 V 16 H 90 V 84 H 220"].join(" ")}),h.jsx(an.path,{d:i,className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:r})]})}const iM=(t,e,n,i)=>{try{const r=dre(t,e,n,i);return r?Ke([{key:"cpu.internalBus.data.path",from:r},{key:"cpu.internalBus.data.opacity",from:1},{key:"cpu.internalBus.data.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"}):Promise.resolve()}catch(r){return console.warn("Error en drawDataPath:",r),Promise.resolve()}},rM=()=>Ke({key:"cpu.internalBus.data.opacity",to:0},{duration:1,easing:"easeInSine"});let jl="",f1="",h1=!1,sg=!1,og=0;async function hre(t){switch(t.type){case"cpu:alu.execute":{const e={duration:3,easing:"easeInOutSine"};await Ke([{key:"cpu.alu.operands.opacity",from:1},{key:"cpu.alu.operands.strokeDashoffset",from:1,to:0}],e),z.set(VL,t.operation),await Promise.all([Ke({key:"cpu.alu.operation.backgroundColor",to:Ht.mantis[400]},{duration:1,easing:"easeOutQuart"}),Ke({key:"cpu.alu.cog.rot",to:6},{duration:10,easing:"easeInOutCubic"})]),await Promise.all([Ke({key:"cpu.alu.operation.backgroundColor",to:Ht.stone[800]},{duration:1,easing:"easeOutQuart"}),Ke([{key:"cpu.alu.results.opacity",from:1},{key:"cpu.alu.results.strokeDashoffset",from:1,to:0}],e)]),await Promise.all([er("cpu.result"),er("cpu.FLAGS")]),z.set(Ye.FLAGS,t.flags),z.set(Ye.result,t.result),await Promise.all([Er("cpu.result"),Er("cpu.FLAGS")]),await Ke([{key:"cpu.alu.operands.opacity",to:0},{key:"cpu.alu.results.opacity",to:0}],{duration:1,easing:"easeInSine"});return}case"cpu:cycle.end":return;case"cpu:cycle.interrupt":{z.set(es,e=>"metadata"in e?{...e,phase:"interrupt"}:e),await Ke([{key:"cpu.id.opacity",to:0},{key:"cpu.ri.opacity",to:0}],{duration:.5,easing:"easeInOutQuad"});return}case"cpu:cycle.start":{jl=t.instruction.name,f1=t.instruction.willUse.ri?"mem<-imd":"",h1=!!(t.instruction.willUse.ri&&jl==="MOV"),sg=!!(t.instruction.willUse.ri&&(jl==="ADD"||jl==="SUB"||jl==="INT")),og=0,y8(t.instruction.position.start),z.set(es,{phase:"fetching",metadata:t.instruction}),await Ke([{key:"cpu.id.opacity",to:t.instruction.willUse.id?1:0},{key:"cpu.ri.opacity",to:t.instruction.willUse.ri?1:0}],{duration:.5,easing:"easeInOutQuad"});return}case"cpu:cycle.update":{z.set(es,e=>"metadata"in e?{...e,phase:t.phase==="execute"?"executing":t.phase==="writeback"?"writeback":t.next==="fetch-operands"?"fetching-operands":t.next==="execute"?"executing":t.next==="writeback"?"writeback":e.phase}:e);return}case"cpu:decode":{await Ke([{key:"cpu.decoder.path.opacity",from:1},{key:"cpu.decoder.path.strokeDashoffset",from:1,to:0}],{duration:3,easing:"easeInOutSine"}),await Ke([{key:"cpu.decoder.progress.opacity",from:1},{key:"cpu.decoder.progress.progress",from:0,to:1}],{duration:3,easing:"easeInOutSine"}),await Ke([{key:"cpu.decoder.path.opacity",to:0},{key:"cpu.decoder.progress.opacity",to:0}],{duration:1,easing:"easeInSine"});return}case"cpu:error":{z.set(es,{phase:"stopped",error:t.error}),Tc(t.error);return}case"cpu:halt":case"cpu:int.0":{z.set(es,{phase:"stopped"}),Tc();return}case"cpu:int.3":{Pn();return}case"cpu:int.6":{z.set(es,{phase:"int6"});return}case"cpu:int.7":{z.set(es,{phase:"int7"});return}case"cpu:inta.off":{await ii("bus.inta");return}case"cpu:inta.on":{await zi("bus.inta",10);return}case"cpu:rd.on":case"cpu:wr.on":{const e=t.type.slice(4,6);await zi(`bus.${e}`,10);return}case"cpu:iom.on":{await zi("bus.iom",15);return}case"cpu:mar.set":{og++,console.log("countersetMAR",og),og===4&&sg&&(h1=!0,sg=!1),await Ke([{key:"cpu.internalBus.address.path",from:One(t.register,h1,sg)},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"}),await er("cpu.MAR",Ht.blue[500]),z.set(zL,z.get(Ye[t.register])),await Promise.all([Er("cpu.MAR"),Ke({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"})]);return}case"cpu:mbr.get":{const e=t.register.replace(/\.(l|h)$/,"");await iM("MBR",e,jl,f1),z.set(Ye[t.register],z.get(Zh)),e==="IR"?await h0(`cpu.${e}`):(await er(`cpu.${e}`),await Er(`cpu.${e}`)),await rM();return}case"cpu:mbr.set":{const e=t.register.replace(/\.(l|h)$/,"");await er("cpu.MBR"),await iM(e,"MBR",jl,f1),await er("cpu.MBR"),z.set(Zh,z.get(Ye[t.register])),await Promise.all([Er("cpu.MBR"),rM()]);return}case"cpu:register.copy":{await er(`cpu.${t.dest}`),z.set(Ye[t.dest],z.get(Ye[t.src])),await Er(`cpu.${t.dest}`);return}case"cpu:register.update":{const[e]=KS(t.register),n=e==="ri"?"cpu.ri":`cpu.${e}`;e==="IP"?await Promise.all([h0(n),new Promise(i=>{window.dispatchEvent(new CustomEvent("ip-register-update")),i()})]):await h0(n),z.set(Ye[t.register],t.value);return}default:return t}}async function pre(t){switch(t.type){case"f10:press":await zi("bus.int0",2),await ii("bus.int0");return;default:return t.type}}const DC=de(F.zero(8)),LC=de(F.zero(8));function mre(t){t.io.handshake&&(z.set(DC,F.fromUnsigned(t.io.handshake.DATA,8)),z.set(LC,F.fromUnsigned(t.io.handshake.STATE,8)))}async function gre(t){switch(t.type){case"handshake:read":return;case"handshake:read.ok":{await vp(t.value);return}case"handshake:write":case"handshake:register.update":{switch(await er(`handshake.${t.register}`),t.register){case"DATA":{z.set(DC,t.value);break}case"STATE":{z.set(LC,t.value);break}default:return t.register}await Er(`handshake.${t.register}`);return}case"handshake:write.ok":return;case"handshake:int.off":{await ii("bus.int2");return}case"handshake:int.on":{await zi("bus.int2",10);return}default:return t}}async function vre(t){switch(t.type){case"keyboard:listen-key":{z.set(ln,e=>e.type!=="running"||e.waitingForInput?e:{...e,waitingForInput:!0}),await new Promise(e=>{z.sub(ln,()=>{const n=z.get(ln);(n.type!=="running"||!n.waitingForInput)&&e()})});return}case"keyboard:read":return;default:return t}}const jC=de(F.zero(8));function yre(t){t.io.leds!==null&&z.set(jC,F.fromUnsigned(t.io.leds,8))}async function bre(t){switch(t.type){case"leds:update":{await zi("bus.pio->leds",2),z.set(jC,t.state),await ii("bus.pio->leds");return}default:return t.type}}function wre(t){return t==="memory-to-mbr"?"M 800 249 L 629 249":"M 629 249 L 800 249"}const sM=t=>{try{const e=wre(t);return e?Ke([{key:"bus.data.path",from:e},{key:"bus.data.opacity",from:1},{key:"bus.data.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"}):Promise.resolve()}catch(e){return console.warn("Error en drawExternalDataPath:",e),Promise.resolve()}},oM=()=>Ke({key:"bus.data.opacity",to:0},{duration:1,easing:"easeInSine"});function xre(){return"M 659 349 H 800"}const aM=()=>{try{const t=xre();return Ke([{key:"bus.address.path",from:t},{key:"bus.address.opacity",from:1},{key:"bus.address.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"})}catch(t){return console.warn("Error en drawExternalAddressPath:",t),Promise.resolve()}},lM=()=>Ke({key:"bus.address.opacity",to:0},{duration:1,easing:"easeInSine"}),Sre=()=>{try{return Ke([{key:"bus.rd.path",from:"M 380 420 H 800"},{key:"bus.rd.opacity",from:1},{key:"bus.rd.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"})}catch(t){return console.warn("Error en drawRDControlPath:",t),Promise.resolve()}},kre=()=>{try{return Ke([{key:"bus.wr.path",from:"M 380 440 H 800"},{key:"bus.wr.opacity",from:1},{key:"bus.wr.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"})}catch(t){return console.warn("Error en drawWRControlPath:",t),Promise.resolve()}},cM=()=>Ke({key:"bus.rd.opacity",to:0},{duration:1,easing:"easeInSine"}),uM=()=>Ke({key:"bus.wr.opacity",to:0},{duration:1,easing:"easeInSine"});async function _re(t){switch(t.type){case"memory:read":{await aM(),Ane(),await Sre(),Nne();return}case"memory:read.ok":{z.set(Qh,Se.from(t.address)),await Ke({key:"memory.operating-cell.color",to:Ht.mantis[400]},{duration:1,easing:"easeOutQuart"}),await sM("memory-to-mbr"),z.set(Zh,t.value),await h0("cpu.MBR"),await Promise.all([Ke({key:"memory.operating-cell.color",to:Ht.white},{duration:1,easing:"easeOutQuart"}),oM(),lM(),cM(),uM()]);return}case"memory:write":{await aM(),Pne(),await kre(),Mne();return}case"memory:write.ok":{z.set(Qh,Se.from(t.address)),await er("cpu.MBR"),await sM("mbr-to-memory"),await Ke({key:"memory.operating-cell.color",to:Ht.mantis[400]},{duration:1,easing:"easeOutQuart"}),z.set(vv,e=>[...e.slice(0,t.address.value),t.value,...e.slice(t.address.value+1)]),await Promise.all([Er("cpu.MBR"),Ke({key:"memory.operating-cell.color",to:Ht.white},{duration:1,easing:"easeOutQuart"}),oM(),lM(),cM(),uM()]);return}case"memory:read.error":case"memory:write.error":{Tc(t.error);return}case"memory:write.warning":{gi({title:"Advertencia de Memoria",description:`${t.warning}`,variant:"info"});return}default:return t}}const $C=de(F.fromUnsigned(255,8)),FC=de(F.fromUnsigned(0,8)),BC=de(F.fromUnsigned(0,8)),Ov=[de(F.zero(8)),de(F.zero(8)),de(F.zero(8)),de(F.zero(8)),de(F.zero(8)),de(F.zero(8)),de(F.zero(8)),de(F.zero(8))];function Cre(t){if(t.io.pic){z.set($C,F.fromUnsigned(t.io.pic.IMR,8)),z.set(FC,F.fromUnsigned(t.io.pic.IRR,8)),z.set(BC,F.fromUnsigned(t.io.pic.ISR,8));for(let e=0;e<Ov.length;e++)z.set(Ov[e],F.fromUnsigned(t.io.pic.lines[e],8))}}async function Ere(t){switch(t.type){case"pic:read":return;case"pic:read.ok":{await vp(t.value);return}case"pic:write":return;case"pic:register.update":{switch(await er(`pic.${t.register}`),t.register){case"IMR":{z.set($C,t.value);break}case"IRR":{z.set(FC,t.value);break}case"ISR":{z.set(BC,t.value);break}case"INT0":case"INT1":case"INT2":case"INT3":case"INT4":case"INT5":case"INT6":case"INT7":{const e=Number(t.register.slice(3));z.set(Ov[e],t.value);break}default:return t}await Er(`pic.${t.register}`);return}case"pic:write.ok":return;case"pic:intr.off":{await ii("bus.intr");return}case"pic:intr.on":{await zi("bus.intr",10);return}case"pic:int.send":{await vp(t.number);return}default:return t}}const zC=de(F.zero(8)),UC=de(F.zero(8)),VC=de(F.zero(8)),HC=de(F.zero(8));function Are(t){t.io.pio&&(z.set(zC,F.fromUnsigned(t.io.pio.PA,8)),z.set(UC,F.fromUnsigned(t.io.pio.PB,8)),z.set(VC,F.fromUnsigned(t.io.pio.CA,8)),z.set(HC,F.fromUnsigned(t.io.pio.CB,8)))}async function Nre(t){switch(t.type){case"pio:read":return;case"pio:read.ok":{await vp(t.value);return}case"pio:write":return;case"pio:register.update":{switch(await er(`pio.${t.register}`),t.register){case"PA":{z.set(zC,t.value);break}case"PB":{z.set(UC,t.value);break}case"CA":{z.set(VC,t.value);break}case"CB":{z.set(HC,t.value);break}default:return t.register}await Er(`pio.${t.register}`);return}case"pio:write.ok":return;default:return t}}const Iv=de([]),Dv=de("");function Pre(t){t.io.printer&&(z.set(Iv,t.io.printer.buffer.map(e=>F.fromUnsigned(e,8))),z.set(Dv,t.io.printer.paper))}async function Mre(t){switch(t.type){case"printer:buffer.add":{z.set(Iv,e=>[...e,t.char]);return}case"printer:buffer.pop":{z.set(Iv,e=>e.slice(1));return}case"printer:busy.off":{await ii("bus.printer.busy");return}case"printer:busy.on":{await zi("bus.printer.busy",15);return}case"printer:data.read":{await zi("bus.printer.data",15),await ii("bus.printer.data");return}case"printer:paper.print":{z.set(Dv,e=>e+t.char);return}case"printer:paper.replace":{z.set(Dv,"");return}case"printer:strobe.off":{await ii("bus.printer.strobe");return}case"printer:strobe.on":{await zi("bus.printer.strobe",15);return}default:return t}}const WC=de("");function Tre(t){"screen"in t.io&&t.io.screen!==null&&z.set(WC,t.io.screen)}async function Rre(t){switch(t.type){case"screen:send-char":{z.set(WC,t.output);return}default:return t.type}}const ab=de(F.zero(8));function Ore(t){t.io.switches!==null&&z.set(ab,F.fromUnsigned(t.io.switches,8))}async function Ire(t){switch(t.type){case"switches:toggle":{z.set(ab,e=>e.withBit(t.index,!e.bit(t.index))),await zi("bus.switches->pio",2),await ii("bus.switches->pio");return}default:return t}}const Lv=de(F.zero(8)),GC=de(F.zero(8));function Dre(t){t.io.timer&&(z.set(Lv,F.fromUnsigned(t.io.timer.CONT,8)),z.set(GC,F.fromUnsigned(t.io.timer.COMP,8)))}async function Lre(t){switch(t.type){case"timer:read":return;case"timer:read.ok":{await vp(t.value);return}case"timer:write":return;case"timer:register.update":{switch(await er(`timer.${t.register}`),t.register){case"CONT":{z.set(Lv,t.value);break}case"COMP":{z.set(GC,t.value);break}default:return t.register}await Er(`timer.${t.register}`);return}case"timer:write.ok":return;case"timer:int.off":{await ii("bus.int1");return}case"timer:int.on":{await zi("bus.int1",10);return}case"timer:tick":{z.set(Lv,t.cont),await zi("bus.int1",2),await ii("bus.int1");return}default:return t}}const F2=new Set;async function _6(t){$re(t);const[e]=t.type.split(":",2);switch(F2.add(t.type),e){case"bus":{await Tne(t);break}case"clock":{await Rne(t);break}case"cpu":{await hre(t);break}case"f10":{await pre(t);break}case"handshake":{await gre(t);break}case"keyboard":{await vre(t);break}case"leds":{await bre(t);break}case"memory":{await _re(t);break}case"pic":{await Ere(t);break}case"pio":{await Nre(t);break}case"printer":{await Mre(t);break}case"screen":{await Rre(t);break}case"switches":{await Ire(t);break}case"timer":{await Lre(t);break}default:return e}F2.delete(t.type)}function dM(...t){for(const e of t)if(F2.has(e))return!0;return!1}const jre={bus:"#2563eb",clock:"#65a30d",cpu:"#dc2626",f10:"#65a30d",handshake:"#2563eb",keyboard:"#65a30d",leds:"#65a30d",memory:"#f59e0b",pic:"#2563eb",pio:"#2563eb",printer:"#65a30d",screen:"#65a30d",switches:"#65a30d",timer:"#2563eb"};function $re(t){const[e,n]=t.type.split(":",2);console.group(`%c ${e} %c ${n}`,`background: ${jre[e]}; color: #fff; font-weight: bold;`,"background: unset; color: unset; font-weight: normal;");for(const i in t)if(i!=="type"&&Object.prototype.hasOwnProperty.call(t,i)){const r=t[i];r instanceof F?console.log(`${i}: %c${r.toString("hex")}h %c(Byte)`,"color: #8b5cf6;","color: #737373;"):r instanceof Se?console.log(`${i}: %c${r.toString()} %c(MemoryAddress)`,"color: #8b5cf6;","color: #737373;"):r instanceof hr?console.log(`${i}: %c${r.toString()} %c(IOAddress)`,"color: #8b5cf6;","color: #737373;"):typeof r=="number"?console.log(`${i}: %c${r.toString(16)}h %c(number)`,"color: #8b5cf6;","color: #737373;"):typeof r=="string"?console.log(`${i}: %c"${r}" %c(string)`,"color: #f97316;","color: #737373;"):typeof r=="boolean"?console.log(`${i}: %c${r}`,"color: #06b6d4;"):r===null?console.log(`${i}: %cnull`,"color: #b91c1c;"):console.log(`${i}:`,r)}console.groupEnd()}const cn=new XJ,ln=de({type:"stopped"});function Fre(t){const e=t.translate(yn().language);gi({title:e,variant:"error"})}function Tc(t){if(t&&(Fre(t),t.code==="no-instruction")){z.set(ln,{type:"paused"});return}Zee(),y8(null),qee(!1),z.set(ln,{type:"stopped",error:t}),z.set(es,{phase:"stopped",error:t}),q8()}function Pn(){z.set(ln,{type:"paused"}),kne()}function Bre(){gi({title:By(yn().language,"messages.assemble-error"),variant:"error"})}function Jc(){gi({title:By(yn().language,"messages.invalid-action"),variant:"error"})}function fM(t,e=!1){QJ(t,e),nZ(t,e),mre(t),Cre(t),Are(t),Dre(t),yre(t),Pre(t),Tre(t),Ore(t),gn=0,fc=0,z.set(kd,gn),z.set(Hy,fc),z.set(gt,""),e&&z.set(gv,[])}let me=null,$l=0,et=0,Fl="",lo=!0,p1=!1,En=!1,gn=0,fc=0,Bl="",hM="",pM="",yf=!1,ag=!1,lg="",mM="";async function Zl(t){try{for(;;){const e=z.get(ln);if(z.get(Ev)){console.log("El programa ha sido modificado. Deteniendo y recargando..."),z.set(Ev,!1),Tc();break}if(e.type==="stopped"){$l=0,et=0,Fl="";break}if(e.type==="paused"){await new Promise(s=>{const o=z.sub(ln,()=>{o(),s()})});continue}const i=t.next();if(i.done)break;if(i.value&&typeof i.value<"u")await _6(i.value);else continue;if(i.value.type==="cpu:cycle.start"&&(me=i.value.instruction.name,p1=!!i.value.instruction.willUse.id,En=!!i.value.instruction.willUse.ri,z.set(ZJ,En),yf=!1,ag=!1,lg=""),e.until==="cycle-change"||e.until==="end-of-instruction"||e.until==="infinity"){if(i.value.type==="cpu:cycle.end"||i.value.type==="cpu:halt"){$l=0,et=0,lo=!0,Fl="",fc++,console.log(`Instrucciones: ${fc}`),z.set(Hy,fc),i.value.type==="cpu:halt"?(gn++,z.set(kd,gn),z.set(gt,"Ejecución: Detenido")):(e.until==="cycle-change"||e.until==="end-of-instruction")&&Pn();continue}else i.value.type==="cpu:int.6"?z.set(gt,"Interrupción: Rutina leer caracter del teclado"):i.value.type==="cpu:int.7"&&(z.set(gt,"Interrupción: Rutina mostrar por pantalla"),e.until==="cycle-change"&&Pn());if($l<3)i.value.type==="cpu:mar.set"?(i.value.register==="SP"?($l=3,et=3,z.set(gt,"Ejecución: MAR ← SP")):(z.set(gt,"Captación: MAR ← IP"),et++),e.until==="cycle-change"&&Pn(),$l++,gn++):i.value.type==="cpu:register.update"?(z.set(gt,"Captación: MBR ← read(Memoria[MAR]); IP ← IP + 1"),e.until==="cycle-change"&&Pn(),et++,$l++,gn++):i.value.type==="cpu:mbr.get"&&(z.set(gt,"Captación: IR ← MBR"),e.until==="cycle-change"&&Pn(),$l++,gn++);else if(i.value.type==="cpu:rd.on"&&et>1?Fl="Ejecución: MBR ← read(Memoria[MAR])":i.value.type==="cpu:wr.on"?Fl="Ejecución: write(Memoria[MAR]) ← MBR":i.value.type==="pio:write.ok"&&(z.set(gt,"Ejecución: write(PIO[MAR]) ← MBR"),et++,gn++),i.value.type==="cpu:mar.set"){const s=i.value.register,o=s==="ri"?"MBR":s;let a=!1,l=!1;En&&et===5&&(me==="ADD"||me==="SUB")&&(a=!0),En&&et===9&&(a=!0),En&&et===2&&(me==="ADD"||me==="SUB")&&(l=!0),console.log("executeStageCounter:",et),console.log("mbridirmar:",yf),console.log("resultmbrimar:",ag),console.log("displayMessageresultmbr:",lg),console.log("shouldDisplayMessage:",lo),(lo||s==="SP")&&(ag?z.set(gt,lg):a?z.set(gt,`Ejecución: MAR ← ${s}`):l?z.set(gt,"Ejecución: ri ← MBR; MAR ← MBR"):et===2&&En&&me==="MOV"?z.set(gt,"Ejecución: ri ← MBR; MAR ← IP"):et===4&&En&&me==="MOV"?z.set(gt,`Ejecución: MAR ← ${s}`):yf?z.set(gt,"Ejecución: id ← MBR; MAR ← IP"):et===2&&En&&me==="INT"?z.set(gt,"Ejecución: ri ← MBR; MAR ← SP"):z.set(gt,`Ejecución: MAR ← ${o}`)),e.until==="cycle-change"&&Pn(),et++,gn++}else if(i.value.type==="cpu:register.update"){const s=i.value.register;let o="";lo=!0;let a=!0;s==="SP"?(En&&et===4&&me==="INT"&&(a=!1,lo=!1),me==="PUSH"&&(o="Ejecución: SP = SP - 1"),(me==="RET"||me==="IRET")&&(o="Ejecución: SP = SP + 1"),et===3&&me==="POP"&&(o=mM+"; SP = SP + 1")):s==="FLAGS"?(o="Ejecución: IF = 0",En&&et===5&&me==="INT"&&(o="Ejecución: write(Memoria[MAR]) ← MBR; SP ← SP - 1; IF = 0")):s==="DL"&&me==="INT"?o="Interrupción: AL ← ASCII":s==="right.l"&&me==="INT"?o="Interrupción: SUB AL, 1":s==="right"&&me==="INT"?o="Interrupción: ADD BL, 1":s==="ri.l"&&me==="INT"?(o="Interrupción: MAR ← (video)",lo=!1):En&&et===3&&me==="MOV"?(o="Ejecución: MBR ← read(Memoria[MAR]); IP ← IP + 1; MAR ← ri",a=!1,lo=!1):et===4&&me==="CALL"?a=!1:o=s==="IP"?"Ejecución: MBR ← read(Memoria[MAR]); IP ← IP + 1":`Ejecución: MBR ← ${s}`,En&&et===8&&me==="INT"&&(o="Ejecución: write(Memoria[MAR]) ← MBR; SP ← SP - 1"),et===2&&me==="CALL"&&(o="Ejecución: ri ← MBR; SP ← SP - 1"),et===4&&me==="CALL"&&(o="Ejecución: write(Memoria[MAR]) ← MBR; SP ← SP - 1"),console.log("displayMessage:",o),console.log("currentInstructionName:",me),console.log("currentInstructionModeri:",En),console.log("executeStageCounter:",et),console.log("pause:",a),et++,me!=="DEC"&&me!=="INC"&&me!=="NOT"&&me!=="NEG"&&!(me==="INT"&&et===5)&&(z.set(gt,o),gn++),o!=="Interrupción: MAR ← (video)"&&e.until==="cycle-change"&&me!=="DEC"&&me!=="INC"&&me!=="NOT"&&me!=="NEG"&&a&&Pn()}else if(i.value.type==="cpu:alu.execute")me==="CMP"&&(z.set(gt,`Ejecución: ${hM} ${me} ${Bl} ; write(FLAGS)`),gn++,e.until==="cycle-change"&&Pn());else if(i.value.type==="cpu:mbr.get"){const s=i.value.register==="id.l"?"id":i.value.register==="IP.l"?"IP":i.value.register==="FLAGS.l"?"FLAGS":i.value.register;(String(s)==="right.l"||String(s)==="left.l")&&(Bl="MBR"),(En&&et===3&&(me==="ADD"||me==="SUB"||me==="CMP")||et===3&&me==="POP")&&(yf=!0),me==="POP"&&et===3&&(mM=`Ejecución: ${s} ← MBR`),yf||String(s)!=="ri.l"&&String(s)!=="right.l"&&String(s)!=="left.l"&&(z.set(gt,`Ejecución: ${s} ← MBR`),gn++,e.until==="cycle-change"&&Pn())}else if(i.value.type==="cpu:register.copy"){const s=i.value.src.replace(/\.l$/,""),o=i.value.dest.replace(/\.l$/,"");let a="";me==="DEC"||me==="INC"||me==="NOT"||me==="NEG"?a=s==="result"?`${me} ${Bl}`:s:(a=s==="result"?`${o} ${me} ${Bl}`:s,pM=`${s} ${me} ${Bl}; write(FLAGS)`),me==="CMP"&&String(o)==="right"&&(Bl=s),me==="CMP"&&String(o)==="left"&&(hM=s);let l=`Ejecución: ${o} ← ${a}`;(me==="ADD"||me==="SUB"||me==="CMP")&&(l+="; write(FLAGS)"),s==="ri"&&o==="IP"?(l="Ejecución: IP ← MBR",me==="CALL"&&(l="Ejecución: IP ← ri"),z.set(gt,l),e.until==="cycle-change"&&Pn()):o==="left"&&me==="INT"?l="ADD BL, 1":s==="result"&&me==="INT"?e.until==="cycle-change"&&Pn():s==="IP"&&o==="id"?(l="Ejecución: id ← IP",z.set(gt,l),e.until==="cycle-change"&&Pn()):s==="id"&&o==="ri"?(l="Ejecución: MAR ← id",lo=!1,z.set(gt,l)):s==="MBR"&&o==="ri"?(l="Ejecución: MAR ← MBR",z.set(gt,l)):s==="id"&&o==="IP"?(l="Ejecución: IP ← MBR",z.set(gt,l),e.until==="cycle-change"&&Pn()):s==="BL"&&o==="ri"||s==="BX"&&o==="ri"?(l="Ejecución: MAR ← BL",z.set(gt,l),lo=!1,et++):String(s)==="right.l"&&(Bl=s),(o!=="result"&&o!=="left"&&o!=="right"&&s!=="result"&&s!=="left"&&s!=="right"||s==="result"&&o!=="MBR")&&(z.set(gt,l),gn++)}else if(i.value.type==="bus:reset"&&et>1&&(me==="MOV"||me==="ADD"||me==="SUB"||me==="CMP"||me==="CALL"||me==="INT"||me==="PUSH"||me==="POP"||me==="IN"||me==="RET")){me==="RET"&&(Fl="Ejecución: MBR ← read(Memoria[MAR])"),me==="IN"&&(Fl="Ejecución: MBR ← read(PIO[MAR])");let s=!1;(En&&(et===4||et===8)&&me==="INT"||En&&et===3&&me==="MOV"||p1&&et===4&&(me==="CALL"||me==="ADD"||me==="SUB"||me==="CMP"))&&(s=!0),console.log("executeStageCounter:",et),s||(z.set(gt,Fl),gn++,e.until==="cycle-change"&&Pn())}else if(i.value.type==="cpu:mbr.set"){const s=i.value.register==="id.l"?"id":i.value.register==="FLAGS.l"?"FLAGS":i.value.register==="IP.l"?"IP":i.value.register==="result.l"?pM:i.value.register;En&&et===5&&(me==="ADD"||me==="SUB")?(ag=!0,lg=`Ejecución: MBR ← ${s} ; MAR ← ri`):(z.set(gt,`Ejecución: MBR ← ${s}`),e.until==="cycle-change"&&Pn(),et++,gn++)}}else z.set(gt,"");console.log(`Ciclos ejecutados: ${gn}`),z.set(kd,gn);const r=new CustomEvent("instructionChange",{detail:{instruction:me,modeid:p1,moderi:En}});window.dispatchEvent(r),i.value.type==="cpu:cycle.update"||i.value.type==="cpu:cycle.interrupt"?e.until:i.value.type==="cpu:cycle.end"&&(e.until==="cycle-change"||e.until==="end-of-instruction")&&Pn()}t.return()}catch(e){const n=qt.from(e);Tc(n)}}async function zre(...t){const e=t[0],n=z.get(ln);switch(e){case"cpu.run":{if(n.type==="running")return Jc();const i=t[1];if(n.type==="stopped"){if(!window.codemirror)return;gn=0,fc=0,z.set(kd,gn),z.set(Hy,fc),z.set(gv,[]);const r=window.codemirror.state.doc.toString(),s=IL(r);if(!s.success)return Bre();const o=s.instructions.map(w=>w.instruction),a=o.some(w=>["CALL","RET","INT","IRET","POP","PUSH"].includes(w));z.set(tC,a);const l=o.includes("INT");z.set(qS,l);const c=s.instructions.some(w=>w.instruction==="INT"?w.operands.some(k=>k.type==="number-expression"&&typeof k.value.value=="number"?k.value.value===6||k.value.value===7:!1):!1),u=s.instructions.some(w=>w.instruction==="IN"||w.instruction==="OUT"?w.operands.some(k=>k.type==="number-expression"&&typeof k.value.value=="number"?k.value.value===48||k.value.value===50:!1):!1),d=s.instructions.some(w=>w.instruction==="IN"||w.instruction==="OUT"?w.operands.some(k=>{if(k.type==="number-expression"){if(typeof k.value.value=="number")return k.value.value>=32&&k.value.value<=43;try{if(k.value&&typeof k.value.resolve=="function"){const _=k.value.resolve();if(typeof _=="number")return _>=32&&_<=43}}catch(_){console.warn("No se pudo resolver operando PIC:",_)}}return!1}):!1),f=s.instructions.some(w=>w.instruction==="IN"||w.instruction==="OUT"?w.operands.some(k=>{if(k.type==="number-expression"){if(typeof k.value.value=="number")return k.value.value===64||k.value.value===65;try{if(k.value&&typeof k.value.resolve=="function"){const _=k.value.resolve();if(typeof _=="number")return _===64||_===65}}catch(_){console.warn("No se pudo resolver operando Handshake:",_)}}return!1}):!1),p=s.instructions.some(w=>w.instruction==="IN"||w.instruction==="OUT"?w.operands.some(k=>{if(k.type==="number-expression"){if(typeof k.value.value=="number")return k.value.value===16||k.value.value===17;try{if(k.value&&typeof k.value.resolve=="function"){const _=k.value.resolve();if(typeof _=="number")return _===16||_===17}}catch(_){console.warn("No se pudo resolver operando Timer:",_)}}return!1}):!1),m=yn();z.set(Hr,w=>({...w,devices:{...w.devices,keyboardAndScreen:c,pio:u?"switches-and-leds":f?"printer":w.devices.pio,handshake:f?"printer":w.devices.handshake,pic:d||w.devices.pic,"switches-and-leds":u}})),z.set(UL,c);const g=l||d||f||p||c;z.set(qS,g),console.log("Detectado - PIC:",d,"Handshake:",f,"Timer:",p,"INT:",l),console.log("Habilitando vector de interrupciones:",g),cn.loadProgram({program:s,data:m.dataOnLoad,devices:{keyboardAndScreen:yn().devices.keyboardAndScreen??!1,pic:yn().devices.pic??!1,pio:yn().devices.pio??null,handshake:yn().devices.handshake??null},hasORG:s.hasORG}),console.log("result:",s);const y=s.instructions.filter(w=>w.type==="instruction").flatMap(w=>{const k=w.operands.map(C=>{if(C.type==="register")return C.value;if(C.type==="number-expression"){const N=C.value;if(N.isNumberLiteral())return N.value.toString(16)+"h";if(N.isLabel())return N.value}else{if(C.type==="indirect-address")return"[BL]";if(C.type==="direct-address"){const N=C.value;if(N.isNumberLiteral())return N.value.toString(16)+"h"}}return""}).join(", "),_=`${w.instruction} ${k}`.trim(),E=[{address:w.start.value,name:_,length:w.length.toString().trim()}];if(w.operands.some(C=>C.type==="number-expression"||C.type==="direct-address")){const C=w.start.value+1,N=w.operands.filter((M,R)=>w.length===3?R===0&&M.type==="number-expression":M.type==="number-expression").map(M=>{if(M.type==="number-expression"){const R=M.value;if(R.isNumberLiteral())return R.value.toString(16)+"h";if(R.isLabel())return R.value}else if(M.type==="direct-address"){const R=M.value;if(R.isNumberLiteral())return R.value.toString(16)+"h"}return""}).join(", ");E.push({address:C,name:N,length:""})}if(w.length===3){const C=w.start.value+2,N=w.operands.filter(M=>M.type==="number-expression").map(M=>{if(M.type==="number-expression"){const R=M.value;if(R.isNumberLiteral())return R.value.toString(16)+"h"}return""}).join(" ");E.push({address:C,name:N,length:""})}return E}),v=s.data.filter(w=>w.type==="data-directive").flatMap(w=>{const k=w.start.value;return w.getValues().map(E=>typeof E=="object"&&E!==null&&"toNumber"in E&&typeof E.toNumber=="function"?E.toNumber():typeof E=="number"?E:0).map((E,C)=>({address:k+C,label:C===0&&w.label||null,value:E}))});console.log("Direcciones de las instrucciones:",y),console.log("Direcciones de los datos:",v),z.set(HL,y),z.set(WL,v.map(w=>({...w,length:""}))),fM(cn.getComputerState());const b=["Start CPU",{until:i,devices:yn().devices,language:yn().language,animations:yn().animations?"yes":"no"}];b8.capture(...b),z.set(ln,{type:"running",until:i,waitingForInput:!1}),Zl(cn.startCPU()),Ure(),Vre()}else z.set(ln,{type:"running",until:i,waitingForInput:!1}),_ne();return}case"cpu.stop":{const i=t[1];i?(Tc(),fM(cn.getComputerState(),i)):Pn();return}case"f10.press":{if(!cn.devices.f10.connected()||n.type!=="running")return Jc();if(dM("f10:press"))return;Zl(cn.devices.f10.press());return}case"switch.toggle":{if(!cn.devices.switches.connected())return Jc();if(dM("switches:toggle"))return;const i=t[1];n.type==="running"?Zl(cn.devices.switches.toggle(i)):z.set(ab,r=>r.withBit(i,!r.bit(i)));return}case"keyboard.sendChar":{if(n.type!=="running"||!n.waitingForInput)return Jc();cn.devices.keyboard.readChar(F.fromChar(t[1])),z.set(ln,{...n,waitingForInput:!1});return}case"screen.clean":{if(!cn.devices.screen.connected())return Jc();Zl(cn.devices.screen.clear());return}case"printer.clean":{if(!cn.devices.printer.connected())return Jc();Zl(cn.devices.printer.clear());return}default:return e}}async function Ure(){if(cn.devices.clock.connected())for(;z.get(ln).type!=="stopped";){const t=yn().clockSpeed;await Ke({key:"clock.angle",from:0,to:360},{duration:t,forceMs:!0,easing:"linear"}),Zl(cn.devices.clock.tick())}}async function Vre(){if(cn.devices.printer.connected()){for(;z.get(ln).type!=="stopped";){const t=yn().printerSpeed;await Ke([{key:"printer.printing.opacity",from:1},{key:"printer.printing.progress",from:0,to:1}],{duration:t,forceMs:!0,easing:"easeInOutSine"}),await Ke({key:"printer.printing.opacity",to:0},{duration:1,easing:"easeInSine"}),await Zl(cn.devices.printer.print())}if(z.get(ln).type==="stopped"&&cn.devices.printer.hasPending())for(;z.get(ln).type!=="stopped"||cn.devices.printer.hasPending();){const t=yn().printerSpeed;await Ke([{key:"printer.printing.opacity",from:1},{key:"printer.printing.progress",from:0,to:1}],{duration:t,forceMs:!0,easing:"easeInOutSine"}),await Ke({key:"printer.printing.opacity",to:0},{duration:1,easing:"easeInSine"});const e=cn.devices.printer.print();let n=e.next();for(;!n.done;)n.value&&typeof n.value<"u"&&await _6(n.value),n=e.next()}}}function On(){const t=at(ln),e=AL(),n=x.useMemo(()=>({hasIOBus:e.pic||e.pio!==null||e.handshake!==null,clock:e.pic,f10:e.pic,keyboard:e.keyboardAndScreen,handshake:e.handshake,leds:e.pio==="switches-and-leds",pic:e.pic,pio:e.pio,printer:e.pio==="printer"||e.handshake==="printer",screen:e.keyboardAndScreen,switches:e.pio==="switches-and-leds",timer:e.pic}),[e]);return{status:t,dispatch:zre,devices:n}}function Hre({className:t}){const e=Rt(),{status:n,dispatch:i}=On(),r=x.useCallback(()=>{n.type!=="running"&&i("cpu.run","cycle-change")},[n.type,i]);ru("F7",d=>{d.preventDefault(),r()},void 0,[r]);const s=x.useCallback(()=>{n.type!=="running"&&i("cpu.run","end-of-instruction")},[n.type,i]);ru("F8",d=>{d.preventDefault(),s()},void 0,[s]);const o=x.useCallback(()=>{n.type!=="running"&&i("cpu.run","infinity")},[n.type,i]);ru("F4",d=>{d.preventDefault(),o()},void 0,[o]);const a=x.useCallback(()=>{n.type==="running"&&i("cpu.stop",!1)},[n.type,i]),l=x.useCallback(()=>{n.type!=="running"&&i("cpu.stop",!0)},[n.type,i]);ru("F9",d=>{d.preventDefault(),l()},void 0,[l]),ru(" ",d=>{const f=d.target;f.tagName==="INPUT"||f.tagName==="TEXTAREA"||f.contentEditable==="true"||(d.preventDefault(),n.type==="running"&&a())},{event:"keydown"},[n.type,a]);const[c,u]=x.useState(!1);return x.useEffect(()=>{const d=()=>{u(window.innerWidth<=600||window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches)};return d(),window.addEventListener("resize",d),()=>window.removeEventListener("resize",d)},[]),h.jsxs("div",{"data-testid":"controls",className:ee("flex items-center justify-center gap-4 rounded-xl border border-stone-700 bg-stone-900/80 px-3 py-1 shadow-lg",t),children:[h.jsxs("button",{"data-testid":"cycle-button",disabled:n.type==="running",onClick:r,title:e("control.action.run.cycle-change"),className:ee("group relative flex flex-col items-center rounded-lg px-1.5 py-0.5 transition hover:bg-mantis-600/20 focus-visible:ring-2 focus-visible:ring-mantis-400 disabled:opacity-50",n.type==="running"&&n.until==="cycle-change"&&"animate-pulse-glow"),children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx(Fe,{icon:vd,size:"lg",className:"text-mantis-400 transition group-hover:scale-110"}),!c&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"F7"})]}),!c&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.run.cycle-change")})]}),h.jsxs("button",{"data-testid":"new-button",disabled:n.type==="running",onClick:s,title:e("control.action.run.end-of-instruction"),className:ee("group relative flex flex-col items-center rounded-lg px-1.5 py-0.5 transition hover:bg-blue-600/20 focus-visible:ring-2 focus-visible:ring-blue-400 disabled:opacity-50",n.type==="running"&&n.until==="end-of-instruction"&&"animate-pulse-glow"),children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx(Fe,{icon:W_,size:"lg",className:"text-blue-400 transition group-hover:scale-110"}),!c&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"F8"})]}),!c&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.run.end-of-instruction")})]}),h.jsxs("button",{"data-testid":"open-button",disabled:n.type==="running",onClick:o,title:e("control.action.run.infinity"),className:ee("group relative flex flex-col items-center rounded-lg px-1.5 py-0.5 transition hover:bg-orange-600/20 focus-visible:ring-2 focus-visible:ring-orange-400 disabled:opacity-50",n.type==="running"&&n.until==="infinity"&&"animate-pulse-glow"),children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx(Fe,{icon:jY,size:"lg",className:"text-orange-400 transition group-hover:scale-110"}),!c&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"F4"})]}),!c&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.run.infinity")})]}),n.type==="running"?h.jsxs("button",{"data-testid":"save-button",onClick:a,title:e("control.action.pause"),className:"group relative flex flex-col items-center rounded-lg px-1.5 py-0.5 transition hover:bg-red-600/20 focus-visible:ring-2 focus-visible:ring-red-400",children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx(Fe,{icon:jy,size:"lg",className:"text-red-400 transition group-hover:scale-110"}),!c&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"F9"})]}),!c&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.pause")})]}):h.jsxs("button",{"data-testid":"assemble-button",onClick:l,disabled:n.type==="stopped",title:e("control.action.reset"),className:"group relative flex flex-col items-center rounded-lg px-1.5 py-0.5 transition hover:bg-red-600/20 focus-visible:ring-2 focus-visible:ring-red-400 disabled:opacity-50",children:[h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsx(Fe,{icon:uL,size:"lg",className:"text-red-400 transition group-hover:scale-110"}),!c&&h.jsx("span",{className:"pointer-events-none ml-1 font-mono text-[10px] text-stone-400 opacity-80",children:"F9"})]}),!c&&h.jsx("span",{className:"mt-0.5 text-xs",children:e("control.action.reset")})]})]})}const C6=x.memo(({currentPhase:t="idle",className:e})=>{const[n,i]=x.useState("idle"),[r,s]=x.useState(!1);x.useEffect(()=>{if(t!=="idle"){i(t);const a=setTimeout(()=>i("idle"),1e3);return()=>clearTimeout(a)}},[t]);const o=[{id:"fetch",label:"Fetch",icon:"📥",description:"Leer instrucción",color:"bg-blue-500",details:{title:"Fase Fetch",description:"La CPU lee la instrucción desde la dirección apuntada por el IP",steps:["IP apunta a la dirección de memoria","MAR recibe la dirección del IP","Se lee el contenido de memoria","MBR almacena la instrucción","IP se incrementa automáticamente"],registers:["IP","MAR","MBR"]}},{id:"decode",label:"Decode",icon:"🔍",description:"Interpretar instrucción",color:"bg-yellow-500",details:{title:"Fase Decode",description:"La CPU interpreta el código de operación y determina la operación a realizar",steps:["IR recibe el código de operación del MBR","Se analiza el opcode","Se identifican los operandos","Se determina el modo de direccionamiento","Se preparan los operandos para la ejecución"],registers:["IR","MBR"]}},{id:"execute",label:"Execute",icon:"⚡",description:"Ejecutar operación",color:"bg-green-500",details:{title:"Fase Execute",description:"La CPU ejecuta la operación especificada y actualiza registros y flags",steps:["ALU recibe los operandos","Se ejecuta la operación aritmética/lógica","Se actualiza el registro destino (AL, BL, CL, DL)","Se actualizan las flags según el resultado","Se completa el ciclo de instrucción"],registers:["ALU","AL/BL/CL/DL","Flags"]}}];return h.jsxs("div",{className:ee("flex flex-col gap-2 rounded-lg border-2 border-mantis-400/50 bg-stone-900/95 p-2 shadow-lg backdrop-blur-sm","min-w-[280px] max-w-[320px]",e),children:[h.jsx("div",{className:"mb-2 flex items-center justify-between",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-xs font-bold uppercase tracking-wide text-mantis-400",children:"Ciclo CPU"}),h.jsx("button",{onClick:()=>s(!r),className:ee("rounded px-2 py-1 text-xs transition-colors",r?"bg-mantis-400/20 text-mantis-400":"text-stone-400 hover:bg-mantis-400/10 hover:text-mantis-400"),children:r?"−":"+"})]})}),h.jsx("div",{className:"flex items-center justify-center gap-2",children:o.map((a,l)=>h.jsxs("div",{className:"flex items-center",children:[h.jsxs("div",{className:ee("flex cursor-pointer flex-col items-center gap-1 rounded px-2 py-1 transition-all duration-300","border border-transparent hover:border-mantis-400/30",t===a.id&&"border-mantis-400 bg-mantis-400/20 shadow-lg",n===a.id&&"animate-pulse"),onClick:()=>{if(r){const c=a.details;alert(`${c.title}

${c.description}

Pasos:
${c.steps.map((u,d)=>`${d+1}. ${u}`).join(`
`)}

Registros involucrados: ${c.registers.join(", ")}`)}},children:[h.jsx("div",{className:ee("text-lg transition-transform duration-300",t===a.id&&"scale-110"),children:a.icon}),h.jsx("span",{className:ee("text-xs font-bold uppercase tracking-wide transition-colors",t===a.id?"text-mantis-400":"text-stone-400"),children:a.label}),h.jsx("span",{className:"max-w-16 text-center text-[9px] leading-tight text-stone-500",children:a.description})]}),l<o.length-1&&h.jsx("div",{className:"mx-1 text-stone-500",children:"→"})]},a.id))}),r&&h.jsx("div",{className:"mt-2 rounded border border-stone-600 bg-stone-800/80 p-2",children:h.jsxs("div",{className:"text-xs text-stone-300",children:[h.jsx("div",{className:"mb-1 font-bold text-mantis-400",children:"Estado actual:"}),t==="fetch"&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"size-2 animate-pulse rounded-full bg-blue-400"}),h.jsx("span",{children:"Leyendo instrucción desde memoria"})]}),t==="decode"&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"size-2 animate-pulse rounded-full bg-yellow-400"}),h.jsx("span",{children:"Interpretando código de operación"})]}),t==="execute"&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"size-2 animate-pulse rounded-full bg-green-400"}),h.jsx("span",{children:"Ejecutando operación en ALU"})]}),t==="idle"&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"size-2 rounded-full bg-stone-400"}),h.jsx("span",{children:"CPU en espera de instrucciones"})]})]})}),h.jsx("div",{className:"text-center text-[8px] text-stone-500",children:"Haz clic en las fases para ver detalles"})]})});C6.displayName="ExecutionPhases";const Wre=x.memo(({steps:t,onStepChange:e,onComplete:n,className:i})=>{const[r,s]=x.useState(0),[o,a]=x.useState(!1),[l,c]=x.useState(2e3),u=t[r],d=r===0,f=r===t.length-1,p=x.useCallback(b=>{const w=Math.max(0,Math.min(b,t.length-1));s(w),e==null||e(w)},[t.length,e]),m=x.useCallback(()=>{f?(a(!1),n==null||n()):p(r+1)},[r,f,p,n]),g=x.useCallback(()=>{d||p(r-1)},[r,d,p]),y=x.useCallback(()=>{p(0),a(!1)},[p]),v=x.useCallback(()=>{a(!o)},[o]);return o&&!f&&setTimeout(m,l),h.jsxs("div",{className:ee("rounded-lg border border-stone-600 bg-stone-900 p-4",i),children:[h.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[h.jsx("h3",{className:"text-lg font-semibold text-mantis-400",children:"Modo Paso a Paso"}),h.jsx("div",{className:"flex items-center gap-2",children:h.jsxs("span",{className:"text-sm text-stone-400",children:["Paso ",r+1," de ",t.length]})})]}),h.jsx(C6,{currentPhase:u==null?void 0:u.phase,className:"mb-4"}),h.jsxs("div",{className:"mb-4 rounded-lg bg-stone-800 p-4",children:[h.jsx("div",{className:"mb-2 flex items-center gap-2",children:h.jsx("span",{className:"text-sm font-medium text-mantis-400",children:u==null?void 0:u.title})}),h.jsx("p",{className:"mb-3 text-sm text-stone-300",children:u==null?void 0:u.description}),(u==null?void 0:u.instruction)&&h.jsxs("div",{className:"mb-3 rounded bg-stone-700 p-2",children:[h.jsx("span",{className:"text-xs text-stone-400",children:"Instrucción:"}),h.jsx("div",{className:"font-mono text-sm text-mantis-400",children:u.instruction})]}),(u==null?void 0:u.registers)&&h.jsx("div",{className:"mb-3 grid grid-cols-2 gap-4",children:h.jsxs("div",{children:[h.jsx("span",{className:"text-xs text-stone-400",children:"Registros:"}),h.jsx("div",{className:"mt-1 space-y-1",children:Object.entries(u.registers).map(([b,w])=>h.jsxs("div",{className:"flex justify-between text-xs",children:[h.jsxs("span",{className:"text-stone-300",children:[b,":"]}),h.jsx("span",{className:"font-mono text-mantis-400",children:w})]},b))})]})}),(u==null?void 0:u.memory)&&h.jsxs("div",{children:[h.jsx("span",{className:"text-xs text-stone-400",children:"Memoria:"}),h.jsx("div",{className:"mt-1 grid grid-cols-4 gap-1",children:Object.entries(u.memory).map(([b,w])=>h.jsxs("div",{className:"text-center text-xs",children:[h.jsx("div",{className:"text-stone-500",children:b}),h.jsx("div",{className:"font-mono text-mantis-400",children:w})]},b))})]})]}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("div",{className:"flex items-center gap-2",children:h.jsxs(ht,{variant:"outline",size:"sm",onClick:y,disabled:d&&!o,className:"flex items-center gap-1",children:[h.jsx(Fe,{icon:uL}),"Reiniciar"]})}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs(ht,{variant:"outline",size:"sm",onClick:g,disabled:d,className:"flex items-center gap-1",children:[h.jsx(Fe,{icon:fL}),"Anterior"]}),h.jsxs(ht,{variant:o?"secondary":"default",size:"sm",onClick:v,className:"flex items-center gap-1",children:[h.jsx(Fe,{icon:o?jy:vd}),o?"Pausar":"Reproducir"]}),h.jsxs(ht,{variant:"outline",size:"sm",onClick:m,disabled:f,className:"flex items-center gap-1",children:["Siguiente",h.jsx(Fe,{icon:W_})]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-xs text-stone-400",children:"Velocidad:"}),h.jsxs("select",{value:l,onChange:b=>c(Number(b.target.value)),className:"rounded border border-stone-600 bg-stone-800 px-2 py-1 text-xs",children:[h.jsx("option",{value:1e3,children:"Rápida"}),h.jsx("option",{value:2e3,children:"Normal"}),h.jsx("option",{value:4e3,children:"Lenta"})]})]})]}),h.jsx("div",{className:"mt-4",children:h.jsx("div",{className:"h-2 w-full rounded-full bg-stone-700",children:h.jsx("div",{className:"h-2 rounded-full bg-mantis-500 transition-all duration-300",style:{width:`${(r+1)/t.length*100}%`}})})})]})});Wre.displayName="StepByStepMode";const Gre=x.memo(({from:t,to:e,data:n,duration:i=2e3,className:r,onComplete:s})=>{const[o,a]=x.useState(!1),[l,c]=x.useState(0);return x.useEffect(()=>{a(!0),c(0);const u=Date.now(),d=()=>{const f=Date.now()-u,p=Math.min(f/i,1);c(p),p<1?requestAnimationFrame(d):setTimeout(()=>{a(!1),s==null||s()},500)};requestAnimationFrame(d)},[t,e,n,i,s]),o?h.jsxs("div",{className:ee("pointer-events-none absolute inset-0",r),children:[h.jsxs("svg",{className:"absolute inset-0 size-full",children:[h.jsx("defs",{children:h.jsxs("linearGradient",{id:"dataFlowGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[h.jsx("stop",{offset:"0%",stopColor:"#10b981",stopOpacity:"0.8"}),h.jsx("stop",{offset:"50%",stopColor:"#10b981",stopOpacity:"1"}),h.jsx("stop",{offset:"100%",stopColor:"#10b981",stopOpacity:"0.8"})]})}),h.jsx("path",{d:`M ${t} L ${e}`,stroke:"url(#dataFlowGradient)",strokeWidth:"3",strokeDasharray:"10,5",strokeDashoffset:20-l*20,fill:"none",className:"animate-pulse"})]}),h.jsxs("div",{className:ee("absolute rounded bg-mantis-500 px-2 py-1 font-mono text-xs text-white","border border-mantis-400 shadow-lg","transition-all duration-300 ease-out"),style:{left:`${l*100}%`,transform:"translateX(-50%)",top:"50%",marginTop:"-12px"},children:[n,h.jsx("div",{className:"absolute -top-1 left-1/2 size-0 -translate-x-1/2 border-x-4 border-b-4 border-transparent border-b-mantis-500"})]})]}):null});Gre.displayName="DataFlowAnimation";const Kre={"fetch-decode-execute":{title:"Ciclo Fetch-Decode-Execute",description:"Visualiza las tres fases del ciclo de instrucción",steps:[{id:"fetch",title:"Fase Fetch",description:"La CPU lee la instrucción desde memoria",duration:2e3,animation:{type:"flow",targets:["IP","MAR","MBR"],data:{from:"IP",to:"MBR",value:"A1"}}},{id:"decode",title:"Fase Decode",description:"La CPU interpreta la instrucción",duration:2e3,animation:{type:"highlight",targets:["IR"],data:{instruction:"MOV AL, 5"}}},{id:"execute",title:"Fase Execute",description:"La CPU ejecuta la operación",duration:2e3,animation:{type:"transform",targets:["AL"],data:{newValue:"05"}}}]},"memory-access":{title:"Acceso a Memoria",description:"Cómo la CPU lee y escribe en memoria RAM",steps:[{id:"address-setup",title:"Configurar Dirección",description:"La CPU coloca la dirección en el MAR",duration:1500,animation:{type:"highlight",targets:["MAR"],data:{address:"A0"}}},{id:"memory-read",title:"Lectura de Memoria",description:"El contenido se transfiere al MBR",duration:1500,animation:{type:"flow",targets:["memory-cell-A0","MBR"],data:{from:"memory",to:"MBR",value:"42"}}},{id:"data-transfer",title:"Transferencia de Datos",description:"Los datos se mueven al registro destino",duration:1500,animation:{type:"flow",targets:["MBR","AL"],data:{from:"MBR",to:"AL",value:"42"}}}]},"register-transfer":{title:"Transferencia entre Registros",description:"Movimiento de datos entre registros de la CPU",steps:[{id:"source-read",title:"Leer Registro Origen",description:"El valor se lee del registro origen",duration:1e3,animation:{type:"highlight",targets:["AL"],data:{value:"25"}}},{id:"bus-transfer",title:"Transferencia por Bus",description:"Los datos viajan por el bus interno",duration:1500,animation:{type:"flow",targets:["AL","BL"],data:{from:"AL",to:"BL",value:"25"}}},{id:"destination-write",title:"Escribir Registro Destino",description:"El valor se almacena en el registro destino",duration:1e3,animation:{type:"transform",targets:["BL"],data:{newValue:"25"}}}]},"alu-operation":{title:"Operación ALU",description:"Proceso de operación aritmética o lógica",steps:[{id:"operand-load",title:"Cargar Operandos",description:"Los operandos se cargan en la ALU",duration:1500,animation:{type:"highlight",targets:["AL","BL"],data:{operand1:"10",operand2:"05"}}},{id:"operation-execute",title:"Ejecutar Operación",description:"La ALU realiza la operación",duration:2e3,animation:{type:"sequence",targets:["ALU"],data:{operation:"ADD",result:"15"}}},{id:"result-store",title:"Almacenar Resultado",description:"El resultado se guarda en el registro destino",duration:1500,animation:{type:"transform",targets:["AL"],data:{newValue:"15"}}}]},"bus-communication":{title:"Comunicación por Bus",description:"Cómo los componentes se comunican a través del bus",steps:[{id:"bus-request",title:"Solicitud de Bus",description:"Un componente solicita acceso al bus",duration:1e3,animation:{type:"highlight",targets:["CPU"],data:{requesting:!0}}},{id:"bus-grant",title:"Concesión de Bus",description:"El bus se concede al componente solicitante",duration:1e3,animation:{type:"highlight",targets:["data-bus"],data:{granted:!0}}},{id:"data-transfer",title:"Transferencia de Datos",description:"Los datos se transfieren por el bus",duration:2e3,animation:{type:"flow",targets:["data-bus"],data:{data:"A1B2",direction:"CPU-to-Memory"}}},{id:"bus-release",title:"Liberación de Bus",description:"El bus se libera para otros componentes",duration:1e3,animation:{type:"highlight",targets:["data-bus"],data:{released:!0}}}]}},E6=x.memo(({concept:t,onClose:e,className:n})=>{const[i,r]=x.useState(0),[s,o]=x.useState(!1),[a,l]=x.useState(!1),[c,u]=x.useState(!1),d=Kre[t],f=d.steps[i],p=i===0,m=i===d.steps.length-1;x.useEffect(()=>{if(s){const _=setTimeout(()=>{m?o(!1):r(E=>E+1)},f.duration);return()=>clearTimeout(_)}},[s,i,m,f.duration]);const g=x.useCallback(()=>{m||r(_=>_+1)},[m]),y=x.useCallback(()=>{p||r(_=>_-1)},[p]),v=x.useCallback(()=>{r(0),o(!1)},[]),b=x.useCallback(()=>{o(!s)},[s]),w=x.useCallback(()=>{l(!a)},[a]),k=()=>{const{type:_,targets:E,data:C}=f.animation;switch(_){case"highlight":return h.jsxs("div",{className:"relative",children:[E.map((N,M)=>h.jsx("div",{className:"absolute inset-0 animate-pulse rounded border-2 border-mantis-400 bg-mantis-400/20",style:{animationDelay:`${M*200}ms`}},M)),C&&h.jsx("div",{className:"absolute right-2 top-2 rounded bg-mantis-500 px-2 py-1 text-xs text-white",children:Object.entries(C).map(([N,M])=>h.jsxs("div",{children:[N,": ",String(M)]},N))})]});case"flow":return h.jsxs("div",{className:"relative",children:[h.jsxs("svg",{className:"absolute inset-0 size-full",children:[h.jsx("defs",{children:h.jsxs("linearGradient",{id:"flowGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[h.jsx("stop",{offset:"0%",stopColor:"#10b981",stopOpacity:"0.8"}),h.jsx("stop",{offset:"50%",stopColor:"#10b981",stopOpacity:"1"}),h.jsx("stop",{offset:"100%",stopColor:"#10b981",stopOpacity:"0.8"})]})}),h.jsx("path",{d:`M ${"from"in C&&C.from||"0,0"} L ${"to"in C&&C.to||"100,100"}`,stroke:"url(#flowGradient)",strokeWidth:"3",strokeDasharray:"10,5",className:"animate-pulse"})]}),"value"in C&&C.value&&h.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:h.jsx("div",{className:"rounded bg-mantis-500 px-2 py-1 font-mono text-xs text-white",children:C.value})})]});case"transform":return h.jsxs("div",{className:"relative",children:[E.map((N,M)=>h.jsx("div",{className:"absolute inset-0 animate-ping rounded bg-mantis-400/30",style:{animationDelay:`${M*300}ms`}},M)),"newValue"in C&&C.newValue&&h.jsxs("div",{className:"absolute left-2 top-2 rounded bg-mantis-500 px-2 py-1 font-mono text-xs text-white",children:["Nuevo: ",C.newValue]})]});case"sequence":return h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:h.jsx("div",{className:"rounded-lg bg-mantis-500 px-4 py-2 font-mono text-sm text-white",children:"operation"in C&&C.operation?C.operation:"Operación"})}),"result"in C&&C.result&&h.jsxs("div",{className:"absolute bottom-2 right-2 rounded bg-green-500 px-2 py-1 font-mono text-xs text-white",children:["= ",C.result]})]});default:return null}};return h.jsx("div",{className:ee("fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",a&&"p-0",n),children:h.jsxs("div",{className:ee("rounded-lg border border-stone-600 bg-stone-900 shadow-xl",a?"size-full":"max-h-[90vh] w-full max-w-4xl"),children:[h.jsxs("div",{className:"border-b border-stone-600 p-4",children:[h.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[h.jsx("h2",{className:"text-lg font-semibold text-mantis-400",children:d.title}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(ht,{variant:"ghost",size:"sm",onClick:()=>u(!c),className:"text-stone-400 hover:text-mantis-400",children:h.jsx(Fe,{icon:dL})}),h.jsx(ht,{variant:"ghost",size:"sm",onClick:w,className:"text-stone-400 hover:text-mantis-400",children:h.jsx(Fe,{icon:a?yY:TY})}),h.jsx(ht,{variant:"ghost",size:"sm",onClick:e,className:"text-stone-400 hover:text-white",children:"×"})]})]}),h.jsxs("div",{className:"flex items-center gap-4 text-sm text-stone-400",children:[h.jsxs("span",{children:["Paso ",i+1," de ",d.steps.length]}),h.jsx("span",{children:"•"}),h.jsxs("span",{children:[f.duration/1e3,"s"]})]}),h.jsx("div",{className:"mt-3 h-2 w-full rounded-full bg-stone-700",children:h.jsx("div",{className:"h-2 rounded-full bg-mantis-500 transition-all duration-300",style:{width:`${(i+1)/d.steps.length*100}%`}})})]}),h.jsxs("div",{className:"flex-1 p-4",children:[h.jsxs("div",{className:"mb-4",children:[h.jsx("h3",{className:"mb-2 text-base font-medium text-white",children:f.title}),h.jsx("p",{className:"text-sm text-stone-300",children:f.description})]}),h.jsxs("div",{className:"relative h-64 overflow-hidden rounded-lg border border-stone-600 bg-stone-800",children:[k(),c&&h.jsxs("div",{className:"absolute left-2 top-2 max-w-xs rounded border border-stone-600 bg-stone-900/90 p-3",children:[h.jsx("h4",{className:"mb-2 font-medium text-mantis-400",children:"Información"}),h.jsx("p",{className:"text-xs text-stone-300",children:d.description}),h.jsxs("div",{className:"mt-2 text-xs text-stone-400",children:[h.jsxs("div",{children:["Tipo de animación: ",f.animation.type]}),h.jsxs("div",{children:["Elementos: ",f.animation.targets.join(", ")]})]})]})]})]}),h.jsx("div",{className:"border-t border-stone-600 p-4",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs(ht,{variant:"outline",size:"sm",onClick:v,className:"flex items-center gap-1",children:[h.jsx(Fe,{icon:SY}),"Reiniciar"]}),h.jsx(ht,{variant:"outline",size:"sm",onClick:y,disabled:p,className:"flex items-center gap-1",children:"Anterior"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs(ht,{variant:"outline",size:"sm",onClick:b,className:"flex items-center gap-1",children:[h.jsx(Fe,{icon:s?jy:vd}),s?"Pausar":"Reproducir"]}),h.jsx(ht,{variant:"outline",size:"sm",onClick:g,disabled:m,className:"flex items-center gap-1",children:"Siguiente"})]})]})})]})})});E6.displayName="ConceptVisualizer";const qre=[{id:"cpu-basics",title:"Fundamentos de la CPU",description:"Aprende cómo funciona una CPU y sus componentes principales",difficulty:"beginner",concepts:["register","alu","program-counter"],estimatedTime:10,steps:[{id:"intro",title:"Introducción a la CPU",description:"¿Qué es una CPU y para qué sirve?",content:"La CPU (Unidad Central de Procesamiento) es el cerebro de la computadora. Se encarga de ejecutar instrucciones y procesar datos.",type:"explanation",completed:!1},{id:"registers",title:"Registros de la CPU",description:"Los registros son memoria rápida dentro de la CPU",content:"Los registros almacenan datos temporalmente durante la ejecución. Son más rápidos que la RAM pero tienen menos capacidad.",type:"explanation",target:"cpu-component",completed:!1},{id:"alu-exercise",title:"Ejercicio: ALU",description:"Practica con la Unidad Aritmético-Lógica",content:"La ALU realiza operaciones matemáticas y lógicas. Observa cómo cambian los valores en los registros AL, BL, CL, DL.",type:"exercise",exercise:{question:"¿Qué operación realiza la ALU cuando ejecutas ADD AL, 5?",options:["Suma 5 al registro AL","Resta 5 del registro AL","Multiplica AL por 5","Divide AL entre 5"],correctAnswer:0,explanation:"ADD AL, 5 suma el valor 5 al contenido actual del registro AL."},completed:!1},{id:"program-counter",title:"Contador de Programa",description:"El IP indica la siguiente instrucción a ejecutar",content:"El Program Counter (IP) se incrementa automáticamente después de cada instrucción.",type:"explanation",target:"cpu-component",completed:!1}]},{id:"memory-basics",title:"Memoria RAM",description:"Comprende cómo funciona la memoria principal",difficulty:"beginner",concepts:["memory","bus"],estimatedTime:8,steps:[{id:"memory-intro",title:"¿Qué es la Memoria RAM?",description:"La memoria de acceso aleatorio",content:"La RAM almacena programas y datos temporalmente. Cada ubicación tiene una dirección única.",type:"explanation",target:"memory-component",completed:!1},{id:"memory-access",title:"Acceso a Memoria",description:"Cómo la CPU lee y escribe en memoria",content:"La CPU usa el bus de direcciones para especificar qué celda de memoria acceder.",type:"explanation",completed:!1},{id:"memory-quiz",title:"Quiz: Direccionamiento",description:"Pon a prueba tu conocimiento",content:"Responde correctamente para continuar.",type:"quiz",exercise:{question:"¿Cuántas direcciones de memoria tiene VonSim8?",options:["128 bytes","256 bytes","512 bytes","1024 bytes"],correctAnswer:1,explanation:"VonSim8 tiene 256 bytes de memoria (direcciones 00-FF en hexadecimal)."},completed:!1}]},{id:"instruction-cycle",title:"Ciclo de Instrucción",description:"Fetch, Decode, Execute",difficulty:"intermediate",concepts:["instruction","program-counter"],estimatedTime:15,steps:[{id:"cycle-intro",title:"El Ciclo de Instrucción",description:"Las tres fases principales",content:"Cada instrucción pasa por tres fases: Fetch (leer), Decode (interpretar), Execute (ejecutar).",type:"explanation",completed:!1},{id:"fetch-phase",title:"Fase Fetch",description:"Leer la instrucción de memoria",content:"La CPU lee la instrucción desde la dirección apuntada por el IP.",type:"explanation",completed:!1},{id:"decode-phase",title:"Fase Decode",description:"Interpretar la instrucción",content:"La CPU determina qué operación realizar y qué operandos usar.",type:"explanation",completed:!1},{id:"execute-phase",title:"Fase Execute",description:"Ejecutar la operación",content:"La CPU realiza la operación especificada por la instrucción.",type:"explanation",completed:!1},{id:"cycle-exercise",title:"Ejercicio: Observar el Ciclo",description:"Ejecuta una instrucción paso a paso",content:'Usa el botón "Por Ciclo" para ver cada fase del ciclo de instrucción.',type:"exercise",exercise:{question:"¿En qué orden ocurren las fases del ciclo de instrucción?",options:["Execute, Decode, Fetch","Fetch, Execute, Decode","Fetch, Decode, Execute","Decode, Fetch, Execute"],correctAnswer:2,explanation:"El orden correcto es Fetch (leer), Decode (interpretar), Execute (ejecutar)."},completed:!1}]}],A6=x.memo(({tutorial:t,onComplete:e,onClose:n,className:i})=>{var K,B;const[r,s]=x.useState(0),[o,a]=x.useState(t.steps),[l,c]=x.useState(!1),[u,d]=x.useState(!1),[f,p]=x.useState(""),[m,g]=x.useState(null),y=o[r],v=r===0,b=r===o.length-1,k=o.filter(W=>W.completed).length/o.length*100,_=x.useCallback(()=>{e==null||e(t.id)},[t.id,e]),E=x.useCallback(()=>{b?_():(s(W=>W+1),g(null),p(""))},[b,_]),C=x.useCallback(()=>{v||(s(W=>W-1),g(null),p(""))},[v]),N=x.useCallback(()=>{a(W=>W.map((Y,te)=>te===r?{...Y,completed:!0}:Y))},[r]),M=x.useCallback(()=>{if(!y.exercise)return;const W=f===y.exercise.correctAnswer.toString();g({correct:W,message:W?"¡Correcto!":`Incorrecto. ${y.exercise.explanation}`}),W&&(N(),setTimeout(()=>{E()},2e3))},[y,f,N,E]),R=x.useCallback(()=>{c(!l)},[l]);x.useEffect(()=>{if(l&&y.type==="explanation"){const W=setTimeout(()=>{b?c(!1):E()},5e3);return()=>clearTimeout(W)}},[l,r,b,y.type,E]);const I=W=>{switch(W){case"beginner":return"text-blue-400";case"intermediate":return"text-yellow-400";case"advanced":return"text-purple-400";default:return"text-stone-400"}},D=W=>{switch(W){case"beginner":return dc;case"intermediate":return jp;case"advanced":return hL;default:return dc}};return h.jsx("div",{className:ee("fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",i),children:h.jsxs("div",{className:"max-h-[90vh] w-full max-w-2xl overflow-hidden rounded-lg border border-stone-600 bg-stone-900 shadow-xl",children:[h.jsxs("div",{className:"border-b border-stone-600 p-4",children:[h.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[h.jsx("h2",{className:"text-lg font-semibold text-mantis-400",children:t.title}),h.jsx(ht,{variant:"ghost",size:"sm",onClick:n,className:"text-stone-400 hover:text-white",children:"×"})]}),h.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Fe,{icon:D(t.difficulty),className:I(t.difficulty)}),h.jsx("span",{className:I(t.difficulty),children:t.difficulty==="beginner"?"Básico":t.difficulty==="intermediate"?"Intermedio":"Avanzado"})]}),h.jsx("span",{className:"text-stone-400",children:"•"}),h.jsxs("span",{className:"text-stone-400",children:[t.estimatedTime," min"]}),h.jsx("span",{className:"text-stone-400",children:"•"}),h.jsxs("span",{className:"text-stone-400",children:["Paso ",r+1," de ",o.length]})]}),h.jsx("div",{className:"mt-3 h-2 w-full rounded-full bg-stone-700",children:h.jsx("div",{className:"h-2 rounded-full bg-mantis-500 transition-all duration-300",style:{width:`${k}%`}})})]}),h.jsxs("div",{className:"max-h-96 overflow-y-auto p-4",children:[h.jsxs("div",{className:"mb-4",children:[h.jsx("h3",{className:"mb-2 text-base font-medium text-white",children:y.title}),h.jsx("p",{className:"mb-3 text-sm text-stone-300",children:y.description}),h.jsx("div",{className:"text-sm leading-relaxed text-stone-400",children:y.content})]}),y.type==="exercise"||y.type==="quiz"?h.jsxs("div",{className:"rounded-lg border border-stone-600 bg-stone-800 p-4",children:[h.jsx("h4",{className:"mb-3 font-medium text-white",children:(K=y.exercise)==null?void 0:K.question}),(B=y.exercise)!=null&&B.options?h.jsx("div",{className:"space-y-2",children:y.exercise.options.map((W,Y)=>h.jsxs("label",{className:ee("flex cursor-pointer items-center gap-3 rounded border p-3 transition-colors",f===Y.toString()?"border-mantis-400 bg-mantis-400/20":"border-stone-600 bg-stone-700 hover:bg-stone-600"),children:[h.jsx("input",{type:"radio",name:"answer",value:Y,checked:f===Y.toString(),onChange:te=>p(te.target.value),className:"text-mantis-400"}),h.jsx("span",{className:"text-stone-300",children:W})]},Y))}):h.jsx("input",{type:"text",value:f,onChange:W=>p(W.target.value),placeholder:"Escribe tu respuesta...",className:"w-full rounded border border-stone-600 bg-stone-700 p-2 text-white"}),m&&h.jsx("div",{className:ee("mt-3 rounded border p-3",m.correct?"border-green-400 bg-green-400/20 text-green-400":"border-red-400 bg-red-400/20 text-red-400"),children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Fe,{icon:m.correct?gL:$y}),m.message]})}),y.hints&&y.hints.length>0&&h.jsxs("div",{className:"mt-3",children:[h.jsxs(ht,{variant:"ghost",size:"sm",onClick:()=>d(!u),className:"text-mantis-400 hover:text-mantis-300",children:[h.jsx(Fe,{icon:dc,className:"mr-2"}),u?"Ocultar":"Mostrar"," Pistas"]}),u&&h.jsx("div",{className:"mt-2 rounded border border-stone-600 bg-stone-700 p-3",children:h.jsx("ul",{className:"space-y-1 text-sm text-stone-300",children:y.hints.map((W,Y)=>h.jsxs("li",{children:["• ",W]},Y))})})]})]}):null]}),h.jsx("div",{className:"border-t border-stone-600 p-4",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs(ht,{variant:"outline",size:"sm",onClick:C,disabled:v,className:"flex items-center gap-1",children:[h.jsx(Fe,{icon:fL}),"Anterior"]}),y.type==="explanation"&&h.jsxs(ht,{variant:"outline",size:"sm",onClick:R,className:"flex items-center gap-1",children:[h.jsx(Fe,{icon:l?jy:vd}),l?"Pausar":"Reproducir"]})]}),h.jsx("div",{className:"flex items-center gap-2",children:y.type==="exercise"||y.type==="quiz"?h.jsx(ht,{size:"sm",onClick:M,disabled:!f,className:"bg-mantis-600 hover:bg-mantis-700",children:"Verificar Respuesta"}):h.jsxs(ht,{size:"sm",onClick:E,className:"flex items-center gap-1 bg-mantis-600 hover:bg-mantis-700",children:[b?"Completar Tutorial":"Siguiente",!b&&h.jsx(Fe,{icon:W_})]})})]})})]})})});A6.displayName="InteractiveTutorial";const N6=x.memo(({isOpen:t=!1,onClose:e,onShowProgress:n})=>{const[i,r]=x.useState(!1),[s,o]=x.useState(!1),[a,l]=x.useState(!1),[c,u]=x.useState(!1),[d,f]=x.useState(null),[p,m]=x.useState(null),g=E=>{console.log("Tutorial seleccionado:",E),f(E),l(!0)},y=E=>{m(E),u(!0)},v=()=>{l(!1),f(null)},b=()=>{u(!1),m(null)},w=[{id:"progress",title:"Progreso Educativo",description:"Ver logros y estadísticas de aprendizaje",icon:pL,color:"text-yellow-400",action:()=>n==null?void 0:n()},{id:"tutorials",title:"Tutoriales Interactivos",description:"Aprende paso a paso con ejercicios",icon:$Y,color:"text-blue-400",action:()=>r(!i)},{id:"visualizations",title:"Visualizaciones",description:"Ver conceptos en acción",icon:Iw,color:"text-green-400",action:()=>o(!s)},{id:"concepts",title:"Conceptos Educativos",description:"Explorar tooltips informativos",icon:dc,color:"text-purple-400",action:()=>{alert("Haz hover sobre los elementos de la interfaz para ver explicaciones educativas. Los tooltips se adaptan a tu nivel de conocimiento."),e==null||e()}}],k=[{id:"cpu-basics",title:"Fundamentos de la CPU",description:"Conceptos básicos de CPU y registros",difficulty:"Básico",duration:"10 min"},{id:"memory-basics",title:"Memoria RAM",description:"Funcionamiento de la memoria principal",difficulty:"Básico",duration:"8 min"},{id:"instruction-cycle",title:"Ciclo de Instrucción",description:"Fases fetch-decode-execute",difficulty:"Intermedio",duration:"15 min"}],_=[{id:"fetch-decode-execute",title:"Ciclo Fetch-Decode-Execute",description:"Visualiza las tres fases del ciclo de instrucción"},{id:"memory-access",title:"Acceso a Memoria",description:"Cómo la CPU lee y escribe en memoria RAM"},{id:"register-transfer",title:"Transferencia entre Registros",description:"Movimiento de datos entre registros de la CPU"},{id:"alu-operation",title:"Operación ALU",description:"Proceso de operación aritmética o lógica"},{id:"bus-communication",title:"Comunicación por Bus",description:"Cómo los componentes se comunican a través del bus"}];return h.jsxs(h.Fragment,{children:[t&&h.jsx("div",{className:"fixed bottom-12 left-1/2 z-50 -translate-x-1/2",children:h.jsxs("div",{className:"min-w-80 rounded-lg border border-stone-600 bg-stone-900 p-4 shadow-xl",children:[h.jsxs("div",{className:"mb-4 text-center",children:[h.jsx("h3",{className:"mb-1 text-lg font-semibold text-mantis-400",children:"Centro de Aprendizaje"}),h.jsx("p",{className:"text-sm text-stone-400",children:"Explora herramientas educativas interactivas"})]}),h.jsx("div",{className:"space-y-2",children:w.map(E=>h.jsx("div",{children:E.id==="tutorials"?h.jsxs("div",{children:[h.jsxs("button",{onClick:E.action,className:ee("w-full rounded-lg border border-stone-600 p-3 text-left hover:bg-stone-800","flex items-center gap-3 transition-all duration-200"),children:[h.jsx(Fe,{icon:E.icon,className:ee("text-lg",E.color)}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:"font-medium text-white",children:E.title}),h.jsx("div",{className:"text-sm text-stone-400",children:E.description})]}),h.jsx(Fe,{icon:vd,className:ee("text-sm text-stone-400",i&&"text-blue-400")})]}),i&&h.jsx("div",{className:"ml-8 mt-2 space-y-1",children:k.map(C=>h.jsx("button",{onClick:()=>g(C.id),className:"w-full rounded border border-stone-700 p-2 text-left transition-colors hover:bg-stone-800",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-sm font-medium text-white",children:C.title}),h.jsx("div",{className:"text-xs text-stone-400",children:C.description})]}),h.jsxs("div",{className:"text-right",children:[h.jsx("div",{className:"text-xs text-blue-400",children:C.difficulty}),h.jsx("div",{className:"text-xs text-stone-500",children:C.duration})]})]})},C.id))})]}):E.id==="visualizations"?h.jsxs("div",{children:[h.jsxs("button",{onClick:E.action,className:ee("w-full rounded-lg border border-stone-600 p-3 text-left hover:bg-stone-800","flex items-center gap-3 transition-all duration-200"),children:[h.jsx(Fe,{icon:E.icon,className:ee("text-lg",E.color)}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:"font-medium text-white",children:E.title}),h.jsx("div",{className:"text-sm text-stone-400",children:E.description})]}),h.jsx(Fe,{icon:Iw,className:ee("text-sm text-stone-400",s&&"text-green-400")})]}),s&&h.jsx("div",{className:"ml-8 mt-2 space-y-1",children:_.map(C=>h.jsx("button",{onClick:()=>y(C.id),className:"w-full rounded border border-stone-700 p-2 text-left transition-colors hover:bg-stone-800",children:h.jsxs("div",{children:[h.jsx("div",{className:"text-sm font-medium text-white",children:C.title}),h.jsx("div",{className:"text-xs text-stone-400",children:C.description})]})},C.id))})]}):h.jsxs("button",{onClick:E.action,className:ee("w-full rounded-lg border border-stone-600 p-3 text-left hover:bg-stone-800","flex items-center gap-3 transition-all duration-200"),children:[h.jsx(Fe,{icon:E.icon,className:ee("text-lg",E.color)}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:"font-medium text-white",children:E.title}),h.jsx("div",{className:"text-sm text-stone-400",children:E.description})]})]})},E.id))}),h.jsx("div",{className:"mt-4 border-t border-stone-600 pt-3",children:h.jsxs("div",{className:"flex items-center justify-between text-xs text-stone-400",children:[h.jsx("span",{children:"Herramientas educativas"}),h.jsx("span",{children:"VonSim8"})]})})]})}),a&&d&&(()=>{const E=qre.find(C=>C.id===d);return console.log("Tutorial encontrado:",E),E?h.jsx(A6,{tutorial:E,onComplete:v,onClose:()=>{console.log("Cerrando tutorial"),l(!1),f(null)}}):(console.error("Tutorial no encontrado:",d),null)})(),c&&p&&h.jsx(E6,{concept:p,onClose:b})]})});N6.displayName="EducationalMenu";const gM=[{id:"first_program",type:"programs_written",title:"Primer Programa",description:"Escribe tu primer programa en ensamblador",icon:dc,requirement:1,current:0,unlocked:!1,points:10},{id:"instruction_master",type:"instructions_executed",title:"Maestro de Instrucciones",description:"Ejecuta 100 instrucciones",icon:xY,requirement:100,current:0,unlocked:!1,points:25},{id:"memory_explorer",type:"concept_mastered",title:"Explorador de Memoria",description:"Comprende el funcionamiento de la memoria RAM",icon:BY,requirement:1,current:0,unlocked:!1,points:15},{id:"cpu_architect",type:"concept_mastered",title:"Arquitecto de CPU",description:"Domina los conceptos de arquitectura de CPU",icon:LY,requirement:1,current:0,unlocked:!1,points:30},{id:"persistent_learner",type:"time_spent",title:"Estudiante Persistente",description:"Pasa 30 minutos aprendiendo",icon:jp,requirement:30,current:0,unlocked:!1,points:20}],vM=[{id:"beginner",name:"Principiante",description:"Conceptos básicos de programación y arquitectura",concepts:["register","memory","instruction"],requiredPoints:0,unlocked:!0,completed:!1},{id:"intermediate",name:"Intermedio",description:"Operaciones aritméticas y lógicas",concepts:["alu","bus","program-counter"],requiredPoints:50,unlocked:!1,completed:!1},{id:"advanced",name:"Avanzado",description:"Interrupciones y programación compleja",concepts:["flags","stack","interrupts"],requiredPoints:100,unlocked:!1,completed:!1}],P6=x.memo(({className:t,isVisible:e=!1,onClose:n})=>{const[i,r]=x.useState(gM),[s,o]=x.useState(vM),[a,l]=x.useState(0),[c,u]=x.useState(0);x.useEffect(()=>{const y=localStorage.getItem("vonsim8-educational-progress");if(y)try{const v=JSON.parse(y);r(v.achievements||gM),o(v.levels||vM),l(v.totalPoints||0),u(v.sessionTime||0)}catch{}},[]);const d=x.useCallback(()=>{const y={achievements:i,levels:s,totalPoints:a,sessionTime:c,lastSaved:Date.now()};localStorage.setItem("vonsim8-educational-progress",JSON.stringify(y))},[i,s,a,c]),f=x.useCallback((y,v)=>{r(b=>{const w=b.map(_=>{if(_.type===y){const E=Math.min(_.current+v,_.requirement),C=_.unlocked,N=E>=_.requirement;return!C&&N&&p(_),{..._,current:E,unlocked:N}}return _}),k=w.filter(_=>_.unlocked).reduce((_,E)=>_+E.points,0);return l(k),o(_=>_.map(E=>({...E,unlocked:k>=E.requiredPoints}))),w})},[]),p=y=>{const v=document.createElement("div");v.className=ee("fixed right-4 top-4 z-50 rounded-lg border-2 p-4 shadow-lg","animate-slide-in-right bg-mantis-500 text-white"),v.innerHTML=`
      <div class="flex items-center gap-3">
        <FontAwesomeIcon icon="${y.icon}" class="text-2xl" />
        <div>
          <div class="font-bold">¡Logro Desbloqueado!</div>
          <div class="text-sm">${y.title}</div>
        </div>
      </div>
    `,document.body.appendChild(v),setTimeout(()=>{v.remove()},3e3)};if(x.useEffect(()=>{const y=v=>{const{type:b,value:w=1}=v.detail;f(b,w)};return window.addEventListener("educational-progress",y),()=>window.removeEventListener("educational-progress",y)},[f]),x.useEffect(()=>{const y=setInterval(()=>{u(v=>{const b=v+1;return b%60===0&&f("time_spent",1),b})},1e3);return()=>clearInterval(y)},[f]),x.useEffect(()=>{const y=setInterval(d,3e4);return()=>clearInterval(y)},[d]),!e)return null;const m=i.filter(y=>y.unlocked),g=s.filter(y=>y.unlocked);return h.jsxs("div",{className:ee("fixed bottom-20 right-4 z-50 h-80 w-96 rounded-lg border border-stone-600 bg-stone-900 shadow-xl",t),children:[h.jsxs("div",{className:"flex items-center justify-between border-b border-stone-600 p-3",children:[h.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-mantis-400",children:[h.jsx(Fe,{icon:pL}),"Progreso Educativo"]}),h.jsx(ht,{variant:"ghost",size:"sm",onClick:n,className:"text-xs text-stone-400 hover:text-white",children:"×"})]}),h.jsxs("div",{className:"h-64 space-y-3 overflow-y-auto p-3",children:[h.jsxs("div",{className:"rounded-lg bg-stone-800 p-3 text-center",children:[h.jsx("div",{className:"text-2xl font-bold text-mantis-400",children:a}),h.jsx("div",{className:"text-xs text-stone-400",children:"Puntos Totales"})]}),h.jsxs("div",{children:[h.jsxs("h4",{className:"mb-1 flex items-center gap-2 text-sm font-medium text-stone-300",children:[h.jsx(Fe,{icon:jp}),"Niveles de Aprendizaje"]}),h.jsx("div",{className:"space-y-1",children:s.map(y=>h.jsxs("div",{className:ee("rounded border p-2 text-xs",y.unlocked?"border-mantis-400 bg-mantis-400/10 text-mantis-400":"border-stone-600 bg-stone-800 text-stone-500"),children:[h.jsx("div",{className:"font-medium",children:y.name}),h.jsx("div",{className:"text-stone-400",children:y.description}),!y.unlocked&&h.jsxs("div",{className:"mt-1 text-stone-500",children:["Requiere ",y.requiredPoints," puntos"]})]},y.id))})]}),h.jsxs("div",{children:[h.jsxs("h4",{className:"mb-1 flex items-center gap-2 text-sm font-medium text-stone-300",children:[h.jsx(Fe,{icon:wY}),"Logros (",m.length,"/",i.length,")"]}),h.jsx("div",{className:"space-y-1",children:i.map(y=>h.jsx("div",{className:ee("rounded border p-2 text-xs",y.unlocked?"border-mantis-400 bg-mantis-400/10":"border-stone-600 bg-stone-800"),children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Fe,{icon:y.icon,className:y.unlocked?"text-mantis-400":"text-stone-500"}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:ee("font-medium",y.unlocked?"text-mantis-400":"text-stone-400"),children:y.title}),h.jsx("div",{className:"text-stone-500",children:y.description}),h.jsxs("div",{className:"mt-1",children:[h.jsx("div",{className:"h-1 w-full rounded-full bg-stone-700",children:h.jsx("div",{className:"h-1 rounded-full bg-mantis-400 transition-all duration-300",style:{width:`${y.current/y.requirement*100}%`}})}),h.jsxs("div",{className:"mt-1 text-stone-500",children:[y.current,"/",y.requirement]})]})]})]})},y.id))})]}),h.jsxs("div",{children:[h.jsxs("h4",{className:"mb-1 flex items-center gap-2 text-sm font-medium text-stone-300",children:[h.jsx(Fe,{icon:CY}),"Estadísticas"]}),h.jsxs("div",{className:"text-xs text-stone-400",children:[h.jsxs("div",{children:["Tiempo de sesión: ",Math.floor(c/60),"m ",c%60,"s"]}),h.jsxs("div",{children:["Niveles completados: ",g.length,"/",s.length]})]})]})]})]})});P6.displayName="EducationalProgress";const M6=x.createContext(null),Yre=()=>{const t=x.useContext(M6);if(!t)throw new Error("useNotifications must be used within a NotificationProvider");return t},T6=()=>{const[t,e]=x.useState([]),[n,i]=x.useState(!1);x.useEffect(()=>{const c=localStorage.getItem("vonsim8-notifications");if(c)try{const d=JSON.parse(c);if(Array.isArray(d)){const f=d.filter(p=>p&&typeof p=="object"&&"id"in p&&"type"in p&&"title"in p&&"message"in p&&"timestamp"in p&&"read"in p).map(p=>({id:String(p.id),type:p.type,title:String(p.title),message:String(p.message),timestamp:new Date(p.timestamp),read:!!p.read}));e(f)}}catch{e([])}if(!localStorage.getItem("vonsim8-welcome-notification")){const d={id:"welcome",type:"info",title:"¡Bienvenido a VonSim8!",message:"Gracias por usar nuestro simulador. Aquí encontrarás notificaciones importantes sobre el funcionamiento de la aplicación.",timestamp:new Date,read:!1};e(f=>[d,...f]),localStorage.setItem("vonsim8-welcome-notification","true")}},[]),x.useEffect(()=>{localStorage.setItem("vonsim8-notifications",JSON.stringify(t))},[t]);const r=x.useCallback(c=>{const u={...c,id:Date.now().toString(),timestamp:new Date,read:!1};e(d=>[u,...d])},[]),s=x.useCallback(c=>{e(u=>u.map(d=>d.id===c?{...d,read:!0}:d))},[]),o=x.useCallback(()=>{e(c=>c.map(u=>({...u,read:!0})))},[]),a=x.useCallback(c=>{e(u=>u.filter(d=>d.id!==c))},[]),l=x.useCallback(()=>{e([])},[]);return{notifications:t,isOpen:n,setIsOpen:i,addNotification:r,markAsRead:s,markAllAsRead:o,deleteNotification:a,clearAll:l}},Xre=t=>x.useMemo(()=>{const e=t.length,n=t.filter(r=>!r.read).length,i=t.reduce((r,s)=>(r[s.type]=(r[s.type]||0)+1,r),{});return{total:e,unread:n,byType:i}},[t]),R6=x.memo(({type:t})=>{const e=x.useMemo(()=>{switch(t){case"info":return{icon:t3,className:"text-blue-400"};case"success":return{icon:gL,className:"text-green-400"};case"warning":return{icon:FS,className:"text-yellow-400"};case"error":return{icon:FS,className:"text-red-400"};default:return{icon:t3,className:"text-blue-400"}}},[t]);return h.jsx(Fe,{icon:e.icon,className:ee("size-4",e.className)})});R6.displayName="NotificationIcon";const B2=x.memo(({notification:t,onMarkAsRead:e,onDelete:n})=>{const i=x.useCallback(r=>{const o=new Date().getTime()-r.getTime(),a=Math.floor(o/6e4),l=Math.floor(o/36e5),c=Math.floor(o/864e5);return c>0?`${c}d`:l>0?`${l}h`:a>0?`${a}m`:"Ahora"},[]);return h.jsx("div",{className:ee("rounded-lg border p-3 transition-colors",t.read?"border-stone-600 bg-stone-800":"border-mantis-500 bg-stone-800/80"),children:h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx(R6,{type:t.type}),h.jsxs("div",{className:"min-w-0 flex-1",children:[h.jsxs("div",{className:"flex items-start justify-between",children:[h.jsx("h4",{className:"font-medium text-white",children:t.title}),h.jsx("button",{onClick:()=>n(t.id),className:"ml-2 rounded p-1 text-stone-400 transition-colors hover:text-white",children:h.jsx(Fe,{icon:$y,size:"sm"})})]}),h.jsx("p",{className:"mt-1 text-sm text-stone-300",children:t.message}),h.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[h.jsx("span",{className:"text-xs text-stone-500",children:i(t.timestamp)}),h.jsxs("div",{className:"flex gap-2",children:[t.title==="Nueva versión disponible"&&h.jsx("button",{onClick:()=>{window.updateVonSim8&&window.updateVonSim8(),e(t.id)},className:"text-xs bg-mantis-600 text-white px-2 py-1 rounded transition-colors hover:bg-mantis-500",children:"Actualizar"}),!t.read&&h.jsx("button",{onClick:()=>e(t.id),className:"text-xs text-mantis-400 transition-colors hover:text-mantis-300",children:"Marcar como leída"})]})]})]})]})})});B2.displayName="NotificationItem";const O6=x.memo(()=>{const{notifications:t,isOpen:e,setIsOpen:n,markAsRead:i,markAllAsRead:r,deleteNotification:s,clearAll:o}=T6(),{total:a,unread:l}=Xre(t),c=x.useCallback(()=>{n(f=>!f)},[n]),u=x.useMemo(()=>t.filter(f=>!f.read),[t]),d=x.useMemo(()=>t.filter(f=>f.read),[t]);return e?h.jsxs("div",{className:"relative",children:[h.jsxs("button",{onClick:c,className:"relative rounded-full p-2 transition-colors hover:bg-stone-800 focus:outline-stone-400",title:"Centro de notificaciones",children:[h.jsx(Fe,{icon:n3,className:"size-4"}),l>0&&h.jsx("span",{className:"absolute -right-1 -top-1 flex size-5 items-center justify-center rounded-full bg-red-500 text-xs font-bold text-white",children:l>99?"99+":l})]}),h.jsxs("div",{className:"absolute right-0 top-full z-50 mt-2 w-80 rounded-lg border border-stone-600 bg-stone-900 p-4 shadow-xl",children:[h.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[h.jsxs("h3",{className:"text-lg font-semibold text-white",children:["Notificaciones (",a,")"]}),h.jsxs("div",{className:"flex gap-2",children:[l>0&&h.jsx(ht,{variant:"ghost",size:"sm",onClick:r,className:"text-xs text-stone-400 hover:text-white",children:"Marcar todas"}),a>0&&h.jsx(ht,{variant:"ghost",size:"sm",onClick:o,className:"text-xs text-red-400 hover:text-red-300",children:"Limpiar"})]})]}),h.jsx("div",{className:"max-h-96 space-y-3 overflow-y-auto",children:t.length===0?h.jsx("p",{className:"text-center text-sm text-stone-500",children:"No hay notificaciones"}):h.jsxs(h.Fragment,{children:[u.length>0&&h.jsx("div",{className:"space-y-2",children:u.map(f=>h.jsx(B2,{notification:f,onMarkAsRead:i,onDelete:s},f.id))}),d.length>0&&u.length>0&&h.jsx("hr",{className:"border-stone-600"}),d.length>0&&h.jsx("div",{className:"space-y-2",children:d.map(f=>h.jsx(B2,{notification:f,onMarkAsRead:i,onDelete:s},f.id))})]})})]})]}):h.jsxs("button",{onClick:c,className:"relative rounded-full p-2 transition-colors hover:bg-stone-800 focus:outline-stone-400",title:"Centro de notificaciones",children:[h.jsx(Fe,{icon:n3,className:"size-4"}),l>0&&h.jsx("span",{className:"absolute -right-1 -top-1 flex size-5 items-center justify-center rounded-full bg-red-500 text-xs font-bold text-white",children:l>99?"99+":l})]})});O6.displayName="NotificationCenter";const Jre=({children:t})=>{const e=T6(),n=x.useMemo(()=>({addNotification:e.addNotification,markAsRead:e.markAsRead,markAllAsRead:e.markAllAsRead,deleteNotification:e.deleteNotification,clearAll:e.clearAll,notifications:e.notifications}),[e]);return h.jsx(M6.Provider,{value:n,children:t})};function jv(t,[e,n]){return Math.min(n,Math.max(e,t))}function Zre(t,e=globalThis==null?void 0:globalThis.document){const n=dr(t);x.useEffect(()=>{const i=r=>{r.key==="Escape"&&n(r)};return e.addEventListener("keydown",i,{capture:!0}),()=>e.removeEventListener("keydown",i,{capture:!0})},[n,e])}var Qre="DismissableLayer",z2="dismissableLayer.update",ese="dismissableLayer.pointerDownOutside",tse="dismissableLayer.focusOutside",yM,I6=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Kp=x.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:i,onPointerDownOutside:r,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=t,c=x.useContext(I6),[u,d]=x.useState(null),f=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=x.useState({}),m=st(e,C=>d(C)),g=Array.from(c.layers),[y]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),v=g.indexOf(y),b=u?g.indexOf(u):-1,w=c.layersWithOutsidePointerEventsDisabled.size>0,k=b>=v,_=ise(C=>{const N=C.target,M=[...c.branches].some(R=>R.contains(N));!k||M||(r==null||r(C),o==null||o(C),C.defaultPrevented||a==null||a())},f),E=rse(C=>{const N=C.target;[...c.branches].some(R=>R.contains(N))||(s==null||s(C),o==null||o(C),C.defaultPrevented||a==null||a())},f);return Zre(C=>{b===c.layers.size-1&&(i==null||i(C),!C.defaultPrevented&&a&&(C.preventDefault(),a()))},f),x.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(yM=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),bM(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=yM)}},[u,f,n,c]),x.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),bM())},[u,c]),x.useEffect(()=>{const C=()=>p({});return document.addEventListener(z2,C),()=>document.removeEventListener(z2,C)},[]),h.jsx(Ue.div,{...l,ref:m,style:{pointerEvents:w?k?"auto":"none":void 0,...t.style},onFocusCapture:ve(t.onFocusCapture,E.onFocusCapture),onBlurCapture:ve(t.onBlurCapture,E.onBlurCapture),onPointerDownCapture:ve(t.onPointerDownCapture,_.onPointerDownCapture)})});Kp.displayName=Qre;var nse="DismissableLayerBranch",D6=x.forwardRef((t,e)=>{const n=x.useContext(I6),i=x.useRef(null),r=st(e,i);return x.useEffect(()=>{const s=i.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),h.jsx(Ue.div,{...t,ref:r})});D6.displayName=nse;function ise(t,e=globalThis==null?void 0:globalThis.document){const n=dr(t),i=x.useRef(!1),r=x.useRef(()=>{});return x.useEffect(()=>{const s=a=>{if(a.target&&!i.current){let l=function(){L6(ese,n,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=l,e.addEventListener("click",r.current,{once:!0})):l()}else e.removeEventListener("click",r.current);i.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",r.current)}},[e,n]),{onPointerDownCapture:()=>i.current=!0}}function rse(t,e=globalThis==null?void 0:globalThis.document){const n=dr(t),i=x.useRef(!1);return x.useEffect(()=>{const r=s=>{s.target&&!i.current&&L6(tse,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function bM(){const t=new CustomEvent(z2);document.dispatchEvent(t)}function L6(t,e,n,{discrete:i}){const r=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),i?P_(r,s):r.dispatchEvent(s)}var sse=Kp,ose=D6,m1=0;function KC(){x.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??wM()),document.body.insertAdjacentElement("beforeend",t[1]??wM()),m1++,()=>{m1===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),m1--}},[])}function wM(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var g1="focusScope.autoFocusOnMount",v1="focusScope.autoFocusOnUnmount",xM={bubbles:!1,cancelable:!0},ase="FocusScope",lb=x.forwardRef((t,e)=>{const{loop:n=!1,trapped:i=!1,onMountAutoFocus:r,onUnmountAutoFocus:s,...o}=t,[a,l]=x.useState(null),c=dr(r),u=dr(s),d=x.useRef(null),f=st(e,g=>l(g)),p=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(i){let g=function(w){if(p.paused||!a)return;const k=w.target;a.contains(k)?d.current=k:aa(d.current,{select:!0})},y=function(w){if(p.paused||!a)return;const k=w.relatedTarget;k!==null&&(a.contains(k)||aa(d.current,{select:!0}))},v=function(w){if(document.activeElement===document.body)for(const _ of w)_.removedNodes.length>0&&aa(a)};document.addEventListener("focusin",g),document.addEventListener("focusout",y);const b=new MutationObserver(v);return a&&b.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",y),b.disconnect()}}},[i,a,p.paused]),x.useEffect(()=>{if(a){kM.add(p);const g=document.activeElement;if(!a.contains(g)){const v=new CustomEvent(g1,xM);a.addEventListener(g1,c),a.dispatchEvent(v),v.defaultPrevented||(lse(hse(j6(a)),{select:!0}),document.activeElement===g&&aa(a))}return()=>{a.removeEventListener(g1,c),setTimeout(()=>{const v=new CustomEvent(v1,xM);a.addEventListener(v1,u),a.dispatchEvent(v),v.defaultPrevented||aa(g??document.body,{select:!0}),a.removeEventListener(v1,u),kM.remove(p)},0)}}},[a,c,u,p]);const m=x.useCallback(g=>{if(!n&&!i||p.paused)return;const y=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,v=document.activeElement;if(y&&v){const b=g.currentTarget,[w,k]=cse(b);w&&k?!g.shiftKey&&v===k?(g.preventDefault(),n&&aa(w,{select:!0})):g.shiftKey&&v===w&&(g.preventDefault(),n&&aa(k,{select:!0})):v===b&&g.preventDefault()}},[n,i,p.paused]);return h.jsx(Ue.div,{tabIndex:-1,...o,ref:f,onKeyDown:m})});lb.displayName=ase;function lse(t,{select:e=!1}={}){const n=document.activeElement;for(const i of t)if(aa(i,{select:e}),document.activeElement!==n)return}function cse(t){const e=j6(t),n=SM(e,t),i=SM(e.reverse(),t);return[n,i]}function j6(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function SM(t,e){for(const n of t)if(!use(n,{upTo:e}))return n}function use(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function dse(t){return t instanceof HTMLInputElement&&"select"in t}function aa(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&dse(t)&&e&&t.select()}}var kM=fse();function fse(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=_M(t,e),t.unshift(e)},remove(e){var n;t=_M(t,e),(n=t[0])==null||n.resume()}}}function _M(t,e){const n=[...t],i=n.indexOf(e);return i!==-1&&n.splice(i,1),n}function hse(t){return t.filter(e=>e.tagName!=="A")}const pse=["top","right","bottom","left"],fl=Math.min,tr=Math.max,$v=Math.round,cg=Math.floor,Qs=t=>({x:t,y:t}),mse={left:"right",right:"left",bottom:"top",top:"bottom"},gse={start:"end",end:"start"};function U2(t,e,n){return tr(t,fl(e,n))}function Vo(t,e){return typeof t=="function"?t(e):t}function Ho(t){return t.split("-")[0]}function Ud(t){return t.split("-")[1]}function qC(t){return t==="x"?"y":"x"}function YC(t){return t==="y"?"height":"width"}const vse=new Set(["top","bottom"]);function Hs(t){return vse.has(Ho(t))?"y":"x"}function XC(t){return qC(Hs(t))}function yse(t,e,n){n===void 0&&(n=!1);const i=Ud(t),r=XC(t),s=YC(r);let o=r==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=Fv(o)),[o,Fv(o)]}function bse(t){const e=Fv(t);return[V2(t),e,V2(e)]}function V2(t){return t.replace(/start|end/g,e=>gse[e])}const CM=["left","right"],EM=["right","left"],wse=["top","bottom"],xse=["bottom","top"];function Sse(t,e,n){switch(t){case"top":case"bottom":return n?e?EM:CM:e?CM:EM;case"left":case"right":return e?wse:xse;default:return[]}}function kse(t,e,n,i){const r=Ud(t);let s=Sse(Ho(t),n==="start",i);return r&&(s=s.map(o=>o+"-"+r),e&&(s=s.concat(s.map(V2)))),s}function Fv(t){return t.replace(/left|right|bottom|top/g,e=>mse[e])}function _se(t){return{top:0,right:0,bottom:0,left:0,...t}}function $6(t){return typeof t!="number"?_se(t):{top:t,right:t,bottom:t,left:t}}function Bv(t){const{x:e,y:n,width:i,height:r}=t;return{width:i,height:r,top:n,left:e,right:e+i,bottom:n+r,x:e,y:n}}function AM(t,e,n){let{reference:i,floating:r}=t;const s=Hs(e),o=XC(e),a=YC(o),l=Ho(e),c=s==="y",u=i.x+i.width/2-r.width/2,d=i.y+i.height/2-r.height/2,f=i[a]/2-r[a]/2;let p;switch(l){case"top":p={x:u,y:i.y-r.height};break;case"bottom":p={x:u,y:i.y+i.height};break;case"right":p={x:i.x+i.width,y:d};break;case"left":p={x:i.x-r.width,y:d};break;default:p={x:i.x,y:i.y}}switch(Ud(e)){case"start":p[o]-=f*(n&&c?-1:1);break;case"end":p[o]+=f*(n&&c?-1:1);break}return p}const Cse=async(t,e,n)=>{const{placement:i="bottom",strategy:r="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:r}),{x:u,y:d}=AM(c,i,l),f=i,p={},m=0;for(let g=0;g<a.length;g++){const{name:y,fn:v}=a[g],{x:b,y:w,data:k,reset:_}=await v({x:u,y:d,initialPlacement:i,placement:f,strategy:r,middlewareData:p,rects:c,platform:o,elements:{reference:t,floating:e}});u=b??u,d=w??d,p={...p,[y]:{...p[y],...k}},_&&m<=50&&(m++,typeof _=="object"&&(_.placement&&(f=_.placement),_.rects&&(c=_.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:r}):_.rects),{x:u,y:d}=AM(c,f,l)),g=-1)}return{x:u,y:d,placement:f,strategy:r,middlewareData:p}};async function yp(t,e){var n;e===void 0&&(e={});const{x:i,y:r,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:p=0}=Vo(e,t),m=$6(p),y=a[f?d==="floating"?"reference":"floating":d],v=Bv(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(y)))==null||n?y:y.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),b=d==="floating"?{x:i,y:r,width:o.floating.width,height:o.floating.height}:o.reference,w=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),k=await(s.isElement==null?void 0:s.isElement(w))?await(s.getScale==null?void 0:s.getScale(w))||{x:1,y:1}:{x:1,y:1},_=Bv(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:b,offsetParent:w,strategy:l}):b);return{top:(v.top-_.top+m.top)/k.y,bottom:(_.bottom-v.bottom+m.bottom)/k.y,left:(v.left-_.left+m.left)/k.x,right:(_.right-v.right+m.right)/k.x}}const Ese=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:i,placement:r,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=Vo(t,e)||{};if(c==null)return{};const d=$6(u),f={x:n,y:i},p=XC(r),m=YC(p),g=await o.getDimensions(c),y=p==="y",v=y?"top":"left",b=y?"bottom":"right",w=y?"clientHeight":"clientWidth",k=s.reference[m]+s.reference[p]-f[p]-s.floating[m],_=f[p]-s.reference[p],E=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let C=E?E[w]:0;(!C||!await(o.isElement==null?void 0:o.isElement(E)))&&(C=a.floating[w]||s.floating[m]);const N=k/2-_/2,M=C/2-g[m]/2-1,R=fl(d[v],M),I=fl(d[b],M),D=R,K=C-g[m]-I,B=C/2-g[m]/2+N,W=U2(D,B,K),Y=!l.arrow&&Ud(r)!=null&&B!==W&&s.reference[m]/2-(B<D?R:I)-g[m]/2<0,te=Y?B<D?B-D:B-K:0;return{[p]:f[p]+te,data:{[p]:W,centerOffset:B-W-te,...Y&&{alignmentOffset:te}},reset:Y}}}),Ase=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,i;const{placement:r,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:g=!0,...y}=Vo(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const v=Ho(r),b=Hs(a),w=Ho(a)===a,k=await(l.isRTL==null?void 0:l.isRTL(c.floating)),_=f||(w||!g?[Fv(a)]:bse(a)),E=m!=="none";!f&&E&&_.push(...kse(a,g,m,k));const C=[a,..._],N=await yp(e,y),M=[];let R=((i=s.flip)==null?void 0:i.overflows)||[];if(u&&M.push(N[v]),d){const B=yse(r,o,k);M.push(N[B[0]],N[B[1]])}if(R=[...R,{placement:r,overflows:M}],!M.every(B=>B<=0)){var I,D;const B=(((I=s.flip)==null?void 0:I.index)||0)+1,W=C[B];if(W&&(!(d==="alignment"?b!==Hs(W):!1)||R.every(V=>V.overflows[0]>0&&Hs(V.placement)===b)))return{data:{index:B,overflows:R},reset:{placement:W}};let Y=(D=R.filter(te=>te.overflows[0]<=0).sort((te,V)=>te.overflows[1]-V.overflows[1])[0])==null?void 0:D.placement;if(!Y)switch(p){case"bestFit":{var K;const te=(K=R.filter(V=>{if(E){const $=Hs(V.placement);return $===b||$==="y"}return!0}).map(V=>[V.placement,V.overflows.filter($=>$>0).reduce(($,ie)=>$+ie,0)]).sort((V,$)=>V[1]-$[1])[0])==null?void 0:K[0];te&&(Y=te);break}case"initialPlacement":Y=a;break}if(r!==Y)return{reset:{placement:Y}}}return{}}}};function NM(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function PM(t){return pse.some(e=>t[e]>=0)}const Nse=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:i="referenceHidden",...r}=Vo(t,e);switch(i){case"referenceHidden":{const s=await yp(e,{...r,elementContext:"reference"}),o=NM(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:PM(o)}}}case"escaped":{const s=await yp(e,{...r,altBoundary:!0}),o=NM(s,n.floating);return{data:{escapedOffsets:o,escaped:PM(o)}}}default:return{}}}}},F6=new Set(["left","top"]);async function Pse(t,e){const{placement:n,platform:i,elements:r}=t,s=await(i.isRTL==null?void 0:i.isRTL(r.floating)),o=Ho(n),a=Ud(n),l=Hs(n)==="y",c=F6.has(o)?-1:1,u=s&&l?-1:1,d=Vo(e,t);let{mainAxis:f,crossAxis:p,alignmentAxis:m}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof m=="number"&&(p=a==="end"?m*-1:m),l?{x:p*u,y:f*c}:{x:f*c,y:p*u}}const Mse=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,i;const{x:r,y:s,placement:o,middlewareData:a}=e,l=await Pse(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(i=a.arrow)!=null&&i.alignmentOffset?{}:{x:r+l.x,y:s+l.y,data:{...l,placement:o}}}}},Tse=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:i,placement:r}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:y=>{let{x:v,y:b}=y;return{x:v,y:b}}},...l}=Vo(t,e),c={x:n,y:i},u=await yp(e,l),d=Hs(Ho(r)),f=qC(d);let p=c[f],m=c[d];if(s){const y=f==="y"?"top":"left",v=f==="y"?"bottom":"right",b=p+u[y],w=p-u[v];p=U2(b,p,w)}if(o){const y=d==="y"?"top":"left",v=d==="y"?"bottom":"right",b=m+u[y],w=m-u[v];m=U2(b,m,w)}const g=a.fn({...e,[f]:p,[d]:m});return{...g,data:{x:g.x-n,y:g.y-i,enabled:{[f]:s,[d]:o}}}}}},Rse=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:i,placement:r,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Vo(t,e),u={x:n,y:i},d=Hs(r),f=qC(d);let p=u[f],m=u[d];const g=Vo(a,e),y=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const w=f==="y"?"height":"width",k=s.reference[f]-s.floating[w]+y.mainAxis,_=s.reference[f]+s.reference[w]-y.mainAxis;p<k?p=k:p>_&&(p=_)}if(c){var v,b;const w=f==="y"?"width":"height",k=F6.has(Ho(r)),_=s.reference[d]-s.floating[w]+(k&&((v=o.offset)==null?void 0:v[d])||0)+(k?0:y.crossAxis),E=s.reference[d]+s.reference[w]+(k?0:((b=o.offset)==null?void 0:b[d])||0)-(k?y.crossAxis:0);m<_?m=_:m>E&&(m=E)}return{[f]:p,[d]:m}}}},Ose=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,i;const{placement:r,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...c}=Vo(t,e),u=await yp(e,c),d=Ho(r),f=Ud(r),p=Hs(r)==="y",{width:m,height:g}=s.floating;let y,v;d==="top"||d==="bottom"?(y=d,v=f===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(v=d,y=f==="end"?"top":"bottom");const b=g-u.top-u.bottom,w=m-u.left-u.right,k=fl(g-u[y],b),_=fl(m-u[v],w),E=!e.middlewareData.shift;let C=k,N=_;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(N=w),(i=e.middlewareData.shift)!=null&&i.enabled.y&&(C=b),E&&!f){const R=tr(u.left,0),I=tr(u.right,0),D=tr(u.top,0),K=tr(u.bottom,0);p?N=m-2*(R!==0||I!==0?R+I:tr(u.left,u.right)):C=g-2*(D!==0||K!==0?D+K:tr(u.top,u.bottom))}await l({...e,availableWidth:N,availableHeight:C});const M=await o.getDimensions(a.floating);return m!==M.width||g!==M.height?{reset:{rects:!0}}:{}}}};function cb(){return typeof window<"u"}function Vd(t){return B6(t)?(t.nodeName||"").toLowerCase():"#document"}function cr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function oo(t){var e;return(e=(B6(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function B6(t){return cb()?t instanceof Node||t instanceof cr(t).Node:!1}function ms(t){return cb()?t instanceof Element||t instanceof cr(t).Element:!1}function ro(t){return cb()?t instanceof HTMLElement||t instanceof cr(t).HTMLElement:!1}function MM(t){return!cb()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof cr(t).ShadowRoot}const Ise=new Set(["inline","contents"]);function qp(t){const{overflow:e,overflowX:n,overflowY:i,display:r}=gs(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!Ise.has(r)}const Dse=new Set(["table","td","th"]);function Lse(t){return Dse.has(Vd(t))}const jse=[":popover-open",":modal"];function ub(t){return jse.some(e=>{try{return t.matches(e)}catch{return!1}})}const $se=["transform","translate","scale","rotate","perspective"],Fse=["transform","translate","scale","rotate","perspective","filter"],Bse=["paint","layout","strict","content"];function JC(t){const e=ZC(),n=ms(t)?gs(t):t;return $se.some(i=>n[i]?n[i]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||Fse.some(i=>(n.willChange||"").includes(i))||Bse.some(i=>(n.contain||"").includes(i))}function zse(t){let e=hl(t);for(;ro(e)&&!Pd(e);){if(JC(e))return e;if(ub(e))return null;e=hl(e)}return null}function ZC(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Use=new Set(["html","body","#document"]);function Pd(t){return Use.has(Vd(t))}function gs(t){return cr(t).getComputedStyle(t)}function db(t){return ms(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function hl(t){if(Vd(t)==="html")return t;const e=t.assignedSlot||t.parentNode||MM(t)&&t.host||oo(t);return MM(e)?e.host:e}function z6(t){const e=hl(t);return Pd(e)?t.ownerDocument?t.ownerDocument.body:t.body:ro(e)&&qp(e)?e:z6(e)}function bp(t,e,n){var i;e===void 0&&(e=[]),n===void 0&&(n=!0);const r=z6(t),s=r===((i=t.ownerDocument)==null?void 0:i.body),o=cr(r);if(s){const a=H2(o);return e.concat(o,o.visualViewport||[],qp(r)?r:[],a&&n?bp(a):[])}return e.concat(r,bp(r,[],n))}function H2(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function U6(t){const e=gs(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=ro(t),s=r?t.offsetWidth:n,o=r?t.offsetHeight:i,a=$v(n)!==s||$v(i)!==o;return a&&(n=s,i=o),{width:n,height:i,$:a}}function QC(t){return ms(t)?t:t.contextElement}function Gu(t){const e=QC(t);if(!ro(e))return Qs(1);const n=e.getBoundingClientRect(),{width:i,height:r,$:s}=U6(e);let o=(s?$v(n.width):n.width)/i,a=(s?$v(n.height):n.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const Vse=Qs(0);function V6(t){const e=cr(t);return!ZC()||!e.visualViewport?Vse:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Hse(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==cr(t)?!1:e}function Rc(t,e,n,i){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=QC(t);let o=Qs(1);e&&(i?ms(i)&&(o=Gu(i)):o=Gu(t));const a=Hse(s,n,i)?V6(s):Qs(0);let l=(r.left+a.x)/o.x,c=(r.top+a.y)/o.y,u=r.width/o.x,d=r.height/o.y;if(s){const f=cr(s),p=i&&ms(i)?cr(i):i;let m=f,g=H2(m);for(;g&&i&&p!==m;){const y=Gu(g),v=g.getBoundingClientRect(),b=gs(g),w=v.left+(g.clientLeft+parseFloat(b.paddingLeft))*y.x,k=v.top+(g.clientTop+parseFloat(b.paddingTop))*y.y;l*=y.x,c*=y.y,u*=y.x,d*=y.y,l+=w,c+=k,m=cr(g),g=H2(m)}}return Bv({width:u,height:d,x:l,y:c})}function eE(t,e){const n=db(t).scrollLeft;return e?e.left+n:Rc(oo(t)).left+n}function H6(t,e,n){n===void 0&&(n=!1);const i=t.getBoundingClientRect(),r=i.left+e.scrollLeft-(n?0:eE(t,i)),s=i.top+e.scrollTop;return{x:r,y:s}}function Wse(t){let{elements:e,rect:n,offsetParent:i,strategy:r}=t;const s=r==="fixed",o=oo(i),a=e?ub(e.floating):!1;if(i===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=Qs(1);const u=Qs(0),d=ro(i);if((d||!d&&!s)&&((Vd(i)!=="body"||qp(o))&&(l=db(i)),ro(i))){const p=Rc(i);c=Gu(i),u.x=p.x+i.clientLeft,u.y=p.y+i.clientTop}const f=o&&!d&&!s?H6(o,l,!0):Qs(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+f.x,y:n.y*c.y-l.scrollTop*c.y+u.y+f.y}}function Gse(t){return Array.from(t.getClientRects())}function Kse(t){const e=oo(t),n=db(t),i=t.ownerDocument.body,r=tr(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),s=tr(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let o=-n.scrollLeft+eE(t);const a=-n.scrollTop;return gs(i).direction==="rtl"&&(o+=tr(e.clientWidth,i.clientWidth)-r),{width:r,height:s,x:o,y:a}}function qse(t,e){const n=cr(t),i=oo(t),r=n.visualViewport;let s=i.clientWidth,o=i.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;const c=ZC();(!c||c&&e==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a,y:l}}const Yse=new Set(["absolute","fixed"]);function Xse(t,e){const n=Rc(t,!0,e==="fixed"),i=n.top+t.clientTop,r=n.left+t.clientLeft,s=ro(t)?Gu(t):Qs(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=r*s.x,c=i*s.y;return{width:o,height:a,x:l,y:c}}function TM(t,e,n){let i;if(e==="viewport")i=qse(t,n);else if(e==="document")i=Kse(oo(t));else if(ms(e))i=Xse(e,n);else{const r=V6(t);i={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return Bv(i)}function W6(t,e){const n=hl(t);return n===e||!ms(n)||Pd(n)?!1:gs(n).position==="fixed"||W6(n,e)}function Jse(t,e){const n=e.get(t);if(n)return n;let i=bp(t,[],!1).filter(a=>ms(a)&&Vd(a)!=="body"),r=null;const s=gs(t).position==="fixed";let o=s?hl(t):t;for(;ms(o)&&!Pd(o);){const a=gs(o),l=JC(o);!l&&a.position==="fixed"&&(r=null),(s?!l&&!r:!l&&a.position==="static"&&!!r&&Yse.has(r.position)||qp(o)&&!l&&W6(t,o))?i=i.filter(u=>u!==o):r=a,o=hl(o)}return e.set(t,i),i}function Zse(t){let{element:e,boundary:n,rootBoundary:i,strategy:r}=t;const o=[...n==="clippingAncestors"?ub(e)?[]:Jse(e,this._c):[].concat(n),i],a=o[0],l=o.reduce((c,u)=>{const d=TM(e,u,r);return c.top=tr(d.top,c.top),c.right=fl(d.right,c.right),c.bottom=fl(d.bottom,c.bottom),c.left=tr(d.left,c.left),c},TM(e,a,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Qse(t){const{width:e,height:n}=U6(t);return{width:e,height:n}}function eoe(t,e,n){const i=ro(e),r=oo(e),s=n==="fixed",o=Rc(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=Qs(0);function c(){l.x=eE(r)}if(i||!i&&!s)if((Vd(e)!=="body"||qp(r))&&(a=db(e)),i){const p=Rc(e,!0,s,e);l.x=p.x+e.clientLeft,l.y=p.y+e.clientTop}else r&&c();s&&!i&&r&&c();const u=r&&!i&&!s?H6(r,a):Qs(0),d=o.left+a.scrollLeft-l.x-u.x,f=o.top+a.scrollTop-l.y-u.y;return{x:d,y:f,width:o.width,height:o.height}}function y1(t){return gs(t).position==="static"}function RM(t,e){if(!ro(t)||gs(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return oo(t)===n&&(n=n.ownerDocument.body),n}function G6(t,e){const n=cr(t);if(ub(t))return n;if(!ro(t)){let r=hl(t);for(;r&&!Pd(r);){if(ms(r)&&!y1(r))return r;r=hl(r)}return n}let i=RM(t,e);for(;i&&Lse(i)&&y1(i);)i=RM(i,e);return i&&Pd(i)&&y1(i)&&!JC(i)?n:i||zse(t)||n}const toe=async function(t){const e=this.getOffsetParent||G6,n=this.getDimensions,i=await n(t.floating);return{reference:eoe(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function noe(t){return gs(t).direction==="rtl"}const ioe={convertOffsetParentRelativeRectToViewportRelativeRect:Wse,getDocumentElement:oo,getClippingRect:Zse,getOffsetParent:G6,getElementRects:toe,getClientRects:Gse,getDimensions:Qse,getScale:Gu,isElement:ms,isRTL:noe};function K6(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function roe(t,e){let n=null,i;const r=oo(t);function s(){var a;clearTimeout(i),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=t.getBoundingClientRect(),{left:u,top:d,width:f,height:p}=c;if(a||e(),!f||!p)return;const m=cg(d),g=cg(r.clientWidth-(u+f)),y=cg(r.clientHeight-(d+p)),v=cg(u),w={rootMargin:-m+"px "+-g+"px "+-y+"px "+-v+"px",threshold:tr(0,fl(1,l))||1};let k=!0;function _(E){const C=E[0].intersectionRatio;if(C!==l){if(!k)return o();C?o(!1,C):i=setTimeout(()=>{o(!1,1e-7)},1e3)}C===1&&!K6(c,t.getBoundingClientRect())&&o(),k=!1}try{n=new IntersectionObserver(_,{...w,root:r.ownerDocument})}catch{n=new IntersectionObserver(_,w)}n.observe(t)}return o(!0),s}function soe(t,e,n,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,c=QC(t),u=r||s?[...c?bp(c):[],...bp(e)]:[];u.forEach(v=>{r&&v.addEventListener("scroll",n,{passive:!0}),s&&v.addEventListener("resize",n)});const d=c&&a?roe(c,n):null;let f=-1,p=null;o&&(p=new ResizeObserver(v=>{let[b]=v;b&&b.target===c&&p&&(p.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var w;(w=p)==null||w.observe(e)})),n()}),c&&!l&&p.observe(c),p.observe(e));let m,g=l?Rc(t):null;l&&y();function y(){const v=Rc(t);g&&!K6(g,v)&&n(),g=v,m=requestAnimationFrame(y)}return n(),()=>{var v;u.forEach(b=>{r&&b.removeEventListener("scroll",n),s&&b.removeEventListener("resize",n)}),d==null||d(),(v=p)==null||v.disconnect(),p=null,l&&cancelAnimationFrame(m)}}const ooe=Mse,aoe=Tse,loe=Ase,coe=Ose,uoe=Nse,OM=Ese,doe=Rse,foe=(t,e,n)=>{const i=new Map,r={platform:ioe,...n},s={...r.platform,_c:i};return Cse(t,e,{...r,platform:s})};var hoe=typeof document<"u",poe=function(){},m0=hoe?x.useLayoutEffect:poe;function zv(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,i,r;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(i=n;i--!==0;)if(!zv(t[i],e[i]))return!1;return!0}if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!{}.hasOwnProperty.call(e,r[i]))return!1;for(i=n;i--!==0;){const s=r[i];if(!(s==="_owner"&&t.$$typeof)&&!zv(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function q6(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function IM(t,e){const n=q6(t);return Math.round(e*n)/n}function b1(t){const e=x.useRef(t);return m0(()=>{e.current=t}),e}function moe(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:i=[],platform:r,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,d]=x.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,p]=x.useState(i);zv(f,i)||p(i);const[m,g]=x.useState(null),[y,v]=x.useState(null),b=x.useCallback(V=>{V!==E.current&&(E.current=V,g(V))},[]),w=x.useCallback(V=>{V!==C.current&&(C.current=V,v(V))},[]),k=s||m,_=o||y,E=x.useRef(null),C=x.useRef(null),N=x.useRef(u),M=l!=null,R=b1(l),I=b1(r),D=b1(c),K=x.useCallback(()=>{if(!E.current||!C.current)return;const V={placement:e,strategy:n,middleware:f};I.current&&(V.platform=I.current),foe(E.current,C.current,V).then($=>{const ie={...$,isPositioned:D.current!==!1};B.current&&!zv(N.current,ie)&&(N.current=ie,wl.flushSync(()=>{d(ie)}))})},[f,e,n,I,D]);m0(()=>{c===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,d(V=>({...V,isPositioned:!1})))},[c]);const B=x.useRef(!1);m0(()=>(B.current=!0,()=>{B.current=!1}),[]),m0(()=>{if(k&&(E.current=k),_&&(C.current=_),k&&_){if(R.current)return R.current(k,_,K);K()}},[k,_,K,R,M]);const W=x.useMemo(()=>({reference:E,floating:C,setReference:b,setFloating:w}),[b,w]),Y=x.useMemo(()=>({reference:k,floating:_}),[k,_]),te=x.useMemo(()=>{const V={position:n,left:0,top:0};if(!Y.floating)return V;const $=IM(Y.floating,u.x),ie=IM(Y.floating,u.y);return a?{...V,transform:"translate("+$+"px, "+ie+"px)",...q6(Y.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:$,top:ie}},[n,a,Y.floating,u.x,u.y]);return x.useMemo(()=>({...u,update:K,refs:W,elements:Y,floatingStyles:te}),[u,K,W,Y,te])}const goe=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:i,padding:r}=typeof t=="function"?t(n):t;return i&&e(i)?i.current!=null?OM({element:i.current,padding:r}).fn(n):{}:i?OM({element:i,padding:r}).fn(n):{}}}},voe=(t,e)=>({...ooe(t),options:[t,e]}),yoe=(t,e)=>({...aoe(t),options:[t,e]}),boe=(t,e)=>({...doe(t),options:[t,e]}),woe=(t,e)=>({...loe(t),options:[t,e]}),xoe=(t,e)=>({...coe(t),options:[t,e]}),Soe=(t,e)=>({...uoe(t),options:[t,e]}),koe=(t,e)=>({...goe(t),options:[t,e]});var _oe="Arrow",Y6=x.forwardRef((t,e)=>{const{children:n,width:i=10,height:r=5,...s}=t;return h.jsx(Ue.svg,{...s,ref:e,width:i,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:h.jsx("polygon",{points:"0,0 30,0 15,10"})})});Y6.displayName=_oe;var Coe=Y6;function tE(t){const[e,n]=x.useState(void 0);return Kn(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const i=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const s=r[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return i.observe(t,{box:"border-box"}),()=>i.unobserve(t)}else n(void 0)},[t]),e}var nE="Popper",[X6,Hd]=vs(nE),[Eoe,J6]=X6(nE),Z6=t=>{const{__scopePopper:e,children:n}=t,[i,r]=x.useState(null);return h.jsx(Eoe,{scope:e,anchor:i,onAnchorChange:r,children:n})};Z6.displayName=nE;var Q6="PopperAnchor",e$=x.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:i,...r}=t,s=J6(Q6,n),o=x.useRef(null),a=st(e,o);return x.useEffect(()=>{s.onAnchorChange((i==null?void 0:i.current)||o.current)}),i?null:h.jsx(Ue.div,{...r,ref:a})});e$.displayName=Q6;var iE="PopperContent",[Aoe,Noe]=X6(iE),t$=x.forwardRef((t,e)=>{var S,P,O,T,q,H;const{__scopePopper:n,side:i="bottom",sideOffset:r=0,align:s="center",alignOffset:o=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:f=!1,updatePositionStrategy:p="optimized",onPlaced:m,...g}=t,y=J6(iE,n),[v,b]=x.useState(null),w=st(e,ne=>b(ne)),[k,_]=x.useState(null),E=tE(k),C=(E==null?void 0:E.width)??0,N=(E==null?void 0:E.height)??0,M=i+(s!=="center"?"-"+s:""),R=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},I=Array.isArray(c)?c:[c],D=I.length>0,K={padding:R,boundary:I.filter(Moe),altBoundary:D},{refs:B,floatingStyles:W,placement:Y,isPositioned:te,middlewareData:V}=moe({strategy:"fixed",placement:M,whileElementsMounted:(...ne)=>soe(...ne,{animationFrame:p==="always"}),elements:{reference:y.anchor},middleware:[voe({mainAxis:r+N,alignmentAxis:o}),l&&yoe({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?boe():void 0,...K}),l&&woe({...K}),xoe({...K,apply:({elements:ne,rects:J,availableWidth:Pe,availableHeight:je})=>{const{width:Be,height:De}=J.reference,Ge=ne.floating.style;Ge.setProperty("--radix-popper-available-width",`${Pe}px`),Ge.setProperty("--radix-popper-available-height",`${je}px`),Ge.setProperty("--radix-popper-anchor-width",`${Be}px`),Ge.setProperty("--radix-popper-anchor-height",`${De}px`)}}),k&&koe({element:k,padding:a}),Toe({arrowWidth:C,arrowHeight:N}),f&&Soe({strategy:"referenceHidden",...K})]}),[$,ie]=r$(Y),ke=dr(m);Kn(()=>{te&&(ke==null||ke())},[te,ke]);const Z=(S=V.arrow)==null?void 0:S.x,le=(P=V.arrow)==null?void 0:P.y,j=((O=V.arrow)==null?void 0:O.centerOffset)!==0,[L,U]=x.useState();return Kn(()=>{v&&U(window.getComputedStyle(v).zIndex)},[v]),h.jsx("div",{ref:B.setFloating,"data-radix-popper-content-wrapper":"",style:{...W,transform:te?W.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:L,"--radix-popper-transform-origin":[(T=V.transformOrigin)==null?void 0:T.x,(q=V.transformOrigin)==null?void 0:q.y].join(" "),...((H=V.hide)==null?void 0:H.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:h.jsx(Aoe,{scope:n,placedSide:$,onArrowChange:_,arrowX:Z,arrowY:le,shouldHideArrow:j,children:h.jsx(Ue.div,{"data-side":$,"data-align":ie,...g,ref:w,style:{...g.style,animation:te?void 0:"none"}})})})});t$.displayName=iE;var n$="PopperArrow",Poe={top:"bottom",right:"left",bottom:"top",left:"right"},i$=x.forwardRef(function(e,n){const{__scopePopper:i,...r}=e,s=Noe(n$,i),o=Poe[s.placedSide];return h.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:h.jsx(Coe,{...r,ref:n,style:{...r.style,display:"block"}})})});i$.displayName=n$;function Moe(t){return t!==null}var Toe=t=>({name:"transformOrigin",options:t,fn(e){var y,v,b;const{placement:n,rects:i,middlewareData:r}=e,o=((y=r.arrow)==null?void 0:y.centerOffset)!==0,a=o?0:t.arrowWidth,l=o?0:t.arrowHeight,[c,u]=r$(n),d={start:"0%",center:"50%",end:"100%"}[u],f=(((v=r.arrow)==null?void 0:v.x)??0)+a/2,p=(((b=r.arrow)==null?void 0:b.y)??0)+l/2;let m="",g="";return c==="bottom"?(m=o?d:`${f}px`,g=`${-l}px`):c==="top"?(m=o?d:`${f}px`,g=`${i.floating.height+l}px`):c==="right"?(m=`${-l}px`,g=o?d:`${p}px`):c==="left"&&(m=`${i.floating.width+l}px`,g=o?d:`${p}px`),{data:{x:m,y:g}}}});function r$(t){const[e,n="center"]=t.split("-");return[e,n]}var s$=Z6,fb=e$,rE=t$,sE=i$,Roe="Portal",Yp=x.forwardRef((t,e)=>{var a;const{container:n,...i}=t,[r,s]=x.useState(!1);Kn(()=>s(!0),[]);const o=n||r&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?DW.createPortal(h.jsx(Ue.div,{...i,ref:e}),o):null});Yp.displayName=Roe;function oE(t){const e=x.useRef({value:t,previous:t});return x.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var o$=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Ooe="VisuallyHidden",aE=x.forwardRef((t,e)=>h.jsx(Ue.span,{...t,ref:e,style:{...o$,...t.style}}));aE.displayName=Ooe;var Ioe=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Zc=new WeakMap,ug=new WeakMap,dg={},w1=0,a$=function(t){return t&&(t.host||a$(t.parentNode))},Doe=function(t,e){return e.map(function(n){if(t.contains(n))return n;var i=a$(n);return i&&t.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},Loe=function(t,e,n,i){var r=Doe(e,Array.isArray(t)?t:[t]);dg[n]||(dg[n]=new WeakMap);var s=dg[n],o=[],a=new Set,l=new Set(r),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};r.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else try{var p=f.getAttribute(i),m=p!==null&&p!=="false",g=(Zc.get(f)||0)+1,y=(s.get(f)||0)+1;Zc.set(f,g),s.set(f,y),o.push(f),g===1&&m&&ug.set(f,!0),y===1&&f.setAttribute(n,"true"),m||f.setAttribute(i,"true")}catch(v){console.error("aria-hidden: cannot operate on ",f,v)}})};return u(e),a.clear(),w1++,function(){o.forEach(function(d){var f=Zc.get(d)-1,p=s.get(d)-1;Zc.set(d,f),s.set(d,p),f||(ug.has(d)||d.removeAttribute(i),ug.delete(d)),p||d.removeAttribute(n)}),w1--,w1||(Zc=new WeakMap,Zc=new WeakMap,ug=new WeakMap,dg={})}},l$=function(t,e,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(t)?t:[t]),r=Ioe(t);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live]"))),Loe(i,r,n,"aria-hidden")):function(){return null}},g0="right-scroll-bar-position",v0="width-before-scroll-bar",joe="with-scroll-bars-hidden",$oe="--removed-body-scroll-bar-size";function x1(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function Foe(t,e){var n=x.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(i){var r=n.value;r!==i&&(n.value=i,n.callback(i,r))}}}})[0];return n.callback=e,n.facade}var Boe=typeof window<"u"?x.useLayoutEffect:x.useEffect,DM=new WeakMap;function zoe(t,e){var n=Foe(null,function(i){return t.forEach(function(r){return x1(r,i)})});return Boe(function(){var i=DM.get(n);if(i){var r=new Set(i),s=new Set(t),o=n.current;r.forEach(function(a){s.has(a)||x1(a,null)}),s.forEach(function(a){r.has(a)||x1(a,o)})}DM.set(n,t)},[t]),n}function Uoe(t){return t}function Voe(t,e){e===void 0&&(e=Uoe);var n=[],i=!1,r={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,i);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(i=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){i=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var u=o;o=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return r}function Hoe(t){t===void 0&&(t={});var e=Voe(null);return e.options=Ls({async:!0,ssr:!1},t),e}var c$=function(t){var e=t.sideCar,n=SD(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=e.read();if(!i)throw new Error("Sidecar medium not found");return x.createElement(i,Ls({},n))};c$.isSideCarExport=!0;function Woe(t,e){return t.useMedium(e),c$}var u$=Hoe(),S1=function(){},hb=x.forwardRef(function(t,e){var n=x.useRef(null),i=x.useState({onScrollCapture:S1,onWheelCapture:S1,onTouchMoveCapture:S1}),r=i[0],s=i[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,f=t.sideCar,p=t.noRelative,m=t.noIsolation,g=t.inert,y=t.allowPinchZoom,v=t.as,b=v===void 0?"div":v,w=t.gapMode,k=SD(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=f,E=zoe([n,e]),C=Ls(Ls({},k),r);return x.createElement(x.Fragment,null,u&&x.createElement(_,{sideCar:u$,removeScrollBar:c,shards:d,noRelative:p,noIsolation:m,inert:g,setCallbacks:s,allowPinchZoom:!!y,lockRef:n,gapMode:w}),o?x.cloneElement(x.Children.only(a),Ls(Ls({},C),{ref:E})):x.createElement(b,Ls({},C,{className:l,ref:E}),a))});hb.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};hb.classNames={fullWidth:v0,zeroRight:g0};var Goe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Koe(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=Goe();return e&&t.setAttribute("nonce",e),t}function qoe(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function Yoe(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var Xoe=function(){var t=0,e=null;return{add:function(n){t==0&&(e=Koe())&&(qoe(e,n),Yoe(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Joe=function(){var t=Xoe();return function(e,n){x.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},d$=function(){var t=Joe(),e=function(n){var i=n.styles,r=n.dynamic;return t(i,r),null};return e},Zoe={left:0,top:0,right:0,gap:0},k1=function(t){return parseInt(t||"",10)||0},Qoe=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],i=e[t==="padding"?"paddingTop":"marginTop"],r=e[t==="padding"?"paddingRight":"marginRight"];return[k1(n),k1(i),k1(r)]},eae=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Zoe;var e=Qoe(t),n=document.documentElement.clientWidth,i=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,i-n+e[2]-e[0])}},tae=d$(),Ku="data-scroll-locked",nae=function(t,e,n,i){var r=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(joe,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(a,"px ").concat(i,`;
  }
  body[`).concat(Ku,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(i,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(i,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(g0,` {
    right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(v0,` {
    margin-right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(g0," .").concat(g0,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(v0," .").concat(v0,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(Ku,`] {
    `).concat($oe,": ").concat(a,`px;
  }
`)},LM=function(){var t=parseInt(document.body.getAttribute(Ku)||"0",10);return isFinite(t)?t:0},iae=function(){x.useEffect(function(){return document.body.setAttribute(Ku,(LM()+1).toString()),function(){var t=LM()-1;t<=0?document.body.removeAttribute(Ku):document.body.setAttribute(Ku,t.toString())}},[])},rae=function(t){var e=t.noRelative,n=t.noImportant,i=t.gapMode,r=i===void 0?"margin":i;iae();var s=x.useMemo(function(){return eae(r)},[r]);return x.createElement(tae,{styles:nae(s,!e,r,n?"":"!important")})},W2=!1;if(typeof window<"u")try{var fg=Object.defineProperty({},"passive",{get:function(){return W2=!0,!0}});window.addEventListener("test",fg,fg),window.removeEventListener("test",fg,fg)}catch{W2=!1}var Qc=W2?{passive:!1}:!1,sae=function(t){return t.tagName==="TEXTAREA"},f$=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!sae(t)&&n[e]==="visible")},oae=function(t){return f$(t,"overflowY")},aae=function(t){return f$(t,"overflowX")},jM=function(t,e){var n=e.ownerDocument,i=e;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var r=h$(t,i);if(r){var s=p$(t,i),o=s[1],a=s[2];if(o>a)return!0}i=i.parentNode}while(i&&i!==n.body);return!1},lae=function(t){var e=t.scrollTop,n=t.scrollHeight,i=t.clientHeight;return[e,n,i]},cae=function(t){var e=t.scrollLeft,n=t.scrollWidth,i=t.clientWidth;return[e,n,i]},h$=function(t,e){return t==="v"?oae(e):aae(e)},p$=function(t,e){return t==="v"?lae(e):cae(e)},uae=function(t,e){return t==="h"&&e==="rtl"?-1:1},dae=function(t,e,n,i,r){var s=uae(t,window.getComputedStyle(e).direction),o=s*i,a=n.target,l=e.contains(a),c=!1,u=o>0,d=0,f=0;do{if(!a)break;var p=p$(t,a),m=p[0],g=p[1],y=p[2],v=g-y-s*m;(m||v)&&h$(t,a)&&(d+=v,f+=m);var b=a.parentNode;a=b&&b.nodeType===Node.DOCUMENT_FRAGMENT_NODE?b.host:b}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&Math.abs(d)<1||!u&&Math.abs(f)<1)&&(c=!0),c},hg=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},$M=function(t){return[t.deltaX,t.deltaY]},FM=function(t){return t&&"current"in t?t.current:t},fae=function(t,e){return t[0]===e[0]&&t[1]===e[1]},hae=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},pae=0,eu=[];function mae(t){var e=x.useRef([]),n=x.useRef([0,0]),i=x.useRef(),r=x.useState(pae++)[0],s=x.useState(d$)[0],o=x.useRef(t);x.useEffect(function(){o.current=t},[t]),x.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(r));var g=UG([t.lockRef.current],(t.shards||[]).map(FM),!0).filter(Boolean);return g.forEach(function(y){return y.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),g.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(r))})}}},[t.inert,t.lockRef.current,t.shards]);var a=x.useCallback(function(g,y){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var v=hg(g),b=n.current,w="deltaX"in g?g.deltaX:b[0]-v[0],k="deltaY"in g?g.deltaY:b[1]-v[1],_,E=g.target,C=Math.abs(w)>Math.abs(k)?"h":"v";if("touches"in g&&C==="h"&&E.type==="range")return!1;var N=jM(C,E);if(!N)return!0;if(N?_=C:(_=C==="v"?"h":"v",N=jM(C,E)),!N)return!1;if(!i.current&&"changedTouches"in g&&(w||k)&&(i.current=_),!_)return!0;var M=i.current||_;return dae(M,y,g,M==="h"?w:k)},[]),l=x.useCallback(function(g){var y=g;if(!(!eu.length||eu[eu.length-1]!==s)){var v="deltaY"in y?$M(y):hg(y),b=e.current.filter(function(_){return _.name===y.type&&(_.target===y.target||y.target===_.shadowParent)&&fae(_.delta,v)})[0];if(b&&b.should){y.cancelable&&y.preventDefault();return}if(!b){var w=(o.current.shards||[]).map(FM).filter(Boolean).filter(function(_){return _.contains(y.target)}),k=w.length>0?a(y,w[0]):!o.current.noIsolation;k&&y.cancelable&&y.preventDefault()}}},[]),c=x.useCallback(function(g,y,v,b){var w={name:g,delta:y,target:v,should:b,shadowParent:gae(v)};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(k){return k!==w})},1)},[]),u=x.useCallback(function(g){n.current=hg(g),i.current=void 0},[]),d=x.useCallback(function(g){c(g.type,$M(g),g.target,a(g,t.lockRef.current))},[]),f=x.useCallback(function(g){c(g.type,hg(g),g.target,a(g,t.lockRef.current))},[]);x.useEffect(function(){return eu.push(s),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Qc),document.addEventListener("touchmove",l,Qc),document.addEventListener("touchstart",u,Qc),function(){eu=eu.filter(function(g){return g!==s}),document.removeEventListener("wheel",l,Qc),document.removeEventListener("touchmove",l,Qc),document.removeEventListener("touchstart",u,Qc)}},[]);var p=t.removeScrollBar,m=t.inert;return x.createElement(x.Fragment,null,m?x.createElement(s,{styles:hae(r)}):null,p?x.createElement(rae,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function gae(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const vae=Woe(u$,mae);var pb=x.forwardRef(function(t,e){return x.createElement(hb,Ls({},t,{ref:e,sideCar:vae}))});pb.classNames=hb.classNames;var yae=[" ","Enter","ArrowUp","ArrowDown"],bae=[" ","Enter"],Oc="Select",[mb,gb,wae]=Rp(Oc),[Wd,wge]=vs(Oc,[wae,Hd]),vb=Hd(),[xae,kl]=Wd(Oc),[Sae,kae]=Wd(Oc),m$=t=>{const{__scopeSelect:e,children:n,open:i,defaultOpen:r,onOpenChange:s,value:o,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:d,disabled:f,required:p,form:m}=t,g=vb(e),[y,v]=x.useState(null),[b,w]=x.useState(null),[k,_]=x.useState(!1),E=Ay(c),[C,N]=el({prop:i,defaultProp:r??!1,onChange:s,caller:Oc}),[M,R]=el({prop:o,defaultProp:a,onChange:l,caller:Oc}),I=x.useRef(null),D=y?m||!!y.closest("form"):!0,[K,B]=x.useState(new Set),W=Array.from(K).map(Y=>Y.props.value).join(";");return h.jsx(s$,{...g,children:h.jsxs(xae,{required:p,scope:e,trigger:y,onTriggerChange:v,valueNode:b,onValueNodeChange:w,valueNodeHasChildren:k,onValueNodeHasChildrenChange:_,contentId:$d(),value:M,onValueChange:R,open:C,onOpenChange:N,dir:E,triggerPointerDownPosRef:I,disabled:f,children:[h.jsx(mb.Provider,{scope:e,children:h.jsx(Sae,{scope:t.__scopeSelect,onNativeOptionAdd:x.useCallback(Y=>{B(te=>new Set(te).add(Y))},[]),onNativeOptionRemove:x.useCallback(Y=>{B(te=>{const V=new Set(te);return V.delete(Y),V})},[]),children:n})}),D?h.jsxs(I$,{"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:d,value:M,onChange:Y=>R(Y.target.value),disabled:f,form:m,children:[M===void 0?h.jsx("option",{value:""}):null,Array.from(K)]},W):null]})})};m$.displayName=Oc;var g$="SelectTrigger",v$=x.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:i=!1,...r}=t,s=vb(n),o=kl(g$,n),a=o.disabled||i,l=st(e,o.onTriggerChange),c=gb(n),u=x.useRef("touch"),[d,f,p]=L$(g=>{const y=c().filter(w=>!w.disabled),v=y.find(w=>w.value===o.value),b=j$(y,g,v);b!==void 0&&o.onValueChange(b.value)}),m=g=>{a||(o.onOpenChange(!0),p()),g&&(o.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return h.jsx(fb,{asChild:!0,...s,children:h.jsx(Ue.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":D$(o.value)?"":void 0,...r,ref:l,onClick:ve(r.onClick,g=>{g.currentTarget.focus(),u.current!=="mouse"&&m(g)}),onPointerDown:ve(r.onPointerDown,g=>{u.current=g.pointerType;const y=g.target;y.hasPointerCapture(g.pointerId)&&y.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(m(g),g.preventDefault())}),onKeyDown:ve(r.onKeyDown,g=>{const y=d.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&f(g.key),!(y&&g.key===" ")&&yae.includes(g.key)&&(m(),g.preventDefault())})})})});v$.displayName=g$;var y$="SelectValue",b$=x.forwardRef((t,e)=>{const{__scopeSelect:n,className:i,style:r,children:s,placeholder:o="",...a}=t,l=kl(y$,n),{onValueNodeHasChildrenChange:c}=l,u=s!==void 0,d=st(e,l.onValueNodeChange);return Kn(()=>{c(u)},[c,u]),h.jsx(Ue.span,{...a,ref:d,style:{pointerEvents:"none"},children:D$(l.value)?h.jsx(h.Fragment,{children:o}):s})});b$.displayName=y$;var _ae="SelectIcon",w$=x.forwardRef((t,e)=>{const{__scopeSelect:n,children:i,...r}=t;return h.jsx(Ue.span,{"aria-hidden":!0,...r,ref:e,children:i||"▼"})});w$.displayName=_ae;var Cae="SelectPortal",x$=t=>h.jsx(Yp,{asChild:!0,...t});x$.displayName=Cae;var Ic="SelectContent",S$=x.forwardRef((t,e)=>{const n=kl(Ic,t.__scopeSelect),[i,r]=x.useState();if(Kn(()=>{r(new DocumentFragment)},[]),!n.open){const s=i;return s?wl.createPortal(h.jsx(k$,{scope:t.__scopeSelect,children:h.jsx(mb.Slot,{scope:t.__scopeSelect,children:h.jsx("div",{children:t.children})})}),s):null}return h.jsx(_$,{...t,ref:e})});S$.displayName=Ic;var Kr=10,[k$,_l]=Wd(Ic),Eae="SelectContentImpl",Aae=pd("SelectContent.RemoveScroll"),_$=x.forwardRef((t,e)=>{const{__scopeSelect:n,position:i="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:s,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:p,sticky:m,hideWhenDetached:g,avoidCollisions:y,...v}=t,b=kl(Ic,n),[w,k]=x.useState(null),[_,E]=x.useState(null),C=st(e,S=>k(S)),[N,M]=x.useState(null),[R,I]=x.useState(null),D=gb(n),[K,B]=x.useState(!1),W=x.useRef(!1);x.useEffect(()=>{if(w)return l$(w)},[w]),KC();const Y=x.useCallback(S=>{const[P,...O]=D().map(H=>H.ref.current),[T]=O.slice(-1),q=document.activeElement;for(const H of S)if(H===q||(H==null||H.scrollIntoView({block:"nearest"}),H===P&&_&&(_.scrollTop=0),H===T&&_&&(_.scrollTop=_.scrollHeight),H==null||H.focus(),document.activeElement!==q))return},[D,_]),te=x.useCallback(()=>Y([N,w]),[Y,N,w]);x.useEffect(()=>{K&&te()},[K,te]);const{onOpenChange:V,triggerPointerDownPosRef:$}=b;x.useEffect(()=>{if(w){let S={x:0,y:0};const P=T=>{var q,H;S={x:Math.abs(Math.round(T.pageX)-(((q=$.current)==null?void 0:q.x)??0)),y:Math.abs(Math.round(T.pageY)-(((H=$.current)==null?void 0:H.y)??0))}},O=T=>{S.x<=10&&S.y<=10?T.preventDefault():w.contains(T.target)||V(!1),document.removeEventListener("pointermove",P),$.current=null};return $.current!==null&&(document.addEventListener("pointermove",P),document.addEventListener("pointerup",O,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",P),document.removeEventListener("pointerup",O,{capture:!0})}}},[w,V,$]),x.useEffect(()=>{const S=()=>V(!1);return window.addEventListener("blur",S),window.addEventListener("resize",S),()=>{window.removeEventListener("blur",S),window.removeEventListener("resize",S)}},[V]);const[ie,ke]=L$(S=>{const P=D().filter(q=>!q.disabled),O=P.find(q=>q.ref.current===document.activeElement),T=j$(P,S,O);T&&setTimeout(()=>T.ref.current.focus())}),Z=x.useCallback((S,P,O)=>{const T=!W.current&&!O;(b.value!==void 0&&b.value===P||T)&&(M(S),T&&(W.current=!0))},[b.value]),le=x.useCallback(()=>w==null?void 0:w.focus(),[w]),j=x.useCallback((S,P,O)=>{const T=!W.current&&!O;(b.value!==void 0&&b.value===P||T)&&I(S)},[b.value]),L=i==="popper"?G2:C$,U=L===G2?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:p,sticky:m,hideWhenDetached:g,avoidCollisions:y}:{};return h.jsx(k$,{scope:n,content:w,viewport:_,onViewportChange:E,itemRefCallback:Z,selectedItem:N,onItemLeave:le,itemTextRefCallback:j,focusSelectedItem:te,selectedItemText:R,position:i,isPositioned:K,searchRef:ie,children:h.jsx(pb,{as:Aae,allowPinchZoom:!0,children:h.jsx(lb,{asChild:!0,trapped:b.open,onMountAutoFocus:S=>{S.preventDefault()},onUnmountAutoFocus:ve(r,S=>{var P;(P=b.trigger)==null||P.focus({preventScroll:!0}),S.preventDefault()}),children:h.jsx(Kp,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:S=>S.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:h.jsx(L,{role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:S=>S.preventDefault(),...v,...U,onPlaced:()=>B(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:ve(v.onKeyDown,S=>{const P=S.ctrlKey||S.altKey||S.metaKey;if(S.key==="Tab"&&S.preventDefault(),!P&&S.key.length===1&&ke(S.key),["ArrowUp","ArrowDown","Home","End"].includes(S.key)){let T=D().filter(q=>!q.disabled).map(q=>q.ref.current);if(["ArrowUp","End"].includes(S.key)&&(T=T.slice().reverse()),["ArrowUp","ArrowDown"].includes(S.key)){const q=S.target,H=T.indexOf(q);T=T.slice(H+1)}setTimeout(()=>Y(T)),S.preventDefault()}})})})})})})});_$.displayName=Eae;var Nae="SelectItemAlignedPosition",C$=x.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:i,...r}=t,s=kl(Ic,n),o=_l(Ic,n),[a,l]=x.useState(null),[c,u]=x.useState(null),d=st(e,C=>u(C)),f=gb(n),p=x.useRef(!1),m=x.useRef(!0),{viewport:g,selectedItem:y,selectedItemText:v,focusSelectedItem:b}=o,w=x.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&c&&g&&y&&v){const C=s.trigger.getBoundingClientRect(),N=c.getBoundingClientRect(),M=s.valueNode.getBoundingClientRect(),R=v.getBoundingClientRect();if(s.dir!=="rtl"){const q=R.left-N.left,H=M.left-q,ne=C.left-H,J=C.width+ne,Pe=Math.max(J,N.width),je=window.innerWidth-Kr,Be=jv(H,[Kr,Math.max(Kr,je-Pe)]);a.style.minWidth=J+"px",a.style.left=Be+"px"}else{const q=N.right-R.right,H=window.innerWidth-M.right-q,ne=window.innerWidth-C.right-H,J=C.width+ne,Pe=Math.max(J,N.width),je=window.innerWidth-Kr,Be=jv(H,[Kr,Math.max(Kr,je-Pe)]);a.style.minWidth=J+"px",a.style.right=Be+"px"}const I=f(),D=window.innerHeight-Kr*2,K=g.scrollHeight,B=window.getComputedStyle(c),W=parseInt(B.borderTopWidth,10),Y=parseInt(B.paddingTop,10),te=parseInt(B.borderBottomWidth,10),V=parseInt(B.paddingBottom,10),$=W+Y+K+V+te,ie=Math.min(y.offsetHeight*5,$),ke=window.getComputedStyle(g),Z=parseInt(ke.paddingTop,10),le=parseInt(ke.paddingBottom,10),j=C.top+C.height/2-Kr,L=D-j,U=y.offsetHeight/2,S=y.offsetTop+U,P=W+Y+S,O=$-P;if(P<=j){const q=I.length>0&&y===I[I.length-1].ref.current;a.style.bottom="0px";const H=c.clientHeight-g.offsetTop-g.offsetHeight,ne=Math.max(L,U+(q?le:0)+H+te),J=P+ne;a.style.height=J+"px"}else{const q=I.length>0&&y===I[0].ref.current;a.style.top="0px";const ne=Math.max(j,W+g.offsetTop+(q?Z:0)+U)+O;a.style.height=ne+"px",g.scrollTop=P-j+g.offsetTop}a.style.margin=`${Kr}px 0`,a.style.minHeight=ie+"px",a.style.maxHeight=D+"px",i==null||i(),requestAnimationFrame(()=>p.current=!0)}},[f,s.trigger,s.valueNode,a,c,g,y,v,s.dir,i]);Kn(()=>w(),[w]);const[k,_]=x.useState();Kn(()=>{c&&_(window.getComputedStyle(c).zIndex)},[c]);const E=x.useCallback(C=>{C&&m.current===!0&&(w(),b==null||b(),m.current=!1)},[w,b]);return h.jsx(Mae,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:p,onScrollButtonChange:E,children:h.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:k},children:h.jsx(Ue.div,{...r,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});C$.displayName=Nae;var Pae="SelectPopperPosition",G2=x.forwardRef((t,e)=>{const{__scopeSelect:n,align:i="start",collisionPadding:r=Kr,...s}=t,o=vb(n);return h.jsx(rE,{...o,...s,ref:e,align:i,collisionPadding:r,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});G2.displayName=Pae;var[Mae,lE]=Wd(Ic,{}),K2="SelectViewport",E$=x.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:i,...r}=t,s=_l(K2,n),o=lE(K2,n),a=st(e,s.onViewportChange),l=x.useRef(0);return h.jsxs(h.Fragment,{children:[h.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),h.jsx(mb.Slot,{scope:n,children:h.jsx(Ue.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:ve(r.onScroll,c=>{const u=c.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:f}=o;if(f!=null&&f.current&&d){const p=Math.abs(l.current-u.scrollTop);if(p>0){const m=window.innerHeight-Kr*2,g=parseFloat(d.style.minHeight),y=parseFloat(d.style.height),v=Math.max(g,y);if(v<m){const b=v+p,w=Math.min(m,b),k=b-w;d.style.height=w+"px",d.style.bottom==="0px"&&(u.scrollTop=k>0?k:0,d.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});E$.displayName=K2;var A$="SelectGroup",[Tae,Rae]=Wd(A$),Oae=x.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=$d();return h.jsx(Tae,{scope:n,id:r,children:h.jsx(Ue.div,{role:"group","aria-labelledby":r,...i,ref:e})})});Oae.displayName=A$;var N$="SelectLabel",Iae=x.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=Rae(N$,n);return h.jsx(Ue.div,{id:r.id,...i,ref:e})});Iae.displayName=N$;var Uv="SelectItem",[Dae,P$]=Wd(Uv),M$=x.forwardRef((t,e)=>{const{__scopeSelect:n,value:i,disabled:r=!1,textValue:s,...o}=t,a=kl(Uv,n),l=_l(Uv,n),c=a.value===i,[u,d]=x.useState(s??""),[f,p]=x.useState(!1),m=st(e,b=>{var w;return(w=l.itemRefCallback)==null?void 0:w.call(l,b,i,r)}),g=$d(),y=x.useRef("touch"),v=()=>{r||(a.onValueChange(i),a.onOpenChange(!1))};if(i==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return h.jsx(Dae,{scope:n,value:i,disabled:r,textId:g,isSelected:c,onItemTextChange:x.useCallback(b=>{d(w=>w||((b==null?void 0:b.textContent)??"").trim())},[]),children:h.jsx(mb.ItemSlot,{scope:n,value:i,disabled:r,textValue:u,children:h.jsx(Ue.div,{role:"option","aria-labelledby":g,"data-highlighted":f?"":void 0,"aria-selected":c&&f,"data-state":c?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...o,ref:m,onFocus:ve(o.onFocus,()=>p(!0)),onBlur:ve(o.onBlur,()=>p(!1)),onClick:ve(o.onClick,()=>{y.current!=="mouse"&&v()}),onPointerUp:ve(o.onPointerUp,()=>{y.current==="mouse"&&v()}),onPointerDown:ve(o.onPointerDown,b=>{y.current=b.pointerType}),onPointerMove:ve(o.onPointerMove,b=>{var w;y.current=b.pointerType,r?(w=l.onItemLeave)==null||w.call(l):y.current==="mouse"&&b.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ve(o.onPointerLeave,b=>{var w;b.currentTarget===document.activeElement&&((w=l.onItemLeave)==null||w.call(l))}),onKeyDown:ve(o.onKeyDown,b=>{var k;((k=l.searchRef)==null?void 0:k.current)!==""&&b.key===" "||(bae.includes(b.key)&&v(),b.key===" "&&b.preventDefault())})})})})});M$.displayName=Uv;var Wf="SelectItemText",T$=x.forwardRef((t,e)=>{const{__scopeSelect:n,className:i,style:r,...s}=t,o=kl(Wf,n),a=_l(Wf,n),l=P$(Wf,n),c=kae(Wf,n),[u,d]=x.useState(null),f=st(e,v=>d(v),l.onItemTextChange,v=>{var b;return(b=a.itemTextRefCallback)==null?void 0:b.call(a,v,l.value,l.disabled)}),p=u==null?void 0:u.textContent,m=x.useMemo(()=>h.jsx("option",{value:l.value,disabled:l.disabled,children:p},l.value),[l.disabled,l.value,p]),{onNativeOptionAdd:g,onNativeOptionRemove:y}=c;return Kn(()=>(g(m),()=>y(m)),[g,y,m]),h.jsxs(h.Fragment,{children:[h.jsx(Ue.span,{id:l.textId,...s,ref:f}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?wl.createPortal(s.children,o.valueNode):null]})});T$.displayName=Wf;var R$="SelectItemIndicator",Lae=x.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t;return P$(R$,n).isSelected?h.jsx(Ue.span,{"aria-hidden":!0,...i,ref:e}):null});Lae.displayName=R$;var q2="SelectScrollUpButton",jae=x.forwardRef((t,e)=>{const n=_l(q2,t.__scopeSelect),i=lE(q2,t.__scopeSelect),[r,s]=x.useState(!1),o=st(e,i.onScrollButtonChange);return Kn(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollTop>0;s(c)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),r?h.jsx(O$,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});jae.displayName=q2;var Y2="SelectScrollDownButton",$ae=x.forwardRef((t,e)=>{const n=_l(Y2,t.__scopeSelect),i=lE(Y2,t.__scopeSelect),[r,s]=x.useState(!1),o=st(e,i.onScrollButtonChange);return Kn(()=>{if(n.viewport&&n.isPositioned){let a=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;s(u)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),r?h.jsx(O$,{...t,ref:o,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});$ae.displayName=Y2;var O$=x.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:i,...r}=t,s=_l("SelectScrollButton",n),o=x.useRef(null),a=gb(n),l=x.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return x.useEffect(()=>()=>l(),[l]),Kn(()=>{var u;const c=a().find(d=>d.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[a]),h.jsx(Ue.div,{"aria-hidden":!0,...r,ref:e,style:{flexShrink:0,...r.style},onPointerDown:ve(r.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(i,50))}),onPointerMove:ve(r.onPointerMove,()=>{var c;(c=s.onItemLeave)==null||c.call(s),o.current===null&&(o.current=window.setInterval(i,50))}),onPointerLeave:ve(r.onPointerLeave,()=>{l()})})}),Fae="SelectSeparator",Bae=x.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t;return h.jsx(Ue.div,{"aria-hidden":!0,...i,ref:e})});Bae.displayName=Fae;var X2="SelectArrow",zae=x.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=vb(n),s=kl(X2,n),o=_l(X2,n);return s.open&&o.position==="popper"?h.jsx(sE,{...r,...i,ref:e}):null});zae.displayName=X2;var Uae="SelectBubbleInput",I$=x.forwardRef(({__scopeSelect:t,value:e,...n},i)=>{const r=x.useRef(null),s=st(i,r),o=oE(e);return x.useEffect(()=>{const a=r.current;if(!a)return;const l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&u){const d=new Event("change",{bubbles:!0});u.call(a,e),a.dispatchEvent(d)}},[o,e]),h.jsx(Ue.select,{...n,style:{...o$,...n.style},ref:s,defaultValue:e})});I$.displayName=Uae;function D$(t){return t===""||t===void 0}function L$(t){const e=dr(t),n=x.useRef(""),i=x.useRef(0),r=x.useCallback(o=>{const a=n.current+o;e(a),function l(c){n.current=c,window.clearTimeout(i.current),c!==""&&(i.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),s=x.useCallback(()=>{n.current="",window.clearTimeout(i.current)},[]);return x.useEffect(()=>()=>window.clearTimeout(i.current),[]),[n,r,s]}function j$(t,e,n){const r=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=Vae(t,Math.max(s,0));r.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.textValue.toLowerCase().startsWith(r.toLowerCase()));return l!==n?l:void 0}function Vae(t,e){return t.map((n,i)=>t[(e+i)%t.length])}var Hae=m$,$$=v$,Wae=b$,Gae=w$,Kae=x$,F$=S$,qae=E$,B$=M$,Yae=T$;const pg=Hae,mg=Wae,Gf=x.forwardRef(({className:t,children:e,...n},i)=>h.jsxs($$,{ref:i,className:ee("flex h-10 items-center justify-between rounded-md border border-stone-600 bg-stone-900 px-3 py-2 text-sm ring-offset-stone-800 placeholder:text-stone-500 focus:outline-none focus:ring-2 focus:ring-stone-600 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...n,children:[e,h.jsx(Gae,{asChild:!0,children:h.jsx("span",{className:"icon-[lucide--chevron-down] size-4 opacity-50"})})]}));Gf.displayName=$$.displayName;const Kf=x.forwardRef(({className:t,children:e,position:n="popper",...i},r)=>h.jsx(Kae,{children:h.jsx(F$,{ref:r,className:ee("relative z-50 min-w-32 overflow-hidden rounded-md border border-stone-600 bg-stone-900 text-white shadow-md",t),position:n,...i,children:h.jsx(qae,{className:"p-1",children:e})})}));Kf.displayName=F$.displayName;const Gl=x.forwardRef(({className:t,children:e,...n},i)=>h.jsx(B$,{ref:i,className:ee("w-full cursor-default select-none rounded-sm px-2 py-1.5 text-sm outline-none transition-colors duration-75 focus:bg-stone-800 focus:text-mantis-400 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:h.jsx(Yae,{children:e})}));Gl.displayName=B$.displayName;var z$=["PageUp","PageDown"],U$=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],V$={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Gd="Slider",[J2,Xae,Jae]=Rp(Gd),[H$,xge]=vs(Gd,[Jae]),[Zae,yb]=H$(Gd),W$=x.forwardRef((t,e)=>{const{name:n,min:i=0,max:r=100,step:s=1,orientation:o="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[i],value:u,onValueChange:d=()=>{},onValueCommit:f=()=>{},inverted:p=!1,form:m,...g}=t,y=x.useRef(new Set),v=x.useRef(0),w=o==="horizontal"?Qae:ele,[k=[],_]=el({prop:u,defaultProp:c,onChange:I=>{var K;(K=[...y.current][v.current])==null||K.focus(),d(I)}}),E=x.useRef(k);function C(I){const D=sle(k,I);R(I,D)}function N(I){R(I,v.current)}function M(){const I=E.current[v.current];k[v.current]!==I&&f(k)}function R(I,D,{commit:K}={commit:!1}){const B=cle(s),W=ule(Math.round((I-i)/s)*s+i,B),Y=jv(W,[i,r]);_((te=[])=>{const V=ile(te,Y,D);if(lle(V,l*s)){v.current=V.indexOf(Y);const $=String(V)!==String(te);return $&&K&&f(V),$?V:te}else return te})}return h.jsx(Zae,{scope:t.__scopeSlider,name:n,disabled:a,min:i,max:r,valueIndexToChangeRef:v,thumbs:y.current,values:k,orientation:o,form:m,children:h.jsx(J2.Provider,{scope:t.__scopeSlider,children:h.jsx(J2.Slot,{scope:t.__scopeSlider,children:h.jsx(w,{"aria-disabled":a,"data-disabled":a?"":void 0,...g,ref:e,onPointerDown:ve(g.onPointerDown,()=>{a||(E.current=k)}),min:i,max:r,inverted:p,onSlideStart:a?void 0:C,onSlideMove:a?void 0:N,onSlideEnd:a?void 0:M,onHomeKeyDown:()=>!a&&R(i,0,{commit:!0}),onEndKeyDown:()=>!a&&R(r,k.length-1,{commit:!0}),onStepKeyDown:({event:I,direction:D})=>{if(!a){const W=z$.includes(I.key)||I.shiftKey&&U$.includes(I.key)?10:1,Y=v.current,te=k[Y],V=s*W*D;R(te+V,Y,{commit:!0})}}})})})})});W$.displayName=Gd;var[G$,K$]=H$(Gd,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Qae=x.forwardRef((t,e)=>{const{min:n,max:i,dir:r,inverted:s,onSlideStart:o,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c,...u}=t,[d,f]=x.useState(null),p=st(e,w=>f(w)),m=x.useRef(void 0),g=Ay(r),y=g==="ltr",v=y&&!s||!y&&s;function b(w){const k=m.current||d.getBoundingClientRect(),_=[0,k.width],C=cE(_,v?[n,i]:[i,n]);return m.current=k,C(w-k.left)}return h.jsx(G$,{scope:t.__scopeSlider,startEdge:v?"left":"right",endEdge:v?"right":"left",direction:v?1:-1,size:"width",children:h.jsx(q$,{dir:g,"data-orientation":"horizontal",...u,ref:p,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:w=>{const k=b(w.clientX);o==null||o(k)},onSlideMove:w=>{const k=b(w.clientX);a==null||a(k)},onSlideEnd:()=>{m.current=void 0,l==null||l()},onStepKeyDown:w=>{const _=V$[v?"from-left":"from-right"].includes(w.key);c==null||c({event:w,direction:_?-1:1})}})})}),ele=x.forwardRef((t,e)=>{const{min:n,max:i,inverted:r,onSlideStart:s,onSlideMove:o,onSlideEnd:a,onStepKeyDown:l,...c}=t,u=x.useRef(null),d=st(e,u),f=x.useRef(void 0),p=!r;function m(g){const y=f.current||u.current.getBoundingClientRect(),v=[0,y.height],w=cE(v,p?[i,n]:[n,i]);return f.current=y,w(g-y.top)}return h.jsx(G$,{scope:t.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:h.jsx(q$,{"data-orientation":"vertical",...c,ref:d,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:g=>{const y=m(g.clientY);s==null||s(y)},onSlideMove:g=>{const y=m(g.clientY);o==null||o(y)},onSlideEnd:()=>{f.current=void 0,a==null||a()},onStepKeyDown:g=>{const v=V$[p?"from-bottom":"from-top"].includes(g.key);l==null||l({event:g,direction:v?-1:1})}})})}),q$=x.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:i,onSlideMove:r,onSlideEnd:s,onHomeKeyDown:o,onEndKeyDown:a,onStepKeyDown:l,...c}=t,u=yb(Gd,n);return h.jsx(Ue.span,{...c,ref:e,onKeyDown:ve(t.onKeyDown,d=>{d.key==="Home"?(o(d),d.preventDefault()):d.key==="End"?(a(d),d.preventDefault()):z$.concat(U$).includes(d.key)&&(l(d),d.preventDefault())}),onPointerDown:ve(t.onPointerDown,d=>{const f=d.target;f.setPointerCapture(d.pointerId),d.preventDefault(),u.thumbs.has(f)?f.focus():i(d)}),onPointerMove:ve(t.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&r(d)}),onPointerUp:ve(t.onPointerUp,d=>{const f=d.target;f.hasPointerCapture(d.pointerId)&&(f.releasePointerCapture(d.pointerId),s(d))})})}),Y$="SliderTrack",X$=x.forwardRef((t,e)=>{const{__scopeSlider:n,...i}=t,r=yb(Y$,n);return h.jsx(Ue.span,{"data-disabled":r.disabled?"":void 0,"data-orientation":r.orientation,...i,ref:e})});X$.displayName=Y$;var Z2="SliderRange",J$=x.forwardRef((t,e)=>{const{__scopeSlider:n,...i}=t,r=yb(Z2,n),s=K$(Z2,n),o=x.useRef(null),a=st(e,o),l=r.values.length,c=r.values.map(f=>eF(f,r.min,r.max)),u=l>1?Math.min(...c):0,d=100-Math.max(...c);return h.jsx(Ue.span,{"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0,...i,ref:a,style:{...t.style,[s.startEdge]:u+"%",[s.endEdge]:d+"%"}})});J$.displayName=Z2;var Q2="SliderThumb",Z$=x.forwardRef((t,e)=>{const n=Xae(t.__scopeSlider),[i,r]=x.useState(null),s=st(e,a=>r(a)),o=x.useMemo(()=>i?n().findIndex(a=>a.ref.current===i):-1,[n,i]);return h.jsx(tle,{...t,ref:s,index:o})}),tle=x.forwardRef((t,e)=>{const{__scopeSlider:n,index:i,name:r,...s}=t,o=yb(Q2,n),a=K$(Q2,n),[l,c]=x.useState(null),u=st(e,b=>c(b)),d=l?o.form||!!l.closest("form"):!0,f=tE(l),p=o.values[i],m=p===void 0?0:eF(p,o.min,o.max),g=rle(i,o.values.length),y=f==null?void 0:f[a.size],v=y?ole(y,m,a.direction):0;return x.useEffect(()=>{if(l)return o.thumbs.add(l),()=>{o.thumbs.delete(l)}},[l,o.thumbs]),h.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a.startEdge]:`calc(${m}% + ${v}px)`},children:[h.jsx(J2.ItemSlot,{scope:t.__scopeSlider,children:h.jsx(Ue.span,{role:"slider","aria-label":t["aria-label"]||g,"aria-valuemin":o.min,"aria-valuenow":p,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...s,ref:u,style:p===void 0?{display:"none"}:t.style,onFocus:ve(t.onFocus,()=>{o.valueIndexToChangeRef.current=i})})}),d&&h.jsx(Q$,{name:r??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:p},i)]})});Z$.displayName=Q2;var nle="RadioBubbleInput",Q$=x.forwardRef(({__scopeSlider:t,value:e,...n},i)=>{const r=x.useRef(null),s=st(r,i),o=oE(e);return x.useEffect(()=>{const a=r.current;if(!a)return;const l=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&u){const d=new Event("input",{bubbles:!0});u.call(a,e),a.dispatchEvent(d)}},[o,e]),h.jsx(Ue.input,{style:{display:"none"},...n,ref:s,defaultValue:e})});Q$.displayName=nle;function ile(t=[],e,n){const i=[...t];return i[n]=e,i.sort((r,s)=>r-s)}function eF(t,e,n){const s=100/(n-e)*(t-e);return jv(s,[0,100])}function rle(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function sle(t,e){if(t.length===1)return 0;const n=t.map(r=>Math.abs(r-e)),i=Math.min(...n);return n.indexOf(i)}function ole(t,e,n){const i=t/2,s=cE([0,50],[0,i]);return(i-s(e)*n)*n}function ale(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function lle(t,e){if(e>0){const n=ale(t);return Math.min(...n)>=e}return!0}function cE(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const i=(e[1]-e[0])/(t[1]-t[0]);return e[0]+i*(n-t[0])}}function cle(t){return(String(t).split(".")[1]||"").length}function ule(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}var tF=W$,dle=X$,fle=J$,hle=Z$;const Kl=x.forwardRef(({className:t,...e},n)=>h.jsxs(tF,{ref:n,className:ee("relative flex touch-none select-none items-center",t),...e,children:[h.jsx(dle,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-stone-900",children:h.jsx(fle,{className:"absolute h-full bg-mantis-400"})}),h.jsx(hle,{className:"block size-5 rounded-full border-2 border-stone-900 bg-mantis-400 ring-offset-stone-800 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Kl.displayName=tF.displayName;var bb="Switch",[ple,Sge]=vs(bb),[mle,gle]=ple(bb),nF=x.forwardRef((t,e)=>{const{__scopeSwitch:n,name:i,checked:r,defaultChecked:s,required:o,disabled:a,value:l="on",onCheckedChange:c,form:u,...d}=t,[f,p]=x.useState(null),m=st(e,w=>p(w)),g=x.useRef(!1),y=f?u||!!f.closest("form"):!0,[v,b]=el({prop:r,defaultProp:s??!1,onChange:c,caller:bb});return h.jsxs(mle,{scope:n,checked:v,disabled:a,children:[h.jsx(Ue.button,{type:"button",role:"switch","aria-checked":v,"aria-required":o,"data-state":oF(v),"data-disabled":a?"":void 0,disabled:a,value:l,...d,ref:m,onClick:ve(t.onClick,w=>{b(k=>!k),y&&(g.current=w.isPropagationStopped(),g.current||w.stopPropagation())})}),y&&h.jsx(sF,{control:f,bubbles:!g.current,name:i,value:l,checked:v,required:o,disabled:a,form:u,style:{transform:"translateX(-100%)"}})]})});nF.displayName=bb;var iF="SwitchThumb",rF=x.forwardRef((t,e)=>{const{__scopeSwitch:n,...i}=t,r=gle(iF,n);return h.jsx(Ue.span,{"data-state":oF(r.checked),"data-disabled":r.disabled?"":void 0,...i,ref:e})});rF.displayName=iF;var vle="SwitchBubbleInput",sF=x.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:i=!0,...r},s)=>{const o=x.useRef(null),a=st(o,s),l=oE(n),c=tE(e);return x.useEffect(()=>{const u=o.current;if(!u)return;const d=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(d,"checked").set;if(l!==n&&p){const m=new Event("click",{bubbles:i});p.call(u,n),u.dispatchEvent(m)}},[l,n,i]),h.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...r,tabIndex:-1,ref:a,style:{...r.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});sF.displayName=vle;function oF(t){return t?"checked":"unchecked"}var aF=nF,yle=rF;const da=x.forwardRef(({className:t,...e},n)=>h.jsx(aF,{className:ee("peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-mantis-400 data-[state=unchecked]:bg-stone-900",t),...e,ref:n,children:h.jsx(yle,{className:ee("pointer-events-none block size-5 rounded-full bg-white shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));da.displayName=aF.displayName;const wb=de(!1);function lF({className:t}){const e=Rt(),[n,i]=Fy(),{status:r}=On();return h.jsxs("div",{className:ee("overflow-auto scrollbar-stone-700",t),children:[h.jsxs("h3",{className:"flex items-center gap-2 border-b border-stone-600 py-2 pl-4 text-xl font-semibold",children:[h.jsx("span",{className:"icon-[lucide--settings] size-6"})," ",e("settings.title")]}),h.jsxs(ai,{children:[h.jsxs(li,{children:[h.jsxs(ci,{children:[h.jsx("span",{className:"icon-[lucide--rotate-3d] size-6"}),e("settings.animations.label")]}),h.jsx(bf,{children:e("settings.animations.description")})]}),h.jsx(da,{className:"ml-8",checked:n.animations,onCheckedChange:s=>{i(o=>({...o,animations:s})),s===!1&&q8()}})]}),h.jsxs(ai,{children:[h.jsx(li,{children:h.jsxs(ci,{children:[h.jsx("span",{className:"icon-[lucide--gauge] size-6"}),e("settings.speeds.executionUnit")]})}),h.jsx(Kl,{className:"w-44",..._1({value:n.executionUnit,onValueChange:s=>i(o=>({...o,executionUnit:s})),min:500,max:1})})]}),h.jsx("hr",{className:"border-stone-600"}),h.jsxs(ai,{children:[h.jsx(li,{children:h.jsx(ci,{children:e("settings.instructionCycle.label")})}),h.jsx(da,{className:"ml-8",checked:n.showInstructionCycle,onCheckedChange:s=>i(o=>({...o,showInstructionCycle:s}))})]}),h.jsxs(ai,{children:[h.jsx(li,{children:h.jsx(ci,{children:e("settings.statsCPU.label")})}),h.jsx(da,{className:"ml-8",checked:n.showStatsCPU,onCheckedChange:s=>i(o=>({...o,showStatsCPU:s}))})]}),h.jsx("hr",{className:"border-stone-600"}),h.jsx(ai,{children:h.jsxs(li,{children:[h.jsxs(ci,{children:[h.jsx("span",{className:"icon-[lucide--monitor-smartphone] size-6"}),e("settings.devices.label")]}),h.jsx(bf,{children:e("settings.devices.description")})]})}),h.jsxs(ai,{children:[h.jsx(li,{children:h.jsx(ci,{children:e("settings.devices.keyboard-and-screen")})}),h.jsx(da,{className:"ml-8",checked:n.devices.keyboardAndScreen,onCheckedChange:s=>i(o=>({...o,devices:{...o.devices,keyboardAndScreen:s}}))})]}),h.jsxs(ai,{children:[h.jsxs(li,{children:[h.jsx(ci,{children:e("settings.devices.pic.label")}),h.jsx(bf,{children:e("settings.devices.pic.description")})]}),h.jsx(da,{className:"ml-8",checked:n.devices.pic,onCheckedChange:s=>i(o=>({...o,devices:{...o.devices,pic:s}}))})]}),h.jsxs(ai,{children:[h.jsx(li,{children:h.jsxs(ci,{children:[h.jsx("span",{className:"icon-[lucide--clock] size-6"}),e("settings.speeds.clockSpeed")]})}),h.jsx(Kl,{className:"w-44",..._1({value:n.clockSpeed,onValueChange:s=>i(o=>({...o,clockSpeed:s})),min:3e3,max:100})})]}),h.jsxs(ai,{children:[h.jsx(li,{children:h.jsx(ci,{children:e("settings.devices.pio.label")})}),h.jsxs(pg,{value:n.devices.pio??"null",onValueChange:s=>i(o=>({...o,devices:{...o.devices,pio:s==="null"?null:s,handshake:o.devices.handshake===s?null:o.devices.handshake}})),children:[h.jsx(Gf,{className:"w-52 min-w-[theme(width.52)]",children:h.jsx(mg,{})}),h.jsx(Kf,{children:SX.map(s=>h.jsx(Gl,{value:s,children:e(`settings.devices.pio.${s}`)},s))})]})]}),h.jsxs(ai,{children:[h.jsx(li,{children:h.jsx(ci,{children:e("settings.devices.handshake.label")})}),h.jsxs(pg,{value:n.devices.handshake??"null",onValueChange:s=>i(o=>({...o,devices:{...o.devices,handshake:s==="null"?null:s,pio:o.devices.pio===s?null:o.devices.pio}})),disabled:r.type!=="stopped",children:[h.jsx(Gf,{className:"w-52 min-w-[theme(width.52)]",children:h.jsx(mg,{})}),h.jsx(Kf,{children:kX.map(s=>h.jsx(Gl,{value:s,children:e(`settings.devices.handshake.${s}`)},s))})]})]}),h.jsxs(ai,{children:[h.jsx(li,{children:h.jsxs(ci,{children:[h.jsx("span",{className:"icon-[lucide--printer] size-6"}),e("settings.speeds.printerSpeed")]})}),h.jsx(Kl,{className:"w-44",..._1({value:n.printerSpeed,onValueChange:s=>i(o=>({...o,printerSpeed:s})),min:2e4,max:500})})]}),h.jsx("hr",{className:"border-stone-600"}),h.jsxs(ai,{children:[h.jsxs(li,{children:[h.jsxs(ci,{children:[h.jsx("span",{className:"icon-[lucide--flag] size-6"}),e("settings.flags.label")]}),h.jsx(bf,{children:e("settings.flags.description")})]}),h.jsxs(pg,{value:n.flagsVisibility,onValueChange:s=>i(o=>({...o,flagsVisibility:s})),children:[h.jsx(Gf,{className:"w-32",children:h.jsx(mg,{})}),h.jsxs(Kf,{children:[h.jsx(Gl,{value:"CF_ZF",children:"C Z"}),h.jsx(Gl,{value:"SF_OF_CF_ZF",children:"S O C Z"})]})]})]}),h.jsx("hr",{className:"border-stone-600"}),h.jsxs(ai,{children:[h.jsx(li,{children:h.jsxs(ci,{children:[h.jsx("span",{className:"icon-[lucide--languages] size-6"}),e("settings.language.label")]})}),h.jsxs(pg,{value:n.language,onValueChange:s=>i(o=>({...o,language:s})),children:[h.jsx(Gf,{className:"w-32",children:h.jsx(mg,{})}),h.jsxs(Kf,{children:[h.jsx(Gl,{value:"en",children:h.jsxs("span",{className:"inline-flex items-center gap-2",children:[h.jsx("span",{className:"icon-[circle-flags--uk] size-4"})," English"]})}),h.jsx(Gl,{value:"es",children:h.jsxs("span",{className:"inline-flex items-center gap-2",children:[h.jsx("span",{className:"icon-[circle-flags--ar] size-4"})," Español"]})})]})]})]}),h.jsxs(ai,{children:[h.jsx(li,{children:h.jsxs(ci,{children:[h.jsx("span",{className:"icon-[lucide--pilcrow-square] size-6"}),e("settings.editorFontSize.label")]})}),h.jsxs("div",{className:"flex items-center rounded-lg border border-stone-600 bg-stone-900",children:[h.jsx("button",{className:"m-0.5 flex size-8 items-center justify-center rounded-lg text-white transition-colors hover:enabled:bg-stone-800 disabled:cursor-not-allowed",disabled:n.editorFontSize<=8,onClick:()=>i(s=>({...s,editorFontSize:s.editorFontSize-1})),title:e("settings.editorFontSize.decrease"),children:h.jsx("span",{className:"icon-[lucide--minus] size-4"})}),h.jsx("span",{className:"w-8 text-center text-sm font-normal",children:n.editorFontSize}),h.jsx("button",{className:"m-0.5 flex size-8 items-center justify-center rounded-lg text-white transition-colors hover:enabled:bg-stone-800 disabled:cursor-not-allowed",disabled:n.editorFontSize>=64,onClick:()=>i(s=>({...s,editorFontSize:s.editorFontSize+1})),title:e("settings.editorFontSize.increase"),children:h.jsx("span",{className:"icon-[lucide--plus] size-4"})})]})]}),h.jsx("hr",{className:"border-stone-600"}),h.jsxs(ai,{children:[h.jsxs(li,{children:[h.jsxs(ci,{children:[h.jsx("span",{className:"icon-[lucide--contrast] size-6"}),e("settings.filters.label")]}),h.jsxs(bf,{children:[e("settings.filters.description"),h.jsx("button",{className:"mt-1 block text-mantis-400 transition-colors hover:text-mantis-300",onClick:()=>i(s=>({...s,filterBightness:ou.filterBightness,filterContrast:ou.filterContrast,filterInvert:ou.filterInvert,filterSaturation:ou.filterSaturation})),children:e("settings.filters.revert")})]})]}),h.jsxs("div",{className:"ml-8 grid w-64 grid-cols-[min-content,auto] items-center gap-2",children:[h.jsx("span",{className:"text-xs",children:e("settings.filters.brightness")}),h.jsx(Kl,{value:[n.filterBightness],onValueChange:([s])=>i(o=>({...o,filterBightness:s})),min:0,max:5,step:.05}),h.jsx("span",{className:"text-xs",children:e("settings.filters.contrast")}),h.jsx(Kl,{value:[n.filterContrast],onValueChange:([s])=>i(o=>({...o,filterContrast:s})),min:0,max:5,step:.05}),h.jsx("span",{className:"text-xs",children:e("settings.filters.invert")}),h.jsx(da,{checked:n.filterInvert,onCheckedChange:s=>i(o=>({...o,filterInvert:s}))}),h.jsx("span",{className:"text-xs",children:e("settings.filters.saturation")}),h.jsx(Kl,{value:[n.filterSaturation],onValueChange:([s])=>i(o=>({...o,filterSaturation:s})),min:0,max:5,step:.05})]})]}),h.jsx("hr",{className:"border-stone-600"}),h.jsx("div",{className:"flex justify-end p-4",children:h.jsxs("button",{className:"inline-flex items-center gap-1 text-sm text-red-500 transition-colors hover:text-red-400",onClick:()=>i(s=>({...ou,language:s.language,devices:s.devices})),children:[h.jsx("span",{className:"icon-[lucide--trash-2] size-4"}),e("settings.reset")]})})]})}function ai({children:t}){return h.jsx("div",{className:"m-4 flex items-center justify-between gap-4",children:t})}function li({children:t}){return h.jsx("div",{className:"grow",children:t})}function ci({children:t}){return h.jsx("p",{className:"flex items-center gap-2 font-medium",children:t})}function bf({children:t}){return h.jsx("p",{className:"mt-1 text-xs text-stone-400",children:t})}function _1({value:t,onValueChange:e,min:n,max:i}){const r=Math.log(n),o=(Math.log(i)-r)/100;return{value:[(Math.log(t)-r)/o],onValueChange:a=>e(Math.exp(r+o*a[0])),min:0,max:100}}const ble=()=>({handleShowTour:x.useCallback(()=>{window.startWelcomeTour?window.startWelcomeTour():(localStorage.removeItem("vonsim8-tour-completed"),window.location.reload())},[])}),cF=x.memo(({status:t})=>{const e=x.useMemo(()=>t.type==="running"?"Ejecutando":"Detenido",[t.type]),n=x.useMemo(()=>t.type==="running"?"bg-green-600":"bg-stone-600",[t.type]);return h.jsx("div",{className:"flex items-center gap-2 text-xs",children:h.jsxs("div",{className:ee("flex items-center gap-1.5 rounded-full px-2 py-1 font-medium text-white",n,t.type==="running"&&"animate-pulse-glow"),children:[h.jsx("div",{className:ee("size-2 rounded-full",t.type==="running"?"bg-green-300":"bg-stone-300")}),e]})})});cF.displayName="SimulationStatus";const uF=x.memo(({onShowTour:t,onToggleSettings:e,settingsOpen:n,onToggleEducational:i,educationalOpen:r})=>{const s=Rt();return h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx(O6,{}),h.jsx(us,{content:"Centro de aprendizaje",position:"bottom",children:h.jsx(Zg,{icon:h.jsx(Fe,{icon:jp,className:"size-4"}),onClick:i,variant:r?"secondary":"ghost",size:"md","aria-label":"Centro de aprendizaje",className:ee("hover-lift",r&&"animate-pulse-glow"),"data-testid":"educational-button"})}),h.jsx(us,{content:"Mostrar tour de bienvenida",position:"bottom",children:h.jsx(Zg,{icon:h.jsx(Fe,{icon:AY,className:"size-4"}),onClick:t,variant:"ghost",size:"md","aria-label":"Mostrar tour de bienvenida",className:"hover-lift"})}),h.jsx(us,{content:s("settings.title"),position:"bottom",children:h.jsx(Zg,{icon:h.jsx("span",{className:"icon-[lucide--settings] block size-5"}),onClick:e,variant:n?"secondary":"ghost",size:"md","aria-label":s("settings.title"),className:ee("hover-lift",n&&"animate-pulse-glow"),"data-testid":"settings-button"})})]})});uF.displayName="ActionButtons";const dF=x.memo(()=>{const[t,e]=Ip(wb),[n,i]=x.useState(!1),[r,s]=x.useState(!1),{status:o}=On(),{handleShowTour:a}=ble(),l=x.useCallback(()=>{e(f=>!f)},[e]),c=x.useCallback(()=>{i(f=>!f)},[]),u=x.useCallback(()=>{s(f=>!f)},[]),d=x.useMemo(()=>h.jsxs("div",{className:"hover-scale flex select-none items-center justify-center",children:[h.jsx("img",{src:"/VonSim8/favicon.svg",className:"mr-2 size-8",style:{filter:"none",opacity:1},draggable:!1,alt:"VonSim8 Logo"}),h.jsxs("div",{className:"flex flex-col",children:[h.jsxs("h1",{className:"text-lg font-bold max-sm:hidden",children:["Von",h.jsx("span",{className:"text-mantis-400",children:"Sim"}),"8"]}),h.jsx("span",{className:"text-xs text-stone-400 max-sm:hidden",children:"Simulador de 8 bits"})]})]}),[]);return h.jsxs(h.Fragment,{children:[h.jsx("header",{className:"relative bg-black p-2 text-sm text-white","data-testid":"header",children:h.jsxs("div",{className:"grid grid-cols-3 items-center",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[d,h.jsx(cF,{status:o})]}),h.jsx("div",{className:"flex justify-center",children:h.jsx(Hre,{})}),h.jsx("div",{className:"flex justify-end",children:h.jsx(uF,{onShowTour:a,onToggleSettings:l,settingsOpen:t,onToggleEducational:c,educationalOpen:n})})]})}),n&&h.jsx(N6,{isOpen:n,onClose:()=>i(!1),onShowProgress:u}),r&&h.jsx(P6,{isVisible:r,onClose:()=>s(!1)})]})});dF.displayName="Header";const wle=[{key:"F7",description:"Ejecutar un ciclo",category:"Simulación"},{key:"F8",description:"Ejecutar una instrucción completa",category:"Simulación"},{key:"F4",description:"Ejecución infinita",category:"Simulación"},{key:"F9",description:"Resetear simulación",category:"Simulación"},{key:"Espacio",description:"Pausar/Reanudar (cuando está ejecutando)",category:"Simulación"},{key:"Ctrl+S",description:"Guardar archivo",category:"Editor"},{key:"Ctrl+O",description:"Abrir archivo",category:"Editor"},{key:"Ctrl+N",description:"Nuevo archivo",category:"Editor"},{key:"Ctrl+Z",description:"Deshacer",category:"Editor"},{key:"Ctrl+Y",description:"Rehacer",category:"Editor"},{key:"Ctrl+F",description:"Buscar",category:"Editor"},{key:"Ctrl+H",description:"Reemplazar",category:"Editor"},{key:"Tab",description:"Indentar",category:"Editor"},{key:"Shift+Tab",description:"Desindentar",category:"Editor"},{key:"F1",description:"Mostrar atajos de teclado",category:"Navegación"},{key:"F2",description:"Abrir configuración",category:"Navegación"},{key:"F3",description:"Buscar en el código",category:"Navegación"},{key:"F5",description:"Actualizar página",category:"Navegación"},{key:"F6",description:"Cambiar foco al editor",category:"Navegación"},{key:"Escape",description:"Cerrar diálogos",category:"Interfaz"},{key:"Ctrl+Shift+P",description:"Paleta de comandos",category:"Interfaz"},{key:"Ctrl+B",description:"Mostrar/ocultar barra lateral",category:"Interfaz"},{key:"Ctrl+J",description:"Mostrar/ocultar terminal",category:"Interfaz"},{key:"Ctrl++",description:"Zoom in",category:"Vista"},{key:"Ctrl+-",description:"Zoom out",category:"Vista"},{key:"Ctrl+0",description:"Resetear zoom",category:"Vista"},{key:"Ctrl+Shift+Z",description:"Zoom a la selección",category:"Vista"},{key:"F12",description:"Herramientas de desarrollador",category:"Desarrollo"},{key:"Ctrl+Shift+I",description:"Inspeccionar elemento",category:"Desarrollo"},{key:"Ctrl+Shift+C",description:"Seleccionar elemento",category:"Desarrollo"},{key:"Ctrl+Shift+J",description:"Consola",category:"Desarrollo"},{key:"Ctrl+Shift+M",description:"Vista móvil",category:"Desarrollo"}],xle=()=>{const[t,e]=x.useState(!1),n=x.useCallback(()=>{e(!0)},[]),i=x.useCallback(()=>{e(!1)},[]);return x.useEffect(()=>{const r=s=>{s.key==="F1"&&(s.preventDefault(),n())};return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[n]),{isOpen:t,openModal:n,closeModal:i}},Sle=()=>x.useMemo(()=>{const t=wle.reduce((e,n)=>(e[n.category]||(e[n.category]=[]),e[n.category].push(n),e),{});return Object.entries(t).sort(([e],[n])=>e.localeCompare(n))},[]),fF=x.memo(({shortcut:t})=>h.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-stone-800 p-3 transition-colors hover:bg-stone-700",children:[h.jsx("span",{className:"text-sm text-stone-300",children:t.description}),h.jsx("kbd",{className:"rounded border border-stone-600 bg-stone-700 px-2 py-1 font-mono text-xs text-white",children:t.key})]}));fF.displayName="ShortcutItem";const hF=x.memo(({category:t,shortcuts:e})=>h.jsxs("div",{className:"space-y-2",children:[h.jsx("h3",{className:"border-b border-stone-600 pb-2 text-lg font-semibold text-mantis-400",children:t}),h.jsx("div",{className:"space-y-2",children:e.map((n,i)=>h.jsx(fF,{shortcut:n},`${t}-${i}`))})]}));hF.displayName="ShortcutCategory";const pF=x.memo(()=>{const{isOpen:t,closeModal:e}=xle(),n=Sle(),i=x.useCallback(s=>{s.target===s.currentTarget&&e()},[e]),r=x.useCallback(s=>{s.key==="Escape"&&e()},[e]);return x.useEffect(()=>{if(t)return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[t,r]),t?h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:i,children:h.jsxs("div",{className:"max-h-[80vh] w-full max-w-4xl overflow-hidden rounded-lg border border-stone-600 bg-stone-900 shadow-xl",children:[h.jsxs("div",{className:"flex items-center justify-between border-b border-stone-600 p-4",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("span",{className:"icon-[lucide--keyboard] size-6 text-mantis-400"}),h.jsx("h2",{className:"text-xl font-semibold text-white",children:"Atajos de Teclado"})]}),h.jsx("button",{onClick:e,className:"rounded p-2 text-stone-400 transition-colors hover:text-white",children:h.jsx(Fe,{icon:$y,size:"lg"})})]}),h.jsx("div",{className:"max-h-[calc(80vh-80px)] overflow-y-auto p-4",children:h.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:n.map(([s,o])=>h.jsx(hF,{category:s,shortcuts:o},s))})}),h.jsx("div",{className:"border-t border-stone-600 bg-stone-800 p-4",children:h.jsxs("div",{className:"flex items-center justify-between text-sm text-stone-400",children:[h.jsxs("span",{children:["Presiona"," ",h.jsx("kbd",{className:"rounded border border-stone-600 bg-stone-700 px-1 py-0.5 font-mono text-xs",children:"F1"})," ","para abrir este diálogo"]}),h.jsx(ht,{variant:"ghost",size:"sm",onClick:e,className:"text-stone-400 hover:text-white",children:"Cerrar"})]})})]})}):null});pF.displayName="KeyboardShortcuts";var uE="ToastProvider",[dE,kle,_le]=Rp("Toast"),[mF,kge]=vs("Toast",[_le]),[Cle,xb]=mF(uE),gF=t=>{const{__scopeToast:e,label:n="Notification",duration:i=5e3,swipeDirection:r="right",swipeThreshold:s=50,children:o}=t,[a,l]=x.useState(null),[c,u]=x.useState(0),d=x.useRef(!1),f=x.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${uE}\`. Expected non-empty \`string\`.`),h.jsx(dE.Provider,{scope:e,children:h.jsx(Cle,{scope:e,label:n,duration:i,swipeDirection:r,swipeThreshold:s,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:x.useCallback(()=>u(p=>p+1),[]),onToastRemove:x.useCallback(()=>u(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:f,children:o})})};gF.displayName=uE;var vF="ToastViewport",Ele=["F8"],ek="toast.viewportPause",tk="toast.viewportResume",yF=x.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:i=Ele,label:r="Notifications ({hotkey})",...s}=t,o=xb(vF,n),a=kle(n),l=x.useRef(null),c=x.useRef(null),u=x.useRef(null),d=x.useRef(null),f=st(e,d,o.onViewportChange),p=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),m=o.toastCount>0;x.useEffect(()=>{const y=v=>{var w;i.length!==0&&i.every(k=>v[k]||v.code===k)&&((w=d.current)==null||w.focus())};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[i]),x.useEffect(()=>{const y=l.current,v=d.current;if(m&&y&&v){const b=()=>{if(!o.isClosePausedRef.current){const E=new CustomEvent(ek);v.dispatchEvent(E),o.isClosePausedRef.current=!0}},w=()=>{if(o.isClosePausedRef.current){const E=new CustomEvent(tk);v.dispatchEvent(E),o.isClosePausedRef.current=!1}},k=E=>{!y.contains(E.relatedTarget)&&w()},_=()=>{y.contains(document.activeElement)||w()};return y.addEventListener("focusin",b),y.addEventListener("focusout",k),y.addEventListener("pointermove",b),y.addEventListener("pointerleave",_),window.addEventListener("blur",b),window.addEventListener("focus",w),()=>{y.removeEventListener("focusin",b),y.removeEventListener("focusout",k),y.removeEventListener("pointermove",b),y.removeEventListener("pointerleave",_),window.removeEventListener("blur",b),window.removeEventListener("focus",w)}}},[m,o.isClosePausedRef]);const g=x.useCallback(({tabbingDirection:y})=>{const b=a().map(w=>{const k=w.ref.current,_=[k,...Fle(k)];return y==="forwards"?_:_.reverse()});return(y==="forwards"?b.reverse():b).flat()},[a]);return x.useEffect(()=>{const y=d.current;if(y){const v=b=>{var _,E,C;const w=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!w){const N=document.activeElement,M=b.shiftKey;if(b.target===y&&M){(_=c.current)==null||_.focus();return}const D=g({tabbingDirection:M?"backwards":"forwards"}),K=D.findIndex(B=>B===N);C1(D.slice(K+1))?b.preventDefault():M?(E=c.current)==null||E.focus():(C=u.current)==null||C.focus()}};return y.addEventListener("keydown",v),()=>y.removeEventListener("keydown",v)}},[a,g]),h.jsxs(ose,{ref:l,role:"region","aria-label":r.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:m?void 0:"none"},children:[m&&h.jsx(nk,{ref:c,onFocusFromOutsideViewport:()=>{const y=g({tabbingDirection:"forwards"});C1(y)}}),h.jsx(dE.Slot,{scope:n,children:h.jsx(Ue.ol,{tabIndex:-1,...s,ref:f})}),m&&h.jsx(nk,{ref:u,onFocusFromOutsideViewport:()=>{const y=g({tabbingDirection:"backwards"});C1(y)}})]})});yF.displayName=vF;var bF="ToastFocusProxy",nk=x.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:i,...r}=t,s=xb(bF,n);return h.jsx(aE,{"aria-hidden":!0,tabIndex:0,...r,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=s.viewport)!=null&&c.contains(a))&&i()}})});nk.displayName=bF;var Xp="Toast",Ale="toast.swipeStart",Nle="toast.swipeMove",Ple="toast.swipeCancel",Mle="toast.swipeEnd",wF=x.forwardRef((t,e)=>{const{forceMount:n,open:i,defaultOpen:r,onOpenChange:s,...o}=t,[a,l]=el({prop:i,defaultProp:r??!0,onChange:s,caller:Xp});return h.jsx(Go,{present:n||a,children:h.jsx(Ole,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:dr(t.onPause),onResume:dr(t.onResume),onSwipeStart:ve(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ve(t.onSwipeMove,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:ve(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ve(t.onSwipeEnd,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),l(!1)})})})});wF.displayName=Xp;var[Tle,Rle]=mF(Xp,{onClose(){}}),Ole=x.forwardRef((t,e)=>{const{__scopeToast:n,type:i="foreground",duration:r,open:s,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:d,onSwipeCancel:f,onSwipeEnd:p,...m}=t,g=xb(Xp,n),[y,v]=x.useState(null),b=st(e,B=>v(B)),w=x.useRef(null),k=x.useRef(null),_=r||g.duration,E=x.useRef(0),C=x.useRef(_),N=x.useRef(0),{onToastAdd:M,onToastRemove:R}=g,I=dr(()=>{var W;(y==null?void 0:y.contains(document.activeElement))&&((W=g.viewport)==null||W.focus()),o()}),D=x.useCallback(B=>{!B||B===1/0||(window.clearTimeout(N.current),E.current=new Date().getTime(),N.current=window.setTimeout(I,B))},[I]);x.useEffect(()=>{const B=g.viewport;if(B){const W=()=>{D(C.current),c==null||c()},Y=()=>{const te=new Date().getTime()-E.current;C.current=C.current-te,window.clearTimeout(N.current),l==null||l()};return B.addEventListener(ek,Y),B.addEventListener(tk,W),()=>{B.removeEventListener(ek,Y),B.removeEventListener(tk,W)}}},[g.viewport,_,l,c,D]),x.useEffect(()=>{s&&!g.isClosePausedRef.current&&D(_)},[s,_,g.isClosePausedRef,D]),x.useEffect(()=>(M(),()=>R()),[M,R]);const K=x.useMemo(()=>y?AF(y):null,[y]);return g.viewport?h.jsxs(h.Fragment,{children:[K&&h.jsx(Ile,{__scopeToast:n,role:"status","aria-live":i==="foreground"?"assertive":"polite","aria-atomic":!0,children:K}),h.jsx(Tle,{scope:n,onClose:I,children:wl.createPortal(h.jsx(dE.ItemSlot,{scope:n,children:h.jsx(sse,{asChild:!0,onEscapeKeyDown:ve(a,()=>{g.isFocusedToastEscapeKeyDownRef.current||I(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:h.jsx(Ue.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":g.swipeDirection,...m,ref:b,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:ve(t.onKeyDown,B=>{B.key==="Escape"&&(a==null||a(B.nativeEvent),B.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,I()))}),onPointerDown:ve(t.onPointerDown,B=>{B.button===0&&(w.current={x:B.clientX,y:B.clientY})}),onPointerMove:ve(t.onPointerMove,B=>{if(!w.current)return;const W=B.clientX-w.current.x,Y=B.clientY-w.current.y,te=!!k.current,V=["left","right"].includes(g.swipeDirection),$=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,ie=V?$(0,W):0,ke=V?0:$(0,Y),Z=B.pointerType==="touch"?10:2,le={x:ie,y:ke},j={originalEvent:B,delta:le};te?(k.current=le,gg(Nle,d,j,{discrete:!1})):BM(le,g.swipeDirection,Z)?(k.current=le,gg(Ale,u,j,{discrete:!1}),B.target.setPointerCapture(B.pointerId)):(Math.abs(W)>Z||Math.abs(Y)>Z)&&(w.current=null)}),onPointerUp:ve(t.onPointerUp,B=>{const W=k.current,Y=B.target;if(Y.hasPointerCapture(B.pointerId)&&Y.releasePointerCapture(B.pointerId),k.current=null,w.current=null,W){const te=B.currentTarget,V={originalEvent:B,delta:W};BM(W,g.swipeDirection,g.swipeThreshold)?gg(Mle,p,V,{discrete:!0}):gg(Ple,f,V,{discrete:!0}),te.addEventListener("click",$=>$.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),Ile=t=>{const{__scopeToast:e,children:n,...i}=t,r=xb(Xp,e),[s,o]=x.useState(!1),[a,l]=x.useState(!1);return jle(()=>o(!0)),x.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:h.jsx(Yp,{asChild:!0,children:h.jsx(aE,{...i,children:s&&h.jsxs(h.Fragment,{children:[r.label," ",n]})})})},Dle="ToastTitle",xF=x.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t;return h.jsx(Ue.div,{...i,ref:e})});xF.displayName=Dle;var Lle="ToastDescription",SF=x.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t;return h.jsx(Ue.div,{...i,ref:e})});SF.displayName=Lle;var kF="ToastAction",_F=x.forwardRef((t,e)=>{const{altText:n,...i}=t;return n.trim()?h.jsx(EF,{altText:n,asChild:!0,children:h.jsx(fE,{...i,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${kF}\`. Expected non-empty \`string\`.`),null)});_F.displayName=kF;var CF="ToastClose",fE=x.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t,r=Rle(CF,n);return h.jsx(EF,{asChild:!0,children:h.jsx(Ue.button,{type:"button",...i,ref:e,onClick:ve(t.onClick,r.onClose)})})});fE.displayName=CF;var EF=x.forwardRef((t,e)=>{const{__scopeToast:n,altText:i,...r}=t;return h.jsx(Ue.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":i||void 0,...r,ref:e})});function AF(t){const e=[];return Array.from(t.childNodes).forEach(i=>{if(i.nodeType===i.TEXT_NODE&&i.textContent&&e.push(i.textContent),$le(i)){const r=i.ariaHidden||i.hidden||i.style.display==="none",s=i.dataset.radixToastAnnounceExclude==="";if(!r)if(s){const o=i.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...AF(i))}}),e}function gg(t,e,n,{discrete:i}){const r=n.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),i?P_(r,s):r.dispatchEvent(s)}var BM=(t,e,n=0)=>{const i=Math.abs(t.x),r=Math.abs(t.y),s=i>r;return e==="left"||e==="right"?s&&i>n:!s&&r>n};function jle(t=()=>{}){const e=dr(t);Kn(()=>{let n=0,i=0;return n=window.requestAnimationFrame(()=>i=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(i)}},[e])}function $le(t){return t.nodeType===t.ELEMENT_NODE}function Fle(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function C1(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var Ble=gF,NF=yF,PF=wF,MF=xF,TF=SF,RF=_F,OF=fE;const zle=Ble,IF=x.forwardRef(({className:t,...e},n)=>h.jsx(NF,{ref:n,className:ee("fixed inset-x-0 top-12 z-[100] mx-auto flex max-h-screen w-full flex-col p-4 md:max-w-[420px]",t),...e}));IF.displayName=NF.displayName;const DF=x.forwardRef(({className:t,variant:e="default",...n},i)=>h.jsx(PF,{ref:i,"data-variant":e,className:ee("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md p-6 pr-8 shadow-lg transition-all",e==="default"&&"border border-stone-600 bg-stone-900 text-white",e==="error"&&"border border-red-600 bg-red-900 text-red-50",e==="info"&&"border border-green-500 bg-stone-900 text-white",t),...n}));DF.displayName=PF.displayName;const LF=x.forwardRef(({className:t,...e},n)=>h.jsx(RF,{ref:n,className:ee("inline-flex h-8 shrink-0 items-center justify-center rounded-md bg-mantis-500 px-3 text-sm font-medium ring-offset-stone-900 transition-colors hover:bg-mantis-400 focus:outline-none focus:ring-2 focus:ring-stone-600 focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50","group-data-[variant=error]:border group-data-[variant=error]:border-white/40 group-data-[variant=error]:hover:border-white/30  group-data-[variant=error]:hover:bg-red-700 group-data-[variant=error]:hover:text-white group-data-[variant=error]:focus:ring-white",t),...e}));LF.displayName=RF.displayName;const jF=x.forwardRef(({className:t,...e},n)=>h.jsx(OF,{ref:n,className:ee("text-current/50 absolute right-2 top-2 rounded-md p-1 opacity-0 transition-opacity hover:text-current focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100",t),"toast-close":"",...e,children:h.jsx("span",{className:"block size-4",children:"✕"})}));jF.displayName=OF.displayName;const $F=x.forwardRef(({className:t,...e},n)=>h.jsx(MF,{ref:n,className:ee("text-sm font-semibold",t),...e}));$F.displayName=MF.displayName;const FF=x.forwardRef(({className:t,...e},n)=>h.jsx(TF,{ref:n,className:ee("text-sm opacity-90",t),...e}));FF.displayName=TF.displayName;de(!1);const yh=[{id:"welcome",target:"app-container",title:"¡Bienvenido a VonSim8!",content:"Te acompañaré en un recorrido por las funciones principales de la plataforma. VonSim8 es un simulador de computadora de 8 bits que te permite programar en lenguaje ensamblador y ver cómo funciona internamente una computadora.",icon:bY,position:"top"},{id:"header",target:"header",title:"Barra de Navegación",content:"Aquí encontrarás el logo, el estado de la simulación, los controles principales y acceso a notificaciones, tour de ayuda y configuración.",icon:"icon-[lucide--navigation]",position:"bottom"},{id:"controls",target:"controls-container",title:"Controles de Simulación",content:"Controla la simulación: F7 (ejecutar ciclo), F8 (ejecutar instrucción), F4 (ejecución infinita), F9 (resetear). También puedes usar los botones visuales.",icon:"icon-[lucide--cpu]",position:"bottom"},{id:"editor-buttons",target:"panel-editor",title:"Editor de Código",content:"Aquí es donde escribirás tu código ensamblador. El editor tiene resaltado de sintaxis, autocompletado y validación en tiempo real. Usa los botones de arriba para crear, abrir, guardar y ensamblar tu programa.",icon:"icon-[lucide--file-terminal]",position:"right"},{id:"computer-view",target:"panel-computer",title:"Simulador de Computadora",content:"Aquí verás la computadora virtual con CPU, memoria RAM, registros, ALU, buses de datos y control, y todos los periféricos como pantalla, teclado, LEDs y switches.",icon:"icon-[lucide--monitor]",position:"left"},{id:"cpu-architecture",target:"cpu-component",title:"Arquitectura CPU",content:"Observa cómo la CPU ejecuta instrucciones paso a paso: fetch, decode, execute. Ve los valores en los registros, el contador de programa y el estado de las banderas.",icon:"icon-[lucide--microchip]",position:"left"},{id:"memory-ram",target:"memory-component",title:"Memoria RAM",content:"Explora la memoria RAM de 256 bytes. Ve cómo se almacenan datos e instrucciones, y cómo la CPU accede a diferentes direcciones de memoria. Cada celda muestra su dirección y valor en hexadecimal.",icon:"icon-[lucide--database]",position:"left"},{id:"settings-button",target:"settings-button",title:"Botón de Configuración",content:"Haz clic en este engranaje para acceder a las configuraciones avanzadas. Aquí podrás ajustar la velocidad de simulación, cambiar el tema visual, seleccionar el idioma y personalizar atajos de teclado.",icon:"icon-[lucide--settings]",position:"bottom"},{id:"settings-panel",target:"panel-settings",title:"Panel de Configuración",content:"En este panel encontrarás todas las opciones de configuración organizadas por categorías: simulación, interfaz, idioma y atajos de teclado. Los cambios se aplican automáticamente.",icon:"icon-[lucide--settings]",position:"left"},{id:"footer",target:"footer-links",title:"Recursos y Soporte",content:"Encuentra documentación completa, código fuente en GitHub, reporta bugs y accede a recursos de aprendizaje para dominar la programación en ensamblador.",icon:"icon-[lucide--help-circle]",position:"top"},{id:"final",target:"cycle-button",title:"¡Listo para Programar!",content:"Ya conoces las funciones principales de VonSim8. Comienza escribiendo código en el editor, ejecuta la simulación paso a paso con el botón 'Por Ciclo' y observa cómo funciona tu programa en la computadora virtual. ¡Disfruta programando!",icon:"icon-[lucide--rocket]",position:"bottom"}],Ule=()=>{const[t,e]=x.useState(0),[n,i]=x.useState(!1),[r,s]=x.useState(!0),[,o]=Ip(wb),a=x.useMemo(()=>t===yh.length-1,[t]),l=x.useMemo(()=>t===0,[t]),c=x.useCallback(()=>{i(!1),localStorage.setItem("vonsim8-tour-completed","true")},[]),u=x.useCallback(()=>{e(m=>Math.min(m+1,yh.length-1))},[]),d=x.useCallback(()=>{e(m=>Math.max(m-1,0))},[]),f=x.useCallback(()=>{c()},[c]),p=x.useCallback(()=>{i(!0),e(0)},[]);return x.useEffect(()=>{},[]),x.useEffect(()=>{const m=yh[t],g=document.querySelector(`[data-testid="${m.target}"]`);s(!!g),m.id==="settings-button"?o(!0):m.id!=="settings-panel"&&m.id!=="settings-button"&&o(!1)},[t,o]),{currentStep:t,isVisible:n,isLastStep:a,isFirstStep:l,handleNext:u,handlePrev:d,handleSkip:f,completeTour:c,startTour:p,targetFound:r}},Vle=t=>x.useMemo(()=>{const e=document.querySelector(`[data-testid="${t.target}"]`);if(!e)return null;const n=e.getBoundingClientRect(),i=window.innerWidth,r=window.innerHeight;if(t.id==="welcome"&&t.position==="top")return{positionStyles:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"},highlightStyles:{top:0,left:0,width:"100vw",height:"100vh"}};if(t.id==="footer"){let m=n.top-200-60,g=n.right+20;const y="translateX(0)";m<40&&(m=40),m+200>r-100&&(m=Math.max(40,r/2-200/2)),g+320>i&&(g=i-320-20);const v={top:m,left:g,transform:y},b={top:n.top-2,left:n.left-2,width:n.width+4,height:n.height+4};return{positionStyles:v,highlightStyles:b}}let s,o,a;switch(t.position){case"top":s=n.top-20,o=n.left+n.width/2,a="translateX(-50%)";break;case"bottom":s=n.bottom+20,o=n.left+n.width/2,a="translateX(-50%)";break;case"left":s=n.top+n.height/2,o=n.left-20,a="translateY(-50%)";break;case"right":s=n.top+n.height/2,o=n.right+20,a="translateY(-50%)";break}const l=320,c=200;o+l/2>i?o=i-l/2-20:o-l/2<0&&(o=l/2+20),s+c>r?s=r-c-20:s<0&&(s=20);const u={top:s,left:o,transform:a},d={top:n.top-8,left:n.left-8,width:n.width+16,height:n.height+16};return{positionStyles:u,highlightStyles:d}},[t]),BF=x.memo(({current:t,total:e})=>h.jsx("div",{className:"mb-2 h-2 w-full overflow-hidden rounded-full bg-stone-700",children:h.jsx("div",{className:"h-full bg-mantis-500 transition-all duration-300",style:{width:`${(t+1)/e*100}%`}})}));BF.displayName="ProgressBar";const zF=x.memo(({step:t,currentStep:e,isLastStep:n,isFirstStep:i,onNext:r,onPrev:s,onSkip:o,onFinish:a,totalSteps:l,targetFound:c})=>{const u=Vle(t),d=x.useRef(null);x.useEffect(()=>{var g;(g=d.current)==null||g.focus()},[e]);const f="animate-fade-in";if(!c||!u)return h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60",children:h.jsxs("div",{className:"max-w-sm rounded-lg border-2 border-mantis-400 bg-stone-900 p-8 text-center shadow-2xl",children:[h.jsx(Fe,{icon:FS,className:"mb-4 text-4xl text-yellow-400"}),h.jsx("h3",{className:"mb-2 text-lg font-semibold text-mantis-400",children:"Elemento no encontrado"}),h.jsx("p",{className:"mb-4 text-stone-300",children:"No se pudo encontrar el elemento de la interfaz para este paso del tour."}),h.jsx(ht,{onClick:o,className:"bg-mantis-600 hover:bg-mantis-700",children:"Saltar tour"})]})});const{positionStyles:p,highlightStyles:m}=u;return h.jsx("div",{className:"fixed inset-0 z-50 bg-black/50",children:h.jsxs("div",{className:"relative size-full",children:[h.jsx("div",{className:"absolute rounded-lg border-2 border-mantis-400 bg-transparent shadow-2xl transition-all duration-300",style:m}),h.jsxs("div",{ref:d,tabIndex:-1,role:"dialog","aria-modal":"true",className:`absolute max-w-sm rounded-lg border border-mantis-400 bg-stone-900 p-6 text-white shadow-xl focus:outline-none ${f}`,style:p,children:[h.jsx(BF,{current:e,total:l}),h.jsxs("div",{className:"mb-2 flex items-center gap-3",children:[t.icon&&(typeof t.icon=="string"?h.jsx("span",{className:`${t.icon} text-2xl text-mantis-400`}):h.jsx(Fe,{icon:t.icon,className:"text-2xl text-mantis-400"})),h.jsx("h3",{className:"text-lg font-semibold text-mantis-400",children:t.title})]}),h.jsx("p",{className:"mb-4 text-sm text-stone-300",children:t.content}),h.jsxs("div",{className:"mt-4 flex items-center justify-between gap-2",children:[h.jsx(ht,{variant:"ghost",size:"sm",onClick:o,className:"text-stone-400 hover:text-white","aria-label":"Saltar tour",children:"Saltar"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs(ht,{variant:"outline",size:"sm",onClick:s,disabled:i,className:"flex items-center gap-1","aria-label":"Anterior",children:[h.jsx(Fe,{icon:OY}),"Anterior"]}),n?h.jsxs(ht,{size:"sm",onClick:a,className:"flex items-center gap-1 bg-mantis-600 hover:bg-mantis-700","aria-label":"Finalizar",children:["Finalizar",h.jsx(Fe,{icon:_Y})]}):h.jsxs(ht,{size:"sm",onClick:r,className:"flex items-center gap-1 bg-mantis-600 hover:bg-mantis-700","aria-label":"Siguiente",children:["Siguiente",h.jsx(Fe,{icon:IY})]})]})]}),h.jsxs("div",{className:"mt-2 text-right text-xs text-stone-500",children:["Paso ",e+1," de ",l]}),h.jsx("button",{onClick:o,className:"absolute right-2 top-2 rounded p-1 text-stone-400 hover:text-white focus:outline-none","aria-label":"Cerrar",children:h.jsx(Fe,{icon:$y,size:"sm"})})]})]})})});zF.displayName="TourTooltip";const UF=x.memo(()=>{const{currentStep:t,isVisible:e,isLastStep:n,isFirstStep:i,handleNext:r,handlePrev:s,handleSkip:o,completeTour:a,startTour:l,targetFound:c}=Ule();x.useEffect(()=>(window.startWelcomeTour=l,()=>{delete window.startWelcomeTour}),[l]);const u=x.useMemo(()=>yh[t],[t]);return x.useEffect(()=>{if(!e)return;const d=f=>{f.key==="Escape"&&o(),f.key==="ArrowRight"&&r(),f.key==="ArrowLeft"&&s()};return window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[e,o,r,s]),!e||!u?null:h.jsx(zF,{step:u,currentStep:t,isLastStep:n,isFirstStep:i,onNext:r,onPrev:s,onSkip:o,onFinish:a,totalSteps:yh.length,targetFound:c})});UF.displayName="WelcomeTour";var Pr=function(t,e){return Number(t.toFixed(e))},Hle=function(t,e){return e},zt=function(t,e,n){n&&typeof n=="function"&&n(t,e)},Wle=function(t){return-Math.cos(t*Math.PI)/2+.5},Gle=function(t){return t},Kle=function(t){return t*t},qle=function(t){return t*(2-t)},Yle=function(t){return t<.5?2*t*t:-1+(4-2*t)*t},Xle=function(t){return t*t*t},Jle=function(t){return--t*t*t+1},Zle=function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},Qle=function(t){return t*t*t*t},ece=function(t){return 1- --t*t*t*t},tce=function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},nce=function(t){return t*t*t*t*t},ice=function(t){return 1+--t*t*t*t*t},rce=function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},VF={easeOut:Wle,linear:Gle,easeInQuad:Kle,easeOutQuad:qle,easeInOutQuad:Yle,easeInCubic:Xle,easeOutCubic:Jle,easeInOutCubic:Zle,easeInQuart:Qle,easeOutQuart:ece,easeInOutQuart:tce,easeInQuint:nce,easeOutQuint:ice,easeInOutQuint:rce},HF=function(t){typeof t=="number"&&cancelAnimationFrame(t)},is=function(t){t.mounted&&(HF(t.animation),t.animate=!1,t.animation=null,t.velocity=null)};function WF(t,e,n,i){if(t.mounted){var r=new Date().getTime(),s=1;is(t),t.animation=function(){if(!t.mounted)return HF(t.animation);var o=new Date().getTime()-r,a=o/n,l=VF[e],c=l(a);o>=n?(i(s),t.animation=null):t.animation&&(i(c),requestAnimationFrame(t.animation))},requestAnimationFrame(t.animation)}}function sce(t){var e=t.scale,n=t.positionX,i=t.positionY;return!(Number.isNaN(e)||Number.isNaN(n)||Number.isNaN(i))}function Cl(t,e,n,i){var r=sce(e);if(!(!t.mounted||!r)){var s=t.setTransformState,o=t.transformState,a=o.scale,l=o.positionX,c=o.positionY,u=e.scale-a,d=e.positionX-l,f=e.positionY-c;n===0?s(e.scale,e.positionX,e.positionY):WF(t,i,n,function(p){var m=a+u*p,g=l+d*p,y=c+f*p;s(m,g,y)})}}function oce(t,e,n){var i=t.offsetWidth,r=t.offsetHeight,s=e.offsetWidth,o=e.offsetHeight,a=s*n,l=o*n,c=i-a,u=r-l;return{wrapperWidth:i,wrapperHeight:r,newContentWidth:a,newDiffWidth:c,newContentHeight:l,newDiffHeight:u}}var ace=function(t,e,n,i,r,s,o){var a=t>e?n*(o?1:.5):0,l=i>r?s*(o?1:.5):0,c=t-e-a,u=a,d=i-r-l,f=l;return{minPositionX:c,maxPositionX:u,minPositionY:d,maxPositionY:f}},hE=function(t,e){var n=t.wrapperComponent,i=t.contentComponent,r=t.setup.centerZoomedOut;if(!n||!i)throw new Error("Components are not mounted");var s=oce(n,i,e),o=s.wrapperWidth,a=s.wrapperHeight,l=s.newContentWidth,c=s.newDiffWidth,u=s.newContentHeight,d=s.newDiffHeight,f=ace(o,l,c,a,u,d,!!r);return f},ik=function(t,e,n,i){return i?t<e?Pr(e,2):t>n?Pr(n,2):Pr(t,2):Pr(t,2)},hc=function(t,e){var n=hE(t,e);return t.bounds=n,n};function Jp(t,e,n,i,r,s,o){var a=n.minPositionX,l=n.minPositionY,c=n.maxPositionX,u=n.maxPositionY,d=0,f=0;o&&(d=r,f=s);var p=ik(t,a-d,c+d,i),m=ik(e,l-f,u+f,i);return{x:p,y:m}}function Sb(t,e,n,i,r,s){var o=t.transformState,a=o.scale,l=o.positionX,c=o.positionY,u=i-a;if(typeof e!="number"||typeof n!="number")return console.error("Mouse X and Y position were not provided!"),{x:l,y:c};var d=l-e*u,f=c-n*u,p=Jp(d,f,r,s,0,0,null);return p}function Zp(t,e,n,i,r){var s=r?i:0,o=e-s;return!Number.isNaN(n)&&t>=n?n:!Number.isNaN(e)&&t<=o?o:t}var zM=function(t,e){var n=t.setup.panning.excluded,i=t.isInitialized,r=t.wrapperComponent,s=e.target,o="shadowRoot"in s&&"composedPath"in e,a=o?e.composedPath().some(function(u){return u instanceof Element?r==null?void 0:r.contains(u):!1}):r==null?void 0:r.contains(s),l=i&&s&&a;if(!l)return!1;var c=kb(s,n);return!c},UM=function(t){var e=t.isInitialized,n=t.isPanning,i=t.setup,r=i.panning.disabled,s=e&&n&&!r;return!!s},lce=function(t,e){var n=t.transformState,i=n.positionX,r=n.positionY;t.isPanning=!0;var s=e.clientX,o=e.clientY;t.startCoords={x:s-i,y:o-r}},cce=function(t,e){var n=e.touches,i=t.transformState,r=i.positionX,s=i.positionY;t.isPanning=!0;var o=n.length===1;if(o){var a=n[0].clientX,l=n[0].clientY;t.startCoords={x:a-r,y:l-s}}};function uce(t){var e=t.transformState,n=e.positionX,i=e.positionY,r=e.scale,s=t.setup,o=s.disabled,a=s.limitToBounds,l=s.centerZoomedOut,c=t.wrapperComponent;if(!(o||!c||!t.bounds)){var u=t.bounds,d=u.maxPositionX,f=u.minPositionX,p=u.maxPositionY,m=u.minPositionY,g=n>d||n<f,y=i>p||i<m,v=n>d?c.offsetWidth:t.setup.minPositionX||0,b=i>p?c.offsetHeight:t.setup.minPositionY||0,w=Sb(t,v,b,r,t.bounds,a||l),k=w.x,_=w.y;return{scale:r,positionX:g?k:n,positionY:y?_:i}}}function GF(t,e,n,i,r){var s=t.setup.limitToBounds,o=t.wrapperComponent,a=t.bounds,l=t.transformState,c=l.scale,u=l.positionX,d=l.positionY;if(!(o===null||a===null||e===u&&n===d)){var f=Jp(e,n,a,s,i,r,o),p=f.x,m=f.y;t.setTransformState(c,p,m)}}var dce=function(t,e,n){var i=t.startCoords,r=t.transformState,s=t.setup.panning,o=s.lockAxisX,a=s.lockAxisY,l=r.positionX,c=r.positionY;if(!i)return{x:l,y:c};var u=e-i.x,d=n-i.y,f=o?l:u,p=a?c:d;return{x:f,y:p}},pl=function(t,e){var n=t.setup,i=t.transformState,r=i.scale,s=n.minScale,o=n.disablePadding;return e>0&&r>=s&&!o?e:0},fce=function(t){var e=t.mounted,n=t.setup,i=n.disabled,r=n.velocityAnimation,s=t.transformState.scale,o=r.disabled,a=!o||s>1||!i||e;return!!a},hce=function(t){var e=t.mounted,n=t.velocity,i=t.bounds,r=t.setup,s=r.disabled,o=r.velocityAnimation,a=t.transformState.scale,l=o.disabled,c=!l||a>1||!s||e;return!(!c||!n||!i)};function pce(t,e){var n=t.setup.velocityAnimation,i=n.equalToMove,r=n.animationTime,s=n.sensitivity;return i?r*e*s:r}function VM(t,e,n,i,r,s,o,a,l,c){if(r){if(e>o&&n>o){var u=o+(t-o)*c;return u>l?l:u<o?o:u}if(e<s&&n<s){var u=s+(t-s)*c;return u<a?a:u>s?s:u}}return i?e:ik(t,s,o,r)}function mce(t,e){var n=1;return e?Math.min(n,t.offsetWidth/window.innerWidth):n}function gce(t,e){var n=fce(t);if(n){var i=t.lastMousePosition,r=t.velocityTime,s=t.setup,o=t.wrapperComponent,a=s.velocityAnimation.equalToMove,l=Date.now();if(i&&r&&o){var c=mce(o,a),u=e.x-i.x,d=e.y-i.y,f=u/c,p=d/c,m=l-r,g=u*u+d*d,y=Math.sqrt(g)/m;t.velocity={velocityX:f,velocityY:p,total:y}}t.lastMousePosition=e,t.velocityTime=l}}function vce(t){var e=t.velocity,n=t.bounds,i=t.setup,r=t.wrapperComponent,s=hce(t);if(!(!s||!e||!n||!r)){var o=e.velocityX,a=e.velocityY,l=e.total,c=n.maxPositionX,u=n.minPositionX,d=n.maxPositionY,f=n.minPositionY,p=i.limitToBounds,m=i.alignmentAnimation,g=i.zoomAnimation,y=i.panning,v=y.lockAxisY,b=y.lockAxisX,w=g.animationType,k=m.sizeX,_=m.sizeY,E=m.velocityAlignmentTime,C=E,N=pce(t,l),M=Math.max(N,C),R=pl(t,k),I=pl(t,_),D=R*r.offsetWidth/100,K=I*r.offsetHeight/100,B=c+D,W=u-D,Y=d+K,te=f-K,V=t.transformState,$=new Date().getTime();WF(t,w,M,function(ie){var ke=t.transformState,Z=ke.scale,le=ke.positionX,j=ke.positionY,L=new Date().getTime()-$,U=L/C,S=VF[m.animationType],P=1-S(Math.min(1,U)),O=1-ie,T=le+o*O,q=j+a*O,H=VM(T,V.positionX,le,b,p,u,c,W,B,P),ne=VM(q,V.positionY,j,v,p,f,d,te,Y,P);(le!==T||j!==q)&&t.setTransformState(Z,H,ne)})}}function HM(t,e){var n=t.transformState.scale;is(t),hc(t,n),window.TouchEvent!==void 0&&e instanceof TouchEvent?cce(t,e):lce(t,e)}function pE(t,e){var n=t.transformState.scale,i=t.setup,r=i.minScale,s=i.alignmentAnimation,o=s.disabled,a=s.sizeX,l=s.sizeY,c=s.animationTime,u=s.animationType,d=o||n<r||!a&&!l;if(!d){var f=uce(t);f&&Cl(t,f,e??c,u)}}function WM(t,e,n){var i=t.startCoords,r=t.setup,s=r.alignmentAnimation,o=s.sizeX,a=s.sizeY;if(i){var l=dce(t,e,n),c=l.x,u=l.y,d=pl(t,o),f=pl(t,a);gce(t,{x:c,y:u}),GF(t,c,u,d,f)}}function yce(t){if(t.isPanning){var e=t.setup.panning.velocityDisabled,n=t.velocity,i=t.wrapperComponent,r=t.contentComponent;t.isPanning=!1,t.animate=!1,t.animation=null;var s=i==null?void 0:i.getBoundingClientRect(),o=r==null?void 0:r.getBoundingClientRect(),a=(s==null?void 0:s.width)||0,l=(s==null?void 0:s.height)||0,c=(o==null?void 0:o.width)||0,u=(o==null?void 0:o.height)||0,d=a<c||l<u,f=!e&&n&&(n==null?void 0:n.total)>.1&&d;f?vce(t):pE(t)}}function mE(t,e,n,i){var r=t.setup,s=r.minScale,o=r.maxScale,a=r.limitToBounds,l=Zp(Pr(e,2),s,o,0,!1),c=hc(t,l),u=Sb(t,n,i,l,c,a),d=u.x,f=u.y;return{scale:l,positionX:d,positionY:f}}function KF(t,e,n){var i=t.transformState.scale,r=t.wrapperComponent,s=t.setup,o=s.minScale,a=s.limitToBounds,l=s.zoomAnimation,c=l.disabled,u=l.animationTime,d=l.animationType,f=c||i>=o;if((i>=1||a)&&pE(t),!(f||!r||!t.mounted)){var p=e||r.offsetWidth/2,m=n||r.offsetHeight/2,g=mE(t,o,p,m);g&&Cl(t,g,u,d)}}var Ya=function(){return Ya=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ya.apply(this,arguments)};function GM(t,e,n){for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))}var vg={scale:1,positionX:0,positionY:0},wf={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,allowLeftClickPan:!0,allowMiddleClickPan:!0,allowRightClickPan:!0,wheelPanning:!1,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},rk={wrapperClass:"react-transform-wrapper",contentClass:"react-transform-component"},qF=function(t){var e,n,i,r;return{previousScale:(e=t.initialScale)!==null&&e!==void 0?e:vg.scale,scale:(n=t.initialScale)!==null&&n!==void 0?n:vg.scale,positionX:(i=t.initialPositionX)!==null&&i!==void 0?i:vg.positionX,positionY:(r=t.initialPositionY)!==null&&r!==void 0?r:vg.positionY}},KM=function(t){var e=Ya({},wf);return Object.keys(t).forEach(function(n){var i=typeof t[n]<"u",r=typeof wf[n]<"u";if(r&&i){var s=Object.prototype.toString.call(wf[n]),o=s==="[object Object]",a=s==="[object Array]";o?e[n]=Ya(Ya({},wf[n]),t[n]):a?e[n]=GM(GM([],wf[n],!0),t[n]):e[n]=t[n]}}),e},YF=function(t,e,n){var i=t.transformState.scale,r=t.wrapperComponent,s=t.setup,o=s.maxScale,a=s.minScale,l=s.zoomAnimation,c=s.smooth,u=l.size;if(!r)throw new Error("Wrapper is not mounted");var d=c?i*Math.exp(e*n):i+e*n,f=Zp(Pr(d,3),a,o,u,!1);return f};function XF(t,e,n,i,r){var s=t.wrapperComponent,o=t.transformState,a=o.scale,l=o.positionX,c=o.positionY;if(!s)return console.error("No WrapperComponent found");var u=s.offsetWidth,d=s.offsetHeight,f=(u/2-l)/a,p=(d/2-c)/a,m=YF(t,e,n),g=mE(t,m,f,p);if(!g)return console.error("Error during zoom event. New transformation state was not calculated.");Cl(t,g,i,r)}function JF(t,e,n,i){var r=t.setup,s=t.wrapperComponent,o=r.limitToBounds,a=qF(t.props),l=t.transformState,c=l.scale,u=l.positionX,d=l.positionY;if(s){var f=hE(t,a.scale),p=Jp(a.positionX,a.positionY,f,o,0,0,s),m={scale:a.scale,positionX:p.x,positionY:p.y};c===a.scale&&u===a.positionX&&d===a.positionY||(i==null||i(),Cl(t,m,e,n))}}function bce(t,e,n,i){var r=t.getBoundingClientRect(),s=e.getBoundingClientRect(),o=n.getBoundingClientRect(),a=s.x*i.scale,l=s.y*i.scale;return{x:(r.x-o.x+a)/i.scale,y:(r.y-o.y+l)/i.scale}}function wce(t,e,n){var i=t.wrapperComponent,r=t.contentComponent,s=t.transformState,o=t.setup,a=o.limitToBounds,l=o.minScale,c=o.maxScale;if(!i||!r)return s;var u=i.getBoundingClientRect(),d=e.getBoundingClientRect(),f=bce(e,i,r,s),p=f.x,m=f.y,g=d.width/s.scale,y=d.height/s.scale,v=i.offsetWidth/g,b=i.offsetHeight/y,w=Zp(n||Math.min(v,b),l,c,0,!1),k=(u.width-g*w)/2,_=(u.height-y*w)/2,E=(u.left-p)*w+k,C=(u.top-m)*w+_,N=hE(t,w),M=Jp(E,C,N,a,0,0,i),R=M.x,I=M.y;return{positionX:R,positionY:I,scale:w}}var xce=function(t){return function(e,n,i){e===void 0&&(e=.5),n===void 0&&(n=300),i===void 0&&(i="easeOut"),XF(t,1,e,n,i)}},Sce=function(t){return function(e,n,i){e===void 0&&(e=.5),n===void 0&&(n=300),i===void 0&&(i="easeOut"),XF(t,-1,e,n,i)}},kce=function(t){return function(e,n,i,r,s){r===void 0&&(r=300),s===void 0&&(s="easeOut");var o=t.transformState,a=o.positionX,l=o.positionY,c=o.scale,u=t.wrapperComponent,d=t.contentComponent,f=t.setup.disabled;if(!(f||!u||!d)){var p={positionX:Number.isNaN(e)?a:e,positionY:Number.isNaN(n)?l:n,scale:Number.isNaN(i)?c:i};Cl(t,p,r,s)}}},_ce=function(t){return function(e,n){e===void 0&&(e=200),n===void 0&&(n="easeOut"),JF(t,e,n)}},Cce=function(t){return function(e,n,i){n===void 0&&(n=200),i===void 0&&(i="easeOut");var r=t.transformState,s=t.wrapperComponent,o=t.contentComponent;if(s&&o){var a=ZF(e||r.scale,s,o);Cl(t,a,n,i)}}},Ece=function(t){return function(e,n,i,r){i===void 0&&(i=600),r===void 0&&(r="easeOut"),is(t);var s=t.wrapperComponent,o=typeof e=="string"?document.getElementById(e):e;if(s&&o&&s.contains(o)){var a=wce(t,o,n);Cl(t,a,i,r)}}},sk=function(t){return{instance:t,zoomIn:xce(t),zoomOut:Sce(t),setTransform:kce(t),resetTransform:_ce(t),centerView:Cce(t),zoomToElement:Ece(t)}},Ace=function(t){return{instance:t,state:t.transformState}},Mt=function(t){var e={};return Object.assign(e,Ace(t)),Object.assign(e,sk(t)),e},E1=!1;function A1(){try{var t={get passive(){return E1=!0,!1}};return t}catch{return E1=!1,E1}}var yg=".".concat(rk.wrapperClass),kb=function(t,e){return e.some(function(n){return t.matches("".concat(yg," ").concat(n,", ").concat(yg," .").concat(n,", ").concat(yg," ").concat(n," *, ").concat(yg," .").concat(n," *"))})},ok=function(t){t&&clearTimeout(t)},Nce=function(t,e,n){return"translate(".concat(t,"px, ").concat(e,"px) scale(").concat(n,")")},ZF=function(t,e,n){var i=n.offsetWidth*t,r=n.offsetHeight*t,s=(e.offsetWidth-i)/2,o=(e.offsetHeight-r)/2;return{scale:t,positionX:s,positionY:o}};function Pce(t){return function(e){t.forEach(function(n){typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Mce=function(t,e){var n=t.setup.wheel,i=n.disabled,r=n.wheelDisabled,s=n.touchPadDisabled,o=n.excluded,a=t.isInitialized,l=t.isPanning,c=e.target,u=a&&!l&&!i&&c;if(!u||r&&!e.ctrlKey||s&&e.ctrlKey)return!1;var d=kb(c,o);return!d},Tce=function(t){return t?t.deltaY<0?1:-1:0};function Rce(t,e){var n=Tce(t),i=Hle(e,n);return i}function QF(t,e,n){var i=e.getBoundingClientRect(),r=0,s=0;if("clientX"in t)r=(t.clientX-i.left)/n,s=(t.clientY-i.top)/n;else{var o=t.touches[0];r=(o.clientX-i.left)/n,s=(o.clientY-i.top)/n}return(Number.isNaN(r)||Number.isNaN(s))&&console.error("No mouse or touch offset found"),{x:r,y:s}}var Oce=function(t,e,n,i,r){var s=t.transformState.scale,o=t.wrapperComponent,a=t.setup,l=a.maxScale,c=a.minScale,u=a.zoomAnimation,d=a.disablePadding,f=u.size,p=u.disabled;if(!o)throw new Error("Wrapper is not mounted");var m=s+e*n,g=i?!1:!p,y=Zp(Pr(m,3),c,l,f,g&&!d);return y},Ice=function(t,e){var n=t.previousWheelEvent,i=t.transformState.scale,r=t.setup,s=r.maxScale,o=r.minScale;return n?i<s||i>o||Math.sign(n.deltaY)!==Math.sign(e.deltaY)||n.deltaY>0&&n.deltaY<e.deltaY||n.deltaY<0&&n.deltaY>e.deltaY||Math.sign(n.deltaY)!==Math.sign(e.deltaY):!1},Dce=function(t,e){var n=t.setup.pinch,i=n.disabled,r=n.excluded,s=t.isInitialized,o=e.target,a=s&&!i&&o;if(!a)return!1;var l=kb(o,r);return!l},Lce=function(t){var e=t.setup.pinch.disabled,n=t.isInitialized,i=t.pinchStartDistance,r=n&&!e&&i;return!!r},jce=function(t,e,n){var i=n.getBoundingClientRect(),r=t.touches,s=Pr(r[0].clientX-i.left,5),o=Pr(r[0].clientY-i.top,5),a=Pr(r[1].clientX-i.left,5),l=Pr(r[1].clientY-i.top,5);return{x:(s+a)/2/e,y:(o+l)/2/e}},eB=function(t){return Math.sqrt(Math.pow(t.touches[0].pageX-t.touches[1].pageX,2)+Math.pow(t.touches[0].pageY-t.touches[1].pageY,2))},$ce=function(t,e){var n=t.pinchStartScale,i=t.pinchStartDistance,r=t.setup,s=r.maxScale,o=r.minScale,a=r.zoomAnimation,l=r.disablePadding,c=a.size,u=a.disabled;if(!n||i===null||!e)throw new Error("Pinch touches distance was not provided");if(e<0)return t.transformState.scale;var d=e/i,f=d*n;return Zp(Pr(f,2),o,s,c,!u&&!l)},Fce=160,Bce=100,zce=function(t,e){var n=t.props,i=n.onWheelStart,r=n.onZoomStart;t.wheelStopEventTimer||(is(t),zt(Mt(t),e,i),zt(Mt(t),e,r))},Uce=function(t,e){var n=t.props,i=n.onWheel,r=n.onZoom,s=t.contentComponent,o=t.setup,a=t.transformState,l=a.scale,c=o.limitToBounds,u=o.centerZoomedOut,d=o.zoomAnimation,f=o.wheel,p=o.disablePadding,m=o.smooth,g=d.size,y=d.disabled,v=f.step,b=f.smoothStep;if(!s)throw new Error("Component not mounted");e.preventDefault(),e.stopPropagation();var w=Rce(e,null),k=m?b*Math.abs(e.deltaY):v,_=Oce(t,w,k,!e.ctrlKey);if(l!==_){var E=hc(t,_),C=QF(e,s,l),N=y||g===0||u||p,M=c&&N,R=Sb(t,C.x,C.y,_,E,M),I=R.x,D=R.y;t.previousWheelEvent=e,t.setTransformState(_,I,D),zt(Mt(t),e,i),zt(Mt(t),e,r)}},Vce=function(t,e){var n=t.props,i=n.onWheelStop,r=n.onZoomStop;ok(t.wheelAnimationTimer),t.wheelAnimationTimer=setTimeout(function(){t.mounted&&(KF(t,e.x,e.y),t.wheelAnimationTimer=null)},Bce);var s=Ice(t,e);s&&(ok(t.wheelStopEventTimer),t.wheelStopEventTimer=setTimeout(function(){t.mounted&&(t.wheelStopEventTimer=null,zt(Mt(t),e,i),zt(Mt(t),e,r))},Fce))},tB=function(t){for(var e=0,n=0,i=0;i<2;i+=1)e+=t.touches[i].clientX,n+=t.touches[i].clientY;var r=e/2,s=n/2;return{x:r,y:s}},Hce=function(t,e){var n=eB(e);t.pinchStartDistance=n,t.lastDistance=n,t.pinchStartScale=t.transformState.scale,t.isPanning=!1;var i=tB(e);t.pinchLastCenterX=i.x,t.pinchLastCenterY=i.y,is(t)},Wce=function(t,e){var n=t.contentComponent,i=t.pinchStartDistance,r=t.wrapperComponent,s=t.transformState.scale,o=t.setup,a=o.limitToBounds,l=o.centerZoomedOut,c=o.zoomAnimation,u=o.alignmentAnimation,d=c.disabled,f=c.size;if(!(i===null||!n)){var p=jce(e,s,n);if(!(!Number.isFinite(p.x)||!Number.isFinite(p.y))){var m=eB(e),g=$ce(t,m),y=tB(e),v=y.x-(t.pinchLastCenterX||0),b=y.y-(t.pinchLastCenterY||0);if(!(g===s&&v===0&&b===0)){t.pinchLastCenterX=y.x,t.pinchLastCenterY=y.y;var w=hc(t,g),k=d||f===0||l,_=a&&k,E=Sb(t,p.x,p.y,g,w,_),C=E.x,N=E.y;t.pinchMidpoint=p,t.lastDistance=m;var M=u.sizeX,R=u.sizeY,I=pl(t,M),D=pl(t,R),K=C+v,B=N+b,W=Jp(K,B,w,a,I,D,r),Y=W.x,te=W.y;t.setTransformState(g,Y,te)}}}},Gce=function(t){var e=t.pinchMidpoint;t.velocity=null,t.lastDistance=null,t.pinchMidpoint=null,t.pinchStartScale=null,t.pinchStartDistance=null,KF(t,e==null?void 0:e.x,e==null?void 0:e.y)},nB=function(t,e){var n=t.props.onZoomStop,i=t.setup.doubleClick.animationTime;ok(t.doubleClickStopEventTimer),t.doubleClickStopEventTimer=setTimeout(function(){t.doubleClickStopEventTimer=null,zt(Mt(t),e,n)},i)},Kce=function(t,e){var n=t.props,i=n.onZoomStart,r=n.onZoom,s=t.setup.doubleClick,o=s.animationTime,a=s.animationType;zt(Mt(t),e,i),JF(t,o,a,function(){return zt(Mt(t),e,r)}),nB(t,e)};function qce(t,e){return t==="toggle"?e===1?1:-1:t==="zoomOut"?-1:1}function Yce(t,e){var n=t.setup,i=t.doubleClickStopEventTimer,r=t.transformState,s=t.contentComponent,o=r.scale,a=t.props,l=a.onZoomStart,c=a.onZoom,u=n.doubleClick,d=u.disabled,f=u.mode,p=u.step,m=u.animationTime,g=u.animationType;if(!d&&!i){if(f==="reset")return Kce(t,e);if(!s)return console.error("No ContentComponent found");var y=qce(f,t.transformState.scale),v=YF(t,y,p);if(o!==v){zt(Mt(t),e,l);var b=QF(e,s,o),w=mE(t,v,b.x,b.y);if(!w)return console.error("Error during zoom event. New transformation state was not calculated.");zt(Mt(t),e,c),Cl(t,w,m,g),nB(t,e)}}}var Xce=function(t,e){var n=t.isInitialized,i=t.setup,r=t.wrapperComponent,s=i.doubleClick,o=s.disabled,a=s.excluded,l=e.target,c=r==null?void 0:r.contains(l),u=n&&l&&c&&!o;if(!u)return!1;var d=kb(l,a);return!d},Jce=function(){function t(e){var n=this;this.mounted=!0,this.pinchLastCenterX=null,this.pinchLastCenterY=null,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.isWheelPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){n.initializeWindowEvents()},this.unmount=function(){n.cleanupWindowEvents()},this.update=function(i){n.props=i,hc(n,n.transformState.scale),n.setup=KM(i)},this.initializeWindowEvents=function(){var i,r,s=A1(),o=(i=n.wrapperComponent)===null||i===void 0?void 0:i.ownerDocument,a=o==null?void 0:o.defaultView;(r=n.wrapperComponent)===null||r===void 0||r.addEventListener("wheel",n.onWheelPanning,s),a==null||a.addEventListener("mousedown",n.onPanningStart,s),a==null||a.addEventListener("mousemove",n.onPanning,s),a==null||a.addEventListener("mouseup",n.onPanningStop,s),o==null||o.addEventListener("mouseleave",n.clearPanning,s),a==null||a.addEventListener("keyup",n.setKeyUnPressed,s),a==null||a.addEventListener("keydown",n.setKeyPressed,s)},this.cleanupWindowEvents=function(){var i,r,s=A1(),o=(i=n.wrapperComponent)===null||i===void 0?void 0:i.ownerDocument,a=o==null?void 0:o.defaultView;a==null||a.removeEventListener("mousedown",n.onPanningStart,s),a==null||a.removeEventListener("mousemove",n.onPanning,s),a==null||a.removeEventListener("mouseup",n.onPanningStop,s),o==null||o.removeEventListener("mouseleave",n.clearPanning,s),a==null||a.removeEventListener("keyup",n.setKeyUnPressed,s),a==null||a.removeEventListener("keydown",n.setKeyPressed,s),document.removeEventListener("mouseleave",n.clearPanning,s),is(n),(r=n.observer)===null||r===void 0||r.disconnect()},this.handleInitializeWrapperEvents=function(i){var r=A1();i.addEventListener("wheel",n.onWheelZoom,r),i.addEventListener("dblclick",n.onDoubleClick,r),i.addEventListener("touchstart",n.onTouchPanningStart,r),i.addEventListener("touchmove",n.onTouchPanning,r),i.addEventListener("touchend",n.onTouchPanningStop,r)},this.handleInitialize=function(i,r){var s=!1,o=n.setup.centerOnInit,a=function(l,c){for(var u=0,d=l;u<d.length;u++){var f=d[u];if(f.target===c)return!0}return!1};n.applyTransformation(),n.onInitCallbacks.forEach(function(l){l(Mt(n))}),n.observer=new ResizeObserver(function(l){if(a(l,i)||a(l,r))if(o&&!s){var c=r.offsetWidth,u=r.offsetHeight;(c>0||u>0)&&(s=!0,n.setCenter())}else is(n),hc(n,n.transformState.scale),pE(n,0)}),n.observer.observe(i),n.observer.observe(r)},this.onWheelZoom=function(i){var r=n.setup.disabled;if(!r){var s=Mce(n,i);if(s){var o=n.isPressingKeys(n.setup.wheel.activationKeys);o&&(zce(n,i),Uce(n,i),Vce(n,i))}}},this.onWheelPanning=function(i){var r=n.setup,s=r.disabled,o=r.wheel,a=r.panning;if(!(!n.wrapperComponent||!n.contentComponent||s||!o.wheelDisabled||a.disabled||!a.wheelPanning||i.ctrlKey)){i.preventDefault(),i.stopPropagation();var l=n.transformState,c=l.positionX,u=l.positionY,d=c-i.deltaX,f=u-i.deltaY,p=a.lockAxisX?c:d,m=a.lockAxisY?u:f,g=n.setup.alignmentAnimation,y=g.sizeX,v=g.sizeY,b=pl(n,y),w=pl(n,v);p===c&&m===u||GF(n,p,m,b,w)}},this.onPanningStart=function(i){var r=n.setup.disabled,s=n.props.onPanningStart;if(!r){var o=zM(n,i);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(i.button===0&&!n.setup.panning.allowLeftClickPan||i.button===1&&!n.setup.panning.allowMiddleClickPan||i.button===2&&!n.setup.panning.allowRightClickPan||(i.preventDefault(),i.stopPropagation(),is(n),HM(n,i),zt(Mt(n),i,s)))}}},this.onPanning=function(i){var r=n.setup.disabled,s=n.props.onPanning;if(!r){var o=UM(n);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(i.preventDefault(),i.stopPropagation(),WM(n,i.clientX,i.clientY),zt(Mt(n),i,s))}}},this.onPanningStop=function(i){var r=n.props.onPanningStop;n.isPanning&&(yce(n),zt(Mt(n),i,r))},this.onPinchStart=function(i){var r=n.setup.disabled,s=n.props,o=s.onPinchingStart,a=s.onZoomStart;if(!r){var l=Dce(n,i);l&&(Hce(n,i),is(n),zt(Mt(n),i,o),zt(Mt(n),i,a))}},this.onPinch=function(i){var r=n.setup.disabled,s=n.props,o=s.onPinching,a=s.onZoom;if(!r){var l=Lce(n);l&&(i.preventDefault(),i.stopPropagation(),Wce(n,i),zt(Mt(n),i,o),zt(Mt(n),i,a))}},this.onPinchStop=function(i){var r=n.props,s=r.onPinchingStop,o=r.onZoomStop;n.pinchStartScale&&(Gce(n),zt(Mt(n),i,s),zt(Mt(n),i,o))},this.onTouchPanningStart=function(i){var r=n.setup.disabled,s=n.props.onPanningStart;if(!r){var o=zM(n,i);if(o){var a=n.lastTouch&&+new Date-n.lastTouch<200&&i.touches.length===1;if(!a){n.lastTouch=+new Date,is(n);var l=i.touches,c=l.length===1,u=l.length===2;c&&(is(n),HM(n,i),zt(Mt(n),i,s)),u&&n.onPinchStart(i)}}}},this.onTouchPanning=function(i){var r=n.setup.disabled,s=n.props.onPanning;if(n.isPanning&&i.touches.length===1){if(r)return;var o=UM(n);if(!o)return;i.preventDefault(),i.stopPropagation();var a=i.touches[0];WM(n,a.clientX,a.clientY),zt(Mt(n),i,s)}else i.touches.length>1&&n.onPinch(i)},this.onTouchPanningStop=function(i){n.onPanningStop(i),n.onPinchStop(i)},this.onDoubleClick=function(i){var r=n.setup.disabled;if(!r){var s=Xce(n,i);s&&Yce(n,i)}},this.clearPanning=function(i){n.isPanning&&n.onPanningStop(i)},this.setKeyPressed=function(i){n.pressedKeys[i.key]=!0},this.setKeyUnPressed=function(i){n.pressedKeys[i.key]=!1},this.isPressingKeys=function(i){return i.length?!!i.find(function(r){return n.pressedKeys[r]}):!0},this.setTransformState=function(i,r,s){var o=n.props.onTransformed;if(!Number.isNaN(i)&&!Number.isNaN(r)&&!Number.isNaN(s)){i!==n.transformState.scale&&(n.transformState.previousScale=n.transformState.scale,n.transformState.scale=i),n.transformState.positionX=r,n.transformState.positionY=s,n.applyTransformation();var a=Mt(n);n.onChangeCallbacks.forEach(function(l){return l(a)}),zt(a,{scale:i,positionX:r,positionY:s},o)}else console.error("Detected NaN set state values")},this.setCenter=function(){if(n.wrapperComponent&&n.contentComponent){var i=ZF(n.transformState.scale,n.wrapperComponent,n.contentComponent);n.setTransformState(i.scale,i.positionX,i.positionY)}},this.handleTransformStyles=function(i,r,s){return n.props.customTransform?n.props.customTransform(i,r,s):Nce(i,r,s)},this.applyTransformation=function(){if(!(!n.mounted||!n.contentComponent)){var i=n.transformState,r=i.scale,s=i.positionX,o=i.positionY,a=n.handleTransformStyles(s,o,r);n.contentComponent.style.transform=a}},this.getContext=function(){return Mt(n)},this.onChange=function(i){return n.onChangeCallbacks.has(i)||n.onChangeCallbacks.add(i),function(){n.onChangeCallbacks.delete(i)}},this.onInit=function(i){return n.onInitCallbacks.has(i)||n.onInitCallbacks.add(i),function(){n.onInitCallbacks.delete(i)}},this.init=function(i,r){n.cleanupWindowEvents(),n.wrapperComponent=i,n.contentComponent=r,hc(n,n.transformState.scale),n.handleInitializeWrapperEvents(i),n.handleInitialize(i,r),n.initializeWindowEvents(),n.isInitialized=!0;var s=Mt(n);zt(s,void 0,n.props.onInit)},this.props=e,this.setup=KM(this.props),this.transformState=qF(this.props)}return t}(),gE=Dt.createContext(null),Zce=function(t,e){return typeof t=="function"?t(e):t},Qce=Dt.forwardRef(function(t,e){var n=x.useRef(new Jce(t)).current,i=Zce(t.children,sk(n));return x.useImperativeHandle(e,function(){return sk(n)},[n]),x.useEffect(function(){n.update(t)},[n,t]),Dt.createElement(gE.Provider,{value:n},i)});Dt.forwardRef(function(t,e){var n=x.useRef(null),i=x.useContext(gE);return x.useEffect(function(){return i.onChange(function(r){if(n.current){var s=0,o=0;n.current.style.transform=i.handleTransformStyles(s,o,1/r.instance.transformState.scale)}})},[i]),Dt.createElement("div",Ya({},t,{ref:Pce([n,e])}))});function eue(t,e){e===void 0&&(e={});var n=e.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",n==="top"&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}}var tue=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
  transform: translate3d(0, 0, 0);
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,qM={wrapper:"transform-component-module_wrapper__SPB86",content:"transform-component-module_content__FBWxo"};eue(tue);var nue=function(t){var e=t.children,n=t.wrapperClass,i=n===void 0?"":n,r=t.contentClass,s=r===void 0?"":r,o=t.wrapperStyle,a=t.contentStyle,l=t.wrapperProps,c=l===void 0?{}:l,u=t.contentProps,d=u===void 0?{}:u,f=x.useContext(gE),p=f.init,m=f.cleanupWindowEvents,g=x.useRef(null),y=x.useRef(null);return x.useEffect(function(){var v=g.current,b=y.current;return v!==null&&b!==null&&p&&(p==null||p(v,b)),function(){m==null||m()}},[]),Dt.createElement("div",Ya({},c,{ref:g,className:"".concat(rk.wrapperClass," ").concat(qM.wrapper," ").concat(i),style:o}),Dt.createElement("div",Ya({},d,{ref:y,className:"".concat(rk.contentClass," ").concat(qM.content," ").concat(s),style:a}),e))};function iue({wrapperRef:t}){const e=Rt();return h.jsxs("div",{className:"absolute right-2 top-2 flex flex-col rounded-lg border border-stone-600 bg-stone-900 shadow",children:[h.jsx("button",{className:"m-0.5 flex size-8 items-center justify-center rounded-t-lg text-white transition-colors hover:enabled:bg-stone-800",onClick:()=>{var n;return(n=t.current)==null?void 0:n.zoomIn()},title:e("control.zoom.in"),children:h.jsx("span",{className:"size-4",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),h.jsx("hr",{className:"border-stone-600"}),h.jsx("button",{className:"m-0.5 flex size-8 items-center justify-center rounded-b-lg text-white transition-colors hover:enabled:bg-stone-800",onClick:()=>{var n;return(n=t.current)==null?void 0:n.zoomOut()},title:e("control.zoom.out"),children:h.jsx("span",{className:"size-4",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})})})]})}function rue(){const t=Rt(),e=at(gt),n=at(gv),i=at(ln),r=at(Ev),[s]=Fy(),o=x.useRef(null),a=(l,c)=>{const[u,...d]=l.split(":"),f=d.join(":").trim();return{cycle:c,stage:u.trim(),action:f}};return x.useEffect(()=>{if(e){const l=z.get(kd),c=a(e,l);z.set(gv,u=>[...u,c])}},[e]),x.useEffect(()=>{i.type==="running"&&r&&gi({title:"El programa ha sido modificado",description:"La ejecución se reiniciará desde el principio para aplicar los cambios.",variant:"info"})},[i,r]),x.useEffect(()=>{const l=o.current;l&&(l.scrollTop=l.scrollHeight)},[n]),s.showInstructionCycle?h.jsxs("div",{className:"absolute left-[120px] top-[520px] z-10 h-min w-[300px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"mb-2 block h-min w-full cursor-move rounded-br-lg rounded-tl-lg border-b border-stone-600 bg-purple-500 px-2 py-1 text-lg text-white",children:t("computer.cpu.instruction-cycle")}),h.jsx("hr",{className:"border-stone-600"}),h.jsx("div",{ref:o,className:"flex max-h-[300px] w-full flex-col overflow-y-auto p-2",children:n.map((l,c)=>{const u=c===0||n[c-1].stage!==l.stage;return h.jsxs("div",{children:[u&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:`mb-2 ${l.stage==="Captación"?"font-serif text-lg text-blue-400":l.stage==="Ejecución"?"font-sans text-lg text-green-400":l.stage==="Interrupción"?"font-mono text-lg text-red-400":"text-sm font-bold text-white"}`,children:["Etapa: ",l.stage]}),l.stage!=="Interrupción"&&h.jsxs("div",{className:"mb-2 flex font-serif text-sm font-bold text-white",children:[h.jsx("div",{className:"w-1/4 text-center",children:"Ciclo"}),h.jsx("div",{className:"w-3/4 text-left",children:"Acción"})]})]}),l.stage==="Interrupción"?h.jsx("div",{className:"mb-1 text-sm text-white",children:l.action}):h.jsxs("div",{className:"mb-1 flex text-sm text-white",children:[h.jsx("div",{className:"w-1/4 text-center",children:l.cycle}),h.jsx("div",{className:"w-3/4 text-left",children:l.action})]})]},c)})})]}):null}function sue(){const t=Rt(),{devices:e}=On();return e.hasIOBus?h.jsx("div",{className:"absolute left-[500px] top-[525px] z-10 h-[70px] w-[250px] rounded-lg border border-stone-600 bg-stone-900",children:h.jsx("span",{className:"block w-min whitespace-nowrap rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-lg text-white",children:t("computer.chip-select.name")})}):null}function oue(){const{devices:t}=On(),e=["M 380 420 H 800",t.pic&&"M 780 420 V 805 H 450",t.pio&&"M 780 420 V 805 H 900",t.timer&&"M 780 420 V 805 H 583 V 875",t.handshake&&"M 780 420 V 1015 H 900"].filter(Boolean).join(" "),n=["M 380 440 H 800",t.pic&&"M 790 440 V 815 H 450",t.pio&&"M 790 440 V 815 H 900",t.timer&&"M 790 440 V 815 H 573 V 875",t.handshake&&"M 790 440 V 1025 H 900"].filter(Boolean).join(" "),i="M 750 545 H 800",{path:r,strokeDashoffset:s,opacity:o}=mt("bus.rd"),{path:a,strokeDashoffset:l,opacity:c}=mt("bus.wr");return h.jsxs("svg",{className:"pointer-events-none absolute inset-0 z-[15] size-full",children:[h.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:e}),h.jsx("path",{className:"fill-none stroke-stone-700 stroke-[4px]",strokeLinejoin:"round",d:e}),h.jsx(an.path,{d:r,className:"fill-none stroke-red-500 stroke-[4px]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:s,opacity:o}}),h.jsx(an.text,{x:"590",y:"410",className:"pointer-events-none fill-red-500 font-mono text-xs font-bold",textAnchor:"middle",style:{opacity:o},children:"Read"}),h.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:n}),h.jsx("path",{className:"fill-none stroke-stone-700 stroke-[4px]",strokeLinejoin:"round",d:n}),h.jsx(an.path,{d:a,className:"fill-none stroke-blue-500 stroke-[4px]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:l,opacity:c}}),h.jsx(an.text,{x:"590",y:"455",className:"pointer-events-none fill-blue-500 font-mono text-xs font-bold",textAnchor:"middle",style:{opacity:c},children:"Write"}),t.hasIOBus&&h.jsxs(h.Fragment,{children:[h.jsx(An,{springs:"bus.iom",d:"M 380 460 H 675 V 525"}),h.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:i}),h.jsx(an.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:i,style:mt("bus.mem")})]}),t.pic&&h.jsx(An,{springs:"bus.pic",d:"M 521 595 V 730 H 450"}),t.timer&&h.jsx(An,{springs:"bus.timer",d:"M 563 595 V 875"}),t.pio&&h.jsx(An,{springs:"bus.pio",d:"M 612 595 V 730 H 900"}),t.handshake&&h.jsx(An,{springs:"bus.handshake",d:"M 710 595 V 950 H 900"}),t.pic&&h.jsxs(h.Fragment,{children:[h.jsx(An,{springs:"bus.intr",d:"M 110 700 V 470"}),h.jsx(An,{springs:"bus.inta",d:"M 160 470 V 700"})]}),t.pic&&t.f10&&h.jsx(An,{springs:"bus.int0",d:"M 145 950 V 900"}),t.pic&&t.timer&&h.jsx(An,{springs:"bus.int1",d:"M 475 955 H 400 V 900"}),t.pic&&t.handshake&&h.jsx(An,{springs:"bus.int2",d:"M 900 1075 H 300 V 900"}),t.pio==="switches-and-leds"&&h.jsxs(h.Fragment,{children:[h.jsx(An,{springs:"bus.switches->pio",d:"M 1300 758 H 1120"}),h.jsx(An,{springs:"bus.pio->leds",d:"M 1120 868 H 1300"})]}),t.pio==="printer"&&h.jsxs(h.Fragment,{children:[h.jsx(An,{springs:"bus.printer.strobe",d:"M 1120 770 H 1225 V 992 H 1300"}),h.jsx(An,{springs:"bus.printer.busy",d:"M 1300 1007 H 1210 V 782 H 1120"}),h.jsx(An,{springs:"bus.printer.data",d:"M 1120 850 H 1175 V 1062 H 1300"})]}),t.handshake==="printer"&&h.jsxs(h.Fragment,{children:[h.jsx(An,{springs:"bus.printer.strobe",d:"M 1120 992 H 1300"}),h.jsx(An,{springs:"bus.printer.busy",d:"M 1300 1007 H 1120"}),h.jsx(An,{springs:"bus.printer.data",d:"M 1120 1062 H 1300"})]})]})}function An({d:t,springs:e}){return h.jsxs(h.Fragment,{children:[h.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:t}),h.jsx("path",{className:"fill-none stroke-stone-700 stroke-[4px]",strokeLinejoin:"round",d:t}),h.jsx(an.path,{d:t,className:"fill-none stroke-red-500 stroke-[4px]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:mt(e)})]})}function aue(){const t=Rt(),{devices:e}=On();return h.jsxs(h.Fragment,{children:[h.jsx(Hi,{className:"left-[384px] top-[403px]",children:"rd"}),h.jsx(Hi,{className:"left-[384px] top-[423px]",children:"wr"}),e.hasIOBus&&h.jsxs(h.Fragment,{children:[h.jsx(Hi,{className:"left-[384px] top-[443px]",children:"io/m"}),h.jsx(Hi,{className:"left-[715px] top-[538px]",children:t("computer.chip-select.mem")})]}),e.pic&&h.jsx(Hi,{className:"left-[510px] top-[573px]",children:t("computer.chip-select.pic")}),e.timer&&h.jsx(Hi,{className:"left-[545px] top-[573px]",children:t("computer.chip-select.timer")}),e.pio&&h.jsx(Hi,{className:"left-[600px] top-[573px]",children:t("computer.chip-select.pio")}),e.handshake&&h.jsx(Hi,{className:"left-[675px] top-[573px]",children:t("computer.chip-select.handshake")}),e.pic&&h.jsxs(h.Fragment,{children:[h.jsx(Hi,{className:"left-[75px] top-[478px]",children:"intr"}),h.jsx(Hi,{className:"left-[125px] top-[478px]",children:"inta"})]}),e.printer&&h.jsxs(h.Fragment,{children:[h.jsx(Hi,{className:"left-[1310px] top-[983px]",children:"strobe"}),h.jsx(Hi,{className:"left-[1310px] top-[998px]",children:"busy"}),h.jsx(Hi,{className:"left-[1310px] top-[1053px]",children:"data"})]})]})}function Hi({className:t,children:e}){return h.jsx("span",{className:ee("pointer-events-none absolute z-[15] block font-mono text-xs font-bold tracking-wider text-stone-400",t),children:e})}function lue(){const{devices:t}=On(),e=["M 659 349 H 800",t.pic&&"M 725 349 V 770 H 450",t.pio&&"M 725 349 V 770 H 900",t.timer&&"M 725 349 V 770 H 618 V 875",t.handshake&&"M 725 349 V 980 H 900"].filter(Boolean).join(" "),n=["M 629 249 H 800",t.pic&&"M 765 249 V 790 H 450",t.pio&&"M 765 249 V 790 H 900",t.timer&&"M 765 249 V 790 H 598 V 875",t.handshake&&"M 765 249 V 1000 H 900"].filter(Boolean).join(" "),{path:i,strokeDashoffset:r,opacity:s}=mt("bus.data"),{path:o,strokeDashoffset:a,opacity:l}=mt("bus.address");return h.jsxs("svg",{className:"pointer-events-none absolute inset-0 z-[5] size-full",children:[h.jsx("path",{className:"fill-none stroke-stone-900 stroke-[14px]",strokeLinejoin:"round",d:n}),h.jsx("path",{className:"fill-none stroke-stone-700 stroke-[12px]",strokeLinejoin:"round",d:n}),h.jsx(an.path,{d:i,className:"fill-none stroke-mantis-400 stroke-[12px]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:r,opacity:s}}),h.jsx("path",{className:"fill-none stroke-stone-900 stroke-[14px]",strokeLinejoin:"round",d:e}),h.jsx("path",{className:"fill-none stroke-stone-700 stroke-[12px]",strokeLinejoin:"round",d:e}),h.jsx(an.path,{d:o,className:"fill-none stroke-blue-400 stroke-[12px]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:{strokeDashoffset:a,opacity:l}})]})}function cue(){return h.jsxs(h.Fragment,{children:[h.jsx(lue,{}),h.jsx(oue,{}),h.jsx(aue,{}),h.jsx(sue,{})]})}function uue(){const{devices:t}=On();if(!t.clock)return null;const e=mt("clock.angle");return h.jsx("div",{className:"absolute left-[520px] top-[930px] z-10 size-12 rounded-full border border-stone-600 bg-stone-800 p-1 [&_*]:z-20",children:h.jsxs("svg",{viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:"size-full fill-none stroke-white stroke-2",children:[h.jsx("circle",{cx:"12",cy:"12",r:"10"}),h.jsx(an.line,{x1:e.to(n=>12+6*Math.sin(n*Math.PI/180)),y1:e.to(n=>12-6*Math.cos(n*Math.PI/180)),x2:12,y2:12})]})})}const due={register:{beginner:"Un registro es como una caja pequeña donde la CPU guarda datos temporalmente. Es muy rápido de acceder.",intermediate:"Los registros son memoria de acceso rápido dentro de la CPU. Son más rápidos que la RAM pero tienen menos capacidad.",advanced:"Registros de propósito general (AL, BL, CL, DL) para operaciones aritméticas. Cada uno puede almacenar 8 bits."},memory:{beginner:"La memoria RAM es como un gran almacén donde se guardan programas y datos. Cada ubicación tiene una dirección única.",intermediate:"Memoria de acceso aleatorio (RAM) de 256 bytes. La CPU puede leer y escribir en cualquier dirección.",advanced:"Memoria principal de 256 bytes con direccionamiento de 8 bits (00-FF). Organizada en celdas de 8 bits cada una."},alu:{beginner:'La ALU (Unidad Aritmético-Lógica) es el "cerebro matemático" de la CPU. Realiza sumas, restas y comparaciones.',intermediate:"Arithmetic Logic Unit procesa operaciones matemáticas y lógicas. Recibe operandos y devuelve resultados.",advanced:"ALU de 8 bits que ejecuta operaciones: ADD, SUB, AND, OR, XOR, NOT, CMP. Incluye flags de estado (Z, N, C)."},bus:{beginner:'Los buses son como "carreteras" por donde viajan los datos entre los componentes de la computadora.',intermediate:"Buses de datos y control conectan CPU, memoria y periféricos. El bus de datos transporta información.",advanced:"Bus de datos de 8 bits bidireccional, bus de direcciones de 8 bits, y líneas de control para sincronización."},instruction:{beginner:"Una instrucción es un comando que le dice a la CPU qué operación realizar, como sumar dos números.",intermediate:"Cada instrucción tiene un código de operación (opcode) y operandos. La CPU las ejecuta secuencialmente.",advanced:"Formato de instrucción: opcode (1 byte) + operandos. Ejemplos: MOV, ADD, JMP, CALL. Ciclo fetch-decode-execute."},"program-counter":{beginner:"El contador de programa (IP) indica qué instrucción ejecutar a continuación. Se incrementa automáticamente.",intermediate:"Program Counter (IP) contiene la dirección de la siguiente instrucción. Se actualiza en cada ciclo.",advanced:"Instruction Pointer (IP) de 8 bits. Incrementa en 1-2 bytes según el tamaño de la instrucción actual."},flags:{beginner:"Las banderas son indicadores que muestran el resultado de operaciones, como si el resultado fue cero.",intermediate:"Flags de estado: Zero (Z), Negative (N), Carry (C). Se actualizan automáticamente en operaciones.",advanced:"Flags de 1 bit: Z (resultado cero), N (resultado negativo), C (acarreo/overflow). Controlan saltos condicionales."},stack:{beginner:"La pila es como una pila de platos. Solo puedes agregar o quitar del tope. Útil para guardar direcciones de retorno.",intermediate:"Stack Pointer (SP) apunta al tope de la pila. PUSH agrega datos, POP los retira. LIFO (Last In, First Out).",advanced:"Pila de 256 bytes con SP de 8 bits. PUSH decrementa SP, POP lo incrementa. Usada para CALL/RET y variables locales."},interrupt:{beginner:"Una interrupción es como un timbre que interrumpe lo que está haciendo la CPU para atender algo urgente.",intermediate:"Las interrupciones permiten que dispositivos externos notifiquen a la CPU eventos importantes.",advanced:"Sistema de interrupciones con PIC (Programmable Interrupt Controller). IRET retorna de la rutina de interrupción."},peripheral:{beginner:"Los periféricos son dispositivos externos como teclado, pantalla y LEDs que se conectan a la computadora.",intermediate:"Periféricos se comunican con la CPU a través de puertos de entrada/salida (I/O).",advanced:"Sistema de I/O con PIO (Programmable I/O) y módulos específicos para cada periférico."},assembly:{beginner:"El lenguaje ensamblador es un lenguaje de programación que usa palabras en lugar de números para las instrucciones.",intermediate:"Cada instrucción de ensamblador se traduce a código de máquina. El ensamblador hace esta traducción.",advanced:"Sintaxis: etiqueta, mnemónico, operandos, comentarios. Directivas como ORG, DB, DW para datos."},addressing:{beginner:"El direccionamiento es cómo la CPU encuentra los datos que necesita en la memoria.",intermediate:"Modos de direccionamiento: inmediato, directo, indirecto. Cada uno accede a datos de forma diferente.",advanced:"Direccionamiento inmediato (valor en instrucción), directo (dirección en instrucción), indirecto (dirección en registro)."}},fue={beginner:dc,intermediate:jp,advanced:hL},YM={beginner:"text-blue-400",intermediate:"text-yellow-400",advanced:"text-purple-400"},iB=x.memo(({concept:t,level:e="beginner",children:n,className:i})=>{const[r,s]=x.useState(e),o=due[t];if(!o)return console.warn(`No educational content found for concept: ${t}`),h.jsx(h.Fragment,{children:n});const a=o[r],l=fue[r],c=h.jsxs("div",{className:"max-w-xs p-3",children:[h.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[h.jsx(Fe,{icon:l,className:ee("text-sm",YM[r])}),h.jsxs("span",{className:ee("text-sm font-medium",YM[r]),children:["Nivel"," ",r==="beginner"?"Básico":r==="intermediate"?"Intermedio":"Avanzado"]})]}),h.jsx("p",{className:"mb-3 text-sm text-stone-300",children:a}),h.jsx("div",{className:"flex gap-1",children:["beginner","intermediate","advanced"].map(u=>h.jsx("button",{onClick:d=>{d.stopPropagation(),s(u)},className:ee("rounded px-2 py-1 text-xs transition-colors",r===u?"bg-mantis-600 text-white":"bg-stone-700 text-stone-400 hover:bg-stone-600"),children:u==="beginner"?"B":u==="intermediate"?"I":"A"},u))})]});return h.jsx(us,{content:c,position:"top",children:h.jsxs("span",{className:ee("inline-flex cursor-help items-center gap-1",i),children:[n,h.jsx(Fe,{icon:dc,className:"text-xs text-mantis-400 opacity-70 transition-opacity hover:opacity-100"})]})})});iB.displayName="EducationalTooltip";var _b="Popover",[rB,_ge]=vs(_b,[Hd]),Qp=Hd(),[hue,El]=rB(_b),sB=t=>{const{__scopePopover:e,children:n,open:i,defaultOpen:r,onOpenChange:s,modal:o=!1}=t,a=Qp(e),l=x.useRef(null),[c,u]=x.useState(!1),[d,f]=el({prop:i,defaultProp:r??!1,onChange:s,caller:_b});return h.jsx(s$,{...a,children:h.jsx(hue,{scope:e,contentId:$d(),triggerRef:l,open:d,onOpenChange:f,onOpenToggle:x.useCallback(()=>f(p=>!p),[f]),hasCustomAnchor:c,onCustomAnchorAdd:x.useCallback(()=>u(!0),[]),onCustomAnchorRemove:x.useCallback(()=>u(!1),[]),modal:o,children:n})})};sB.displayName=_b;var oB="PopoverAnchor",pue=x.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=El(oB,n),s=Qp(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:a}=r;return x.useEffect(()=>(o(),()=>a()),[o,a]),h.jsx(fb,{...s,...i,ref:e})});pue.displayName=oB;var aB="PopoverTrigger",lB=x.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=El(aB,n),s=Qp(n),o=st(e,r.triggerRef),a=h.jsx(Ue.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":hB(r.open),...i,ref:o,onClick:ve(t.onClick,r.onOpenToggle)});return r.hasCustomAnchor?a:h.jsx(fb,{asChild:!0,...s,children:a})});lB.displayName=aB;var vE="PopoverPortal",[mue,gue]=rB(vE,{forceMount:void 0}),cB=t=>{const{__scopePopover:e,forceMount:n,children:i,container:r}=t,s=El(vE,e);return h.jsx(mue,{scope:e,forceMount:n,children:h.jsx(Go,{present:n||s.open,children:h.jsx(Yp,{asChild:!0,container:r,children:i})})})};cB.displayName=vE;var Md="PopoverContent",uB=x.forwardRef((t,e)=>{const n=gue(Md,t.__scopePopover),{forceMount:i=n.forceMount,...r}=t,s=El(Md,t.__scopePopover);return h.jsx(Go,{present:i||s.open,children:s.modal?h.jsx(yue,{...r,ref:e}):h.jsx(bue,{...r,ref:e})})});uB.displayName=Md;var vue=pd("PopoverContent.RemoveScroll"),yue=x.forwardRef((t,e)=>{const n=El(Md,t.__scopePopover),i=x.useRef(null),r=st(e,i),s=x.useRef(!1);return x.useEffect(()=>{const o=i.current;if(o)return l$(o)},[]),h.jsx(pb,{as:vue,allowPinchZoom:!0,children:h.jsx(dB,{...t,ref:r,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ve(t.onCloseAutoFocus,o=>{var a;o.preventDefault(),s.current||(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:ve(t.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,c=a.button===2||l;s.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:ve(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),bue=x.forwardRef((t,e)=>{const n=El(Md,t.__scopePopover),i=x.useRef(!1),r=x.useRef(!1);return h.jsx(dB,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o,a;(o=t.onCloseAutoFocus)==null||o.call(t,s),s.defaultPrevented||(i.current||(a=n.triggerRef.current)==null||a.focus(),s.preventDefault()),i.current=!1,r.current=!1},onInteractOutside:s=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,s),s.defaultPrevented||(i.current=!0,s.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const o=s.target;((c=n.triggerRef.current)==null?void 0:c.contains(o))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&r.current&&s.preventDefault()}})}),dB=x.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:i,onOpenAutoFocus:r,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...d}=t,f=El(Md,n),p=Qp(n);return KC(),h.jsx(lb,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:r,onUnmountAutoFocus:s,children:h.jsx(Kp,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>f.onOpenChange(!1),children:h.jsx(rE,{"data-state":hB(f.open),role:"dialog",id:f.contentId,...p,...d,ref:e,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),fB="PopoverClose",wue=x.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=El(fB,n);return h.jsx(Ue.button,{type:"button",...i,ref:e,onClick:ve(t.onClick,()=>r.onOpenChange(!1))})});wue.displayName=fB;var xue="PopoverArrow",Sue=x.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=Qp(n);return h.jsx(sE,{...r,...i,ref:e})});Sue.displayName=xue;function hB(t){return t?"open":"closed"}var kue=sB,_ue=lB,Cue=cB,pB=uB;const mB=kue,gB=_ue,yE=x.forwardRef(({className:t,align:e="center",sideOffset:n=4,...i},r)=>h.jsx(Cue,{children:h.jsx(pB,{ref:r,align:e,sideOffset:n,className:ee("z-50 w-72 rounded-md border border-stone-600 bg-stone-900 text-white shadow-md outline-none transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...i})}));yE.displayName=pB.displayName;function or({name:t,valueAtom:e,springs:n,emphasis:i=!1,className:r}){const s=Rt(),o=at(e),a=o.low,c={AX:"AL",BX:"BL",CX:"CL",DX:"DL"}[t]||t,u=["AL","BL","CL","DL"].includes(t),d=t==="IP",f=t==="SP",p=t==="MBR",m=t==="MAR",g=t==="IR",y=["id","ri"].includes(t),v=c==="FLAGS";return h.jsxs(mB,{children:[h.jsx(gB,{asChild:!0,children:h.jsxs(an.button,{title:c!=="left"&&c!=="right"?`Registro ${c}`:c,className:ee("flex cursor-pointer items-center font-mono leading-none transition-opacity",u||d||f||p||m||g||y?"size-10 justify-center rounded border-2 text-lg font-bold shadow-[0_2px_8px_0_rgba(60,180,120,0.10)] transition-all duration-200 hover:scale-110 hover:shadow-xl":v?"min-h-[32px] min-w-[90px] gap-2 rounded border-2 border-yellow-400 bg-gradient-to-br from-yellow-900 via-yellow-800 to-stone-900 px-2.5 py-0.5 font-bold text-yellow-200 shadow-[0_2px_8px_0_rgba(250,204,21,0.10)]":"rounded-md border bg-stone-800 px-2 py-1",u?"border-mantis-500 bg-stone-800 text-mantis-300":d?"border-red-500 bg-stone-800 text-red-300":f?"border-yellow-400 bg-stone-800 text-yellow-300":p||m||g?"border-indigo-400 bg-stone-800 text-indigo-300":y?"border-cyan-400 bg-stone-800 text-cyan-300":v?"":i?"border-mantis-400 text-lg":"border-stone-600 text-base",r),style:c==="left"||c==="right"?{backgroundColor:"transparent"}:mt(n),children:[u||d||f||p||m||g||y?h.jsxs(h.Fragment,{children:[h.jsx("span",{className:ee("pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[8px] font-bold",u?"text-mantis-400":d?"text-red-400":f?"text-yellow-400":y?"text-cyan-400":"text-indigo-400"),children:c}),h.jsx("span",{className:"mt-2 font-mono text-base font-bold",children:a.toString("hex")})]}):h.jsxs(h.Fragment,{children:[h.jsx("span",{className:ee("mr-2 font-extrabold tracking-wide",u&&"text-mantis-300 drop-shadow",v&&"text-yellow-200",y&&"text-cyan-300",(c==="left"||c==="right")&&"text-xs"),children:c}),h.jsx("span",{className:ee("rounded px-1 py-0.5 font-light",u?"border border-mantis-400 bg-stone-950 text-mantis-300":v?"border border-yellow-400 bg-yellow-950 text-yellow-200":y?"border border-cyan-400 bg-cyan-950 text-cyan-200":"border border-stone-600 bg-stone-900 text-white"),children:a.toString("hex")})]}),v&&h.jsxs("span",{className:"ml-2 flex gap-1",children:[h.jsx("span",{className:ee("rounded border px-1 text-xs font-bold",Number(a)&2?"border-yellow-300 bg-yellow-400 text-yellow-950":"border-yellow-700 bg-stone-800 text-yellow-300"),children:"Z"}),h.jsx("span",{className:ee("rounded border px-1 text-xs font-bold",Number(a)&1?"border-yellow-300 bg-yellow-400 text-yellow-950":"border-yellow-700 bg-stone-800 text-yellow-300"),children:"C"})]})]})}),h.jsxs(yE,{className:"w-60",children:[h.jsx("div",{className:"px-4 py-2",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("p",{className:"font-medium text-white",children:c!=="left"&&c!=="right"?`Registro ${c}`:c}),c!=="left"&&c!=="right"&&h.jsx(iB,{concept:"register",level:"beginner",children:h.jsx("span",{className:"text-xs text-mantis-400",children:"💡"})})]})}),h.jsx("hr",{className:"border-stone-600"}),h.jsx("ul",{className:"px-4 py-2 text-sm",children:["hex","bin","uint","int","safe-ascii"].map(b=>h.jsxs("li",{children:[h.jsx("b",{className:"font-medium",children:s(`generics.byte-representation.${b}`)}),":"," ",h.jsx("span",{className:"font-mono text-mantis-400",children:o.low.toString(b)})]},b))})]})]})}function Eue(){const t=at(Ye.FLAGS),e=at(VL),[n,i]=x.useState(!1),r=at(UL),[s]=Fy();x.useEffect(()=>{const d=p=>{i(p==="ADD"||p==="SUB"||p==="CMP"||p==="AND"||p==="OR"||p==="XOR"||p==="NOT"||p==="NEG"||p==="DEC"||p==="INC")},f=p=>{d(p.detail.instruction)};return window.addEventListener("instructionChange",f),()=>{window.removeEventListener("instructionChange",f)}},[]);const o=t.bit(1),a=t.bit(0),l=t.bit(3),c=t.bit(4),u=t.bit(2);return h.jsxs(h.Fragment,{children:[h.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[h.jsx(an.path,{className:"fill-none stroke-mantis-400 stroke-bus drop-shadow-[0_0_4px_rgba(60,180,120,0.4)]",strokeLinejoin:"round",d:"M 120 85 H 220",pathLength:1,strokeDasharray:1,style:mt("cpu.alu.operands")}),h.jsx(an.path,{className:"fill-none stroke-mantis-400 stroke-bus drop-shadow-[0_0_4px_rgba(60,180,120,0.4)]",strokeLinejoin:"round",d:"M 120 145 H 220",pathLength:1,strokeDasharray:1,style:mt("cpu.alu.operands")}),h.jsxs("defs",{children:[h.jsxs("linearGradient",{id:"aluGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[h.jsx("stop",{offset:"0%",stopColor:"#374151"}),h.jsx("stop",{offset:"50%",stopColor:"#4B5563"}),h.jsx("stop",{offset:"100%",stopColor:"#1F2937"})]}),h.jsx("filter",{id:"aluShadow",children:h.jsx("feDropShadow",{dx:"2",dy:"2",stdDeviation:"3",floodColor:"rgba(0,0,0,0.3)"})})]}),h.jsx("path",{d:"M 220 60 v 50 l 20 12 l -20 12 v 50 l 60 -36 v -52 Z",fill:"url(#aluGradient)",stroke:"#6B7280",strokeWidth:"2",strokeLinejoin:"round",filter:"url(#aluShadow)"}),h.jsx("text",{x:"250",y:"105",fill:"#E5E7EB",fontSize:"12",fontWeight:"bold",textAnchor:"middle",children:"ALU"})]}),h.jsx(an.span,{className:"icon-[lucide--settings] absolute left-[244px] top-[120px] block size-5 text-stone-300",style:{transform:mt("cpu.alu.cog").rot.to(d=>`rotate(${d*60}deg)`)}}),n&&h.jsx(an.span,{className:"absolute left-[244px] top-[40px] z-30 flex w-min items-center rounded-md border border-stone-600 px-2 py-1 font-mono leading-none",style:mt("cpu.alu.operation"),children:e}),h.jsxs(an.div,{className:ee("absolute flex min-h-[30px] w-min min-w-[38px] items-center gap-0.5 rounded-lg border-2 border-stone-400 bg-gradient-to-br from-stone-700 via-stone-600 to-stone-800 px-0.5 py-1 font-bold text-stone-200 shadow-lg ring-1 ring-stone-300",s.flagsVisibility==="SF_OF_CF_ZF"?"left-[210px] top-[190px]":"left-[230px] top-[190px]"),style:mt("cpu.FLAGS"),children:[h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[6px] font-bold text-stone-300",children:"FLAGS"}),h.jsxs("div",{className:"mt-2 flex items-center gap-0.5",children:[r&&h.jsx("span",{className:ee("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",c?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"I"}),s.flagsVisibility==="SF_OF_CF_ZF"&&h.jsxs(h.Fragment,{children:[h.jsx("span",{className:ee("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",l?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"S"}),h.jsx("span",{className:ee("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",u?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"O"})]}),h.jsx("span",{className:ee("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",o?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"C"}),h.jsx("span",{className:ee("rounded border px-0.5 py-0 text-[10px] font-bold transition-all duration-200",a?"border-stone-300 bg-stone-300 text-stone-950 shadow-[0_0_4px_rgba(120,113,108,0.6)]":"border-stone-600 bg-stone-800 text-stone-300"),children:"Z"})]})]})]})}function Aue(){const t=Rt(),[e,n]=x.useState(!1),i=at(es),r=()=>{if(!i)return"CPU detenida";switch(i.phase){case"fetching":return"Leyendo instrucción";case"fetching-operands":return"Obteniendo operandos";case"executing":return"Ejecutando operación";case"writeback":return"Escribiendo resultado";case"interrupt":return"Procesando interrupción";case"int6":case"int7":return"Rutina de interrupción";case"stopped":return i.error?`Error: ${i.error.message}`:"CPU detenida";default:return"Estado desconocido"}},s=()=>{if(!i)return"⏹️";switch(i.phase){case"fetching":return"📥";case"fetching-operands":return"🔍";case"executing":return"⚡";case"writeback":return"💾";case"interrupt":return"🚨";case"int6":case"int7":return"🔄";case"stopped":return i.error?"❌":"⏹️";default:return"❓"}},o=()=>{if(!i)return"text-stone-400";switch(i.phase){case"fetching":return"text-blue-400";case"fetching-operands":return"text-yellow-400";case"executing":return"text-green-400";case"writeback":return"text-purple-400";case"interrupt":return"text-red-400";case"int6":case"int7":return"text-orange-400";case"stopped":return i.error?"text-red-400":"text-stone-400";default:return"text-stone-400"}},a=()=>i?i.phase==="fetching"?"fetch":i.phase==="fetching-operands"||i.phase==="executing"||i.phase==="writeback"?"execute":"idle":"idle";return h.jsxs(h.Fragment,{children:[h.jsx("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:h.jsx(an.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 205 310 V 320",pathLength:1,strokeDasharray:1,style:mt("cpu.decoder.path")})}),h.jsx("div",{className:"absolute bottom-[172px] left-[30px] flex w-full items-start",children:h.jsx("span",{className:"block w-min whitespace-nowrap rounded-t-lg border border-b-0 border-stone-600 bg-mantis-500 px-2 pb-3 pt-1 text-xs tracking-wide text-white",children:t("computer.cpu.control-unit")})}),h.jsxs("div",{className:"absolute bottom-[17px] left-[30px] flex h-[160px] w-[350px] flex-col items-center rounded-lg border border-stone-600 bg-stone-800",children:[h.jsxs("div",{className:"overflow-hidden rounded-b-lg border border-t-0 border-stone-600 bg-stone-900 px-3 py-0.5",children:[h.jsx("span",{className:"text-sm leading-none",children:t("computer.cpu.decoder")}),h.jsx("div",{className:"my-1 h-1 w-full overflow-hidden rounded-full bg-stone-600",children:h.jsx(an.div,{className:"h-full bg-mantis-400",style:{width:mt("cpu.decoder.progress.progress").to(l=>`${l*100}%`),opacity:mt("cpu.decoder.progress.opacity")}})})]}),h.jsxs("div",{className:"w-full flex-1 p-0.5",children:[h.jsxs("div",{className:"mb-0.5 flex items-center justify-between",children:[h.jsx("span",{className:"w-16 whitespace-nowrap text-xs font-bold uppercase tracking-wide text-mantis-400",children:"Ciclo CPU"}),h.jsx("button",{onClick:()=>n(!e),className:ee("rounded px-1 py-0.5 text-xs transition-colors",e?"bg-mantis-400/20 text-mantis-400":"text-stone-400 hover:bg-mantis-400/10 hover:text-mantis-400"),children:e?"−":"+"})]}),h.jsx("div",{className:"mb-0.5 rounded border border-stone-600 bg-stone-900/80 p-0.5",children:h.jsxs("div",{className:"min-w-0 flex-1 text-center",children:[h.jsxs("div",{className:ee("flex items-center justify-center gap-1 text-xs font-semibold",o()),children:[h.jsx("span",{className:"text-sm",children:s()}),r()]}),i&&"metadata"in i&&i.metadata&&h.jsxs("div",{className:"truncate text-xs text-stone-400",children:[h.jsx("span",{className:"font-mono text-mantis-300",children:i.metadata.name}),i.metadata.operands.length>0&&h.jsxs("span",{className:"text-white",children:[" ",i.metadata.operands.join(", ")]})]})]})}),e&&h.jsx("div",{className:"space-y-0.5",children:h.jsxs("div",{className:"rounded border border-stone-600 bg-stone-900/80 p-0.5",children:[h.jsx("div",{className:"mb-1 text-xs font-bold text-mantis-400",children:"Fases:"}),h.jsxs("div",{className:"flex items-center justify-center gap-1 text-xs text-stone-300",children:[h.jsx("div",{className:ee("rounded px-1 py-0.5",a()==="fetch"?"bg-blue-500/20 text-blue-400":"text-stone-500"),children:"📥 Busqueda"}),h.jsx("span",{className:"text-stone-500",children:"→"}),h.jsx("div",{className:ee("rounded px-1 py-0.5",a()==="execute"?"bg-green-500/20 text-green-400":"text-stone-500"),children:"⚡ Ejecución"})]})]})})]})]})]})}function Nue(){const[t,e]=x.useState(!1),[n,i]=x.useState(0);return x.useEffect(()=>{const r=()=>{e(!0),i(s=>s+1),setTimeout(()=>{e(!1)},3e3)};return window.addEventListener("ip-register-update",r),()=>{window.removeEventListener("ip-register-update",r)}},[]),t?h.jsxs(h.Fragment,{children:[h.jsx("style",{children:`
        @keyframes slideUpAndFade {
          0% {
            opacity: 1;
            transform: translateY(0px);
          }
          30% {
            opacity: 1;
            transform: translateY(-30px);
          }
          70% {
            opacity: 1;
            transform: translateY(-30px);
          }
          100% {
            opacity: 0;
            transform: translateY(-50px);
          }
        }
      `}),h.jsx("div",{className:ee("pointer-events-none absolute left-[425px] top-[342px]","font-mono text-lg font-bold"),style:{color:"#ff6347",animation:"slideUpAndFade 3s ease-out forwards"},children:"+1"},n)]}):null}function Pue(){const t=Rt(),e=at(tC),[n,i]=x.useState(!1),[r,s]=x.useState(!1),[o,a]=x.useState(!1);return x.useEffect(()=>{const l=(u,d,f)=>{a(u==="ADD"||u==="SUB"||u==="CMP"||u==="AND"||u==="OR"||u==="XOR"||u==="NOT"||u==="NEG"||u==="DEC"||u==="INC"),i(!!(u==="IRET"||d)),s(!!f)},c=u=>{const d=u;l(d.detail.instruction,d.detail.modeid,d.detail.moderi)};return window.addEventListener("instructionChange",c),()=>{window.removeEventListener("instructionChange",c)}},[]),h.jsxs("div",{"data-testid":"cpu-component",className:"absolute left-0 top-0 z-10 h-[500px] w-[650px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl text-white",children:t("computer.cpu.name")}),h.jsx(Ine,{showSP:e,showri:r}),h.jsx(fre,{showSP:e,showid:n,showri:r}),o&&h.jsxs(h.Fragment,{children:[h.jsx(Wi,{name:"left",className:ee("left-[96px] top-[49px]","border-transparent","bg-transparent")}),h.jsx(Wi,{name:"right",className:ee("left-[96px] top-[150px]","border-transparent","bg-transparent")})]}),h.jsx(Eue,{}),h.jsx(Wi,{name:"AL",emphasis:!0,className:"left-[450px] top-[30px]"}),h.jsx(Wi,{name:"BL",emphasis:!0,className:"left-[450px] top-[70px]"}),h.jsx(Wi,{name:"CL",emphasis:!0,className:"left-[450px] top-[110px]"}),h.jsx(Wi,{name:"DL",emphasis:!0,className:"left-[450px] top-[150px]"}),n&&h.jsx(Wi,{name:"id",className:ee("left-[450px] top-[190px]","border-cyan-400")}),h.jsx(Wi,{name:"MBR",className:ee("right-[-11px] top-[233px]","border-indigo-400")}),h.jsx(Wi,{name:"IR",className:ee("left-[185px] top-[270px]","border-indigo-400")}),h.jsx(Aue,{}),e&&h.jsx(Wi,{name:"SP",emphasis:!0,className:ee("left-[450px] top-[292px]","border-yellow-400")}),h.jsx(Wi,{name:"IP",emphasis:!0,className:ee("left-[450px] top-[332px]","border-red-500")}),r&&h.jsx(Wi,{name:"ri",emphasis:!0,className:ee("left-[470px] top-[372px]","border-cyan-400")}),h.jsx(Wi,{name:"MAR",className:ee("right-[-11px] top-[333px]","border-indigo-400")}),h.jsx(Nue,{})]})}function Wi({name:t,emphasis:e,className:n}){const i=r=>`cpu.${r}`;return h.jsx(or,{name:t,valueAtom:Ye[t],springs:i(t),emphasis:e,className:ee("absolute",n)})}function Mue(){const t=Rt(),e=at(kd),n=at(Hy),[i]=Fy();return i.showStatsCPU?h.jsxs("div",{className:"absolute left-[120px] top-[-120px] z-10 h-min w-[300px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"mb-2 block h-min w-full cursor-move rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-blue-500 px-2 py-1 text-lg text-white",children:t("computer.cpu.stats")}),h.jsx("hr",{className:"border-stone-600"}),h.jsx("div",{className:"flex w-full flex-col items-start p-2",children:h.jsxs("div",{className:"pl-1 text-left text-sm text-white",children:[h.jsxs("div",{className:"mb-1",children:["Total de ciclos: ",e]}),h.jsxs("div",{children:["Recuento de instrucciones: ",n]})]})})]}):null}const Tue="_pushable_1q0ek_2",Rue="_front_1q0ek_15",Oue="_shadow_1q0ek_20",Iue="_edge_1q0ek_52",bg={pushable:Tue,front:Rue,shadow:Oue,edge:Iue};function Due(){const t=Rt(),{status:e,dispatch:n,devices:i}=On();return ru("F10",r=>{r.preventDefault(),i.f10&&n("f10.press")},void 0,[n,i.f10]),i.f10?h.jsx("div",{className:"absolute left-[50px] top-[950px] z-10 flex h-min w-48 flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:h.jsxs("button",{className:bg.pushable,disabled:e.type!=="running",onClick:()=>n("f10.press"),children:[h.jsx("div",{className:bg.shadow}),h.jsx("div",{className:bg.edge}),h.jsx("span",{className:bg.front,children:t("computer.f10")})]})}):null}function Lue(){const t=Rt(),{devices:e}=On();return e.handshake?h.jsxs("div",{className:"absolute left-[900px] top-[925px] z-10 h-min w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.handshake.name")}),h.jsx(or,{name:t("computer.handshake.state"),title:t("generics.io-register","STATE",65),valueAtom:LC,springs:"handshake.STATE",className:"mx-auto my-4"}),h.jsx("hr",{className:"border-stone-600"}),h.jsx(or,{name:t("computer.handshake.data"),title:t("generics.io-register","DATA",64),valueAtom:DC,springs:"handshake.DATA",className:"mx-auto my-4"})]}):null}var vB={exports:{}};/*!
 * 
 *   react-simple-keyboard v3.8.89 (index.modern.js - Modern Browsers bundle)
 *   https://github.com/hodgef/react-simple-keyboard
 *
 *   NOTE: This modern browsers bundle (index.modern.js) removes all polyfills
 *   included in the standard version. Use this if you are supporting
 *   modern browsers only. Otherwise, use the standard version (index.js).
 *
 *   Copyright (c) Francisco Hodge (https://github.com/hodgef) and project contributors.
 *
 *   This source code is licensed under the MIT license found in the
 *   LICENSE file in the root directory of this source tree.
 *
 */(function(t,e){(function(n,i){t.exports=i(x)})(j9,function(n){return function(){var i={442:function(a){a.exports=n},651:function(a){a.exports=function(){var l={d:function(j,L){for(var U in L)l.o(L,U)&&!l.o(j,U)&&Object.defineProperty(j,U,{enumerable:!0,get:L[U]})},o:function(j,L){return Object.prototype.hasOwnProperty.call(j,L)},r:function(j){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(j,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(j,"__esModule",{value:!0})}},c={};function u(j){return function(L){if(Array.isArray(L))return f(L)}(j)||function(L){if(typeof Symbol<"u"&&L[Symbol.iterator]!=null||L["@@iterator"]!=null)return Array.from(L)}(j)||d(j)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function d(j,L){if(j){if(typeof j=="string")return f(j,L);var U={}.toString.call(j).slice(8,-1);return U==="Object"&&j.constructor&&(U=j.constructor.name),U==="Map"||U==="Set"?Array.from(j):U==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(U)?f(j,L):void 0}}function f(j,L){(L==null||L>j.length)&&(L=j.length);for(var U=0,S=Array(L);U<L;U++)S[U]=j[U];return S}function p(j){return p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},p(j)}function m(j,L){for(var U=0;U<L.length;U++){var S=L[U];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(j,y(S.key),S)}}function g(j,L,U){return(L=y(L))in j?Object.defineProperty(j,L,{value:U,enumerable:!0,configurable:!0,writable:!0}):j[L]=U,j}function y(j){var L=function(U,S){if(p(U)!="object"||!U)return U;var P=U[Symbol.toPrimitive];if(P!==void 0){var O=P.call(U,S);if(p(O)!="object")return O;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(U)}(j,"string");return p(L)=="symbol"?L:L+""}l.r(c),l.d(c,{SimpleKeyboard:function(){return Z},default:function(){return le}});var v=function(){return j=function S(P){var O=P.getOptions,T=P.getCaretPosition,q=P.getCaretPositionEnd,H=P.dispatch;(function(ne,J){if(!(ne instanceof J))throw new TypeError("Cannot call a class as a function")})(this,S),g(this,"getOptions",void 0),g(this,"getCaretPosition",void 0),g(this,"getCaretPositionEnd",void 0),g(this,"dispatch",void 0),g(this,"maxLengthReached",void 0),g(this,"isStandardButton",function(ne){return ne&&!(ne[0]==="{"&&ne[ne.length-1]==="}")}),this.getOptions=O,this.getCaretPosition=T,this.getCaretPositionEnd=q,this.dispatch=H,S.bindMethods(S,this)},L=[{key:"getButtonType",value:function(S){return S.includes("{")&&S.includes("}")&&S!=="{//}"?"functionBtn":"standardBtn"}},{key:"getButtonClass",value:function(S){var P=this.getButtonType(S),O=S.replace("{","").replace("}",""),T="";return P!=="standardBtn"&&(T=" hg-button-".concat(O)),"hg-".concat(P).concat(T)}},{key:"getDefaultDiplay",value:function(){return{"{bksp}":"backspace","{backspace}":"backspace","{enter}":"< enter","{shift}":"shift","{shiftleft}":"shift","{shiftright}":"shift","{alt}":"alt","{s}":"shift","{tab}":"tab","{lock}":"caps","{capslock}":"caps","{accept}":"Submit","{space}":" ","{//}":" ","{esc}":"esc","{escape}":"esc","{f1}":"f1","{f2}":"f2","{f3}":"f3","{f4}":"f4","{f5}":"f5","{f6}":"f6","{f7}":"f7","{f8}":"f8","{f9}":"f9","{f10}":"f10","{f11}":"f11","{f12}":"f12","{numpaddivide}":"/","{numlock}":"lock","{arrowup}":"↑","{arrowleft}":"←","{arrowdown}":"↓","{arrowright}":"→","{prtscr}":"print","{scrolllock}":"scroll","{pause}":"pause","{insert}":"ins","{home}":"home","{pageup}":"up","{delete}":"del","{forwarddelete}":"del","{end}":"end","{pagedown}":"down","{numpadmultiply}":"*","{numpadsubtract}":"-","{numpadadd}":"+","{numpadenter}":"enter","{period}":".","{numpaddecimal}":".","{numpad0}":"0","{numpad1}":"1","{numpad2}":"2","{numpad3}":"3","{numpad4}":"4","{numpad5}":"5","{numpad6}":"6","{numpad7}":"7","{numpad8}":"8","{numpad9}":"9"}}},{key:"getButtonDisplayName",value:function(S,P){return(P=arguments.length>2&&arguments[2]!==void 0&&arguments[2]?Object.assign({},this.getDefaultDiplay(),P):P||this.getDefaultDiplay())[S]||S}},{key:"getUpdatedInput",value:function(S,P,O){var T=arguments.length>3&&arguments[3]!==void 0?arguments[3]:O,q=arguments.length>4&&arguments[4]!==void 0&&arguments[4],H=this.getOptions(),ne=[O,T,q],J=P;return(S==="{bksp}"||S==="{backspace}")&&J.length>0?J=this.removeAt.apply(this,[J].concat(ne)):(S==="{delete}"||S==="{forwarddelete}")&&J.length>0?J=this.removeForwardsAt.apply(this,[J].concat(ne)):S==="{space}"?J=this.addStringAt.apply(this,[J," "].concat(ne)):S!=="{tab}"||typeof H.tabCharOnTab=="boolean"&&H.tabCharOnTab===!1?S!=="{enter}"&&S!=="{numpadenter}"||!H.newLineOnEnter?S.includes("numpad")&&Number.isInteger(Number(S[S.length-2]))?J=this.addStringAt.apply(this,[J,S[S.length-2]].concat(ne)):S==="{numpaddivide}"?J=this.addStringAt.apply(this,[J,"/"].concat(ne)):S==="{numpadmultiply}"?J=this.addStringAt.apply(this,[J,"*"].concat(ne)):S==="{numpadsubtract}"?J=this.addStringAt.apply(this,[J,"-"].concat(ne)):S==="{numpadadd}"?J=this.addStringAt.apply(this,[J,"+"].concat(ne)):S==="{numpaddecimal}"?J=this.addStringAt.apply(this,[J,"."].concat(ne)):S==="{"||S==="}"?J=this.addStringAt.apply(this,[J,S].concat(ne)):S.includes("{")||S.includes("}")||(J=this.addStringAt.apply(this,[J,S].concat(ne))):J=this.addStringAt.apply(this,[J,`
`].concat(ne)):J=this.addStringAt.apply(this,[J,"	"].concat(ne)),H.debug&&console.log("Input will be: "+J),J}},{key:"updateCaretPos",value:function(S){var P=arguments.length>1&&arguments[1]!==void 0&&arguments[1],O=this.updateCaretPosAction(S,P);this.dispatch(function(T){T.setCaretPosition(O)})}},{key:"updateCaretPosAction",value:function(S){var P=arguments.length>1&&arguments[1]!==void 0&&arguments[1],O=this.getOptions(),T=this.getCaretPosition();return T!=null&&(P?T>0&&(T-=S):T+=S),O.debug&&console.log("Caret at:",T),T}},{key:"addStringAt",value:function(S,P){var O,T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:S.length,q=arguments.length>3&&arguments[3]!==void 0?arguments[3]:S.length,H=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return T||T===0?(O=[S.slice(0,T),P,S.slice(q)].join(""),this.isMaxLengthReached()||H&&this.updateCaretPos(P.length)):O=S+P,O}},{key:"removeAt",value:function(S){var P,O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:S.length,T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:S.length,q=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(O===0&&T===0)return S;if(O===T){var H=/([\uD800-\uDBFF][\uDC00-\uDFFF])/g;O&&O>=0?S.substring(O-2,O).match(H)?(P=S.substr(0,O-2)+S.substr(O),q&&this.updateCaretPos(2,!0)):(P=S.substr(0,O-1)+S.substr(O),q&&this.updateCaretPos(1,!0)):S.slice(-2).match(H)?(P=S.slice(0,-2),q&&this.updateCaretPos(2,!0)):(P=S.slice(0,-1),q&&this.updateCaretPos(1,!0))}else P=S.slice(0,O)+S.slice(T),q&&this.dispatch(function(ne){ne.setCaretPosition(O)});return P}},{key:"removeForwardsAt",value:function(S){var P,O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:S.length,T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:S.length,q=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return S!=null&&S.length&&O!==null?(O===T?P=S.substring(O,O+2).match(/([\uD800-\uDBFF][\uDC00-\uDFFF])/g)?S.substr(0,O)+S.substr(O+2):S.substr(0,O)+S.substr(O+1):(P=S.slice(0,O)+S.slice(T),q&&this.dispatch(function(H){H.setCaretPosition(O)})),P):S}},{key:"handleMaxLength",value:function(S,P){var O=this.getOptions(),T=O.maxLength,q=S[O.inputName||"default"],H=P.length-1>=T;if(P.length<=q.length)return!1;if(Number.isInteger(T))return O.debug&&console.log("maxLength (num) reached:",H),H?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1);if(p(T)==="object"){var ne=P.length-1>=T[O.inputName||"default"];return O.debug&&console.log("maxLength (obj) reached:",ne),ne?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1)}}},{key:"isMaxLengthReached",value:function(){return!!this.maxLengthReached}},{key:"isTouchDevice",value:function(){return"ontouchstart"in window||navigator.maxTouchPoints}},{key:"pointerEventsSupported",value:function(){return!!window.PointerEvent}},{key:"camelCase",value:function(S){return S?S.toLowerCase().trim().split(/[.\-_\s]/g).reduce(function(P,O){return O.length?P+O[0].toUpperCase()+O.slice(1):P}):""}},{key:"chunkArray",value:function(S,P){return u(Array(Math.ceil(S.length/P))).map(function(O,T){return S.slice(P*T,P+P*T)})}},{key:"escapeRegex",value:function(S){return S.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}},{key:"getRtlOffset",value:function(S,P){var O=S,T=P.indexOf("‫");return T<S&&T!=-1&&O--,P.indexOf("‬")<S&&T!=-1&&O--,O<0?0:O}},{key:"isConstructor",value:function(S){try{Reflect.construct(String,[],S)}catch{return!1}return!0}}],U=[{key:"bindMethods",value:function(S,P){var O,T=function(H,ne){var J=typeof Symbol<"u"&&H[Symbol.iterator]||H["@@iterator"];if(!J){if(Array.isArray(H)||(J=d(H))||ne){J&&(H=J);var Pe=0,je=function(){};return{s:je,n:function(){return Pe>=H.length?{done:!0}:{done:!1,value:H[Pe++]}},e:function(pe){throw pe},f:je}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Be,De=!0,Ge=!1;return{s:function(){J=J.call(H)},n:function(){var pe=J.next();return De=pe.done,pe},e:function(pe){Ge=!0,Be=pe},f:function(){try{De||J.return==null||J.return()}finally{if(Ge)throw Be}}}}(Object.getOwnPropertyNames(S.prototype));try{for(T.s();!(O=T.n()).done;){var q=O.value;q==="constructor"||q==="bindMethods"||(P[q]=P[q].bind(P))}}catch(H){T.e(H)}finally{T.f()}}}],L&&m(j.prototype,L),U&&m(j,U),Object.defineProperty(j,"prototype",{writable:!1}),j;var j,L,U}();g(v,"noop",function(){});var b=v;function w(j){return w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},w(j)}function k(j,L){for(var U=0;U<L.length;U++){var S=L[U];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(j,E(S.key),S)}}function _(j,L,U){return(L=E(L))in j?Object.defineProperty(j,L,{value:U,enumerable:!0,configurable:!0,writable:!0}):j[L]=U,j}function E(j){var L=function(U,S){if(w(U)!="object"||!U)return U;var P=U[Symbol.toPrimitive];if(P!==void 0){var O=P.call(U,S);if(w(O)!="object")return O;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(U)}(j,"string");return w(L)=="symbol"?L:L+""}var C=function(){return j=function S(P){var O=this,T=P.dispatch,q=P.getOptions;(function(H,ne){if(!(H instanceof ne))throw new TypeError("Cannot call a class as a function")})(this,S),_(this,"getOptions",void 0),_(this,"dispatch",void 0),_(this,"isModifierKey",function(H){return H.altKey||H.ctrlKey||H.shiftKey||["Tab","CapsLock","Esc","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(H.code||H.key||O.keyCodeToKey(H==null?void 0:H.keyCode))}),this.dispatch=T,this.getOptions=q,b.bindMethods(S,this)},L=[{key:"handleHighlightKeyDown",value:function(S){var P=this.getOptions();P.physicalKeyboardHighlightPreventDefault&&this.isModifierKey(S)&&(S.preventDefault(),S.stopImmediatePropagation());var O=this.getSimpleKeyboardLayoutKey(S);this.dispatch(function(T){var q,H,ne=T.getButtonElement(O),J=T.getButtonElement("{".concat(O,"}"));if(ne)q=ne,H=O;else{if(!J)return;q=J,H="{".concat(O,"}")}var Pe,je,Be,De,Ge=function(wt){wt.style.background=P.physicalKeyboardHighlightBgColor||"#dadce4",wt.style.color=P.physicalKeyboardHighlightTextColor||"black"};if(q)if(Array.isArray(q)){if(q.forEach(function(wt){return Ge(wt)}),P.physicalKeyboardHighlightPress)if(P.physicalKeyboardHighlightPressUsePointerEvents)(Pe=q[0])===null||Pe===void 0||(je=Pe.onpointerdown)===null||je===void 0||je.call(Pe,S);else if(P.physicalKeyboardHighlightPressUseClick){var pe;(pe=q[0])===null||pe===void 0||pe.click()}else T.handleButtonClicked(H,S)}else Ge(q),P.physicalKeyboardHighlightPress&&(P.physicalKeyboardHighlightPressUsePointerEvents?(Be=q)===null||Be===void 0||(De=Be.onpointerdown)===null||De===void 0||De.call(Be,S):P.physicalKeyboardHighlightPressUseClick?q.click():T.handleButtonClicked(H,S))})}},{key:"handleHighlightKeyUp",value:function(S){var P=this.getOptions();P.physicalKeyboardHighlightPreventDefault&&this.isModifierKey(S)&&(S.preventDefault(),S.stopImmediatePropagation());var O=this.getSimpleKeyboardLayoutKey(S);this.dispatch(function(T){var q,H,ne,J=T.getButtonElement(O)||T.getButtonElement("{".concat(O,"}")),Pe=function(je){je.removeAttribute&&je.removeAttribute("style")};J&&(Array.isArray(J)?(J.forEach(function(je){return Pe(je)}),P.physicalKeyboardHighlightPressUsePointerEvents&&((q=J[0])===null||q===void 0||(H=q.onpointerup)===null||H===void 0||H.call(q,S))):(Pe(J),P.physicalKeyboardHighlightPressUsePointerEvents&&(J==null||(ne=J.onpointerup)===null||ne===void 0||ne.call(J,S))))})}},{key:"getSimpleKeyboardLayoutKey",value:function(S){var P,O="",T=S.code||S.key||this.keyCodeToKey(S==null?void 0:S.keyCode);return(O=T!=null&&T.includes("Numpad")||T!=null&&T.includes("Shift")||T!=null&&T.includes("Space")||T!=null&&T.includes("Backspace")||T!=null&&T.includes("Control")||T!=null&&T.includes("Alt")||T!=null&&T.includes("Meta")?S.code||"":S.key||this.keyCodeToKey(S==null?void 0:S.keyCode)||"").length>1?(P=O)===null||P===void 0?void 0:P.toLowerCase():O}},{key:"keyCodeToKey",value:function(S){return{8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Meta",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9",106:"NumpadMultiply",107:"NumpadAdd",109:"NumpadSubtract",110:"NumpadDecimal",111:"NumpadDivide",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}[S]||""}}],L&&k(j.prototype,L),U&&k(j,U),Object.defineProperty(j,"prototype",{writable:!1}),j;var j,L,U}();function N(j){return N=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},N(j)}function M(j,L){for(var U=0;U<L.length;U++){var S=L[U];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(j,I(S.key),S)}}function R(j,L,U){return(L=I(L))in j?Object.defineProperty(j,L,{value:U,enumerable:!0,configurable:!0,writable:!0}):j[L]=U,j}function I(j){var L=function(U,S){if(N(U)!="object"||!U)return U;var P=U[Symbol.toPrimitive];if(P!==void 0){var O=P.call(U,S);if(N(O)!="object")return O;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(U)}(j,"string");return N(L)=="symbol"?L:L+""}var D=function(){return j=function S(P){var O=P.utilities,T=P.options;(function(q,H){if(!(q instanceof H))throw new TypeError("Cannot call a class as a function")})(this,S),R(this,"utilities",void 0),R(this,"options",void 0),R(this,"candidateBoxElement",void 0),R(this,"pageIndex",0),R(this,"pageSize",void 0),this.utilities=O,this.options=T,b.bindMethods(S,this),this.pageSize=this.utilities.getOptions().layoutCandidatesPageSize||5},L=[{key:"destroy",value:function(){this.candidateBoxElement&&(this.candidateBoxElement.remove(),this.pageIndex=0)}},{key:"show",value:function(S){var P=this,O=S.candidateValue,T=S.targetElement,q=S.onSelect;if(O&&O.length){var H=this.utilities.chunkArray(O.split(" "),this.pageSize);this.renderPage({candidateListPages:H,targetElement:T,pageIndex:this.pageIndex,nbPages:H.length,onItemSelected:function(ne,J){q(ne,J),P.destroy()}})}}},{key:"renderPage",value:function(S){var P,O=this,T=S.candidateListPages,q=S.targetElement,H=S.pageIndex,ne=S.nbPages,J=S.onItemSelected;(P=this.candidateBoxElement)===null||P===void 0||P.remove(),this.candidateBoxElement=document.createElement("div"),this.candidateBoxElement.className="hg-candidate-box";var Pe=document.createElement("ul");Pe.className="hg-candidate-box-list",T[H].forEach(function(mn){var Ml,bs=document.createElement("li"),Jo=function(){var Zo=new(O.options.useTouchEvents?TouchEvent:MouseEvent)("click");return Object.defineProperty(Zo,"target",{value:bs}),Zo};bs.className="hg-candidate-box-list-item",bs.innerHTML=((Ml=O.options.display)===null||Ml===void 0?void 0:Ml[mn])||mn,O.options.useTouchEvents?bs.ontouchstart=function(Zo){return J(mn,Zo||Jo())}:bs.onclick=function(){var Zo=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Jo();return J(mn,Zo)},Pe.appendChild(bs)});var je=H>0,Be=document.createElement("div");Be.classList.add("hg-candidate-box-prev"),je&&Be.classList.add("hg-candidate-box-btn-active");var De=function(){je&&O.renderPage({candidateListPages:T,targetElement:q,pageIndex:H-1,nbPages:ne,onItemSelected:J})};this.options.useTouchEvents?Be.ontouchstart=De:Be.onclick=De,this.candidateBoxElement.appendChild(Be),this.candidateBoxElement.appendChild(Pe);var Ge=H<ne-1,pe=document.createElement("div");pe.classList.add("hg-candidate-box-next"),Ge&&pe.classList.add("hg-candidate-box-btn-active");var wt=function(){Ge&&O.renderPage({candidateListPages:T,targetElement:q,pageIndex:H+1,nbPages:ne,onItemSelected:J})};this.options.useTouchEvents?pe.ontouchstart=wt:pe.onclick=wt,this.candidateBoxElement.appendChild(pe),q.prepend(this.candidateBoxElement)}}],L&&M(j.prototype,L),U&&M(j,U),Object.defineProperty(j,"prototype",{writable:!1}),j;var j,L,U}(),K=D;function B(j){return function(L){if(Array.isArray(L))return W(L)}(j)||function(L){if(typeof Symbol<"u"&&L[Symbol.iterator]!=null||L["@@iterator"]!=null)return Array.from(L)}(j)||function(L,U){if(L){if(typeof L=="string")return W(L,U);var S={}.toString.call(L).slice(8,-1);return S==="Object"&&L.constructor&&(S=L.constructor.name),S==="Map"||S==="Set"?Array.from(L):S==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S)?W(L,U):void 0}}(j)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function W(j,L){(L==null||L>j.length)&&(L=j.length);for(var U=0,S=Array(L);U<L;U++)S[U]=j[U];return S}function Y(j){return Y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},Y(j)}function te(j,L){var U=Object.keys(j);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(j);L&&(S=S.filter(function(P){return Object.getOwnPropertyDescriptor(j,P).enumerable})),U.push.apply(U,S)}return U}function V(j,L){for(var U=0;U<L.length;U++){var S=L[U];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(j,ie(S.key),S)}}function $(j,L,U){return(L=ie(L))in j?Object.defineProperty(j,L,{value:U,enumerable:!0,configurable:!0,writable:!0}):j[L]=U,j}function ie(j){var L=function(U,S){if(Y(U)!="object"||!U)return U;var P=U[Symbol.toPrimitive];if(P!==void 0){var O=P.call(U,S);if(Y(O)!="object")return O;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(U)}(j,"string");return Y(L)=="symbol"?L:L+""}var ke=function(){return j=function S(P,O){var T=this;if(function(De,Ge){if(!(De instanceof Ge))throw new TypeError("Cannot call a class as a function")}(this,S),$(this,"input",void 0),$(this,"options",void 0),$(this,"utilities",void 0),$(this,"caretPosition",void 0),$(this,"caretPositionEnd",void 0),$(this,"keyboardDOM",void 0),$(this,"keyboardPluginClasses",void 0),$(this,"keyboardDOMClass",void 0),$(this,"buttonElements",void 0),$(this,"currentInstanceName",void 0),$(this,"allKeyboardInstances",void 0),$(this,"keyboardInstanceNames",void 0),$(this,"isFirstKeyboardInstance",void 0),$(this,"physicalKeyboard",void 0),$(this,"modules",void 0),$(this,"activeButtonClass",void 0),$(this,"holdInteractionTimeout",void 0),$(this,"holdTimeout",void 0),$(this,"isMouseHold",void 0),$(this,"initialized",void 0),$(this,"candidateBox",void 0),$(this,"keyboardRowsDOM",void 0),$(this,"defaultName","default"),$(this,"activeInputElement",null),$(this,"handleParams",function(De,Ge){var pe,wt,mn;if(typeof De=="string")pe=De.split(".").join(""),wt=document.querySelector(".".concat(pe)),mn=Ge;else if(De instanceof HTMLDivElement){if(!De.className)throw console.warn("Any DOM element passed as parameter must have a class."),new Error("KEYBOARD_DOM_CLASS_ERROR");pe=De.className.split(" ")[0],wt=De,mn=Ge}else pe="simple-keyboard",wt=document.querySelector(".".concat(pe)),mn=De;return{keyboardDOMClass:pe,keyboardDOM:wt,options:mn}}),$(this,"getOptions",function(){return T.options}),$(this,"getCaretPosition",function(){return T.caretPosition}),$(this,"getCaretPositionEnd",function(){return T.caretPositionEnd}),$(this,"registerModule",function(De,Ge){T.modules[De]||(T.modules[De]={}),Ge(T.modules[De])}),$(this,"getKeyboardClassString",function(){for(var De=arguments.length,Ge=new Array(De),pe=0;pe<De;pe++)Ge[pe]=arguments[pe];return[T.keyboardDOMClass].concat(Ge).filter(function(wt){return!!wt}).join(" ")}),typeof window<"u"){var q=this.handleParams(P,O),H=q.keyboardDOMClass,ne=q.keyboardDOM,J=q.options,Pe=J===void 0?{}:J;this.utilities=new b({getOptions:this.getOptions,getCaretPosition:this.getCaretPosition,getCaretPositionEnd:this.getCaretPositionEnd,dispatch:this.dispatch}),this.caretPosition=null,this.caretPositionEnd=null,this.keyboardDOM=ne,this.options=function(De){for(var Ge=1;Ge<arguments.length;Ge++){var pe=arguments[Ge]!=null?arguments[Ge]:{};Ge%2?te(Object(pe),!0).forEach(function(wt){$(De,wt,pe[wt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(De,Object.getOwnPropertyDescriptors(pe)):te(Object(pe)).forEach(function(wt){Object.defineProperty(De,wt,Object.getOwnPropertyDescriptor(pe,wt))})}return De}({layoutName:"default",theme:"hg-theme-default",inputName:"default",preventMouseDownDefault:!1,enableLayoutCandidates:!0,excludeFromLayout:{}},Pe),this.keyboardPluginClasses="",b.bindMethods(S,this);var je=this.options.inputName,Be=je===void 0?this.defaultName:je;if(this.input={},this.input[Be]="",this.keyboardDOMClass=H,this.buttonElements={},window.SimpleKeyboardInstances||(window.SimpleKeyboardInstances={}),this.currentInstanceName=this.utilities.camelCase(this.keyboardDOMClass),window.SimpleKeyboardInstances[this.currentInstanceName]=this,this.allKeyboardInstances=window.SimpleKeyboardInstances,this.keyboardInstanceNames=Object.keys(window.SimpleKeyboardInstances),this.isFirstKeyboardInstance=this.keyboardInstanceNames[0]===this.currentInstanceName,this.physicalKeyboard=new C({dispatch:this.dispatch,getOptions:this.getOptions}),this.candidateBox=this.options.enableLayoutCandidates?new K({utilities:this.utilities,options:this.options}):null,!this.keyboardDOM)throw console.warn('".'.concat(H,'" was not found in the DOM.')),new Error("KEYBOARD_DOM_ERROR");this.render(),this.modules={},this.loadModules()}},L=[{key:"setCaretPosition",value:function(S){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:S;this.caretPosition=S,this.caretPositionEnd=P}},{key:"getInputCandidates",value:function(S){var P=this,O=this.options,T=O.layoutCandidates,q=O.layoutCandidatesCaseSensitiveMatch;if(!T||Y(T)!=="object")return{};var H=Object.keys(T).filter(function(Pe){var je=S.substring(0,P.getCaretPositionEnd()||0)||S,Be=new RegExp("".concat(P.utilities.escapeRegex(Pe),"$"),q?"g":"gi");return!!B(je.matchAll(Be)).length});if(H.length>1){var ne=H.sort(function(Pe,je){return je.length-Pe.length})[0];return{candidateKey:ne,candidateValue:T[ne]}}if(H.length){var J=H[0];return{candidateKey:J,candidateValue:T[J]}}return{}}},{key:"showCandidatesBox",value:function(S,P,O){var T=this;this.candidateBox&&this.candidateBox.show({candidateValue:P,targetElement:O,onSelect:function(q,H){var ne=T.options,J=ne.layoutCandidatesCaseSensitiveMatch,Pe=ne.disableCandidateNormalization,je=ne.enableLayoutCandidatesKeyPress,Be=q;Pe||(Be=q.normalize("NFD")),typeof T.options.beforeInputUpdate=="function"&&T.options.beforeInputUpdate(T);var De=T.getInput(T.options.inputName,!0),Ge=T.getCaretPositionEnd()||0,pe=De.substring(0,Ge||0)||De,wt=new RegExp("".concat(T.utilities.escapeRegex(S),"$"),J?"g":"gi"),mn=pe.replace(wt,Be),Ml=De.replace(pe,mn),bs=mn.length-pe.length,Jo=(Ge||De.length)+bs;Jo<0&&(Jo=0),T.setInput(Ml,T.options.inputName,!0),T.setCaretPosition(Jo),je&&typeof T.options.onKeyPress=="function"&&T.options.onKeyPress(q,H),typeof T.options.onChange=="function"&&T.options.onChange(T.getInput(T.options.inputName,!0),H),typeof T.options.onChangeAll=="function"&&T.options.onChangeAll(T.getAllInputs(),H)}})}},{key:"handleButtonClicked",value:function(S,P){var O=this.options,T=O.inputName,q=T===void 0?this.defaultName:T,H=O.debug;if(S!=="{//}"){this.input[q]||(this.input[q]=""),typeof this.options.beforeInputUpdate=="function"&&this.options.beforeInputUpdate(this);var ne=this.utilities.getUpdatedInput(S,this.input[q],this.caretPosition,this.caretPositionEnd);if(this.utilities.isStandardButton(S)&&this.activeInputElement&&this.input[q]&&this.input[q]===ne&&this.caretPosition===0&&this.caretPositionEnd===ne.length)return this.setInput("",this.options.inputName,!0),this.setCaretPosition(0),this.activeInputElement.value="",this.activeInputElement.setSelectionRange(0,0),void this.handleButtonClicked(S,P);if(typeof this.options.onKeyPress=="function"&&this.options.onKeyPress(S,P),this.input[q]!==ne&&(!this.options.inputPattern||this.options.inputPattern&&this.inputPatternIsValid(ne))){if(this.options.maxLength&&this.utilities.handleMaxLength(this.input,ne))return;var J=this.utilities.getUpdatedInput(S,this.input[q],this.caretPosition,this.caretPositionEnd,!0);if(this.setInput(J,this.options.inputName,!0),H&&console.log("Input changed:",this.getAllInputs()),this.options.debug&&console.log("Caret at: ",this.getCaretPosition(),this.getCaretPositionEnd(),"(".concat(this.keyboardDOMClass,")"),P==null?void 0:P.type),this.options.syncInstanceInputs&&this.syncInstanceInputs(),typeof this.options.onChange=="function"&&this.options.onChange(this.getInput(this.options.inputName,!0),P),typeof this.options.onChangeAll=="function"&&this.options.onChangeAll(this.getAllInputs(),P),P!=null&&P.target&&this.options.enableLayoutCandidates){var Pe,je=this.getInputCandidates(ne),Be=je.candidateKey,De=je.candidateValue;Be&&De?this.showCandidatesBox(Be,De,this.keyboardDOM):(Pe=this.candidateBox)===null||Pe===void 0||Pe.destroy()}}this.caretPositionEnd&&this.caretPosition!==this.caretPositionEnd&&(this.setCaretPosition(this.caretPositionEnd,this.caretPositionEnd),this.activeInputElement&&this.activeInputElement.setSelectionRange(this.caretPositionEnd,this.caretPositionEnd),this.options.debug&&console.log("Caret position aligned",this.caretPosition)),H&&console.log("Key pressed:",S)}}},{key:"getMouseHold",value:function(){return this.isMouseHold}},{key:"setMouseHold",value:function(S){this.options.syncInstanceInputs?this.dispatch(function(P){P.isMouseHold=S}):this.isMouseHold=S}},{key:"handleButtonMouseDown",value:function(S,P){var O=this;P&&(this.options.preventMouseDownDefault&&P.preventDefault(),this.options.stopMouseDownPropagation&&P.stopPropagation(),P.target.classList.add(this.activeButtonClass)),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdTimeout&&clearTimeout(this.holdTimeout),this.setMouseHold(!0),this.options.disableButtonHold||(this.holdTimeout=window.setTimeout(function(){(O.getMouseHold()&&(!S.includes("{")&&!S.includes("}")||S==="{delete}"||S==="{backspace}"||S==="{bksp}"||S==="{space}"||S==="{tab}")||S==="{arrowright}"||S==="{arrowleft}"||S==="{arrowup}"||S==="{arrowdown}")&&(O.options.debug&&console.log("Button held:",S),O.handleButtonHold(S)),clearTimeout(O.holdTimeout)},500))}},{key:"handleButtonMouseUp",value:function(S,P){var O=this;P&&(this.options.preventMouseUpDefault&&P.preventDefault&&P.preventDefault(),this.options.stopMouseUpPropagation&&P.stopPropagation&&P.stopPropagation(),!(P.target===this.keyboardDOM||P.target&&this.keyboardDOM.contains(P.target)||this.candidateBox&&this.candidateBox.candidateBoxElement&&(P.target===this.candidateBox.candidateBoxElement||P.target&&this.candidateBox.candidateBoxElement.contains(P.target)))&&this.candidateBox&&this.candidateBox.destroy()),this.recurseButtons(function(T){T.classList.remove(O.activeButtonClass)}),this.setMouseHold(!1),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),S&&typeof this.options.onKeyReleased=="function"&&this.options.onKeyReleased(S,P)}},{key:"handleKeyboardContainerMouseDown",value:function(S){this.options.preventMouseDownDefault&&S.preventDefault()}},{key:"handleButtonHold",value:function(S){var P=this;this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdInteractionTimeout=window.setTimeout(function(){P.getMouseHold()?(P.handleButtonClicked(S),P.handleButtonHold(S)):clearTimeout(P.holdInteractionTimeout)},100)}},{key:"syncInstanceInputs",value:function(){var S=this;this.dispatch(function(P){P.replaceInput(S.input),P.setCaretPosition(S.caretPosition,S.caretPositionEnd)})}},{key:"clearInput",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName;this.input[S]="",this.setCaretPosition(0),this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"getInput",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName,P=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return this.options.syncInstanceInputs&&!P&&this.syncInstanceInputs(),this.options.rtl?"‫"+this.input[S].replace("‫","").replace("‬","")+"‬":this.input[S]}},{key:"getAllInputs",value:function(){var S=this,P={};return Object.keys(this.input).forEach(function(O){P[O]=S.getInput(O,!0)}),P}},{key:"setInput",value:function(S){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.inputName||this.defaultName,O=arguments.length>2?arguments[2]:void 0;this.input[P]=S,!O&&this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"replaceInput",value:function(S){this.input=S}},{key:"setOptions",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},P=this.changedOptions(S);this.options=Object.assign(this.options,S),P.length&&(this.options.debug&&console.log("changedOptions",P),this.onSetOptions(P),this.render())}},{key:"changedOptions",value:function(S){var P=this;return Object.keys(S).filter(function(O){return JSON.stringify(S[O])!==JSON.stringify(P.options[O])})}},{key:"onSetOptions",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];S.includes("layoutName")&&this.candidateBox&&this.candidateBox.destroy(),(S.includes("layoutCandidatesPageSize")||S.includes("layoutCandidates"))&&this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=new K({utilities:this.utilities,options:this.options}))}},{key:"resetRows",value:function(){this.keyboardRowsDOM&&this.keyboardRowsDOM.remove(),this.keyboardDOM.className=this.keyboardDOMClass,this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.buttonElements={}}},{key:"dispatch",value:function(S){if(!window.SimpleKeyboardInstances)throw console.warn("SimpleKeyboardInstances is not defined. Dispatch cannot be called."),new Error("INSTANCES_VAR_ERROR");return Object.keys(window.SimpleKeyboardInstances).forEach(function(P){S(window.SimpleKeyboardInstances[P],P)})}},{key:"addButtonTheme",value:function(S,P){var O=this;P&&S&&(S.split(" ").forEach(function(T){P.split(" ").forEach(function(q){O.options.buttonTheme||(O.options.buttonTheme=[]);var H=!1;O.options.buttonTheme.map(function(ne){if(ne!=null&&ne.class.split(" ").includes(q)){H=!0;var J=ne.buttons.split(" ");J.includes(T)||(H=!0,J.push(T),ne.buttons=J.join(" "))}return ne}),H||O.options.buttonTheme.push({class:q,buttons:S})})}),this.render())}},{key:"removeButtonTheme",value:function(S,P){var O=this;if(!S&&!P)return this.options.buttonTheme=[],void this.render();S&&Array.isArray(this.options.buttonTheme)&&this.options.buttonTheme.length&&(S.split(" ").forEach(function(T){var q;(q=O.options)===null||q===void 0||(q=q.buttonTheme)===null||q===void 0||q.map(function(H,ne){if(H&&P&&P.includes(H.class)||!P){var J,Pe,je=(J=H)===null||J===void 0?void 0:J.buttons.split(" ").filter(function(Be){return Be!==T});H&&je!=null&&je.length?H.buttons=je.join(" "):((Pe=O.options.buttonTheme)===null||Pe===void 0||Pe.splice(ne,1),H=null)}return H})}),this.render())}},{key:"getButtonElement",value:function(S){var P,O=this.buttonElements[S];return O&&(P=O.length>1?O:O[0]),P}},{key:"inputPatternIsValid",value:function(S){var P,O=this.options.inputPattern;if((P=O instanceof RegExp?O:O[this.options.inputName||this.defaultName])&&S){var T=P.test(S);return this.options.debug&&console.log('inputPattern ("'.concat(P,'"): ').concat(T?"passed":"did not pass!")),T}return!0}},{key:"setEventListeners",value:function(){if(this.isFirstKeyboardInstance||!this.allKeyboardInstances){this.options.debug&&console.log("Caret handling started (".concat(this.keyboardDOMClass,")"));var S=this.options.physicalKeyboardHighlightPreventDefault,P=S!==void 0&&S;document.addEventListener("keyup",this.handleKeyUp,P),document.addEventListener("keydown",this.handleKeyDown,P),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("touchend",this.handleTouchEnd),this.options.updateCaretOnSelectionChange&&document.addEventListener("selectionchange",this.handleSelectionChange),document.addEventListener("select",this.handleSelect)}}},{key:"handleKeyUp",value:function(S){this.caretEventHandler(S),this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyUp(S)}},{key:"handleKeyDown",value:function(S){this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyDown(S)}},{key:"handleMouseUp",value:function(S){this.caretEventHandler(S)}},{key:"handleTouchEnd",value:function(S){this.caretEventHandler(S)}},{key:"handleSelect",value:function(S){this.caretEventHandler(S)}},{key:"handleSelectionChange",value:function(S){navigator.userAgent.includes("Firefox")||this.caretEventHandler(S)}},{key:"caretEventHandler",value:function(S){var P,O=this;S.target.tagName&&(P=S.target.tagName.toLowerCase()),this.dispatch(function(T){var q=S.target===T.keyboardDOM||S.target&&T.keyboardDOM.contains(S.target);if(O.options.syncInstanceInputs&&Array.isArray(S.path)&&(q=S.path.some(function(J){var Pe;return J==null||(Pe=J.hasAttribute)===null||Pe===void 0?void 0:Pe.call(J,"data-skInstance")})),(P==="textarea"||P==="input"&&["text","search","url","tel","password"].includes(S.target.type))&&!T.options.disableCaretPositioning){var H=S.target.selectionStart,ne=S.target.selectionEnd;T.options.rtl&&(H=T.utilities.getRtlOffset(H,T.getInput()),ne=T.utilities.getRtlOffset(ne,T.getInput())),T.setCaretPosition(H,ne),T.activeInputElement=S.target,T.options.debug&&console.log("Caret at: ",T.getCaretPosition(),T.getCaretPositionEnd(),S&&S.target.tagName.toLowerCase(),"(".concat(T.keyboardDOMClass,")"),S==null?void 0:S.type)}else!T.options.disableCaretPositioning&&q||(S==null?void 0:S.type)==="selectionchange"||(T.setCaretPosition(null),T.activeInputElement=null,T.options.debug&&console.log('Caret position reset due to "'.concat(S==null?void 0:S.type,'" event'),S))})}},{key:"recurseButtons",value:function(S){var P=this;S&&Object.keys(this.buttonElements).forEach(function(O){return P.buttonElements[O].forEach(S)})}},{key:"destroy",value:function(){this.options.debug&&console.log("Destroying simple-keyboard instance: ".concat(this.currentInstanceName));var S=this.options.physicalKeyboardHighlightPreventDefault,P=S!==void 0&&S;document.removeEventListener("keyup",this.handleKeyUp,P),document.removeEventListener("keydown",this.handleKeyDown,P),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("touchend",this.handleTouchEnd),document.removeEventListener("select",this.handleSelect),this.options.updateCaretOnSelectionChange&&document.removeEventListener("selectionchange",this.handleSelectionChange),document.onpointerup=null,document.ontouchend=null,document.ontouchcancel=null,document.onmouseup=null,this.recurseButtons(function(O){O&&(O.onpointerdown=null,O.onpointerup=null,O.onpointercancel=null,O.ontouchstart=null,O.ontouchend=null,O.ontouchcancel=null,O.onclick=null,O.onmousedown=null,O.onmouseup=null,O.remove(),O=null)}),this.keyboardDOM.onpointerdown=null,this.keyboardDOM.ontouchstart=null,this.keyboardDOM.onmousedown=null,this.resetRows(),this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=null),this.activeInputElement=null,this.keyboardDOM.removeAttribute("data-skInstance"),this.keyboardDOM.innerHTML="",window.SimpleKeyboardInstances[this.currentInstanceName]=null,delete window.SimpleKeyboardInstances[this.currentInstanceName],this.initialized=!1}},{key:"getButtonThemeClasses",value:function(S){var P=this.options.buttonTheme,O=[];return Array.isArray(P)&&P.forEach(function(T){if(T&&T.class&&typeof T.class=="string"&&T.buttons&&typeof T.buttons=="string"){var q=T.class.split(" ");T.buttons.split(" ").includes(S)&&(O=[].concat(B(O),B(q)))}else console.warn('Incorrect "buttonTheme". Please check the documentation.',T)}),O}},{key:"setDOMButtonAttributes",value:function(S,P){var O=this.options.buttonAttributes;Array.isArray(O)&&O.forEach(function(T){T.attribute&&typeof T.attribute=="string"&&T.value&&typeof T.value=="string"&&T.buttons&&typeof T.buttons=="string"?T.buttons.split(" ").includes(S)&&P(T.attribute,T.value):console.warn('Incorrect "buttonAttributes". Please check the documentation.',T)})}},{key:"onTouchDeviceDetected",value:function(){this.processAutoTouchEvents(),this.disableContextualWindow()}},{key:"disableContextualWindow",value:function(){window.oncontextmenu=function(S){var P;if((P=S.target.classList)!==null&&P!==void 0&&P.contains("hg-button"))return S.preventDefault(),S.stopPropagation(),!1}}},{key:"processAutoTouchEvents",value:function(){this.options.autoUseTouchEvents&&(this.options.useTouchEvents=!0,this.options.debug&&console.log("autoUseTouchEvents: Touch device detected, useTouchEvents enabled."))}},{key:"onInit",value:function(){this.options.debug&&console.log("".concat(this.keyboardDOMClass," Initialized")),this.setEventListeners(),typeof this.options.onInit=="function"&&this.options.onInit(this)}},{key:"beforeFirstRender",value:function(){this.utilities.isTouchDevice()&&this.onTouchDeviceDetected(),typeof this.options.beforeFirstRender=="function"&&this.options.beforeFirstRender(this),this.isFirstKeyboardInstance&&this.utilities.pointerEventsSupported()&&!this.options.useTouchEvents&&!this.options.useMouseEvents&&this.options.debug&&console.log("Using PointerEvents as it is supported by this browser"),this.options.useTouchEvents&&this.options.debug&&console.log("useTouchEvents has been enabled. Only touch events will be used.")}},{key:"beforeRender",value:function(){typeof this.options.beforeRender=="function"&&this.options.beforeRender(this)}},{key:"onRender",value:function(){typeof this.options.onRender=="function"&&this.options.onRender(this)}},{key:"onModulesLoaded",value:function(){typeof this.options.onModulesLoaded=="function"&&this.options.onModulesLoaded(this)}},{key:"loadModules",value:function(){var S=this;Array.isArray(this.options.modules)&&(this.options.modules.forEach(function(P){var O=S.utilities.isConstructor(P)?new P(S):P(S);O.init&&O.init(S)}),this.keyboardPluginClasses="modules-loaded",this.render(),this.onModulesLoaded())}},{key:"getModuleProp",value:function(S,P){return!!this.modules[S]&&this.modules[S][P]}},{key:"getModulesList",value:function(){return Object.keys(this.modules)}},{key:"parseRowDOMContainers",value:function(S,P,O,T){var q=this,H=Array.from(S.children),ne=0;return H.length&&O.forEach(function(J,Pe){var je=T[Pe];if(!(je&&je>J))return!1;var Be=J-ne,De=je-ne,Ge=document.createElement("div");Ge.className+="hg-button-container";var pe="".concat(q.options.layoutName,"-r").concat(P,"c").concat(Pe);Ge.setAttribute("data-skUID",pe);var wt=H.splice(Be,De-Be+1);ne+=De-Be,wt.forEach(function(mn){return Ge.appendChild(mn)}),H.splice(Be,0,Ge),S.innerHTML="",H.forEach(function(mn){return S.appendChild(mn)}),q.options.debug&&console.log("rowDOMContainer",wt,Be,De,ne+1)}),S}},{key:"render",value:function(){var S=this;this.resetRows(),this.initialized||this.beforeFirstRender(),this.beforeRender();var P="hg-layout-".concat(this.options.layoutName),O=this.options.layout||{default:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}",".com @ {space}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}",".com @ {space}"]},T=this.options.useTouchEvents||!1,q=T?"hg-touch-events":"",H=this.options.useMouseEvents||!1,ne=this.options.disableRowButtonContainers;this.keyboardDOM.className=this.getKeyboardClassString(this.options.theme,P,this.keyboardPluginClasses,q),this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.keyboardRowsDOM=document.createElement("div"),this.keyboardRowsDOM.className="hg-rows",O[this.options.layoutName||this.defaultName].forEach(function(J,Pe){var je=J.split(" ");S.options.excludeFromLayout&&S.options.excludeFromLayout[S.options.layoutName||S.defaultName]&&(je=je.filter(function(pe){return S.options.excludeFromLayout&&!S.options.excludeFromLayout[S.options.layoutName||S.defaultName].includes(pe)}));var Be=document.createElement("div");Be.className+="hg-row";var De=[],Ge=[];je.forEach(function(pe,wt){var mn,Ml=!ne&&typeof pe=="string"&&pe.length>1&&pe.indexOf("[")===0,bs=!ne&&typeof pe=="string"&&pe.length>1&&pe.indexOf("]")===pe.length-1;Ml&&(De.push(wt),pe=pe.replace(/\[/g,"")),bs&&(Ge.push(wt),pe=pe.replace(/\]/g,""));var Jo=S.utilities.getButtonClass(pe),Zo=S.utilities.getButtonDisplayName(pe,S.options.display,S.options.mergeDisplay),T9=S.options.useButtonTag?"button":"div",In=document.createElement(T9);In.className+="hg-button ".concat(Jo),(mn=In.classList).add.apply(mn,B(S.getButtonThemeClasses(pe))),S.setDOMButtonAttributes(pe,function(Zt,O9){In.setAttribute(Zt,O9)}),S.activeButtonClass="hg-activeButton",!S.utilities.pointerEventsSupported()||T||H?T?(In.ontouchstart=function(Zt){S.handleButtonClicked(pe,Zt),S.handleButtonMouseDown(pe,Zt)},In.ontouchend=function(Zt){S.handleButtonMouseUp(pe,Zt)},In.ontouchcancel=function(Zt){S.handleButtonMouseUp(pe,Zt)}):(In.onclick=function(Zt){S.setMouseHold(!1),typeof S.options.onKeyReleased=="function"||S.options.useMouseEvents&&S.options.clickOnMouseDown||S.handleButtonClicked(pe,Zt)},In.onmousedown=function(Zt){(typeof S.options.onKeyReleased=="function"||S.options.useMouseEvents&&S.options.clickOnMouseDown)&&!S.isMouseHold&&S.handleButtonClicked(pe,Zt),S.handleButtonMouseDown(pe,Zt)},In.onmouseup=function(Zt){S.handleButtonMouseUp(pe,Zt)}):(In.onpointerdown=function(Zt){S.handleButtonClicked(pe,Zt),S.handleButtonMouseDown(pe,Zt)},In.onpointerup=function(Zt){S.handleButtonMouseUp(pe,Zt)},In.onpointercancel=function(Zt){S.handleButtonMouseUp(pe,Zt)}),In.setAttribute("data-skBtn",pe);var R9="".concat(S.options.layoutName,"-r").concat(Pe,"b").concat(wt);In.setAttribute("data-skBtnUID",R9);var YE=document.createElement("span");YE.innerHTML=Zo,In.appendChild(YE),S.buttonElements[pe]||(S.buttonElements[pe]=[]),S.buttonElements[pe].push(In),Be.appendChild(In)}),Be=S.parseRowDOMContainers(Be,Pe,De,Ge),S.keyboardRowsDOM.appendChild(Be)}),this.keyboardDOM.appendChild(this.keyboardRowsDOM),this.onRender(),this.initialized||(this.initialized=!0,!this.utilities.pointerEventsSupported()||T||H?T?(document.ontouchend=function(J){return S.handleButtonMouseUp(void 0,J)},document.ontouchcancel=function(J){return S.handleButtonMouseUp(void 0,J)},this.keyboardDOM.ontouchstart=function(J){return S.handleKeyboardContainerMouseDown(J)}):T||(document.onmouseup=function(J){return S.handleButtonMouseUp(void 0,J)},this.keyboardDOM.onmousedown=function(J){return S.handleKeyboardContainerMouseDown(J)}):(document.onpointerup=function(J){return S.handleButtonMouseUp(void 0,J)},this.keyboardDOM.onpointerdown=function(J){return S.handleKeyboardContainerMouseDown(J)}),this.onInit())}}],L&&V(j.prototype,L),U&&V(j,U),Object.defineProperty(j,"prototype",{writable:!1}),j;var j,L,U}(),Z=ke,le=Z;return c}()}},r={};function s(a){var l=r[a];if(l!==void 0)return l.exports;var c=r[a]={exports:{}};return i[a].call(c.exports,c,c.exports,s),c.exports}s.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return s.d(l,{a:l}),l},s.d=function(a,l){for(var c in l)s.o(l,c)&&!s.o(a,c)&&Object.defineProperty(a,c,{enumerable:!0,get:l[c]})},s.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},s.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})};var o={};return function(){s.r(o),s.d(o,{KeyboardReact:function(){return g},default:function(){return y}});var a=s(442);function l(v){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},l(v)}function c(v,b){var w=Object.keys(v);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(v);b&&(k=k.filter(function(_){return Object.getOwnPropertyDescriptor(v,_).enumerable})),w.push.apply(w,k)}return w}function u(v){for(var b=1;b<arguments.length;b++){var w=arguments[b]!=null?arguments[b]:{};b%2?c(Object(w),!0).forEach(function(k){d(v,k,w[k])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(w)):c(Object(w)).forEach(function(k){Object.defineProperty(v,k,Object.getOwnPropertyDescriptor(w,k))})}return v}function d(v,b,w){return(b=function(k){var _=function(E,C){if(l(E)!="object"||!E)return E;var N=E[Symbol.toPrimitive];if(N!==void 0){var M=N.call(E,C);if(l(M)!="object")return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return(C==="string"?String:Number)(E)}(k,"string");return l(_)=="symbol"?_:_+""}(b))in v?Object.defineProperty(v,b,{value:w,enumerable:!0,configurable:!0,writable:!0}):v[b]=w,v}var f=function(v){return u(u({},v),{},{keyboardRef:null})},p=s(651),m=s.n(p),g=function(v){var b=v.baseClass||"react-simple-keyboard",w=a.useRef(null),k=a.useRef(null),_=a.useRef(null),E=a.useRef(v);return a.useEffect(function(){return function(){_.current&&_.current.destroy(),w.current=!1}},[]),a.useEffect(function(){var C=function(D){return u(u({},D),{},{theme:"simple-keyboard ".concat(D.theme||"hg-theme-default")})}(v);if(!w.current){w.current=!0,C.debug&&console.log("ReactSimpleKeyboard: Init");var N=k.current,M=".".concat(b);_.current=new(m())(N||M,C),C.keyboardRef&&C.keyboardRef(_.current)}var R=function(D,K){var B=f(K),W=f(D);return Object.keys(B).filter(function(Y){return B[Y]!==W[Y]})}(E.current,C);if(R.length){var I=_.current;E.current=C,I==null||I.setOptions(C),C.debug&&console.log("ReactSimpleKeyboard - setOptions called due to updated props:",R)}},[w,b,E,v]),a.createElement("div",{className:b,ref:k})},y=g}(),o}()})})(vB);var jue=vB.exports;const $ue=Lc(jue),Fue={en:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shiftleft} z x c v b n m , . / {shiftright}","{space}"],"en-shift":["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shiftleft} Z X C V B N M < > ? {shiftright}","{space}"],es:["| 1 2 3 4 5 6 7 8 9 0 ' ¿ {bksp}","{tab} q w e r t y u i o p ́ +","{lock} a s d f g h j k l ñ { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-shift":['° ! " # $ % & / ( ) = ? ¡ {bksp}',"{tab} Q W E R T Y U I O P ̈ *","{lock} A S D F G H J K L Ñ [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"],"es-accent":["| 1 2 3 4 5 6 7 8 9 0 ' ¿ {bksp}","{tab} q w é r t y ú í ó p ́ +","{lock} á s d f g h j k l ñ { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-accent-shift":['° ! " # $ % & / ( ) = ? ¡ {bksp}',"{tab} Q W É R T Y Ú Í Ó P ̈ *","{lock} Á S D F G H J K L Ñ [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"],"es-diaeresis-default":["| 1 2 3 4 5 6 7 8 9 0 ' ¿ {bksp}","{tab} q w e r t y ü i o p ́ +","{lock} a s d f g h j k l ñ { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-diaeresis-shift":['° ! " # $ % & / ( ) = ? ¡ {bksp}',"{tab} Q W E R T Y Ü I O P ̈ *","{lock} A S D F G H J K L Ñ [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"]},Bue={en:{"{bksp}":"Backspace ⌫","{enter}":"Enter ↵","{shiftleft}":"Shift ⇧","{shiftright}":"Shift ⇧","{tab}":"Tab ⇥","{lock}":"Caps Lock ⇪","{space}":"Space"},es:{"{bksp}":"⌫","{enter}":"Intro ↵","{shiftleft}":"Shift ⇧","{shiftright}":"Shift ⇧","{tab}":"Tab ⇥","{lock}":"Bloq Mayús ⇪","{space}":"Espacio"}},XM="Á É Í Ó Ú á é í ó ú ́",JM="Ü ü ̈";function zue(){const t=Y_(),e=Rt(),{status:n,dispatch:i,devices:r}=On(),[s,o]=x.useState("none"),[a,l]=x.useState(!1),[c,u]=x.useState(!1),d=x.useMemo(()=>[t,t==="es"&&(a&&"accent"||c&&"diaeresis"),s!=="none"&&"shift"].filter(Boolean).join("-"),[t,s,a,c]),f=x.useCallback(p=>{r.keyboard&&n.type==="running"&&n.waitingForInput&&i("keyboard.sendChar",p)},[n,i,r.keyboard]);return r.keyboard?h.jsxs("div",{className:"absolute left-[1600px] top-[300px] z-10 h-min w-[500px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-xl text-white",children:e("computer.keyboard")}),h.jsx($ue,{theme:ee("hg-theme-vonsim",`hg-shift-${s}`,a&&"hg-accentDeadKey",c&&"hg-diaeresisDeadKey"),layoutName:d,layout:Fue,display:Bue[t],buttonTheme:[{class:"hg-accentDeadKeyButton",buttons:XM},{class:"hg-diaeresisDeadKeyButton",buttons:JM}],disableButtonHold:!0,onKeyPress:p=>{if(p==="{shiftleft}"||p==="{shiftright}"){o(m=>m==="none"?"once":"none");return}if(p==="{lock}"){o(m=>m==="none"?"lock":"none");return}if(t==="es"){if(a){XM.includes(p)&&(l(!1),s==="once"&&o("none"),f(p));return}else if(p==="́"){l(!0);return}if(c){JM.includes(p)&&(u(!1),s==="once"&&o("none"),f(p));return}else if(p==="̈"){u(!0);return}}s==="once"&&o("none"),f(p==="{bksp}"?"\b":p==="{enter}"?`
`:p==="{tab}"?"	":p==="{space}"?" ":p)}})]}):null}function Uue(){const t=Rt(),{devices:e}=On(),n=at(jC).toArray();return e.leds?h.jsxs("div",{className:"absolute left-[1300px] top-[810px] z-10 size-min rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.leds")}),h.jsx("div",{className:"flex flex-row-reverse gap-2 p-4",children:n.map((i,r)=>h.jsxs("div",{className:"flex w-7 flex-col items-center",children:[h.jsx("span",{className:"mb-1 w-full text-center text-xs text-white",children:r}),h.jsx("div",{className:ee("relative size-7 rounded-full transition",i?"bg-mantis-400":"bg-stone-700 shadow-inner shadow-stone-900"),children:h.jsx("div",{className:ee("absolute inset-0 rounded-full bg-mantis-400 blur-sm transition",i?"opacity-100":"opacity-0")})})]},r))})]}):null}function Vue(){const t=Rt(),e=at(tZ),n=at(Ye.IP),i=at(HL),r=at(WL),s=at(Ye.SP),o=at(tC),a=at(qS),l=AL(),c=a||l.pic||l.handshake!==null,u=()=>{const d=[];for(let f=0;f<256;f+=16){const p=e.slice(f,f+16);d.push(p)}return d};return h.jsxs("div",{className:"absolute left-[800px] top-0 z-10 size-auto rounded-lg border border-stone-600 bg-stone-900 shadow-2xl [&_*]:z-20","data-testid":"memory-component",children:[h.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl text-white shadow",children:t("computer.memory.name")}),h.jsx("div",{className:"m-4 overflow-x-auto",children:h.jsxs("table",{className:"mx-auto w-auto min-w-[600px] border-separate text-center font-mono text-base",children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{}),Array.from({length:16}).map((d,f)=>h.jsx("th",{className:ee("size-10 border border-gray-500 bg-mantis-500",f%4===0&&f!==0?"border-l-4 border-mantis-600":""),children:f.toString(16).toUpperCase()},f))]})}),h.jsx("tbody",{children:u().map((d,f)=>h.jsxs("tr",{className:f%4===0&&f!==0?"border-t-4 border-mantis-600":"",children:[h.jsx("th",{className:"size-10 border border-gray-500 bg-mantis-500",children:f.toString(16).toUpperCase()}),d.map((p,m)=>{var g,y,v;return h.jsx("td",{className:ee("size-10 border border-gray-500 p-0 transition-shadow duration-200",m%4===0&&m!==0?"border-l-4 border-mantis-600":""),children:h.jsx(Hue,{address:p.address,value:p.value,isIP:p.address.valueOf()===n.valueOf(),isSP:o&&p.address.valueOf()===s.valueOf(),isStackData:o&&p.address.valueOf()>s.valueOf(),isProgramAddress:!!i.find(b=>b.address===p.address.value),isDataAddress:!!r.find(b=>b.address===p.address.value),isInterruptVector:c&&p.address.valueOf()>=0&&p.address.valueOf()<=7,label:((g=i.find(b=>b.address===p.address.value))==null?void 0:g.name)||((y=r.find(b=>b.address===p.address.value))==null?void 0:y.label)||null,length:((v=i.find(b=>b.address===p.address.value))==null?void 0:v.length)??null})},m)})]},f))})]})})]})}function Hue({address:t,value:e,isIP:n,isSP:i,isStackData:r,isProgramAddress:s,isDataAddress:o,isInterruptVector:a,label:l,length:c}){const u=Rt(),d=at(Qh),[f,p]=x.useState(!1),m=x.useRef(e);x.useEffect(()=>{m.current!==e&&(p(!0),setTimeout(()=>p(!1),300),m.current=e)},[e]);const g=u("computer.memory.cell",t);return h.jsxs(mB,{children:[h.jsx(gB,{asChild:!0,children:h.jsxs(an.div,{title:g,className:ee("relative flex size-10 cursor-pointer select-none items-center justify-center border font-mono text-base transition-all duration-200",n?"z-10 shadow-lg shadow-red-500/50 outline outline-2 outline-red-500 ring-2 ring-red-500 ring-offset-2":i?"z-10 shadow-lg shadow-yellow-400/50 outline outline-2 outline-yellow-400 ring-2 ring-yellow-400 ring-offset-2":"","bg-stone-800",a&&!i&&!r?"border-l-4 border-purple-500":"",s&&!i&&!r&&!a?"border-l-4 border-blue-500":"",o&&!i&&!r&&!s&&!a?"border-l-4 border-green-500":"",r&&!i?"border-l-4 border-yellow-500":"",i?"border-l-4 border-yellow-400":"","text-stone-100","hover:z-20 hover:scale-110 hover:shadow-xl",f&&"animate-pulse"),style:t.value===d.value?mt("memory.operating-cell"):void 0,children:[a&&!i&&!r&&h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-purple-400",title:"Vector de interrupción",style:{lineHeight:1},children:"⚡"}),s&&!i&&!r&&!a&&h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-blue-400",title:"Instrucción",style:{lineHeight:1},children:"📘"}),o&&!i&&!r&&!s&&!a&&h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-green-400",title:"Dato",style:{lineHeight:1},children:"📦"}),r&&!i&&h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-yellow-400",title:"Dato de la pila",style:{lineHeight:1},children:"📚"}),i&&h.jsx("span",{className:"pointer-events-none absolute left-0.5 top-0.5 rounded bg-stone-900/80 px-0.5 text-[10px] text-yellow-300",title:"Stack Pointer",style:{lineHeight:1},children:"📍"}),h.jsx("span",{className:"z-10 mt-3 block font-mono text-lg font-bold",children:e.toString("hex")}),n&&h.jsx("span",{className:"absolute right-0 top-0 text-xs text-red-500",title:"IP",style:{lineHeight:1},children:"▲"}),i&&h.jsx("span",{className:"absolute right-0 top-0 text-xs text-yellow-500",title:"SP",style:{lineHeight:1},children:"▲"})]})}),h.jsxs(yE,{className:"w-60",children:[h.jsxs("p",{className:"px-4 py-2 font-medium text-white",children:[g," ",l?h.jsxs("span",{className:"font-bold text-mantis-400",children:["(",l,")",c!==null&&c!==""&&h.jsxs("span",{className:"text-xs font-normal text-white",children:[" Bytes: ",c]})]}):""]}),h.jsx("hr",{className:"border-stone-600"}),h.jsx("ul",{className:"px-4 py-2 text-sm",children:["hex","bin","uint","int","safe-ascii"].map(y=>h.jsxs("li",{children:[h.jsx("b",{className:"font-medium",children:u(`generics.byte-representation.${y}`)}),":"," ",h.jsx("span",{className:"font-mono text-mantis-400",children:e.toString(y)})]},y))})]})]})}function Wue(){const t=Rt(),{devices:e}=On();return e.pic?h.jsxs("div",{className:"absolute left-0 top-[700px] z-10 flex h-[200px] w-[450px] flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsxs("div",{className:"flex items-start",children:[h.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.pic")}),h.jsxs("div",{className:"flex h-16 grow items-center justify-evenly",children:[h.jsx(or,{name:"IMR",title:t("generics.io-register","IMR",33),valueAtom:$C,springs:"pic.IMR",emphasis:!0}),h.jsx(or,{name:"IRR",title:t("generics.io-register","IRR",34),valueAtom:FC,springs:"pic.IRR",emphasis:!0}),h.jsx(or,{name:"ISR",title:t("generics.io-register","ISR",35),valueAtom:BC,springs:"pic.ISR",emphasis:!0})]})]}),h.jsx("hr",{className:"mb-2 border-stone-600"}),h.jsx("div",{className:"grid size-full grid-cols-4 items-center",children:Ov.map((n,i)=>h.jsx(or,{name:`INT${i}`,title:t("generics.io-register",`INT${i}`,36+i),valueAtom:n,springs:`pic.INT${i}`,className:"mx-auto"},i))})]}):null}function Gue(){const t=Rt(),{devices:e}=On();return e.pio?h.jsxs("div",{className:"absolute left-[900px] top-[700px] z-10 h-min w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"mb-2 block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.pio.name")}),h.jsx("hr",{className:"border-stone-600"}),h.jsxs("div",{className:"flex w-full items-center justify-evenly py-4",children:[h.jsx(or,{name:"PA",title:t("generics.io-register","PA",48),valueAtom:zC,springs:"pio.PA"}),h.jsx(or,{name:"CA",title:t("generics.io-register","CA",50),valueAtom:VC,springs:"pio.CA"})]}),h.jsx("hr",{className:"border-stone-600"}),h.jsxs("div",{className:"flex w-full items-center justify-evenly py-4",children:[h.jsx(or,{name:"PB",title:t("generics.io-register","PB",49),valueAtom:UC,springs:"pio.PB"}),h.jsx(or,{name:"CB",title:t("generics.io-register","CB",51),valueAtom:HC,springs:"pio.CB"})]})]}):null}const Kue="_printer_fbkny_2",que="_shadow_fbkny_6",Yue="_sides_fbkny_11",Xue="_front_fbkny_22",Jue="_trailContainer_fbkny_27",Zue="_trail_fbkny_27",Que="_paper_fbkny_33",zl={printer:Kue,shadow:que,sides:Yue,front:Xue,trailContainer:Jue,trail:Zue,paper:Que},ede=Array.from({length:5},(t,e)=>e);function tde(){const t=Rt(),{devices:e}=On(),n=at(Iv),i=at(Dv);return e.printer?h.jsx("div",{className:"absolute left-[1300px] top-[975px] z-10 flex h-min w-80 flex-col rounded-lg border border-stone-600 bg-stone-900 pl-16 [&_*]:z-20",children:h.jsxs("div",{className:zl.printer,title:t("computer.printer.name"),children:[h.jsx("div",{className:zl.shadow}),h.jsx("div",{className:zl.sides}),h.jsxs("div",{className:zl.front,children:[h.jsx("div",{className:zl.trailContainer,children:h.jsx("div",{className:zl.trail,children:h.jsx("pre",{className:zl.paper,children:i})})}),h.jsx("div",{className:"grid grid-cols-5 items-center justify-center",children:ede.map(r=>{const s=n[r]?NL(n[r].unsigned):null;return h.jsx("span",{className:ee("flex h-6 w-full items-center justify-center border-r border-zinc-300 text-center font-mono text-base font-medium leading-none text-white first-of-type:rounded-l-xl last-of-type:rounded-r-xl last-of-type:border-r-0",s===null?"bg-zinc-400":"bg-mantis-500"),children:s},r)})}),h.jsx("div",{className:"mx-auto mt-4 h-1 w-[70%] overflow-hidden rounded-full bg-zinc-600",children:h.jsx(an.div,{className:"h-full bg-mantis-400",style:{width:mt("printer.printing.progress").to(r=>`${r*100}%`),opacity:mt("printer.printing.opacity")}})})]})]})}):null}const nde="_container_6nvz7_2",ide="_text_6nvz7_22",ZM={container:nde,text:ide};function rde(){const t=Rt(),{devices:e}=On(),n=at(WC);return e.screen?h.jsxs("div",{className:"absolute left-[1600px] top-0 z-10 h-min w-[500px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-xl text-white",children:t("computer.screen")}),h.jsx("div",{className:ZM.container,children:h.jsx("pre",{className:ZM.text,children:n})})]}):null}function sde(){const t=Rt(),{dispatch:e,devices:n}=On(),i=at(ab).toArray();return n.switches?h.jsxs("div",{className:"absolute left-[1300px] top-[680px] z-10 size-min rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.switches")}),h.jsx("div",{className:"flex flex-row-reverse gap-3 p-4",children:i.map((r,s)=>h.jsxs("div",{className:"flex w-8 flex-col items-center",children:[h.jsx("span",{className:"mb-1 w-full text-center text-xs text-white",children:s}),h.jsx(da,{checked:r,onCheckedChange:()=>e("switch.toggle",s),className:"-translate-x-3 -rotate-90 data-[state=unchecked]:!bg-stone-800"})]},s))})]}):null}function ode(){const t=Rt(),{devices:e}=On();return e.timer?h.jsxs("div",{className:"absolute left-[475px] top-[875px] z-10 flex h-[120px] w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[h.jsx("span",{className:"block size-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.timer")}),h.jsxs("div",{className:"flex size-full flex-col items-center justify-evenly",children:[h.jsx(or,{name:"CONT",title:t("generics.io-register","CONT",16),valueAtom:Lv,springs:"timer.CONT"}),h.jsx(or,{name:"COMP",title:t("generics.io-register","COMP",17),valueAtom:GC,springs:"timer.COMP"})]})]}):null}function yB(){const t=x.useRef(null);return x.useEffect(()=>{Ene()},[]),h.jsx("div",{className:"relative size-full",children:h.jsxs(Qce,{minScale:.3,initialScale:.75,ref:t,doubleClick:{disabled:!0},panning:{excluded:["input"]},children:[h.jsx(nue,{wrapperClass:"!w-full !h-full",contentClass:"!p-[200px]",children:h.jsxs("div",{className:"relative h-[1300px] w-[1900px]",children:[h.jsx(cue,{}),h.jsx(Mue,{}),h.jsx(Pue,{}),h.jsx(rue,{}),h.jsx(Vue,{}),h.jsx(Lue,{}),h.jsx(Wue,{}),h.jsx(Gue,{}),h.jsx(ode,{}),h.jsx(uue,{}),h.jsx(Due,{}),h.jsx(zue,{}),h.jsx(Uue,{}),h.jsx(tde,{}),h.jsx(sde,{}),h.jsx(rde,{})]})}),h.jsx(iue,{wrapperRef:t})]})})}const ade=1024;let lde=0;class N1{constructor(e,n){this.from=e,this.to=n}}class ct{constructor(e={}){this.id=lde++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Ui.match(e)),n=>{let i=e(n);return i===void 0?null:[this,i]}}}ct.closedBy=new ct({deserialize:t=>t.split(" ")});ct.openedBy=new ct({deserialize:t=>t.split(" ")});ct.group=new ct({deserialize:t=>t.split(" ")});ct.isolate=new ct({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});ct.contextHash=new ct({perNode:!0});ct.lookAhead=new ct({perNode:!0});ct.mounted=new ct({perNode:!0});class Vv{constructor(e,n,i){this.tree=e,this.overlay=n,this.parser=i}static get(e){return e&&e.props&&e.props[ct.mounted.id]}}const cde=Object.create(null);class Ui{constructor(e,n,i,r=0){this.name=e,this.props=n,this.id=i,this.flags=r}static define(e){let n=e.props&&e.props.length?Object.create(null):cde,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new Ui(e.name||"",n,e.id,i);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(r)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(ct.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let i in e)for(let r of i.split(" "))n[r]=e[i];return i=>{for(let r=i.prop(ct.group),s=-1;s<(r?r.length:0);s++){let o=n[s<0?i.name:r[s]];if(o)return o}}}}Ui.none=new Ui("",Object.create(null),0,8);class bE{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let i of this.types){let r=null;for(let s of e){let o=s(i);o&&(r||(r=Object.assign({},i.props)),r[o[0].id]=o[1])}n.push(r?new Ui(i.name,r,i.id,i.flags):i)}return new bE(n)}}const wg=new WeakMap,QM=new WeakMap;var Bn;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(Bn||(Bn={}));class Yt{constructor(e,n,i,r,s){if(this.type=e,this.children=n,this.positions=i,this.length=r,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=Vv.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let i of this.children){let r=i.toString();r&&(n&&(n+=","),n+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new lk(this.topNode,e)}cursorAt(e,n=0,i=0){let r=wg.get(this)||this.topNode,s=new lk(r);return s.moveTo(e,n),wg.set(this,s._tree),s}get topNode(){return new jr(this,0,0,null)}resolve(e,n=0){let i=wp(wg.get(this)||this.topNode,e,n,!1);return wg.set(this,i),i}resolveInner(e,n=0){let i=wp(QM.get(this)||this.topNode,e,n,!0);return QM.set(this,i),i}resolveStack(e,n=0){return fde(this,e,n)}iterate(e){let{enter:n,leave:i,from:r=0,to:s=this.length}=e,o=e.mode||0,a=(o&Bn.IncludeAnonymous)>0;for(let l=this.cursor(o|Bn.IncludeAnonymous);;){let c=!1;if(l.from<=s&&l.to>=r&&(!a&&l.type.isAnonymous||n(l)!==!1)){if(l.firstChild())continue;c=!0}for(;c&&i&&(a||!l.type.isAnonymous)&&i(l),!l.nextSibling();){if(!l.parent())return;c=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:SE(Ui.none,this.children,this.positions,0,this.children.length,0,this.length,(n,i,r)=>new Yt(this.type,n,i,r,this.propValues),e.makeTree||((n,i,r)=>new Yt(Ui.none,n,i,r)))}static build(e){return hde(e)}}Yt.empty=new Yt(Ui.none,[],[],0);class wE{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new wE(this.buffer,this.index)}}class ml{constructor(e,n,i){this.buffer=e,this.length=n,this.set=i}get type(){return Ui.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],i=this.buffer[e+3],r=this.set.types[n],s=r.name;if(/\W/.test(s)&&!r.isError&&(s=JSON.stringify(s)),e+=4,i==e)return s;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,n,i,r,s){let{buffer:o}=this,a=-1;for(let l=e;l!=n&&!(bB(s,r,o[l+1],o[l+2])&&(a=l,i>0));l=o[l+3]);return a}slice(e,n,i){let r=this.buffer,s=new Uint16Array(n-e),o=0;for(let a=e,l=0;a<n;){s[l++]=r[a++],s[l++]=r[a++]-i;let c=s[l++]=r[a++]-i;s[l++]=r[a++]-e,o=Math.max(o,c)}return new ml(s,o,this.set)}}function bB(t,e,n,i){switch(t){case-2:return n<e;case-1:return i>=e&&n<e;case 0:return n<e&&i>e;case 1:return n<=e&&i>e;case 2:return i>e;case 4:return!0}}function wp(t,e,n,i){for(var r;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let o=!i&&t instanceof jr&&t.index<0?null:t.parent;if(!o)return t;t=o}let s=i?0:Bn.IgnoreOverlays;if(i)for(let o=t,a=o.parent;a;o=a,a=o.parent)o instanceof jr&&o.index<0&&((r=a.enter(e,n,s))===null||r===void 0?void 0:r.from)!=o.from&&(t=a);for(;;){let o=t.enter(e,n,s);if(!o)return t;t=o}}class wB{cursor(e=0){return new lk(this,e)}getChild(e,n=null,i=null){let r=eT(this,e,n,i);return r.length?r[0]:null}getChildren(e,n=null,i=null){return eT(this,e,n,i)}resolve(e,n=0){return wp(this,e,n,!1)}resolveInner(e,n=0){return wp(this,e,n,!0)}matchContext(e){return ak(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),i=this;for(;n;){let r=n.lastChild;if(!r||r.to!=n.to)break;r.type.isError&&r.from==r.to?(i=n,n=r.prevSibling):n=r}return i}get node(){return this}get next(){return this.parent}}class jr extends wB{constructor(e,n,i,r){super(),this._tree=e,this.from=n,this.index=i,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,i,r,s=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,c=n>0?a.length:-1;e!=c;e+=n){let u=a[e],d=l[e]+o.from;if(bB(r,i,d,d+u.length)){if(u instanceof ml){if(s&Bn.ExcludeBuffers)continue;let f=u.findChild(0,u.buffer.length,n,i-d,r);if(f>-1)return new Ia(new ude(o,u,e,d),null,f)}else if(s&Bn.IncludeAnonymous||!u.type.isAnonymous||xE(u)){let f;if(!(s&Bn.IgnoreMounts)&&(f=Vv.get(u))&&!f.overlay)return new jr(f.tree,d,e,o);let p=new jr(u,d,e,o);return s&Bn.IncludeAnonymous||!p.type.isAnonymous?p:p.nextChild(n<0?u.children.length-1:0,n,i,r)}}}if(s&Bn.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+n:e=n<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,i=0){let r;if(!(i&Bn.IgnoreOverlays)&&(r=Vv.get(this._tree))&&r.overlay){let s=e-this.from;for(let{from:o,to:a}of r.overlay)if((n>0?o<=s:o<s)&&(n<0?a>=s:a>s))return new jr(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function eT(t,e,n,i){let r=t.cursor(),s=[];if(!r.firstChild())return s;if(n!=null){for(let o=!1;!o;)if(o=r.type.is(n),!r.nextSibling())return s}for(;;){if(i!=null&&r.type.is(i))return s;if(r.type.is(e)&&s.push(r.node),!r.nextSibling())return i==null?s:[]}}function ak(t,e,n=e.length-1){for(let i=t;n>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[n]&&e[n]!=i.name)return!1;n--}}return!0}class ude{constructor(e,n,i,r){this.parent=e,this.buffer=n,this.index=i,this.start=r}}class Ia extends wB{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,i){super(),this.context=e,this._parent=n,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,n,i){let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.context.start,i);return s<0?null:new Ia(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,i=0){if(i&Bn.ExcludeBuffers)return null;let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new Ia(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Ia(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new Ia(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:i}=this.context,r=this.index+4,s=i.buffer[this.index+3];if(s>r){let o=i.buffer[this.index+1];e.push(i.slice(r,s,o)),n.push(0)}return new Yt(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function xB(t){if(!t.length)return null;let e=0,n=t[0];for(let s=1;s<t.length;s++){let o=t[s];(o.from>n.from||o.to<n.to)&&(n=o,e=s)}let i=n instanceof jr&&n.index<0?null:n.parent,r=t.slice();return i?r[e]=i:r.splice(e,1),new dde(r,n)}class dde{constructor(e,n){this.heads=e,this.node=n}get next(){return xB(this.heads)}}function fde(t,e,n){let i=t.resolveInner(e,n),r=null;for(let s=i instanceof jr?i:i.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(r||(r=[i])).push(o.resolve(e,n)),s=o}else{let o=Vv.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let a=new jr(o.tree,o.overlay[0].from+s.from,-1,s);(r||(r=[i])).push(wp(a,e,n,!1))}}return r?xB(r):i}class lk{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof jr)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:i,buffer:r}=this.buffer;return this.type=n||r.set.types[r.buffer[e]],this.from=i+r.buffer[e+1],this.to=i+r.buffer[e+2],!0}yield(e){return e?e instanceof jr?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,i,this.mode));let{buffer:r}=this.buffer,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,i=this.mode){return this.buffer?i&Bn.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Bn.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Bn.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,i=this.stack.length-1;if(e<0){let r=i<0?0:this.stack[i]+4;if(this.index!=r)return this.yieldBuf(n.findChild(r,this.index,-1,0,4))}else{let r=n.buffer[this.index+3];if(r<(i<0?n.buffer.length:n.buffer[this.stack[i]+3]))return this.yieldBuf(r)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,i,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(r.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:i}=r)}else({index:n,_parent:i}=this._tree);for(;i;{index:n,_parent:i}=i)if(n>-1)for(let s=n+e,o=e<0?-1:i._tree.children.length;s!=o;s+=e){let a=i._tree.children[s];if(this.mode&Bn.IncludeAnonymous||a instanceof ml||!a.type.isAnonymous||xE(a))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,i=0;if(e&&e.context==this.buffer)e:for(let r=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;n=o,i=s+1;break e}r=this.stack[--s]}for(let r=i;r<this.stack.length;r++)n=new Ia(this.buffer,n,this.stack[r]);return this.bufferNode=new Ia(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let i=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(r=!0)}for(;;){if(r&&n&&n(this),r=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,r=!0}}}matchContext(e){if(!this.buffer)return ak(this.node.parent,e);let{buffer:n}=this.buffer,{types:i}=n.set;for(let r=e.length-1,s=this.stack.length-1;r>=0;s--){if(s<0)return ak(this._tree,e,r);let o=i[n.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}}function xE(t){return t.children.some(e=>e instanceof ml||!e.type.isAnonymous||xE(e))}function hde(t){var e;let{buffer:n,nodeSet:i,maxBufferLength:r=ade,reused:s=[],minRepeatType:o=i.types.length}=t,a=Array.isArray(n)?new wE(n,n.length):n,l=i.types,c=0,u=0;function d(_,E,C,N,M,R){let{id:I,start:D,end:K,size:B}=a,W=u,Y=c;for(;B<0;)if(a.next(),B==-1){let ke=s[I];C.push(ke),N.push(D-_);return}else if(B==-3){c=I;return}else if(B==-4){u=I;return}else throw new RangeError(`Unrecognized record size: ${B}`);let te=l[I],V,$,ie=D-_;if(K-D<=r&&($=y(a.pos-E,M))){let ke=new Uint16Array($.size-$.skip),Z=a.pos-$.size,le=ke.length;for(;a.pos>Z;)le=v($.start,ke,le);V=new ml(ke,K-$.start,i),ie=$.start-_}else{let ke=a.pos-B;a.next();let Z=[],le=[],j=I>=o?I:-1,L=0,U=K;for(;a.pos>ke;)j>=0&&a.id==j&&a.size>=0?(a.end<=U-r&&(m(Z,le,D,L,a.end,U,j,W,Y),L=Z.length,U=a.end),a.next()):R>2500?f(D,ke,Z,le):d(D,ke,Z,le,j,R+1);if(j>=0&&L>0&&L<Z.length&&m(Z,le,D,L,D,U,j,W,Y),Z.reverse(),le.reverse(),j>-1&&L>0){let S=p(te,Y);V=SE(te,Z,le,0,Z.length,0,K-D,S,S)}else V=g(te,Z,le,K-D,W-K,Y)}C.push(V),N.push(ie)}function f(_,E,C,N){let M=[],R=0,I=-1;for(;a.pos>E;){let{id:D,start:K,end:B,size:W}=a;if(W>4)a.next();else{if(I>-1&&K<I)break;I<0&&(I=B-r),M.push(D,K,B),R++,a.next()}}if(R){let D=new Uint16Array(R*4),K=M[M.length-2];for(let B=M.length-3,W=0;B>=0;B-=3)D[W++]=M[B],D[W++]=M[B+1]-K,D[W++]=M[B+2]-K,D[W++]=W;C.push(new ml(D,M[2]-K,i)),N.push(K-_)}}function p(_,E){return(C,N,M)=>{let R=0,I=C.length-1,D,K;if(I>=0&&(D=C[I])instanceof Yt){if(!I&&D.type==_&&D.length==M)return D;(K=D.prop(ct.lookAhead))&&(R=N[I]+D.length+K)}return g(_,C,N,M,R,E)}}function m(_,E,C,N,M,R,I,D,K){let B=[],W=[];for(;_.length>N;)B.push(_.pop()),W.push(E.pop()+C-M);_.push(g(i.types[I],B,W,R-M,D-R,K)),E.push(M-C)}function g(_,E,C,N,M,R,I){if(R){let D=[ct.contextHash,R];I=I?[D].concat(I):[D]}if(M>25){let D=[ct.lookAhead,M];I=I?[D].concat(I):[D]}return new Yt(_,E,C,N,I)}function y(_,E){let C=a.fork(),N=0,M=0,R=0,I=C.end-r,D={size:0,start:0,skip:0};e:for(let K=C.pos-_;C.pos>K;){let B=C.size;if(C.id==E&&B>=0){D.size=N,D.start=M,D.skip=R,R+=4,N+=4,C.next();continue}let W=C.pos-B;if(B<0||W<K||C.start<I)break;let Y=C.id>=o?4:0,te=C.start;for(C.next();C.pos>W;){if(C.size<0)if(C.size==-3)Y+=4;else break e;else C.id>=o&&(Y+=4);C.next()}M=te,N+=B,R+=Y}return(E<0||N==_)&&(D.size=N,D.start=M,D.skip=R),D.size>4?D:void 0}function v(_,E,C){let{id:N,start:M,end:R,size:I}=a;if(a.next(),I>=0&&N<o){let D=C;if(I>4){let K=a.pos-(I-4);for(;a.pos>K;)C=v(_,E,C)}E[--C]=D,E[--C]=R-_,E[--C]=M-_,E[--C]=N}else I==-3?c=N:I==-4&&(u=N);return C}let b=[],w=[];for(;a.pos>0;)d(t.start||0,t.bufferStart||0,b,w,-1,0);let k=(e=t.length)!==null&&e!==void 0?e:b.length?w[0]+b[0].length:0;return new Yt(l[t.topID],b.reverse(),w.reverse(),k)}const tT=new WeakMap;function y0(t,e){if(!t.isAnonymous||e instanceof ml||e.type!=t)return 1;let n=tT.get(e);if(n==null){n=1;for(let i of e.children){if(i.type!=t||!(i instanceof Yt)){n=1;break}n+=y0(t,i)}tT.set(e,n)}return n}function SE(t,e,n,i,r,s,o,a,l){let c=0;for(let m=i;m<r;m++)c+=y0(t,e[m]);let u=Math.ceil(c*1.5/8),d=[],f=[];function p(m,g,y,v,b){for(let w=y;w<v;){let k=w,_=g[w],E=y0(t,m[w]);for(w++;w<v;w++){let C=y0(t,m[w]);if(E+C>=u)break;E+=C}if(w==k+1){if(E>u){let C=m[k];p(C.children,C.positions,0,C.children.length,g[k]+b);continue}d.push(m[k])}else{let C=g[w-1]+m[w-1].length-_;d.push(SE(t,m,g,k,w,_,C,null,l))}f.push(_+b-s)}}return p(e,n,i,r,0),(a||l)(d,f,o)}class pc{constructor(e,n,i,r,s=!1,o=!1){this.from=e,this.to=n,this.tree=i,this.offset=r,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],i=!1){let r=[new pc(0,e.length,e,0,!1,i)];for(let s of n)s.to>e.length&&r.push(s);return r}static applyChanges(e,n,i=128){if(!n.length)return e;let r=[],s=1,o=e.length?e[0]:null;for(let a=0,l=0,c=0;;a++){let u=a<n.length?n[a]:null,d=u?u.fromA:1e9;if(d-l>=i)for(;o&&o.from<d;){let f=o;if(l>=f.from||d<=f.to||c){let p=Math.max(f.from,l)-c,m=Math.min(f.to,d)-c;f=p>=m?null:new pc(p,m,f.tree,f.offset+c,a>0,!!u)}if(f&&r.push(f),o.to>d)break;o=s<e.length?e[s++]:null}if(!u)break;l=u.toA,c=u.toA-u.toB}return r}}class SB{startParse(e,n,i){return typeof e=="string"&&(e=new pde(e)),i=i?i.length?i.map(r=>new N1(r.from,r.to)):[new N1(0,0)]:[new N1(0,e.length)],this.createParse(e,n||[],i)}parse(e,n,i){let r=this.startParse(e,n,i);for(;;){let s=r.advance();if(s)return s}}}class pde{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new ct({perNode:!0});let mde=0;class Sn{constructor(e,n,i,r){this.name=e,this.set=n,this.base=i,this.modified=r,this.id=mde++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let i=typeof e=="string"?e:"?";if(e instanceof Sn&&(n=e),n!=null&&n.base)throw new Error("Can not derive from a modified tag");let r=new Sn(i,[],null,[]);if(r.set.push(r),n)for(let s of n.set)r.set.push(s);return r}static defineModifier(e){let n=new Hv(e);return i=>i.modified.indexOf(n)>-1?i:Hv.get(i.base||i,i.modified.concat(n).sort((r,s)=>r.id-s.id))}}let gde=0;class Hv{constructor(e){this.name=e,this.instances=[],this.id=gde++}static get(e,n){if(!n.length)return e;let i=n[0].instances.find(a=>a.base==e&&vde(n,a.modified));if(i)return i;let r=[],s=new Sn(e.name,r,e,n);for(let a of n)a.instances.push(s);let o=yde(n);for(let a of e.set)if(!a.modified.length)for(let l of o)r.push(Hv.get(a,l));return s}}function vde(t,e){return t.length==e.length&&t.every((n,i)=>n==e[i])}function yde(t){let e=[[]];for(let n=0;n<t.length;n++)for(let i=0,r=e.length;i<r;i++)e.push(e[i].concat(t[n]));return e.sort((n,i)=>i.length-n.length)}function bde(t){let e=Object.create(null);for(let n in t){let i=t[n];Array.isArray(i)||(i=[i]);for(let r of n.split(" "))if(r){let s=[],o=2,a=r;for(let d=0;;){if(a=="..."&&d>0&&d+3==r.length){o=1;break}let f=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!f)throw new RangeError("Invalid path: "+r);if(s.push(f[0]=="*"?"":f[0][0]=='"'?JSON.parse(f[0]):f[0]),d+=f[0].length,d==r.length)break;let p=r[d++];if(d==r.length&&p=="!"){o=0;break}if(p!="/")throw new RangeError("Invalid path: "+r);a=r.slice(d)}let l=s.length-1,c=s[l];if(!c)throw new RangeError("Invalid path: "+r);let u=new Wv(i,o,l>0?s.slice(0,l):null);e[c]=u.sort(e[c])}}return kB.add(e)}const kB=new ct;class Wv{constructor(e,n,i,r){this.tags=e,this.mode=n,this.context=i,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Wv.empty=new Wv([],2,null);function _B(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let o of s.tag)n[o.id]=s.class;let{scope:i,all:r=null}=e||{};return{style:s=>{let o=r;for(let a of s)for(let l of a.set){let c=n[l.id];if(c){o=o?o+" "+c:c;break}}return o},scope:i}}function wde(t,e){let n=null;for(let i of t){let r=i.style(e);r&&(n=n?n+" "+r:r)}return n}function xde(t,e,n,i=0,r=t.length){let s=new Sde(i,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),i,r,"",s.highlighters),s.flush(r)}class Sde{constructor(e,n,i){this.at=e,this.highlighters=n,this.span=i,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,i,r,s){let{type:o,from:a,to:l}=e;if(a>=i||l<=n)return;o.isTop&&(s=this.highlighters.filter(p=>!p.scope||p.scope(o)));let c=r,u=kde(e)||Wv.empty,d=wde(s,u.tags);if(d&&(c&&(c+=" "),c+=d,u.mode==1&&(r+=(r?" ":"")+d)),this.startSpan(Math.max(n,a),c),u.opaque)return;let f=e.tree&&e.tree.prop(ct.mounted);if(f&&f.overlay){let p=e.node.enter(f.overlay[0].from+a,1),m=this.highlighters.filter(y=>!y.scope||y.scope(f.tree.type)),g=e.firstChild();for(let y=0,v=a;;y++){let b=y<f.overlay.length?f.overlay[y]:null,w=b?b.from+a:l,k=Math.max(n,v),_=Math.min(i,w);if(k<_&&g)for(;e.from<_&&(this.highlightRange(e,k,_,r,s),this.startSpan(Math.min(_,e.to),c),!(e.to>=w||!e.nextSibling())););if(!b||w>i)break;v=b.to+a,v>n&&(this.highlightRange(p.cursor(),Math.max(n,b.from+a),Math.min(i,v),"",m),this.startSpan(Math.min(i,v),c))}g&&e.parent()}else if(e.firstChild()){f&&(r="");do if(!(e.to<=n)){if(e.from>=i)break;this.highlightRange(e,n,i,r,s),this.startSpan(Math.min(i,e.to),c)}while(e.nextSibling());e.parent()}}}function kde(t){let e=t.type.prop(kB);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const he=Sn.define,xg=he(),fa=he(),nT=he(fa),iT=he(fa),ha=he(),Sg=he(ha),P1=he(ha),Cs=he(),Ul=he(Cs),Ss=he(),ks=he(),ck=he(),xf=he(ck),kg=he(),ze={comment:xg,lineComment:he(xg),blockComment:he(xg),docComment:he(xg),name:fa,variableName:he(fa),typeName:nT,tagName:he(nT),propertyName:iT,attributeName:he(iT),className:he(fa),labelName:he(fa),namespace:he(fa),macroName:he(fa),literal:ha,string:Sg,docString:he(Sg),character:he(Sg),attributeValue:he(Sg),number:P1,integer:he(P1),float:he(P1),bool:he(ha),regexp:he(ha),escape:he(ha),color:he(ha),url:he(ha),keyword:Ss,self:he(Ss),null:he(Ss),atom:he(Ss),unit:he(Ss),modifier:he(Ss),operatorKeyword:he(Ss),controlKeyword:he(Ss),definitionKeyword:he(Ss),moduleKeyword:he(Ss),operator:ks,derefOperator:he(ks),arithmeticOperator:he(ks),logicOperator:he(ks),bitwiseOperator:he(ks),compareOperator:he(ks),updateOperator:he(ks),definitionOperator:he(ks),typeOperator:he(ks),controlOperator:he(ks),punctuation:ck,separator:he(ck),bracket:xf,angleBracket:he(xf),squareBracket:he(xf),paren:he(xf),brace:he(xf),content:Cs,heading:Ul,heading1:he(Ul),heading2:he(Ul),heading3:he(Ul),heading4:he(Ul),heading5:he(Ul),heading6:he(Ul),contentSeparator:he(Cs),list:he(Cs),quote:he(Cs),emphasis:he(Cs),strong:he(Cs),link:he(Cs),monospace:he(Cs),strikethrough:he(Cs),inserted:he(),deleted:he(),changed:he(),invalid:he(),meta:kg,documentMeta:he(kg),annotation:he(kg),processingInstruction:he(kg),definition:Sn.defineModifier("definition"),constant:Sn.defineModifier("constant"),function:Sn.defineModifier("function"),standard:Sn.defineModifier("standard"),local:Sn.defineModifier("local"),special:Sn.defineModifier("special")};for(let t in ze){let e=ze[t];e instanceof Sn&&(e.name=t)}_B([{tag:ze.link,class:"tok-link"},{tag:ze.heading,class:"tok-heading"},{tag:ze.emphasis,class:"tok-emphasis"},{tag:ze.strong,class:"tok-strong"},{tag:ze.keyword,class:"tok-keyword"},{tag:ze.atom,class:"tok-atom"},{tag:ze.bool,class:"tok-bool"},{tag:ze.url,class:"tok-url"},{tag:ze.labelName,class:"tok-labelName"},{tag:ze.inserted,class:"tok-inserted"},{tag:ze.deleted,class:"tok-deleted"},{tag:ze.literal,class:"tok-literal"},{tag:ze.string,class:"tok-string"},{tag:ze.number,class:"tok-number"},{tag:[ze.regexp,ze.escape,ze.special(ze.string)],class:"tok-string2"},{tag:ze.variableName,class:"tok-variableName"},{tag:ze.local(ze.variableName),class:"tok-variableName tok-local"},{tag:ze.definition(ze.variableName),class:"tok-variableName tok-definition"},{tag:ze.special(ze.variableName),class:"tok-variableName2"},{tag:ze.definition(ze.propertyName),class:"tok-propertyName tok-definition"},{tag:ze.typeName,class:"tok-typeName"},{tag:ze.namespace,class:"tok-namespace"},{tag:ze.className,class:"tok-className"},{tag:ze.macroName,class:"tok-macroName"},{tag:ze.propertyName,class:"tok-propertyName"},{tag:ze.operator,class:"tok-operator"},{tag:ze.comment,class:"tok-comment"},{tag:ze.meta,class:"tok-meta"},{tag:ze.invalid,class:"tok-invalid"},{tag:ze.punctuation,class:"tok-punctuation"}]);var M1;const Mu=new ct;function _de(t){return Ee.define({combine:t?e=>e.concat(t):void 0})}const Cde=new ct;class os{constructor(e,n,i=[],r=""){this.data=e,this.name=r,ot.prototype.hasOwnProperty("tree")||Object.defineProperty(ot.prototype,"tree",{get(){return so(this)}}),this.parser=n,this.extension=[Od.of(this),ot.languageData.of((s,o,a)=>{let l=rT(s,o,a),c=l.type.prop(Mu);if(!c)return[];let u=s.facet(c),d=l.type.prop(Cde);if(d){let f=l.resolve(o-l.from,a);for(let p of d)if(p.test(f,s)){let m=s.facet(p.facet);return p.type=="replace"?m:m.concat(u)}}return u})].concat(i)}isActiveAt(e,n,i=-1){return rT(e,n,i).type.prop(Mu)==this.data}findRegions(e){let n=e.facet(Od);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let i=[],r=(s,o)=>{if(s.prop(Mu)==this.data){i.push({from:o,to:o+s.length});return}let a=s.prop(ct.mounted);if(a){if(a.tree.prop(Mu)==this.data){if(a.overlay)for(let l of a.overlay)i.push({from:l.from+o,to:l.to+o});else i.push({from:o,to:o+s.length});return}else if(a.overlay){let l=i.length;if(r(a.tree,a.overlay[0].from+o),i.length>l)return}}for(let l=0;l<s.children.length;l++){let c=s.children[l];c instanceof Yt&&r(c,s.positions[l]+o)}};return r(so(e),0),i}get allowsNesting(){return!0}}os.setState=Ze.define();function rT(t,e,n){let i=t.facet(Od),r=so(t).topNode;if(!i||i.allowsNesting)for(let s=r;s;s=s.enter(e,n,Bn.ExcludeBuffers))s.type.isTop&&(r=s);return r}function so(t){let e=t.field(os.state,!1);return e?e.tree:Yt.empty}class Ede{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let i=this.cursorPos-this.string.length;return e<i||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-i,n-i)}}let Sf=null;class Td{constructor(e,n,i=[],r,s,o,a,l){this.parser=e,this.state=n,this.fragments=i,this.tree=r,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,n,i){return new Td(e,n,[],Yt.empty,0,i,[],null)}startParse(){return this.parser.startParse(new Ede(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=Yt.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(pc.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(pc.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=Sf;Sf=this;try{return e()}finally{Sf=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=sT(e,n.from,n.to);return e}changes(e,n){let{fragments:i,tree:r,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((c,u,d,f)=>l.push({fromA:c,toA:u,fromB:d,toB:f})),i=pc.applyChanges(i,l),r=Yt.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let c of this.skipped){let u=e.mapPos(c.from,1),d=e.mapPos(c.to,-1);u<d&&a.push({from:u,to:d})}}}return new Td(this.parser,n,i,r,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:r,to:s}=this.skipped[i];r<e.to&&s>e.from&&(this.fragments=sT(this.fragments,r,s),this.skipped.splice(i--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends SB{createParse(n,i,r){let s=r[0].from,o=r[r.length-1].to;return{parsedPos:s,advance(){let l=Sf;if(l){for(let c of r)l.tempSkipped.push(c);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new Yt(Ui.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return Sf}}function sT(t,e,n){return pc.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class Rd{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,i)||n.takeTree(),new Rd(n)}static init(e){let n=Math.min(3e3,e.doc.length),i=Td.create(e.facet(Od).parser,e,{from:0,to:n});return i.work(20,n)||i.takeTree(),new Rd(i)}}os.state=Si.define({create:Rd.init,update(t,e){for(let n of e.effects)if(n.is(os.setState))return n.value;return e.startState.facet(Od)!=e.state.facet(Od)?Rd.init(e.state):t.apply(e)}});let CB=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(CB=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const T1=typeof navigator<"u"&&(!((M1=navigator.scheduling)===null||M1===void 0)&&M1.isInputPending)?()=>navigator.scheduling.isInputPending():null,Ade=qn.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(os.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(os.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=CB(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:r}}=this.view,s=i.field(os.state);if(s.tree==s.context.tree&&s.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!T1?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<r&&i.doc.length>r+1e3,l=s.context.work(()=>T1&&T1()||Date.now()>o,r+(a?0:1e5));this.chunkBudget-=Date.now()-n,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:os.setState.of(new Rd(s.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>sr(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Od=Ee.define({combine(t){return t.length?t[0]:null},enables:t=>[os.state,Ade,Te.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});class Nde{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}const Pde=Ee.define(),kE=Ee.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function Dc(t){let e=t.facet(kE);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function uk(t,e){let n="",i=t.tabSize,r=t.facet(kE)[0];if(r=="	"){for(;e>=i;)n+="	",e-=i;r=" "}for(let s=0;s<e;s++)n+=r;return n}function Mde(t,e){t instanceof ot&&(t=new _E(t));for(let i of t.state.facet(Pde)){let r=i(t,e);if(r!==void 0)return r}let n=so(t.state);return n.length>=e?Tde(t,n,e):null}class _E{constructor(e,n={}){this.state=e,this.options=n,this.unit=Dc(e)}lineAt(e,n=1){let i=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:s}=this.options;return r!=null&&r>=i.from&&r<=i.to?s&&r==e?{text:"",from:e}:(n<0?r<e:r<=e)?{text:i.text.slice(r-i.from),from:r}:{text:i.text.slice(0,r-i.from),from:i.from}:i}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:r}=this.lineAt(e,n);return i.slice(e-r,Math.min(i.length,e+100-r))}column(e,n=1){let{text:i,from:r}=this.lineAt(e,n),s=this.countColumn(i,e-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(s+=o-this.countColumn(i,i.search(/\S|$/))),s}countColumn(e,n=e.length){return Bp(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:i,from:r}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let o=s(r);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const EB=new ct;function Tde(t,e,n){let i=e.resolveStack(n),r=e.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(r!=i.node){let s=[];for(let o=r;o&&!(o.from<i.node.from||o.to>i.node.to||o.from==i.node.from&&o.type==i.node.type);o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)i={node:s[o],next:i}}return AB(i,t,n)}function AB(t,e,n){for(let i=t;i;i=i.next){let r=Ode(i.node);if(r)return r(CE.create(e,n,i))}return 0}function Rde(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function Ode(t){let e=t.type.prop(EB);if(e)return e;let n=t.firstChild,i;if(n&&(i=n.type.prop(ct.closedBy))){let r=t.lastChild,s=r&&i.indexOf(r.name)>-1;return o=>jde(o,!0,1,void 0,s&&!Rde(o)?r.from:void 0)}return t.parent==null?Ide:null}function Ide(){return 0}class CE extends _E{constructor(e,n,i){super(e.state,e.options),this.base=e,this.pos=n,this.context=i}get node(){return this.context.node}static create(e,n,i){return new CE(e,n,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(n.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(Dde(i,e))break;n=this.state.doc.lineAt(i.from)}return this.lineIndent(n.from)}continue(){return AB(this.context.next,this.base,this.pos)}}function Dde(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function Lde(t){let e=t.node,n=e.childAfter(e.from),i=e.lastChild;if(!n)return null;let r=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),o=r==null||r<=s.from?s.to:Math.min(s.to,r);for(let a=n.to;;){let l=e.childAfter(a);if(!l||l==i)return null;if(!l.type.isSkipped){if(l.from>=o)return null;let c=/^ */.exec(s.text.slice(n.to-s.from))[0].length;return{from:n.from,to:n.to+c}}a=l.to}}function jde(t,e,n,i,r){let s=t.textAfter,o=s.match(/^\s*/)[0].length,a=i&&s.slice(o,o+i.length)==i||r==t.pos+o,l=Lde(t);return l?a?t.column(l.from):t.column(l.to):t.baseIndent+(a?0:t.unit*n)}const $de=Ee.define(),Fde=new ct;function Bde(t,e,n){let i=so(t);if(i.length<n)return null;let r=i.resolveStack(n,1),s=null;for(let o=r;o;o=o.next){let a=o.node;if(a.to<=n||a.from>n)continue;if(s&&a.from<e)break;let l=a.type.prop(Fde);if(l&&(a.to<i.length-50||i.length==t.doc.length||!zde(a))){let c=l(a,t);c&&c.from<=n&&c.from>=e&&c.to>n&&(s=c)}}return s}function zde(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function NB(t,e,n){for(let i of t.facet($de)){let r=i(t,e,n);if(r)return r}return Bde(t,e,n)}function PB(t,e){let n=e.mapPos(t.from,1),i=e.mapPos(t.to,-1);return n>=i?void 0:{from:n,to:i}}const EE=Ze.define({map:PB}),Cb=Ze.define({map:PB});function MB(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some(i=>i.from<=n&&i.to>=n)||e.push(t.lineBlockAt(n));return e}const em=Si.define({create(){return Qe.none},update(t,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((n,i)=>t=oT(t,n,i)),t=t.map(e.changes);for(let n of e.effects)if(n.is(EE)&&!Ude(t,n.value.from,n.value.to)){let{preparePlaceholder:i}=e.state.facet(IB),r=i?Qe.replace({widget:new Yde(i(e.state,n.value))}):aT;t=t.update({add:[r.range(n.value.from,n.value.to)]})}else n.is(Cb)&&(t=t.update({filter:(i,r)=>n.value.from!=i||n.value.to!=r,filterFrom:n.value.from,filterTo:n.value.to}));return e.selection&&(t=oT(t,e.selection.main.head)),t},provide:t=>Te.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(i,r)=>{n.push(i,r)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let i=t[n++],r=t[n++];if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");e.push(aT.range(i,r))}return Qe.set(e,!0)}});function oT(t,e,n=e){let i=!1;return t.between(e,n,(r,s)=>{r<n&&s>e&&(i=!0)}),i?t.update({filterFrom:e,filterTo:n,filter:(r,s)=>r>=n||s<=e}):t}function TB(t,e,n){var i;let r=null;return(i=t.field(em,!1))===null||i===void 0||i.between(e,n,(s,o)=>{(!r||r.from>s)&&(r={from:s,to:o})}),r}function Ude(t,e,n){let i=!1;return t.between(e,e,(r,s)=>{r==e&&s==n&&(i=!0)}),i}function RB(t,e){return t.field(em,!1)?e:e.concat(Ze.appendConfig.of(qde()))}const Vde=t=>{for(let e of MB(t)){let n=NB(t.state,e.from,e.to);if(n)return t.dispatch({effects:RB(t.state,[EE.of(n),OB(t,n)])}),!0}return!1},Hde=t=>{if(!t.state.field(em,!1))return!1;let e=[];for(let n of MB(t)){let i=TB(t.state,n.from,n.to);i&&e.push(Cb.of(i),OB(t,i,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function OB(t,e,n=!0){let i=t.state.doc.lineAt(e.from).number,r=t.state.doc.lineAt(e.to).number;return Te.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${i} ${t.state.phrase("to")} ${r}.`)}const Wde=t=>{let{state:e}=t,n=[];for(let i=0;i<e.doc.length;){let r=t.lineBlockAt(i),s=NB(e,r.from,r.to);s&&n.push(EE.of(s)),i=(s?t.lineBlockAt(s.to):r).to+1}return n.length&&t.dispatch({effects:RB(t.state,n)}),!!n.length},Gde=t=>{let e=t.state.field(em,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,(i,r)=>{n.push(Cb.of({from:i,to:r}))}),t.dispatch({effects:n}),!0},Kde={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},IB=Ee.define({combine(t){return xl(t,Kde)}});function qde(t){return[em,Xde]}function DB(t,e){let{state:n}=t,i=n.facet(IB),r=o=>{let a=t.lineBlockAt(t.posAtDOM(o.target)),l=TB(t.state,a.from,a.to);l&&t.dispatch({effects:Cb.of(l)}),o.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(t,r,e);let s=document.createElement("span");return s.textContent=i.placeholderText,s.setAttribute("aria-label",n.phrase("folded code")),s.title=n.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=r,s}const aT=Qe.replace({widget:new class extends Sl{toDOM(t){return DB(t,null)}}});class Yde extends Sl{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return DB(e,this.value)}}const Xde=Te.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Eb{constructor(e,n){this.specs=e;let i;function r(a){let l=al.newName();return(i||(i=Object.create(null)))["."+l]=a,l}const s=typeof n.all=="string"?n.all:n.all?r(n.all):void 0,o=n.scope;this.scope=o instanceof os?a=>a.prop(Mu)==o.data:o?a=>a==o:void 0,this.style=_B(e.map(a=>({tag:a.tag,class:a.class||r(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=i?new al(i):null,this.themeType=n.themeType}static define(e,n){return new Eb(e,n||{})}}const dk=Ee.define(),Jde=Ee.define({combine(t){return t.length?[t[0]]:null}});function R1(t){let e=t.facet(dk);return e.length?e:t.facet(Jde)}function Zde(t,e){let n=[efe],i;return t instanceof Eb&&(t.module&&n.push(Te.styleModule.of(t.module)),i=t.themeType),i?n.push(dk.computeN([Te.darkTheme],r=>r.facet(Te.darkTheme)==(i=="dark")?[t]:[])):n.push(dk.of(t)),n}class Qde{constructor(e){this.markCache=Object.create(null),this.tree=so(e.state),this.decorations=this.buildDeco(e,R1(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=so(e.state),i=R1(e.state),r=i!=R1(e.startState),{viewport:s}=e.view,o=e.changes.mapPos(this.decoratedTo,1);n.length<s.to&&!r&&n.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(n!=this.tree||e.viewportChanged||r)&&(this.tree=n,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=s.to)}buildDeco(e,n){if(!n||!this.tree.length)return Qe.none;let i=new ol;for(let{from:r,to:s}of e.visibleRanges)xde(this.tree,n,(o,a,l)=>{i.add(o,a,this.markCache[l]||(this.markCache[l]=Qe.mark({class:l})))},r,s);return i.finish()}}const efe=$p.high(qn.fromClass(Qde,{decorations:t=>t.decorations})),tfe=1e4,nfe="()[]{}",ife=new ct;function fk(t,e,n){let i=t.prop(e<0?ct.openedBy:ct.closedBy);if(i)return i;if(t.name.length==1){let r=n.indexOf(t.name);if(r>-1&&r%2==(e<0?1:0))return[n[r+e]]}return null}function hk(t){let e=t.type.prop(ife);return e?e(t.node):t}function _g(t,e,n,i={}){let r=i.maxScanDistance||tfe,s=i.brackets||nfe,o=so(t),a=o.resolveInner(e,n);for(let l=a;l;l=l.parent){let c=fk(l.type,n,s);if(c&&l.from<l.to){let u=hk(l);if(u&&(n>0?e>=u.from&&e<u.to:e>u.from&&e<=u.to))return rfe(t,e,n,l,u,c,s)}}return sfe(t,e,n,o,a.type,r,s)}function rfe(t,e,n,i,r,s,o){let a=i.parent,l={from:r.from,to:r.to},c=0,u=a==null?void 0:a.cursor();if(u&&(n<0?u.childBefore(i.from):u.childAfter(i.to)))do if(n<0?u.to<=i.from:u.from>=i.to){if(c==0&&s.indexOf(u.type.name)>-1&&u.from<u.to){let d=hk(u);return{start:l,end:d?{from:d.from,to:d.to}:void 0,matched:!0}}else if(fk(u.type,n,o))c++;else if(fk(u.type,-n,o)){if(c==0){let d=hk(u);return{start:l,end:d&&d.from<d.to?{from:d.from,to:d.to}:void 0,matched:!1}}c--}}while(n<0?u.prevSibling():u.nextSibling());return{start:l,matched:!1}}function sfe(t,e,n,i,r,s,o){let a=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=n>0)return null;let c={from:n<0?e-1:e,to:n>0?e+1:e},u=t.doc.iterRange(e,n>0?t.doc.length:0),d=0;for(let f=0;!u.next().done&&f<=s;){let p=u.value;n<0&&(f+=p.length);let m=e+f*n;for(let g=n>0?0:p.length-1,y=n>0?p.length:-1;g!=y;g+=n){let v=o.indexOf(p[g]);if(!(v<0||i.resolveInner(m+g,1).type!=r))if(v%2==0==n>0)d++;else{if(d==1)return{start:c,end:{from:m+g,to:m+g+1},matched:v>>1==l>>1};d--}}n>0&&(f+=p.length)}return u.done?{start:c,matched:!1}:null}function lT(t,e,n,i=0,r=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let s=r;for(let o=i;o<e;o++)t.charCodeAt(o)==9?s+=n-s%n:s++;return s}class LB{constructor(e,n,i,r){this.string=e,this.tabSize=n,this.indentUnit=i,this.overrideIndent=r,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let n=this.string.charAt(this.pos),i;if(typeof e=="string"?i=n==e:i=n&&(e instanceof RegExp?e.test(n):e(n)),i)return++this.pos,n}eatWhile(e){let n=this.pos;for(;this.eat(e););return this.pos>n}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let n=this.string.indexOf(e,this.pos);if(n>-1)return this.pos=n,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=lT(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:lT(this.string,null,this.tabSize)}match(e,n,i){if(typeof e=="string"){let r=o=>i?o.toLowerCase():o,s=this.string.substr(this.pos,e.length);return r(s)==r(e)?(n!==!1&&(this.pos+=e.length),!0):null}else{let r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&n!==!1&&(this.pos+=r[0].length),r)}}current(){return this.string.slice(this.start,this.pos)}}function ofe(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||afe,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||PE,mergeTokens:t.mergeTokens!==!1}}function afe(t){if(typeof t!="object")return t;let e={};for(let n in t){let i=t[n];e[n]=i instanceof Array?i.slice():i}return e}const cT=new WeakMap;class AE extends os{constructor(e){let n=_de(e.languageData),i=ofe(e),r,s=new class extends SB{createParse(o,a,l){return new cfe(r,o,a,l)}};super(n,s,[],e.name),this.topNode=ffe(n,this),r=this,this.streamParser=i,this.stateAfter=new ct({perNode:!0}),this.tokenTable=e.tokenTable?new BB(i.tokenTable):dfe}static define(e){return new AE(e)}getIndent(e){let n,{overrideIndentation:i}=e.options;i&&(n=cT.get(e.state),n!=null&&n<e.pos-1e4&&(n=void 0));let r=NE(this,e.node.tree,e.node.from,e.node.from,n??e.pos),s,o;if(r?(o=r.state,s=r.pos+1):(o=this.streamParser.startState(e.unit),s=e.node.from),e.pos-s>1e4)return null;for(;s<e.pos;){let l=e.state.doc.lineAt(s),c=Math.min(e.pos,l.to);if(l.length){let u=i?i(l.from):-1,d=new LB(l.text,e.state.tabSize,e.unit,u<0?void 0:u);for(;d.pos<c-l.from;)$B(this.streamParser.token,d,o)}else this.streamParser.blankLine(o,e.unit);if(c==e.pos)break;s=l.to+1}let a=e.lineAt(e.pos);return i&&n==null&&cT.set(e.state,a.from),this.streamParser.indent(o,/^\s*(.*)/.exec(a.text)[1],e)}get allowsNesting(){return!1}}function NE(t,e,n,i,r){let s=n>=i&&n+e.length<=r&&e.prop(t.stateAfter);if(s)return{state:t.streamParser.copyState(s),pos:n+e.length};for(let o=e.children.length-1;o>=0;o--){let a=e.children[o],l=n+e.positions[o],c=a instanceof Yt&&l<r&&NE(t,a,l,i,r);if(c)return c}return null}function jB(t,e,n,i,r){if(r&&n<=0&&i>=e.length)return e;!r&&n==0&&e.type==t.topNode&&(r=!0);for(let s=e.children.length-1;s>=0;s--){let o=e.positions[s],a=e.children[s],l;if(o<i&&a instanceof Yt){if(!(l=jB(t,a,n-o,i-o,r)))break;return r?new Yt(e.type,e.children.slice(0,s).concat(l),e.positions.slice(0,s+1),o+l.length):l}}return null}function lfe(t,e,n,i,r){for(let s of e){let o=s.from+(s.openStart?25:0),a=s.to-(s.openEnd?25:0),l=o<=n&&a>n&&NE(t,s.tree,0-s.offset,n,a),c;if(l&&l.pos<=i&&(c=jB(t,s.tree,n+s.offset,l.pos+s.offset,!1)))return{state:l.state,tree:c}}return{state:t.streamParser.startState(r?Dc(r):4),tree:Yt.empty}}class cfe{constructor(e,n,i,r){this.lang=e,this.input=n,this.fragments=i,this.ranges=r,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=r[r.length-1].to;let s=Td.get(),o=r[0].from,{state:a,tree:l}=lfe(e,i,o,this.to,s==null?void 0:s.state);this.state=a,this.parsedPos=this.chunkStart=o+l.length;for(let c=0;c<l.children.length;c++)this.chunks.push(l.children[c]),this.chunkPos.push(l.positions[c]);s&&this.parsedPos<s.viewport.from-1e5&&r.some(c=>c.from<=s.viewport.from&&c.to>=s.viewport.from)&&(this.state=this.lang.streamParser.startState(Dc(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=Td.get(),n=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),i=Math.min(n,this.chunkStart+2048);for(e&&(i=Math.min(i,e.viewport.to));this.parsedPos<i;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=n?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,n),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let n=this.input.chunk(e);if(this.input.lineChunks)n==`
`&&(n="");else{let i=n.indexOf(`
`);i>-1&&(n=n.slice(0,i))}return e+n.length<=this.to?n:n.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,n=this.lineAfter(e),i=e+n.length;for(let r=this.rangeIndex;;){let s=this.ranges[r].to;if(s>=i||(n=n.slice(0,s-(i-n.length)),r++,r==this.ranges.length))break;let o=this.ranges[r].from,a=this.lineAfter(o);n+=a,i=o+a.length}return{line:n,end:i}}skipGapsTo(e,n,i){for(;;){let r=this.ranges[this.rangeIndex].to,s=e+n;if(i>0?r>s:r>=s)break;let o=this.ranges[++this.rangeIndex].from;n+=o-r}return n}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,n,i,r){let s=4;if(this.ranges.length>1){r=this.skipGapsTo(n,r,1),n+=r;let a=this.chunk.length;r=this.skipGapsTo(i,r,-1),i+=r,s+=this.chunk.length-a}let o=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&s==4&&o>=0&&this.chunk[o]==e&&this.chunk[o+2]==n?this.chunk[o+2]=i:this.chunk.push(e,n,i,s),r}parseLine(e){let{line:n,end:i}=this.nextLine(),r=0,{streamParser:s}=this.lang,o=new LB(n,e?e.state.tabSize:4,e?Dc(e.state):2);if(o.eol())s.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let a=$B(s.token,o,this.state);if(a&&(r=this.emitToken(this.lang.tokenTable.resolve(a),this.parsedPos+o.start,this.parsedPos+o.pos,r)),o.start>1e4)break}this.parsedPos=i,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=Yt.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:ufe,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new Yt(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new Yt(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function $B(t,e,n){e.start=e.pos;for(let i=0;i<10;i++){let r=t(e,n);if(e.pos>e.start)return r}throw new Error("Stream parser failed to advance stream.")}const PE=Object.create(null),xp=[Ui.none],ufe=new bE(xp),uT=[],dT=Object.create(null),FB=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])FB[t]=zB(PE,e);class BB{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),FB)}resolve(e){return e?this.table[e]||(this.table[e]=zB(this.extra,e)):0}}const dfe=new BB(PE);function O1(t,e){uT.indexOf(t)>-1||(uT.push(t),console.warn(e))}function zB(t,e){let n=[];for(let a of e.split(" ")){let l=[];for(let c of a.split(".")){let u=t[c]||ze[c];u?typeof u=="function"?l.length?l=l.map(u):O1(c,`Modifier ${c} used at start of tag`):l.length?O1(c,`Tag ${c} used as modifier`):l=Array.isArray(u)?u:[u]:O1(c,`Unknown highlighting tag ${c}`)}for(let c of l)n.push(c)}if(!n.length)return 0;let i=e.replace(/ /g,"_"),r=i+" "+n.map(a=>a.id),s=dT[r];if(s)return s.id;let o=dT[r]=Ui.define({id:xp.length,name:i,props:[bde({[i]:n})]});return xp.push(o),o.id}function ffe(t,e){let n=Ui.define({id:xp.length,name:"Document",props:[Mu.add(()=>t),EB.add(()=>i=>e.getIndent(i))],top:!0});return xp.push(n),n}Ft.RTL,Ft.LTR;const hfe=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),i=ME(t.state,n.from);return i.line?pfe(t):i.block?yfe(t):!1};function tm(t,e){return({state:n,dispatch:i})=>{if(n.readOnly)return!1;let r=t(e,n);return r?(i(n.update(r)),!0):!1}}const pfe=tm(TE,0),mfe=tm(TE,1),gfe=tm(TE,2),vfe=tm(UB,0),yfe=tm((t,e)=>UB(t,e,wfe(e)),0);function ME(t,e){let n=t.languageDataAt("commentTokens",e,1);return n.length?n[0]:{}}const kf=50;function bfe(t,{open:e,close:n},i,r){let s=t.sliceDoc(i-kf,i),o=t.sliceDoc(r,r+kf),a=/\s*$/.exec(s)[0].length,l=/^\s*/.exec(o)[0].length,c=s.length-a;if(s.slice(c-e.length,c)==e&&o.slice(l,l+n.length)==n)return{open:{pos:i-a,margin:a&&1},close:{pos:r+l,margin:l&&1}};let u,d;r-i<=2*kf?u=d=t.sliceDoc(i,r):(u=t.sliceDoc(i,i+kf),d=t.sliceDoc(r-kf,r));let f=/^\s*/.exec(u)[0].length,p=/\s*$/.exec(d)[0].length,m=d.length-p-n.length;return u.slice(f,f+e.length)==e&&d.slice(m,m+n.length)==n?{open:{pos:i+f+e.length,margin:/\s/.test(u.charAt(f+e.length))?1:0},close:{pos:r-p-n.length,margin:/\s/.test(d.charAt(m-1))?1:0}}:null}function wfe(t){let e=[];for(let n of t.selection.ranges){let i=t.doc.lineAt(n.from),r=n.to<=i.to?i:t.doc.lineAt(n.to);r.from>i.from&&r.from==n.to&&(r=n.to==i.to+1?i:t.doc.lineAt(n.to-1));let s=e.length-1;s>=0&&e[s].to>i.from?e[s].to=r.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:r.to})}return e}function UB(t,e,n=e.selection.ranges){let i=n.map(s=>ME(e,s.from).block);if(!i.every(s=>s))return null;let r=n.map((s,o)=>bfe(e,i[o],s.from,s.to));if(t!=2&&!r.every(s=>s))return{changes:e.changes(n.map((s,o)=>r[o]?[]:[{from:s.from,insert:i[o].open+" "},{from:s.to,insert:" "+i[o].close}]))};if(t!=1&&r.some(s=>s)){let s=[];for(let o=0,a;o<r.length;o++)if(a=r[o]){let l=i[o],{open:c,close:u}=a;s.push({from:c.pos-l.open.length,to:c.pos+c.margin},{from:u.pos-u.margin,to:u.pos+l.close.length})}return{changes:s}}return null}function TE(t,e,n=e.selection.ranges){let i=[],r=-1;for(let{from:s,to:o}of n){let a=i.length,l=1e9,c=ME(e,s).line;if(c){for(let u=s;u<=o;){let d=e.doc.lineAt(u);if(d.from>r&&(s==o||o>d.from)){r=d.from;let f=/^\s*/.exec(d.text)[0].length,p=f==d.length,m=d.text.slice(f,f+c.length)==c?f:-1;f<d.text.length&&f<l&&(l=f),i.push({line:d,comment:m,token:c,indent:f,empty:p,single:!1})}u=d.to+1}if(l<1e9)for(let u=a;u<i.length;u++)i[u].indent<i[u].line.text.length&&(i[u].indent=l);i.length==a+1&&(i[a].single=!0)}}if(t!=2&&i.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:a,token:l,indent:c,empty:u,single:d}of i)(d||!u)&&s.push({from:a.from+c,insert:l+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&i.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:a,token:l}of i)if(a>=0){let c=o.from+a,u=c+l.length;o.text[u-o.from]==" "&&u++,s.push({from:c,to:u})}return{changes:s}}return null}const pk=Yo.define(),xfe=Yo.define(),Sfe=Ee.define(),VB=Ee.define({combine(t){return xl(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(i,r)=>e(i,r)||n(i,r)})}}),HB=Si.define({create(){return Ws.empty},update(t,e){let n=e.state.facet(VB),i=e.annotation(pk);if(i){let l=ji.fromTransaction(e,i.selection),c=i.side,u=c==0?t.undone:t.done;return l?u=Gv(u,u.length,n.minDepth,l):u=KB(u,e.startState.selection),new Ws(c==0?i.rest:u,c==0?u:i.rest)}let r=e.annotation(xfe);if((r=="full"||r=="before")&&(t=t.isolate()),e.annotation(_n.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let s=ji.fromTransaction(e),o=e.annotation(_n.time),a=e.annotation(_n.userEvent);return s?t=t.addChanges(s,o,a,n,e):e.selection&&(t=t.addSelection(e.startState.selection,o,a,n.newGroupDelay)),(r=="full"||r=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new Ws(t.done.map(ji.fromJSON),t.undone.map(ji.fromJSON))}});function kfe(t={}){return[HB,VB.of(t),Te.domEventHandlers({beforeinput(e,n){let i=e.inputType=="historyUndo"?WB:e.inputType=="historyRedo"?mk:null;return i?(e.preventDefault(),i(n)):!1}})]}function RE(t,e){return function({state:n,dispatch:i}){if(!e&&n.readOnly)return!1;let r=n.field(HB,!1);if(!r)return!1;let s=r.pop(t,n,e);return s?(i(s),!0):!1}}const WB=RE(0,!1),mk=RE(1,!1),_fe=RE(0,!0);class ji{constructor(e,n,i,r,s){this.changes=e,this.effects=n,this.mapped=i,this.startSelection=r,this.selectionsAfter=s}setSelAfter(e){return new ji(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(e){return new ji(e.changes&&wn.fromJSON(e.changes),[],e.mapped&&Zs.fromJSON(e.mapped),e.startSelection&&re.fromJSON(e.startSelection),e.selectionsAfter.map(re.fromJSON))}static fromTransaction(e,n){let i=Mr;for(let r of e.startState.facet(Sfe)){let s=r(e);s.length&&(i=i.concat(s))}return!i.length&&e.changes.empty?null:new ji(e.changes.invert(e.startState.doc),i,void 0,n||e.startState.selection,Mr)}static selection(e){return new ji(void 0,Mr,void 0,void 0,e)}}function Gv(t,e,n,i){let r=e+1>n+20?e-n-1:0,s=t.slice(r,e);return s.push(i),s}function Cfe(t,e){let n=[],i=!1;return t.iterChangedRanges((r,s)=>n.push(r,s)),e.iterChangedRanges((r,s,o,a)=>{for(let l=0;l<n.length;){let c=n[l++],u=n[l++];a>=c&&o<=u&&(i=!0)}}),i}function Efe(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,i)=>n.empty!=e.ranges[i].empty).length===0}function GB(t,e){return t.length?e.length?t.concat(e):t:e}const Mr=[],Afe=200;function KB(t,e){if(t.length){let n=t[t.length-1],i=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-Afe));return i.length&&i[i.length-1].eq(e)?t:(i.push(e),Gv(t,t.length-1,1e9,n.setSelAfter(i)))}else return[ji.selection([e])]}function Nfe(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function I1(t,e){if(!t.length)return t;let n=t.length,i=Mr;for(;n;){let r=Pfe(t[n-1],e,i);if(r.changes&&!r.changes.empty||r.effects.length){let s=t.slice(0,n);return s[n-1]=r,s}else e=r.mapped,n--,i=r.selectionsAfter}return i.length?[ji.selection(i)]:Mr}function Pfe(t,e,n){let i=GB(t.selectionsAfter.length?t.selectionsAfter.map(a=>a.map(e)):Mr,n);if(!t.changes)return ji.selection(i);let r=t.changes.map(e),s=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(s):s;return new ji(r,Ze.mapEffects(t.effects,e),o,t.startSelection.map(s),i)}const Mfe=/^(input\.type|delete)($|\.)/;class Ws{constructor(e,n,i=0,r=void 0){this.done=e,this.undone=n,this.prevTime=i,this.prevUserEvent=r}isolate(){return this.prevTime?new Ws(this.done,this.undone):this}addChanges(e,n,i,r,s){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!i||Mfe.test(i))&&(!a.selectionsAfter.length&&n-this.prevTime<r.newGroupDelay&&r.joinToEvent(s,Cfe(a.changes,e.changes))||i=="input.type.compose")?o=Gv(o,o.length-1,r.minDepth,new ji(e.changes.compose(a.changes),GB(Ze.mapEffects(e.effects,a.changes),a.effects),a.mapped,a.startSelection,Mr)):o=Gv(o,o.length,r.minDepth,e),new Ws(o,Mr,n,i)}addSelection(e,n,i,r){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:Mr;return s.length>0&&n-this.prevTime<r&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&Efe(s[s.length-1],e)?this:new Ws(KB(this.done,e),this.undone,n,i)}addMapping(e){return new Ws(I1(this.done,e),I1(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,i){let r=e==0?this.done:this.undone;if(r.length==0)return null;let s=r[r.length-1],o=s.selectionsAfter[0]||n.selection;if(i&&s.selectionsAfter.length)return n.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:pk.of({side:e,rest:Nfe(r),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let a=r.length==1?Mr:r.slice(0,r.length-1);return s.mapped&&(a=I1(a,s.mapped)),n.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:pk.of({side:e,rest:a,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Ws.empty=new Ws(Mr,Mr);function nm(t,e){return re.create(t.ranges.map(e),t.mainIndex)}function Al(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Bc({state:t,dispatch:e},n){let i=nm(t.selection,n);return i.eq(t.selection,!0)?!1:(e(Al(t,i)),!0)}function Ab(t,e){return re.cursor(e?t.to:t.from)}function qB(t,e){return Bc(t,n=>n.empty?t.moveByChar(n,e):Ab(n,e))}function Nl(t){return t.textDirectionAt(t.state.selection.main.head)==Ft.LTR}const fT=t=>qB(t,!Nl(t)),hT=t=>qB(t,Nl(t));function YB(t,e){return Bc(t,n=>n.empty?t.moveByGroup(n,e):Ab(n,e))}const Tfe=t=>YB(t,!Nl(t)),Rfe=t=>YB(t,Nl(t));function XB(t,e){return Bc(t,n=>{if(!n.empty)return Ab(n,e);let i=t.moveVertically(n,e);return i.head!=n.head?i:t.moveToLineBoundary(n,e)})}const pT=t=>XB(t,!1),mT=t=>XB(t,!0);function JB(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,i=0,r;if(e){for(let s of t.state.facet(Te.scrollMargins)){let o=s(t);o!=null&&o.top&&(n=Math.max(o==null?void 0:o.top,n)),o!=null&&o.bottom&&(i=Math.max(o==null?void 0:o.bottom,i))}r=t.scrollDOM.clientHeight-n-i}else r=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:i,selfScroll:e,height:Math.max(t.defaultLineHeight,r-5)}}function ZB(t,e){let n=JB(t),{state:i}=t,r=nm(i.selection,o=>o.empty?t.moveVertically(o,e,n.height):Ab(o,e));if(r.eq(i.selection))return!1;let s;if(n.selfScroll){let o=t.coordsAtPos(i.selection.main.head),a=t.scrollDOM.getBoundingClientRect(),l=a.top+n.marginTop,c=a.bottom-n.marginBottom;o&&o.top>l&&o.bottom<c&&(s=Te.scrollIntoView(r.main.head,{y:"start",yMargin:o.top-l}))}return t.dispatch(Al(i,r),{effects:s}),!0}const D1=t=>ZB(t,!1),L1=t=>ZB(t,!0);function Nb(t,e,n){let i=t.lineBlockAt(e.head),r=t.moveToLineBoundary(e,n);if(r.head==e.head&&r.head!=(n?i.to:i.from)&&(r=t.moveToLineBoundary(e,n,!1)),!n&&r.head==i.from&&i.length){let s=/^\s*/.exec(t.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;s&&e.head!=i.from+s&&(r=re.cursor(i.from+s))}return r}const gT=t=>Bc(t,e=>Nb(t,e,!0)),vT=t=>Bc(t,e=>Nb(t,e,!1)),Ofe=t=>Bc(t,e=>re.cursor(t.lineBlockAt(e.head).from,1)),Ife=t=>Bc(t,e=>re.cursor(t.lineBlockAt(e.head).to,-1));function Dfe(t,e,n){let i=!1,r=nm(t.selection,s=>{let o=_g(t,s.head,-1)||_g(t,s.head,1)||s.head>0&&_g(t,s.head-1,1)||s.head<t.doc.length&&_g(t,s.head+1,-1);if(!o||!o.end)return s;i=!0;let a=o.start.from==s.head?o.end.to:o.end.from;return re.cursor(a)});return i?(e(Al(t,r)),!0):!1}const Lfe=({state:t,dispatch:e})=>Dfe(t,e);function Pl(t,e){let n=nm(t.state.selection,i=>{let r=e(i);return re.range(i.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(Al(t.state,n)),!0)}function QB(t,e){return Pl(t,n=>t.moveByChar(n,e))}const yT=t=>QB(t,!Nl(t)),bT=t=>QB(t,Nl(t));function ez(t,e){return Pl(t,n=>t.moveByGroup(n,e))}const jfe=t=>ez(t,!Nl(t)),$fe=t=>ez(t,Nl(t));function tz(t,e){return Pl(t,n=>t.moveVertically(n,e))}const wT=t=>tz(t,!1),xT=t=>tz(t,!0);function nz(t,e){return Pl(t,n=>t.moveVertically(n,e,JB(t).height))}const ST=t=>nz(t,!1),kT=t=>nz(t,!0),_T=t=>Pl(t,e=>Nb(t,e,!0)),CT=t=>Pl(t,e=>Nb(t,e,!1)),Ffe=t=>Pl(t,e=>re.cursor(t.lineBlockAt(e.head).from)),Bfe=t=>Pl(t,e=>re.cursor(t.lineBlockAt(e.head).to)),ET=({state:t,dispatch:e})=>(e(Al(t,{anchor:0})),!0),AT=({state:t,dispatch:e})=>(e(Al(t,{anchor:t.doc.length})),!0),NT=({state:t,dispatch:e})=>(e(Al(t,{anchor:t.selection.main.anchor,head:0})),!0),PT=({state:t,dispatch:e})=>(e(Al(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),zfe=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),Ufe=({state:t,dispatch:e})=>{let n=Mb(t).map(({from:i,to:r})=>re.range(i,Math.min(r+1,t.doc.length)));return e(t.update({selection:re.create(n),userEvent:"select"})),!0};function Pb(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:i}=t,r=i.changeByRange(s=>{let{from:o,to:a}=s;if(o==a){let l=e(s);l<o?(n="delete.backward",l=Cg(t,l,!1)):l>o&&(n="delete.forward",l=Cg(t,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=Cg(t,o,!1),a=Cg(t,a,!0);return o==a?{range:s}:{changes:{from:o,to:a},range:re.cursor(o,o<s.head?-1:1)}});return r.changes.empty?!1:(t.dispatch(i.update(r,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?Te.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function Cg(t,e,n){if(t instanceof Te)for(let i of t.state.facet(Te.atomicRanges).map(r=>r(t)))i.between(e,e,(r,s)=>{r<e&&s>e&&(e=n?s:r)});return e}const iz=(t,e,n)=>Pb(t,i=>{let r=i.from,{state:s}=t,o=s.doc.lineAt(r),a,l;if(n&&!e&&r>o.from&&r<o.from+200&&!/[^ \t]/.test(a=o.text.slice(0,r-o.from))){if(a[a.length-1]=="	")return r-1;let c=Bp(a,s.tabSize),u=c%Dc(s)||Dc(s);for(let d=0;d<u&&a[a.length-1-d]==" ";d++)r--;l=r}else l=Vn(o.text,r-o.from,e,e)+o.from,l==r&&o.number!=(e?s.doc.lines:1)?l+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(l-o.from,r-o.from))&&(l=Vn(o.text,l-o.from,!1,!1)+o.from);return l}),j1=t=>iz(t,!1,!0),MT=t=>iz(t,!0,!1),rz=(t,e)=>Pb(t,n=>{let i=n.head,{state:r}=t,s=r.doc.lineAt(i),o=r.charCategorizer(i);for(let a=null;;){if(i==(e?s.to:s.from)){i==n.head&&s.number!=(e?r.doc.lines:1)&&(i+=e?1:-1);break}let l=Vn(s.text,i-s.from,e)+s.from,c=s.text.slice(Math.min(i,l)-s.from,Math.max(i,l)-s.from),u=o(c);if(a!=null&&u!=a)break;(c!=" "||i!=n.head)&&(a=u),i=l}return i}),TT=t=>rz(t,!1),Vfe=t=>rz(t,!0),RT=t=>Pb(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),Hfe=t=>Pb(t,e=>{let n=t.lineBlockAt(e.head).from;return e.head>n?n:Math.max(0,e.head-1)}),Wfe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:ut.of(["",""])},range:re.cursor(i.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},Gfe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>{if(!i.empty||i.from==0||i.from==t.doc.length)return{range:i};let r=i.from,s=t.doc.lineAt(r),o=r==s.from?r-1:Vn(s.text,r-s.from,!1)+s.from,a=r==s.to?r+1:Vn(s.text,r-s.from,!0)+s.from;return{changes:{from:o,to:a,insert:t.doc.slice(r,a).append(t.doc.slice(o,r))},range:re.cursor(a)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Mb(t){let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.from),s=t.doc.lineAt(i.to);if(!i.empty&&i.to==s.from&&(s=t.doc.lineAt(i.to-1)),n>=r.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(i)}else e.push({from:r.from,to:s.to,ranges:[i]});n=s.number+1}return e}function sz(t,e,n){if(t.readOnly)return!1;let i=[],r=[];for(let s of Mb(t)){if(n?s.to==t.doc.length:s.from==0)continue;let o=t.doc.lineAt(n?s.to+1:s.from-1),a=o.length+1;if(n){i.push({from:s.to,to:o.to},{from:s.from,insert:o.text+t.lineBreak});for(let l of s.ranges)r.push(re.range(Math.min(t.doc.length,l.anchor+a),Math.min(t.doc.length,l.head+a)))}else{i.push({from:o.from,to:s.from},{from:s.to,insert:t.lineBreak+o.text});for(let l of s.ranges)r.push(re.range(l.anchor-a,l.head-a))}}return i.length?(e(t.update({changes:i,scrollIntoView:!0,selection:re.create(r,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const Kfe=({state:t,dispatch:e})=>sz(t,e,!1),qfe=({state:t,dispatch:e})=>sz(t,e,!0);function oz(t,e,n){if(t.readOnly)return!1;let i=[];for(let r of Mb(t))n?i.push({from:r.from,insert:t.doc.slice(r.from,r.to)+t.lineBreak}):i.push({from:r.to,insert:t.lineBreak+t.doc.slice(r.from,r.to)});return e(t.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Yfe=({state:t,dispatch:e})=>oz(t,e,!1),Xfe=({state:t,dispatch:e})=>oz(t,e,!0),Jfe=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(Mb(e).map(({from:r,to:s})=>(r>0?r--:s<e.doc.length&&s++,{from:r,to:s}))),i=nm(e.selection,r=>{let s;if(t.lineWrapping){let o=t.lineBlockAt(r.head),a=t.coordsAtPos(r.head,r.assoc||1);a&&(s=o.bottom+t.documentTop-a.bottom+t.defaultLineHeight/2)}return t.moveVertically(r,!0,s)}).map(n);return t.dispatch({changes:n,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function Zfe(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=so(t).resolveInner(e),i=n.childBefore(e),r=n.childAfter(e),s;return i&&r&&i.to<=e&&r.from>=e&&(s=i.type.prop(ct.closedBy))&&s.indexOf(r.name)>-1&&t.doc.lineAt(i.to).from==t.doc.lineAt(r.from).from&&!/\S/.test(t.sliceDoc(i.to,r.from))?{from:i.to,to:r.from}:null}const OT=Qfe(!1);function Qfe(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let i=e.changeByRange(r=>{let{from:s,to:o}=r,a=e.doc.lineAt(s),l=!t&&s==o&&Zfe(e,s);t&&(s=o=(o<=a.to?a:e.doc.lineAt(o)).to);let c=new _E(e,{simulateBreak:s,simulateDoubleBreak:!!l}),u=Mde(c,s);for(u==null&&(u=Bp(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:s,to:o}=l:s>a.from&&s<a.from+100&&!/\S/.test(a.text.slice(0,s))&&(s=a.from);let d=["",uk(e,u)];return l&&d.push(uk(e,c.lineIndent(a.from,-1))),{changes:{from:s,to:o,insert:ut.of(d)},range:re.cursor(s+1+d[1].length)}});return n(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function az(t,e){let n=-1;return t.changeByRange(i=>{let r=[];for(let o=i.from;o<=i.to;){let a=t.doc.lineAt(o);a.number>n&&(i.empty||i.to>a.from)&&(e(a,r,i),n=a.number),o=a.to+1}let s=t.changes(r);return{changes:r,range:re.range(s.mapPos(i.anchor,1),s.mapPos(i.head,1))}})}const gk=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(az(t,(n,i)=>{i.push({from:n.from,insert:t.facet(kE)})}),{userEvent:"input.indent"})),!0),IT=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(az(t,(n,i)=>{let r=/^\s*/.exec(n.text)[0];if(!r)return;let s=Bp(r,t.tabSize),o=0,a=uk(t,Math.max(0,s-Dc(t)));for(;o<r.length&&o<a.length&&r.charCodeAt(o)==a.charCodeAt(o);)o++;i.push({from:n.from+o,to:n.from+r.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0),DT=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class Sp{constructor(e,n,i=0,r=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,r),this.bufferStart=i,this.normalize=s?a=>s(DT(a)):DT,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return _r(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=nC(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=No(e);let r=this.normalize(n);if(r.length)for(let s=0,o=i;;s++){let a=r.charCodeAt(s),l=this.match(a,o,this.bufferPos+this.bufferStart);if(s==r.length-1){if(l)return this.value=l,this;break}o==i&&s<n.length&&n.charCodeAt(s)==a&&o++}}}match(e,n,i){let r=null;for(let s=0;s<this.matches.length;s+=2){let o=this.matches[s],a=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?r={from:this.matches[s+1],to:i}:(this.matches[s]++,a=!0)),a||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?r={from:n,to:i}:this.matches.push(1,n)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferStart)&&(r=null),r}}typeof Symbol<"u"&&(Sp.prototype[Symbol.iterator]=function(){return this});const lz={from:-1,to:-1,match:/.*/.exec("")},OE="gm"+(/x/.unicode==null?"":"u");class cz{constructor(e,n,i,r=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=lz,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new uz(e,n,i,r,s);this.re=new RegExp(n,OE+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.iter=e.iter();let o=e.lineAt(r);this.curLineStart=o.from,this.matchPos=Kv(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let i=this.curLineStart+n.index,r=i+n[0].length;if(this.matchPos=Kv(this.text,r+(i==r?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<r||i>this.value.to)&&(!this.test||this.test(i,r,n)))return this.value={from:i,to:r,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const $1=new WeakMap;class qu{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,i){let r=$1.get(e);if(!r||r.from>=i||r.to<=n){let a=new qu(n,e.sliceString(n,i));return $1.set(e,a),a}if(r.from==n&&r.to==i)return r;let{text:s,from:o}=r;return o>n&&(s=e.sliceString(n,o)+s,o=n),r.to<i&&(s+=e.sliceString(r.to,i)),$1.set(e,new qu(o,s)),new qu(n,s.slice(n-o,i-o))}}class uz{constructor(e,n,i,r,s){this.text=e,this.to=s,this.done=!1,this.value=lz,this.matchPos=Kv(e,r),this.re=new RegExp(n,OE+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.flat=qu.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let i=this.flat.from+n.index,r=i+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,r,n)))return this.value={from:i,to:r,match:n},this.matchPos=Kv(this.text,r+(i==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=qu.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(cz.prototype[Symbol.iterator]=uz.prototype[Symbol.iterator]=function(){return this});function ehe(t){try{return new RegExp(t,OE),!0}catch{return!1}}function Kv(t,e){if(e>=t.length)return e;let n=t.lineAt(e),i;for(;e<n.to&&(i=n.text.charCodeAt(e-n.from))>=56320&&i<57344;)e++;return e}function vk(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),n=Et("input",{class:"cm-textfield",name:"line",value:e}),i=Et("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),t.dispatch({effects:bh.of(!1)}),t.focus()):s.keyCode==13&&(s.preventDefault(),r())},onsubmit:s=>{s.preventDefault(),r()}},Et("label",t.state.phrase("Go to line"),": ",n)," ",Et("button",{class:"cm-button",type:"submit"},t.state.phrase("go")),Et("button",{name:"close",onclick:()=>{t.dispatch({effects:bh.of(!1)}),t.focus()},"aria-label":t.state.phrase("close"),type:"button"},["×"]));function r(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!s)return;let{state:o}=t,a=o.doc.lineAt(o.selection.main.head),[,l,c,u,d]=s,f=u?+u.slice(1):0,p=c?+c:a.number;if(c&&d){let y=p/100;l&&(y=y*(l=="-"?-1:1)+a.number/o.doc.lines),p=Math.round(o.doc.lines*y)}else c&&l&&(p=p*(l=="-"?-1:1)+a.number);let m=o.doc.line(Math.max(1,Math.min(o.doc.lines,p))),g=re.cursor(m.from+Math.max(0,Math.min(f,m.length)));t.dispatch({effects:[bh.of(!1),Te.scrollIntoView(g.from,{y:"center"})],selection:g}),t.focus()}return{dom:i}}const bh=Ze.define(),LT=Si.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(bh)&&(t=n.value);return t},provide:t=>lp.from(t,e=>e?vk:null)}),the=t=>{let e=ap(t,vk);if(!e){let n=[bh.of(!0)];t.state.field(LT,!1)==null&&n.push(Ze.appendConfig.of([LT,nhe])),t.dispatch({effects:n}),e=ap(t,vk)}return e&&e.dom.querySelector("input").select(),!0},nhe=Te.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),ihe=({state:t,dispatch:e})=>{let{selection:n}=t,i=re.create(n.ranges.map(r=>t.wordAt(r.head)||re.cursor(r.head)),n.mainIndex);return i.eq(n)?!1:(e(t.update({selection:i})),!0)};function rhe(t,e){let{main:n,ranges:i}=t.selection,r=t.wordAt(n.head),s=r&&r.from==n.from&&r.to==n.to;for(let o=!1,a=new Sp(t.doc,e,i[i.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new Sp(t.doc,e,0,Math.max(0,i[i.length-1].from-1)),o=!0}else{if(o&&i.some(l=>l.from==a.value.from))continue;if(s){let l=t.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const she=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return ihe({state:t,dispatch:e});let i=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=i))return!1;let r=rhe(t,i);return r?(e(t.update({selection:t.selection.addRange(re.range(r.from,r.to),!1),effects:Te.scrollIntoView(r.to)})),!0):!1},Kd=Ee.define({combine(t){return xl(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new phe(e),scrollToMatch:e=>Te.scrollIntoView(e)})}});class dz{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||ehe(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new che(this):new ahe(this)}getCursor(e,n=0,i){let r=e.doc?e:ot.create({doc:e});return i==null&&(i=r.doc.length),this.regexp?cu(this,r,n,i):lu(this,r,n,i)}}class fz{constructor(e){this.spec=e}}function lu(t,e,n,i){return new Sp(e.doc,t.unquoted,n,i,t.caseSensitive?void 0:r=>r.toLowerCase(),t.wholeWord?ohe(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function ohe(t,e){return(n,i,r,s)=>((s>n||s+r.length<i)&&(s=Math.max(0,n-2),r=t.sliceString(s,Math.min(t.length,i+2))),(e(qv(r,n-s))!=Hn.Word||e(Yv(r,n-s))!=Hn.Word)&&(e(Yv(r,i-s))!=Hn.Word||e(qv(r,i-s))!=Hn.Word))}class ahe extends fz{constructor(e){super(e)}nextMatch(e,n,i){let r=lu(this.spec,e,i,e.doc.length).nextOverlapping();if(r.done){let s=Math.min(e.doc.length,n+this.spec.unquoted.length);r=lu(this.spec,e,0,s).nextOverlapping()}return r.done||r.value.from==n&&r.value.to==i?null:r.value}prevMatchInRange(e,n,i){for(let r=i;;){let s=Math.max(n,r-1e4-this.spec.unquoted.length),o=lu(this.spec,e,s,r),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(s==n)return null;r-=1e4}}prevMatch(e,n,i){let r=this.prevMatchInRange(e,0,n);return r||(r=this.prevMatchInRange(e,Math.max(0,i-this.spec.unquoted.length),e.doc.length)),r&&(r.from!=n||r.to!=i)?r:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let i=lu(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=n)return null;r.push(i.value)}return r}highlight(e,n,i,r){let s=lu(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}function cu(t,e,n,i){return new cz(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?lhe(e.charCategorizer(e.selection.main.head)):void 0},n,i)}function qv(t,e){return t.slice(Vn(t,e,!1),e)}function Yv(t,e){return t.slice(e,Vn(t,e))}function lhe(t){return(e,n,i)=>!i[0].length||(t(qv(i.input,i.index))!=Hn.Word||t(Yv(i.input,i.index))!=Hn.Word)&&(t(Yv(i.input,i.index+i[0].length))!=Hn.Word||t(qv(i.input,i.index+i[0].length))!=Hn.Word)}class che extends fz{nextMatch(e,n,i){let r=cu(this.spec,e,i,e.doc.length).next();return r.done&&(r=cu(this.spec,e,0,n).next()),r.done?null:r.value}prevMatchInRange(e,n,i){for(let r=1;;r++){let s=Math.max(n,i-r*1e4),o=cu(this.spec,e,s,i),a=null;for(;!o.next().done;)a=o.value;if(a&&(s==n||a.from>s+10))return a;if(s==n)return null}}prevMatch(e,n,i){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(n,i)=>{if(i=="&")return e.match[0];if(i=="$")return"$";for(let r=i.length;r>0;r--){let s=+i.slice(0,r);if(s>0&&s<e.match.length)return e.match[s]+i.slice(r)}return n})}matchAll(e,n){let i=cu(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=n)return null;r.push(i.value)}return r}highlight(e,n,i,r){let s=cu(this.spec,e,Math.max(0,n-250),Math.min(i+250,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}const kp=Ze.define(),IE=Ze.define(),Xa=Si.define({create(t){return new F1(yk(t).create(),null)},update(t,e){for(let n of e.effects)n.is(kp)?t=new F1(n.value.create(),t.panel):n.is(IE)&&(t=new F1(t.query,n.value?DE:null));return t},provide:t=>lp.from(t,e=>e.panel)});class F1{constructor(e,n){this.query=e,this.panel=n}}const uhe=Qe.mark({class:"cm-searchMatch"}),dhe=Qe.mark({class:"cm-searchMatch cm-searchMatch-selected"}),fhe=qn.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(Xa))}update(t){let e=t.state.field(Xa);(e!=t.startState.field(Xa)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return Qe.none;let{view:n}=this,i=new ol;for(let r=0,s=n.visibleRanges,o=s.length;r<o;r++){let{from:a,to:l}=s[r];for(;r<o-1&&l>s[r+1].from-2*250;)l=s[++r].to;t.highlight(n.state,a,l,(c,u)=>{let d=n.state.selection.ranges.some(f=>f.from==c&&f.to==u);i.add(c,u,d?dhe:uhe)})}return i.finish()}},{decorations:t=>t.decorations});function im(t){return e=>{let n=e.state.field(Xa,!1);return n&&n.query.spec.valid?t(e,n):vz(e)}}const jT=im((t,{query:e})=>{let{to:n}=t.state.selection.main,i=e.nextMatch(t.state,n,n);if(!i)return!1;let r=re.single(i.from,i.to),s=t.state.facet(Kd);return t.dispatch({selection:r,effects:[LE(t,i),s.scrollToMatch(r.main,t)],userEvent:"select.search"}),gz(t),!0}),$T=im((t,{query:e})=>{let{state:n}=t,{from:i}=n.selection.main,r=e.prevMatch(n,i,i);if(!r)return!1;let s=re.single(r.from,r.to),o=t.state.facet(Kd);return t.dispatch({selection:s,effects:[LE(t,r),o.scrollToMatch(s.main,t)],userEvent:"select.search"}),gz(t),!0}),hz=im((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:re.create(n.map(i=>re.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),hhe=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:i,to:r}=n.main,s=[],o=0;for(let a=new Sp(t.doc,t.sliceDoc(i,r));!a.next().done;){if(s.length>1e3)return!1;a.value.from==i&&(o=s.length),s.push(re.range(a.value.from,a.value.to))}return e(t.update({selection:re.create(s,o),userEvent:"select.search.matches"})),!0},FT=im((t,{query:e})=>{let{state:n}=t,{from:i,to:r}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,i,i);if(!s)return!1;let o=s,a=[],l,c,u=[];o.from==i&&o.to==r&&(c=n.toText(e.getReplacement(o)),a.push({from:o.from,to:o.to,insert:c}),o=e.nextMatch(n,o.from,o.to),u.push(Te.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(i).number)+".")));let d=t.state.changes(a);return o&&(l=re.single(o.from,o.to).map(d),u.push(LE(t,o)),u.push(n.facet(Kd).scrollToMatch(l.main,t))),t.dispatch({changes:d,selection:l,effects:u,userEvent:"input.replace"}),!0}),pz=im((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(r=>{let{from:s,to:o}=r;return{from:s,to:o,insert:e.getReplacement(r)}});if(!n.length)return!1;let i=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:Te.announce.of(i),userEvent:"input.replace.all"}),!0});function DE(t){return t.state.facet(Kd).createPanel(t)}function yk(t,e){var n,i,r,s,o;let a=t.selection.main,l=a.empty||a.to>a.from+100?"":t.sliceDoc(a.from,a.to);if(e&&!l)return e;let c=t.facet(Kd);return new dz({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:c.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(i=e==null?void 0:e.caseSensitive)!==null&&i!==void 0?i:c.caseSensitive,literal:(r=e==null?void 0:e.literal)!==null&&r!==void 0?r:c.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:c.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:c.wholeWord})}function mz(t){let e=ap(t,DE);return e&&e.dom.querySelector("[main-field]")}function gz(t){let e=mz(t);e&&e==t.root.activeElement&&e.select()}const vz=t=>{let e=t.state.field(Xa,!1);if(e&&e.panel){let n=mz(t);if(n&&n!=t.root.activeElement){let i=yk(t.state,e.query.spec);i.valid&&t.dispatch({effects:kp.of(i)}),n.focus(),n.select()}}else t.dispatch({effects:[IE.of(!0),e?kp.of(yk(t.state,e.query.spec)):Ze.appendConfig.of(ghe)]});return!0},yz=t=>{let e=t.state.field(Xa,!1);if(!e||!e.panel)return!1;let n=ap(t,DE);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:IE.of(!1)}),!0};class phe{constructor(e){this.view=e;let n=this.query=e.state.field(Xa).query.spec;this.commit=this.commit.bind(this),this.searchField=Et("input",{value:n.search,placeholder:Gi(e,"Find"),"aria-label":Gi(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Et("input",{value:n.replace,placeholder:Gi(e,"Replace"),"aria-label":Gi(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Et("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=Et("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=Et("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function i(r,s,o){return Et("button",{class:"cm-button",name:r,onclick:s,type:"button"},o)}this.dom=Et("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,i("next",()=>jT(e),[Gi(e,"next")]),i("prev",()=>$T(e),[Gi(e,"previous")]),i("select",()=>hz(e),[Gi(e,"all")]),Et("label",null,[this.caseField,Gi(e,"match case")]),Et("label",null,[this.reField,Gi(e,"regexp")]),Et("label",null,[this.wordField,Gi(e,"by word")]),...e.state.readOnly?[]:[Et("br"),this.replaceField,i("replace",()=>FT(e),[Gi(e,"replace")]),i("replaceAll",()=>pz(e),[Gi(e,"replace all")])],Et("button",{name:"close",onclick:()=>yz(e),"aria-label":Gi(e,"close"),type:"button"},["×"])])}commit(){let e=new dz({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:kp.of(e)}))}keydown(e){nee(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?$T:jT)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),FT(this.view))}update(e){for(let n of e.transactions)for(let i of n.effects)i.is(kp)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Kd).top}}function Gi(t,e){return t.state.phrase(e)}const Eg=30,Ag=/[\s\.,:;?!]/;function LE(t,{from:e,to:n}){let i=t.state.doc.lineAt(e),r=t.state.doc.lineAt(n).to,s=Math.max(i.from,e-Eg),o=Math.min(r,n+Eg),a=t.state.sliceDoc(s,o);if(s!=i.from){for(let l=0;l<Eg;l++)if(!Ag.test(a[l+1])&&Ag.test(a[l])){a=a.slice(l);break}}if(o!=r){for(let l=a.length-1;l>a.length-Eg;l--)if(!Ag.test(a[l-1])&&Ag.test(a[l])){a=a.slice(0,l);break}}return Te.announce.of(`${t.state.phrase("current match")}. ${a} ${t.state.phrase("on line")} ${i.number}.`)}const mhe=Te.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),ghe=[Xa,$p.low(fhe),mhe];class vhe{constructor(e,n,i,r){this.state=e,this.pos=n,this.explicit=i,this.view=r,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let n=so(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),i=Math.max(n.from,this.pos-250),r=n.text.slice(i-n.from,this.pos-n.from),s=r.search(bz(e,!1));return s<0?null:{from:i+s,to:this.pos,text:r.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,n,i){e=="abort"&&this.abortListeners&&(this.abortListeners.push(n),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function BT(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function yhe(t){let e=Object.create(null),n=Object.create(null);for(let{label:r}of t){e[r[0]]=!0;for(let s=1;s<r.length;s++)n[r[s]]=!0}let i=BT(e)+BT(n)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function bhe(t){let e=t.map(r=>typeof r=="string"?{label:r}:r),[n,i]=e.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:yhe(e);return r=>{let s=r.matchBefore(i);return s||r.explicit?{from:s?s.from:r.pos,options:e,validFor:n}:null}}class zT{constructor(e,n,i,r){this.completion=e,this.source=n,this.match=i,this.score=r}}function wh(t){return t.selection.main.from}function bz(t,e){var n;let{source:i}=t,r=e&&i[0]!="^",s=i[i.length-1]!="$";return!r&&!s?t:new RegExp(`${r?"^":""}(?:${i})${s?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const wz=Yo.define();function whe(t,e,n,i){let{main:r}=t.selection,s=n-r.from,o=i-r.from;return Object.assign(Object.assign({},t.changeByRange(a=>{if(a!=r&&n!=i&&t.sliceDoc(a.from+s,a.from+o)!=t.sliceDoc(n,i))return{range:a};let l=t.toText(e);return{changes:{from:a.from+s,to:i==r.from?a.to:a.from+o,insert:l},range:re.cursor(a.from+s+l.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const UT=new WeakMap;function xhe(t){if(!Array.isArray(t))return t;let e=UT.get(t);return e||UT.set(t,e=bhe(t)),e}const xz=Ze.define(),jE=Ze.define();class She{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let i=_r(e,n),r=No(i);this.chars.push(i);let s=e.slice(n,n+r),o=s.toUpperCase();this.folded.push(_r(o==s?s.toLowerCase():o,0)),n+=r}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:n,folded:i,any:r,precise:s,byWord:o}=this;if(n.length==1){let b=_r(e,0),w=No(b),k=w==e.length?0:-100;if(b!=n[0])if(b==i[0])k+=-200;else return null;return this.ret(k,[0,w])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=n.length,c=0;if(a<0){for(let b=0,w=Math.min(e.length,200);b<w&&c<l;){let k=_r(e,b);(k==n[c]||k==i[c])&&(r[c++]=b),b+=No(k)}if(c<l)return null}let u=0,d=0,f=!1,p=0,m=-1,g=-1,y=/[a-z]/.test(e),v=!0;for(let b=0,w=Math.min(e.length,200),k=0;b<w&&d<l;){let _=_r(e,b);a<0&&(u<l&&_==n[u]&&(s[u++]=b),p<l&&(_==n[p]||_==i[p]?(p==0&&(m=b),g=b+1,p++):p=0));let E,C=_<255?_>=48&&_<=57||_>=97&&_<=122?2:_>=65&&_<=90?1:0:(E=nC(_))!=E.toLowerCase()?1:E!=E.toUpperCase()?2:0;(!b||C==1&&y||k==0&&C!=0)&&(n[d]==_||i[d]==_&&(f=!0)?o[d++]=b:o.length&&(v=!1)),k=C,b+=No(_)}return d==l&&o[0]==0&&v?this.result(-100+(f?-200:0),o,e):p==l&&m==0?this.ret(-200-e.length+(g==e.length?0:-100),[0,g]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):p==l?this.ret(-900-e.length,[m,g]):d==l?this.result(-100+(f?-200:0)+-700+(v?0:-1100),o,e):n.length==2?null:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,n,i){let r=[],s=0;for(let o of n){let a=o+(this.astral?No(_r(i,o)):1);s&&r[s-1]==o?r[s-1]=a:(r[s++]=o,r[s++]=a)}return this.ret(e-i.length,r)}}class khe{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let n=e.slice(0,this.pattern.length),i=n==this.pattern?0:n.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,n.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const Fs=Ee.define({combine(t){return xl(t,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:_he,filterStrict:!1,compareCompletions:(e,n)=>e.label.localeCompare(n.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>i=>VT(e(i),n(i)),optionClass:(e,n)=>i=>VT(e(i),n(i)),addToOptions:(e,n)=>e.concat(n),filterStrict:(e,n)=>e||n})}});function VT(t,e){return t?e?t+" "+e:t:e}function _he(t,e,n,i,r,s){let o=t.textDirection==Ft.RTL,a=o,l=!1,c="top",u,d,f=e.left-r.left,p=r.right-e.right,m=i.right-i.left,g=i.bottom-i.top;if(a&&f<Math.min(m,p)?a=!1:!a&&p<Math.min(m,f)&&(a=!0),m<=(a?f:p))u=Math.max(r.top,Math.min(n.top,r.bottom-g))-e.top,d=Math.min(400,a?f:p);else{l=!0,d=Math.min(400,(o?e.right:r.right-e.left)-30);let b=r.bottom-e.bottom;b>=g||b>e.top?u=n.bottom-e.top:(c="bottom",u=e.bottom-n.top)}let y=(e.bottom-e.top)/s.offsetHeight,v=(e.right-e.left)/s.offsetWidth;return{style:`${c}: ${u/y}px; max-width: ${d/v}px`,class:"cm-completionInfo-"+(l?o?"left-narrow":"right-narrow":a?"left":"right")}}function Che(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),n.type&&i.classList.add(...n.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(n,i,r,s){let o=document.createElement("span");o.className="cm-completionLabel";let a=n.displayLabel||n.label,l=0;for(let c=0;c<s.length;){let u=s[c++],d=s[c++];u>l&&o.appendChild(document.createTextNode(a.slice(l,u)));let f=o.appendChild(document.createElement("span"));f.appendChild(document.createTextNode(a.slice(u,d))),f.className="cm-completionMatchedText",l=d}return l<a.length&&o.appendChild(document.createTextNode(a.slice(l))),o},position:50},{render(n){if(!n.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=n.detail,i},position:80}),e.sort((n,i)=>n.position-i.position).map(n=>n.render)}function B1(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let r=Math.floor(e/n);return{from:r*n,to:(r+1)*n}}let i=Math.floor((t-e)/n);return{from:t-(i+1)*n,to:t-i*n}}class Ehe{constructor(e,n,i){this.view=e,this.stateField=n,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let r=e.state.field(n),{options:s,selected:o}=r.open,a=e.state.facet(Fs);this.optionContent=Che(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=B1(s.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{let{options:c}=e.state.field(n).open;for(let u=l.target,d;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(d=/-(\d+)$/.exec(u.id))&&+d[1]<c.length){this.applyCompletion(e,c[+d[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let c=e.state.field(this.stateField,!1);c&&c.tooltip&&e.state.facet(Fs).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:jE.of(null)})}),this.showOptions(s,r.id)}mount(){this.updateSel()}showOptions(e,n){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,n,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var n;let i=e.state.field(this.stateField),r=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=r){let{options:s,selected:o,disabled:a}=i.open;(!r.open||r.open.options!=s)&&(this.range=B1(s.length,o,e.state.facet(Fs).maxRenderedOptions),this.showOptions(s,i.id)),this.updateSel(),a!=((n=r.open)===null||n===void 0?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of n.split(" "))i&&this.dom.classList.add(i);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=B1(n.options.length,n.selected,this.view.state.facet(Fs).maxRenderedOptions),this.showOptions(n.options,e.id)),this.updateSelectedOption(n.selected)){this.destroyInfo();let{completion:i}=n.options[n.selected],{info:r}=i;if(!r)return;let s=typeof r=="string"?document.createTextNode(r):r(i);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,i)}).catch(o=>sr(this.view.state,o,"completion info")):this.addInfoPane(s,i)}}addInfoPane(e,n){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:r,destroy:s}=e;i.appendChild(r),this.infoDestroy=s||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let i=this.list.firstChild,r=this.range.from;i;i=i.nextSibling,r++)i.nodeName!="LI"||!i.id?r--:r==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),n=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return n&&Nhe(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.documentElement;s={left:0,top:0,right:o.clientWidth,bottom:o.clientHeight}}return r.top>Math.min(s.bottom,n.bottom)-10||r.bottom<Math.max(s.top,n.top)+10?null:this.view.state.facet(Fs).positionInfo(this.view,n,r,i,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,i){const r=document.createElement("ul");r.id=n,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions")),r.addEventListener("mousedown",o=>{o.target==r&&o.preventDefault()});let s=null;for(let o=i.from;o<i.to;o++){let{completion:a,match:l}=e[o],{section:c}=a;if(c){let f=typeof c=="string"?c:c.name;if(f!=s&&(o>i.from||i.from==0))if(s=f,typeof c!="string"&&c.header)r.appendChild(c.header(c));else{let p=r.appendChild(document.createElement("completion-section"));p.textContent=f}}const u=r.appendChild(document.createElement("li"));u.id=n+"-"+o,u.setAttribute("role","option");let d=this.optionClass(a);d&&(u.className=d);for(let f of this.optionContent){let p=f(a,this.view.state,this.view,l);p&&u.appendChild(p)}}return i.from&&r.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function Ahe(t,e){return n=>new Ehe(n,t,e)}function Nhe(t,e){let n=t.getBoundingClientRect(),i=e.getBoundingClientRect(),r=n.height/t.offsetHeight;i.top<n.top?t.scrollTop-=(n.top-i.top)/r:i.bottom>n.bottom&&(t.scrollTop+=(i.bottom-n.bottom)/r)}function HT(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function Phe(t,e){let n=[],i=null,r=c=>{n.push(c);let{section:u}=c.completion;if(u){i||(i=[]);let d=typeof u=="string"?u:u.name;i.some(f=>f.name==d)||i.push(typeof u=="string"?{name:d}:u)}},s=e.facet(Fs);for(let c of t)if(c.hasResult()){let u=c.result.getMatch;if(c.result.filter===!1)for(let d of c.result.options)r(new zT(d,c.source,u?u(d):[],1e9-n.length));else{let d=e.sliceDoc(c.from,c.to),f,p=s.filterStrict?new khe(d):new She(d);for(let m of c.result.options)if(f=p.match(m.label)){let g=m.displayLabel?u?u(m,f.matched):[]:f.matched;r(new zT(m,c.source,g,f.score+(m.boost||0)))}}}if(i){let c=Object.create(null),u=0,d=(f,p)=>{var m,g;return((m=f.rank)!==null&&m!==void 0?m:1e9)-((g=p.rank)!==null&&g!==void 0?g:1e9)||(f.name<p.name?-1:1)};for(let f of i.sort(d))u-=1e5,c[f.name]=u;for(let f of n){let{section:p}=f.completion;p&&(f.score+=c[typeof p=="string"?p:p.name])}}let o=[],a=null,l=s.compareCompletions;for(let c of n.sort((u,d)=>d.score-u.score||l(u.completion,d.completion))){let u=c.completion;!a||a.label!=u.label||a.detail!=u.detail||a.type!=null&&u.type!=null&&a.type!=u.type||a.apply!=u.apply||a.boost!=u.boost?o.push(c):HT(c.completion)>HT(a)&&(o[o.length-1]=c),a=c.completion}return o}class Tu{constructor(e,n,i,r,s,o){this.options=e,this.attrs=n,this.tooltip=i,this.timestamp=r,this.selected=s,this.disabled=o}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new Tu(this.options,WT(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,i,r,s,o){if(r&&!o&&e.some(c=>c.isPending))return r.setDisabled();let a=Phe(e,n);if(!a.length)return r&&e.some(c=>c.isPending)?r.setDisabled():null;let l=n.facet(Fs).selectOnOpen?0:-1;if(r&&r.selected!=l&&r.selected!=-1){let c=r.options[r.selected].completion;for(let u=0;u<a.length;u++)if(a[u].completion==c){l=u;break}}return new Tu(a,WT(i,l),{pos:e.reduce((c,u)=>u.hasResult()?Math.min(c,u.from):c,1e8),create:Lhe,above:s.aboveCursor},r?r.timestamp:Date.now(),l,!1)}map(e){return new Tu(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new Tu(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class Xv{constructor(e,n,i){this.active=e,this.id=n,this.open=i}static start(){return new Xv(Ohe,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,i=n.facet(Fs),s=(i.override||n.languageDataAt("autocomplete",wh(n)).map(xhe)).map(l=>(this.active.find(u=>u.source==l)||new as(l,this.active.some(u=>u.state!=0)?1:0)).update(e,i));s.length==this.active.length&&s.every((l,c)=>l==this.active[c])&&(s=this.active);let o=this.open,a=e.effects.some(l=>l.is(Sz));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!Mhe(s,this.active)||a?o=Tu.build(s,n,this.id,o,i,a):o&&o.disabled&&!s.some(l=>l.isPending)&&(o=null),!o&&s.every(l=>!l.isPending)&&s.some(l=>l.hasResult())&&(s=s.map(l=>l.hasResult()?new as(l.source,0):l));for(let l of e.effects)l.is(kz)&&(o=o&&o.setSelected(l.value,this.id));return s==this.active&&o==this.open?this:new Xv(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?The:Rhe}}function Mhe(t,e){if(t==e)return!0;for(let n=0,i=0;;){for(;n<t.length&&!t[n].hasResult();)n++;for(;i<e.length&&!e[i].hasResult();)i++;let r=n==t.length,s=i==e.length;if(r||s)return r==s;if(t[n++].result!=e[i++].result)return!1}}const The={"aria-autocomplete":"list"},Rhe={};function WT(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const Ohe=[];function Ihe(t,e){if(t.isUserEvent("input.complete")){let i=t.annotation(wz);if(i&&e.activateOnCompletion(i))return 12}let n=t.isUserEvent("input.type");return n&&e.activateOnTyping?5:n?1:t.isUserEvent("delete.backward")?2:t.selection?8:t.docChanged?16:0}class as{constructor(e,n,i=!1){this.source=e,this.state=n,this.explicit=i}hasResult(){return!1}get isPending(){return this.state==1}update(e,n){let i=Ihe(e,n),r=this;(i&8||i&16&&this.touches(e))&&(r=new as(r.source,0)),i&4&&r.state==0&&(r=new as(this.source,1)),r=r.updateFor(e,i);for(let s of e.effects)if(s.is(xz))r=new as(r.source,1,s.value);else if(s.is(jE))r=new as(r.source,0);else if(s.is(Sz))for(let o of s.value)o.source==r.source&&(r=o);return r}updateFor(e,n){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(wh(e.state))}}class xh extends as{constructor(e,n,i,r,s,o){super(e,3,n),this.limit=i,this.result=r,this.from=s,this.to=o}hasResult(){return!0}updateFor(e,n){var i;if(!(n&3))return this.map(e.changes);let r=this.result;r.map&&!e.changes.empty&&(r=r.map(r,e.changes));let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=wh(e.state);if(a>o||!r||n&2&&(wh(e.startState)==this.from||a<this.limit))return new as(this.source,n&4?1:0);let l=e.changes.mapPos(this.limit);return Dhe(r.validFor,e.state,s,o)?new xh(this.source,this.explicit,l,r,s,o):r.update&&(r=r.update(r,s,o,new vhe(e.state,a,!1)))?new xh(this.source,this.explicit,l,r,r.from,(i=r.to)!==null&&i!==void 0?i:wh(e.state)):new as(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new xh(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new as(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function Dhe(t,e,n,i){if(!t)return!1;let r=e.sliceDoc(n,i);return typeof t=="function"?t(r,n,i,e):bz(t,!0).test(r)}const Sz=Ze.define({map(t,e){return t.map(n=>n.map(e))}}),kz=Ze.define(),qd=Si.define({create(){return Xv.start()},update(t,e){return t.update(e)},provide:t=>[vC.from(t,e=>e.tooltip),Te.contentAttributes.from(t,e=>e.attrs)]});function _z(t,e){const n=e.completion.apply||e.completion.label;let i=t.state.field(qd).active.find(r=>r.source==e.source);return i instanceof xh?(typeof n=="string"?t.dispatch(Object.assign(Object.assign({},whe(t.state,n,i.from,i.to)),{annotations:wz.of(e.completion)})):n(t,e.completion,i.from,i.to),!0):!1}const Lhe=Ahe(qd,_z);function Ng(t,e="option"){return n=>{let i=n.state.field(qd,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<n.state.facet(Fs).interactionDelay)return!1;let r=1,s;e=="page"&&(s=Iee(n,i.open.tooltip))&&(r=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=i.open.options,a=i.open.selected>-1?i.open.selected+r*(t?1:-1):t?0:o-1;return a<0?a=e=="page"?0:o-1:a>=o&&(a=e=="page"?o-1:0),n.dispatch({effects:kz.of(a)}),!0}}const GT=t=>{let e=t.state.field(qd,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(Fs).interactionDelay?!1:_z(t,e.open.options[e.open.selected])},jhe=t=>t.state.field(qd,!1)?(t.dispatch({effects:xz.of(!0)}),!0):!1,$he=t=>{let e=t.state.field(qd,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:jE.of(null)}),!0)},Cz={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Ez=new class extends Ec{};Ez.startSide=1;Ez.endSide=-1;const z1="()[]{}<>«»»«［］｛｝";function Fhe(t){for(let e=0;e<z1.length;e+=2)if(z1.charCodeAt(e)==t)return z1.charAt(e+1);return nC(t<128?t:t+1)}function Bhe(t,e){return t.languageDataAt("closeBrackets",e)[0]||Cz}const zhe=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let i=Bhe(t,t.selection.main.head).brackets||Cz.brackets,r=null,s=t.changeByRange(o=>{if(o.empty){let a=Vhe(t.doc,o.head);for(let l of i)if(l==a&&Uhe(t.doc,o.head)==Fhe(_r(l,0)))return{changes:{from:o.head-l.length,to:o.head+l.length},range:re.cursor(o.head-l.length)}}return{range:r=o}});return r||e(t.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!r};function Uhe(t,e){let n=t.sliceString(e,e+2);return n.slice(0,No(_r(n,0)))}function Vhe(t,e){let n=t.sliceString(e-2,e);return No(_r(n,0))==n.length?n:n.slice(1)}class KT{constructor(e,n,i){this.from=e,this.to=n,this.diagnostic=i}}class Ql{constructor(e,n,i){this.diagnostics=e,this.panel=n,this.selected=i}static init(e,n,i){let r=i.facet(Gs).markerFilter;r&&(e=r(e,i));let s=e.slice().sort((u,d)=>u.from-d.from||u.to-d.to),o=new ol,a=[],l=0;for(let u=0;;){let d=u==s.length?null:s[u];if(!d&&!a.length)break;let f,p;for(a.length?(f=l,p=a.reduce((g,y)=>Math.min(g,y.to),d&&d.from>f?d.from:1e8)):(f=d.from,p=d.to,a.push(d),u++);u<s.length;){let g=s[u];if(g.from==f&&(g.to>g.from||g.to==f))a.push(g),u++,p=Math.min(g.to,p);else{p=Math.min(g.from,p);break}}let m=rpe(a);if(a.some(g=>g.from==g.to||g.from==g.to-1&&i.doc.lineAt(g.from).to==g.from))o.add(f,f,Qe.widget({widget:new epe(m),diagnostics:a.slice()}));else{let g=a.reduce((y,v)=>v.markClass?y+" "+v.markClass:y,"");o.add(f,p,Qe.mark({class:"cm-lintRange cm-lintRange-"+m+g,diagnostics:a.slice(),inclusiveEnd:a.some(y=>y.to>p)}))}l=p;for(let g=0;g<a.length;g++)a[g].to<=l&&a.splice(g--,1)}let c=o.finish();return new Ql(c,n,Id(c))}}function Id(t,e=null,n=0){let i=null;return t.between(n,1e9,(r,s,{spec:o})=>{if(!(e&&o.diagnostics.indexOf(e)<0))if(!i)i=new KT(r,s,e||o.diagnostics[0]);else{if(o.diagnostics.indexOf(i.diagnostic)<0)return!1;i=new KT(i.from,s,i.diagnostic)}}),i}function Hhe(t,e){let n=e.pos,i=e.end||n,r=t.state.facet(Gs).hideOn(t,n,i);if(r!=null)return r;let s=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(o=>o.is($E))||t.changes.touchesRange(s.from,Math.max(s.to,i)))}function Az(t,e){return t.field(ar,!1)?e:e.concat(Ze.appendConfig.of(Tz))}function Whe(t,e){return{effects:Az(t,[$E.of(e)])}}const $E=Ze.define(),FE=Ze.define(),Nz=Ze.define(),ar=Si.define({create(){return new Ql(Qe.none,null,null)},update(t,e){if(e.docChanged&&t.diagnostics.size){let n=t.diagnostics.map(e.changes),i=null,r=t.panel;if(t.selected){let s=e.changes.mapPos(t.selected.from,1);i=Id(n,t.selected.diagnostic,s)||Id(n,null,s)}!n.size&&r&&e.state.facet(Gs).autoPanel&&(r=null),t=new Ql(n,r,i)}for(let n of e.effects)if(n.is($E)){let i=e.state.facet(Gs).autoPanel?n.value.length?_p.open:null:t.panel;t=Ql.init(n.value,i,e.state)}else n.is(FE)?t=new Ql(t.diagnostics,n.value?_p.open:null,t.selected):n.is(Nz)&&(t=new Ql(t.diagnostics,t.panel,n.value));return t},provide:t=>[lp.from(t,e=>e.panel),Te.decorations.from(t,e=>e.diagnostics)]}),Ghe=Qe.mark({class:"cm-lintRange cm-lintRange-active"});function Khe(t,e,n){let{diagnostics:i}=t.state.field(ar),r,s=-1,o=-1;i.between(e-(n<0?1:0),e+(n>0?1:0),(l,c,{spec:u})=>{if(e>=l&&e<=c&&(l==c||(e>l||n>0)&&(e<c||n<0)))return r=u.diagnostics,s=l,o=c,!1});let a=t.state.facet(Gs).tooltipFilter;return r&&a&&(r=a(r,t.state)),r?{pos:s,end:o,above:t.state.doc.lineAt(s).to<o,create(){return{dom:qhe(t,r)}}}:null}function qhe(t,e){return Et("ul",{class:"cm-tooltip-lint"},e.map(n=>Mz(t,n,!1)))}const Yhe=t=>{let e=t.state.field(ar,!1);(!e||!e.panel)&&t.dispatch({effects:Az(t.state,[FE.of(!0)])});let n=ap(t,_p.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},qT=t=>{let e=t.state.field(ar,!1);return!e||!e.panel?!1:(t.dispatch({effects:FE.of(!1)}),!0)},Xhe=t=>{let e=t.state.field(ar,!1);if(!e)return!1;let n=t.state.selection.main,i=e.diagnostics.iter(n.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==n.from&&i.to==n.to)?!1:(t.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},Jhe=qn.fromClass(class{constructor(t){this.view=t,this.timeout=-1,this.set=!0;let{delay:e}=t.state.facet(Gs);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){clearTimeout(this.timeout);let t=Date.now();if(t<this.lintTime-10)this.timeout=setTimeout(this.run,this.lintTime-t);else{this.set=!1;let{state:e}=this.view,{sources:n}=e.facet(Gs);n.length&&Zhe(n.map(i=>Promise.resolve(i(this.view))),i=>{this.view.state.doc==e.doc&&this.view.dispatch(Whe(this.view.state,i.reduce((r,s)=>r.concat(s))))},i=>{sr(this.view.state,i)})}}update(t){let e=t.state.facet(Gs);(t.docChanged||e!=t.startState.facet(Gs)||e.needsRefresh&&e.needsRefresh(t))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}});function Zhe(t,e,n){let i=[],r=-1;for(let s of t)s.then(o=>{i.push(o),clearTimeout(r),i.length==t.length?e(i):r=setTimeout(()=>e(i),200)},n)}const Gs=Ee.define({combine(t){return Object.assign({sources:t.map(e=>e.source).filter(e=>e!=null)},xl(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,n)=>e?n?i=>e(i)||n(i):e:n}))}});function Qhe(t,e={}){return[Gs.of({source:t,config:e}),Jhe,Tz]}function Pz(t){let e=[];if(t)e:for(let{name:n}of t){for(let i=0;i<n.length;i++){let r=n[i];if(/[a-zA-Z]/.test(r)&&!e.some(s=>s.toLowerCase()==r.toLowerCase())){e.push(r);continue e}}e.push("")}return e}function Mz(t,e,n){var i;let r=n?Pz(e.actions):[];return Et("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},Et("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(t):e.message),(i=e.actions)===null||i===void 0?void 0:i.map((s,o)=>{let a=!1,l=f=>{if(f.preventDefault(),a)return;a=!0;let p=Id(t.state.field(ar).diagnostics,e);p&&s.apply(t,p.from,p.to)},{name:c}=s,u=r[o]?c.indexOf(r[o]):-1,d=u<0?c:[c.slice(0,u),Et("u",c.slice(u,u+1)),c.slice(u+1)];return Et("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${c}${u<0?"":` (access key "${r[o]})"`}.`},d)}),e.source&&Et("div",{class:"cm-diagnosticSource"},e.source))}class epe extends Sl{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return Et("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class YT{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=Mz(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class _p{constructor(e){this.view=e,this.items=[];let n=r=>{if(r.keyCode==27)qT(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=Pz(s.actions);for(let a=0;a<o.length;a++)if(o[a].toUpperCase().charCodeAt(0)==r.keyCode){let l=Id(this.view.state.field(ar).diagnostics,s);l&&s.actions[a].apply(e,l.from,l.to)}}else return;r.preventDefault()},i=r=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(r.target)&&this.moveSelection(s)};this.list=Et("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:i}),this.dom=Et("div",{class:"cm-panel-lint"},this.list,Et("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>qT(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(ar).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(ar),i=0,r=!1,s=null,o=new Set;for(e.between(0,this.view.state.doc.length,(a,l,{spec:c})=>{for(let u of c.diagnostics){if(o.has(u))continue;o.add(u);let d=-1,f;for(let p=i;p<this.items.length;p++)if(this.items[p].diagnostic==u){d=p;break}d<0?(f=new YT(this.view,u),this.items.splice(i,0,f),r=!0):(f=this.items[d],d>i&&(this.items.splice(i,d-i),r=!0)),n&&f.diagnostic==n.diagnostic?f.dom.hasAttribute("aria-selected")||(f.dom.setAttribute("aria-selected","true"),s=f):f.dom.hasAttribute("aria-selected")&&f.dom.removeAttribute("aria-selected"),i++}});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new YT(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:a,panel:l})=>{let c=l.height/this.list.offsetHeight;a.top<l.top?this.list.scrollTop-=(l.top-a.top)/c:a.bottom>l.bottom&&(this.list.scrollTop+=(a.bottom-l.bottom)/c)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function n(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)n();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(ar),i=Id(n.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:Nz.of(i)})}static open(e){return new _p(e)}}function tpe(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function Pg(t){return tpe(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const npe=Te.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Pg("#d11")},".cm-lintRange-warning":{backgroundImage:Pg("orange")},".cm-lintRange-info":{backgroundImage:Pg("#999")},".cm-lintRange-hint":{backgroundImage:Pg("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function ipe(t){return t=="error"?4:t=="warning"?3:t=="info"?2:1}function rpe(t){let e="hint",n=1;for(let i of t){let r=ipe(i.severity);r>n&&(n=r,e=i.severity)}return e}const Tz=[ar,Te.decorations.compute([ar],t=>{let{selected:e,panel:n}=t.field(ar);return!e||!n||e.from==e.to?Qe.none:Qe.set([Ghe.range(e.from,e.to)])}),Oee(Khe,{hideOn:Hhe}),npe],Rz=t=>e=>{const n=t==="down";let i=e.state.selection;for(const r of i.ranges)i=i.addRange(e.moveVertically(r,n));return e.dispatch({selection:i}),!0},spe=Rz("up"),ope=Rz("down"),ape=t=>{let e=null;for(const n of t.state.selection.ranges)if(!n.empty)for(let i=n.from;i<=n.to;){const r=t.state.doc.lineAt(i),s=Math.min(r.to,n.to);e?e=e.addRange(re.range(s,s)):e=re.single(s),i=r.to+1}return e?(t.dispatch({selection:e}),!0):!1},lpe=[{key:"Ctrl-Space",run:jhe},{key:"Escape",run:$he},{key:"ArrowDown",run:Ng(!0)},{key:"ArrowUp",run:Ng(!1)},{key:"PageDown",run:Ng(!0,"page")},{key:"PageUp",run:Ng(!1,"page")},{key:"Enter",run:GT},{key:"Tab",run:GT},{key:"Mod-f",run:vz,scope:"editor search-panel"},{key:"Escape",run:yz,scope:"editor search-panel"},{key:"Alt-Enter",run:hz,scope:"editor search-panel"},{key:"Mod-Alt-Enter",run:pz,scope:"editor search-panel"},{key:"Ctrl-g",run:the},{key:"Mod-d",run:she,preventDefault:!0},{key:"Shift-Mod-l",run:hhe},{key:"Enter",run:OT,shift:OT},{key:"ArrowLeft",run:fT,shift:yT,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:Tfe,shift:jfe},{key:"ArrowRight",run:hT,shift:bT,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:Rfe,shift:$fe},{key:"ArrowUp",run:pT,shift:wT,preventDefault:!0},{key:"ArrowDown",run:mT,shift:xT,preventDefault:!0},{key:"Home",run:vT,shift:CT},{mac:"Cmd-ArrowLeft",run:vT,shift:CT},{key:"Mod-Home",run:ET,shift:NT},{mac:"Cmd-ArrowUp",run:ET,shift:NT},{key:"PageUp",run:D1,shift:ST},{mac:"Ctrl-ArrowUp",run:D1,shift:ST},{key:"PageDown",run:L1,shift:kT},{mac:"Ctrl-ArrowDown",run:L1,shift:kT},{key:"End",run:gT,shift:_T},{mac:"Cmd-ArrowRight",run:gT,shift:_T},{key:"Mod-Alt-ArrowUp",linux:"Shift-Alt-ArrowUp",run:spe,preventDefault:!0},{key:"Mod-Alt-ArrowDown",linux:"Shift-Alt-ArrowDown",run:ope,preventDefault:!0},{key:"Shift-Alt-i",run:ape},{key:"Mod-End",run:AT,shift:PT},{mac:"Cmd-ArrowDown",run:AT,shift:PT},{key:"Mod-a",run:zfe},{key:"Backspace",run:zhe},{key:"Backspace",run:j1,shift:j1},{key:"Delete",run:MT},{key:"Mod-Backspace",mac:"Alt-Backspace",run:TT},{key:"Mod-Delete",mac:"Alt-Delete",run:Vfe},{mac:"Mod-Backspace",run:Hfe},{mac:"Mod-Delete",run:RT},{mac:"Ctrl-b",run:fT,shift:yT,preventDefault:!0},{mac:"Ctrl-f",run:hT,shift:bT},{mac:"Ctrl-p",run:pT,shift:wT},{mac:"Ctrl-n",run:mT,shift:xT},{mac:"Ctrl-a",run:Ofe,shift:Ffe},{mac:"Ctrl-e",run:Ife,shift:Bfe},{mac:"Ctrl-d",run:MT},{mac:"Ctrl-h",run:j1},{mac:"Ctrl-k",run:RT},{mac:"Ctrl-Alt-h",run:TT},{mac:"Ctrl-o",run:Wfe},{mac:"Ctrl-t",run:Gfe},{mac:"Ctrl-v",run:L1},{mac:"Alt-v",run:D1},{key:"Shift-Mod-k",run:Jfe},{key:"Alt-ArrowDown",run:qfe},{key:"Alt-ArrowUp",run:Kfe},{win:"Shift-Alt-ArrowDown",mac:"Shift-Alt-ArrowDown",run:Xfe},{win:"Shift-Alt-ArrowUp",mac:"Shift-Alt-ArrowUp",run:Yfe},{key:"Mod-l",run:Ufe,preventDefault:!0},{key:"Shift-Mod-\\",run:Lfe},{key:"Tab",run:gk,shift:IT,preventDefault:!0},{key:"Mod-[",run:IT},{key:"Mod-]",run:gk},{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:Vde},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:Hde},{key:"Mod-k Mod-0",run:Wde},{key:"Mod-k Mod-j",run:Gde},{key:"Mod-k Mod-c",run:mfe},{key:"Mod-k Mod-u",run:gfe},{key:"Mod-/",run:hfe},{key:"Shift-Alt-a",run:vfe},{key:"Mod-z",run:WB,preventDefault:!0},{key:"Mod-y",run:mk,preventDefault:!0},{key:"Mod-Shift-z",run:mk,preventDefault:!0},{key:"Mod-u",run:_fe,preventDefault:!0},{key:"Mod-Shift-m",run:Yhe},{key:"F8",run:Xhe}];var cpe=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},tu=new WeakMap,Mg=new WeakMap,Tg={},U1=0,Oz=function(t){return t&&(t.host||Oz(t.parentNode))},upe=function(t,e){return e.map(function(n){if(t.contains(n))return n;var i=Oz(n);return i&&t.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},dpe=function(t,e,n,i){var r=upe(e,Array.isArray(t)?t:[t]);Tg[n]||(Tg[n]=new WeakMap);var s=Tg[n],o=[],a=new Set,l=new Set(r),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};r.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else try{var p=f.getAttribute(i),m=p!==null&&p!=="false",g=(tu.get(f)||0)+1,y=(s.get(f)||0)+1;tu.set(f,g),s.set(f,y),o.push(f),g===1&&m&&Mg.set(f,!0),y===1&&f.setAttribute(n,"true"),m||f.setAttribute(i,"true")}catch(v){console.error("aria-hidden: cannot operate on ",f,v)}})};return u(e),a.clear(),U1++,function(){o.forEach(function(d){var f=tu.get(d)-1,p=s.get(d)-1;tu.set(d,f),s.set(d,p),f||(Mg.has(d)||d.removeAttribute(i),Mg.delete(d)),p||d.removeAttribute(n)}),U1--,U1||(tu=new WeakMap,tu=new WeakMap,Mg=new WeakMap,Tg={})}},fpe=function(t,e,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(t)?t:[t]),r=cpe(t);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live], script"))),dpe(i,r,n,"aria-hidden")):function(){return null}},bk=["Enter"," "],hpe=["ArrowDown","PageUp","Home"],Iz=["ArrowUp","PageDown","End"],ppe=[...hpe,...Iz],mpe={ltr:[...bk,"ArrowRight"],rtl:[...bk,"ArrowLeft"]},gpe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Tb="Menu",[Cp,vpe,ype]=Rp(Tb),[zc,Dz]=vs(Tb,[ype,Hd,Ny]),BE=Hd(),Lz=Ny(),[Ege,Uc]=zc(Tb),[Age,rm]=zc(Tb),bpe="MenuAnchor",zE=x.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t,r=BE(n);return h.jsx(fb,{...r,...i,ref:e})});zE.displayName=bpe;var UE="MenuPortal",[wpe,jz]=zc(UE,{forceMount:void 0}),$z=t=>{const{__scopeMenu:e,forceMount:n,children:i,container:r}=t,s=Uc(UE,e);return h.jsx(wpe,{scope:e,forceMount:n,children:h.jsx(Go,{present:n||s.open,children:h.jsx(Yp,{asChild:!0,container:r,children:i})})})};$z.displayName=UE;var $r="MenuContent",[xpe,VE]=zc($r),Fz=x.forwardRef((t,e)=>{const n=jz($r,t.__scopeMenu),{forceMount:i=n.forceMount,...r}=t,s=Uc($r,t.__scopeMenu),o=rm($r,t.__scopeMenu);return h.jsx(Cp.Provider,{scope:t.__scopeMenu,children:h.jsx(Go,{present:i||s.open,children:h.jsx(Cp.Slot,{scope:t.__scopeMenu,children:o.modal?h.jsx(Spe,{...r,ref:e}):h.jsx(kpe,{...r,ref:e})})})})}),Spe=x.forwardRef((t,e)=>{const n=Uc($r,t.__scopeMenu),i=x.useRef(null),r=st(e,i);return x.useEffect(()=>{const s=i.current;if(s)return fpe(s)},[]),h.jsx(HE,{...t,ref:r,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:ve(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),kpe=x.forwardRef((t,e)=>{const n=Uc($r,t.__scopeMenu);return h.jsx(HE,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),_pe=pd("MenuContent.ScrollLock"),HE=x.forwardRef((t,e)=>{const{__scopeMenu:n,loop:i=!1,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:p,disableOutsideScroll:m,...g}=t,y=Uc($r,n),v=rm($r,n),b=BE(n),w=Lz(n),k=vpe(n),[_,E]=x.useState(null),C=x.useRef(null),N=st(e,C,y.onContentChange),M=x.useRef(0),R=x.useRef(""),I=x.useRef(0),D=x.useRef(null),K=x.useRef("right"),B=x.useRef(0),W=m?pb:x.Fragment,Y=m?{as:_pe,allowPinchZoom:!0}:void 0,te=$=>{var S,P;const ie=R.current+$,ke=k().filter(O=>!O.disabled),Z=document.activeElement,le=(S=ke.find(O=>O.ref.current===Z))==null?void 0:S.textValue,j=ke.map(O=>O.textValue),L=Lpe(j,ie,le),U=(P=ke.find(O=>O.textValue===L))==null?void 0:P.ref.current;(function O(T){R.current=T,window.clearTimeout(M.current),T!==""&&(M.current=window.setTimeout(()=>O(""),1e3))})(ie),U&&setTimeout(()=>U.focus())};x.useEffect(()=>()=>window.clearTimeout(M.current),[]),KC();const V=x.useCallback($=>{var ke,Z;return K.current===((ke=D.current)==null?void 0:ke.side)&&$pe($,(Z=D.current)==null?void 0:Z.area)},[]);return h.jsx(xpe,{scope:n,searchRef:R,onItemEnter:x.useCallback($=>{V($)&&$.preventDefault()},[V]),onItemLeave:x.useCallback($=>{var ie;V($)||((ie=C.current)==null||ie.focus(),E(null))},[V]),onTriggerLeave:x.useCallback($=>{V($)&&$.preventDefault()},[V]),pointerGraceTimerRef:I,onPointerGraceIntentChange:x.useCallback($=>{D.current=$},[]),children:h.jsx(W,{...Y,children:h.jsx(lb,{asChild:!0,trapped:r,onMountAutoFocus:ve(s,$=>{var ie;$.preventDefault(),(ie=C.current)==null||ie.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:h.jsx(Kp,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:p,children:h.jsx(V5,{asChild:!0,...w,dir:v.dir,orientation:"vertical",loop:i,currentTabStopId:_,onCurrentTabStopIdChange:E,onEntryFocus:ve(l,$=>{v.isUsingKeyboardRef.current||$.preventDefault()}),preventScrollOnEntryFocus:!0,children:h.jsx(rE,{role:"menu","aria-orientation":"vertical","data-state":t9(y.open),"data-radix-menu-content":"",dir:v.dir,...b,...g,ref:N,style:{outline:"none",...g.style},onKeyDown:ve(g.onKeyDown,$=>{const ke=$.target.closest("[data-radix-menu-content]")===$.currentTarget,Z=$.ctrlKey||$.altKey||$.metaKey,le=$.key.length===1;ke&&($.key==="Tab"&&$.preventDefault(),!Z&&le&&te($.key));const j=C.current;if($.target!==j||!ppe.includes($.key))return;$.preventDefault();const U=k().filter(S=>!S.disabled).map(S=>S.ref.current);Iz.includes($.key)&&U.reverse(),Ipe(U)}),onBlur:ve(t.onBlur,$=>{$.currentTarget.contains($.target)||(window.clearTimeout(M.current),R.current="")}),onPointerMove:ve(t.onPointerMove,Ep($=>{const ie=$.target,ke=B.current!==$.clientX;if($.currentTarget.contains(ie)&&ke){const Z=$.clientX>B.current?"right":"left";K.current=Z,B.current=$.clientX}}))})})})})})})});Fz.displayName=$r;var Cpe="MenuGroup",WE=x.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return h.jsx(Ue.div,{role:"group",...i,ref:e})});WE.displayName=Cpe;var Epe="MenuLabel",Bz=x.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return h.jsx(Ue.div,{...i,ref:e})});Bz.displayName=Epe;var Jv="MenuItem",XT="menu.itemSelect",Rb=x.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:i,...r}=t,s=x.useRef(null),o=rm(Jv,t.__scopeMenu),a=VE(Jv,t.__scopeMenu),l=st(e,s),c=x.useRef(!1),u=()=>{const d=s.current;if(!n&&d){const f=new CustomEvent(XT,{bubbles:!0,cancelable:!0});d.addEventListener(XT,p=>i==null?void 0:i(p),{once:!0}),P_(d,f),f.defaultPrevented?c.current=!1:o.onClose()}};return h.jsx(zz,{...r,ref:l,disabled:n,onClick:ve(t.onClick,u),onPointerDown:d=>{var f;(f=t.onPointerDown)==null||f.call(t,d),c.current=!0},onPointerUp:ve(t.onPointerUp,d=>{var f;c.current||(f=d.currentTarget)==null||f.click()}),onKeyDown:ve(t.onKeyDown,d=>{const f=a.searchRef.current!=="";n||f&&d.key===" "||bk.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});Rb.displayName=Jv;var zz=x.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:i=!1,textValue:r,...s}=t,o=VE(Jv,n),a=Lz(n),l=x.useRef(null),c=st(e,l),[u,d]=x.useState(!1),[f,p]=x.useState("");return x.useEffect(()=>{const m=l.current;m&&p((m.textContent??"").trim())},[s.children]),h.jsx(Cp.ItemSlot,{scope:n,disabled:i,textValue:r??f,children:h.jsx(H5,{asChild:!0,...a,focusable:!i,children:h.jsx(Ue.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":i||void 0,"data-disabled":i?"":void 0,...s,ref:c,onPointerMove:ve(t.onPointerMove,Ep(m=>{i?o.onItemLeave(m):(o.onItemEnter(m),m.defaultPrevented||m.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ve(t.onPointerLeave,Ep(m=>o.onItemLeave(m))),onFocus:ve(t.onFocus,()=>d(!0)),onBlur:ve(t.onBlur,()=>d(!1))})})})}),Ape="MenuCheckboxItem",Uz=x.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:i,...r}=t;return h.jsx(Kz,{scope:t.__scopeMenu,checked:n,children:h.jsx(Rb,{role:"menuitemcheckbox","aria-checked":Zv(n)?"mixed":n,...r,ref:e,"data-state":KE(n),onSelect:ve(r.onSelect,()=>i==null?void 0:i(Zv(n)?!0:!n),{checkForDefaultPrevented:!1})})})});Uz.displayName=Ape;var Vz="MenuRadioGroup",[Npe,Ppe]=zc(Vz,{value:void 0,onValueChange:()=>{}}),Hz=x.forwardRef((t,e)=>{const{value:n,onValueChange:i,...r}=t,s=dr(i);return h.jsx(Npe,{scope:t.__scopeMenu,value:n,onValueChange:s,children:h.jsx(WE,{...r,ref:e})})});Hz.displayName=Vz;var Wz="MenuRadioItem",Gz=x.forwardRef((t,e)=>{const{value:n,...i}=t,r=Ppe(Wz,t.__scopeMenu),s=n===r.value;return h.jsx(Kz,{scope:t.__scopeMenu,checked:s,children:h.jsx(Rb,{role:"menuitemradio","aria-checked":s,...i,ref:e,"data-state":KE(s),onSelect:ve(i.onSelect,()=>{var o;return(o=r.onValueChange)==null?void 0:o.call(r,n)},{checkForDefaultPrevented:!1})})})});Gz.displayName=Wz;var GE="MenuItemIndicator",[Kz,Mpe]=zc(GE,{checked:!1}),qz=x.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:i,...r}=t,s=Mpe(GE,n);return h.jsx(Go,{present:i||Zv(s.checked)||s.checked===!0,children:h.jsx(Ue.span,{...r,ref:e,"data-state":KE(s.checked)})})});qz.displayName=GE;var Tpe="MenuSeparator",Yz=x.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return h.jsx(Ue.div,{role:"separator","aria-orientation":"horizontal",...i,ref:e})});Yz.displayName=Tpe;var Rpe="MenuArrow",Xz=x.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t,r=BE(n);return h.jsx(sE,{...r,...i,ref:e})});Xz.displayName=Rpe;var Ope="MenuSub",[Nge,Jz]=zc(Ope),qf="MenuSubTrigger",Zz=x.forwardRef((t,e)=>{const n=Uc(qf,t.__scopeMenu),i=rm(qf,t.__scopeMenu),r=Jz(qf,t.__scopeMenu),s=VE(qf,t.__scopeMenu),o=x.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=s,c={__scopeMenu:t.__scopeMenu},u=x.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return x.useEffect(()=>u,[u]),x.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),l(null)}},[a,l]),h.jsx(zE,{asChild:!0,...c,children:h.jsx(zz,{id:r.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":r.contentId,"data-state":t9(n.open),...t,ref:Ey(e,r.onTriggerChange),onClick:d=>{var f;(f=t.onClick)==null||f.call(t,d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:ve(t.onPointerMove,Ep(d=>{s.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:ve(t.onPointerLeave,Ep(d=>{var p,m;u();const f=(p=n.content)==null?void 0:p.getBoundingClientRect();if(f){const g=(m=n.content)==null?void 0:m.dataset.side,y=g==="right",v=y?-5:5,b=f[y?"left":"right"],w=f[y?"right":"left"];s.onPointerGraceIntentChange({area:[{x:d.clientX+v,y:d.clientY},{x:b,y:f.top},{x:w,y:f.top},{x:w,y:f.bottom},{x:b,y:f.bottom}],side:g}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(d),d.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:ve(t.onKeyDown,d=>{var p;const f=s.searchRef.current!=="";t.disabled||f&&d.key===" "||mpe[i.dir].includes(d.key)&&(n.onOpenChange(!0),(p=n.content)==null||p.focus(),d.preventDefault())})})})});Zz.displayName=qf;var Qz="MenuSubContent",e9=x.forwardRef((t,e)=>{const n=jz($r,t.__scopeMenu),{forceMount:i=n.forceMount,...r}=t,s=Uc($r,t.__scopeMenu),o=rm($r,t.__scopeMenu),a=Jz(Qz,t.__scopeMenu),l=x.useRef(null),c=st(e,l);return h.jsx(Cp.Provider,{scope:t.__scopeMenu,children:h.jsx(Go,{present:i||s.open,children:h.jsx(Cp.Slot,{scope:t.__scopeMenu,children:h.jsx(HE,{id:a.contentId,"aria-labelledby":a.triggerId,...r,ref:c,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var d;o.isUsingKeyboardRef.current&&((d=l.current)==null||d.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:ve(t.onFocusOutside,u=>{u.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:ve(t.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:ve(t.onKeyDown,u=>{var p;const d=u.currentTarget.contains(u.target),f=gpe[o.dir].includes(u.key);d&&f&&(s.onOpenChange(!1),(p=a.trigger)==null||p.focus(),u.preventDefault())})})})})})});e9.displayName=Qz;function t9(t){return t?"open":"closed"}function Zv(t){return t==="indeterminate"}function KE(t){return Zv(t)?"indeterminate":t?"checked":"unchecked"}function Ipe(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function Dpe(t,e){return t.map((n,i)=>t[(e+i)%t.length])}function Lpe(t,e,n){const r=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=Dpe(t,Math.max(s,0));r.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.toLowerCase().startsWith(r.toLowerCase()));return l!==n?l:void 0}function jpe(t,e){const{x:n,y:i}=t;let r=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s],l=e[o],c=a.x,u=a.y,d=l.x,f=l.y;u>i!=f>i&&n<(d-c)*(i-u)/(f-u)+c&&(r=!r)}return r}function $pe(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return jpe(n,e)}function Ep(t){return e=>e.pointerType==="mouse"?t(e):void 0}var Fpe=zE,Bpe=$z,zpe=Fz,Upe=WE,Vpe=Bz,Hpe=Rb,Wpe=Uz,Gpe=Hz,Kpe=Gz,qpe=qz,Ype=Yz,Xpe=Xz,Jpe=Zz,Zpe=e9,n9="DropdownMenu",[Qpe,Pge]=vs(n9,[Dz]),Vi=Dz(),[Mge,i9]=Qpe(n9),r9="DropdownMenuTrigger",eme=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:i=!1,...r}=t,s=i9(r9,n),o=Vi(n);return h.jsx(Fpe,{asChild:!0,...o,children:h.jsx(Ue.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":i?"":void 0,disabled:i,...r,ref:Ey(e,s.triggerRef),onPointerDown:ve(t.onPointerDown,a=>{!i&&a.button===0&&a.ctrlKey===!1&&(s.onOpenToggle(),s.open||a.preventDefault())}),onKeyDown:ve(t.onKeyDown,a=>{i||(["Enter"," "].includes(a.key)&&s.onOpenToggle(),a.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});eme.displayName=r9;var tme="DropdownMenuPortal",s9=t=>{const{__scopeDropdownMenu:e,...n}=t,i=Vi(e);return h.jsx(Bpe,{...i,...n})};s9.displayName=tme;var o9="DropdownMenuContent",a9=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=i9(o9,n),s=Vi(n),o=x.useRef(!1);return h.jsx(zpe,{id:r.contentId,"aria-labelledby":r.triggerId,...s,...i,ref:e,onCloseAutoFocus:ve(t.onCloseAutoFocus,a=>{var l;o.current||(l=r.triggerRef.current)==null||l.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:ve(t.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!r.modal||u)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});a9.displayName=o9;var nme="DropdownMenuGroup",ime=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Vi(n);return h.jsx(Upe,{...r,...i,ref:e})});ime.displayName=nme;var rme="DropdownMenuLabel",l9=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Vi(n);return h.jsx(Vpe,{...r,...i,ref:e})});l9.displayName=rme;var sme="DropdownMenuItem",c9=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Vi(n);return h.jsx(Hpe,{...r,...i,ref:e})});c9.displayName=sme;var ome="DropdownMenuCheckboxItem",u9=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Vi(n);return h.jsx(Wpe,{...r,...i,ref:e})});u9.displayName=ome;var ame="DropdownMenuRadioGroup",lme=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Vi(n);return h.jsx(Gpe,{...r,...i,ref:e})});lme.displayName=ame;var cme="DropdownMenuRadioItem",d9=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Vi(n);return h.jsx(Kpe,{...r,...i,ref:e})});d9.displayName=cme;var ume="DropdownMenuItemIndicator",f9=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Vi(n);return h.jsx(qpe,{...r,...i,ref:e})});f9.displayName=ume;var dme="DropdownMenuSeparator",h9=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Vi(n);return h.jsx(Ype,{...r,...i,ref:e})});h9.displayName=dme;var fme="DropdownMenuArrow",hme=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Vi(n);return h.jsx(Xpe,{...r,...i,ref:e})});hme.displayName=fme;var pme="DropdownMenuSubTrigger",p9=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Vi(n);return h.jsx(Jpe,{...r,...i,ref:e})});p9.displayName=pme;var mme="DropdownMenuSubContent",m9=x.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Vi(n);return h.jsx(Zpe,{...r,...i,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});m9.displayName=mme;var gme=s9,g9=a9,v9=l9,y9=c9,b9=u9,w9=d9,x9=f9,S9=h9,k9=p9,_9=m9;const vme=x.forwardRef(({className:t,inset:e,children:n,...i},r)=>h.jsxs(k9,{ref:r,className:ee("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-mantis-500 data-[state=open]:bg-mantis-500",e&&"pl-8",t),...i,children:[n,h.jsx("span",{className:"icon-[lucide--chevron-right] ml-auto block size-4"})]}));vme.displayName=k9.displayName;const yme=x.forwardRef(({className:t,...e},n)=>h.jsx(_9,{ref:n,className:ee("z-50 min-w-32 overflow-hidden rounded-md border bg-stone-900 p-1 text-white shadow-lg transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...e}));yme.displayName=_9.displayName;const bme=x.forwardRef(({className:t,sideOffset:e=4,...n},i)=>h.jsx(gme,{children:h.jsx(g9,{ref:i,sideOffset:e,className:ee("z-50 min-w-32 overflow-hidden rounded-md border border-stone-600 bg-stone-900 p-1 text-white shadow-md transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...n})}));bme.displayName=g9.displayName;const wme=x.forwardRef(({className:t,inset:e,...n},i)=>h.jsx(y9,{ref:i,className:ee("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));wme.displayName=y9.displayName;const xme=x.forwardRef(({className:t,children:e,checked:n,...i},r)=>h.jsxs(b9,{ref:r,className:ee("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...i,children:[h.jsx("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:h.jsx(x9,{children:h.jsx("span",{className:"icon-[lucide--check] size-4"})})}),e]}));xme.displayName=b9.displayName;const Sme=x.forwardRef(({className:t,children:e,...n},i)=>h.jsxs(w9,{ref:i,className:ee("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[h.jsx("span",{className:"absolute left-2 flex size-3.5 items-center justify-center",children:h.jsx(x9,{children:h.jsx("span",{className:"icon-[lucide--circle-dot] block size-4"})})}),e]}));Sme.displayName=w9.displayName;const kme=x.forwardRef(({className:t,inset:e,...n},i)=>h.jsx(v9,{ref:i,className:ee("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));kme.displayName=v9.displayName;const _me=x.forwardRef(({className:t,...e},n)=>h.jsx(S9,{ref:n,className:ee("-mx-1 my-1 h-px bg-stone-600",t),...e}));_me.displayName=S9.displayName;const qE=kL("vonsim-program",By(yn().language,"editor.example"),void 0,{getOnInit:!0}),C9=()=>{const t=z.get(qE);return typeof t=="string"?t:""},Cme=qn.fromClass(class{constructor(t){this.view=t}update(t){t.docChanged&&(z.set(qE,this.view.state.doc.toString()),z.set(Ev,!0))}}),JT=de(null);de(t=>t(JT),(t,e,n)=>{e(JT,n)});const Eme=de("");de(t=>t(Eme)!==t(qE));const wk=de(0),ZT=de(null),QT=de(t=>t(ZT),(t,e,n)=>{e(ZT,n)}),E9=de(""),Ame=de(()=>typeof window<"u"&&window.codemirror?window.codemirror.state.doc.toString():C9()||""),Nme=de(t=>t(E9)!==t(Ame)),V1="showSaveFilePicker"in window;function Pme(){const t=at(wk),e=at(QT),n=vS(QT),i=vS(E9),r=at(Nme),s=e&&r;x.useEffect(()=>{if(window.codemirror){const c=()=>{};return window.codemirror.dom.addEventListener("input",c),()=>{window.codemirror.dom.removeEventListener("input",c)}}},[]);const o=x.useCallback(async()=>{if(!V1){gi({title:"editor.files.unsupported",variant:"error"});return}if(!(s&&!confirm("editor.files.unsaved")))try{const[c]=await window.showOpenFilePicker({multiple:!1,excludeAcceptAllOption:!0,types:[{accept:{"text/plain":[".txt",".asm",".vonsim"]}}]});if(await c.requestPermission({mode:"readwrite"})==="granted"){n(c);const f=await(await c.getFile()).text();i(f),window.codemirror.dispatch({changes:{from:0,to:window.codemirror.state.doc.length,insert:f}})}}catch(c){console.error(c),gi({title:"editor.files.open-error",variant:"error"})}},[s,n,i]),a=x.useCallback(async()=>{if(!V1){gi({title:"editor.files.unsupported",variant:"error"});return}if(!e){gi({title:"No hay archivo abierto para guardar",variant:"error"});return}if(s)try{const c=window.codemirror.state.doc.toString(),u=await e.createWritable({keepExistingData:!1});await u.write(c),await u.close(),i(c),gi({title:"Archivo guardado",variant:"info"})}catch(c){console.error(c),gi({title:"editor.files.save-error",variant:"error"})}},[e,s,i]),l=x.useCallback(async()=>{const c=window.codemirror.state.doc.toString(),u=(e==null?void 0:e.name)||`vonsim-${new Date().toISOString().slice(0,10)}.asm`;if(V1)try{const d=await window.showSaveFilePicker({suggestedName:u,excludeAcceptAllOption:!0,types:[{accept:{"text/plain":[".txt",".asm",".vonsim"]}}]});if(await d.requestPermission({mode:"readwrite"})==="granted"){n(d);const p=await d.createWritable({keepExistingData:!1});await p.write(c),await p.close(),i(c),gi({title:"Archivo guardado",variant:"info"})}}catch(d){console.error(d),gi({title:"editor.files.save-error",variant:"error"})}else{const d=new Blob([c],{type:"text/plain"}),f=URL.createObjectURL(d),p=document.createElement("a");p.style.display="none",p.href=f,p.download=u,document.body.appendChild(p),p.click(),document.body.removeChild(p),URL.revokeObjectURL(f)}},[e,n,i]);return h.jsxs("div",{"data-testid":"status-bar",className:"flex items-center justify-between border-t border-stone-700 bg-gradient-to-r from-stone-800 to-stone-900 px-4 py-0.5 font-sans text-xs text-stone-300 shadow-inner",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[e&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"font-medium text-white transition-colors",children:e.name}),s&&h.jsx("span",{className:"size-2 rounded-full bg-orange-400"})]}),e&&h.jsx("div",{className:"h-4 w-px bg-stone-600"}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(us,{content:"editor.files.open",position:"top",children:h.jsx(ht,{variant:"ghost",size:"sm",onClick:o,className:"hover-lift","aria-label":"editor.files.open",children:h.jsx("span",{className:"icon-[lucide--folder-open] size-4"})})}),h.jsx(us,{content:"editor.files.save",position:"top",children:h.jsx(ht,{variant:"ghost",size:"sm",onClick:a,disabled:!e||!s,className:"hover-lift","aria-label":"editor.files.save",children:h.jsx("span",{className:"icon-[lucide--save] size-4"})})}),h.jsx(us,{content:"editor.files.save-as",position:"top",children:h.jsx(ht,{variant:"ghost",size:"sm",onClick:l,className:"hover-lift","aria-label":"editor.files.save-as",children:h.jsx("span",{className:"icon-[lucide--save-all] size-4"})})})]})]}),h.jsx("div",{className:"flex items-center gap-3",children:h.jsxs("div",{className:ee("flex items-center gap-1.5 rounded-full px-2 py-0.5 font-medium transition-colors",t>0?"border border-red-500/30 bg-red-500/20 text-red-300":"border border-green-500/30 bg-green-500/20 text-green-300"),children:[h.jsx("div",{className:ee("size-2 rounded-full",t>0?"bg-red-400":"bg-green-400")}),h.jsx("span",{className:"font-mono",children:t>0?`${t} error${t>1?"es":""}`:"Sin errores"})]})})]})}const _i={character:ze.character,comment:ze.comment,"data-directive":Sn.define(),identifier:ze.variableName,instruction:Sn.define(),label:ze.labelName,number:ze.number,operator:ze.operator,offset:Sn.define(),"ptr-size":Sn.define(),punctuation:ze.punctuation,register:Sn.define(),special:Sn.define(),string:ze.string,unassigned:Sn.define()},Mme=AE.define({name:"vonsim",token:t=>{if(t.eatSpace())return null;if(t.match(/[01]+b\b/i)||t.match(/\d[a-f\d]*h\b/i)||t.match(/\d+\b/))return"number";if(t.match(/'[^'\n]'/))return"character";if(t.eat('"'))return t.eatWhile(/[^"\n]/),t.eat('"'),"string";if(t.eat(/[*+-]/))return"operator";if(t.eat(/[(),[\]]/))return"punctuation";if(t.eat("?"))return"unassigned";if(t.eat(";"))return t.skipToEnd(),"comment";if(t.eat(/[a-z_.]/i)){t.eatWhile(/\w/);const e=t.current().toUpperCase();return e==="ORG"||e==="END"||e===".DATA"||e===".CODE"?"special":e==="OFFSET"?"offset":e==="BYTE"||e==="WORD"||e==="PTR"?"ptr-size":Z_.includes(e)?"data-directive":Q_.includes(e)?"instruction":pv.includes(e)?"register":t.eat(":")?"label":"identifier"}return t.next(),null},languageData:{commentTokens:{line:";"},closeBrackets:{brackets:["(","[",'"']}},tokenTable:_i}),Tme=Zde(Eb.define([{tag:_i.character,class:"text-orange-300"},{tag:_i.comment,class:"text-stone-500 italic"},{tag:_i["data-directive"],class:"text-rose-400/80"},{tag:_i.instruction,class:"text-mantis-400"},{tag:_i.number,class:"text-cyan-300/60"},{tag:_i.operator,class:"text-rose-300"},{tag:_i.offset,class:"text-rose-400/80 italic"},{tag:_i["ptr-size"],class:"text-rose-400/80 italic"},{tag:_i.punctuation,class:"text-stone-600"},{tag:_i.register,class:"text-emerald-400/80"},{tag:_i.special,class:"text-yellow-300/80"},{tag:_i.string,class:"text-orange-300"},{tag:_i.unassigned,class:"text-rose-400/80"}])),Rme=Qhe(t=>{const e=t.state.doc.toString(),n=IL(e);if(n.success)return z.set(wk,0),[];const i=n,r=yn().language,s=i.errors.map(o=>{var c,u;const a=((c=o.position)==null?void 0:c.start)??0,l=((u=o.position)==null?void 0:u.end)??e.length;return{message:o.translate(r),severity:"error",from:a,to:l}});return z.set(wk,s.length),s},{delay:200});function Ome(){return new Nde(Mme,[Tme,Rme])}function A9({className:t}){const[e,n]=x.useState(),i=AX(),r=x.useCallback(s=>{s&&n(s)},[]);return x.useEffect(()=>{if(e)return window.codemirror=new Te({state:ot.create({doc:C9()||"",extensions:[ot.tabSize.of(2),g8.of(ot.readOnly.of(!1)),Cme,Hee(),Yee,Kee(),vee(),kfe(),lee(),Te.domEventHandlers({drop:s=>s.preventDefault()}),ot.allowMultipleSelections.of(!0),kee(),Te.updateListener.of(s=>{s.selectionSet}),a8.of([{key:"Escape",run:s=>(s.dispatch({selection:re.create([s.state.selection.main],0)}),!0)},{key:"Tab",run:s=>s.state.selection.ranges.some(o=>!o.empty)?gk(s):(s.dispatch(s.state.update(s.state.replaceSelection(" ".repeat(s.state.tabSize)),{scrollIntoView:!0,userEvent:"input"})),!0)},...lpe]),Ome()]}),parent:e}),()=>{var s;return(s=window.codemirror)==null?void 0:s.destroy()}},[e]),h.jsxs("div",{className:ee("flex flex-col rounded-lg border border-stone-700 bg-gradient-to-br from-stone-900 to-stone-800 shadow-xl",t),children:[h.jsx("div",{ref:r,className:"grow overflow-auto rounded-t-lg font-mono",style:{fontSize:`${i}px`,lineHeight:1.25}}),h.jsx(Pme,{})]})}const Ime="modulepreload",Dme=function(t){return"/VonSim8/"+t},eR={},Lme=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(n.map(l=>{if(l=Dme(l),l in eR)return;eR[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":Ime,c||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),c)return new Promise((f,p)=>{d.addEventListener("load",f),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};function jme(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:i,onRegistered:r,onRegisteredSW:s,onRegisterError:o}=t;let a,l;const c=async(d=!0)=>{await l};async function u(){if("serviceWorker"in navigator){if(a=await Lme(async()=>{const{Workbox:d}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:d}},[]).then(({Workbox:d})=>new d("/VonSim8/sw.js",{scope:"/VonSim8/",type:"classic"})).catch(d=>{o==null||o(d)}),!a)return;a.addEventListener("activated",d=>{(d.isUpdate||d.isExternal)&&window.location.reload()}),a.addEventListener("installed",d=>{d.isUpdate||i==null||i()}),a.register({immediate:e}).then(d=>{s?s("/VonSim8/sw.js",d):r==null||r(d)}).catch(d=>{o==null||o(d)})}}return l=u(),c}const $me=()=>{const{addNotification:t}=Yre();x.useEffect(()=>{const e=jme({onNeedRefresh(){t({type:"info",title:"Nueva versión disponible",message:"Hay una nueva versión de VonSim8 disponible. Haz clic en 'Actualizar' para aplicar los cambios."})},onOfflineReady(){t({type:"success",title:"Modo offline disponible",message:"VonSim8 ahora está disponible para uso offline."})},onRegistered(i){console.log("Service Worker registrado:",i)},onRegisterError(i){console.error("Error al registrar Service Worker:",i),t({type:"error",title:"Error de actualización",message:"No se pudo configurar la actualización automática. Algunas funciones pueden no estar disponibles."})}}),n=()=>{e()};return window.updateVonSim8=n,()=>{delete window.updateVonSim8}},[t])},N9=x.memo(()=>{const t=Y_(),e=MX(),n=XG("(max-width: 640px)"),i=Rt();$me();const r=x.useMemo(()=>({filter:e}),[e]);return x.useEffect(()=>{const s="vonsim8-commit-hash",o=localStorage.getItem(s);o&&o!=="86d1953"&&gi({title:i("update.update-available"),description:"",action:h.jsx(LF,{altText:i("update.reload"),onClick:()=>window.location.reload(),children:i("update.reload")}),variant:"info",duration:6e4}),localStorage.setItem(s,"86d1953")},[i]),h.jsxs("div",{"data-testid":"app-container",className:"flex h-screen w-screen flex-col bg-black text-white",lang:t,style:r,children:[h.jsx(dF,{"data-testid":"header"}),n?h.jsx(M9,{}):h.jsx(P9,{}),h.jsx(TL,{"data-testid":"footer"}),h.jsx(UF,{}),h.jsx(pF,{})]})});N9.displayName="App";const P9=x.memo(()=>{const[t]=Ip(wb);return h.jsxs(xD,{autoSaveId:"layout",direction:"horizontal",tagName:"main",className:"overflow-auto px-2",children:[h.jsx(Yg,{id:"panel-editor",order:1,minSize:30,defaultSize:50,tagName:"section",className:"rounded-lg border border-stone-600 bg-black","data-testid":"panel-editor",children:h.jsx(A9,{className:"size-full"})}),h.jsx(bS,{className:"w-2"}),h.jsx(Yg,{id:"panel-computer",order:2,minSize:20,defaultSize:50,tagName:"section",className:"computer-background rounded-lg border border-stone-600","data-testid":"panel-computer",children:h.jsx(yB,{})}),t&&h.jsxs(h.Fragment,{children:[h.jsx(bS,{className:"w-2"}),h.jsx(Yg,{id:"panel-settings",order:3,minSize:30,defaultSize:25,tagName:"section",className:"rounded-lg border border-stone-600 bg-stone-800","data-testid":"panel-settings",children:h.jsx(lF,{className:"size-full"})})]})]})});P9.displayName="DesktopLayout";const M9=x.memo(()=>{const t=Rt(),[e,n]=x.useState("editor"),[i,r]=Ip(wb),s=at(es),o=x.useMemo(()=>"metadata"in s&&s.metadata?`${s.metadata.name}${s.metadata.operands.length?" "+s.metadata.operands.join(", "):""}`:"",[s]),a=x.useMemo(()=>i?"settings":e,[i,e]),l=x.useCallback(u=>{i&&r(!1),n(u)},[i,r]),c=x.useMemo(()=>{switch(a){case"editor":return"Editor";case"computer":return"Computadora";case"settings":return"Configuración";default:return""}},[a]);return h.jsx(G5,{value:a,onValueChange:l,asChild:!0,children:h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"sticky top-0 z-30 w-full border-b border-stone-700 bg-stone-900 px-4 py-2",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-xs text-stone-500",children:"Pestaña:"}),h.jsx("span",{className:"text-sm font-medium text-white",children:c})]}),a==="computer"&&h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"text-xs text-stone-500",children:"Instrucción actual:"}),h.jsx("div",{className:"font-mono text-sm text-mantis-400",children:o||h.jsx("span",{className:"italic text-stone-400",children:"Sin instrucción"})})]})]})}),h.jsx(qg,{value:"editor",asChild:!0,children:h.jsx("section",{className:"mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-black data-[state=inactive]:hidden","data-testid":"panel-editor",children:h.jsx(A9,{className:"size-full"})})}),h.jsx(qg,{value:"computer",asChild:!0,children:h.jsx("section",{className:"computer-background mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden","data-testid":"panel-computer",children:h.jsx(yB,{})})}),h.jsx(qg,{value:"settings",asChild:!0,children:h.jsx("section",{className:"mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden","data-testid":"panel-settings",children:h.jsx(lF,{className:"size-full"})})}),h.jsx("div",{className:"border-t border-stone-700 bg-stone-900 p-2",children:h.jsxs(q5,{className:"grid grid-cols-3 gap-2",children:[h.jsxs(Kg,{value:"editor",className:"inline-flex flex-col items-center justify-center rounded-lg py-2 text-xs font-medium text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-mantis-600 data-[state=active]:text-white",children:[h.jsx("span",{className:"icon-[lucide--file-terminal] mb-1 size-5"}),t("control.tabs.editor")]}),h.jsxs(Kg,{value:"computer",className:"inline-flex flex-col items-center justify-center rounded-lg py-2 text-xs font-medium text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-mantis-600 data-[state=active]:text-white",children:[h.jsx("span",{className:"icon-[lucide--computer] mb-1 size-5"}),t("control.tabs.computer")]}),h.jsxs(Kg,{value:"settings",className:"inline-flex flex-col items-center justify-center rounded-lg py-2 text-xs font-medium text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-mantis-600 data-[state=active]:text-white",children:[h.jsx("span",{className:"icon-[lucide--settings] mb-1 size-5"}),"Configuración"]})]})})]})})});M9.displayName="MobileLayout";function Fme(){const{toastList:t}=nte();return h.jsxs(zle,{children:[t.map(({id:e,title:n,description:i,action:r,variant:s,otherProps:o})=>h.jsxs(DF,{...o,variant:s,children:[h.jsxs("div",{className:"grid gap-1",children:[n&&h.jsx($F,{children:n}),i&&h.jsx(FF,{children:i})]}),r,h.jsx(jF,{})]},e)),h.jsx(IF,{})]})}window.codemirror=null;const Bme=j5(document.getElementById("root"));Bme.render(h.jsx(x.StrictMode,{children:h.jsx(AV,{client:b8,children:h.jsxs(Jre,{children:[h.jsx(qY,{children:h.jsx(N9,{})}),h.jsx(Fme,{})]})})}));
