var PL=Object.defineProperty;var $L=(t,e,n)=>e in t?PL(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ae=(t,e,n)=>($L(t,typeof e!="symbol"?e+"":e,n),n),m0=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var E=(t,e,n)=>(m0(t,e,"read from private field"),n?n.call(t):e.get(t)),$e=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},Z=(t,e,n,i)=>(m0(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n);var pt=(t,e,n)=>(m0(t,e,"access private method"),n);function TL(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var OL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Eu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var LP={exports:{}},rv={},BP={exports:{}},qe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ih=Symbol.for("react.element"),NL=Symbol.for("react.portal"),RL=Symbol.for("react.fragment"),ML=Symbol.for("react.strict_mode"),DL=Symbol.for("react.profiler"),IL=Symbol.for("react.provider"),LL=Symbol.for("react.context"),BL=Symbol.for("react.forward_ref"),jL=Symbol.for("react.suspense"),FL=Symbol.for("react.memo"),zL=Symbol.for("react.lazy"),s_=Symbol.iterator;function UL(t){return t===null||typeof t!="object"?null:(t=s_&&t[s_]||t["@@iterator"],typeof t=="function"?t:null)}var jP={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},FP=Object.assign,zP={};function Au(t,e,n){this.props=t,this.context=e,this.refs=zP,this.updater=n||jP}Au.prototype.isReactComponent={};Au.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Au.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function UP(){}UP.prototype=Au.prototype;function H1(t,e,n){this.props=t,this.context=e,this.refs=zP,this.updater=n||jP}var W1=H1.prototype=new UP;W1.constructor=H1;FP(W1,Au.prototype);W1.isPureReactComponent=!0;var o_=Array.isArray,VP=Object.prototype.hasOwnProperty,G1={current:null},HP={key:!0,ref:!0,__self:!0,__source:!0};function WP(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)VP.call(e,i)&&!HP.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:ih,type:t,key:s,ref:o,props:r,_owner:G1.current}}function VL(t,e){return{$$typeof:ih,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function K1(t){return typeof t=="object"&&t!==null&&t.$$typeof===ih}function HL(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var a_=/\/+/g;function g0(t,e){return typeof t=="object"&&t!==null&&t.key!=null?HL(""+t.key):e.toString(36)}function zp(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ih:case NL:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+g0(o,0):i,o_(r)?(n="",t!=null&&(n=t.replace(a_,"$&/")+"/"),zp(r,e,n,"",function(c){return c})):r!=null&&(K1(r)&&(r=VL(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(a_,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",o_(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+g0(s,a);o+=zp(s,e,n,l,r)}else if(l=UL(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+g0(s,a++),o+=zp(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function $h(t,e,n){if(t==null)return t;var i=[],r=0;return zp(t,i,"","",function(s){return e.call(n,s,r++)}),i}function WL(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ii={current:null},Up={transition:null},GL={ReactCurrentDispatcher:ii,ReactCurrentBatchConfig:Up,ReactCurrentOwner:G1};qe.Children={map:$h,forEach:function(t,e,n){$h(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return $h(t,function(){e++}),e},toArray:function(t){return $h(t,function(e){return e})||[]},only:function(t){if(!K1(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};qe.Component=Au;qe.Fragment=RL;qe.Profiler=DL;qe.PureComponent=H1;qe.StrictMode=ML;qe.Suspense=jL;qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GL;qe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=FP({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=G1.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)VP.call(e,l)&&!HP.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:ih,type:t.type,key:r,ref:s,props:i,_owner:o}};qe.createContext=function(t){return t={$$typeof:LL,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:IL,_context:t},t.Consumer=t};qe.createElement=WP;qe.createFactory=function(t){var e=WP.bind(null,t);return e.type=t,e};qe.createRef=function(){return{current:null}};qe.forwardRef=function(t){return{$$typeof:BL,render:t}};qe.isValidElement=K1;qe.lazy=function(t){return{$$typeof:zL,_payload:{_status:-1,_result:t},_init:WL}};qe.memo=function(t,e){return{$$typeof:FL,type:t,compare:e===void 0?null:e}};qe.startTransition=function(t){var e=Up.transition;Up.transition={};try{t()}finally{Up.transition=e}};qe.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};qe.useCallback=function(t,e){return ii.current.useCallback(t,e)};qe.useContext=function(t){return ii.current.useContext(t)};qe.useDebugValue=function(){};qe.useDeferredValue=function(t){return ii.current.useDeferredValue(t)};qe.useEffect=function(t,e){return ii.current.useEffect(t,e)};qe.useId=function(){return ii.current.useId()};qe.useImperativeHandle=function(t,e,n){return ii.current.useImperativeHandle(t,e,n)};qe.useInsertionEffect=function(t,e){return ii.current.useInsertionEffect(t,e)};qe.useLayoutEffect=function(t,e){return ii.current.useLayoutEffect(t,e)};qe.useMemo=function(t,e){return ii.current.useMemo(t,e)};qe.useReducer=function(t,e,n){return ii.current.useReducer(t,e,n)};qe.useRef=function(t){return ii.current.useRef(t)};qe.useState=function(t){return ii.current.useState(t)};qe.useSyncExternalStore=function(t,e,n){return ii.current.useSyncExternalStore(t,e,n)};qe.useTransition=function(){return ii.current.useTransition()};qe.version="18.2.0";BP.exports=qe;var g=BP.exports;const Wt=Eu(g),X1=TL({__proto__:null,default:Wt},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KL=g,XL=Symbol.for("react.element"),qL=Symbol.for("react.fragment"),YL=Object.prototype.hasOwnProperty,JL=KL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ZL={key:!0,ref:!0,__self:!0,__source:!0};function GP(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)YL.call(e,i)&&!ZL.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:XL,type:t,key:s,ref:o,props:r,_owner:JL.current}}rv.Fragment=qL;rv.jsx=GP;rv.jsxs=GP;LP.exports=rv;var b=LP.exports;function l_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Ne(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?l_(Object(n),!0).forEach(function(i){_e(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l_(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function lw(t){return lw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lw(t)}function qt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c_(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Yt(t,e,n){return e&&c_(t.prototype,e),n&&c_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function _e(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function KP(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cw(t,e)}function Pm(t){return Pm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Pm(t)}function cw(t,e){return cw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},cw(t,e)}function QL(t,e){if(t==null)return{};var n,i,r=function(o,a){if(o==null)return{};var l,c,u={},d=Object.keys(o);for(c=0;c<d.length;c++)l=d[c],a.indexOf(l)>=0||(u[l]=o[l]);return u}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function e5(t,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(t)}function XP(t){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,i=Pm(t);if(e){var r=Pm(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return e5(this,n)}}function Mr(t,e){return function(n){if(Array.isArray(n))return n}(t)||function(n,i){var r=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(r!=null){var s,o,a=[],l=!0,c=!1;try{for(r=r.call(n);!(l=(s=r.next()).done)&&(a.push(s.value),!i||a.length!==i);l=!0);}catch(u){c=!0,o=u}finally{try{l||r.return==null||r.return()}finally{if(c)throw o}}return a}}(t,e)||q1(t,e)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function uw(t){return function(e){if(Array.isArray(e))return dw(e)}(t)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(t)||q1(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function q1(t,e){if(t){if(typeof t=="string")return dw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dw(t,e):void 0}}function dw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function xl(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=q1(t))||e&&t&&typeof t.length=="number"){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(l){throw l},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,o=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var l=n.next();return o=l.done,l},e:function(l){a=!0,s=l},f:function(){try{o||n.return==null||n.return()}finally{if(a)throw s}}}}var Sl={DEBUG:!1,LIB_VERSION:"1.97.1"},t5=Array.isArray,qP=Object.prototype,YP=qP.hasOwnProperty,rh=qP.toString,pn=t5||function(t){return rh.call(t)==="[object Array]"},u_=function(t){return rh.call(t)==="[object Uint8Array]"},zr=function(t){return typeof t=="function"},oa=function(t){return t===Object(t)&&!pn(t)},n5=function(t){if(oa(t)){for(var e in t)if(YP.call(t,e))return!1;return!0}return!1},et=function(t){return t===void 0},Hi=function(t){return rh.call(t)=="[object String]"},mr=function(t){return t===null},Qs=function(t){return rh.call(t)=="[object Number]"},fw=function(t){return rh.call(t)==="[object Boolean]"},JP=Array.prototype,d_=JP.forEach,f_=JP.indexOf,G=typeof window<"u"?window:void 0,h_=G==null?void 0:G.navigator,Te=G==null?void 0:G.document,Ht=h_==null?void 0:h_.userAgent,Un=G??{},p_="[PostHog.js]",he={_log:function(t){if(G&&(Sl.DEBUG||Un.POSTHOG_DEBUG)&&!et(G.console)&&G.console){for(var e=("__rrweb_original__"in G.console[t])?G.console[t].__rrweb_original__:G.console[t],n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];e.apply(void 0,[p_].concat(i))}},info:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];he._log.apply(he,["log"].concat(e))},warn:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];he._log.apply(he,["warn"].concat(e))},error:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];he._log.apply(he,["error"].concat(e))},critical:function(){for(var t,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];(t=console).error.apply(t,[p_].concat(n))},uninitializedWarning:function(t){he.error("You must initialize PostHog before calling ".concat(t))}},Y1={},$m=function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")};function Tc(t,e,n){if(pn(t)){if(d_&&t.forEach===d_)t.forEach(e,n);else if("length"in t&&t.length===+t.length){for(var i=0,r=t.length;i<r;i++)if(i in t&&e.call(n,t[i],i)===Y1)return}}}function yt(t,e,n){if(!mr(t)&&!et(t)){if(pn(t))return Tc(t,e,n);for(var i in t)if(YP.call(t,i)&&e.call(n,t[i],i)===Y1)return}}var bn=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return Tc(n,function(r){for(var s in r)r[s]!==void 0&&(t[s]=r[s])}),t};function at(t,e){return t.indexOf(e)!==-1}function Vp(t){for(var e=Object.keys(t),n=e.length,i=new Array(n);n--;)i[n]=[e[n],t[e[n]]];return i}var ZP=function(){return Date.now=Date.now||function(){return+new Date},Date.now()},m_=function(t){try{return t()}catch{return}},QP=function(t){return function(){try{for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.apply(this,n)}catch(r){he.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),he.critical(r)}}},hw=function(t){var e={};return yt(t,function(n,i){Hi(n)&&n.length>0&&(e[i]=n)}),e},i5=["$performance_raw"];function r5(t,e){return n=t,i=function(s,o){return o&&i5.indexOf(o)>-1?s:Hi(s)&&!mr(e)?s.slice(0,e):s},r=new Set,function s(o,a){return o!==Object(o)?i?i(o,a):o:r.has(o)?void 0:(r.add(o),pn(o)?(l=[],Tc(o,function(c){l.push(s(c))})):(l={},yt(o,function(c,u){r.has(c)||(l[u]=s(c,u))})),l);var l}(n);var n,i,r}function J1(t){var e,n,i,r,s,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a=0,l=0,c="",u=[];if(!t)return t;t=s5(t);do e=(s=t.charCodeAt(a++)<<16|t.charCodeAt(a++)<<8|t.charCodeAt(a++))>>18&63,n=s>>12&63,i=s>>6&63,r=63&s,u[l++]=o.charAt(e)+o.charAt(n)+o.charAt(i)+o.charAt(r);while(a<t.length);switch(c=u.join(""),t.length%3){case 1:c=c.slice(0,-2)+"==";break;case 2:c=c.slice(0,-1)+"="}return c}var s5=function(t){var e,n,i,r,s="";for(e=n=0,i=(t=(t+"").replace(/\r\n/g,`
`).replace(/\r/g,`
`)).length,r=0;r<i;r++){var o=t.charCodeAt(r),a=null;o<128?n++:a=o>127&&o<2048?String.fromCharCode(o>>6|192,63&o|128):String.fromCharCode(o>>12|224,o>>6&63|128,63&o|128),mr(a)||(n>e&&(s+=t.substring(e,n)),s+=a,e=n=r+1)}return n>e&&(s+=t.substring(e,t.length)),s},Ad=function(){function t(e){return e&&(e.preventDefault=t.preventDefault,e.stopPropagation=t.stopPropagation),e}return t.preventDefault=function(){this.returnValue=!1},t.stopPropagation=function(){this.cancelBubble=!0},function(e,n,i,r,s){if(e)if(e.addEventListener&&!r)e.addEventListener(n,i,!!s);else{var o="on"+n,a=e[o];e[o]=function(l,c,u){return function(d){if(d=d||t(G==null?void 0:G.event)){var f,h=!0;zr(u)&&(f=u(d));var p=c.call(l,d);return f!==!1&&p!==!1||(h=!1),h}}}(e,i,a)}else he.error("No valid element provided to register_event")}}();function Pd(t,e){var n=function(){if(!Te)return e("document not found");var i=Te.createElement("script");i.type="text/javascript",i.src=t,i.onload=function(o){return e(void 0,o)},i.onerror=function(o){return e(o)};var r,s=Te.querySelectorAll("body > script");s.length>0?(r=s[0].parentNode)===null||r===void 0||r.insertBefore(i,s[0]):Te.body.appendChild(i)};Te!=null&&Te.body?n():Te==null||Te.addEventListener("DOMContentLoaded",n)}function Z1(t){return t?$m(t).split(/\s+/):[]}function Tm(t){var e="";switch(lw(t.className)){case"string":e=t.className;break;case"object":e=("baseVal"in t.className?t.className.baseVal:null)||t.getAttribute("class")||"";break;default:e=""}return Z1(e)}function Om(t){var e="";return Hp(t)&&!t$(t)&&t.childNodes&&t.childNodes.length&&yt(t.childNodes,function(n){e$(n)&&n.textContent&&(e+=$m(n.textContent).split(/(\s+)/).filter(dc).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255))}),$m(e)}function g_(t){return!!t&&t.nodeType===1}function hl(t,e){return!!t&&!!t.tagName&&t.tagName.toLowerCase()===e.toLowerCase()}function e$(t){return!!t&&t.nodeType===3}function v_(t){return!!t&&t.nodeType===11}var v0=["a","button","form","input","select","textarea","label"];function Hp(t){for(var e=t;e.parentNode&&!hl(e,"body");e=e.parentNode){var n=Tm(e);if(at(n,"ph-sensitive")||at(n,"ph-no-capture"))return!1}if(at(Tm(t),"ph-include"))return!0;var i=t.type||"";if(Hi(i))switch(i.toLowerCase()){case"hidden":case"password":return!1}var r=t.name||t.id||"";return!(Hi(r)&&/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(r.replace(/[^a-zA-Z0-9]/g,"")))}function t$(t){return!!(hl(t,"input")&&!["button","checkbox","submit","reset"].includes(t.type)||hl(t,"select")||hl(t,"textarea")||t.getAttribute("contenteditable")==="true")}function dc(t){return!(mr(t)||et(t)||Hi(t)&&(t=$m(t),/^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/.test((t||"").replace(/[- ]/g,""))||/(^\d{3}-?\d{2}-?\d{4}$)/.test(t)))}function y_(t){var e=Om(t);return dc(e="".concat(e," ").concat(n$(t)).trim())?e:""}function n$(t){var e="";return t&&t.childNodes&&t.childNodes.length&&yt(t.childNodes,function(n){var i;if(n&&((i=n.tagName)===null||i===void 0?void 0:i.toLowerCase())==="span")try{var r=Om(n);e="".concat(e," ").concat(r).trim(),n.childNodes&&n.childNodes.length&&(e="".concat(e," ").concat(n$(n)).trim())}catch(s){he.error(s)}}),e}function o5(t){return function(e){var n=e.map(function(i){var r,s,o="";if(i.tag_name&&(o+=i.tag_name),i.attr_class){i.attr_class.sort();var a,l=xl(i.attr_class);try{for(l.s();!(a=l.n()).done;){var c=a.value;o+=".".concat(c.replace(/"/g,""))}}catch(f){l.e(f)}finally{l.f()}}var u=Ne(Ne(Ne(Ne({},i.text?{text:i.text}:{}),{},{"nth-child":(r=i.nth_child)!==null&&r!==void 0?r:0,"nth-of-type":(s=i.nth_of_type)!==null&&s!==void 0?s:0},i.href?{href:i.href}:{}),i.attr_id?{attr_id:i.attr_id}:{}),i.attributes),d={};return Vp(u).sort(function(f,h){var p=Mr(f,1)[0],m=Mr(h,1)[0];return p.localeCompare(m)}).forEach(function(f){var h=Mr(f,2),p=h[0],m=h[1];return d[w_(p.toString())]=w_(m.toString())}),o+=":",o+=Vp(u).map(function(f){var h=Mr(f,2),p=h[0],m=h[1];return"".concat(p,'="').concat(m,'"')}).join("")});return n.join(";")}(function(e){return e.map(function(n){var i,r,s={text:(i=n.$el_text)===null||i===void 0?void 0:i.slice(0,400),tag_name:n.tag_name,href:(r=n.attr__href)===null||r===void 0?void 0:r.slice(0,2048),attr_class:a5(n),attr_id:n.attr__id,nth_child:n.nth_child,nth_of_type:n.nth_of_type,attributes:{}};return Vp(n).filter(function(o){return Mr(o,1)[0].indexOf("attr__")===0}).forEach(function(o){var a=Mr(o,2),l=a[0],c=a[1];return s.attributes[l]=c}),s})}(t))}function w_(t){return t.replace(/"|\\"/g,'\\"')}function a5(t){var e=t.attr__class;return e?pn(e)?e:Z1(e):void 0}var l5=function(){function t(e){qt(this,t),this.clicks=[],this.enabled=e}return Yt(t,[{key:"isRageClick",value:function(e,n,i){if(!this.enabled)return!1;var r=this.clicks[this.clicks.length-1];if(r&&Math.abs(e-r.x)+Math.abs(n-r.y)<30&&i-r.timestamp<1e3){if(this.clicks.push({x:e,y:n,timestamp:i}),this.clicks.length===3)return!0}else this.clicks=[{x:e,y:n,timestamp:i}];return!1}}]),t}(),i$="$people_distinct_id",Wp="__alias",hd="__timers",b_="$autocapture_disabled_server_side",pw="$session_recording_enabled_server_side",x_="$console_log_recording_enabled_server_side",S_="$session_recording_recorder_version_server_side",k_="$session_recording_network_payload_capture",Nm="$sesid",Gp="$session_is_sampled",fc="$enabled_feature_flags",mw="$early_access_features",hc="$stored_person_properties",Ro="$stored_group_properties",gw="$surveys",Rm="$flag_call_reported",vw="$user_state",yw="$posthog_quota_limited",ww="$client_session_props",c5=[i$,Wp,"__cmpns",hd,pw,Nm,fc,vw,yw,mw,Ro,hc,gw,Rm,ww];function y0(t,e){return e.length>t?e.slice(0,t)+"...":e}var Fo={_initializedTokens:[],_isDisabledServerSide:null,_isAutocaptureEnabled:!1,_setIsAutocaptureEnabled:function(t){var e,n=mr(this._isDisabledServerSide)?!((e=t.persistence)===null||e===void 0||!e.props[b_]):this._isDisabledServerSide,i=!!t.config.autocapture;this._isAutocaptureEnabled=i&&!n},_previousElementSibling:function(t){if(t.previousElementSibling)return t.previousElementSibling;var e=t;do e=e.previousSibling;while(e&&!g_(e));return e},_getAugmentPropertiesFromElement:function(t){if(!Hp(t))return{};var e={};return yt(t.attributes,function(n){if(n.name.indexOf("data-ph-capture-attribute")===0){var i=n.name.replace("data-ph-capture-attribute-",""),r=n.value;i&&r&&dc(r)&&(e[i]=r)}}),e},_getPropertiesFromElement:function(t,e,n){var i,r=t.tagName.toLowerCase(),s={tag_name:r};v0.indexOf(r)>-1&&!n&&(r.toLowerCase()==="a"||r.toLowerCase()==="button"?s.$el_text=y0(1024,y_(t)):s.$el_text=y0(1024,Om(t)));var o=Tm(t);o.length>0&&(s.classes=o.filter(function(d){return d!==""}));var a=(i=this.config)===null||i===void 0?void 0:i.element_attribute_ignorelist;yt(t.attributes,function(d){var f;if((!t$(t)||["name","id","class"].indexOf(d.name)!==-1)&&(a==null||!a.includes(d.name))&&!e&&dc(d.value)&&(f=d.name,!Hi(f)||f.substring(0,10)!=="_ngcontent"&&f.substring(0,7)!=="_nghost")){var h=d.value;d.name==="class"&&(h=Z1(h).join(" ")),s["attr__"+d.name]=y0(1024,h)}});for(var l=1,c=1,u=t;u=this._previousElementSibling(u);)l++,u.tagName===t.tagName&&c++;return s.nth_child=l,s.nth_of_type=c,s},_getDefaultProperties:function(t){return{$event_type:t,$ce_version:1}},_extractCustomPropertyValue:function(t){var e=[];return yt(Te==null?void 0:Te.querySelectorAll(t.css_selector),function(n){var i;["input","select"].indexOf(n.tagName.toLowerCase())>-1?i=n.value:n.textContent&&(i=n.textContent),dc(i)&&e.push(i)}),e.join(", ")},_getCustomProperties:function(t){var e=this,n={};return yt(this._customProperties,function(i){yt(i.event_selectors,function(r){yt(Te==null?void 0:Te.querySelectorAll(r),function(s){at(t,s)&&Hp(s)&&(n[i.name]=e._extractCustomPropertyValue(i))})})}),n},_getEventTarget:function(t){return et(t.target)?t.srcElement||null:(e=t.target)!==null&&e!==void 0&&e.shadowRoot?t.composedPath()[0]||null:t.target||null;var e},_captureEvent:function(t,e){var n,i=this,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"$autocapture",s=this._getEventTarget(t);if(e$(s)&&(s=s.parentNode||null),r==="$autocapture"&&t.type==="click"&&t instanceof MouseEvent&&(n=this.rageclicks)!==null&&n!==void 0&&n.isRageClick(t.clientX,t.clientY,new Date().getTime())&&this._captureEvent(t,e,"$rageclick"),s&&function(m,w){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;if(!G||!m||hl(m,"html")||!g_(m))return!1;if(v!=null&&v.url_allowlist){var y=G.location.href,x=v.url_allowlist;if(x&&!x.some(function(T){return y.match(T)}))return!1}if(v!=null&&v.dom_event_allowlist){var k=v.dom_event_allowlist;if(k&&!k.some(function(T){return w.type===T}))return!1}if(v!=null&&v.element_allowlist){var _=v.element_allowlist;if(_&&!_.some(function(T){return m.tagName.toLowerCase()===T}))return!1}if(v!=null&&v.css_selector_allowlist){var P=v.css_selector_allowlist;if(P&&!P.some(function(T){return m.matches(T)}))return!1}for(var A=!1,C=[m],N=!0,R=m;R.parentNode&&!hl(R,"body");)if(v_(R.parentNode))C.push(R.parentNode.host),R=R.parentNode.host;else{if(!(N=R.parentNode||!1))break;if(v0.indexOf(N.tagName.toLowerCase())>-1)A=!0;else{var M=G.getComputedStyle(N);M&&M.getPropertyValue("cursor")==="pointer"&&(A=!0)}C.push(N),R=N}var L=G.getComputedStyle(m);if(L&&L.getPropertyValue("cursor")==="pointer"&&w.type==="click")return!0;var H=m.tagName.toLowerCase();switch(H){case"html":return!1;case"form":return w.type==="submit";case"input":case"select":case"textarea":return w.type==="change"||w.type==="click";default:return A?w.type==="click":w.type==="click"&&(v0.indexOf(H)>-1||m.getAttribute("contenteditable")==="true")}}(s,t,this.config)){for(var o,a,l=[s],c=s;c.parentNode&&!hl(c,"body");)v_(c.parentNode)?(l.push(c.parentNode.host),c=c.parentNode.host):(l.push(c.parentNode),c=c.parentNode);var u,d=[],f={},h=!1;if(yt(l,function(m){var w=Hp(m);m.tagName.toLowerCase()==="a"&&(u=m.getAttribute("href"),u=w&&dc(u)&&u),at(Tm(m),"ph-no-capture")&&(h=!0),d.push(i._getPropertiesFromElement(m,e.config.mask_all_element_attributes,e.config.mask_all_text));var v=i._getAugmentPropertiesFromElement(m);bn(f,v)}),e.config.mask_all_text||(s.tagName.toLowerCase()==="a"||s.tagName.toLowerCase()==="button"?d[0].$el_text=y_(s):d[0].$el_text=Om(s)),u&&(d[0].attr__href=u),h)return!1;var p=bn(this._getDefaultProperties(t.type),e.elementsChainAsString?{$elements_chain:o5(d)}:{$elements:d},(o=d[0])!==null&&o!==void 0&&o.$el_text?{$el_text:(a=d[0])===null||a===void 0?void 0:a.$el_text}:{},this._getCustomProperties(l),f);return e.capture(r,p),!0}},_navigate:function(t){G&&(G.location.href=t)},_addDomEventHandlers:function(t){var e=this;if(G&&Te){var n=function(i){i=i||(G==null?void 0:G.event),e._captureEvent(i,t)};Ad(Te,"submit",n,!1,!0),Ad(Te,"change",n,!1,!0),Ad(Te,"click",n,!1,!0)}},_customProperties:[],rageclicks:null,config:void 0,init:function(t){var e;fw(t.__autocapture)||(this.config=t.__autocapture),(e=this.config)!==null&&e!==void 0&&e.url_allowlist&&(this.config.url_allowlist=this.config.url_allowlist.map(function(n){return new RegExp(n)})),this.rageclicks=new l5(t.config.rageclick)},afterDecideResponse:function(t,e){var n=e.config.token;this._initializedTokens.indexOf(n)>-1?he.info('autocapture already initialized for token "'+n+'"'):(e.persistence&&e.persistence.register(_e({},b_,!!t.autocapture_opt_out)),this._isDisabledServerSide=!!t.autocapture_opt_out,this._setIsAutocaptureEnabled(e),this._initializedTokens.push(n),t&&t.config&&t.config.enable_collect_everything&&this._isAutocaptureEnabled?(t.custom_properties&&(this._customProperties=t.custom_properties),this._addDomEventHandlers(e)):e.__autocapture=!1)},enabledForProject:function(t,e,n){if(!t)return!0;e=et(e)?10:e,n=et(n)?10:n;for(var i=0,r=0;r<t.length;r++)i+=t.charCodeAt(r);return i%e<n},isBrowserSupported:function(){return zr(Te==null?void 0:Te.querySelectorAll)}};(function(t){for(var e in t)zr(t[e])&&(t[e]=t[e].bind(t))})(Fo),function(t){for(var e in t)zr(t[e])&&(t[e]=QP(t[e]))}(Fo);var w0="$active_feature_flags",Th="$override_feature_flags",__="$feature_flag_payloads",C_=function(t){var e,n={},i=xl(Vp(t||{}));try{for(i.s();!(e=i.n()).done;){var r=Mr(e.value,2),s=r[0],o=r[1];o&&(n[s]=o)}}catch(a){i.e(a)}finally{i.f()}return n},u5=function(){function t(e){qt(this,t),this.instance=e,this._override_warning=!1,this.featureFlagEventHandlers=[],this.reloadFeatureFlagsQueued=!1,this.reloadFeatureFlagsInAction=!1}return Yt(t,[{key:"getFlags",value:function(){return Object.keys(this.getFlagVariants())}},{key:"getFlagVariants",value:function(){var e=this.instance.get_property(fc),n=this.instance.get_property(Th);if(!n)return e||{};for(var i=bn({},e),r=Object.keys(n),s=0;s<r.length;s++)n[r[s]]===!1?delete i[r[s]]:i[r[s]]=n[r[s]];return this._override_warning||(he.warn(" Overriding feature flags!",{enabledFlags:e,overriddenFlags:n,finalFlags:i}),this._override_warning=!0),i}},{key:"getFlagPayloads",value:function(){return this.instance.get_property(__)||{}}},{key:"reloadFeatureFlags",value:function(){this.reloadFeatureFlagsQueued||(this.reloadFeatureFlagsQueued=!0,this._startReloadTimer())}},{key:"setAnonymousDistinctId",value:function(e){this.$anon_distinct_id=e}},{key:"setReloadingPaused",value:function(e){this.reloadFeatureFlagsInAction=e}},{key:"resetRequestQueue",value:function(){this.reloadFeatureFlagsQueued=!1}},{key:"_startReloadTimer",value:function(){var e=this;this.reloadFeatureFlagsQueued&&!this.reloadFeatureFlagsInAction&&setTimeout(function(){!e.reloadFeatureFlagsInAction&&e.reloadFeatureFlagsQueued&&(e.reloadFeatureFlagsQueued=!1,e._reloadFeatureFlagsRequest())},5)}},{key:"_reloadFeatureFlagsRequest",value:function(){var e=this;if(!this.instance.config.advanced_disable_feature_flags){this.setReloadingPaused(!0);var n=this.instance.config.token,i=this.instance.get_property(hc),r=this.instance.get_property(Ro),s=J1(JSON.stringify({token:n,distinct_id:this.instance.get_distinct_id(),groups:this.instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:i,group_properties:r,disable_flags:this.instance.config.advanced_disable_feature_flags||void 0}));this.instance._send_request(this.instance.config.api_host+"/decide/?v=3",{data:s},{method:"POST"},this.instance._prepare_callback(function(o){e.$anon_distinct_id=void 0,e.receivedFeatureFlags(o),e.setReloadingPaused(!1),e._startReloadTimer()}))}}},{key:"getFeatureFlag",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.instance.decideEndpointWasHit||this.getFlags()&&this.getFlags().length>0){var i,r=this.getFlagVariants()[e],s="".concat(r),o=this.instance.get_property(Rm)||{};return(n.send_event||!("send_event"in n))&&(!(e in o)||!o[e].includes(s))&&(pn(o[e])?o[e].push(s):o[e]=[s],(i=this.instance.persistence)===null||i===void 0||i.register(_e({},Rm,o)),this.instance.capture("$feature_flag_called",{$feature_flag:e,$feature_flag_response:r})),r}he.warn('getFeatureFlag for key "'+e+`" failed. Feature flags didn't load in time.`)}},{key:"getFeatureFlagPayload",value:function(e){return this.getFlagPayloads()[e]}},{key:"isFeatureEnabled",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.instance.decideEndpointWasHit||this.getFlags()&&this.getFlags().length>0)return!!this.getFeatureFlag(e,n);he.warn('isFeatureEnabled for key "'+e+`" failed. Feature flags didn't load in time.`)}},{key:"addFeatureFlagsHandler",value:function(e){this.featureFlagEventHandlers.push(e)}},{key:"removeFeatureFlagsHandler",value:function(e){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter(function(n){return n!==e})}},{key:"receivedFeatureFlags",value:function(e){if(this.instance.persistence){this.instance.decideEndpointWasHit=!0;var n=this.getFlagVariants(),i=this.getFlagPayloads();(function(r,s){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},l=r.featureFlags,c=r.featureFlagPayloads;if(l)if(pn(l)){var u,d={};if(l)for(var f=0;f<l.length;f++)d[l[f]]=!0;s&&s.register((_e(u={},w0,l),_e(u,fc,d),u))}else{var h,p=l,m=c;r.errorsWhileComputingFlags&&(p=Ne(Ne({},o),p),m=Ne(Ne({},a),m)),s&&s.register((_e(h={},w0,Object.keys(C_(p))),_e(h,fc,p||{}),_e(h,__,m||{}),h))}})(e,this.instance.persistence,n,i),this._fireFeatureFlagsCallbacks()}}},{key:"override",value:function(e){if(!this.instance.__loaded||!this.instance.persistence)return he.uninitializedWarning("posthog.feature_flags.override");if(this._override_warning=!1,e===!1)this.instance.persistence.unregister(Th);else if(pn(e)){for(var n={},i=0;i<e.length;i++)n[e[i]]=!0;this.instance.persistence.register(_e({},Th,n))}else this.instance.persistence.register(_e({},Th,e))}},{key:"onFeatureFlags",value:function(e){var n=this;if(this.addFeatureFlagsHandler(e),this.instance.decideEndpointWasHit){var i=this._prepareFeatureFlagsForCallbacks(),r=i.flags,s=i.flagVariants;e(r,s)}return function(){return n.removeFeatureFlagsHandler(e)}}},{key:"updateEarlyAccessFeatureEnrollment",value:function(e,n){var i,r,s=_e({},"$feature_enrollment/".concat(e),n);this.instance.capture("$feature_enrollment_update",{$feature_flag:e,$feature_enrollment:n,$set:s}),this.setPersonPropertiesForFlags(s,!1);var o=Ne(Ne({},this.getFlagVariants()),{},_e({},e,n));(i=this.instance.persistence)===null||i===void 0||i.register((_e(r={},w0,Object.keys(C_(o))),_e(r,fc,o),r)),this._fireFeatureFlagsCallbacks()}},{key:"getEarlyAccessFeatures",value:function(e){var n=this,i=arguments.length>1&&arguments[1]!==void 0&&arguments[1],r=this.instance.get_property(mw);if(r&&!i)return e(r);this.instance._send_request("".concat(this.instance.config.api_host,"/api/early_access_features/?token=").concat(this.instance.config.token),{},{method:"GET"},function(s){var o,a=s.earlyAccessFeatures;return(o=n.instance.persistence)===null||o===void 0||o.register(_e({},mw,a)),e(a)})}},{key:"_prepareFeatureFlagsForCallbacks",value:function(){var e=this.getFlags(),n=this.getFlagVariants();return{flags:e.filter(function(i){return n[i]}),flagVariants:Object.keys(n).filter(function(i){return n[i]}).reduce(function(i,r){return i[r]=n[r],i},{})}}},{key:"_fireFeatureFlagsCallbacks",value:function(){var e=this._prepareFeatureFlagsForCallbacks(),n=e.flags,i=e.flagVariants;this.featureFlagEventHandlers.forEach(function(r){return r(n,i)})}},{key:"setPersonPropertiesForFlags",value:function(e){var n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],i=this.instance.get_property(hc)||{};this.instance.register(_e({},hc,Ne(Ne({},i),e))),n&&this.instance.reloadFeatureFlags()}},{key:"resetPersonPropertiesForFlags",value:function(){this.instance.unregister(hc)}},{key:"setGroupPropertiesForFlags",value:function(e){var n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],i=this.instance.get_property(Ro)||{};Object.keys(i).length!==0&&Object.keys(i).forEach(function(r){i[r]=Ne(Ne({},i[r]),e[r]),delete e[r]}),this.instance.register(_e({},Ro,Ne(Ne({},i),e))),n&&this.instance.reloadFeatureFlags()}},{key:"resetGroupPropertiesForFlags",value:function(e){if(e){var n=this.instance.get_property(Ro)||{};this.instance.register(_e({},Ro,Ne(Ne({},n),{},_e({},e,{}))))}else this.instance.unregister(Ro)}}]),t}();Math.trunc||(Math.trunc=function(t){return t<0?Math.ceil(t):Math.floor(t)}),Number.isInteger||(Number.isInteger=function(t){return Qs(t)&&isFinite(t)&&Math.floor(t)===t});var E_="0123456789abcdef",d5=function(){function t(e){if(qt(this,t),this.bytes=e,e.length!==16)throw new TypeError("not 128-bit length")}return Yt(t,[{key:"toString",value:function(){for(var e="",n=0;n<this.bytes.length;n++)e=e+E_.charAt(this.bytes[n]>>>4)+E_.charAt(15&this.bytes[n]),n!==3&&n!==5&&n!==7&&n!==9||(e+="-");if(e.length!==36)throw new Error("Invalid UUIDv7 was generated");return e}},{key:"clone",value:function(){return new t(this.bytes.slice(0))}},{key:"equals",value:function(e){return this.compareTo(e)===0}},{key:"compareTo",value:function(e){for(var n=0;n<16;n++){var i=this.bytes[n]-e.bytes[n];if(i!==0)return Math.sign(i)}return 0}}],[{key:"fromFieldsV7",value:function(e,n,i,r){if(!Number.isInteger(e)||!Number.isInteger(n)||!Number.isInteger(i)||!Number.isInteger(r)||e<0||n<0||i<0||r<0||e>0xffffffffffff||n>4095||i>1073741823||r>4294967295)throw new RangeError("invalid field value");var s=new Uint8Array(16);return s[0]=e/Math.pow(2,40),s[1]=e/Math.pow(2,32),s[2]=e/Math.pow(2,24),s[3]=e/Math.pow(2,16),s[4]=e/Math.pow(2,8),s[5]=e,s[6]=112|n>>>8,s[7]=n,s[8]=128|i>>>24,s[9]=i>>>16,s[10]=i>>>8,s[11]=i,s[12]=r>>>24,s[13]=r>>>16,s[14]=r>>>8,s[15]=r,new t(s)}}]),t}(),f5=function(){function t(){qt(this,t),_e(this,"timestamp",0),_e(this,"counter",0),_e(this,"random",new h5)}return Yt(t,[{key:"generate",value:function(){var e=this.generateOrAbort();if(et(e)){this.timestamp=0;var n=this.generateOrAbort();if(et(n))throw new Error("Could not generate UUID after timestamp reset");return n}return e}},{key:"generateOrAbort",value:function(){var e=Date.now();if(e>this.timestamp)this.timestamp=e,this.resetCounter();else{if(!(e+1e4>this.timestamp))return;this.counter++,this.counter>4398046511103&&(this.timestamp++,this.resetCounter())}return d5.fromFieldsV7(this.timestamp,Math.trunc(this.counter/Math.pow(2,30)),this.counter&Math.pow(2,30)-1,this.random.nextUint32())}},{key:"resetCounter",value:function(){this.counter=1024*this.random.nextUint32()+(1023&this.random.nextUint32())}}]),t}(),r$=function(t){if(typeof UUIDV7_DENY_WEAK_RNG<"u"&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(var e=0;e<t.length;e++)t[e]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return t};G&&!et(G.crypto)&&crypto.getRandomValues&&(r$=function(t){return crypto.getRandomValues(t)});var A_,h5=function(){function t(){qt(this,t),_e(this,"buffer",new Uint32Array(8)),_e(this,"cursor",1/0)}return Yt(t,[{key:"nextUint32",value:function(){return this.cursor>=this.buffer.length&&(r$(this.buffer),this.cursor=0),this.buffer[this.cursor++]}}]),t}(),sl=function(){return p5().toString()},p5=function(){return(A_||(A_=new f5)).generate()},m5="Thu, 01 Jan 1970 00:00:00 GMT",Fu="",g5=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i,v5=function(t){var e=t.match(g5);return e?e[0]:""};function y5(t,e){if(e){var n=function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Te;if(Fu)return Fu;if(!s||["localhost","127.0.0.1"].includes(r))return"";for(var o=r.split("."),a=Math.min(o.length,8),l="dmn_chk_"+sl(),c=new RegExp("(^|;)\\s*"+l+"=1");!Fu&&a--;){var u=o.slice(a).join("."),d=l+"=1;domain=."+u;s.cookie=d,c.test(s.cookie)&&(s.cookie=d+";expires="+m5,Fu=u)}return Fu}(t);if(!n){var i=v5(t);i!==n&&he.info("Warning: cookie subdomain discovery mismatch",i,n),n=i}return n?"; domain=."+n:""}return""}var Cs={is_supported:function(){return!!Te},error:function(t){he.error("cookieStore error: "+t)},get:function(t){if(Te){try{for(var e=t+"=",n=Te.cookie.split(";").filter(function(s){return s.length}),i=0;i<n.length;i++){for(var r=n[i];r.charAt(0)==" ";)r=r.substring(1,r.length);if(r.indexOf(e)===0)return decodeURIComponent(r.substring(e.length,r.length))}}catch{}return null}},parse:function(t){var e;try{e=JSON.parse(Cs.get(t))||{}}catch{}return e},set:function(t,e,n,i,r){if(Te)try{var s="",o="",a=y5(Te.location.hostname,i);if(n){var l=new Date;l.setTime(l.getTime()+24*n*60*60*1e3),s="; expires="+l.toUTCString()}r&&(o="; secure");var c=t+"="+encodeURIComponent(JSON.stringify(e))+s+"; SameSite=Lax; path=/"+a+o;return c.length>3686.4&&he.warn("cookieStore warning: large cookie, len="+c.length),Te.cookie=c,c}catch{return}},remove:function(t,e){try{Cs.set(t,"",-1,e)}catch{return}}},b0=null,Zt={is_supported:function(){if(!mr(b0))return b0;var t=!0;if(et(G))t=!1;else try{var e="__mplssupport__";Zt.set(e,"xyz"),Zt.get(e)!=='"xyz"'&&(t=!1),Zt.remove(e)}catch{t=!1}return t||he.error("localStorage unsupported; falling back to cookie store"),b0=t,t},error:function(t){he.error("localStorage error: "+t)},get:function(t){try{return G==null?void 0:G.localStorage.getItem(t)}catch(e){Zt.error(e)}return null},parse:function(t){try{return JSON.parse(Zt.get(t))||{}}catch{}return null},set:function(t,e){try{G==null||G.localStorage.setItem(t,JSON.stringify(e))}catch(n){Zt.error(n)}},remove:function(t){try{G==null||G.localStorage.removeItem(t)}catch(e){Zt.error(e)}}},w5=["distinct_id",Nm,Gp],pd=Ne(Ne({},Zt),{},{parse:function(t){try{var e={};try{e=Cs.parse(t)||{}}catch{}var n=bn(e,JSON.parse(Zt.get(t)||"{}"));return Zt.set(t,n),n}catch{}return null},set:function(t,e,n,i,r){try{Zt.set(t,e);var s={};w5.forEach(function(o){e[o]&&(s[o]=e[o])}),Object.keys(s).length&&Cs.set(t,s,n,i,r)}catch(o){Zt.error(o)}},remove:function(t,e){try{G==null||G.localStorage.removeItem(t),Cs.remove(t,e)}catch(n){Zt.error(n)}}}),Oh={},b5={is_supported:function(){return!0},error:function(t){he.error("memoryStorage error: "+t)},get:function(t){return Oh[t]||null},parse:function(t){return Oh[t]||null},set:function(t,e){Oh[t]=e},remove:function(t){delete Oh[t]}},Ha=null,kn={is_supported:function(){if(!mr(Ha))return Ha;if(Ha=!0,et(G))Ha=!1;else try{var t="__support__";kn.set(t,"xyz"),kn.get(t)!=='"xyz"'&&(Ha=!1),kn.remove(t)}catch{Ha=!1}return Ha},error:function(t){he.error("sessionStorage error: ",t)},get:function(t){try{return G==null?void 0:G.sessionStorage.getItem(t)}catch(e){kn.error(e)}return null},parse:function(t){try{return JSON.parse(kn.get(t))||null}catch{}return null},set:function(t,e){try{G==null||G.sessionStorage.setItem(t,JSON.stringify(e))}catch(n){kn.error(n)}},remove:function(t){try{G==null||G.sessionStorage.removeItem(t)}catch(e){kn.error(e)}}},x5=["localhost","127.0.0.1"],s$=function(t){var e=Te==null?void 0:Te.createElement("a");return et(e)?null:(e.href=t,e)},S5=function(t,e){return!!function(n){try{new RegExp(n)}catch{return!1}return!0}(e)&&new RegExp(e).test(t)},P_=function(t,e){for(var n,i=((t.split("#")[0]||"").split("?")[1]||"").split("&"),r=0;r<i.length;r++){var s=i[r].split("=");if(s[0]===e){n=s;break}}if(!pn(n)||n.length<2)return"";var o=n[1];try{o=decodeURIComponent(o)}catch{he.error("Skipping decoding for malformed query param: "+o)}return o.replace(/\+/g," ")},Mm=function(t,e){var n=t.match(new RegExp(e+"=([^&]*)"));return n?n[1]:null},nn={campaignParams:function(t){var e=["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gclid","gad_source","gbraid","wbraid","fbclid","msclkid"].concat(t||[]),n={};return yt(e,function(i){var r=Te?P_(Te.URL,i):"";r.length&&(n[i]=r)}),n},searchEngine:function(){var t=Te==null?void 0:Te.referrer;return t?t.search("https?://(.*)google.([^/?]*)")===0?"google":t.search("https?://(.*)bing.com")===0?"bing":t.search("https?://(.*)yahoo.com")===0?"yahoo":t.search("https?://(.*)duckduckgo.com")===0?"duckduckgo":null:null},searchInfo:function(){var t=nn.searchEngine(),e=t!="yahoo"?"q":"p",n={};if(!mr(t)){n.$search_engine=t;var i=Te?P_(Te.referrer,e):"";i.length&&(n.ph_keyword=i)}return n},browser:function(t,e,n){return e=e||"",n||at(t," OPR/")?at(t,"Mini")?"Opera Mini":"Opera":/(BlackBerry|PlayBook|BB10)/i.test(t)?"BlackBerry":at(t,"IEMobile")||at(t,"WPDesktop")?"Internet Explorer Mobile":at(t,"SamsungBrowser/")?"Samsung Internet":at(t,"Edge")||at(t,"Edg/")?"Microsoft Edge":at(t,"FBIOS")?"Facebook Mobile":at(t,"Chrome")?"Chrome":at(t,"CriOS")?"Chrome iOS":at(t,"UCWEB")||at(t,"UCBrowser")?"UC Browser":at(t,"FxiOS")?"Firefox iOS":at(e,"Apple")||function(i){return at(i,"Safari")&&!at(i,"Chrome")&&!at(i,"Android")}(t)?at(t,"Mobile")?"Mobile Safari":"Safari":at(t,"Android")?"Android Mobile":at(t,"Konqueror")||at(t,"konqueror")?"Konqueror":at(t,"Firefox")?"Firefox":at(t,"MSIE")||at(t,"Trident/")?"Internet Explorer":at(t,"Gecko")?"Mozilla":""},browserVersion:function(t,e,n){var i={"Internet Explorer Mobile":[/rv:(\d+(\.\d+)?)/],"Microsoft Edge":[/Edge?\/(\d+(\.\d+)?)/],Chrome:[/Chrome\/(\d+(\.\d+)?)/],"Chrome iOS":[/CriOS\/(\d+(\.\d+)?)/],"UC Browser":[/(UCBrowser|UCWEB)\/(\d+(\.\d+)?)/],Safari:[/Version\/(\d+(\.\d+)?)/],"Mobile Safari":[/Version\/(\d+(\.\d+)?)/],Opera:[/(Opera|OPR)\/(\d+(\.\d+)?)/],Firefox:[/Firefox\/(\d+(\.\d+)?)/],"Firefox iOS":[/FxiOS\/(\d+(\.\d+)?)/],Konqueror:[/Konqueror[:/]?(\d+(\.\d+)?)/i],BlackBerry:[/BlackBerry (\d+(\.\d+)?)/,/Version\/(\d+(\.\d+)?)/],"Android Mobile":[/android\s(\d+(\.\d+)?)/],"Samsung Internet":[/SamsungBrowser\/(\d+(\.\d+)?)/],"Internet Explorer":[/(rv:|MSIE )(\d+(\.\d+)?)/],Mozilla:[/rv:(\d+(\.\d+)?)/]}[nn.browser(t,e,n)];if(et(i))return null;for(var r=0;r<i.length;r++){var s=i[r],o=t.match(s);if(o)return parseFloat(o[o.length-2])}return null},browserLanguage:function(){return navigator.language||navigator.userLanguage},os:function(t){if(/Windows/i.test(t)){if(/Phone/.test(t)||/WPDesktop/.test(t))return{os_name:"Windows Phone",os_version:""};var e=/Windows NT ([0-9.]+)/i.exec(t);return e&&e[1]?{os_name:"Windows",os_version:e[1]}:{os_name:"Windows",os_version:""}}if(/(iPhone|iPad|iPod)/.test(t)){var n=/OS (\d+)_(\d+)_?(\d+)?/i.exec(t);return n&&n[1]?{os_name:"iOS",os_version:[n[1],n[2],n[3]||"0"].join(".")}:{os_name:"iOS",os_version:""}}if(/Android/.test(t)){var i=/Android (\d+)\.(\d+)\.?(\d+)?/i.exec(t);return i&&i[1]?{os_name:"Android",os_version:[i[1],i[2],i[3]||"0"].join(".")}:{os_name:"Android",os_version:""}}if(/(BlackBerry|PlayBook|BB10)/i.test(t))return{os_name:"BlackBerry",os_version:""};if(/Mac/i.test(t)){var r=/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i.exec(t);return r&&r[1]?{os_name:"Mac OS X",os_version:[r[1],r[2],r[3]||"0"].join(".")}:{os_name:"Mac OS X",os_version:""}}return/Linux/.test(t)?{os_name:"Linux",os_version:""}:/CrOS/.test(t)?{os_name:"Chrome OS",os_version:""}:{os_name:"",os_version:""}},device:function(t){return/Windows Phone/i.test(t)||/WPDesktop/.test(t)?"Windows Phone":/iPad/.test(t)?"iPad":/iPod/.test(t)?"iPod Touch":/iPhone/.test(t)?"iPhone":/(BlackBerry|PlayBook|BB10)/i.test(t)?"BlackBerry":/Android/.test(t)&&!/Mobile/.test(t)?"Android Tablet":/Android/.test(t)?"Android":""},deviceType:function(t){var e=this.device(t);return e==="iPad"||e==="Android Tablet"?"Tablet":e?"Mobile":"Desktop"},referrer:function(){return(Te==null?void 0:Te.referrer)||"$direct"},referringDomain:function(){var t;return Te!=null&&Te.referrer&&((t=s$(Te.referrer))===null||t===void 0?void 0:t.host)||"$direct"},properties:function(){if(!Ht)return{};var t=nn.os(Ht),e=t.os_name,n=t.os_version;return bn(hw({$os:e,$os_version:n,$browser:nn.browser(Ht,navigator.vendor,Un.opera),$device:nn.device(Ht),$device_type:nn.deviceType(Ht)}),{$current_url:G==null?void 0:G.location.href,$host:G==null?void 0:G.location.host,$pathname:G==null?void 0:G.location.pathname,$raw_user_agent:Ht.length>1e3?Ht.substring(0,997)+"...":Ht,$browser_version:nn.browserVersion(Ht,navigator.vendor,Un.opera),$browser_language:nn.browserLanguage(),$screen_height:G==null?void 0:G.screen.height,$screen_width:G==null?void 0:G.screen.width,$viewport_height:G==null?void 0:G.innerHeight,$viewport_width:G==null?void 0:G.innerWidth,$lib:"web",$lib_version:Sl.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:ZP()/1e3})},people_properties:function(){if(!Ht)return{};var t=nn.os(Ht),e=t.os_name,n=t.os_version;return bn(hw({$os:e,$os_version:n,$browser:nn.browser(Ht,navigator.vendor,Un.opera)}),{$browser_version:nn.browserVersion(Ht,navigator.vendor,Un.opera)})}},k5=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"],$_=function(){function t(e){qt(this,t);var n="";e.token&&(n=e.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),this.props={},this.campaign_params_saved=!1,this.custom_campaign_params=e.custom_campaign_params||[],e.persistence_name?this.name="ph_"+e.persistence_name:this.name="ph_"+n+"_posthog",k5.indexOf(e.persistence.toLowerCase())===-1&&(he.critical("Unknown persistence type "+e.persistence+"; falling back to localStorage+cookie"),e.persistence="localStorage+cookie");var i=e.persistence.toLowerCase();i==="localstorage"&&Zt.is_supported()?this.storage=Zt:i==="localstorage+cookie"&&pd.is_supported()?this.storage=pd:i==="sessionstorage"&&kn.is_supported()?this.storage=kn:i==="memory"?this.storage=b5:i==="cookie"?this.storage=Cs:pd.is_supported()?this.storage=pd:this.storage=Cs,this.load(),this.update_config(e),this.save()}return Yt(t,[{key:"properties",value:function(){var e={};return yt(this.props,function(n,i){if(i===fc&&oa(n))for(var r=Object.keys(n),s=0;s<r.length;s++)e["$feature/".concat(r[s])]=n[r[s]];else a=i,l=!1,(mr(o=c5)?l:f_&&o.indexOf===f_?o.indexOf(a)!=-1:(yt(o,function(c){if(l||(l=c===a))return Y1}),l))||(e[i]=n);var o,a,l}),e}},{key:"load",value:function(){if(!this.disabled){var e=this.storage.parse(this.name);e&&(this.props=bn({},e))}}},{key:"save",value:function(){this.disabled||this.storage.set(this.name,this.props,this.expire_days,this.cross_subdomain,this.secure)}},{key:"remove",value:function(){this.storage.remove(this.name,!1),this.storage.remove(this.name,!0)}},{key:"clear",value:function(){this.remove(),this.props={}}},{key:"register_once",value:function(e,n,i){var r=this;if(oa(e)){et(n)&&(n="None"),this.expire_days=et(i)?this.default_expiry:i;var s=!1;if(yt(e,function(o,a){r.props.hasOwnProperty(a)&&r.props[a]!==n||(r.props[a]=o,s=!0)}),s)return this.save(),!0}return!1}},{key:"register",value:function(e,n){var i=this;if(oa(e)){this.expire_days=et(n)?this.default_expiry:n;var r=!1;if(yt(e,function(s,o){e.hasOwnProperty(o)&&i.props[o]!==s&&(i.props[o]=s,r=!0)}),r)return this.save(),!0}return!1}},{key:"unregister",value:function(e){e in this.props&&(delete this.props[e],this.save())}},{key:"update_campaign_params",value:function(){this.campaign_params_saved||(this.register(nn.campaignParams(this.custom_campaign_params)),this.campaign_params_saved=!0)}},{key:"update_search_keyword",value:function(){this.register(nn.searchInfo())}},{key:"update_referrer_info",value:function(){this.register({$referrer:this.props.$referrer||nn.referrer(),$referring_domain:this.props.$referring_domain||nn.referringDomain()})}},{key:"get_referrer_info",value:function(){return hw({$referrer:this.props.$referrer,$referring_domain:this.props.$referring_domain})}},{key:"safe_merge",value:function(e){return yt(this.props,function(n,i){i in e||(e[i]=n)}),e}},{key:"update_config",value:function(e){this.default_expiry=this.expire_days=e.cookie_expiration,this.set_disabled(e.disable_persistence),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie)}},{key:"set_disabled",value:function(e){this.disabled=e,this.disabled?this.remove():this.save()}},{key:"set_cross_subdomain",value:function(e){e!==this.cross_subdomain&&(this.cross_subdomain=e,this.remove(),this.save())}},{key:"get_cross_subdomain",value:function(){return!!this.cross_subdomain}},{key:"set_secure",value:function(e){e!==this.secure&&(this.secure=e,this.remove(),this.save())}},{key:"set_event_timer",value:function(e,n){var i=this.props[hd]||{};i[e]=n,this.props[hd]=i,this.save()}},{key:"remove_event_timer",value:function(e){var n=(this.props[hd]||{})[e];return et(n)||(delete this.props[hd][e],this.save()),n}},{key:"get_user_state",value:function(){return this.props[vw]||"anonymous"}},{key:"set_user_state",value:function(e){this.props[vw]=e,this.save()}},{key:"get_quota_limits",value:function(){return this.props[yw]||{}}},{key:"set_quota_limits",value:function(e){this.props[yw]=e,this.save()}}]),t}(),T_=2,_5=4,o$=3,C5=6,E5=0,A5="rrweb/console@1",P5=Yt(function t(e){var n,i,r=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};qt(this,t),_e(this,"bucketSize",100),_e(this,"refillRate",10),_e(this,"mutationBuckets",{}),_e(this,"loggedTracker",{}),_e(this,"refillBuckets",function(){Object.keys(r.mutationBuckets).forEach(function(o){r.mutationBuckets[o]=r.mutationBuckets[o]+r.refillRate,r.mutationBuckets[o]>=r.bucketSize&&delete r.mutationBuckets[o]})}),_e(this,"getNodeOrRelevantParent",function(o){var a=r.rrweb.mirror.getNode(o);if((a==null?void 0:a.nodeName)!=="svg"&&a instanceof Element){var l=a.closest("svg");if(l)return[r.rrweb.mirror.getId(l),l]}return[o,a]}),_e(this,"numberOfChanges",function(o){var a,l,c,u,d,f,h,p;return((a=(l=o.removes)===null||l===void 0?void 0:l.length)!==null&&a!==void 0?a:0)+((c=(u=o.attributes)===null||u===void 0?void 0:u.length)!==null&&c!==void 0?c:0)+((d=(f=o.texts)===null||f===void 0?void 0:f.length)!==null&&d!==void 0?d:0)+((h=(p=o.adds)===null||p===void 0?void 0:p.length)!==null&&h!==void 0?h:0)}),_e(this,"throttleMutations",function(o){if(o.type!==o$||o.data.source!==E5)return o;var a=o.data,l=r.numberOfChanges(a);a.attributes&&(a.attributes=a.attributes.filter(function(u){var d,f,h,p=Mr(r.getNodeOrRelevantParent(u.id),2),m=p[0],w=p[1];return r.mutationBuckets[m]===0?!1:(r.mutationBuckets[m]=(d=r.mutationBuckets[m])!==null&&d!==void 0?d:r.bucketSize,r.mutationBuckets[m]=Math.max(r.mutationBuckets[m]-1,0),r.mutationBuckets[m]===0&&(r.loggedTracker[m]||(r.loggedTracker[m]=!0,(f=(h=r.options).onBlockedNode)===null||f===void 0||f.call(h,m,w))),u)}));var c=r.numberOfChanges(a);return c!==0||l===c?o:void 0}),this.rrweb=e,this.options=s,this.refillRate=(n=this.options.refillRate)!==null&&n!==void 0?n:this.refillRate,this.bucketSize=(i=this.options.bucketSize)!==null&&i!==void 0?i:this.bucketSize,setInterval(function(){r.refillBuckets()},1e3)}),a$=function(t){return t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin",t}(a$||{}),$5={initiatorTypes:["audio","beacon","body","css","early-hint","embed","fetch","frame","iframe","icon","image","img","input","link","navigation","object","ping","script","track","video","xmlhttprequest"],maskRequestFn:function(t){return t},recordHeaders:!1,recordBody:!1,recordInitialRequests:!1,recordPerformance:!1,performanceEntryTypeToObserve:["first-input","navigation","paint","resource"],payloadSizeLimitBytes:1e6},T5=["authorization","x-forwarded-for","authorization","cookie","set-cookie","x-api-key","x-real-ip","remote-addr","forwarded","proxy-authorization","x-csrf-token","x-csrftoken","x-xsrf-token"],O5=["/s/","/e/","/i/vo/e/"];function O_(t,e,n,i){var r=e==null?void 0:e["content-length"];return r&&parseInt(r)>n?"".concat(i," body too large to record"):t}var as,N5=function(t,e){var n,i,r,s=t.session_recording,o=s.recordHeaders!==!1&&e.recordHeaders,a=s.recordBody!==!1&&e.recordBody,l=s.recordPerformance!==!1&&e.recordPerformance,c=(n=s,r=Math.min(1e6,(i=n.payloadSizeLimitBytes)!==null&&i!==void 0?i:1e6),function(f){return f!=null&&f.requestBody&&(f.requestBody=O_(f.requestBody,f.requestHeaders,r,"Request")),f!=null&&f.responseBody&&(f.responseBody=O_(f.responseBody,f.responseHeaders,r,"Response")),f}),u=function(f){return c(function(m){var w=s$(m.name);if(!(w&&w.pathname&&O5.includes(w.pathname)))return m}((h=f,Object.keys((p=h.requestHeaders)!==null&&p!==void 0?p:{}).forEach(function(m){var w;T5.includes(m.toLowerCase())&&((w=h.requestHeaders)===null||w===void 0||delete w[m])}),h)));var h,p},d=zr(t.session_recording.maskNetworkRequestFn);return d&&zr(t.session_recording.maskCapturedNetworkRequestFn)&&he.warn("Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored."),d&&(t.session_recording.maskCapturedNetworkRequestFn=function(f){var h=t.session_recording.maskNetworkRequestFn({url:f.name});return Ne(Ne({},f),{},{name:h==null?void 0:h.url})}),s.maskRequestFn=zr(t.session_recording.maskCapturedNetworkRequestFn)?function(f){var h,p,m,w=u(f);return w&&(h=(p=(m=t.session_recording).maskCapturedNetworkRequestFn)===null||p===void 0?void 0:p.call(m,w))!==null&&h!==void 0?h:void 0}:void 0,s.maskRequestFn||(s.maskRequestFn=u),Ne(Ne(Ne({},$5),s),{},{recordHeaders:o,recordBody:a,recordPerformance:l,recordInitialRequests:l})},R5="/s/",N_=3e5;(function(t){t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration",t[t.Selection=14]="Selection",t[t.AdoptedStyleSheet=15]="AdoptedStyleSheet"})(as||(as={}));var M5=[as.MouseMove,as.MouseInteraction,as.Scroll,as.ViewportResize,as.Input,as.TouchMove,as.MediaInteraction,as.Drag],D5=function(){function t(e){var n=this;if(qt(this,t),_e(this,"isIdle",!1),_e(this,"_linkedFlagSeen",!1),_e(this,"_lastActivityTimestamp",Date.now()),_e(this,"windowId",null),_e(this,"sessionId",null),_e(this,"_linkedFlag",null),_e(this,"_sampleRate",null),_e(this,"_minimumDuration",null),_e(this,"_forceAllowLocalhostNetworkCapture",!1),this.instance=e,this._captureStarted=!1,this._endpoint=R5,this.stopRrweb=void 0,this.receivedDecide=!1,G==null||G.addEventListener("beforeunload",function(){n._flushBuffer()}),!this.instance.sessionManager)throw he.error("Session recording started without valid sessionManager"),new Error("Session recording started without valid sessionManager. This is a bug.");this.buffer=this.clearBuffer()}return Yt(t,[{key:"started",get:function(){return this._captureStarted}},{key:"sessionManager",get:function(){if(!this.instance.sessionManager)throw he.error("Session recording started without valid sessionManager"),new Error("Session recording started without valid sessionManager. This is a bug.");return this.instance.sessionManager}},{key:"isSampled",get:function(){return Qs(this._sampleRate)?this.instance.get_property(Gp):null}},{key:"sessionDuration",get:function(){var e,n,i=(e=this.buffer)===null||e===void 0?void 0:e.data[((n=this.buffer)===null||n===void 0?void 0:n.data.length)-1],r=this.sessionManager.checkAndGetSessionAndWindowId(!0).sessionStartTimestamp;return i?i.timestamp-r:null}},{key:"isRecordingEnabled",get:function(){var e=!!this.instance.get_property(pw),n=!this.instance.config.disable_session_recording;return G&&e&&n}},{key:"isConsoleLogCaptureEnabled",get:function(){var e=!!this.instance.get_property(x_),n=this.instance.config.enable_recording_console_log;return n??e}},{key:"recordingVersion",get:function(){var e,n=this.instance.get_property(S_);return((e=this.instance.config.session_recording)===null||e===void 0?void 0:e.recorderVersion)||n||"v1"}},{key:"networkPayloadCapture",get:function(){var e,n,i=this.instance.get_property(k_),r={recordHeaders:(e=this.instance.config.session_recording)===null||e===void 0?void 0:e.recordHeaders,recordBody:(n=this.instance.config.session_recording)===null||n===void 0?void 0:n.recordBody},s=(r==null?void 0:r.recordHeaders)||(i==null?void 0:i.recordHeaders),o=(r==null?void 0:r.recordBody)||(i==null?void 0:i.recordBody),a=this.instance.config.capture_performance||(i==null?void 0:i.capturePerformance);return s||o||a?{recordHeaders:s,recordBody:o,recordPerformance:a}:void 0}},{key:"status",get:function(){return this.receivedDecide?this.isRecordingEnabled?Hi(this._linkedFlag)&&!this._linkedFlagSeen?"buffering":fw(this.isSampled)?this.isSampled?"sampled":"disabled":"active":"disabled":"buffering"}},{key:"startRecordingIfEnabled",value:function(){this.isRecordingEnabled?this.startCaptureAndTrySendingQueuedSnapshots():(this.stopRecording(),this.clearBuffer())}},{key:"stopRecording",value:function(){this._captureStarted&&this.stopRrweb&&(this.stopRrweb(),this.stopRrweb=void 0,this._captureStarted=!1)}},{key:"makeSamplingDecision",value:function(e){var n,i=this.sessionId!==e;if(Qs(this._sampleRate)){var r,s=this.isSampled;i||!fw(s)?r=Math.random()<this._sampleRate:r=s,r||he.warn("[SessionSampling] Sample rate (".concat(this._sampleRate,") has determined that this sessionId (").concat(e,") will not be sent to the server.")),(n=this.instance.persistence)===null||n===void 0||n.register(_e({},Gp,r))}else{var o;(o=this.instance.persistence)===null||o===void 0||o.register(_e({},Gp,null))}}},{key:"afterDecideResponse",value:function(e){var n,i,r,s,o,a,l,c,u=this;this.instance.persistence&&this.instance.persistence.register((_e(c={},pw,!!e.sessionRecording),_e(c,x_,(o=e.sessionRecording)===null||o===void 0?void 0:o.consoleLogRecordingEnabled),_e(c,S_,(a=e.sessionRecording)===null||a===void 0?void 0:a.recorderVersion),_e(c,k_,Ne({capturePerformance:e.capturePerformance},(l=e.sessionRecording)===null||l===void 0?void 0:l.networkPayloadCapture)),c));var d=(n=e.sessionRecording)===null||n===void 0?void 0:n.sampleRate;this._sampleRate=et(d)||mr(d)?null:parseFloat(d);var f,h=(i=e.sessionRecording)===null||i===void 0?void 0:i.minimumDurationMilliseconds;if(this._minimumDuration=et(h)?null:h,this._linkedFlag=((r=e.sessionRecording)===null||r===void 0?void 0:r.linkedFlag)||null,(s=e.sessionRecording)!==null&&s!==void 0&&s.endpoint&&(this._endpoint=(f=e.sessionRecording)===null||f===void 0?void 0:f.endpoint),Qs(this._sampleRate)&&this.sessionManager.onSessionId(function(m){u.makeSamplingDecision(m)}),Hi(this._linkedFlag)){var p=this._linkedFlag;this.instance.onFeatureFlags(function(m){u._linkedFlagSeen=m.includes(p)})}this.receivedDecide=!0,this.startRecordingIfEnabled()}},{key:"log",value:function(e){var n,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"log";(n=this.instance.sessionRecording)===null||n===void 0||n.onRRwebEmit({type:6,data:{plugin:"rrweb/console@1",payload:{level:i,trace:[],payload:[JSON.stringify(e)]}},timestamp:ZP()})}},{key:"startCaptureAndTrySendingQueuedSnapshots",value:function(){this._startCapture()}},{key:"_startCapture",value:function(){var e=this;if(!et(Object.assign)&&!this._captureStarted&&!this.instance.config.disable_session_recording){this._captureStarted=!0,this.sessionManager.checkAndGetSessionAndWindowId();var n=this.recordingVersion==="v2"?"recorder-v2.js":"recorder.js";this.instance.__loaded_recorder_version!==this.recordingVersion?Pd(this.instance.config.api_host+"/static/".concat(n,"?v=").concat(Sl.LIB_VERSION),function(i){if(i)return he.error("Could not load ".concat(n),i);e._onScriptLoaded()}):this._onScriptLoaded()}}},{key:"_isInteractiveEvent",value:function(e){var n;return e.type===o$&&M5.indexOf((n=e.data)===null||n===void 0?void 0:n.source)!==-1}},{key:"_updateWindowAndSessionIds",value:function(e){var n=this._isInteractiveEvent(e);if(n||this.isIdle||e.timestamp-this._lastActivityTimestamp>N_&&(this.isIdle=!0,this._tryAddCustomEvent("sessionIdle",{reason:"user inactivity",timeSinceLastActive:e.timestamp-this._lastActivityTimestamp,threshold:N_})),n&&(this._lastActivityTimestamp=e.timestamp,this.isIdle&&(this.isIdle=!1,this._tryAddCustomEvent("sessionNoLongerIdle",{reason:"user activity",type:e.type}),this._tryTakeFullSnapshot())),!this.isIdle){var i=this.sessionManager.checkAndGetSessionAndWindowId(!n,e.timestamp),r=i.windowId,s=i.sessionId,o=this.sessionId!==s,a=this.windowId!==r;[T_,_5].indexOf(e.type)===-1&&(a||o)&&this._tryTakeFullSnapshot(),this.windowId=r,this.sessionId=s}}},{key:"_tryRRwebMethod",value:function(e){if(!this._captureStarted)return!1;try{return e(),!0}catch(n){return he.error("[Session-Recording] using rrweb when not started.",n),!1}}},{key:"_tryAddCustomEvent",value:function(e,n){var i=this;return this._tryRRwebMethod(function(){var r;return(r=i.rrwebRecord)===null||r===void 0?void 0:r.addCustomEvent(e,n)})}},{key:"_tryTakeFullSnapshot",value:function(){var e=this;return this._tryRRwebMethod(function(){var n;return(n=e.rrwebRecord)===null||n===void 0?void 0:n.takeFullSnapshot()})}},{key:"_onScriptLoaded",value:function(){var e,n=this,i={blockClass:"ph-no-capture",blockSelector:void 0,ignoreClass:"ph-ignore-input",maskTextClass:"ph-mask",maskTextSelector:void 0,maskTextFn:void 0,maskAllInputs:!0,maskInputOptions:{},maskInputFn:void 0,slimDOMOptions:{},collectFonts:!1,inlineStylesheet:!0,recordCrossOriginIframes:!1};this.rrwebRecord=G.rrweb?G.rrweb.record:G.rrwebRecord;for(var r=this.instance.config.session_recording,s=0,o=Object.entries(r||{});s<o.length;s++){var a=Mr(o[s],2),l=a[0],c=a[1];l in i&&(i[l]=c)}this.rrwebRecord?(this.mutationRateLimiter=(e=this.mutationRateLimiter)!==null&&e!==void 0?e:new P5(this.rrwebRecord,{onBlockedNode:function(u,d){var f="Too many mutations on node '".concat(u,"'. Rate limiting. This could be due to SVG animations or something similar");he.info(f,{node:d}),n.log("[PostHog Recorder] "+f,"warn")}}),this.stopRrweb=this.rrwebRecord(Ne({emit:function(u){n.onRRwebEmit(u)},plugins:this._gatherRRWebPlugins()},i)),this.instance._addCaptureHook(function(u){try{if(u==="$pageview"){var d=G?n._maskUrl(G.location.href):"";if(!d)return;n._tryAddCustomEvent("$pageview",{href:d})}}catch(f){he.error("Could not add $pageview to rrweb session",f)}}),this._lastActivityTimestamp=Date.now(),this.isIdle=!1):he.error("onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.")}},{key:"_gatherRRWebPlugins",value:function(){var e=[];return Un.rrwebConsoleRecord&&this.isConsoleLogCaptureEnabled&&e.push(Un.rrwebConsoleRecord.getRecordConsolePlugin()),this.networkPayloadCapture&&zr(Un.getRecordNetworkPlugin)&&(!x5.includes(location.hostname)||this._forceAllowLocalhostNetworkCapture?e.push(Un.getRecordNetworkPlugin(N5(this.instance.config,this.networkPayloadCapture))):he.info("[SessionReplay-NetworkCapture] not started because we are on localhost.")),e}},{key:"onRRwebEmit",value:function(e){if(e&&oa(e)){if(e.type===a$.Meta){var n=this._maskUrl(e.data.href);if(!n)return;e.data.href=n}var i=this.mutationRateLimiter?this.mutationRateLimiter.throttleMutations(e):e;if(i){var r=function(a){var l=a;if(l&&oa(l)&&l.type===C5&&oa(l.data)&&l.data.plugin===A5){l.data.payload.payload.length>10&&(l.data.payload.payload=l.data.payload.payload.slice(0,10),l.data.payload.payload.push("...[truncated]"));for(var c=[],u=0;u<l.data.payload.payload.length;u++)l.data.payload.payload[u]&&l.data.payload.payload[u].length>2e3?c.push(l.data.payload.payload[u].slice(0,2e3)+"...[truncated]"):c.push(l.data.payload.payload[u]);return l.data.payload.payload=c,a}return a}(i),s=JSON.stringify(r).length;if(this._updateWindowAndSessionIds(r),!this.isIdle){var o={$snapshot_bytes:s,$snapshot_data:r,$session_id:this.sessionId,$window_id:this.windowId};this.status!=="disabled"?this._captureSnapshotBuffered(o):this.clearBuffer()}}}}},{key:"_maskUrl",value:function(e){var n=this.instance.config.session_recording;if(n.maskNetworkRequestFn){var i,r={url:e};return(i=r=n.maskNetworkRequestFn(r))===null||i===void 0?void 0:i.url}return e}},{key:"clearBuffer",value:function(){return this.buffer=void 0,{size:0,data:[],sessionId:this.sessionId,windowId:this.windowId}}},{key:"_flushBuffer",value:function(){var e=this;this.flushBufferTimer&&(clearTimeout(this.flushBufferTimer),this.flushBufferTimer=void 0);var n=this._minimumDuration,i=this.sessionDuration,r=Qs(i)&&i>=0,s=Qs(n)&&r&&i<n;return this.status==="buffering"||s?(this.flushBufferTimer=setTimeout(function(){e._flushBuffer()},2e3),this.buffer||this.clearBuffer()):this.buffer&&this.buffer.data.length!==0?(this._captureSnapshot({$snapshot_bytes:this.buffer.size,$snapshot_data:this.buffer.data,$session_id:this.buffer.sessionId,$window_id:this.buffer.windowId}),this.clearBuffer()):this.buffer||this.clearBuffer()}},{key:"_captureSnapshotBuffered",value:function(e){var n,i=this,r=2+(((n=this.buffer)===null||n===void 0?void 0:n.data.length)||0);(!this.buffer||this.buffer.size+e.$snapshot_bytes+r>943718.4||this.buffer.sessionId&&this.buffer.sessionId!==this.sessionId)&&(this.buffer=this._flushBuffer()),mr(this.buffer.sessionId)&&!mr(this.sessionId)&&(this.buffer.sessionId=this.sessionId,this.buffer.windowId=this.windowId),this.buffer.size+=e.$snapshot_bytes,this.buffer.data.push(e.$snapshot_data),this.flushBufferTimer||(this.flushBufferTimer=setTimeout(function(){i._flushBuffer()},2e3))}},{key:"_captureSnapshot",value:function(e){this.instance.capture("$snapshot",e,{transport:"XHR",method:"POST",endpoint:this._endpoint,_noTruncate:!0,_batchKey:"recordings",_metrics:{rrweb_full_snapshot:e.$snapshot_data.type===T_}})}}]),t}(),I5=function(){function t(e){qt(this,t),this.instance=e,this.instance.decideEndpointWasHit=this.instance._hasBootstrappedFeatureFlags()}return Yt(t,[{key:"call",value:function(){var e=this,n=J1(JSON.stringify({token:this.instance.config.token,distinct_id:this.instance.get_distinct_id(),groups:this.instance.getGroups(),person_properties:this.instance.get_property(hc),group_properties:this.instance.get_property(Ro),disable_flags:this.instance.config.advanced_disable_feature_flags||this.instance.config.advanced_disable_feature_flags_on_first_load||void 0}));this.instance._send_request("".concat(this.instance.config.api_host,"/decide/?v=3"),{data:n,verbose:!0},{method:"POST"},function(i){return e.parseDecideResponse(i)})}},{key:"parseDecideResponse",value:function(e){var n,i=this;if(this.instance.featureFlags.setReloadingPaused(!1),this.instance.featureFlags._startReloadTimer(),(e==null?void 0:e.status)!==0){if(!Te||!Te.body)return he.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout(function(){i.parseDecideResponse(e)},500);this.instance.toolbar.afterDecideResponse(e),(n=this.instance.sessionRecording)===null||n===void 0||n.afterDecideResponse(e),Fo.afterDecideResponse(e,this.instance),this.instance._afterDecideResponse(e),this.instance.config.advanced_disable_feature_flags_on_first_load||this.instance.config.advanced_disable_feature_flags||this.instance.featureFlags.receivedFeatureFlags(e);var r=G==null?void 0:G.extendPostHogWithSurveys;e.surveys&&!r&&Pd(this.instance.config.api_host+"/static/surveys.js",function(u){if(u)return he.error("Could not load surveys script",u);G.extendPostHogWithSurveys(i.instance)});var s=G==null?void 0:G.extendPostHogWithExceptionAutoCapture;if(e.autocaptureExceptions&&e.autocaptureExceptions&&et(s)&&Pd(this.instance.config.api_host+"/static/exception-autocapture.js",function(u){if(u)return he.error("Could not load exception autocapture script",u);G.extendPostHogWithExceptionAutocapture(i.instance,e)}),e.siteApps)if(this.instance.config.opt_in_site_apps){var o,a=this.instance.config.api_host,l=xl(e.siteApps);try{var c=function(){var u=o.value,d=u.id,f=u.url,h=[a,a[a.length-1]==="/"&&f[0]==="/"?f.substring(1):f].join("");Un["__$$ph_site_app_".concat(d)]=i.instance,Pd(h,function(p){p&&he.error("Error while initializing PostHog app with config id ".concat(d),p)})};for(l.s();!(o=l.n()).done;)c()}catch(u){l.e(u)}finally{l.f()}}else e.siteApps.length>0&&he.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}else he.error("Failed to fetch feature flags from PostHog.")}}]),t}(),L5=["https://app.posthog.com","https://eu.posthog.com"],B5=["source"],j5=G!=null&&G.location?Mm(G.location.hash,"__posthog")||Mm(location.hash,"state"):null,F5=function(){function t(e){qt(this,t),this.instance=e}return Yt(t,[{key:"afterDecideResponse",value:function(e){var n=e.toolbarParams||e.editorParams||(e.toolbarVersion?{toolbarVersion:e.toolbarVersion}:{});e.isAuthenticated&&n.toolbarVersion&&n.toolbarVersion.indexOf("toolbar")===0&&this.loadToolbar(Ne({},n))}},{key:"maybeLoadToolbar",value:function(){var e,n,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;if(!G||!Te)return!1;i=(e=i)!==null&&e!==void 0?e:G.location,s=(n=s)!==null&&n!==void 0?n:G.history;try{if(!r){try{G.localStorage.setItem("test","test"),G.localStorage.removeItem("test")}catch{return!1}r=G==null?void 0:G.localStorage}var o,a=j5||Mm(i.hash,"__posthog")||Mm(i.hash,"state"),l=a?m_(function(){return JSON.parse(atob(decodeURIComponent(a)))})||m_(function(){return JSON.parse(decodeURIComponent(a))}):null;return l&&l.action==="ph_authorize"?((o=l).source="url",o&&Object.keys(o).length>0&&(l.desiredHash?i.hash=l.desiredHash:s?s.replaceState("",Te.title,i.pathname+i.search):i.hash="")):((o=JSON.parse(r.getItem("_postHogToolbarParams")||"{}")).source="localstorage",delete o.userIntent),!(!o.token||this.instance.config.token!==o.token)&&(this.loadToolbar(o),!0)}catch{return!1}}},{key:"loadToolbar",value:function(e){var n=this;if(!G||Un._postHogToolbarLoaded)return!1;Un._postHogToolbarLoaded=!0;var i=this.instance.config.api_host,r=3e5,s=Math.floor(Date.now()/r)*r,o="".concat(i).concat(i.endsWith("/")?"":"/","static/toolbar.js?t=").concat(s),a=!L5.includes(this.instance.config.api_host)&&this.instance.config.advanced_disable_toolbar_metrics,l=Ne(Ne({token:this.instance.config.token},e),{},{apiURL:i},a?{instrument:!1}:{});l.source;var c=QL(l,B5);return G.localStorage.setItem("_postHogToolbarParams",JSON.stringify(c)),Pd(o,function(u){u?he.error("Failed to load toolbar",u):(Un.ph_load_toolbar||Un.ph_load_editor)(l,n.instance)}),Ad(G,"turbolinks:load",function(){Un._postHogToolbarLoaded=!1,n.loadToolbar(l)}),!0}},{key:"_loadEditor",value:function(e){return this.loadToolbar(e)}},{key:"maybeLoadEditor",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;return this.maybeLoadToolbar(e,n,i)}}]),t}(),z5="__ph_opt_in_out_";function U5(t,e){c$(!0,t,e)}function V5(t,e){c$(!1,t,e)}function H5(t,e){return l$(t,e)==="1"}function R_(t,e){return!!function(n){if(n&&n.respectDnt){var i=n&&n.window||G,r=i==null?void 0:i.navigator,s=!1;return yt([r==null?void 0:r.doNotTrack,r.msDoNotTrack,i.doNotTrack],function(o){at([!0,1,"1","yes"],o)&&(s=!0)}),s}return!1}(e)||l$(t,e)==="0"}function W5(t,e){Q1(e=e||{}).remove(ex(t,e),!!e.crossSubdomainCookie)}function Q1(t){return(t=t||{}).persistenceType==="localStorage"?Zt:t.persistenceType==="localStorage+cookie"?pd:Cs}function ex(t,e){return((e=e||{}).persistencePrefix||z5)+t}function l$(t,e){return Q1(e).get(ex(t,e))}function c$(t,e,n){Hi(e)&&e.length?(Q1(n=n||{}).set(ex(e,n),t?1:0,Qs(n.cookieExpiration)?n.cookieExpiration:null,n.crossSubdomainCookie,n.secureCookie),n.capture&&t&&n.capture(n.captureEventName||"$opt_in",n.captureProperties||{},{send_instantly:!0})):he.error("gdpr."+(t?"optIn":"optOut")+" called with an invalid token")}var u$=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:3e3;qt(this,t),this.isPolling=!0,this._event_queue=[],this._empty_queue_count=0,this._poller=void 0,this._pollInterval=e}return Yt(t,[{key:"setPollInterval",value:function(e){this._pollInterval=e,this.isPolling&&this.poll()}},{key:"poll",value:function(){}},{key:"unload",value:function(){}},{key:"getTime",value:function(){return new Date().getTime()}}]),t}(),G5=function(t){KP(n,u$);var e=XP(n);function n(i){var r,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3e3;return qt(this,n),(r=e.call(this,s)).handlePollRequest=i,r}return Yt(n,[{key:"enqueue",value:function(i,r,s){this._event_queue.push({url:i,data:r,options:s}),this.isPolling||(this.isPolling=!0,this.poll())}},{key:"poll",value:function(){var i=this;clearTimeout(this._poller),this._poller=setTimeout(function(){if(i._event_queue.length>0){var r=i.formatQueue(),s=function(a){var l=r[a],c=l.url,u=l.data,d=l.options;yt(u,function(f,h){u[h].offset=Math.abs(u[h].timestamp-i.getTime()),delete u[h].timestamp}),i.handlePollRequest(c,u,d)};for(var o in r)s(o);i._event_queue.length=0,i._empty_queue_count=0}else i._empty_queue_count++;i._empty_queue_count>4&&(i.isPolling=!1,i._empty_queue_count=0),i.isPolling&&i.poll()},this._pollInterval)}},{key:"unload",value:function(){var i=this;clearTimeout(this._poller);var r=this._event_queue.length>0?this.formatQueue():{};this._event_queue.length=0;var s=Object.values(r);[].concat(uw(s.filter(function(o){return o.url.indexOf("/e")===0})),uw(s.filter(function(o){return o.url.indexOf("/e")!==0}))).map(function(o){var a=o.url,l=o.data,c=o.options;i.handlePollRequest(a,l,Ne(Ne({},c),{},{transport:"sendBeacon"}))})}},{key:"formatQueue",value:function(){var i={};return yt(this._event_queue,function(r){var s=r.url,o=r.data,a=r.options,l=(a?a._batchKey:null)||s;et(i[l])&&(i[l]={data:[],url:s,options:a}),a&&i[l].options&&i[l].options._metrics&&!i[l].options._metrics.rrweb_full_snapshot&&(i[l].options._metrics.rrweb_full_snapshot=a._metrics.rrweb_full_snapshot),i[l].data.push(o)}),i}}]),n}(),Wi=Uint8Array,Jn=Uint16Array,nu=Uint32Array,tx=new Wi([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),nx=new Wi([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),M_=new Wi([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),d$=function(t,e){for(var n=new Jn(31),i=0;i<31;++i)n[i]=e+=1<<t[i-1];var r=new nu(n[30]);for(i=1;i<30;++i)for(var s=n[i];s<n[i+1];++s)r[s]=s-n[i]<<5|i;return[n,r]},f$=d$(tx,2),K5=f$[0],bw=f$[1];K5[28]=258,bw[258]=28;for(var D_=d$(nx,0)[1],xw=new Jn(32768),Pt=0;Pt<32768;++Pt){var Wa=(43690&Pt)>>>1|(21845&Pt)<<1;Wa=(61680&(Wa=(52428&Wa)>>>2|(13107&Wa)<<2))>>>4|(3855&Wa)<<4,xw[Pt]=((65280&Wa)>>>8|(255&Wa)<<8)>>>1}var $d=function(t,e,n){for(var i=t.length,r=0,s=new Jn(e);r<i;++r)++s[t[r]-1];var o,a=new Jn(e);for(r=0;r<e;++r)a[r]=a[r-1]+s[r-1]<<1;if(n){o=new Jn(1<<e);var l=15-e;for(r=0;r<i;++r)if(t[r])for(var c=r<<4|t[r],u=e-t[r],d=a[t[r]-1]++<<u,f=d|(1<<u)-1;d<=f;++d)o[xw[d]>>>l]=c}else for(o=new Jn(i),r=0;r<i;++r)o[r]=xw[a[t[r]-1]++]>>>15-t[r];return o},kl=new Wi(288);for(Pt=0;Pt<144;++Pt)kl[Pt]=8;for(Pt=144;Pt<256;++Pt)kl[Pt]=9;for(Pt=256;Pt<280;++Pt)kl[Pt]=7;for(Pt=280;Pt<288;++Pt)kl[Pt]=8;var Dm=new Wi(32);for(Pt=0;Pt<32;++Pt)Dm[Pt]=5;var Za,X5=$d(kl,9,0),q5=$d(Dm,5,0),h$=function(t){return(t/8>>0)+(7&t&&1)},p$=function(t,e,n){(e==null||e<0)&&(e=0),(n==null||n>t.length)&&(n=t.length);var i=new(t instanceof Jn?Jn:t instanceof nu?nu:Wi)(n-e);return i.set(t.subarray(e,n)),i},Rs=function(t,e,n){n<<=7&e;var i=e/8>>0;t[i]|=n,t[i+1]|=n>>>8},zu=function(t,e,n){n<<=7&e;var i=e/8>>0;t[i]|=n,t[i+1]|=n>>>8,t[i+2]|=n>>>16},x0=function(t,e){for(var n=[],i=0;i<t.length;++i)t[i]&&n.push({s:i,f:t[i]});var r=n.length,s=n.slice();if(!r)return[new Wi(0),0];if(r==1){var o=new Wi(n[0].s+1);return o[n[0].s]=1,[o,1]}n.sort(function(_,P){return _.f-P.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,u=1,d=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};u!=r-1;)a=n[n[c].f<n[d].f?c++:d++],l=n[c!=u&&n[c].f<n[d].f?c++:d++],n[u++]={s:-1,f:a.f+l.f,l:a,r:l};var f=s[0].s;for(i=1;i<r;++i)s[i].s>f&&(f=s[i].s);var h=new Jn(f+1),p=Y5(n[u-1],h,0);if(p>e){i=0;var m=0,w=p-e,v=1<<w;for(s.sort(function(_,P){return h[P.s]-h[_.s]||_.f-P.f});i<r;++i){var y=s[i].s;if(!(h[y]>e))break;m+=v-(1<<p-h[y]),h[y]=e}for(m>>>=w;m>0;){var x=s[i].s;h[x]<e?m-=1<<e-h[x]++-1:++i}for(;i>=0&&m;--i){var k=s[i].s;h[k]==e&&(--h[k],++m)}p=e}return[new Wi(h),p]},Y5=function t(e,n,i){return e.s==-1?Math.max(t(e.l,n,i+1),t(e.r,n,i+1)):n[e.s]=i},I_=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Jn(++e),i=0,r=t[0],s=1,o=function(l){n[i++]=l},a=1;a<=e;++a)if(t[a]==r&&a!=e)++s;else{if(!r&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(r),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(r);s=1,r=t[a]}return[n.subarray(0,i),e]},Uu=function(t,e){for(var n=0,i=0;i<e.length;++i)n+=t[i]*e[i];return n},Kp=function(t,e,n){var i=n.length,r=h$(e+2);t[r]=255&i,t[r+1]=i>>>8,t[r+2]=255^t[r],t[r+3]=255^t[r+1];for(var s=0;s<i;++s)t[r+s+4]=n[s];return 8*(r+4+i)},L_=function(t,e,n,i,r,s,o,a,l,c,u){Rs(e,u++,n),++r[256];for(var d=x0(r,15),f=d[0],h=d[1],p=x0(s,15),m=p[0],w=p[1],v=I_(f),y=v[0],x=v[1],k=I_(m),_=k[0],P=k[1],A=new Jn(19),C=0;C<y.length;++C)A[31&y[C]]++;for(C=0;C<_.length;++C)A[31&_[C]]++;for(var N=x0(A,7),R=N[0],M=N[1],L=19;L>4&&!R[M_[L-1]];--L);var H,T,V,Y,ne=c+5<<3,W=Uu(r,kl)+Uu(s,Dm)+o,j=Uu(r,f)+Uu(s,m)+o+14+3*L+Uu(A,R)+(2*A[16]+3*A[17]+7*A[18]);if(ne<=W&&ne<=j)return Kp(e,u,t.subarray(l,l+c));if(Rs(e,u,1+(j<W)),u+=2,j<W){H=$d(f,h,0),T=f,V=$d(m,w,0),Y=m;var Q=$d(R,M,0);for(Rs(e,u,x-257),Rs(e,u+5,P-1),Rs(e,u+10,L-4),u+=14,C=0;C<L;++C)Rs(e,u+3*C,R[M_[C]]);u+=3*L;for(var K=[y,_],ee=0;ee<2;++ee){var le=K[ee];for(C=0;C<le.length;++C){var B=31&le[C];Rs(e,u,Q[B]),u+=R[B],B>15&&(Rs(e,u,le[C]>>>5&127),u+=le[C]>>>12)}}}else H=X5,T=kl,V=q5,Y=Dm;for(C=0;C<a;++C)if(i[C]>255){B=i[C]>>>18&31,zu(e,u,H[B+257]),u+=T[B+257],B>7&&(Rs(e,u,i[C]>>>23&31),u+=tx[B]);var I=31&i[C];zu(e,u,V[I]),u+=Y[I],I>3&&(zu(e,u,i[C]>>>5&8191),u+=nx[I])}else zu(e,u,H[i[C]]),u+=T[i[C]];return zu(e,u,H[256]),u+T[256]},J5=new nu([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Z5=new Wi(0),Q5=function(){for(var t=new nu(256),e=0;e<256;++e){for(var n=e,i=9;--i;)n=(1&n&&3988292384)^n>>>1;t[e]=n}return t}(),e6=function(){var t=4294967295;return{p:function(e){for(var n=t,i=0;i<e.length;++i)n=Q5[255&n^e[i]]^n>>>8;t=n},d:function(){return 4294967295^t}}},t6=function(t,e,n,i,r){return function(s,o,a,l,c,u){var d=s.length,f=new Wi(l+d+5*(1+Math.floor(d/7e3))+c),h=f.subarray(l,f.length-c),p=0;if(!o||d<8)for(var m=0;m<=d;m+=65535){var w=m+65535;w<d?p=Kp(h,p,s.subarray(m,w)):(h[m]=u,p=Kp(h,p,s.subarray(m,d)))}else{for(var v=J5[o-1],y=v>>>13,x=8191&v,k=(1<<a)-1,_=new Jn(32768),P=new Jn(k+1),A=Math.ceil(a/3),C=2*A,N=function(pe){return(s[pe]^s[pe+1]<<A^s[pe+2]<<C)&k},R=new nu(25e3),M=new Jn(288),L=new Jn(32),H=0,T=0,V=(m=0,0),Y=0,ne=0;m<d;++m){var W=N(m),j=32767&m,Q=P[W];if(_[j]=Q,P[W]=j,Y<=m){var K=d-m;if((H>7e3||V>24576)&&K>423){p=L_(s,h,0,R,M,L,T,V,ne,m-ne,p),V=H=T=0,ne=m;for(var ee=0;ee<286;++ee)M[ee]=0;for(ee=0;ee<30;++ee)L[ee]=0}var le=2,B=0,I=x,z=j-Q&32767;if(K>2&&W==N(m-z))for(var S=Math.min(y,K)-1,$=Math.min(32767,m),D=Math.min(258,K);z<=$&&--I&&j!=Q;){if(s[m+le]==s[m+le-z]){for(var O=0;O<D&&s[m+O]==s[m+O-z];++O);if(O>le){if(le=O,B=z,O>S)break;var U=Math.min(z,O-2),X=0;for(ee=0;ee<U;++ee){var te=m-z+ee+32768&32767,J=te-_[te]+32768&32767;J>X&&(X=J,Q=te)}}}z+=(j=Q)-(Q=_[j])+32768&32767}if(B){R[V++]=268435456|bw[le]<<18|D_[B];var se=31&bw[le],Me=31&D_[B];T+=tx[se]+nx[Me],++M[257+se],++L[Me],Y=m+le,++H}else R[V++]=s[m],++M[s[m]]}}p=L_(s,h,u,R,M,L,T,V,ne,m-ne,p),u||(p=Kp(h,p,Z5))}return p$(f,0,l+h$(p)+c)}(t,e.level==null?6:e.level,e.mem==null?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):12+e.mem,n,i,!r)},Sw=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},n6=function(t,e){var n=e.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=e.level<2?4:e.level==9?2:0,t[9]=3,e.mtime!=0&&Sw(t,4,Math.floor(new Date(e.mtime||Date.now())/1e3)),n){t[3]=8;for(var i=0;i<=n.length;++i)t[i+10]=n.charCodeAt(i)}},i6=function(t){return 10+(t.filename&&t.filename.length+1||0)};function r6(t,e){e===void 0&&(e={});var n=e6(),i=t.length;n.p(t);var r=t6(t,e,i6(e),8),s=r.length;return n6(r,e),Sw(r,s-8,n.d()),Sw(r,s-4,i),r}function s6(t,e){var n=t.length;if(!e&&typeof TextEncoder<"u")return new TextEncoder().encode(t);for(var i=new Wi(t.length+(t.length>>>1)),r=0,s=function(c){i[r++]=c},o=0;o<n;++o){if(r+5>i.length){var a=new Wi(r+8+(n-o<<1));a.set(i),i=a}var l=t.charCodeAt(o);l<128||e?s(l):l<2048?(s(192|l>>>6),s(128|63&l)):l>55295&&l<57344?(s(240|(l=65536+(1047552&l)|1023&t.charCodeAt(++o))>>>18),s(128|l>>>12&63),s(128|l>>>6&63),s(128|63&l)):(s(224|l>>>12),s(128|l>>>6&63),s(128|63&l))}return p$(i,0,r)}(function(t){t.GZipJS="gzip-js",t.Base64="base64"})(Za||(Za={}));var m$=function(t,e,n){var i=e||{};i.ip=n.ip?1:0,i._=new Date().getTime().toString(),i.ver=Sl.LIB_VERSION;var r=t.split("?");if(r.length>1){var s,o=xl(r[1].split("&"));try{for(o.s();!(s=o.n()).done;){var a=s.value.split("=")[0];et(i[a])||delete i[a]}}catch(c){o.e(c)}finally{o.f()}}var l=t.indexOf("?")>-1?"&":"?";return t+l+function(c){var u,d,f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"&",h=[];return yt(c,function(p,m){et(p)||et(m)||m==="undefined"||(u=encodeURIComponent(p.toString()),d=encodeURIComponent(m),h[h.length]=d+"="+u)}),h.join(f)}(i)},ix=function t(e,n){if(n.blob&&e.buffer)return new Blob([u_(e)?e:e.buffer],{type:"text/plain"});if(n.sendBeacon||n.blob){var i=t(e,{method:"POST"});return new Blob([i],{type:"application/x-www-form-urlencoded"})}return n.method!=="POST"?null:(r=pn(e)||u_(e)?"data="+encodeURIComponent(e):"data="+encodeURIComponent(e.data),"compression"in e&&e.compression&&(r+="&compression="+e.compression),r);var r},g$=function(t){var e=t.url,n=t.data,i=t.headers,r=t.options,s=t.callback,o=t.retriesPerformedSoFar,a=t.retryQueue,l=t.onXHRError,c=t.timeout,u=c===void 0?6e4:c,d=t.onResponse;Qs(o)&&o>0&&(e=m$(e,{retry_count:o},{}));var f=new XMLHttpRequest;f.open(r.method||"GET",e,!0);var h=ix(n,r);yt(i,function(p,m){f.setRequestHeader(m,p)}),r.method!=="POST"||r.blob||f.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),f.timeout=u,f.withCredentials=!0,f.onreadystatechange=function(){if(f.readyState===4)if(d==null||d(f),f.status===200){if(s){var p;try{p=JSON.parse(f.responseText)}catch(m){return void he.error(m)}s(p)}}else zr(l)&&l(f),(f.status<400||f.status>500)&&a.enqueue({url:e,data:n,options:r,headers:i,retriesPerformedSoFar:(o||0)+1,callback:s}),s==null||s({status:0})},f.send(h)},o6=18e5,a6=function(t){KP(n,u$);var e=XP(n);function n(i,r){var s;return qt(this,n),(s=e.call(this)).isPolling=!1,s.queue=[],s.areWeOnline=!0,s.onXHRError=i,s.rateLimiter=r,!et(G)&&"onLine"in G.navigator&&(s.areWeOnline=G.navigator.onLine,G.addEventListener("online",function(){s._handleWeAreNowOnline()}),G.addEventListener("offline",function(){s.areWeOnline=!1})),s}return Yt(n,[{key:"enqueue",value:function(i){var r=i.retriesPerformedSoFar||0;if(!(r>=10)){var s=function(l){var c=3e3*Math.pow(2,l),u=c/2,d=Math.min(o6,c),f=(Math.random()-.5)*(d-u);return Math.ceil(d+f)}(r),o=new Date(Date.now()+s);this.queue.push({retryAt:o,requestData:i});var a="Enqueued failed request for retry in ".concat(s);navigator.onLine||(a+=" (Browser is offline)"),he.warn(a),this.isPolling||(this.isPolling=!0,this.poll())}}},{key:"poll",value:function(){var i=this;this._poller&&clearTimeout(this._poller),this._poller=setTimeout(function(){i.areWeOnline&&i.queue.length>0&&i.flush(),i.poll()},this._pollInterval)}},{key:"flush",value:function(){var i=new Date(Date.now()),r=this.queue.filter(function(l){return l.retryAt<i});if(r.length>0){this.queue=this.queue.filter(function(l){return l.retryAt>=i});var s,o=xl(r);try{for(o.s();!(s=o.n()).done;){var a=s.value.requestData;this._executeXhrRequest(a)}}catch(l){o.e(l)}finally{o.f()}}}},{key:"unload",value:function(){this._poller&&(clearTimeout(this._poller),this._poller=void 0);var i,r=xl(this.queue);try{for(r.s();!(i=r.n()).done;){var s=i.value.requestData,o=s.url,a=s.data,l=s.options;if(this.rateLimiter.isRateLimited(l._batchKey))he.warn("[RetryQueue] is quota limited. Dropping request.");else try{G==null||G.navigator.sendBeacon(o,ix(a,Ne(Ne({},l),{},{sendBeacon:!0})))}catch(c){he.error(c)}}}catch(c){r.e(c)}finally{r.f()}this.queue=[]}},{key:"_executeXhrRequest",value:function(i){var r=i.url,s=i.data,o=i.options,a=i.headers,l=i.callback,c=i.retriesPerformedSoFar;this.rateLimiter.isRateLimited(o._batchKey)||g$({url:r,data:s||{},options:o||{},headers:a||{},retriesPerformedSoFar:c||0,callback:l,retryQueue:this,onXHRError:this.onXHRError,onResponse:this.rateLimiter.checkForLimiting})}},{key:"_handleWeAreNowOnline",value:function(){this.areWeOnline=!0,this.flush()}}]),n}(),Nh=1800,B_=60,l6=864e5,c6=function(){function t(e,n,i,r){qt(this,t),_e(this,"_sessionIdChangedHandlers",[]),this.config=e,this.persistence=n,this._windowId=void 0,this._sessionId=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this._sessionIdGenerator=i||sl,this._windowIdGenerator=r||sl;var s=e.persistence_name||e.token,o=e.session_idle_timeout_seconds||Nh;if(Qs(o)?o>Nh?he.warn("session_idle_timeout_seconds cannot be  greater than 30 minutes. Using 30 minutes instead."):o<B_&&he.warn("session_idle_timeout_seconds cannot be less than 60 seconds. Using 60 seconds instead."):(he.warn("session_idle_timeout_seconds must be a number. Defaulting to 30 minutes."),o=Nh),this._sessionTimeoutMs=1e3*Math.min(Math.max(o,B_),Nh),this._window_id_storage_key="ph_"+s+"_window_id",this._primary_window_exists_storage_key="ph_"+s+"_primary_window_exists",this._canUseSessionStorage()){var a=kn.parse(this._window_id_storage_key),l=kn.parse(this._primary_window_exists_storage_key);a&&!l?this._windowId=a:kn.remove(this._window_id_storage_key),kn.set(this._primary_window_exists_storage_key,!0)}this._listenToReloadWindow()}return Yt(t,[{key:"onSessionId",value:function(e){var n=this;return et(this._sessionIdChangedHandlers)&&(this._sessionIdChangedHandlers=[]),this._sessionIdChangedHandlers.push(e),this._sessionId&&e(this._sessionId,this._windowId),function(){n._sessionIdChangedHandlers=n._sessionIdChangedHandlers.filter(function(i){return i!==e})}}},{key:"_canUseSessionStorage",value:function(){return this.config.persistence!=="memory"&&!this.persistence.disabled&&kn.is_supported()}},{key:"_setWindowId",value:function(e){e!==this._windowId&&(this._windowId=e,this._canUseSessionStorage()&&kn.set(this._window_id_storage_key,e))}},{key:"_getWindowId",value:function(){return this._windowId?this._windowId:this._canUseSessionStorage()?kn.parse(this._window_id_storage_key):null}},{key:"_setSessionId",value:function(e,n,i){e===this._sessionId&&n===this._sessionActivityTimestamp&&i===this._sessionStartTimestamp||(this._sessionStartTimestamp=i,this._sessionActivityTimestamp=n,this._sessionId=e,this.persistence.register(_e({},Nm,[n,e,i])))}},{key:"_getSessionId",value:function(){if(this._sessionId&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this._sessionId,this._sessionStartTimestamp];var e=this.persistence.props[Nm];return pn(e)&&e.length===2&&e.push(e[0]),e||[0,null,0]}},{key:"resetSessionId",value:function(){this._setSessionId(null,null,null)}},{key:"_listenToReloadWindow",value:function(){var e=this;G==null||G.addEventListener("beforeunload",function(){e._canUseSessionStorage()&&kn.remove(e._primary_window_exists_storage_key)})}},{key:"checkAndGetSessionAndWindowId",value:function(){var e=arguments.length>0&&arguments[0]!==void 0&&arguments[0],n=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:null)||new Date().getTime(),i=Mr(this._getSessionId(),3),r=i[0],s=i[1],o=i[2],a=this._getWindowId(),l=o&&o>0&&Math.abs(n-o)>l6,c=!1,u=!s,d=!e&&Math.abs(n-r)>this._sessionTimeoutMs;u||d||l?(s=this._sessionIdGenerator(),a=this._windowIdGenerator(),o=n,c=!0):a||(a=this._windowIdGenerator(),c=!0);var f=r===0||!e||l?n:r,h=o===0?new Date().getTime():o;return this._setWindowId(a),this._setSessionId(s,f,h),c&&this._sessionIdChangedHandlers.forEach(function(p){return p(s,a)}),{sessionId:s,windowId:a,sessionStartTimestamp:h}}}]),t}(),u6=Yt(function t(e,n,i,r){qt(this,t),this.name="posthog-js",this.setupOnce=function(s){s(function(o){var a,l,c,u,d;if(o.level!=="error"||!e.__loaded)return o;o.tags||(o.tags={});var f=e.config.ui_host||e.config.api_host;o.tags["PostHog Person URL"]=f+"/person/"+e.get_distinct_id(),e.sessionRecordingStarted()&&(o.tags["PostHog Recording URL"]=e.get_session_replay_url({withTimestamp:!0}));var h=((a=o.exception)===null||a===void 0?void 0:a.values)||[],p={$exception_message:(l=h[0])===null||l===void 0?void 0:l.value,$exception_type:(c=h[0])===null||c===void 0?void 0:c.type,$exception_personURL:f+"/person/"+e.get_distinct_id(),$sentry_event_id:o.event_id,$sentry_exception:o.exception,$sentry_exception_message:(u=h[0])===null||u===void 0?void 0:u.value,$sentry_exception_type:(d=h[0])===null||d===void 0?void 0:d.type,$sentry_tags:o.tags};return n&&i&&(p.$sentry_url=(r||"https://sentry.io/organizations/")+n+"/issues/?project="+i+"&query="+o.event_id),e.capture("$exception",p),o})}}),d6=function(t){Promise&&Promise.resolve||he.warn("This browser does not have Promise support, and can not use the segment integration");var e=function(n,i){n.event.userId||n.event.anonymousId===t.get_distinct_id()||t.reset(),n.event.userId&&n.event.userId!==t.get_distinct_id()&&(t.register({distinct_id:n.event.userId}),t.reloadFeatureFlags());var r=t._calculate_event_properties(i,n.event.properties);return n.event.properties=Object.assign({},r,n.event.properties),n};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},track:function(n){return e(n,n.event.event)},page:function(n){return e(n,"$pageview")},identify:function(n){return e(n,"$identify")},screen:function(n){return e(n,"$screen")}}},f6=function(){function t(){var e=this;qt(this,t),_e(this,"_hasSeenPageView",!1),_e(this,"_updateScrollData",function(){var n,i,r,s;e._pageViewData||(e._pageViewData=e._createPageViewData());var o=e._pageViewData,a=e._scrollY(),l=e._scrollHeight(),c=e._contentY(),u=e._contentHeight();o.lastScrollY=a,o.maxScrollY=Math.max(a,(n=o.maxScrollY)!==null&&n!==void 0?n:0),o.maxScrollHeight=Math.max(l,(i=o.maxScrollHeight)!==null&&i!==void 0?i:0),o.lastContentY=c,o.maxContentY=Math.max(c,(r=o.maxContentY)!==null&&r!==void 0?r:0),o.maxContentHeight=Math.max(u,(s=o.maxContentHeight)!==null&&s!==void 0?s:0)})}return Yt(t,[{key:"_createPageViewData",value:function(){var e;return{pathname:(e=G==null?void 0:G.location.pathname)!==null&&e!==void 0?e:""}}},{key:"doPageView",value:function(){var e,n;return this._hasSeenPageView?(n=this._pageViewData,this._pageViewData=this._createPageViewData()):(this._hasSeenPageView=!0,n=void 0,this._pageViewData||(this._pageViewData=this._createPageViewData())),setTimeout(this._updateScrollData,0),Ne({$prev_pageview_pathname:(e=n)===null||e===void 0?void 0:e.pathname},this._calculatePrevPageScrollProperties(n))}},{key:"doPageLeave",value:function(){var e=this._pageViewData;return Ne({$prev_pageview_pathname:e==null?void 0:e.pathname},this._calculatePrevPageScrollProperties(e))}},{key:"_calculatePrevPageScrollProperties",value:function(e){if(!e||e.maxScrollHeight==null||e.lastScrollY==null||e.maxScrollY==null||e.maxContentHeight==null||e.lastContentY==null||e.maxContentY==null)return{};var n=e.maxScrollHeight,i=e.lastScrollY,r=e.maxScrollY,s=e.maxContentHeight,o=e.lastContentY,a=e.maxContentY;return n=Math.ceil(n),i=Math.ceil(i),r=Math.ceil(r),s=Math.ceil(s),o=Math.ceil(o),a=Math.ceil(a),{$prev_pageview_last_scroll:i,$prev_pageview_last_scroll_percentage:n<=1?1:Rh(i/n,0,1),$prev_pageview_max_scroll:r,$prev_pageview_max_scroll_percentage:n<=1?1:Rh(r/n,0,1),$prev_pageview_last_content:o,$prev_pageview_last_content_percentage:s<=1?1:Rh(o/s,0,1),$prev_pageview_max_content:a,$prev_pageview_max_content_percentage:s<=1?1:Rh(a/s,0,1)}}},{key:"startMeasuringScrollPosition",value:function(){G==null||G.addEventListener("scroll",this._updateScrollData),G==null||G.addEventListener("scrollend",this._updateScrollData),G==null||G.addEventListener("resize",this._updateScrollData)}},{key:"stopMeasuringScrollPosition",value:function(){G==null||G.removeEventListener("scroll",this._updateScrollData),G==null||G.removeEventListener("scrollend",this._updateScrollData),G==null||G.removeEventListener("resize",this._updateScrollData)}},{key:"_scrollHeight",value:function(){return G?Math.max(0,G.document.documentElement.scrollHeight-G.document.documentElement.clientHeight):0}},{key:"_scrollY",value:function(){return G&&(G.scrollY||G.pageYOffset||G.document.documentElement.scrollTop)||0}},{key:"_contentHeight",value:function(){return(G==null?void 0:G.document.documentElement.scrollHeight)||0}},{key:"_contentY",value:function(){var e=(G==null?void 0:G.document.documentElement.clientHeight)||0;return this._scrollY()+e}}]),t}();function Rh(t,e,n){return Math.max(e,Math.min(t,n))}var Yd,rx,Sn,h6={icontains:function(t){return!!G&&G.location.href.toLowerCase().indexOf(t.toLowerCase())>-1},regex:function(t){return!!G&&S5(G.location.href,t)},exact:function(t){return(G==null?void 0:G.location.href)===t}},p6=function(){function t(e){qt(this,t),this.instance=e}return Yt(t,[{key:"getSurveys",value:function(e){var n=this,i=arguments.length>1&&arguments[1]!==void 0&&arguments[1],r=this.instance.get_property(gw);if(r&&!i)return e(r);this.instance._send_request("".concat(this.instance.config.api_host,"/api/surveys/?token=").concat(this.instance.config.token),{},{method:"GET"},function(s){var o,a=s.surveys||[];return(o=n.instance.persistence)===null||o===void 0||o.register(_e({},gw,a)),e(a)})}},{key:"getActiveMatchingSurveys",value:function(e){var n=this,i=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this.getSurveys(function(r){var s=r.filter(function(o){return!(!o.start_date||o.end_date)}).filter(function(o){var a,l,c,u;if(!o.conditions)return!0;var d=(a=o.conditions)===null||a===void 0||!a.url||h6[(l=(c=o.conditions)===null||c===void 0?void 0:c.urlMatchType)!==null&&l!==void 0?l:"icontains"](o.conditions.url),f=(u=o.conditions)===null||u===void 0||!u.selector||(Te==null?void 0:Te.querySelector(o.conditions.selector));return d&&f}).filter(function(o){if(!o.linked_flag_key&&!o.targeting_flag_key)return!0;var a=!o.linked_flag_key||n.instance.featureFlags.isFeatureEnabled(o.linked_flag_key),l=!o.targeting_flag_key||n.instance.featureFlags.isFeatureEnabled(o.targeting_flag_key);return a&&l});return e(s)},i)}}]),t}(),m6=6e4,g6=function(){function t(){var e=this;qt(this,t),_e(this,"limits",{}),_e(this,"checkForLimiting",function(n){try{var i=n.responseText;if(!i||!i.length)return;(JSON.parse(i).quota_limited||[]).forEach(function(r){he.info("[RateLimiter] ".concat(r||"events"," is quota limited.")),e.limits[r]=new Date().getTime()+m6})}catch(r){return void he.error(r)}})}return Yt(t,[{key:"isRateLimited",value:function(e){var n=this.limits[e||"events"]||!1;return n!==!1&&new Date().getTime()<n}}]),t}(),v6=function(){return Ne({initialPathName:(G==null?void 0:G.location.pathname)||"",referringDomain:nn.referringDomain()},nn.campaignParams())},y6=function(){function t(e,n,i){var r=this;qt(this,t),_e(this,"_onSessionIdCallback",function(s){var o=r._getStoredProps();if(!o||o.sessionId!==s){var a={sessionId:s,props:r._sessionSourceParamGenerator()};r._persistence.register(_e({},ww,a))}}),this._sessionIdManager=e,this._persistence=n,this._sessionSourceParamGenerator=i||v6,this._sessionIdManager.onSessionId(this._onSessionIdCallback)}return Yt(t,[{key:"_getStoredProps",value:function(){return this._persistence.props[ww]}},{key:"getSessionProps",value:function(){var e,n=(e=this._getStoredProps())===null||e===void 0?void 0:e.props;return n?{$client_session_initial_referring_host:n.referringDomain,$client_session_initial_pathname:n.initialPathName,$client_session_initial_utm_source:n.utm_source,$client_session_initial_utm_campaign:n.utm_campaign,$client_session_initial_utm_medium:n.utm_medium,$client_session_initial_utm_content:n.utm_content,$client_session_initial_utm_term:n.utm_term}:{}}}]),t}(),w6=["ahrefsbot","ahrefssiteaudit","applebot","baiduspider","bingbot","bingpreview","bot.htm","bot.php","crawler","duckduckbot","facebookexternal","facebookcatalog","gptbot","http://yandex.com/bots","hubspot","ia_archiver","linkedinbot","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","semrushbot","sitebulb","slurp","turnitin","twitterbot","vercelbot","yahoo! slurp","yandexbot","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleweblight","mediapartners-google","storebot-google"],j_=function(t,e){if(!t)return!1;var n=t.toLowerCase();return w6.concat(e||[]).some(function(i){var r=i.toLowerCase();return n.includes?n.includes(r):n.indexOf(r)!==-1})};(function(t){t[t.INIT_MODULE=0]="INIT_MODULE",t[t.INIT_SNIPPET=1]="INIT_SNIPPET"})(Yd||(Yd={}));var kw=function(){},Mh={},mi="posthog",Xp=(G==null?void 0:G.XMLHttpRequest)&&"withCredentials"in new XMLHttpRequest,v$=!Xp&&(Ht==null?void 0:Ht.indexOf("MSIE"))===-1&&(Ht==null?void 0:Ht.indexOf("Mozilla"))===-1,F_=function(){var t,e,n;return{api_host:"https://app.posthog.com",api_method:"POST",api_transport:"XHR",ui_host:null,token:"",autocapture:!0,rageclick:!0,cross_subdomain_cookie:(e=Te==null?void 0:Te.location,n=e==null?void 0:e.hostname,!!Hi(n)&&n.split(".").slice(-2).join(".")!=="herokuapp.com"),persistence:"localStorage+cookie",persistence_name:"",cookie_name:"",loaded:kw,store_google:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageview:!0,capture_pageleave:!0,debug:!1,verbose:!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_cookie:!1,enable_recording_console_log:void 0,secure_cookie:(G==null||(t=G.location)===null||t===void 0?void 0:t.protocol)==="https:",ip:!0,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_blacklist:[],respect_dnt:!1,sanitize_properties:null,xhr_headers:{},inapp_protocol:"//",inapp_link_new_window:!1,request_batching:!0,properties_string_max_length:65535,session_recording:{},mask_all_element_attributes:!1,mask_all_text:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_disable_toolbar_metrics:!1,on_xhr_error:function(i){var r="Bad HTTP status: "+i.status+" "+i.statusText;he.error(r)},get_device_id:function(i){return i},_onCapture:kw,capture_performance:void 0,name:"posthog",callback_fn:"posthog._jsc",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800}},_w=function(t,e,n,i){var r,s=n!==mi&&Sn?n?Sn[n]:void 0:Sn,o={initComplete:!1,syncCode:!1},a=function(l){return function(c){o[l]||(o[l]=!0,o.initComplete&&o.syncCode&&(i==null||i(c)))}};if(s&&rx===Yd.INIT_MODULE)r=s;else{if(s&&!pn(s))return void he.error("You have already initialized "+n);r=new sx}return r._init(t,e,n,a("initComplete")),r.toolbar.maybeLoadToolbar(),r.sessionRecording=new D5(r),r.sessionRecording.startRecordingIfEnabled(),r.config.__preview_measure_pageview_stats&&r.pageViewManager.startMeasuringScrollPosition(),r.__autocapture=r.config.autocapture,Fo._setIsAutocaptureEnabled(r),Fo._isAutocaptureEnabled&&(r.__autocapture=r.config.autocapture,Fo.enabledForProject(r.config.token,100,100)?Fo.isBrowserSupported()?Fo.init(r):(r.__autocapture=!1,he.info("Disabling Automatic Event Collection because this browser is not supported")):(r.__autocapture=!1,he.info("Not in active bucket: disabling Automatic Event Collection."))),Sl.DEBUG=Sl.DEBUG||r.config.debug,!et(s)&&pn(s)&&(r._execute_array.call(r.people,s.people),r._execute_array(s)),a("syncCode")(r),r},b6=function(){function t(){qt(this,t),_e(this,"__forceAllowLocalhost",!1)}return Yt(t,[{key:"_forceAllowLocalhost",get:function(){return this.__forceAllowLocalhost},set:function(e){he.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=e}}]),t}(),sx=function(){function t(){var e=this;qt(this,t),_e(this,"webPerformance",new b6),this.config=F_(),this.compression={},this.decideEndpointWasHit=!1,this.SentryIntegration=u6,this.segmentIntegration=function(){return d6(e)},this.__captureHooks=[],this.__request_queue=[],this.__loaded=!1,this.__loaded_recorder_version=void 0,this.__autocapture=void 0,this._jsc=function(){},this.analyticsDefaultEndpoint="/e/",this.elementsChainAsString=!1,this.featureFlags=new u5(this),this.toolbar=new F5(this),this.pageViewManager=new f6,this.surveys=new p6(this),this.rateLimiter=new g6,this.people={set:function(n,i,r){var s=Hi(n)?_e({},n,i):n;e.setPersonProperties(s),r==null||r({})},set_once:function(n,i,r){var s=Hi(n)?_e({},n,i):n;e.setPersonProperties(void 0,s),r==null||r({})}}}return Yt(t,[{key:"init",value:function(e,n,i){if(et(i))he.critical("You must name your new library: init(token, config, name)");else{if(i!==mi){var r=_w(e,n,i,function(s){Sn[i]=s,s._loaded()});return Sn[i]=r,r}he.critical("You must initialize the main posthog object right after you include the PostHog js snippet")}}},{key:"_init",value:function(e){var n,i,r,s=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,l=arguments.length>3?arguments[3]:void 0;this.__loaded=!0,this.config={},this._triggered_notifs=[];var c,u={segmentRegister:!1,syncCode:!1},d=function(_){return function(){u[_]||(u[_]=!0,u.segmentRegister&&u.syncCode&&(l==null||l(s)))}};if(this.set_config(bn({},F_(),o,{name:a,token:e,callback_fn:(a===mi?a:mi+"."+a)+"._jsc"})),this._jsc=function(){},(G!=null&&(n=G.rrweb)!==null&&n!==void 0&&n.record||G!=null&&G.rrwebRecord)&&(this.__loaded_recorder_version=G==null||(c=G.rrweb)===null||c===void 0?void 0:c.version),this.persistence=new $_(this.config),this._requestQueue=new G5(this._handle_queued_event.bind(this)),this._retryQueue=new a6(this.config.on_xhr_error,this.rateLimiter),this.__captureHooks=[],this.__request_queue=[],this.sessionManager=new c6(this.config,this.persistence),this.sessionPropsManager=new y6(this.sessionManager,this.persistence),this.sessionPersistence=this.config.persistence==="sessionStorage"?this.persistence:new $_(Ne(Ne({},this.config),{},{persistence:"sessionStorage"})),this._gdpr_init(),o.segment?(this.config.get_device_id=function(){return o.segment.user().anonymousId()},o.segment.user().id()&&(this.register({distinct_id:o.segment.user().id()}),this.persistence.set_user_state("identified")),o.segment.register(this.segmentIntegration()).then(d("segmentRegister"))):d("segmentRegister")(),((i=o.bootstrap)===null||i===void 0?void 0:i.distinctID)!==void 0){var f,h,p=this.config.get_device_id(sl()),m=(f=o.bootstrap)!==null&&f!==void 0&&f.isIdentifiedID?p:o.bootstrap.distinctID;this.persistence.set_user_state((h=o.bootstrap)!==null&&h!==void 0&&h.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:o.bootstrap.distinctID,$device_id:m})}if(this._hasBootstrappedFeatureFlags()){var w,v,y=Object.keys(((w=o.bootstrap)===null||w===void 0?void 0:w.featureFlags)||{}).filter(function(_){var P,A;return!((P=o.bootstrap)===null||P===void 0||(A=P.featureFlags)===null||A===void 0||!A[_])}).reduce(function(_,P){var A,C;return _[P]=((A=o.bootstrap)===null||A===void 0||(C=A.featureFlags)===null||C===void 0?void 0:C[P])||!1,_},{}),x=Object.keys(((v=o.bootstrap)===null||v===void 0?void 0:v.featureFlagPayloads)||{}).filter(function(_){return y[_]}).reduce(function(_,P){var A,C,N,R;return(A=o.bootstrap)!==null&&A!==void 0&&(C=A.featureFlagPayloads)!==null&&C!==void 0&&C[P]&&(_[P]=(N=o.bootstrap)===null||N===void 0||(R=N.featureFlagPayloads)===null||R===void 0?void 0:R[P]),_},{});this.featureFlags.receivedFeatureFlags({featureFlags:y,featureFlagPayloads:x})}if(!this.get_distinct_id()){var k=this.config.get_device_id(sl());this.register_once({distinct_id:k,$device_id:k},""),this.persistence.set_user_state("anonymous")}G==null||(r=G.addEventListener)===null||r===void 0||r.call(G,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this)),d("syncCode")()}},{key:"_afterDecideResponse",value:function(e){var n;if(this.compression={},e.supportedCompression&&!this.config.disable_compression){var i,r={},s=xl(e.supportedCompression);try{for(s.s();!(i=s.n()).done;)r[i.value]=!0}catch(o){s.e(o)}finally{s.f()}this.compression=r}(n=e.analytics)!==null&&n!==void 0&&n.endpoint&&(this.analyticsDefaultEndpoint=e.analytics.endpoint),e.elementsChainAsString&&(this.elementsChainAsString=e.elementsChainAsString)}},{key:"_loaded",value:function(){var e=this.config.advanced_disable_decide;e||this.featureFlags.setReloadingPaused(!0);try{this.config.loaded(this)}catch(n){he.critical("`loaded` function failed",n)}this._start_queue_if_opted_in(),this.config.capture_pageview&&Te&&this.capture("$pageview",{title:Te.title},{send_instantly:!0}),e||(new I5(this).call(),this.featureFlags.resetRequestQueue())}},{key:"_start_queue_if_opted_in",value:function(){var e;this.has_opted_out_capturing()||this.config.request_batching&&((e=this._requestQueue)===null||e===void 0||e.poll())}},{key:"_dom_loaded",value:function(){var e=this;this.has_opted_out_capturing()||Tc(this.__request_queue,function(n){e._send_request.apply(e,uw(n))}),this.__request_queue=[],this._start_queue_if_opted_in()}},{key:"_prepare_callback",value:function(e,n){if(et(e))return null;if(Xp)return function(o){e(o,n)};var i=this._jsc,r=""+Math.floor(1e8*Math.random()),s=this.config.callback_fn+"["+r+"]";return i[r]=function(o){delete i[r],e(o,n)},s}},{key:"_handle_unload",value:function(){var e,n;this.config.request_batching?(this.config.capture_pageview&&this.config.capture_pageleave&&this.capture("$pageleave"),(e=this._requestQueue)===null||e===void 0||e.unload(),(n=this._retryQueue)===null||n===void 0||n.unload()):this.config.capture_pageview&&this.config.capture_pageleave&&this.capture("$pageleave",null,{transport:"sendBeacon"})}},{key:"_handle_queued_event",value:function(e,n,i){var r=JSON.stringify(n);this.__compress_and_send_json_request(e,r,i||Mh,kw)}},{key:"__compress_and_send_json_request",value:function(e,n,i,r){var s=function(c,u,d){return c===Za.GZipJS?[r6(s6(u),{mtime:0}),Ne(Ne({},d),{},{blob:!0,urlQueryArgs:{compression:Za.GZipJS}})]:[{data:J1(u)},d]}(this.compression[Za.GZipJS]?Za.GZipJS:Za.Base64,n,i),o=Mr(s,2),a=o[0],l=o[1];this._send_request(e,a,l,r)}},{key:"_send_request",value:function(e,n,i,r){if(this.__loaded&&this._retryQueue&&!this.rateLimiter.isRateLimited(i._batchKey))if(v$)this.__request_queue.push([e,n,i,r]);else{var s={method:this.config.api_method,transport:this.config.api_transport,verbose:this.config.verbose};i=bn(s,i||{}),Xp||(i.method="GET");var o=G&&"sendBeacon"in G.navigator&&i.transport==="sendBeacon";if(e=m$(e,i.urlQueryArgs||{},{ip:this.config.ip}),o)try{G==null||G.navigator.sendBeacon(e,ix(n,Ne(Ne({},i),{},{sendBeacon:!0})))}catch{}else if(Xp||!Te)try{g$({url:e,data:n,headers:this.config.xhr_headers,options:i,callback:r,retriesPerformedSoFar:0,retryQueue:this._retryQueue,onXHRError:this.config.on_xhr_error,onResponse:this.rateLimiter.checkForLimiting})}catch(u){he.error(u)}else{var a,l=Te.createElement("script");l.type="text/javascript",l.async=!0,l.defer=!0,l.src=e;var c=Te.getElementsByTagName("script")[0];(a=c.parentNode)===null||a===void 0||a.insertBefore(l,c)}}}},{key:"_execute_array",value:function(e){var n,i=this,r=[],s=[],o=[];Tc(e,function(l){l&&(n=l[0],pn(n)?o.push(l):zr(l)?l.call(i):pn(l)&&n==="alias"?r.push(l):pn(l)&&n.indexOf("capture")!==-1&&zr(i[n])?o.push(l):s.push(l))});var a=function(l,c){Tc(l,function(u){if(pn(u[0])){var d=c;yt(u,function(f){d=d[f[0]].apply(d,f.slice(1))})}else this[u[0]].apply(this,u.slice(1))},c)};a(r,this),a(s,this),a(o,this)}},{key:"_hasBootstrappedFeatureFlags",value:function(){var e,n;return((e=this.config.bootstrap)===null||e===void 0?void 0:e.featureFlags)&&Object.keys((n=this.config.bootstrap)===null||n===void 0?void 0:n.featureFlags).length>0||!1}},{key:"push",value:function(e){this._execute_array([e])}},{key:"capture",value:function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Mh;if(!this.__loaded||!this.sessionPersistence||!this._requestQueue)return he.uninitializedWarning("posthog.capture");if(!function(u){var d=!1;try{var f=u.config.token,h=u.config.respect_dnt,p=u.config.opt_out_capturing_persistence_type,m=u.config.opt_out_capturing_cookie_prefix||void 0,w=u.config.window;f&&(d=R_(f,{respectDnt:h,persistenceType:p,persistencePrefix:m,window:w}))}catch(v){he.error("Unexpected error when checking capturing opt-out status: "+v)}return d}(this)){var r=(i=i||Mh).transport;if(r&&(i.transport=r),!et(e)&&Hi(e)){if(!Ht||this.config.opt_out_useragent_filter||!j_(Ht,this.config.custom_blocked_useragents)){this.sessionPersistence.update_search_keyword(),this.config.store_google&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info();var s={uuid:sl(),event:e,properties:this._calculate_event_properties(e,n||{})};e==="$identify"&&(s.$set=i.$set,s.$set_once=i.$set_once),(s=r5(s,i._noTruncate?null:this.config.properties_string_max_length)).timestamp=i.timestamp||new Date;var o=Ne(Ne({},s.properties.$set),s.$set);n5(o)||this.setPersonPropertiesForFlags(o),he.info("send",s);var a=JSON.stringify(s),l=this.config.api_host+(i.endpoint||this.analyticsDefaultEndpoint),c=i!==Mh;return!this.config.request_batching||c&&!i._batchKey||i.send_instantly?this.__compress_and_send_json_request(l,a,i):this._requestQueue.enqueue(l,s,i),this._invokeCaptureHooks(e,s),s}}else he.error("No event name provided to posthog.capture")}}},{key:"_addCaptureHook",value:function(e){this.__captureHooks.push(e)}},{key:"_invokeCaptureHooks",value:function(e,n){this.config._onCapture(e,n),yt(this.__captureHooks,function(i){return i(e)})}},{key:"_calculate_event_properties",value:function(e,n){if(!this.persistence||!this.sessionPersistence)return n;var i=this.persistence.remove_event_timer(e),r=Ne({},n);if(r.token=this.config.token,e==="$snapshot"){var s=Ne(Ne({},this.persistence.properties()),this.sessionPersistence.properties());return r.distinct_id=s.distinct_id,r}var o=nn.properties();if(this.sessionManager){var a=this.sessionManager.checkAndGetSessionAndWindowId(),l=a.sessionId,c=a.windowId;r.$session_id=l,r.$window_id=c}if(this.sessionPropsManager&&this.config.__preview_send_client_session_params&&(e==="$pageview"||e==="$pageleave"||e==="$autocapture")){var u=this.sessionPropsManager.getSessionProps();r=bn(r,u)}if(this.config.__preview_measure_pageview_stats){var d={};e==="$pageview"?d=this.pageViewManager.doPageView():e==="$pageleave"&&(d=this.pageViewManager.doPageLeave()),r=bn(r,d)}if(e==="$pageview"&&Te&&(r.title=Te.title),e==="$performance_event"){var f=this.persistence.properties();return r.distinct_id=f.distinct_id,r.$current_url=o.$current_url,r}if(!et(i)){var h=new Date().getTime()-i;r.$duration=parseFloat((h/1e3).toFixed(3))}Ht&&this.config.opt_out_useragent_filter&&(r.$browser_type=j_(Ht,this.config.custom_blocked_useragents)?"bot":"browser"),r=bn({},nn.properties(),this.persistence.properties(),this.sessionPersistence.properties(),r);var p=this.config.property_blacklist;pn(p)?yt(p,function(w){delete r[w]}):he.error("Invalid value for property_blacklist config: "+p);var m=this.config.sanitize_properties;return m&&(r=m(r,e)),r}},{key:"register",value:function(e,n){var i;(i=this.persistence)===null||i===void 0||i.register(e,n)}},{key:"register_once",value:function(e,n,i){var r;(r=this.persistence)===null||r===void 0||r.register_once(e,n,i)}},{key:"register_for_session",value:function(e){var n;(n=this.sessionPersistence)===null||n===void 0||n.register(e)}},{key:"unregister",value:function(e){var n;(n=this.persistence)===null||n===void 0||n.unregister(e)}},{key:"unregister_for_session",value:function(e){var n;(n=this.sessionPersistence)===null||n===void 0||n.unregister(e)}},{key:"_register_single",value:function(e,n){this.register(_e({},e,n))}},{key:"getFeatureFlag",value:function(e,n){return this.featureFlags.getFeatureFlag(e,n)}},{key:"getFeatureFlagPayload",value:function(e){var n=this.featureFlags.getFeatureFlagPayload(e);try{return JSON.parse(n)}catch{return n}}},{key:"isFeatureEnabled",value:function(e,n){return this.featureFlags.isFeatureEnabled(e,n)}},{key:"reloadFeatureFlags",value:function(){this.featureFlags.reloadFeatureFlags()}},{key:"updateEarlyAccessFeatureEnrollment",value:function(e,n){this.featureFlags.updateEarlyAccessFeatureEnrollment(e,n)}},{key:"getEarlyAccessFeatures",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return this.featureFlags.getEarlyAccessFeatures(e,n)}},{key:"onFeatureFlags",value:function(e){return this.featureFlags.onFeatureFlags(e)}},{key:"onSessionId",value:function(e){var n,i;return(n=(i=this.sessionManager)===null||i===void 0?void 0:i.onSessionId(e))!==null&&n!==void 0?n:function(){}}},{key:"getSurveys",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this.surveys.getSurveys(e,n)}},{key:"getActiveMatchingSurveys",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this.surveys.getActiveMatchingSurveys(e,n)}},{key:"identify",value:function(e,n,i){if(!this.__loaded||!this.persistence)return he.uninitializedWarning("posthog.identify");if(e)if(["distinct_id","distinctid"].includes(e.toLowerCase()))he.critical('The string "'.concat(e,'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.'));else{var r=this.get_distinct_id();if(this.register({$user_id:e}),!this.get_property("$device_id")){var s=r;this.register_once({$had_persisted_distinct_id:!0,$device_id:s},"")}e!==r&&e!==this.get_property(Wp)&&(this.unregister(Wp),this.register({distinct_id:e}));var o=this.persistence.get_user_state()==="anonymous";e!==r&&o?(this.persistence.set_user_state("identified"),this.setPersonPropertiesForFlags(n||{},!1),this.capture("$identify",{distinct_id:e,$anon_distinct_id:r},{$set:n||{},$set_once:i||{}}),this.featureFlags.setAnonymousDistinctId(r)):(n||i)&&this.setPersonProperties(n,i),e!==r&&(this.reloadFeatureFlags(),this.unregister(Rm))}else he.error("Unique user id has not been set in posthog.identify")}},{key:"setPersonProperties",value:function(e,n){(e||n)&&(this.setPersonPropertiesForFlags(e||{}),this.capture("$set",{$set:e||{},$set_once:n||{}}))}},{key:"group",value:function(e,n,i){if(e&&n){var r=this.getGroups();r[e]!==n&&this.resetGroupPropertiesForFlags(e),this.register({$groups:Ne(Ne({},r),{},_e({},e,n))}),i&&(this.capture("$groupidentify",{$group_type:e,$group_key:n,$group_set:i}),this.setGroupPropertiesForFlags(_e({},e,i))),r[e]===n||i||this.reloadFeatureFlags()}else he.error("posthog.group requires a group type and group key")}},{key:"resetGroups",value:function(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}},{key:"setPersonPropertiesForFlags",value:function(e){var n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this.featureFlags.setPersonPropertiesForFlags(e,n)}},{key:"resetPersonPropertiesForFlags",value:function(){this.featureFlags.resetPersonPropertiesForFlags()}},{key:"setGroupPropertiesForFlags",value:function(e){var n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this.featureFlags.setGroupPropertiesForFlags(e,n)}},{key:"resetGroupPropertiesForFlags",value:function(e){this.featureFlags.resetGroupPropertiesForFlags(e)}},{key:"reset",value:function(e){var n,i,r,s;if(!this.__loaded)return he.uninitializedWarning("posthog.reset");var o=this.get_property("$device_id");(n=this.persistence)===null||n===void 0||n.clear(),(i=this.sessionPersistence)===null||i===void 0||i.clear(),(r=this.persistence)===null||r===void 0||r.set_user_state("anonymous"),(s=this.sessionManager)===null||s===void 0||s.resetSessionId();var a=this.config.get_device_id(sl());this.register_once({distinct_id:a,$device_id:e?a:o},"")}},{key:"get_distinct_id",value:function(){return this.get_property("distinct_id")}},{key:"getGroups",value:function(){return this.get_property("$groups")||{}}},{key:"get_session_id",value:function(){var e,n;return(e=(n=this.sessionManager)===null||n===void 0?void 0:n.checkAndGetSessionAndWindowId(!0).sessionId)!==null&&e!==void 0?e:""}},{key:"get_session_replay_url",value:function(e){if(!this.sessionManager)return"";var n=this.config.ui_host||this.config.api_host,i=this.sessionManager.checkAndGetSessionAndWindowId(!0),r=i.sessionId,s=i.sessionStartTimestamp,o=n+"/replay/"+r;if(e!=null&&e.withTimestamp&&s){var a,l=(a=e.timestampLookBack)!==null&&a!==void 0?a:10;if(!s)return o;var c=Math.max(Math.floor((new Date().getTime()-s)/1e3)-l,0);o+="?t=".concat(c)}return o}},{key:"alias",value:function(e,n){return e===this.get_property(i$)?(he.critical("Attempting to create alias for existing People user - aborting."),-2):(et(n)&&(n=this.get_distinct_id()),e!==n?(this._register_single(Wp,e),this.capture("$create_alias",{alias:e,distinct_id:n})):(he.warn("alias matches current distinct_id - skipping api call."),this.identify(e),-1))}},{key:"set_config",value:function(e){var n,i,r=Ne({},this.config);oa(e)&&(bn(this.config,e),this.config.persistence_name||(this.config.persistence_name=this.config.cookie_name),this.config.disable_persistence||(this.config.disable_persistence=this.config.disable_cookie),this.config.api_host=this.config.api_host.replace(/\/$/,""),(n=this.persistence)===null||n===void 0||n.update_config(this.config),(i=this.sessionPersistence)===null||i===void 0||i.update_config(this.config),Zt.is_supported()&&Zt.get("ph_debug")==="true"&&(this.config.debug=!0),this.config.debug&&(Sl.DEBUG=!0),this.sessionRecording&&!et(e.disable_session_recording)&&r.disable_session_recording!==e.disable_session_recording&&(e.disable_session_recording?this.sessionRecording.stopRecording():this.sessionRecording.startRecordingIfEnabled()))}},{key:"startSessionRecording",value:function(){this.set_config({disable_session_recording:!1})}},{key:"stopSessionRecording",value:function(){this.set_config({disable_session_recording:!0})}},{key:"sessionRecordingStarted",value:function(){var e;return!((e=this.sessionRecording)===null||e===void 0||!e.started)}},{key:"loadToolbar",value:function(e){return this.toolbar.loadToolbar(e)}},{key:"get_property",value:function(e){var n;return(n=this.persistence)===null||n===void 0?void 0:n.props[e]}},{key:"getSessionProperty",value:function(e){var n;return(n=this.sessionPersistence)===null||n===void 0?void 0:n.props[e]}},{key:"toString",value:function(){var e,n=(e=this.config.name)!==null&&e!==void 0?e:mi;return n!==mi&&(n=mi+"."+n),n}},{key:"_gdpr_init",value:function(){this.config.opt_out_capturing_persistence_type==="localStorage"&&Zt.is_supported()&&(!this.has_opted_in_capturing()&&this.has_opted_in_capturing({persistence_type:"cookie"})&&this.opt_in_capturing({enable_persistence:!1}),!this.has_opted_out_capturing()&&this.has_opted_out_capturing({persistence_type:"cookie"})&&this.opt_out_capturing({clear_persistence:!1}),this.clear_opt_in_out_capturing({persistence_type:"cookie",enable_persistence:!1})),this.has_opted_out_capturing()?this._gdpr_update_persistence({clear_persistence:!0}):this.has_opted_in_capturing()||!this.config.opt_out_capturing_by_default&&!Cs.get("ph_optout")||(Cs.remove("ph_optout"),this.opt_out_capturing({clear_persistence:this.config.opt_out_persistence_by_default}))}},{key:"_gdpr_update_persistence",value:function(e){var n,i,r,s,o;if(e&&e.clear_persistence)r=!0;else{if(!e||!e.enable_persistence)return;r=!1}this.config.disable_persistence||((n=this.persistence)===null||n===void 0?void 0:n.disabled)===r||(s=this.persistence)===null||s===void 0||s.set_disabled(r),this.config.disable_persistence||((i=this.sessionPersistence)===null||i===void 0?void 0:i.disabled)===r||(o=this.sessionPersistence)===null||o===void 0||o.set_disabled(r)}},{key:"_gdpr_call_func",value:function(e,n){return n=bn({capture:this.capture.bind(this),persistence_type:this.config.opt_out_capturing_persistence_type,cookie_prefix:this.config.opt_out_capturing_cookie_prefix,cookie_expiration:this.config.cookie_expiration,cross_subdomain_cookie:this.config.cross_subdomain_cookie,secure_cookie:this.config.secure_cookie},n||{}),Zt.is_supported()||n.persistence_type!=="localStorage"||(n.persistence_type="cookie"),e(this.config.token,{capture:n.capture,captureEventName:n.capture_event_name,captureProperties:n.capture_properties,persistenceType:n.persistence_type,persistencePrefix:n.cookie_prefix,cookieExpiration:n.cookie_expiration,crossSubdomainCookie:n.cross_subdomain_cookie,secureCookie:n.secure_cookie})}},{key:"opt_in_capturing",value:function(e){e=bn({enable_persistence:!0},e||{}),this._gdpr_call_func(U5,e),this._gdpr_update_persistence(e)}},{key:"opt_out_capturing",value:function(e){var n=bn({clear_persistence:!0},e||{});this._gdpr_call_func(V5,n),this._gdpr_update_persistence(n)}},{key:"has_opted_in_capturing",value:function(e){return this._gdpr_call_func(H5,e)}},{key:"has_opted_out_capturing",value:function(e){return this._gdpr_call_func(R_,e)}},{key:"clear_opt_in_out_capturing",value:function(e){var n=bn({enable_persistence:!0},e??{});this._gdpr_call_func(W5,n),this._gdpr_update_persistence(n)}},{key:"debug",value:function(e){e===!1?(G==null||G.console.log("You've disabled debug mode."),localStorage&&localStorage.removeItem("ph_debug"),this.set_config({debug:!1})):(G==null||G.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),localStorage&&localStorage.setItem("ph_debug","true"),this.set_config({debug:!0}))}}]),t}();(function(t,e){for(var n=0;n<e.length;n++)t.prototype[e[n]]=QP(t.prototype[e[n]])})(sx,["identify"]);var z_,U_,Oo={},x6=function(){Sn.init=function(t,e,n){if(n)return Sn[n]||(Sn[n]=Oo[n]=_w(t||"",e||{},n,function(r){Sn[n]=Oo[n]=r,r._loaded()})),Sn[n];var i=Sn;return Oo[mi]?i=Oo[mi]:t&&(i=_w(t,e||{},mi,function(r){Oo[mi]=r,r._loaded()}),Oo[mi]=i),Sn=i,rx===Yd.INIT_SNIPPET&&(Un[mi]=Sn),yt(Oo,function(r,s){s!==mi&&(Sn[s]=r)}),i}},S6=function(){function t(){t.done||(t.done=!0,v$=!1,yt(Oo,function(e){e._dom_loaded()}))}Te!=null&&Te.addEventListener&&(Te.readyState==="complete"?t():Te.addEventListener("DOMContentLoaded",t,!1)),G&&Ad(G,"load",t,!0)};(function(t){t.Popover="popover",t.API="api",t.Widget="widget"})(z_||(z_={})),function(t){t.Open="open",t.MultipleChoice="multiple_choice",t.SingleChoice="single_choice",t.Rating="rating",t.Link="link"}(U_||(U_={}));var Oc=(rx=Yd.INIT_MODULE,Sn=new sx,x6(),Sn.init(),S6(),Sn),k6=g.createContext({client:Oc});function _6(t){var e=t.children,n=t.client,i=t.apiKey,r=t.options,s=g.useMemo(function(){return n&&i&&console.warn("[PostHog.js] You have provided both a client and an apiKey to PostHogProvider. The apiKey will be ignored in favour of the client."),n&&r&&console.warn("[PostHog.js] You have provided both a client and options to PostHogProvider. The options will be ignored in favour of the client."),n||(i&&(Oc.__loaded&&console.warn("[PostHog.js] was already loaded elsewhere. This may cause issues."),Oc.init(i,r)),Oc)},[n,i]);return Wt.createElement(k6.Provider,{value:{client:s}},e)}var Cw={},y$={exports:{}},Yi={},w$={exports:{}},b$={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(W,j){var Q=W.length;W.push(j);e:for(;0<Q;){var K=Q-1>>>1,ee=W[K];if(0<r(ee,j))W[K]=j,W[Q]=ee,Q=K;else break e}}function n(W){return W.length===0?null:W[0]}function i(W){if(W.length===0)return null;var j=W[0],Q=W.pop();if(Q!==j){W[0]=Q;e:for(var K=0,ee=W.length,le=ee>>>1;K<le;){var B=2*(K+1)-1,I=W[B],z=B+1,S=W[z];if(0>r(I,Q))z<ee&&0>r(S,I)?(W[K]=S,W[z]=Q,K=z):(W[K]=I,W[B]=Q,K=B);else if(z<ee&&0>r(S,Q))W[K]=S,W[z]=Q,K=z;else break e}}return j}function r(W,j){var Q=W.sortIndex-j.sortIndex;return Q!==0?Q:W.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,f=3,h=!1,p=!1,m=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(W){for(var j=n(c);j!==null;){if(j.callback===null)i(c);else if(j.startTime<=W)i(c),j.sortIndex=j.expirationTime,e(l,j);else break;j=n(c)}}function k(W){if(m=!1,x(W),!p)if(n(l)!==null)p=!0,Y(_);else{var j=n(c);j!==null&&ne(k,j.startTime-W)}}function _(W,j){p=!1,m&&(m=!1,v(C),C=-1),h=!0;var Q=f;try{for(x(j),d=n(l);d!==null&&(!(d.expirationTime>j)||W&&!M());){var K=d.callback;if(typeof K=="function"){d.callback=null,f=d.priorityLevel;var ee=K(d.expirationTime<=j);j=t.unstable_now(),typeof ee=="function"?d.callback=ee:d===n(l)&&i(l),x(j)}else i(l);d=n(l)}if(d!==null)var le=!0;else{var B=n(c);B!==null&&ne(k,B.startTime-j),le=!1}return le}finally{d=null,f=Q,h=!1}}var P=!1,A=null,C=-1,N=5,R=-1;function M(){return!(t.unstable_now()-R<N)}function L(){if(A!==null){var W=t.unstable_now();R=W;var j=!0;try{j=A(!0,W)}finally{j?H():(P=!1,A=null)}}else P=!1}var H;if(typeof y=="function")H=function(){y(L)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,V=T.port2;T.port1.onmessage=L,H=function(){V.postMessage(null)}}else H=function(){w(L,0)};function Y(W){A=W,P||(P=!0,H())}function ne(W,j){C=w(function(){W(t.unstable_now())},j)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){p||h||(p=!0,Y(_))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(W){switch(f){case 1:case 2:case 3:var j=3;break;default:j=f}var Q=f;f=j;try{return W()}finally{f=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,j){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var Q=f;f=W;try{return j()}finally{f=Q}},t.unstable_scheduleCallback=function(W,j,Q){var K=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?K+Q:K):Q=K,W){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=Q+ee,W={id:u++,callback:j,priorityLevel:W,startTime:Q,expirationTime:ee,sortIndex:-1},Q>K?(W.sortIndex=Q,e(c,W),n(l)===null&&W===n(c)&&(m?(v(C),C=-1):m=!0,ne(k,Q-K))):(W.sortIndex=ee,e(l,W),p||h||(p=!0,Y(_))),W},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(W){var j=f;return function(){var Q=f;f=j;try{return W.apply(this,arguments)}finally{f=Q}}}})(b$);w$.exports=b$;var C6=w$.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x$=g,Xi=C6;function oe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var S$=new Set,Jd={};function zl(t,e){iu(t,e),iu(t+"Capture",e)}function iu(t,e){for(Jd[t]=e,t=0;t<e.length;t++)S$.add(e[t])}var oo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ew=Object.prototype.hasOwnProperty,E6=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,V_={},H_={};function A6(t){return Ew.call(H_,t)?!0:Ew.call(V_,t)?!1:E6.test(t)?H_[t]=!0:(V_[t]=!0,!1)}function P6(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function $6(t,e,n,i){if(e===null||typeof e>"u"||P6(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ri(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Mn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Mn[t]=new ri(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Mn[e]=new ri(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Mn[t]=new ri(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Mn[t]=new ri(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Mn[t]=new ri(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Mn[t]=new ri(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Mn[t]=new ri(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Mn[t]=new ri(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Mn[t]=new ri(t,5,!1,t.toLowerCase(),null,!1,!1)});var ox=/[\-:]([a-z])/g;function ax(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ox,ax);Mn[e]=new ri(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ox,ax);Mn[e]=new ri(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ox,ax);Mn[e]=new ri(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Mn[t]=new ri(t,1,!1,t.toLowerCase(),null,!1,!1)});Mn.xlinkHref=new ri("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Mn[t]=new ri(t,1,!1,t.toLowerCase(),null,!0,!0)});function lx(t,e,n,i){var r=Mn.hasOwnProperty(e)?Mn[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&($6(e,n,r,i)&&(n=null),i||r===null?A6(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var wo=x$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Dh=Symbol.for("react.element"),pc=Symbol.for("react.portal"),mc=Symbol.for("react.fragment"),cx=Symbol.for("react.strict_mode"),Aw=Symbol.for("react.profiler"),k$=Symbol.for("react.provider"),_$=Symbol.for("react.context"),ux=Symbol.for("react.forward_ref"),Pw=Symbol.for("react.suspense"),$w=Symbol.for("react.suspense_list"),dx=Symbol.for("react.memo"),Mo=Symbol.for("react.lazy"),C$=Symbol.for("react.offscreen"),W_=Symbol.iterator;function Vu(t){return t===null||typeof t!="object"?null:(t=W_&&t[W_]||t["@@iterator"],typeof t=="function"?t:null)}var Ft=Object.assign,S0;function md(t){if(S0===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);S0=e&&e[1]||""}return`
`+S0+t}var k0=!1;function _0(t,e){if(!t||k0)return"";k0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{k0=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?md(t):""}function T6(t){switch(t.tag){case 5:return md(t.type);case 16:return md("Lazy");case 13:return md("Suspense");case 19:return md("SuspenseList");case 0:case 2:case 15:return t=_0(t.type,!1),t;case 11:return t=_0(t.type.render,!1),t;case 1:return t=_0(t.type,!0),t;default:return""}}function Tw(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case mc:return"Fragment";case pc:return"Portal";case Aw:return"Profiler";case cx:return"StrictMode";case Pw:return"Suspense";case $w:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case _$:return(t.displayName||"Context")+".Consumer";case k$:return(t._context.displayName||"Context")+".Provider";case ux:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case dx:return e=t.displayName||null,e!==null?e:Tw(t.type)||"Memo";case Mo:e=t._payload,t=t._init;try{return Tw(t(e))}catch{}}return null}function O6(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Tw(e);case 8:return e===cx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function wa(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function E$(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function N6(t){var e=E$(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ih(t){t._valueTracker||(t._valueTracker=N6(t))}function A$(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=E$(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Im(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ow(t,e){var n=e.checked;return Ft({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function G_(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=wa(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function P$(t,e){e=e.checked,e!=null&&lx(t,"checked",e,!1)}function Nw(t,e){P$(t,e);var n=wa(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Rw(t,e.type,n):e.hasOwnProperty("defaultValue")&&Rw(t,e.type,wa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function K_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Rw(t,e,n){(e!=="number"||Im(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var gd=Array.isArray;function Nc(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+wa(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Mw(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(oe(91));return Ft({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function X_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(oe(92));if(gd(n)){if(1<n.length)throw Error(oe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:wa(n)}}function $$(t,e){var n=wa(e.value),i=wa(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function q_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function T$(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Dw(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?T$(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Lh,O$=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Lh=Lh||document.createElement("div"),Lh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Lh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Zd(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Td={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},R6=["Webkit","ms","Moz","O"];Object.keys(Td).forEach(function(t){R6.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Td[e]=Td[t]})});function N$(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Td.hasOwnProperty(t)&&Td[t]?(""+e).trim():e+"px"}function R$(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=N$(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var M6=Ft({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Iw(t,e){if(e){if(M6[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(oe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(oe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(oe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(oe(62))}}function Lw(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bw=null;function fx(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var jw=null,Rc=null,Mc=null;function Y_(t){if(t=ah(t)){if(typeof jw!="function")throw Error(oe(280));var e=t.stateNode;e&&(e=cv(e),jw(t.stateNode,t.type,e))}}function M$(t){Rc?Mc?Mc.push(t):Mc=[t]:Rc=t}function D$(){if(Rc){var t=Rc,e=Mc;if(Mc=Rc=null,Y_(t),e)for(t=0;t<e.length;t++)Y_(e[t])}}function I$(t,e){return t(e)}function L$(){}var C0=!1;function B$(t,e,n){if(C0)return t(e,n);C0=!0;try{return I$(t,e,n)}finally{C0=!1,(Rc!==null||Mc!==null)&&(L$(),D$())}}function Qd(t,e){var n=t.stateNode;if(n===null)return null;var i=cv(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(oe(231,e,typeof n));return n}var Fw=!1;if(oo)try{var Hu={};Object.defineProperty(Hu,"passive",{get:function(){Fw=!0}}),window.addEventListener("test",Hu,Hu),window.removeEventListener("test",Hu,Hu)}catch{Fw=!1}function D6(t,e,n,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Od=!1,Lm=null,Bm=!1,zw=null,I6={onError:function(t){Od=!0,Lm=t}};function L6(t,e,n,i,r,s,o,a,l){Od=!1,Lm=null,D6.apply(I6,arguments)}function B6(t,e,n,i,r,s,o,a,l){if(L6.apply(this,arguments),Od){if(Od){var c=Lm;Od=!1,Lm=null}else throw Error(oe(198));Bm||(Bm=!0,zw=c)}}function Ul(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function j$(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function J_(t){if(Ul(t)!==t)throw Error(oe(188))}function j6(t){var e=t.alternate;if(!e){if(e=Ul(t),e===null)throw Error(oe(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return J_(r),t;if(s===i)return J_(r),e;s=s.sibling}throw Error(oe(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(oe(189))}}if(n.alternate!==i)throw Error(oe(190))}if(n.tag!==3)throw Error(oe(188));return n.stateNode.current===n?t:e}function F$(t){return t=j6(t),t!==null?z$(t):null}function z$(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=z$(t);if(e!==null)return e;t=t.sibling}return null}var U$=Xi.unstable_scheduleCallback,Z_=Xi.unstable_cancelCallback,F6=Xi.unstable_shouldYield,z6=Xi.unstable_requestPaint,Xt=Xi.unstable_now,U6=Xi.unstable_getCurrentPriorityLevel,hx=Xi.unstable_ImmediatePriority,V$=Xi.unstable_UserBlockingPriority,jm=Xi.unstable_NormalPriority,V6=Xi.unstable_LowPriority,H$=Xi.unstable_IdlePriority,sv=null,Es=null;function H6(t){if(Es&&typeof Es.onCommitFiberRoot=="function")try{Es.onCommitFiberRoot(sv,t,void 0,(t.current.flags&128)===128)}catch{}}var Ur=Math.clz32?Math.clz32:K6,W6=Math.log,G6=Math.LN2;function K6(t){return t>>>=0,t===0?32:31-(W6(t)/G6|0)|0}var Bh=64,jh=4194304;function vd(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Fm(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=vd(a):(s&=o,s!==0&&(i=vd(s)))}else o=n&~r,o!==0?i=vd(o):s!==0&&(i=vd(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Ur(e),r=1<<n,i|=t[n],e&=~r;return i}function X6(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function q6(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Ur(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=X6(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Uw(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function W$(){var t=Bh;return Bh<<=1,!(Bh&4194240)&&(Bh=64),t}function E0(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function sh(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ur(e),t[e]=n}function Y6(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Ur(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function px(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Ur(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var dt=0;function G$(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var K$,mx,X$,q$,Y$,Vw=!1,Fh=[],aa=null,la=null,ca=null,ef=new Map,tf=new Map,zo=[],J6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Q_(t,e){switch(t){case"focusin":case"focusout":aa=null;break;case"dragenter":case"dragleave":la=null;break;case"mouseover":case"mouseout":ca=null;break;case"pointerover":case"pointerout":ef.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":tf.delete(e.pointerId)}}function Wu(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=ah(e),e!==null&&mx(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function Z6(t,e,n,i,r){switch(e){case"focusin":return aa=Wu(aa,t,e,n,i,r),!0;case"dragenter":return la=Wu(la,t,e,n,i,r),!0;case"mouseover":return ca=Wu(ca,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return ef.set(s,Wu(ef.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,tf.set(s,Wu(tf.get(s)||null,t,e,n,i,r)),!0}return!1}function J$(t){var e=ol(t.target);if(e!==null){var n=Ul(e);if(n!==null){if(e=n.tag,e===13){if(e=j$(n),e!==null){t.blockedOn=e,Y$(t.priority,function(){X$(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function qp(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Hw(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Bw=i,n.target.dispatchEvent(i),Bw=null}else return e=ah(n),e!==null&&mx(e),t.blockedOn=n,!1;e.shift()}return!0}function eC(t,e,n){qp(t)&&n.delete(e)}function Q6(){Vw=!1,aa!==null&&qp(aa)&&(aa=null),la!==null&&qp(la)&&(la=null),ca!==null&&qp(ca)&&(ca=null),ef.forEach(eC),tf.forEach(eC)}function Gu(t,e){t.blockedOn===e&&(t.blockedOn=null,Vw||(Vw=!0,Xi.unstable_scheduleCallback(Xi.unstable_NormalPriority,Q6)))}function nf(t){function e(r){return Gu(r,t)}if(0<Fh.length){Gu(Fh[0],t);for(var n=1;n<Fh.length;n++){var i=Fh[n];i.blockedOn===t&&(i.blockedOn=null)}}for(aa!==null&&Gu(aa,t),la!==null&&Gu(la,t),ca!==null&&Gu(ca,t),ef.forEach(e),tf.forEach(e),n=0;n<zo.length;n++)i=zo[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<zo.length&&(n=zo[0],n.blockedOn===null);)J$(n),n.blockedOn===null&&zo.shift()}var Dc=wo.ReactCurrentBatchConfig,zm=!0;function e4(t,e,n,i){var r=dt,s=Dc.transition;Dc.transition=null;try{dt=1,gx(t,e,n,i)}finally{dt=r,Dc.transition=s}}function t4(t,e,n,i){var r=dt,s=Dc.transition;Dc.transition=null;try{dt=4,gx(t,e,n,i)}finally{dt=r,Dc.transition=s}}function gx(t,e,n,i){if(zm){var r=Hw(t,e,n,i);if(r===null)I0(t,e,i,Um,n),Q_(t,i);else if(Z6(r,t,e,n,i))i.stopPropagation();else if(Q_(t,i),e&4&&-1<J6.indexOf(t)){for(;r!==null;){var s=ah(r);if(s!==null&&K$(s),s=Hw(t,e,n,i),s===null&&I0(t,e,i,Um,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else I0(t,e,i,null,n)}}var Um=null;function Hw(t,e,n,i){if(Um=null,t=fx(i),t=ol(t),t!==null)if(e=Ul(t),e===null)t=null;else if(n=e.tag,n===13){if(t=j$(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Um=t,null}function Z$(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(U6()){case hx:return 1;case V$:return 4;case jm:case V6:return 16;case H$:return 536870912;default:return 16}default:return 16}}var Yo=null,vx=null,Yp=null;function Q$(){if(Yp)return Yp;var t,e=vx,n=e.length,i,r="value"in Yo?Yo.value:Yo.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return Yp=r.slice(t,1<i?1-i:void 0)}function Jp(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function zh(){return!0}function tC(){return!1}function Ji(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?zh:tC,this.isPropagationStopped=tC,this}return Ft(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=zh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=zh)},persist:function(){},isPersistent:zh}),e}var Pu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yx=Ji(Pu),oh=Ft({},Pu,{view:0,detail:0}),n4=Ji(oh),A0,P0,Ku,ov=Ft({},oh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wx,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ku&&(Ku&&t.type==="mousemove"?(A0=t.screenX-Ku.screenX,P0=t.screenY-Ku.screenY):P0=A0=0,Ku=t),A0)},movementY:function(t){return"movementY"in t?t.movementY:P0}}),nC=Ji(ov),i4=Ft({},ov,{dataTransfer:0}),r4=Ji(i4),s4=Ft({},oh,{relatedTarget:0}),$0=Ji(s4),o4=Ft({},Pu,{animationName:0,elapsedTime:0,pseudoElement:0}),a4=Ji(o4),l4=Ft({},Pu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),c4=Ji(l4),u4=Ft({},Pu,{data:0}),iC=Ji(u4),d4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},f4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},h4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function p4(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=h4[t])?!!e[t]:!1}function wx(){return p4}var m4=Ft({},oh,{key:function(t){if(t.key){var e=d4[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Jp(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?f4[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wx,charCode:function(t){return t.type==="keypress"?Jp(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Jp(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),g4=Ji(m4),v4=Ft({},ov,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rC=Ji(v4),y4=Ft({},oh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wx}),w4=Ji(y4),b4=Ft({},Pu,{propertyName:0,elapsedTime:0,pseudoElement:0}),x4=Ji(b4),S4=Ft({},ov,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),k4=Ji(S4),_4=[9,13,27,32],bx=oo&&"CompositionEvent"in window,Nd=null;oo&&"documentMode"in document&&(Nd=document.documentMode);var C4=oo&&"TextEvent"in window&&!Nd,eT=oo&&(!bx||Nd&&8<Nd&&11>=Nd),sC=" ",oC=!1;function tT(t,e){switch(t){case"keyup":return _4.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var gc=!1;function E4(t,e){switch(t){case"compositionend":return nT(e);case"keypress":return e.which!==32?null:(oC=!0,sC);case"textInput":return t=e.data,t===sC&&oC?null:t;default:return null}}function A4(t,e){if(gc)return t==="compositionend"||!bx&&tT(t,e)?(t=Q$(),Yp=vx=Yo=null,gc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return eT&&e.locale!=="ko"?null:e.data;default:return null}}var P4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function aC(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!P4[t.type]:e==="textarea"}function iT(t,e,n,i){M$(i),e=Vm(e,"onChange"),0<e.length&&(n=new yx("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Rd=null,rf=null;function $4(t){pT(t,0)}function av(t){var e=wc(t);if(A$(e))return t}function T4(t,e){if(t==="change")return e}var rT=!1;if(oo){var T0;if(oo){var O0="oninput"in document;if(!O0){var lC=document.createElement("div");lC.setAttribute("oninput","return;"),O0=typeof lC.oninput=="function"}T0=O0}else T0=!1;rT=T0&&(!document.documentMode||9<document.documentMode)}function cC(){Rd&&(Rd.detachEvent("onpropertychange",sT),rf=Rd=null)}function sT(t){if(t.propertyName==="value"&&av(rf)){var e=[];iT(e,rf,t,fx(t)),B$($4,e)}}function O4(t,e,n){t==="focusin"?(cC(),Rd=e,rf=n,Rd.attachEvent("onpropertychange",sT)):t==="focusout"&&cC()}function N4(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return av(rf)}function R4(t,e){if(t==="click")return av(e)}function M4(t,e){if(t==="input"||t==="change")return av(e)}function D4(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Xr=typeof Object.is=="function"?Object.is:D4;function sf(t,e){if(Xr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Ew.call(e,r)||!Xr(t[r],e[r]))return!1}return!0}function uC(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function dC(t,e){var n=uC(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=uC(n)}}function oT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?oT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function aT(){for(var t=window,e=Im();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Im(t.document)}return e}function xx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function I4(t){var e=aT(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&oT(n.ownerDocument.documentElement,n)){if(i!==null&&xx(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=dC(n,s);var o=dC(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var L4=oo&&"documentMode"in document&&11>=document.documentMode,vc=null,Ww=null,Md=null,Gw=!1;function fC(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Gw||vc==null||vc!==Im(i)||(i=vc,"selectionStart"in i&&xx(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Md&&sf(Md,i)||(Md=i,i=Vm(Ww,"onSelect"),0<i.length&&(e=new yx("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=vc)))}function Uh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var yc={animationend:Uh("Animation","AnimationEnd"),animationiteration:Uh("Animation","AnimationIteration"),animationstart:Uh("Animation","AnimationStart"),transitionend:Uh("Transition","TransitionEnd")},N0={},lT={};oo&&(lT=document.createElement("div").style,"AnimationEvent"in window||(delete yc.animationend.animation,delete yc.animationiteration.animation,delete yc.animationstart.animation),"TransitionEvent"in window||delete yc.transitionend.transition);function lv(t){if(N0[t])return N0[t];if(!yc[t])return t;var e=yc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in lT)return N0[t]=e[n];return t}var cT=lv("animationend"),uT=lv("animationiteration"),dT=lv("animationstart"),fT=lv("transitionend"),hT=new Map,hC="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ra(t,e){hT.set(t,e),zl(e,[t])}for(var R0=0;R0<hC.length;R0++){var M0=hC[R0],B4=M0.toLowerCase(),j4=M0[0].toUpperCase()+M0.slice(1);Ra(B4,"on"+j4)}Ra(cT,"onAnimationEnd");Ra(uT,"onAnimationIteration");Ra(dT,"onAnimationStart");Ra("dblclick","onDoubleClick");Ra("focusin","onFocus");Ra("focusout","onBlur");Ra(fT,"onTransitionEnd");iu("onMouseEnter",["mouseout","mouseover"]);iu("onMouseLeave",["mouseout","mouseover"]);iu("onPointerEnter",["pointerout","pointerover"]);iu("onPointerLeave",["pointerout","pointerover"]);zl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zl("onBeforeInput",["compositionend","keypress","textInput","paste"]);zl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),F4=new Set("cancel close invalid load scroll toggle".split(" ").concat(yd));function pC(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,B6(i,e,void 0,t),t.currentTarget=null}function pT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;pC(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;pC(r,a,c),s=l}}}if(Bm)throw t=zw,Bm=!1,zw=null,t}function Ct(t,e){var n=e[Jw];n===void 0&&(n=e[Jw]=new Set);var i=t+"__bubble";n.has(i)||(mT(e,t,2,!1),n.add(i))}function D0(t,e,n){var i=0;e&&(i|=4),mT(n,t,i,e)}var Vh="_reactListening"+Math.random().toString(36).slice(2);function of(t){if(!t[Vh]){t[Vh]=!0,S$.forEach(function(n){n!=="selectionchange"&&(F4.has(n)||D0(n,!1,t),D0(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Vh]||(e[Vh]=!0,D0("selectionchange",!1,e))}}function mT(t,e,n,i){switch(Z$(e)){case 1:var r=e4;break;case 4:r=t4;break;default:r=gx}n=r.bind(null,e,n,t),r=void 0,!Fw||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function I0(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=ol(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}B$(function(){var c=s,u=fx(n),d=[];e:{var f=hT.get(t);if(f!==void 0){var h=yx,p=t;switch(t){case"keypress":if(Jp(n)===0)break e;case"keydown":case"keyup":h=g4;break;case"focusin":p="focus",h=$0;break;case"focusout":p="blur",h=$0;break;case"beforeblur":case"afterblur":h=$0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=nC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=r4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=w4;break;case cT:case uT:case dT:h=a4;break;case fT:h=x4;break;case"scroll":h=n4;break;case"wheel":h=k4;break;case"copy":case"cut":case"paste":h=c4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=rC}var m=(e&4)!==0,w=!m&&t==="scroll",v=m?f!==null?f+"Capture":null:f;m=[];for(var y=c,x;y!==null;){x=y;var k=x.stateNode;if(x.tag===5&&k!==null&&(x=k,v!==null&&(k=Qd(y,v),k!=null&&m.push(af(y,k,x)))),w)break;y=y.return}0<m.length&&(f=new h(f,p,null,n,u),d.push({event:f,listeners:m}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",f&&n!==Bw&&(p=n.relatedTarget||n.fromElement)&&(ol(p)||p[ao]))break e;if((h||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=c,p=p?ol(p):null,p!==null&&(w=Ul(p),p!==w||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=c),h!==p)){if(m=nC,k="onMouseLeave",v="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(m=rC,k="onPointerLeave",v="onPointerEnter",y="pointer"),w=h==null?f:wc(h),x=p==null?f:wc(p),f=new m(k,y+"leave",h,n,u),f.target=w,f.relatedTarget=x,k=null,ol(u)===c&&(m=new m(v,y+"enter",p,n,u),m.target=x,m.relatedTarget=w,k=m),w=k,h&&p)t:{for(m=h,v=p,y=0,x=m;x;x=Xl(x))y++;for(x=0,k=v;k;k=Xl(k))x++;for(;0<y-x;)m=Xl(m),y--;for(;0<x-y;)v=Xl(v),x--;for(;y--;){if(m===v||v!==null&&m===v.alternate)break t;m=Xl(m),v=Xl(v)}m=null}else m=null;h!==null&&mC(d,f,h,m,!1),p!==null&&w!==null&&mC(d,w,p,m,!0)}}e:{if(f=c?wc(c):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var _=T4;else if(aC(f))if(rT)_=M4;else{_=N4;var P=O4}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=R4);if(_&&(_=_(t,c))){iT(d,_,n,u);break e}P&&P(t,f,c),t==="focusout"&&(P=f._wrapperState)&&P.controlled&&f.type==="number"&&Rw(f,"number",f.value)}switch(P=c?wc(c):window,t){case"focusin":(aC(P)||P.contentEditable==="true")&&(vc=P,Ww=c,Md=null);break;case"focusout":Md=Ww=vc=null;break;case"mousedown":Gw=!0;break;case"contextmenu":case"mouseup":case"dragend":Gw=!1,fC(d,n,u);break;case"selectionchange":if(L4)break;case"keydown":case"keyup":fC(d,n,u)}var A;if(bx)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else gc?tT(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(eT&&n.locale!=="ko"&&(gc||C!=="onCompositionStart"?C==="onCompositionEnd"&&gc&&(A=Q$()):(Yo=u,vx="value"in Yo?Yo.value:Yo.textContent,gc=!0)),P=Vm(c,C),0<P.length&&(C=new iC(C,t,null,n,u),d.push({event:C,listeners:P}),A?C.data=A:(A=nT(n),A!==null&&(C.data=A)))),(A=C4?E4(t,n):A4(t,n))&&(c=Vm(c,"onBeforeInput"),0<c.length&&(u=new iC("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=A))}pT(d,e)})}function af(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Vm(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Qd(t,n),s!=null&&i.unshift(af(t,s,r)),s=Qd(t,e),s!=null&&i.push(af(t,s,r))),t=t.return}return i}function Xl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function mC(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=Qd(n,s),l!=null&&o.unshift(af(n,l,a))):r||(l=Qd(n,s),l!=null&&o.push(af(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var z4=/\r\n?/g,U4=/\u0000|\uFFFD/g;function gC(t){return(typeof t=="string"?t:""+t).replace(z4,`
`).replace(U4,"")}function Hh(t,e,n){if(e=gC(e),gC(t)!==e&&n)throw Error(oe(425))}function Hm(){}var Kw=null,Xw=null;function qw(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Yw=typeof setTimeout=="function"?setTimeout:void 0,V4=typeof clearTimeout=="function"?clearTimeout:void 0,vC=typeof Promise=="function"?Promise:void 0,H4=typeof queueMicrotask=="function"?queueMicrotask:typeof vC<"u"?function(t){return vC.resolve(null).then(t).catch(W4)}:Yw;function W4(t){setTimeout(function(){throw t})}function L0(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),nf(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);nf(e)}function ua(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function yC(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var $u=Math.random().toString(36).slice(2),vs="__reactFiber$"+$u,lf="__reactProps$"+$u,ao="__reactContainer$"+$u,Jw="__reactEvents$"+$u,G4="__reactListeners$"+$u,K4="__reactHandles$"+$u;function ol(t){var e=t[vs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ao]||n[vs]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=yC(t);t!==null;){if(n=t[vs])return n;t=yC(t)}return e}t=n,n=t.parentNode}return null}function ah(t){return t=t[vs]||t[ao],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function wc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(oe(33))}function cv(t){return t[lf]||null}var Zw=[],bc=-1;function Ma(t){return{current:t}}function Tt(t){0>bc||(t.current=Zw[bc],Zw[bc]=null,bc--)}function _t(t,e){bc++,Zw[bc]=t.current,t.current=e}var ba={},Hn=Ma(ba),ki=Ma(!1),_l=ba;function ru(t,e){var n=t.type.contextTypes;if(!n)return ba;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function _i(t){return t=t.childContextTypes,t!=null}function Wm(){Tt(ki),Tt(Hn)}function wC(t,e,n){if(Hn.current!==ba)throw Error(oe(168));_t(Hn,e),_t(ki,n)}function gT(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(oe(108,O6(t)||"Unknown",r));return Ft({},n,i)}function Gm(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ba,_l=Hn.current,_t(Hn,t),_t(ki,ki.current),!0}function bC(t,e,n){var i=t.stateNode;if(!i)throw Error(oe(169));n?(t=gT(t,e,_l),i.__reactInternalMemoizedMergedChildContext=t,Tt(ki),Tt(Hn),_t(Hn,t)):Tt(ki),_t(ki,n)}var Fs=null,uv=!1,B0=!1;function vT(t){Fs===null?Fs=[t]:Fs.push(t)}function X4(t){uv=!0,vT(t)}function Da(){if(!B0&&Fs!==null){B0=!0;var t=0,e=dt;try{var n=Fs;for(dt=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Fs=null,uv=!1}catch(r){throw Fs!==null&&(Fs=Fs.slice(t+1)),U$(hx,Da),r}finally{dt=e,B0=!1}}return null}var xc=[],Sc=0,Km=null,Xm=0,lr=[],cr=0,Cl=null,eo=1,to="";function qa(t,e){xc[Sc++]=Xm,xc[Sc++]=Km,Km=t,Xm=e}function yT(t,e,n){lr[cr++]=eo,lr[cr++]=to,lr[cr++]=Cl,Cl=t;var i=eo;t=to;var r=32-Ur(i)-1;i&=~(1<<r),n+=1;var s=32-Ur(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,eo=1<<32-Ur(e)+r|n<<r|i,to=s+t}else eo=1<<s|n<<r|i,to=t}function Sx(t){t.return!==null&&(qa(t,1),yT(t,1,0))}function kx(t){for(;t===Km;)Km=xc[--Sc],xc[Sc]=null,Xm=xc[--Sc],xc[Sc]=null;for(;t===Cl;)Cl=lr[--cr],lr[cr]=null,to=lr[--cr],lr[cr]=null,eo=lr[--cr],lr[cr]=null}var Gi=null,zi=null,Mt=!1,Dr=null;function wT(t,e){var n=fr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function xC(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Gi=t,zi=ua(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Gi=t,zi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Cl!==null?{id:eo,overflow:to}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=fr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Gi=t,zi=null,!0):!1;default:return!1}}function Qw(t){return(t.mode&1)!==0&&(t.flags&128)===0}function eb(t){if(Mt){var e=zi;if(e){var n=e;if(!xC(t,e)){if(Qw(t))throw Error(oe(418));e=ua(n.nextSibling);var i=Gi;e&&xC(t,e)?wT(i,n):(t.flags=t.flags&-4097|2,Mt=!1,Gi=t)}}else{if(Qw(t))throw Error(oe(418));t.flags=t.flags&-4097|2,Mt=!1,Gi=t}}}function SC(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Gi=t}function Wh(t){if(t!==Gi)return!1;if(!Mt)return SC(t),Mt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!qw(t.type,t.memoizedProps)),e&&(e=zi)){if(Qw(t))throw bT(),Error(oe(418));for(;e;)wT(t,e),e=ua(e.nextSibling)}if(SC(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(oe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){zi=ua(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}zi=null}}else zi=Gi?ua(t.stateNode.nextSibling):null;return!0}function bT(){for(var t=zi;t;)t=ua(t.nextSibling)}function su(){zi=Gi=null,Mt=!1}function _x(t){Dr===null?Dr=[t]:Dr.push(t)}var q4=wo.ReactCurrentBatchConfig;function $r(t,e){if(t&&t.defaultProps){e=Ft({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var qm=Ma(null),Ym=null,kc=null,Cx=null;function Ex(){Cx=kc=Ym=null}function Ax(t){var e=qm.current;Tt(qm),t._currentValue=e}function tb(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Ic(t,e){Ym=t,Cx=kc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(xi=!0),t.firstContext=null)}function xr(t){var e=t._currentValue;if(Cx!==t)if(t={context:t,memoizedValue:e,next:null},kc===null){if(Ym===null)throw Error(oe(308));kc=t,Ym.dependencies={lanes:0,firstContext:t}}else kc=kc.next=t;return e}var al=null;function Px(t){al===null?al=[t]:al.push(t)}function xT(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,Px(e)):(n.next=r.next,r.next=n),e.interleaved=n,lo(t,i)}function lo(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Do=!1;function $x(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ST(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function no(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function da(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,rt&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,lo(t,n)}return r=i.interleaved,r===null?(e.next=e,Px(i)):(e.next=r.next,r.next=e),i.interleaved=e,lo(t,n)}function Zp(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,px(t,n)}}function kC(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Jm(t,e,n,i){var r=t.updateQueue;Do=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,u=c=l=null,a=s;do{var f=a.lane,h=a.eventTime;if((i&f)===f){u!==null&&(u=u.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,m=a;switch(f=e,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){d=p.call(h,d,f);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,f=typeof p=="function"?p.call(h,d,f):p,f==null)break e;d=Ft({},d,f);break e;case 2:Do=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[a]:f.push(a))}else h={eventTime:h,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=h,l=d):u=u.next=h,o|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;f=a,a=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(u===null&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Al|=o,t.lanes=o,t.memoizedState=d}}function _C(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(oe(191,r));r.call(i)}}}var kT=new x$.Component().refs;function nb(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Ft({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var dv={isMounted:function(t){return(t=t._reactInternals)?Ul(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Zn(),r=ha(t),s=no(i,r);s.payload=e,n!=null&&(s.callback=n),e=da(t,s,r),e!==null&&(Vr(e,t,r,i),Zp(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Zn(),r=ha(t),s=no(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=da(t,s,r),e!==null&&(Vr(e,t,r,i),Zp(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Zn(),i=ha(t),r=no(n,i);r.tag=2,e!=null&&(r.callback=e),e=da(t,r,i),e!==null&&(Vr(e,t,i,n),Zp(e,t,i))}};function CC(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!sf(n,i)||!sf(r,s):!0}function _T(t,e,n){var i=!1,r=ba,s=e.contextType;return typeof s=="object"&&s!==null?s=xr(s):(r=_i(e)?_l:Hn.current,i=e.contextTypes,s=(i=i!=null)?ru(t,r):ba),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=dv,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function EC(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&dv.enqueueReplaceState(e,e.state,null)}function ib(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs=kT,$x(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=xr(s):(s=_i(e)?_l:Hn.current,r.context=ru(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(nb(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&dv.enqueueReplaceState(r,r.state,null),Jm(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Xu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(oe(309));var i=n.stateNode}if(!i)throw Error(oe(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;a===kT&&(a=r.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(oe(284));if(!n._owner)throw Error(oe(290,t))}return t}function Gh(t,e){throw t=Object.prototype.toString.call(e),Error(oe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function AC(t){var e=t._init;return e(t._payload)}function CT(t){function e(v,y){if(t){var x=v.deletions;x===null?(v.deletions=[y],v.flags|=16):x.push(y)}}function n(v,y){if(!t)return null;for(;y!==null;)e(v,y),y=y.sibling;return null}function i(v,y){for(v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function r(v,y){return v=pa(v,y),v.index=0,v.sibling=null,v}function s(v,y,x){return v.index=x,t?(x=v.alternate,x!==null?(x=x.index,x<y?(v.flags|=2,y):x):(v.flags|=2,y)):(v.flags|=1048576,y)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,y,x,k){return y===null||y.tag!==6?(y=W0(x,v.mode,k),y.return=v,y):(y=r(y,x),y.return=v,y)}function l(v,y,x,k){var _=x.type;return _===mc?u(v,y,x.props.children,k,x.key):y!==null&&(y.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Mo&&AC(_)===y.type)?(k=r(y,x.props),k.ref=Xu(v,y,x),k.return=v,k):(k=rm(x.type,x.key,x.props,null,v.mode,k),k.ref=Xu(v,y,x),k.return=v,k)}function c(v,y,x,k){return y===null||y.tag!==4||y.stateNode.containerInfo!==x.containerInfo||y.stateNode.implementation!==x.implementation?(y=G0(x,v.mode,k),y.return=v,y):(y=r(y,x.children||[]),y.return=v,y)}function u(v,y,x,k,_){return y===null||y.tag!==7?(y=ml(x,v.mode,k,_),y.return=v,y):(y=r(y,x),y.return=v,y)}function d(v,y,x){if(typeof y=="string"&&y!==""||typeof y=="number")return y=W0(""+y,v.mode,x),y.return=v,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Dh:return x=rm(y.type,y.key,y.props,null,v.mode,x),x.ref=Xu(v,null,y),x.return=v,x;case pc:return y=G0(y,v.mode,x),y.return=v,y;case Mo:var k=y._init;return d(v,k(y._payload),x)}if(gd(y)||Vu(y))return y=ml(y,v.mode,x,null),y.return=v,y;Gh(v,y)}return null}function f(v,y,x,k){var _=y!==null?y.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return _!==null?null:a(v,y,""+x,k);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Dh:return x.key===_?l(v,y,x,k):null;case pc:return x.key===_?c(v,y,x,k):null;case Mo:return _=x._init,f(v,y,_(x._payload),k)}if(gd(x)||Vu(x))return _!==null?null:u(v,y,x,k,null);Gh(v,x)}return null}function h(v,y,x,k,_){if(typeof k=="string"&&k!==""||typeof k=="number")return v=v.get(x)||null,a(y,v,""+k,_);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Dh:return v=v.get(k.key===null?x:k.key)||null,l(y,v,k,_);case pc:return v=v.get(k.key===null?x:k.key)||null,c(y,v,k,_);case Mo:var P=k._init;return h(v,y,x,P(k._payload),_)}if(gd(k)||Vu(k))return v=v.get(x)||null,u(y,v,k,_,null);Gh(y,k)}return null}function p(v,y,x,k){for(var _=null,P=null,A=y,C=y=0,N=null;A!==null&&C<x.length;C++){A.index>C?(N=A,A=null):N=A.sibling;var R=f(v,A,x[C],k);if(R===null){A===null&&(A=N);break}t&&A&&R.alternate===null&&e(v,A),y=s(R,y,C),P===null?_=R:P.sibling=R,P=R,A=N}if(C===x.length)return n(v,A),Mt&&qa(v,C),_;if(A===null){for(;C<x.length;C++)A=d(v,x[C],k),A!==null&&(y=s(A,y,C),P===null?_=A:P.sibling=A,P=A);return Mt&&qa(v,C),_}for(A=i(v,A);C<x.length;C++)N=h(A,v,C,x[C],k),N!==null&&(t&&N.alternate!==null&&A.delete(N.key===null?C:N.key),y=s(N,y,C),P===null?_=N:P.sibling=N,P=N);return t&&A.forEach(function(M){return e(v,M)}),Mt&&qa(v,C),_}function m(v,y,x,k){var _=Vu(x);if(typeof _!="function")throw Error(oe(150));if(x=_.call(x),x==null)throw Error(oe(151));for(var P=_=null,A=y,C=y=0,N=null,R=x.next();A!==null&&!R.done;C++,R=x.next()){A.index>C?(N=A,A=null):N=A.sibling;var M=f(v,A,R.value,k);if(M===null){A===null&&(A=N);break}t&&A&&M.alternate===null&&e(v,A),y=s(M,y,C),P===null?_=M:P.sibling=M,P=M,A=N}if(R.done)return n(v,A),Mt&&qa(v,C),_;if(A===null){for(;!R.done;C++,R=x.next())R=d(v,R.value,k),R!==null&&(y=s(R,y,C),P===null?_=R:P.sibling=R,P=R);return Mt&&qa(v,C),_}for(A=i(v,A);!R.done;C++,R=x.next())R=h(A,v,C,R.value,k),R!==null&&(t&&R.alternate!==null&&A.delete(R.key===null?C:R.key),y=s(R,y,C),P===null?_=R:P.sibling=R,P=R);return t&&A.forEach(function(L){return e(v,L)}),Mt&&qa(v,C),_}function w(v,y,x,k){if(typeof x=="object"&&x!==null&&x.type===mc&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Dh:e:{for(var _=x.key,P=y;P!==null;){if(P.key===_){if(_=x.type,_===mc){if(P.tag===7){n(v,P.sibling),y=r(P,x.props.children),y.return=v,v=y;break e}}else if(P.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Mo&&AC(_)===P.type){n(v,P.sibling),y=r(P,x.props),y.ref=Xu(v,P,x),y.return=v,v=y;break e}n(v,P);break}else e(v,P);P=P.sibling}x.type===mc?(y=ml(x.props.children,v.mode,k,x.key),y.return=v,v=y):(k=rm(x.type,x.key,x.props,null,v.mode,k),k.ref=Xu(v,y,x),k.return=v,v=k)}return o(v);case pc:e:{for(P=x.key;y!==null;){if(y.key===P)if(y.tag===4&&y.stateNode.containerInfo===x.containerInfo&&y.stateNode.implementation===x.implementation){n(v,y.sibling),y=r(y,x.children||[]),y.return=v,v=y;break e}else{n(v,y);break}else e(v,y);y=y.sibling}y=G0(x,v.mode,k),y.return=v,v=y}return o(v);case Mo:return P=x._init,w(v,y,P(x._payload),k)}if(gd(x))return p(v,y,x,k);if(Vu(x))return m(v,y,x,k);Gh(v,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,y!==null&&y.tag===6?(n(v,y.sibling),y=r(y,x),y.return=v,v=y):(n(v,y),y=W0(x,v.mode,k),y.return=v,v=y),o(v)):n(v,y)}return w}var ou=CT(!0),ET=CT(!1),lh={},As=Ma(lh),cf=Ma(lh),uf=Ma(lh);function ll(t){if(t===lh)throw Error(oe(174));return t}function Tx(t,e){switch(_t(uf,e),_t(cf,t),_t(As,lh),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Dw(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Dw(e,t)}Tt(As),_t(As,e)}function au(){Tt(As),Tt(cf),Tt(uf)}function AT(t){ll(uf.current);var e=ll(As.current),n=Dw(e,t.type);e!==n&&(_t(cf,t),_t(As,n))}function Ox(t){cf.current===t&&(Tt(As),Tt(cf))}var Lt=Ma(0);function Zm(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var j0=[];function Nx(){for(var t=0;t<j0.length;t++)j0[t]._workInProgressVersionPrimary=null;j0.length=0}var Qp=wo.ReactCurrentDispatcher,F0=wo.ReactCurrentBatchConfig,El=0,jt=null,sn=null,hn=null,Qm=!1,Dd=!1,df=0,Y4=0;function In(){throw Error(oe(321))}function Rx(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Xr(t[n],e[n]))return!1;return!0}function Mx(t,e,n,i,r,s){if(El=s,jt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Qp.current=t===null||t.memoizedState===null?e8:t8,t=n(i,r),Dd){s=0;do{if(Dd=!1,df=0,25<=s)throw Error(oe(301));s+=1,hn=sn=null,e.updateQueue=null,Qp.current=n8,t=n(i,r)}while(Dd)}if(Qp.current=eg,e=sn!==null&&sn.next!==null,El=0,hn=sn=jt=null,Qm=!1,e)throw Error(oe(300));return t}function Dx(){var t=df!==0;return df=0,t}function ls(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hn===null?jt.memoizedState=hn=t:hn=hn.next=t,hn}function Sr(){if(sn===null){var t=jt.alternate;t=t!==null?t.memoizedState:null}else t=sn.next;var e=hn===null?jt.memoizedState:hn.next;if(e!==null)hn=e,sn=t;else{if(t===null)throw Error(oe(310));sn=t,t={memoizedState:sn.memoizedState,baseState:sn.baseState,baseQueue:sn.baseQueue,queue:sn.queue,next:null},hn===null?jt.memoizedState=hn=t:hn=hn.next=t}return hn}function ff(t,e){return typeof e=="function"?e(t):e}function z0(t){var e=Sr(),n=e.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=t;var i=sn,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((El&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,jt.lanes|=u,Al|=u}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,Xr(i,e.memoizedState)||(xi=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,jt.lanes|=s,Al|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function U0(t){var e=Sr(),n=e.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);Xr(s,e.memoizedState)||(xi=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function PT(){}function $T(t,e){var n=jt,i=Sr(),r=e(),s=!Xr(i.memoizedState,r);if(s&&(i.memoizedState=r,xi=!0),i=i.queue,Ix(NT.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||hn!==null&&hn.memoizedState.tag&1){if(n.flags|=2048,hf(9,OT.bind(null,n,i,r,e),void 0,null),mn===null)throw Error(oe(349));El&30||TT(n,e,r)}return r}function TT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=jt.updateQueue,e===null?(e={lastEffect:null,stores:null},jt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function OT(t,e,n,i){e.value=n,e.getSnapshot=i,RT(e)&&MT(t)}function NT(t,e,n){return n(function(){RT(e)&&MT(t)})}function RT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Xr(t,n)}catch{return!0}}function MT(t){var e=lo(t,1);e!==null&&Vr(e,t,1,-1)}function PC(t){var e=ls();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ff,lastRenderedState:t},e.queue=t,t=t.dispatch=Q4.bind(null,jt,t),[e.memoizedState,t]}function hf(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=jt.updateQueue,e===null?(e={lastEffect:null,stores:null},jt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function DT(){return Sr().memoizedState}function em(t,e,n,i){var r=ls();jt.flags|=t,r.memoizedState=hf(1|e,n,void 0,i===void 0?null:i)}function fv(t,e,n,i){var r=Sr();i=i===void 0?null:i;var s=void 0;if(sn!==null){var o=sn.memoizedState;if(s=o.destroy,i!==null&&Rx(i,o.deps)){r.memoizedState=hf(e,n,s,i);return}}jt.flags|=t,r.memoizedState=hf(1|e,n,s,i)}function $C(t,e){return em(8390656,8,t,e)}function Ix(t,e){return fv(2048,8,t,e)}function IT(t,e){return fv(4,2,t,e)}function LT(t,e){return fv(4,4,t,e)}function BT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function jT(t,e,n){return n=n!=null?n.concat([t]):null,fv(4,4,BT.bind(null,e,t),n)}function Lx(){}function FT(t,e){var n=Sr();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Rx(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function zT(t,e){var n=Sr();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Rx(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function UT(t,e,n){return El&21?(Xr(n,e)||(n=W$(),jt.lanes|=n,Al|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,xi=!0),t.memoizedState=n)}function J4(t,e){var n=dt;dt=n!==0&&4>n?n:4,t(!0);var i=F0.transition;F0.transition={};try{t(!1),e()}finally{dt=n,F0.transition=i}}function VT(){return Sr().memoizedState}function Z4(t,e,n){var i=ha(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},HT(t))WT(e,n);else if(n=xT(t,e,n,i),n!==null){var r=Zn();Vr(n,t,i,r),GT(n,e,i)}}function Q4(t,e,n){var i=ha(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(HT(t))WT(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,Xr(a,o)){var l=e.interleaved;l===null?(r.next=r,Px(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=xT(t,e,r,i),n!==null&&(r=Zn(),Vr(n,t,i,r),GT(n,e,i))}}function HT(t){var e=t.alternate;return t===jt||e!==null&&e===jt}function WT(t,e){Dd=Qm=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function GT(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,px(t,n)}}var eg={readContext:xr,useCallback:In,useContext:In,useEffect:In,useImperativeHandle:In,useInsertionEffect:In,useLayoutEffect:In,useMemo:In,useReducer:In,useRef:In,useState:In,useDebugValue:In,useDeferredValue:In,useTransition:In,useMutableSource:In,useSyncExternalStore:In,useId:In,unstable_isNewReconciler:!1},e8={readContext:xr,useCallback:function(t,e){return ls().memoizedState=[t,e===void 0?null:e],t},useContext:xr,useEffect:$C,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,em(4194308,4,BT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return em(4194308,4,t,e)},useInsertionEffect:function(t,e){return em(4,2,t,e)},useMemo:function(t,e){var n=ls();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=ls();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=Z4.bind(null,jt,t),[i.memoizedState,t]},useRef:function(t){var e=ls();return t={current:t},e.memoizedState=t},useState:PC,useDebugValue:Lx,useDeferredValue:function(t){return ls().memoizedState=t},useTransition:function(){var t=PC(!1),e=t[0];return t=J4.bind(null,t[1]),ls().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=jt,r=ls();if(Mt){if(n===void 0)throw Error(oe(407));n=n()}else{if(n=e(),mn===null)throw Error(oe(349));El&30||TT(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,$C(NT.bind(null,i,s,t),[t]),i.flags|=2048,hf(9,OT.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=ls(),e=mn.identifierPrefix;if(Mt){var n=to,i=eo;n=(i&~(1<<32-Ur(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=df++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Y4++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},t8={readContext:xr,useCallback:FT,useContext:xr,useEffect:Ix,useImperativeHandle:jT,useInsertionEffect:IT,useLayoutEffect:LT,useMemo:zT,useReducer:z0,useRef:DT,useState:function(){return z0(ff)},useDebugValue:Lx,useDeferredValue:function(t){var e=Sr();return UT(e,sn.memoizedState,t)},useTransition:function(){var t=z0(ff)[0],e=Sr().memoizedState;return[t,e]},useMutableSource:PT,useSyncExternalStore:$T,useId:VT,unstable_isNewReconciler:!1},n8={readContext:xr,useCallback:FT,useContext:xr,useEffect:Ix,useImperativeHandle:jT,useInsertionEffect:IT,useLayoutEffect:LT,useMemo:zT,useReducer:U0,useRef:DT,useState:function(){return U0(ff)},useDebugValue:Lx,useDeferredValue:function(t){var e=Sr();return sn===null?e.memoizedState=t:UT(e,sn.memoizedState,t)},useTransition:function(){var t=U0(ff)[0],e=Sr().memoizedState;return[t,e]},useMutableSource:PT,useSyncExternalStore:$T,useId:VT,unstable_isNewReconciler:!1};function lu(t,e){try{var n="",i=e;do n+=T6(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function V0(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function rb(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var i8=typeof WeakMap=="function"?WeakMap:Map;function KT(t,e,n){n=no(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){ng||(ng=!0,pb=i),rb(t,e)},n}function XT(t,e,n){n=no(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){rb(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){rb(t,e),typeof i!="function"&&(fa===null?fa=new Set([this]):fa.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function TC(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new i8;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=v8.bind(null,t,e,n),e.then(t,t))}function OC(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function NC(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=no(-1,1),e.tag=2,da(n,e,1))),n.lanes|=1),t)}var r8=wo.ReactCurrentOwner,xi=!1;function Xn(t,e,n,i){e.child=t===null?ET(e,null,n,i):ou(e,t.child,n,i)}function RC(t,e,n,i,r){n=n.render;var s=e.ref;return Ic(e,r),i=Mx(t,e,n,i,s,r),n=Dx(),t!==null&&!xi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,co(t,e,r)):(Mt&&n&&Sx(e),e.flags|=1,Xn(t,e,i,r),e.child)}function MC(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!Wx(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,qT(t,e,s,i,r)):(t=rm(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:sf,n(o,i)&&t.ref===e.ref)return co(t,e,r)}return e.flags|=1,t=pa(s,i),t.ref=e.ref,t.return=e,e.child=t}function qT(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(sf(s,i)&&t.ref===e.ref)if(xi=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(xi=!0);else return e.lanes=t.lanes,co(t,e,r)}return sb(t,e,n,i,r)}function YT(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},_t(Cc,Di),Di|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,_t(Cc,Di),Di|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,_t(Cc,Di),Di|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,_t(Cc,Di),Di|=i;return Xn(t,e,r,n),e.child}function JT(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function sb(t,e,n,i,r){var s=_i(n)?_l:Hn.current;return s=ru(e,s),Ic(e,r),n=Mx(t,e,n,i,s,r),i=Dx(),t!==null&&!xi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,co(t,e,r)):(Mt&&i&&Sx(e),e.flags|=1,Xn(t,e,n,r),e.child)}function DC(t,e,n,i,r){if(_i(n)){var s=!0;Gm(e)}else s=!1;if(Ic(e,r),e.stateNode===null)tm(t,e),_T(e,n,i),ib(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=xr(c):(c=_i(n)?_l:Hn.current,c=ru(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&EC(e,o,i,c),Do=!1;var f=e.memoizedState;o.state=f,Jm(e,i,o,r),l=e.memoizedState,a!==i||f!==l||ki.current||Do?(typeof u=="function"&&(nb(e,n,u,i),l=e.memoizedState),(a=Do||CC(e,n,a,i,f,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,ST(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:$r(e.type,a),o.props=c,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=xr(l):(l=_i(n)?_l:Hn.current,l=ru(e,l));var h=n.getDerivedStateFromProps;(u=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&EC(e,o,i,l),Do=!1,f=e.memoizedState,o.state=f,Jm(e,i,o,r);var p=e.memoizedState;a!==d||f!==p||ki.current||Do?(typeof h=="function"&&(nb(e,n,h,i),p=e.memoizedState),(c=Do||CC(e,n,c,i,f,p,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=p),o.props=i,o.state=p,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),i=!1)}return ob(t,e,n,i,s,r)}function ob(t,e,n,i,r,s){JT(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&bC(e,n,!1),co(t,e,s);i=e.stateNode,r8.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=ou(e,t.child,null,s),e.child=ou(e,null,a,s)):Xn(t,e,a,s),e.memoizedState=i.state,r&&bC(e,n,!0),e.child}function ZT(t){var e=t.stateNode;e.pendingContext?wC(t,e.pendingContext,e.pendingContext!==e.context):e.context&&wC(t,e.context,!1),Tx(t,e.containerInfo)}function IC(t,e,n,i,r){return su(),_x(r),e.flags|=256,Xn(t,e,n,i),e.child}var ab={dehydrated:null,treeContext:null,retryLane:0};function lb(t){return{baseLanes:t,cachePool:null,transitions:null}}function QT(t,e,n){var i=e.pendingProps,r=Lt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),_t(Lt,r&1),t===null)return eb(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=mv(o,i,0,null),t=ml(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=lb(n),e.memoizedState=ab,t):Bx(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return s8(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=pa(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=pa(a,s):(s=ml(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?lb(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=ab,i}return s=t.child,t=s.sibling,i=pa(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Bx(t,e){return e=mv({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Kh(t,e,n,i){return i!==null&&_x(i),ou(e,t.child,null,n),t=Bx(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function s8(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=V0(Error(oe(422))),Kh(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=mv({mode:"visible",children:i.children},r,0,null),s=ml(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&ou(e,t.child,null,o),e.child.memoizedState=lb(o),e.memoizedState=ab,s);if(!(e.mode&1))return Kh(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(oe(419)),i=V0(s,i,void 0),Kh(t,e,o,i)}if(a=(o&t.childLanes)!==0,xi||a){if(i=mn,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,lo(t,r),Vr(i,t,r,-1))}return Hx(),i=V0(Error(oe(421))),Kh(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=y8.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,zi=ua(r.nextSibling),Gi=e,Mt=!0,Dr=null,t!==null&&(lr[cr++]=eo,lr[cr++]=to,lr[cr++]=Cl,eo=t.id,to=t.overflow,Cl=e),e=Bx(e,i.children),e.flags|=4096,e)}function LC(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),tb(t.return,e,n)}function H0(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function eO(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Xn(t,e,i.children,n),i=Lt.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&LC(t,n,e);else if(t.tag===19)LC(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(_t(Lt,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Zm(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),H0(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Zm(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}H0(e,!0,n,null,s);break;case"together":H0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function tm(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function co(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Al|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(oe(153));if(e.child!==null){for(t=e.child,n=pa(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=pa(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function o8(t,e,n){switch(e.tag){case 3:ZT(e),su();break;case 5:AT(e);break;case 1:_i(e.type)&&Gm(e);break;case 4:Tx(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;_t(qm,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(_t(Lt,Lt.current&1),e.flags|=128,null):n&e.child.childLanes?QT(t,e,n):(_t(Lt,Lt.current&1),t=co(t,e,n),t!==null?t.sibling:null);_t(Lt,Lt.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return eO(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),_t(Lt,Lt.current),i)break;return null;case 22:case 23:return e.lanes=0,YT(t,e,n)}return co(t,e,n)}var tO,cb,nO,iO;tO=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};cb=function(){};nO=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,ll(As.current);var s=null;switch(n){case"input":r=Ow(t,r),i=Ow(t,i),s=[];break;case"select":r=Ft({},r,{value:void 0}),i=Ft({},i,{value:void 0}),s=[];break;case"textarea":r=Mw(t,r),i=Mw(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Hm)}Iw(n,i);var o;n=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Jd.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Jd.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ct("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};iO=function(t,e,n,i){n!==i&&(e.flags|=4)};function qu(t,e){if(!Mt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Ln(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function a8(t,e,n){var i=e.pendingProps;switch(kx(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ln(e),null;case 1:return _i(e.type)&&Wm(),Ln(e),null;case 3:return i=e.stateNode,au(),Tt(ki),Tt(Hn),Nx(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Wh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Dr!==null&&(vb(Dr),Dr=null))),cb(t,e),Ln(e),null;case 5:Ox(e);var r=ll(uf.current);if(n=e.type,t!==null&&e.stateNode!=null)nO(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(oe(166));return Ln(e),null}if(t=ll(As.current),Wh(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[vs]=e,i[lf]=s,t=(e.mode&1)!==0,n){case"dialog":Ct("cancel",i),Ct("close",i);break;case"iframe":case"object":case"embed":Ct("load",i);break;case"video":case"audio":for(r=0;r<yd.length;r++)Ct(yd[r],i);break;case"source":Ct("error",i);break;case"img":case"image":case"link":Ct("error",i),Ct("load",i);break;case"details":Ct("toggle",i);break;case"input":G_(i,s),Ct("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Ct("invalid",i);break;case"textarea":X_(i,s),Ct("invalid",i)}Iw(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&Hh(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Hh(i.textContent,a,t),r=["children",""+a]):Jd.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ct("scroll",i)}switch(n){case"input":Ih(i),K_(i,s,!0);break;case"textarea":Ih(i),q_(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Hm)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=T$(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[vs]=e,t[lf]=i,tO(t,e,!1,!1),e.stateNode=t;e:{switch(o=Lw(n,i),n){case"dialog":Ct("cancel",t),Ct("close",t),r=i;break;case"iframe":case"object":case"embed":Ct("load",t),r=i;break;case"video":case"audio":for(r=0;r<yd.length;r++)Ct(yd[r],t);r=i;break;case"source":Ct("error",t),r=i;break;case"img":case"image":case"link":Ct("error",t),Ct("load",t),r=i;break;case"details":Ct("toggle",t),r=i;break;case"input":G_(t,i),r=Ow(t,i),Ct("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Ft({},i,{value:void 0}),Ct("invalid",t);break;case"textarea":X_(t,i),r=Mw(t,i),Ct("invalid",t);break;default:r=i}Iw(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?R$(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&O$(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Zd(t,l):typeof l=="number"&&Zd(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Jd.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ct("scroll",t):l!=null&&lx(t,s,l,o))}switch(n){case"input":Ih(t),K_(t,i,!1);break;case"textarea":Ih(t),q_(t);break;case"option":i.value!=null&&t.setAttribute("value",""+wa(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?Nc(t,!!i.multiple,s,!1):i.defaultValue!=null&&Nc(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Hm)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ln(e),null;case 6:if(t&&e.stateNode!=null)iO(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(oe(166));if(n=ll(uf.current),ll(As.current),Wh(e)){if(i=e.stateNode,n=e.memoizedProps,i[vs]=e,(s=i.nodeValue!==n)&&(t=Gi,t!==null))switch(t.tag){case 3:Hh(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Hh(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[vs]=e,e.stateNode=i}return Ln(e),null;case 13:if(Tt(Lt),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Mt&&zi!==null&&e.mode&1&&!(e.flags&128))bT(),su(),e.flags|=98560,s=!1;else if(s=Wh(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(oe(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(oe(317));s[vs]=e}else su(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ln(e),s=!1}else Dr!==null&&(vb(Dr),Dr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Lt.current&1?cn===0&&(cn=3):Hx())),e.updateQueue!==null&&(e.flags|=4),Ln(e),null);case 4:return au(),cb(t,e),t===null&&of(e.stateNode.containerInfo),Ln(e),null;case 10:return Ax(e.type._context),Ln(e),null;case 17:return _i(e.type)&&Wm(),Ln(e),null;case 19:if(Tt(Lt),s=e.memoizedState,s===null)return Ln(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)qu(s,!1);else{if(cn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Zm(t),o!==null){for(e.flags|=128,qu(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return _t(Lt,Lt.current&1|2),e.child}t=t.sibling}s.tail!==null&&Xt()>cu&&(e.flags|=128,i=!0,qu(s,!1),e.lanes=4194304)}else{if(!i)if(t=Zm(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),qu(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Mt)return Ln(e),null}else 2*Xt()-s.renderingStartTime>cu&&n!==1073741824&&(e.flags|=128,i=!0,qu(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Xt(),e.sibling=null,n=Lt.current,_t(Lt,i?n&1|2:n&1),e):(Ln(e),null);case 22:case 23:return Vx(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Di&1073741824&&(Ln(e),e.subtreeFlags&6&&(e.flags|=8192)):Ln(e),null;case 24:return null;case 25:return null}throw Error(oe(156,e.tag))}function l8(t,e){switch(kx(e),e.tag){case 1:return _i(e.type)&&Wm(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return au(),Tt(ki),Tt(Hn),Nx(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ox(e),null;case 13:if(Tt(Lt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(oe(340));su()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Tt(Lt),null;case 4:return au(),null;case 10:return Ax(e.type._context),null;case 22:case 23:return Vx(),null;case 24:return null;default:return null}}var Xh=!1,zn=!1,c8=typeof WeakSet=="function"?WeakSet:Set,ke=null;function _c(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Ut(t,e,i)}else n.current=null}function ub(t,e,n){try{n()}catch(i){Ut(t,e,i)}}var BC=!1;function u8(t,e){if(Kw=zm,t=aT(),xx(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var h;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===t)break t;if(f===n&&++c===r&&(a=o),f===s&&++u===i&&(l=o),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Xw={focusedElem:t,selectionRange:n},zm=!1,ke=e;ke!==null;)if(e=ke,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ke=t;else for(;ke!==null;){e=ke;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,w=p.memoizedState,v=e.stateNode,y=v.getSnapshotBeforeUpdate(e.elementType===e.type?m:$r(e.type,m),w);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(oe(163))}}catch(k){Ut(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,ke=t;break}ke=e.return}return p=BC,BC=!1,p}function Id(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&ub(e,n,s)}r=r.next}while(r!==i)}}function hv(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function db(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function rO(t){var e=t.alternate;e!==null&&(t.alternate=null,rO(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[vs],delete e[lf],delete e[Jw],delete e[G4],delete e[K4])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function sO(t){return t.tag===5||t.tag===3||t.tag===4}function jC(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||sO(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function fb(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Hm));else if(i!==4&&(t=t.child,t!==null))for(fb(t,e,n),t=t.sibling;t!==null;)fb(t,e,n),t=t.sibling}function hb(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(hb(t,e,n),t=t.sibling;t!==null;)hb(t,e,n),t=t.sibling}var wn=null,Rr=!1;function Po(t,e,n){for(n=n.child;n!==null;)oO(t,e,n),n=n.sibling}function oO(t,e,n){if(Es&&typeof Es.onCommitFiberUnmount=="function")try{Es.onCommitFiberUnmount(sv,n)}catch{}switch(n.tag){case 5:zn||_c(n,e);case 6:var i=wn,r=Rr;wn=null,Po(t,e,n),wn=i,Rr=r,wn!==null&&(Rr?(t=wn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):wn.removeChild(n.stateNode));break;case 18:wn!==null&&(Rr?(t=wn,n=n.stateNode,t.nodeType===8?L0(t.parentNode,n):t.nodeType===1&&L0(t,n),nf(t)):L0(wn,n.stateNode));break;case 4:i=wn,r=Rr,wn=n.stateNode.containerInfo,Rr=!0,Po(t,e,n),wn=i,Rr=r;break;case 0:case 11:case 14:case 15:if(!zn&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&ub(n,e,o),r=r.next}while(r!==i)}Po(t,e,n);break;case 1:if(!zn&&(_c(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Ut(n,e,a)}Po(t,e,n);break;case 21:Po(t,e,n);break;case 22:n.mode&1?(zn=(i=zn)||n.memoizedState!==null,Po(t,e,n),zn=i):Po(t,e,n);break;default:Po(t,e,n)}}function FC(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new c8),e.forEach(function(i){var r=w8.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function Ar(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:wn=a.stateNode,Rr=!1;break e;case 3:wn=a.stateNode.containerInfo,Rr=!0;break e;case 4:wn=a.stateNode.containerInfo,Rr=!0;break e}a=a.return}if(wn===null)throw Error(oe(160));oO(s,o,r),wn=null,Rr=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){Ut(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)aO(e,t),e=e.sibling}function aO(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ar(e,t),ns(t),i&4){try{Id(3,t,t.return),hv(3,t)}catch(m){Ut(t,t.return,m)}try{Id(5,t,t.return)}catch(m){Ut(t,t.return,m)}}break;case 1:Ar(e,t),ns(t),i&512&&n!==null&&_c(n,n.return);break;case 5:if(Ar(e,t),ns(t),i&512&&n!==null&&_c(n,n.return),t.flags&32){var r=t.stateNode;try{Zd(r,"")}catch(m){Ut(t,t.return,m)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&P$(r,s),Lw(a,o);var c=Lw(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?R$(r,d):u==="dangerouslySetInnerHTML"?O$(r,d):u==="children"?Zd(r,d):lx(r,u,d,c)}switch(a){case"input":Nw(r,s);break;case"textarea":$$(r,s);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?Nc(r,!!s.multiple,h,!1):f!==!!s.multiple&&(s.defaultValue!=null?Nc(r,!!s.multiple,s.defaultValue,!0):Nc(r,!!s.multiple,s.multiple?[]:"",!1))}r[lf]=s}catch(m){Ut(t,t.return,m)}}break;case 6:if(Ar(e,t),ns(t),i&4){if(t.stateNode===null)throw Error(oe(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(m){Ut(t,t.return,m)}}break;case 3:if(Ar(e,t),ns(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{nf(e.containerInfo)}catch(m){Ut(t,t.return,m)}break;case 4:Ar(e,t),ns(t);break;case 13:Ar(e,t),ns(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(zx=Xt())),i&4&&FC(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(zn=(c=zn)||u,Ar(e,t),zn=c):Ar(e,t),ns(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(ke=t,u=t.child;u!==null;){for(d=ke=u;ke!==null;){switch(f=ke,h=f.child,f.tag){case 0:case 11:case 14:case 15:Id(4,f,f.return);break;case 1:_c(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){i=f,n=f.return;try{e=i,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){Ut(i,n,m)}}break;case 5:_c(f,f.return);break;case 22:if(f.memoizedState!==null){UC(d);continue}}h!==null?(h.return=f,ke=h):UC(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{r=d.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=N$("display",o))}catch(m){Ut(t,t.return,m)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){Ut(t,t.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ar(e,t),ns(t),i&4&&FC(t);break;case 21:break;default:Ar(e,t),ns(t)}}function ns(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(sO(n)){var i=n;break e}n=n.return}throw Error(oe(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Zd(r,""),i.flags&=-33);var s=jC(t);hb(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=jC(t);fb(t,a,o);break;default:throw Error(oe(161))}}catch(l){Ut(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function d8(t,e,n){ke=t,lO(t)}function lO(t,e,n){for(var i=(t.mode&1)!==0;ke!==null;){var r=ke,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Xh;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||zn;a=Xh;var c=zn;if(Xh=o,(zn=l)&&!c)for(ke=r;ke!==null;)o=ke,l=o.child,o.tag===22&&o.memoizedState!==null?VC(r):l!==null?(l.return=o,ke=l):VC(r);for(;s!==null;)ke=s,lO(s),s=s.sibling;ke=r,Xh=a,zn=c}zC(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,ke=s):zC(t)}}function zC(t){for(;ke!==null;){var e=ke;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:zn||hv(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!zn)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:$r(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&_C(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}_C(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&nf(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(oe(163))}zn||e.flags&512&&db(e)}catch(f){Ut(e,e.return,f)}}if(e===t){ke=null;break}if(n=e.sibling,n!==null){n.return=e.return,ke=n;break}ke=e.return}}function UC(t){for(;ke!==null;){var e=ke;if(e===t){ke=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ke=n;break}ke=e.return}}function VC(t){for(;ke!==null;){var e=ke;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{hv(4,e)}catch(l){Ut(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){Ut(e,r,l)}}var s=e.return;try{db(e)}catch(l){Ut(e,s,l)}break;case 5:var o=e.return;try{db(e)}catch(l){Ut(e,o,l)}}}catch(l){Ut(e,e.return,l)}if(e===t){ke=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ke=a;break}ke=e.return}}var f8=Math.ceil,tg=wo.ReactCurrentDispatcher,jx=wo.ReactCurrentOwner,gr=wo.ReactCurrentBatchConfig,rt=0,mn=null,Qt=null,Rn=0,Di=0,Cc=Ma(0),cn=0,pf=null,Al=0,pv=0,Fx=0,Ld=null,yi=null,zx=0,cu=1/0,Ls=null,ng=!1,pb=null,fa=null,qh=!1,Jo=null,ig=0,Bd=0,mb=null,nm=-1,im=0;function Zn(){return rt&6?Xt():nm!==-1?nm:nm=Xt()}function ha(t){return t.mode&1?rt&2&&Rn!==0?Rn&-Rn:q4.transition!==null?(im===0&&(im=W$()),im):(t=dt,t!==0||(t=window.event,t=t===void 0?16:Z$(t.type)),t):1}function Vr(t,e,n,i){if(50<Bd)throw Bd=0,mb=null,Error(oe(185));sh(t,n,i),(!(rt&2)||t!==mn)&&(t===mn&&(!(rt&2)&&(pv|=n),cn===4&&Uo(t,Rn)),Ci(t,i),n===1&&rt===0&&!(e.mode&1)&&(cu=Xt()+500,uv&&Da()))}function Ci(t,e){var n=t.callbackNode;q6(t,e);var i=Fm(t,t===mn?Rn:0);if(i===0)n!==null&&Z_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&Z_(n),e===1)t.tag===0?X4(HC.bind(null,t)):vT(HC.bind(null,t)),H4(function(){!(rt&6)&&Da()}),n=null;else{switch(G$(i)){case 1:n=hx;break;case 4:n=V$;break;case 16:n=jm;break;case 536870912:n=H$;break;default:n=jm}n=gO(n,cO.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function cO(t,e){if(nm=-1,im=0,rt&6)throw Error(oe(327));var n=t.callbackNode;if(Lc()&&t.callbackNode!==n)return null;var i=Fm(t,t===mn?Rn:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=rg(t,i);else{e=i;var r=rt;rt|=2;var s=dO();(mn!==t||Rn!==e)&&(Ls=null,cu=Xt()+500,pl(t,e));do try{m8();break}catch(a){uO(t,a)}while(!0);Ex(),tg.current=s,rt=r,Qt!==null?e=0:(mn=null,Rn=0,e=cn)}if(e!==0){if(e===2&&(r=Uw(t),r!==0&&(i=r,e=gb(t,r))),e===1)throw n=pf,pl(t,0),Uo(t,i),Ci(t,Xt()),n;if(e===6)Uo(t,i);else{if(r=t.current.alternate,!(i&30)&&!h8(r)&&(e=rg(t,i),e===2&&(s=Uw(t),s!==0&&(i=s,e=gb(t,s))),e===1))throw n=pf,pl(t,0),Uo(t,i),Ci(t,Xt()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(oe(345));case 2:Ya(t,yi,Ls);break;case 3:if(Uo(t,i),(i&130023424)===i&&(e=zx+500-Xt(),10<e)){if(Fm(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Zn(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Yw(Ya.bind(null,t,yi,Ls),e);break}Ya(t,yi,Ls);break;case 4:if(Uo(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-Ur(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=Xt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*f8(i/1960))-i,10<i){t.timeoutHandle=Yw(Ya.bind(null,t,yi,Ls),i);break}Ya(t,yi,Ls);break;case 5:Ya(t,yi,Ls);break;default:throw Error(oe(329))}}}return Ci(t,Xt()),t.callbackNode===n?cO.bind(null,t):null}function gb(t,e){var n=Ld;return t.current.memoizedState.isDehydrated&&(pl(t,e).flags|=256),t=rg(t,e),t!==2&&(e=yi,yi=n,e!==null&&vb(e)),t}function vb(t){yi===null?yi=t:yi.push.apply(yi,t)}function h8(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Xr(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Uo(t,e){for(e&=~Fx,e&=~pv,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ur(e),i=1<<n;t[n]=-1,e&=~i}}function HC(t){if(rt&6)throw Error(oe(327));Lc();var e=Fm(t,0);if(!(e&1))return Ci(t,Xt()),null;var n=rg(t,e);if(t.tag!==0&&n===2){var i=Uw(t);i!==0&&(e=i,n=gb(t,i))}if(n===1)throw n=pf,pl(t,0),Uo(t,e),Ci(t,Xt()),n;if(n===6)throw Error(oe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ya(t,yi,Ls),Ci(t,Xt()),null}function Ux(t,e){var n=rt;rt|=1;try{return t(e)}finally{rt=n,rt===0&&(cu=Xt()+500,uv&&Da())}}function Pl(t){Jo!==null&&Jo.tag===0&&!(rt&6)&&Lc();var e=rt;rt|=1;var n=gr.transition,i=dt;try{if(gr.transition=null,dt=1,t)return t()}finally{dt=i,gr.transition=n,rt=e,!(rt&6)&&Da()}}function Vx(){Di=Cc.current,Tt(Cc)}function pl(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,V4(n)),Qt!==null)for(n=Qt.return;n!==null;){var i=n;switch(kx(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Wm();break;case 3:au(),Tt(ki),Tt(Hn),Nx();break;case 5:Ox(i);break;case 4:au();break;case 13:Tt(Lt);break;case 19:Tt(Lt);break;case 10:Ax(i.type._context);break;case 22:case 23:Vx()}n=n.return}if(mn=t,Qt=t=pa(t.current,null),Rn=Di=e,cn=0,pf=null,Fx=pv=Al=0,yi=Ld=null,al!==null){for(e=0;e<al.length;e++)if(n=al[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}al=null}return t}function uO(t,e){do{var n=Qt;try{if(Ex(),Qp.current=eg,Qm){for(var i=jt.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Qm=!1}if(El=0,hn=sn=jt=null,Dd=!1,df=0,jx.current=null,n===null||n.return===null){cn=1,pf=e,Qt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Rn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=OC(o);if(h!==null){h.flags&=-257,NC(h,o,a,s,e),h.mode&1&&TC(s,c,e),e=h,l=c;var p=e.updateQueue;if(p===null){var m=new Set;m.add(l),e.updateQueue=m}else p.add(l);break e}else{if(!(e&1)){TC(s,c,e),Hx();break e}l=Error(oe(426))}}else if(Mt&&a.mode&1){var w=OC(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),NC(w,o,a,s,e),_x(lu(l,a));break e}}s=l=lu(l,a),cn!==4&&(cn=2),Ld===null?Ld=[s]:Ld.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=KT(s,l,e);kC(s,v);break e;case 1:a=l;var y=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(fa===null||!fa.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var k=XT(s,a,e);kC(s,k);break e}}s=s.return}while(s!==null)}hO(n)}catch(_){e=_,Qt===n&&n!==null&&(Qt=n=n.return);continue}break}while(!0)}function dO(){var t=tg.current;return tg.current=eg,t===null?eg:t}function Hx(){(cn===0||cn===3||cn===2)&&(cn=4),mn===null||!(Al&268435455)&&!(pv&268435455)||Uo(mn,Rn)}function rg(t,e){var n=rt;rt|=2;var i=dO();(mn!==t||Rn!==e)&&(Ls=null,pl(t,e));do try{p8();break}catch(r){uO(t,r)}while(!0);if(Ex(),rt=n,tg.current=i,Qt!==null)throw Error(oe(261));return mn=null,Rn=0,cn}function p8(){for(;Qt!==null;)fO(Qt)}function m8(){for(;Qt!==null&&!F6();)fO(Qt)}function fO(t){var e=mO(t.alternate,t,Di);t.memoizedProps=t.pendingProps,e===null?hO(t):Qt=e,jx.current=null}function hO(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=l8(n,e),n!==null){n.flags&=32767,Qt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{cn=6,Qt=null;return}}else if(n=a8(n,e,Di),n!==null){Qt=n;return}if(e=e.sibling,e!==null){Qt=e;return}Qt=e=t}while(e!==null);cn===0&&(cn=5)}function Ya(t,e,n){var i=dt,r=gr.transition;try{gr.transition=null,dt=1,g8(t,e,n,i)}finally{gr.transition=r,dt=i}return null}function g8(t,e,n,i){do Lc();while(Jo!==null);if(rt&6)throw Error(oe(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(oe(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Y6(t,s),t===mn&&(Qt=mn=null,Rn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||qh||(qh=!0,gO(jm,function(){return Lc(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=gr.transition,gr.transition=null;var o=dt;dt=1;var a=rt;rt|=4,jx.current=null,u8(t,n),aO(n,t),I4(Xw),zm=!!Kw,Xw=Kw=null,t.current=n,d8(n),z6(),rt=a,dt=o,gr.transition=s}else t.current=n;if(qh&&(qh=!1,Jo=t,ig=r),s=t.pendingLanes,s===0&&(fa=null),H6(n.stateNode),Ci(t,Xt()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(ng)throw ng=!1,t=pb,pb=null,t;return ig&1&&t.tag!==0&&Lc(),s=t.pendingLanes,s&1?t===mb?Bd++:(Bd=0,mb=t):Bd=0,Da(),null}function Lc(){if(Jo!==null){var t=G$(ig),e=gr.transition,n=dt;try{if(gr.transition=null,dt=16>t?16:t,Jo===null)var i=!1;else{if(t=Jo,Jo=null,ig=0,rt&6)throw Error(oe(331));var r=rt;for(rt|=4,ke=t.current;ke!==null;){var s=ke,o=s.child;if(ke.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ke=c;ke!==null;){var u=ke;switch(u.tag){case 0:case 11:case 15:Id(8,u,s)}var d=u.child;if(d!==null)d.return=u,ke=d;else for(;ke!==null;){u=ke;var f=u.sibling,h=u.return;if(rO(u),u===c){ke=null;break}if(f!==null){f.return=h,ke=f;break}ke=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var w=m.sibling;m.sibling=null,m=w}while(m!==null)}}ke=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ke=o;else e:for(;ke!==null;){if(s=ke,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Id(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,ke=v;break e}ke=s.return}}var y=t.current;for(ke=y;ke!==null;){o=ke;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,ke=x;else e:for(o=y;ke!==null;){if(a=ke,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:hv(9,a)}}catch(_){Ut(a,a.return,_)}if(a===o){ke=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,ke=k;break e}ke=a.return}}if(rt=r,Da(),Es&&typeof Es.onPostCommitFiberRoot=="function")try{Es.onPostCommitFiberRoot(sv,t)}catch{}i=!0}return i}finally{dt=n,gr.transition=e}}return!1}function WC(t,e,n){e=lu(n,e),e=KT(t,e,1),t=da(t,e,1),e=Zn(),t!==null&&(sh(t,1,e),Ci(t,e))}function Ut(t,e,n){if(t.tag===3)WC(t,t,n);else for(;e!==null;){if(e.tag===3){WC(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(fa===null||!fa.has(i))){t=lu(n,t),t=XT(e,t,1),e=da(e,t,1),t=Zn(),e!==null&&(sh(e,1,t),Ci(e,t));break}}e=e.return}}function v8(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Zn(),t.pingedLanes|=t.suspendedLanes&n,mn===t&&(Rn&n)===n&&(cn===4||cn===3&&(Rn&130023424)===Rn&&500>Xt()-zx?pl(t,0):Fx|=n),Ci(t,e)}function pO(t,e){e===0&&(t.mode&1?(e=jh,jh<<=1,!(jh&130023424)&&(jh=4194304)):e=1);var n=Zn();t=lo(t,e),t!==null&&(sh(t,e,n),Ci(t,n))}function y8(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),pO(t,n)}function w8(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(oe(314))}i!==null&&i.delete(e),pO(t,n)}var mO;mO=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ki.current)xi=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return xi=!1,o8(t,e,n);xi=!!(t.flags&131072)}else xi=!1,Mt&&e.flags&1048576&&yT(e,Xm,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;tm(t,e),t=e.pendingProps;var r=ru(e,Hn.current);Ic(e,n),r=Mx(null,e,i,t,r,n);var s=Dx();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,_i(i)?(s=!0,Gm(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,$x(e),r.updater=dv,e.stateNode=r,r._reactInternals=e,ib(e,i,t,n),e=ob(null,e,i,!0,s,n)):(e.tag=0,Mt&&s&&Sx(e),Xn(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(tm(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=x8(i),t=$r(i,t),r){case 0:e=sb(null,e,i,t,n);break e;case 1:e=DC(null,e,i,t,n);break e;case 11:e=RC(null,e,i,t,n);break e;case 14:e=MC(null,e,i,$r(i.type,t),n);break e}throw Error(oe(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:$r(i,r),sb(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:$r(i,r),DC(t,e,i,r,n);case 3:e:{if(ZT(e),t===null)throw Error(oe(387));i=e.pendingProps,s=e.memoizedState,r=s.element,ST(t,e),Jm(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=lu(Error(oe(423)),e),e=IC(t,e,i,n,r);break e}else if(i!==r){r=lu(Error(oe(424)),e),e=IC(t,e,i,n,r);break e}else for(zi=ua(e.stateNode.containerInfo.firstChild),Gi=e,Mt=!0,Dr=null,n=ET(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(su(),i===r){e=co(t,e,n);break e}Xn(t,e,i,n)}e=e.child}return e;case 5:return AT(e),t===null&&eb(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,qw(i,r)?o=null:s!==null&&qw(i,s)&&(e.flags|=32),JT(t,e),Xn(t,e,o,n),e.child;case 6:return t===null&&eb(e),null;case 13:return QT(t,e,n);case 4:return Tx(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=ou(e,null,i,n):Xn(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:$r(i,r),RC(t,e,i,r,n);case 7:return Xn(t,e,e.pendingProps,n),e.child;case 8:return Xn(t,e,e.pendingProps.children,n),e.child;case 12:return Xn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,_t(qm,i._currentValue),i._currentValue=o,s!==null)if(Xr(s.value,o)){if(s.children===r.children&&!ki.current){e=co(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=no(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),tb(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(oe(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),tb(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Xn(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Ic(e,n),r=xr(r),i=i(r),e.flags|=1,Xn(t,e,i,n),e.child;case 14:return i=e.type,r=$r(i,e.pendingProps),r=$r(i.type,r),MC(t,e,i,r,n);case 15:return qT(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:$r(i,r),tm(t,e),e.tag=1,_i(i)?(t=!0,Gm(e)):t=!1,Ic(e,n),_T(e,i,r),ib(e,i,r,n),ob(null,e,i,!0,t,n);case 19:return eO(t,e,n);case 22:return YT(t,e,n)}throw Error(oe(156,e.tag))};function gO(t,e){return U$(t,e)}function b8(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fr(t,e,n,i){return new b8(t,e,n,i)}function Wx(t){return t=t.prototype,!(!t||!t.isReactComponent)}function x8(t){if(typeof t=="function")return Wx(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ux)return 11;if(t===dx)return 14}return 2}function pa(t,e){var n=t.alternate;return n===null?(n=fr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function rm(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")Wx(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case mc:return ml(n.children,r,s,e);case cx:o=8,r|=8;break;case Aw:return t=fr(12,n,e,r|2),t.elementType=Aw,t.lanes=s,t;case Pw:return t=fr(13,n,e,r),t.elementType=Pw,t.lanes=s,t;case $w:return t=fr(19,n,e,r),t.elementType=$w,t.lanes=s,t;case C$:return mv(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case k$:o=10;break e;case _$:o=9;break e;case ux:o=11;break e;case dx:o=14;break e;case Mo:o=16,i=null;break e}throw Error(oe(130,t==null?t:typeof t,""))}return e=fr(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function ml(t,e,n,i){return t=fr(7,t,i,e),t.lanes=n,t}function mv(t,e,n,i){return t=fr(22,t,i,e),t.elementType=C$,t.lanes=n,t.stateNode={isHidden:!1},t}function W0(t,e,n){return t=fr(6,t,null,e),t.lanes=n,t}function G0(t,e,n){return e=fr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function S8(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=E0(0),this.expirationTimes=E0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=E0(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Gx(t,e,n,i,r,s,o,a,l){return t=new S8(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=fr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},$x(s),t}function k8(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pc,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function vO(t){if(!t)return ba;t=t._reactInternals;e:{if(Ul(t)!==t||t.tag!==1)throw Error(oe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(_i(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(oe(171))}if(t.tag===1){var n=t.type;if(_i(n))return gT(t,n,e)}return e}function yO(t,e,n,i,r,s,o,a,l){return t=Gx(n,i,!0,t,r,s,o,a,l),t.context=vO(null),n=t.current,i=Zn(),r=ha(n),s=no(i,r),s.callback=e??null,da(n,s,r),t.current.lanes=r,sh(t,r,i),Ci(t,i),t}function gv(t,e,n,i){var r=e.current,s=Zn(),o=ha(r);return n=vO(n),e.context===null?e.context=n:e.pendingContext=n,e=no(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=da(r,e,o),t!==null&&(Vr(t,r,o,s),Zp(t,r,o)),o}function sg(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function GC(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Kx(t,e){GC(t,e),(t=t.alternate)&&GC(t,e)}function _8(){return null}var wO=typeof reportError=="function"?reportError:function(t){console.error(t)};function Xx(t){this._internalRoot=t}vv.prototype.render=Xx.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(oe(409));gv(t,e,null,null)};vv.prototype.unmount=Xx.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Pl(function(){gv(null,t,null,null)}),e[ao]=null}};function vv(t){this._internalRoot=t}vv.prototype.unstable_scheduleHydration=function(t){if(t){var e=q$();t={blockedOn:null,target:t,priority:e};for(var n=0;n<zo.length&&e!==0&&e<zo[n].priority;n++);zo.splice(n,0,t),n===0&&J$(t)}};function qx(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function yv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function KC(){}function C8(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=sg(o);s.call(c)}}var o=yO(e,i,t,0,null,!1,!1,"",KC);return t._reactRootContainer=o,t[ao]=o.current,of(t.nodeType===8?t.parentNode:t),Pl(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=sg(l);a.call(c)}}var l=Gx(t,0,!1,null,null,!1,!1,"",KC);return t._reactRootContainer=l,t[ao]=l.current,of(t.nodeType===8?t.parentNode:t),Pl(function(){gv(e,l,n,i)}),l}function wv(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=sg(o);a.call(l)}}gv(e,o,t,r)}else o=C8(n,e,t,r,i);return sg(o)}K$=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=vd(e.pendingLanes);n!==0&&(px(e,n|1),Ci(e,Xt()),!(rt&6)&&(cu=Xt()+500,Da()))}break;case 13:Pl(function(){var i=lo(t,1);if(i!==null){var r=Zn();Vr(i,t,1,r)}}),Kx(t,1)}};mx=function(t){if(t.tag===13){var e=lo(t,134217728);if(e!==null){var n=Zn();Vr(e,t,134217728,n)}Kx(t,134217728)}};X$=function(t){if(t.tag===13){var e=ha(t),n=lo(t,e);if(n!==null){var i=Zn();Vr(n,t,e,i)}Kx(t,e)}};q$=function(){return dt};Y$=function(t,e){var n=dt;try{return dt=t,e()}finally{dt=n}};jw=function(t,e,n){switch(e){case"input":if(Nw(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=cv(i);if(!r)throw Error(oe(90));A$(i),Nw(i,r)}}}break;case"textarea":$$(t,n);break;case"select":e=n.value,e!=null&&Nc(t,!!n.multiple,e,!1)}};I$=Ux;L$=Pl;var E8={usingClientEntryPoint:!1,Events:[ah,wc,cv,M$,D$,Ux]},Yu={findFiberByHostInstance:ol,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},A8={bundleType:Yu.bundleType,version:Yu.version,rendererPackageName:Yu.rendererPackageName,rendererConfig:Yu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:wo.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=F$(t),t===null?null:t.stateNode},findFiberByHostInstance:Yu.findFiberByHostInstance||_8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yh.isDisabled&&Yh.supportsFiber)try{sv=Yh.inject(A8),Es=Yh}catch{}}Yi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=E8;Yi.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qx(e))throw Error(oe(200));return k8(t,e,null,n)};Yi.createRoot=function(t,e){if(!qx(t))throw Error(oe(299));var n=!1,i="",r=wO;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Gx(t,1,!1,null,null,n,!1,i,r),t[ao]=e.current,of(t.nodeType===8?t.parentNode:t),new Xx(e)};Yi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(oe(188)):(t=Object.keys(t).join(","),Error(oe(268,t)));return t=F$(e),t=t===null?null:t.stateNode,t};Yi.flushSync=function(t){return Pl(t)};Yi.hydrate=function(t,e,n){if(!yv(e))throw Error(oe(200));return wv(null,t,e,!0,n)};Yi.hydrateRoot=function(t,e,n){if(!qx(t))throw Error(oe(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=wO;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=yO(e,null,t,1,n??null,r,!1,s,o),t[ao]=e.current,of(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new vv(e)};Yi.render=function(t,e,n){if(!yv(e))throw Error(oe(200));return wv(null,t,e,!1,n)};Yi.unmountComponentAtNode=function(t){if(!yv(t))throw Error(oe(40));return t._reactRootContainer?(Pl(function(){wv(null,null,t,!1,function(){t._reactRootContainer=null,t[ao]=null})}),!0):!1};Yi.unstable_batchedUpdates=Ux;Yi.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!yv(n))throw Error(oe(200));if(t==null||t._reactInternals===void 0)throw Error(oe(38));return wv(t,e,n,!1,i)};Yi.version="18.2.0-next-9e3b772b8-20220608";function bO(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(bO)}catch(t){console.error(t)}}bO(),y$.exports=Yi;var bo=y$.exports;const P8=Eu(bo);var XC=bo;Cw.createRoot=XC.createRoot,Cw.hydrateRoot=XC.hydrateRoot;function bt(){return bt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},bt.apply(this,arguments)}function ve(t,e,{checkForDefaultPrevented:n=!0}={}){return function(r){if(t==null||t(r),n===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function es(t,e=[]){let n=[];function i(s,o){const a=g.createContext(o),l=n.length;n=[...n,o];function c(d){const{scope:f,children:h,...p}=d,m=(f==null?void 0:f[t][l])||a,w=g.useMemo(()=>p,Object.values(p));return g.createElement(m.Provider,{value:w},h)}function u(d,f){const h=(f==null?void 0:f[t][l])||a,p=g.useContext(h);if(p)return p;if(o!==void 0)return o;throw new Error(`\`${d}\` must be used within \`${s}\``)}return c.displayName=s+"Provider",[c,u]}const r=()=>{const s=n.map(o=>g.createContext(o));return function(a){const l=(a==null?void 0:a[t])||s;return g.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return r.scopeName=t,[i,$8(r,...e)]}function $8(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const i=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(s){const o=i.reduce((a,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...a,...d}},{});return g.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function T8(t,e){typeof t=="function"?t(e):t!=null&&(t.current=e)}function bv(...t){return e=>t.forEach(n=>T8(n,e))}function st(...t){return g.useCallback(bv(...t),t)}const $l=g.forwardRef((t,e)=>{const{children:n,...i}=t,r=g.Children.toArray(n),s=r.find(N8);if(s){const o=s.props.children,a=r.map(l=>l===s?g.Children.count(o)>1?g.Children.only(null):g.isValidElement(o)?o.props.children:null:l);return g.createElement(yb,bt({},i,{ref:e}),g.isValidElement(o)?g.cloneElement(o,void 0,a):null)}return g.createElement(yb,bt({},i,{ref:e}),n)});$l.displayName="Slot";const yb=g.forwardRef((t,e)=>{const{children:n,...i}=t;return g.isValidElement(n)?g.cloneElement(n,{...R8(i,n.props),ref:e?bv(e,n.ref):n.ref}):g.Children.count(n)>1?g.Children.only(null):null});yb.displayName="SlotClone";const O8=({children:t})=>g.createElement(g.Fragment,null,t);function N8(t){return g.isValidElement(t)&&t.type===O8}function R8(t,e){const n={...e};for(const i in e){const r=t[i],s=e[i];/^on[A-Z]/.test(i)?r&&s?n[i]=(...a)=>{s(...a),r(...a)}:r&&(n[i]=r):i==="style"?n[i]={...r,...s}:i==="className"&&(n[i]=[r,s].filter(Boolean).join(" "))}return{...t,...n}}function ch(t){const e=t+"CollectionProvider",[n,i]=es(e),[r,s]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=h=>{const{scope:p,children:m}=h,w=Wt.useRef(null),v=Wt.useRef(new Map).current;return Wt.createElement(r,{scope:p,itemMap:v,collectionRef:w},m)},a=t+"CollectionSlot",l=Wt.forwardRef((h,p)=>{const{scope:m,children:w}=h,v=s(a,m),y=st(p,v.collectionRef);return Wt.createElement($l,{ref:y},w)}),c=t+"CollectionItemSlot",u="data-radix-collection-item",d=Wt.forwardRef((h,p)=>{const{scope:m,children:w,...v}=h,y=Wt.useRef(null),x=st(p,y),k=s(c,m);return Wt.useEffect(()=>(k.itemMap.set(y,{ref:y,...v}),()=>void k.itemMap.delete(y))),Wt.createElement($l,{[u]:"",ref:x},w)});function f(h){const p=s(t+"CollectionConsumer",h);return Wt.useCallback(()=>{const w=p.collectionRef.current;if(!w)return[];const v=Array.from(w.querySelectorAll(`[${u}]`));return Array.from(p.itemMap.values()).sort((k,_)=>v.indexOf(k.ref.current)-v.indexOf(_.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:o,Slot:l,ItemSlot:d},f,i]}const kr=globalThis!=null&&globalThis.document?g.useLayoutEffect:()=>{},M8=X1.useId||(()=>{});let D8=0;function Tl(t){const[e,n]=g.useState(M8());return kr(()=>{t||n(i=>i??String(D8++))},[t]),t||(e?`radix-${e}`:"")}const I8=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ge=I8.reduce((t,e)=>{const n=g.forwardRef((i,r)=>{const{asChild:s,...o}=i,a=s?$l:e;return g.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),g.createElement(a,bt({},o,{ref:r}))});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function Yx(t,e){t&&bo.flushSync(()=>t.dispatchEvent(e))}function ti(t){const e=g.useRef(t);return g.useEffect(()=>{e.current=t}),g.useMemo(()=>(...n)=>{var i;return(i=e.current)===null||i===void 0?void 0:i.call(e,...n)},[])}function uo({prop:t,defaultProp:e,onChange:n=()=>{}}){const[i,r]=L8({defaultProp:e,onChange:n}),s=t!==void 0,o=s?t:i,a=ti(n),l=g.useCallback(c=>{if(s){const d=typeof c=="function"?c(t):c;d!==t&&a(d)}else r(c)},[s,t,r,a]);return[o,l]}function L8({defaultProp:t,onChange:e}){const n=g.useState(t),[i]=n,r=g.useRef(i),s=ti(e);return g.useEffect(()=>{r.current!==i&&(s(i),r.current=i)},[i,r,s]),n}const B8=g.createContext(void 0);function uh(t){const e=g.useContext(B8);return t||e||"ltr"}const K0="rovingFocusGroup.onEntryFocus",j8={bubbles:!1,cancelable:!0},Jx="RovingFocusGroup",[wb,xO,F8]=ch(Jx),[z8,xv]=es(Jx,[F8]),[U8,V8]=z8(Jx),H8=g.forwardRef((t,e)=>g.createElement(wb.Provider,{scope:t.__scopeRovingFocusGroup},g.createElement(wb.Slot,{scope:t.__scopeRovingFocusGroup},g.createElement(W8,bt({},t,{ref:e}))))),W8=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:i,loop:r=!1,dir:s,currentTabStopId:o,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:c,...u}=t,d=g.useRef(null),f=st(e,d),h=uh(s),[p=null,m]=uo({prop:o,defaultProp:a,onChange:l}),[w,v]=g.useState(!1),y=ti(c),x=xO(n),k=g.useRef(!1),[_,P]=g.useState(0);return g.useEffect(()=>{const A=d.current;if(A)return A.addEventListener(K0,y),()=>A.removeEventListener(K0,y)},[y]),g.createElement(U8,{scope:n,orientation:i,dir:h,loop:r,currentTabStopId:p,onItemFocus:g.useCallback(A=>m(A),[m]),onItemShiftTab:g.useCallback(()=>v(!0),[]),onFocusableItemAdd:g.useCallback(()=>P(A=>A+1),[]),onFocusableItemRemove:g.useCallback(()=>P(A=>A-1),[])},g.createElement(Ge.div,bt({tabIndex:w||_===0?-1:0,"data-orientation":i},u,{ref:f,style:{outline:"none",...t.style},onMouseDown:ve(t.onMouseDown,()=>{k.current=!0}),onFocus:ve(t.onFocus,A=>{const C=!k.current;if(A.target===A.currentTarget&&C&&!w){const N=new CustomEvent(K0,j8);if(A.currentTarget.dispatchEvent(N),!N.defaultPrevented){const R=x().filter(V=>V.focusable),M=R.find(V=>V.active),L=R.find(V=>V.id===p),T=[M,L,...R].filter(Boolean).map(V=>V.ref.current);SO(T)}}k.current=!1}),onBlur:ve(t.onBlur,()=>v(!1))})))}),G8="RovingFocusGroupItem",K8=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:i=!0,active:r=!1,tabStopId:s,...o}=t,a=Tl(),l=s||a,c=V8(G8,n),u=c.currentTabStopId===l,d=xO(n),{onFocusableItemAdd:f,onFocusableItemRemove:h}=c;return g.useEffect(()=>{if(i)return f(),()=>h()},[i,f,h]),g.createElement(wb.ItemSlot,{scope:n,id:l,focusable:i,active:r},g.createElement(Ge.span,bt({tabIndex:u?0:-1,"data-orientation":c.orientation},o,{ref:e,onMouseDown:ve(t.onMouseDown,p=>{i?c.onItemFocus(l):p.preventDefault()}),onFocus:ve(t.onFocus,()=>c.onItemFocus(l)),onKeyDown:ve(t.onKeyDown,p=>{if(p.key==="Tab"&&p.shiftKey){c.onItemShiftTab();return}if(p.target!==p.currentTarget)return;const m=Y8(p,c.orientation,c.dir);if(m!==void 0){p.preventDefault();let v=d().filter(y=>y.focusable).map(y=>y.ref.current);if(m==="last")v.reverse();else if(m==="prev"||m==="next"){m==="prev"&&v.reverse();const y=v.indexOf(p.currentTarget);v=c.loop?J8(v,y+1):v.slice(y+1)}setTimeout(()=>SO(v))}})})))}),X8={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function q8(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Y8(t,e,n){const i=q8(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return X8[i]}function SO(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function J8(t,e){return t.map((n,i)=>t[(e+i)%t.length])}const kO=H8,_O=K8;function Z8(t,e){return g.useReducer((n,i)=>{const r=e[n][i];return r??n},t)}const xo=t=>{const{present:e,children:n}=t,i=Q8(e),r=typeof n=="function"?n({present:i.isPresent}):g.Children.only(n),s=st(i.ref,r.ref);return typeof n=="function"||i.isPresent?g.cloneElement(r,{ref:s}):null};xo.displayName="Presence";function Q8(t){const[e,n]=g.useState(),i=g.useRef({}),r=g.useRef(t),s=g.useRef("none"),o=t?"mounted":"unmounted",[a,l]=Z8(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return g.useEffect(()=>{const c=Jh(i.current);s.current=a==="mounted"?c:"none"},[a]),kr(()=>{const c=i.current,u=r.current;if(u!==t){const f=s.current,h=Jh(c);t?l("MOUNT"):h==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&f!==h?"ANIMATION_OUT":"UNMOUNT"),r.current=t}},[t,l]),kr(()=>{if(e){const c=d=>{const h=Jh(i.current).includes(d.animationName);d.target===e&&h&&bo.flushSync(()=>l("ANIMATION_END"))},u=d=>{d.target===e&&(s.current=Jh(i.current))};return e.addEventListener("animationstart",u),e.addEventListener("animationcancel",c),e.addEventListener("animationend",c),()=>{e.removeEventListener("animationstart",u),e.removeEventListener("animationcancel",c),e.removeEventListener("animationend",c)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:g.useCallback(c=>{c&&(i.current=getComputedStyle(c)),n(c)},[])}}function Jh(t){return(t==null?void 0:t.animationName)||"none"}const CO="Tabs",[eB,gne]=es(CO,[xv]),EO=xv(),[tB,Zx]=eB(CO),nB=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:i,onValueChange:r,defaultValue:s,orientation:o="horizontal",dir:a,activationMode:l="automatic",...c}=t,u=uh(a),[d,f]=uo({prop:i,onChange:r,defaultProp:s});return g.createElement(tB,{scope:n,baseId:Tl(),value:d,onValueChange:f,orientation:o,dir:u,activationMode:l},g.createElement(Ge.div,bt({dir:u,"data-orientation":o},c,{ref:e})))}),iB="TabsList",rB=g.forwardRef((t,e)=>{const{__scopeTabs:n,loop:i=!0,...r}=t,s=Zx(iB,n),o=EO(n);return g.createElement(kO,bt({asChild:!0},o,{orientation:s.orientation,dir:s.dir,loop:i}),g.createElement(Ge.div,bt({role:"tablist","aria-orientation":s.orientation},r,{ref:e})))}),sB="TabsTrigger",qC=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:i,disabled:r=!1,...s}=t,o=Zx(sB,n),a=EO(n),l=AO(o.baseId,i),c=PO(o.baseId,i),u=i===o.value;return g.createElement(_O,bt({asChild:!0},a,{focusable:!r,active:u}),g.createElement(Ge.button,bt({type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":r?"":void 0,disabled:r,id:l},s,{ref:e,onMouseDown:ve(t.onMouseDown,d=>{!r&&d.button===0&&d.ctrlKey===!1?o.onValueChange(i):d.preventDefault()}),onKeyDown:ve(t.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&o.onValueChange(i)}),onFocus:ve(t.onFocus,()=>{const d=o.activationMode!=="manual";!u&&!r&&d&&o.onValueChange(i)})})))}),oB="TabsContent",X0=g.forwardRef((t,e)=>{const{__scopeTabs:n,value:i,forceMount:r,children:s,...o}=t,a=Zx(oB,n),l=AO(a.baseId,i),c=PO(a.baseId,i),u=i===a.value,d=g.useRef(u);return g.useEffect(()=>{const f=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(f)},[]),g.createElement(xo,{present:r||u},({present:f})=>g.createElement(Ge.div,bt({"data-state":u?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!f,id:c,tabIndex:0},o,{ref:e,style:{...t.style,animationDuration:d.current?"0s":void 0}}),f&&s))});function AO(t,e){return`${t}-trigger-${e}`}function PO(t,e){return`${t}-content-${e}`}var tn={BASE_URL:"/VonSim8/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};let aB=0;function Ce(t,e){const n=`atom${++aB}`,i={toString:()=>n};return typeof t=="function"?i.read=t:(i.init=t,i.read=function(r){return r(this)},i.write=function(r,s,o){return s(this,typeof o=="function"?o(r(this)):o)}),e&&(i.write=e),i}const q0=t=>"init"in t,Y0=t=>!!t.write,og=new WeakMap,lB=(t,e)=>{og.set(t,e),t.catch(()=>{}).finally(()=>og.delete(t))},YC=(t,e)=>{const n=og.get(t);n&&(og.delete(t),n(e))},JC=(t,e)=>{t.status="fulfilled",t.value=e},ZC=(t,e)=>{t.status="rejected",t.reason=e},cB=t=>typeof(t==null?void 0:t.then)=="function",Ju=(t,e)=>!!t&&"v"in t&&"v"in e&&Object.is(t.v,e.v),QC=(t,e)=>!!t&&"e"in t&&"e"in e&&Object.is(t.e,e.e),ql=t=>!!t&&"v"in t&&t.v instanceof Promise,uB=(t,e)=>"v"in t&&"v"in e&&t.v.orig&&t.v.orig===e.v.orig,Zh=t=>{if("e"in t)throw t.e;return t.v},Qx=()=>{const t=new WeakMap,e=new WeakMap,n=new Map;let i,r;(tn?"production":void 0)!=="production"&&(i=new Set,r=new Set);const s=C=>t.get(C),o=(C,N)=>{(tn?"production":void 0)!=="production"&&Object.freeze(N);const R=t.get(C);if(t.set(C,N),n.has(C)||n.set(C,R),ql(R)){const M="v"in N?N.v instanceof Promise?N.v:Promise.resolve(N.v):Promise.reject(N.e);R.v!==M&&YC(R.v,M)}},a=(C,N,R)=>{const M=new Map;let L=!1;R.forEach((H,T)=>{!H&&T===C&&(H=N),H?(M.set(T,H),N.d.get(T)!==H&&(L=!0)):(tn?"production":void 0)!=="production"&&console.warn("[Bug] atom state not found")}),(L||N.d.size!==M.size)&&(N.d=M)},l=(C,N,R)=>{const M=s(C),L={d:(M==null?void 0:M.d)||new Map,v:N};if(R&&a(C,L,R),Ju(M,L)&&M.d===L.d)return M;if(ql(M)&&ql(L)&&uB(M,L)){if(M.d===L.d)return M;L.v=M.v}return o(C,L),L},c=(C,N,R,M)=>{if(cB(N)){let L;const H=()=>{const V=s(C);if(!ql(V)||V.v!==T)return;const Y=l(C,T,R);e.has(C)&&V.d!==Y.d&&_(C,Y,V.d)},T=new Promise((V,Y)=>{let ne=!1;N.then(W=>{ne||(ne=!0,JC(T,W),V(W),H())},W=>{ne||(ne=!0,ZC(T,W),Y(W),H())}),L=W=>{ne||(ne=!0,W.then(j=>JC(T,j),j=>ZC(T,j)),V(W))}});return T.orig=N,T.status="pending",lB(T,V=>{V&&L(V),M==null||M()}),l(C,T,R)}return l(C,N,R)},u=(C,N,R)=>{const M=s(C),L={d:(M==null?void 0:M.d)||new Map,e:N};return R&&a(C,L,R),QC(M,L)&&M.d===L.d?M:(o(C,L),L)},d=(C,N)=>{const R=s(C);if(!N&&R&&(e.has(C)||Array.from(R.d).every(([ne,W])=>{if(ne===C)return!0;const j=d(ne);return j===W||Ju(j,W)})))return R;const M=new Map;let L=!0;const H=ne=>{if(ne===C){const j=s(ne);if(j)return M.set(ne,j),Zh(j);if(q0(ne))return M.set(ne,void 0),ne.init;throw new Error("no atom init")}const W=d(ne);return M.set(ne,W),Zh(W)};let T,V;const Y={get signal(){return T||(T=new AbortController),T.signal},get setSelf(){return(tn?"production":void 0)!=="production"&&!Y0(C)&&console.warn("setSelf function cannot be used with read-only atom"),!V&&Y0(C)&&(V=(...ne)=>{if((tn?"production":void 0)!=="production"&&L&&console.warn("setSelf function cannot be called in sync"),!L)return y(C,...ne)}),V}};try{const ne=C.read(H,Y);return c(C,ne,M,()=>T==null?void 0:T.abort())}catch(ne){return u(C,ne,M)}finally{L=!1}},f=C=>Zh(d(C)),h=C=>{let N=e.get(C);return N||(N=x(C)),N},p=(C,N)=>!N.l.size&&(!N.t.size||N.t.size===1&&N.t.has(C)),m=C=>{const N=e.get(C);N&&p(C,N)&&k(C)},w=C=>{const N=new Map,R=new WeakMap,M=T=>{var V;const Y=new Set((V=e.get(T))==null?void 0:V.t);return n.forEach((ne,W)=>{var j;(j=s(W))!=null&&j.d.has(T)&&Y.add(W)}),Y},L=T=>{M(T).forEach(V=>{V!==T&&(N.set(V,(N.get(V)||new Set).add(T)),R.set(V,(R.get(V)||0)+1),L(V))})};L(C);const H=T=>{M(T).forEach(V=>{var Y;if(V!==T){let ne=R.get(V);if(ne&&R.set(V,--ne),!ne){let W=!!((Y=N.get(V))!=null&&Y.size);if(W){const j=s(V),Q=d(V,!0);W=!Ju(j,Q)}W||N.forEach(j=>j.delete(V))}H(V)}})};H(C)},v=(C,...N)=>{let R=!0;const M=T=>Zh(d(T)),L=(T,...V)=>{let Y;if(T===C){if(!q0(T))throw new Error("atom not writable");const ne=s(T),W=c(T,V[0]);Ju(ne,W)||w(T)}else Y=v(T,...V);if(!R){const ne=P();(tn?"production":void 0)!=="production"&&i.forEach(W=>W({type:"async-write",flushed:ne}))}return Y},H=C.write(M,L,...N);return R=!1,H},y=(C,...N)=>{const R=v(C,...N),M=P();return(tn?"production":void 0)!=="production"&&i.forEach(L=>L({type:"write",flushed:M})),R},x=(C,N,R)=>{var M;const L=R||[];(M=s(C))==null||M.d.forEach((T,V)=>{const Y=e.get(V);Y?Y.t.add(C):V!==C&&x(V,C,L)}),d(C);const H={t:new Set(N&&[N]),l:new Set};if(e.set(C,H),(tn?"production":void 0)!=="production"&&r.add(C),Y0(C)&&C.onMount){const{onMount:T}=C;L.push(()=>{const V=T((...Y)=>y(C,...Y));V&&(H.u=V)})}return R||L.forEach(T=>T()),H},k=C=>{var N;const R=(N=e.get(C))==null?void 0:N.u;R&&R(),e.delete(C),(tn?"production":void 0)!=="production"&&r.delete(C);const M=s(C);M?(ql(M)&&YC(M.v),M.d.forEach((L,H)=>{if(H!==C){const T=e.get(H);T&&(T.t.delete(C),p(H,T)&&k(H))}})):(tn?"production":void 0)!=="production"&&console.warn("[Bug] could not find atom state to unmount",C)},_=(C,N,R)=>{const M=new Set(N.d.keys());R==null||R.forEach((L,H)=>{if(M.has(H)){M.delete(H);return}const T=e.get(H);T&&(T.t.delete(C),p(H,T)&&k(H))}),M.forEach(L=>{const H=e.get(L);H?H.t.add(C):e.has(C)&&x(L,C)})},P=()=>{let C;for((tn?"production":void 0)!=="production"&&(C=new Set);n.size;){const N=Array.from(n);n.clear(),N.forEach(([R,M])=>{const L=s(R);if(L){const H=e.get(R);H&&L.d!==(M==null?void 0:M.d)&&_(R,L,M==null?void 0:M.d),H&&!(!ql(M)&&(Ju(M,L)||QC(M,L)))&&(H.l.forEach(T=>T()),(tn?"production":void 0)!=="production"&&C.add(R))}else(tn?"production":void 0)!=="production"&&console.warn("[Bug] no atom state to flush")})}if((tn?"production":void 0)!=="production")return C},A=(C,N)=>{const R=h(C),M=P(),L=R.l;return L.add(N),(tn?"production":void 0)!=="production"&&i.forEach(H=>H({type:"sub",flushed:M})),()=>{L.delete(N),m(C),(tn?"production":void 0)!=="production"&&i.forEach(H=>H({type:"unsub"}))}};return(tn?"production":void 0)!=="production"?{get:f,set:y,sub:A,dev_subscribe_store:(C,N)=>{if(N!==2)throw new Error("The current StoreListener revision is 2.");return i.add(C),()=>{i.delete(C)}},dev_get_mounted_atoms:()=>r.values(),dev_get_atom_state:C=>t.get(C),dev_get_mounted:C=>e.get(C),dev_restore_atoms:C=>{for(const[R,M]of C)q0(R)&&(c(R,M),w(R));const N=P();i.forEach(R=>R({type:"restore",flushed:N}))}}:{get:f,set:y,sub:A}};let J0;(tn?"production":void 0)!=="production"&&(typeof globalThis.__NUMBER_OF_JOTAI_INSTANCES__=="number"?++globalThis.__NUMBER_OF_JOTAI_INSTANCES__:globalThis.__NUMBER_OF_JOTAI_INSTANCES__=1);const dB=()=>(J0||((tn?"production":void 0)!=="production"&&globalThis.__NUMBER_OF_JOTAI_INSTANCES__!==1&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"),J0=Qx()),J0);var fB={BASE_URL:"/VonSim8/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const $O=g.createContext(void 0),TO=t=>{const e=g.useContext($O);return(t==null?void 0:t.store)||e||dB()},hB=({children:t,store:e})=>{const n=g.useRef();return!e&&!n.current&&(n.current=Qx()),g.createElement($O.Provider,{value:e||n.current},t)},pB=t=>typeof(t==null?void 0:t.then)=="function",mB=Wt.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t)});function Vt(t,e){const n=TO(e),[[i,r,s],o]=g.useReducer(c=>{const u=n.get(t);return Object.is(c[0],u)&&c[1]===n&&c[2]===t?c:[u,n,t]},void 0,()=>[n.get(t),n,t]);let a=i;(r!==n||s!==t)&&(o(),a=n.get(t));const l=e==null?void 0:e.delay;return g.useEffect(()=>{const c=n.sub(t,()=>{if(typeof l=="number"){setTimeout(o,l);return}o()});return o(),c},[n,t,l]),g.useDebugValue(a),pB(a)?mB(a):a}function OO(t,e){const n=TO(e);return g.useCallback((...r)=>{if((fB?"production":void 0)!=="production"&&!("write"in t))throw new Error("not writable atom");return n.set(t,...r)},[n,t])}function Tu(t,e){return[Vt(t,e),OO(t,e)]}const{createElement:uu,createContext:gB,createRef:vne,forwardRef:NO,useCallback:Oi,useContext:RO,useEffect:gl,useImperativeHandle:MO,useLayoutEffect:vB,useMemo:yB,useRef:Li,useState:ag}=X1,eE=X1.useId,Sv=gB(null);Sv.displayName="PanelGroupContext";const mf=vB,wB=typeof eE=="function"?eE:()=>null;let bB=0;function eS(t=null){const e=wB(),n=Li(t||e||null);return n.current===null&&(n.current=""+bB++),t??n.current}function DO({children:t,className:e="",collapsedSize:n,collapsible:i,defaultSize:r,forwardedRef:s,id:o,maxSize:a,minSize:l,onCollapse:c,onExpand:u,onResize:d,order:f,style:h,tagName:p="div",...m}){const w=RO(Sv);if(w===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:v,expandPanel:y,getPanelSize:x,getPanelStyle:k,groupId:_,isPanelCollapsed:P,registerPanel:A,resizePanel:C,unregisterPanel:N}=w,R=eS(o),M=Li({callbacks:{onCollapse:c,onExpand:u,onResize:d},constraints:{collapsedSize:n,collapsible:i,defaultSize:r,maxSize:a,minSize:l},id:R,idIsFromProps:o!==void 0,order:f});Li({didLogMissingDefaultSizeWarning:!1}),mf(()=>{const{callbacks:H,constraints:T}=M.current;M.current.id=R,M.current.idIsFromProps=o!==void 0,M.current.order=f,H.onCollapse=c,H.onExpand=u,H.onResize=d,T.collapsedSize=n,T.collapsible=i,T.defaultSize=r,T.maxSize=a,T.minSize=l}),mf(()=>{const H=M.current;return A(H),()=>{N(H)}},[f,R,A,N]),MO(s,()=>({collapse:()=>{v(M.current)},expand:()=>{y(M.current)},getId(){return R},getSize(){return x(M.current)},isCollapsed(){return P(M.current)},isExpanded(){return!P(M.current)},resize:H=>{C(M.current,H)}}),[v,y,x,P,R,C]);const L=k(M.current,r);return uu(p,{...m,children:t,className:e,style:{...L,...h},"data-panel":"","data-panel-id":R,"data-panel-group-id":_,"data-panel-collapsible":void 0,"data-panel-size":void 0})}const sm=NO((t,e)=>uu(DO,{...t,forwardedRef:e}));DO.displayName="Panel";sm.displayName="forwardRef(Panel)";function Ue(t,e="Assertion failed!"){if(!t)throw console.error(e),Error(e)}const IO=10;function gf(t,e,n=IO){t=parseFloat(t.toFixed(n)),e=parseFloat(e.toFixed(n));const i=t-e;return i===0?0:i>0?1:-1}function Mi(t,e,n){return gf(t,e,n)===0}function Ec({panelConstraints:t,panelIndex:e,size:n}){const i=t[e];Ue(i!=null);let{collapsedSize:r=0,collapsible:s,maxSize:o=100,minSize:a=0}=i;if(gf(n,a)<0)if(s){const l=(r+a)/2;gf(n,l)<0?n=r:n=a}else n=a;return n=Math.min(o,n),n=parseFloat(n.toFixed(IO)),n}function wd({delta:t,layout:e,panelConstraints:n,pivotIndices:i,trigger:r}){if(Mi(t,0))return e;const s=[...e],[o,a]=i;Ue(o!=null),Ue(a!=null);let l=0;if(r==="keyboard"){{const u=t<0?a:o,d=n[u];if(Ue(d),d.collapsible){const f=e[u];Ue(f!=null);const h=n[u];Ue(h);const{collapsedSize:p=0,minSize:m=0}=h;if(Mi(f,p)){const w=m-f;gf(w,Math.abs(t))>0&&(t=t<0?0-w:w)}}}{const u=t<0?o:a,d=n[u];Ue(d);const{collapsible:f}=d;if(f){const h=e[u];Ue(h!=null);const p=n[u];Ue(p);const{collapsedSize:m=0,minSize:w=0}=p;if(Mi(h,w)){const v=h-m;gf(v,Math.abs(t))>0&&(t=t<0?0-v:v)}}}}{const u=t<0?1:-1;let d=t<0?a:o,f=0;for(;;){const p=e[d];Ue(p!=null);const w=Ec({panelConstraints:n,panelIndex:d,size:100})-p;if(f+=w,d+=u,d<0||d>=n.length)break}const h=Math.min(Math.abs(t),Math.abs(f));t=t<0?0-h:h}{let d=t<0?o:a;for(;d>=0&&d<n.length;){const f=Math.abs(t)-Math.abs(l),h=e[d];Ue(h!=null);const p=h-f,m=Ec({panelConstraints:n,panelIndex:d,size:p});if(!Mi(h,m)&&(l+=h-m,s[d]=m,l.toPrecision(3).localeCompare(Math.abs(t).toPrecision(3),void 0,{numeric:!0})>=0))break;t<0?d--:d++}}if(Mi(l,0))return e;{const u=t<0?a:o,d=e[u];Ue(d!=null);const f=d+l,h=Ec({panelConstraints:n,panelIndex:u,size:f});if(s[u]=h,!Mi(h,f)){let p=f-h,w=t<0?a:o;for(;w>=0&&w<n.length;){const v=s[w];Ue(v!=null);const y=v+p,x=Ec({panelConstraints:n,panelIndex:w,size:y});if(Mi(v,x)||(p-=x-v,s[w]=x),Mi(p,0))break;t>0?w--:w++}}}const c=s.reduce((u,d)=>d+u,0);return Mi(c,100)?s:e}function xB({layout:t,panelsArray:e,pivotIndices:n}){let i=0,r=100,s=0,o=0;const a=n[0];Ue(a!=null),e.forEach((d,f)=>{const{constraints:h}=d,{maxSize:p=100,minSize:m=0}=h;f===a?(i=m,r=p):(s+=m,o+=p)});const l=Math.min(r,100-s),c=Math.max(i,100-o),u=t[a];return{valueMax:l,valueMin:c,valueNow:u}}function vf(t,e){return Array.from(e.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${t}"]`))}function LO(t,e,n){const r=vf(t,n).findIndex(s=>s.getAttribute("data-panel-resize-handle-id")===e);return r??null}function BO(t,e,n){const i=LO(t,e,n);return i!=null?[i,i+1]:[-1,-1]}function jO(t,e){var n;if(e instanceof HTMLElement&&(e==null||(n=e.dataset)===null||n===void 0?void 0:n.panelGroupId)==t)return e;const i=e.querySelector(`[data-panel-group][data-panel-group-id="${t}"]`);return i||null}function kv(t,e){const n=e.querySelector(`[data-panel-resize-handle-id="${t}"]`);return n||null}function SB(t,e,n,i){var r,s,o,a;const l=kv(e,i),c=vf(t,i),u=l?c.indexOf(l):-1,d=(r=(s=n[u])===null||s===void 0?void 0:s.id)!==null&&r!==void 0?r:null,f=(o=(a=n[u+1])===null||a===void 0?void 0:a.id)!==null&&o!==void 0?o:null;return[d,f]}function kB({committedValuesRef:t,eagerValuesRef:e,groupId:n,layout:i,panelDataArray:r,panelGroupElement:s,setLayout:o}){Li({didWarnAboutMissingResizeHandle:!1}),mf(()=>{if(!s)return;const a=vf(n,s);for(let l=0;l<r.length-1;l++){const{valueMax:c,valueMin:u,valueNow:d}=xB({layout:i,panelsArray:r,pivotIndices:[l,l+1]}),f=a[l];if(f!=null){const h=r[l];Ue(h),f.setAttribute("aria-controls",h.id),f.setAttribute("aria-valuemax",""+Math.round(c)),f.setAttribute("aria-valuemin",""+Math.round(u)),f.setAttribute("aria-valuenow",d!=null?""+Math.round(d):"")}}return()=>{a.forEach((l,c)=>{l.removeAttribute("aria-controls"),l.removeAttribute("aria-valuemax"),l.removeAttribute("aria-valuemin"),l.removeAttribute("aria-valuenow")})}},[n,i,r,s]),gl(()=>{if(!s)return;const a=e.current;Ue(a);const{panelDataArray:l}=a,c=jO(n,s);Ue(c!=null,`No group found for id "${n}"`);const u=vf(n,s);Ue(u);const d=u.map(f=>{const h=f.getAttribute("data-panel-resize-handle-id");Ue(h);const[p,m]=SB(n,h,l,s);if(p==null||m==null)return()=>{};const w=v=>{if(!v.defaultPrevented)switch(v.key){case"Enter":{v.preventDefault();const y=l.findIndex(x=>x.id===p);if(y>=0){const x=l[y];Ue(x);const k=i[y],{collapsedSize:_=0,collapsible:P,minSize:A=0}=x.constraints;if(k!=null&&P){const C=wd({delta:Mi(k,_)?A-_:_-k,layout:i,panelConstraints:l.map(N=>N.constraints),pivotIndices:BO(n,h,s),trigger:"keyboard"});i!==C&&o(C)}}break}}};return f.addEventListener("keydown",w),()=>{f.removeEventListener("keydown",w)}});return()=>{d.forEach(f=>f())}},[s,t,e,n,i,r,o])}function tE(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function FO(t){return t.type==="keydown"}function zO(t){return t.type.startsWith("mouse")}function UO(t){return t.type.startsWith("touch")}function VO(t,e){const n=t==="horizontal";if(zO(e))return n?e.clientX:e.clientY;if(UO(e)){const i=e.touches[0];return Ue(i),n?i.screenX:i.screenY}else throw Error(`Unsupported event type "${e.type}"`)}function _B(t,e,n,i,r){const s=n==="horizontal",o=kv(e,r);Ue(o);const a=o.getAttribute("data-panel-group-id");Ue(a);let{initialCursorPosition:l}=i;const c=VO(n,t),u=jO(a,r);Ue(u);const d=u.getBoundingClientRect(),f=s?d.width:d.height;return(c-l)/f*100}function CB(t,e,n,i,r,s){if(FO(t)){const o=n==="horizontal";let a=0;t.shiftKey?a=100:r!=null?a=r:a=10;let l=0;switch(t.key){case"ArrowDown":l=o?0:a;break;case"ArrowLeft":l=o?-a:0;break;case"ArrowRight":l=o?a:0;break;case"ArrowUp":l=o?0:-a;break;case"End":l=100;break;case"Home":l=-100;break}return l}else return i==null?0:_B(t,e,n,i,s)}function EB({panelDataArray:t}){const e=Array(t.length),n=t.map(s=>s.constraints);let i=0,r=100;for(let s=0;s<t.length;s++){const o=n[s];Ue(o);const{defaultSize:a}=o;a!=null&&(i++,e[s]=a,r-=a)}for(let s=0;s<t.length;s++){const o=n[s];Ue(o);const{defaultSize:a}=o;if(a!=null)continue;const l=t.length-i,c=r/l;i++,e[s]=c,r-=c}return e}function Yl(t,e,n){e.forEach((i,r)=>{const s=t[r];Ue(s);const{callbacks:o,constraints:a,id:l}=s,{collapsedSize:c=0,collapsible:u}=a,d=n[l];if(d==null||i!==d){n[l]=i;const{onCollapse:f,onExpand:h,onResize:p}=o;p&&p(i,d),u&&(f||h)&&(h&&(d==null||d===c)&&i!==c&&h(),f&&(d==null||d!==c)&&i===c&&f())}})}function Qh(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n])return!1;return!0}function AB({defaultSize:t,dragState:e,layout:n,panelData:i,panelIndex:r,precision:s=3}){const o=n[r];let a;return o==null?a=t??"1":i.length===1?a="1":a=o.toPrecision(s),{flexBasis:0,flexGrow:a,flexShrink:1,overflow:"hidden",pointerEvents:e!==null?"none":void 0}}let bb=null,cl=null;function HO(t){switch(t){case"horizontal":return"ew-resize";case"horizontal-max":return"w-resize";case"horizontal-min":return"e-resize";case"vertical":return"ns-resize";case"vertical-max":return"n-resize";case"vertical-min":return"s-resize"}}function PB(){cl!==null&&(document.head.removeChild(cl),bb=null,cl=null)}function Z0(t){if(bb===t)return;bb=t;const e=HO(t);cl===null&&(cl=document.createElement("style"),document.head.appendChild(cl)),cl.innerHTML=`*{cursor: ${e}!important;}`}function $B(t,e=10){let n=null;return(...r)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{t(...r)},e)}}function nE(t){try{if(typeof localStorage<"u")t.getItem=e=>localStorage.getItem(e),t.setItem=(e,n)=>{localStorage.setItem(e,n)};else throw new Error("localStorage not supported in this environment")}catch(e){console.error(e),t.getItem=()=>null,t.setItem=()=>{}}}function WO(t){return`react-resizable-panels:${t}`}function GO(t){return t.map(e=>{const{constraints:n,id:i,idIsFromProps:r,order:s}=e;return r?i:s?`${s}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((e,n)=>e.localeCompare(n)).join(",")}function KO(t,e){try{const n=WO(t),i=e.getItem(n);if(i){const r=JSON.parse(i);if(typeof r=="object"&&r!=null)return r}}catch{}return null}function TB(t,e,n){var i,r;const s=(i=KO(t,n))!==null&&i!==void 0?i:{},o=GO(e);return(r=s[o])!==null&&r!==void 0?r:null}function OB(t,e,n,i,r){var s;const o=WO(t),a=GO(e),l=(s=KO(t,r))!==null&&s!==void 0?s:{};l[a]={expandToSizes:Object.fromEntries(n.entries()),layout:i};try{r.setItem(o,JSON.stringify(l))}catch(c){console.error(c)}}function iE({layout:t,panelConstraints:e}){const n=[...t],i=n.reduce((s,o)=>s+o,0);if(n.length!==e.length)throw Error(`Invalid ${e.length} panel layout: ${n.map(s=>`${s}%`).join(", ")}`);if(!Mi(i,100))for(let s=0;s<e.length;s++){const o=n[s];Ue(o!=null);const a=100/i*o;n[s]=a}let r=0;for(let s=0;s<e.length;s++){const o=n[s];Ue(o!=null);const a=Ec({panelConstraints:e,panelIndex:s,size:o});o!=a&&(r+=o-a,n[s]=a)}if(!Mi(r,0))for(let s=0;s<e.length;s++){const o=n[s];Ue(o!=null);const a=o+r,l=Ec({panelConstraints:e,panelIndex:s,size:a});if(o!==l&&(r-=l-o,n[s]=l,Mi(r,0)))break}return n}const NB=100,bd={getItem:t=>(nE(bd),bd.getItem(t)),setItem:(t,e)=>{nE(bd),bd.setItem(t,e)}},rE={};function XO({autoSaveId:t=null,children:e,className:n="",direction:i,forwardedRef:r,id:s=null,onLayout:o=null,keyboardResizeBy:a=null,storage:l=bd,style:c,tagName:u="div",...d}){const f=eS(s),h=Li(null),[p,m]=ag(null),[w,v]=ag([]),y=Li({}),x=Li(new Map),k=Li(0),_=Li({autoSaveId:t,direction:i,dragState:p,id:f,keyboardResizeBy:a,onLayout:o,storage:l}),P=Li({layout:w,panelDataArray:[],panelDataArrayChanged:!1});Li({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),MO(r,()=>({getId:()=>_.current.id,getLayout:()=>{const{layout:K}=P.current;return K},setLayout:K=>{const{onLayout:ee}=_.current,{layout:le,panelDataArray:B}=P.current,I=iE({layout:K,panelConstraints:B.map(z=>z.constraints)});tE(le,I)||(v(I),P.current.layout=I,ee&&ee(I),Yl(B,I,y.current))}}),[]),mf(()=>{_.current.autoSaveId=t,_.current.direction=i,_.current.dragState=p,_.current.id=f,_.current.onLayout=o,_.current.storage=l}),kB({committedValuesRef:_,eagerValuesRef:P,groupId:f,layout:w,panelDataArray:P.current.panelDataArray,setLayout:v,panelGroupElement:h.current}),gl(()=>{const{panelDataArray:K}=P.current;if(t){if(w.length===0||w.length!==K.length)return;let ee=rE[t];ee==null&&(ee=$B(OB,NB),rE[t]=ee);const le=[...K],B=new Map(x.current);ee(t,le,B,w,l)}},[t,w,l]),gl(()=>{});const A=Oi(K=>{const{onLayout:ee}=_.current,{layout:le,panelDataArray:B}=P.current;if(K.constraints.collapsible){const I=B.map(D=>D.constraints),{collapsedSize:z=0,panelSize:S,pivotIndices:$}=Jl(B,K,le);if(Ue(S!=null),S!==z){x.current.set(K.id,S);const O=sc(B,K)===B.length-1?S-z:z-S,U=wd({delta:O,layout:le,panelConstraints:I,pivotIndices:$,trigger:"imperative-api"});Qh(le,U)||(v(U),P.current.layout=U,ee&&ee(U),Yl(B,U,y.current))}}},[]),C=Oi(K=>{const{onLayout:ee}=_.current,{layout:le,panelDataArray:B}=P.current;if(K.constraints.collapsible){const I=B.map(O=>O.constraints),{collapsedSize:z=0,panelSize:S,minSize:$=0,pivotIndices:D}=Jl(B,K,le);if(S===z){const O=x.current.get(K.id),U=O!=null&&O>=$?O:$,te=sc(B,K)===B.length-1?S-U:U-S,J=wd({delta:te,layout:le,panelConstraints:I,pivotIndices:D,trigger:"imperative-api"});Qh(le,J)||(v(J),P.current.layout=J,ee&&ee(J),Yl(B,J,y.current))}}},[]),N=Oi(K=>{const{layout:ee,panelDataArray:le}=P.current,{panelSize:B}=Jl(le,K,ee);return Ue(B!=null),B},[]),R=Oi((K,ee)=>{const{panelDataArray:le}=P.current,B=sc(le,K);return AB({defaultSize:ee,dragState:p,layout:w,panelData:le,panelIndex:B})},[p,w]),M=Oi(K=>{const{layout:ee,panelDataArray:le}=P.current,{collapsedSize:B=0,collapsible:I,panelSize:z}=Jl(le,K,ee);return I===!0&&z===B},[]),L=Oi(K=>{const{layout:ee,panelDataArray:le}=P.current,{collapsedSize:B=0,collapsible:I,panelSize:z}=Jl(le,K,ee);return Ue(z!=null),!I||z>B},[]),H=Oi(K=>{const{panelDataArray:ee}=P.current;ee.push(K),ee.sort((le,B)=>{const I=le.order,z=B.order;return I==null&&z==null?0:I==null?-1:z==null?1:I-z}),P.current.panelDataArrayChanged=!0},[]);mf(()=>{if(P.current.panelDataArrayChanged){P.current.panelDataArrayChanged=!1;const{autoSaveId:K,onLayout:ee,storage:le}=_.current,{layout:B,panelDataArray:I}=P.current;let z=null;if(K){const $=TB(K,I,le);$&&(x.current=new Map(Object.entries($.expandToSizes)),z=$.layout)}z==null&&(z=EB({panelDataArray:I}));const S=iE({layout:z,panelConstraints:I.map($=>$.constraints)});tE(B,S)||(v(S),P.current.layout=S,ee&&ee(S),Yl(I,S,y.current))}});const T=Oi(K=>function(le){le.preventDefault();const B=h.current;if(!B)return()=>null;const{direction:I,dragState:z,id:S,keyboardResizeBy:$,onLayout:D}=_.current,{layout:O,panelDataArray:U}=P.current,{initialLayout:X}=z??{},te=BO(S,K,B);let J=CB(le,K,I,z,$,B);if(J===0)return;const se=I==="horizontal";document.dir==="rtl"&&se&&(J=-J);const Me=U.map(ze=>ze.constraints),pe=wd({delta:J,layout:X??O,panelConstraints:Me,pivotIndices:te,trigger:FO(le)?"keyboard":"mouse-or-touch"}),Le=!Qh(O,pe);(zO(le)||UO(le))&&k.current!=J&&(k.current=J,Z0(Le?se?"horizontal":"vertical":se?J<0?"horizontal-min":"horizontal-max":J<0?"vertical-min":"vertical-max")),Le&&(v(pe),P.current.layout=pe,D&&D(pe),Yl(U,pe,y.current))},[]),V=Oi((K,ee)=>{const{onLayout:le}=_.current,{layout:B,panelDataArray:I}=P.current,z=I.map(X=>X.constraints),{panelSize:S,pivotIndices:$}=Jl(I,K,B);Ue(S!=null);const O=sc(I,K)===I.length-1?S-ee:ee-S,U=wd({delta:O,layout:B,panelConstraints:z,pivotIndices:$,trigger:"imperative-api"});Qh(B,U)||(v(U),P.current.layout=U,le&&le(U),Yl(I,U,y.current))},[]),Y=Oi((K,ee)=>{const{direction:le}=_.current,{layout:B}=P.current;if(!h.current)return;const I=kv(K,h.current);Ue(I);const z=VO(le,ee);m({dragHandleId:K,dragHandleRect:I.getBoundingClientRect(),initialCursorPosition:z,initialLayout:B})},[]),ne=Oi(()=>{PB(),m(null)},[]),W=Oi(K=>{const{panelDataArray:ee}=P.current,le=sc(ee,K);le>=0&&(ee.splice(le,1),delete y.current[K.id],P.current.panelDataArrayChanged=!0)},[]),j=yB(()=>({collapsePanel:A,direction:i,dragState:p,expandPanel:C,getPanelSize:N,getPanelStyle:R,groupId:f,isPanelCollapsed:M,isPanelExpanded:L,registerPanel:H,registerResizeHandle:T,resizePanel:V,startDragging:Y,stopDragging:ne,unregisterPanel:W,panelGroupElement:h.current}),[A,p,i,C,N,R,f,M,L,H,T,V,Y,ne,W]),Q={display:"flex",flexDirection:i==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return uu(Sv.Provider,{value:j},uu(u,{...d,children:e,className:n,style:{...Q,...c},ref:h,"data-panel-group":"","data-panel-group-direction":i,"data-panel-group-id":f}))}const qO=NO((t,e)=>uu(XO,{...t,forwardedRef:e}));XO.displayName="PanelGroup";qO.displayName="forwardRef(PanelGroup)";function sc(t,e){return t.findIndex(n=>n===e||n.id===e.id)}function Jl(t,e,n){const i=t.map(c=>c.constraints),r=sc(t,e),s=i[r],a=r===t.length-1?[r-1,r]:[r,r+1],l=n[r];return{...s,panelSize:l,pivotIndices:a}}function RB({disabled:t,handleId:e,resizeHandler:n,panelGroupElement:i}){gl(()=>{if(t||n==null||i==null)return;const r=kv(e,i);if(r==null)return;const s=o=>{if(!o.defaultPrevented)switch(o.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{o.preventDefault(),n(o);break}case"F6":{o.preventDefault();const a=r.getAttribute("data-panel-group-id");Ue(a);const l=vf(a,i),c=LO(a,e,i);Ue(c!==null);const u=o.shiftKey?c>0?c-1:l.length-1:c+1<l.length?c+1:0;l[u].focus();break}}};return r.addEventListener("keydown",s),()=>{r.removeEventListener("keydown",s)}},[i,t,e,n])}function xb({children:t=null,className:e="",disabled:n=!1,id:i,onDragging:r,style:s={},tabIndex:o=0,tagName:a="div",...l}){const c=Li(null),u=Li({onDragging:r});gl(()=>{u.current.onDragging=r});const d=RO(Sv);if(d===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:f,dragState:h,groupId:p,registerResizeHandle:m,startDragging:w,stopDragging:v,panelGroupElement:y}=d,x=eS(i),k=(h==null?void 0:h.dragHandleId)===x,[_,P]=ag(!1),[A,C]=ag(null),N=Oi(()=>{const M=c.current;Ue(M),M.blur(),v();const{onDragging:L}=u.current;L&&L(!1)},[v]);gl(()=>{if(n)C(null);else{const M=m(x);C(()=>M)}},[n,x,m]),gl(()=>{if(n||A==null||!k)return;const M=V=>{A(V)},L=V=>{A(V)},H=c.current;Ue(H);const T=H.ownerDocument;return T.body.addEventListener("contextmenu",N),T.body.addEventListener("mousemove",M),T.body.addEventListener("touchmove",M),T.body.addEventListener("mouseleave",L),window.addEventListener("mouseup",N),window.addEventListener("touchend",N),()=>{T.body.removeEventListener("contextmenu",N),T.body.removeEventListener("mousemove",M),T.body.removeEventListener("touchmove",M),T.body.removeEventListener("mouseleave",L),window.removeEventListener("mouseup",N),window.removeEventListener("touchend",N)}},[f,n,k,A,N]),RB({disabled:n,handleId:x,resizeHandler:A,panelGroupElement:y});const R={cursor:HO(f),touchAction:"none",userSelect:"none"};return uu(a,{...l,children:t,className:e,onBlur:()=>P(!1),onFocus:()=>P(!0),onMouseDown:M=>{w(x,M.nativeEvent);const L=u.current;Ue(L);const{onDragging:H}=L;H&&H(!0)},onMouseUp:N,onTouchCancel:N,onTouchEnd:N,onTouchStart:M=>{w(x,M.nativeEvent);const L=u.current;Ue(L);const{onDragging:H}=L;H&&H(!0)},ref:c,role:"separator",style:{...R,...s},tabIndex:o,"data-panel-group-direction":f,"data-panel-group-id":p,"data-resize-handle":"","data-resize-handle-active":k?"pointer":_?"keyboard":void 0,"data-panel-resize-handle-enabled":!n,"data-panel-resize-handle-id":x})}xb.displayName="PanelResizeHandle";var ys=function(){return ys=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ys.apply(this,arguments)};function YO(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function MB(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))}var DB=function(){};function IB(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.addEventListener&&t.addEventListener.apply(t,e)}function LB(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.removeEventListener&&t.removeEventListener.apply(t,e)}var JO=typeof window<"u",BB=JO?window:null,sE=function(t){return!!t.addEventListener},oE=function(t){return!!t.on},om=function(t,e,n,i){n===void 0&&(n=BB),g.useEffect(function(){if(e&&n)return sE(n)?IB(n,t,e,i):oE(n)&&n.on(t,e,i),function(){sE(n)?LB(n,t,e,i):oE(n)&&n.off(t,e,i)}},[t,e,n,JSON.stringify(i)])},jB=function(t){return typeof t=="function"?t:typeof t=="string"?function(e){return e.key===t}:t?function(){return!0}:function(){return!1}},io=function(t,e,n,i){e===void 0&&(e=DB),n===void 0&&(n={}),i===void 0&&(i=[t]);var r=n.event,s=r===void 0?"keydown":r,o=n.target,a=n.options,l=g.useMemo(function(){var c=jB(t),u=function(d){if(c(d))return e(d)};return u},i);om(s,l,o,a)},FB=function(t,e){return e!==void 0?e:JO?window.matchMedia(t).matches:!1},zB=function(t,e){var n=g.useState(FB(t,e)),i=n[0],r=n[1];return g.useEffect(function(){var s=!0,o=window.matchMedia(t),a=function(){s&&r(!!o.matches)};return o.addListener(a),r(o.matches),function(){s=!1,o.removeListener(a)}},[t]),i};const UB="modulepreload",VB=function(t){return"/VonSim8/"+t},aE={},HB=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){const s=document.getElementsByTagName("link");r=Promise.all(n.map(o=>{if(o=VB(o),o in aE)return;aE[o]=!0;const a=o.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(!!i)for(let d=s.length-1;d>=0;d--){const f=s[d];if(f.href===o&&(!a||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${l}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":UB,a||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),a)return new Promise((d,f)=>{u.addEventListener("load",d),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})}))}return r.then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};function WB(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:i,onRegistered:r,onRegisteredSW:s,onRegisterError:o}=t;let a,l,c;const u=async(f=!0)=>{await l,await(c==null?void 0:c())};async function d(){if("serviceWorker"in navigator){const{Workbox:f}=await HB(()=>import("./workbox-window.prod.es5-prqDwDSL.js"),__vite__mapDeps([]));a=new f("/VonSim8/sw.js",{scope:"/VonSim8/",type:"classic"}),c=async()=>{await(a==null?void 0:a.messageSkipWaiting())};{let h=!1;const p=()=>{h=!0,a==null||a.addEventListener("controlling",m=>{m.isUpdate&&window.location.reload()}),n==null||n()};a.addEventListener("installed",m=>{typeof m.isUpdate>"u"?typeof m.isExternal<"u"?m.isExternal?p():!h&&(i==null||i()):m.isExternal?window.location.reload():!h&&(i==null||i()):m.isUpdate||i==null||i()}),a.addEventListener("waiting",p),a.addEventListener("externalwaiting",p)}a.register({immediate:e}).then(h=>{s?s("/VonSim8/sw.js",h):r==null||r(h)}).catch(h=>{o==null||o(h)})}}return l=d(),u}function GB(t={}){const{immediate:e=!0,onNeedRefresh:n,onOfflineReady:i,onRegistered:r,onRegisteredSW:s,onRegisterError:o}=t,[a,l]=g.useState(!1),[c,u]=g.useState(!1),[d]=g.useState(()=>WB({immediate:e,onOfflineReady(){u(!0),i==null||i()},onNeedRefresh(){l(!0),n==null||n()},onRegistered:r,onRegisteredSW:s,onRegisterError:o}));return{needRefresh:[a,l],offlineReady:[c,u],updateServiceWorker:d}}class lt{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,i){[e,n]=du(this,e,n);let r=[];return this.decompose(0,e,r,2),i.length&&i.decompose(0,i.length,r,3),this.decompose(n,this.length,r,1),ws.from(r,this.length-(n-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=du(this,e,n);let i=[];return this.decompose(e,n,i,0),ws.from(i,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),r=new jd(this),s=new jd(e);for(let o=n,a=n;;){if(r.next(o),s.next(o),o=0,r.lineBreak!=s.lineBreak||r.done!=s.done||r.value!=s.value)return!1;if(a+=r.value.length,r.done||a>=i)return!0}}iter(e=1){return new jd(this,e)}iterRange(e,n=this.length){return new ZO(this,e,n)}iterLines(e,n){let i;if(e==null)i=this.iter();else{n==null&&(n=this.lines+1);let r=this.line(e).from;i=this.iterRange(r,Math.max(r,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new QO(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?lt.empty:e.length<=32?new Gt(e):ws.from(Gt.split(e,[]))}}class Gt extends lt{constructor(e,n=KB(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,i,r){for(let s=0;;s++){let o=this.text[s],a=r+o.length;if((n?i:a)>=e)return new XB(r,a,i,o);r=a+1,i++}}decompose(e,n,i,r){let s=e<=0&&n>=this.length?this:new Gt(lE(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(r&1){let o=i.pop(),a=am(s.text,o.text.slice(),0,s.length);if(a.length<=32)i.push(new Gt(a,o.length+s.length));else{let l=a.length>>1;i.push(new Gt(a.slice(0,l)),new Gt(a.slice(l)))}}else i.push(s)}replace(e,n,i){if(!(i instanceof Gt))return super.replace(e,n,i);[e,n]=du(this,e,n);let r=am(this.text,am(i.text,lE(this.text,0,e)),n),s=this.length+i.length-(n-e);return r.length<=32?new Gt(r,s):ws.from(Gt.split(r,[]),s)}sliceString(e,n=this.length,i=`
`){[e,n]=du(this,e,n);let r="";for(let s=0,o=0;s<=n&&o<this.text.length;o++){let a=this.text[o],l=s+a.length;s>e&&o&&(r+=i),e<l&&n>s&&(r+=a.slice(Math.max(0,e-s),n-s)),s=l+1}return r}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let i=[],r=-1;for(let s of e)i.push(s),r+=s.length+1,i.length==32&&(n.push(new Gt(i,r)),i=[],r=-1);return r>-1&&n.push(new Gt(i,r)),n}}class ws extends lt{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,n,i,r){for(let s=0;;s++){let o=this.children[s],a=r+o.length,l=i+o.lines-1;if((n?l:a)>=e)return o.lineInner(e,n,i,r);r=a+1,i=l+1}}decompose(e,n,i,r){for(let s=0,o=0;o<=n&&s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(e<=l&&n>=o){let c=r&((o<=e?1:0)|(l>=n?2:0));o>=e&&l<=n&&!c?i.push(a):a.decompose(e-o,n-o,i,c)}o=l+1}}replace(e,n,i){if([e,n]=du(this,e,n),i.lines<this.lines)for(let r=0,s=0;r<this.children.length;r++){let o=this.children[r],a=s+o.length;if(e>=s&&n<=a){let l=o.replace(e-s,n-s,i),c=this.lines-o.lines+l.lines;if(l.lines<c>>4&&l.lines>c>>6){let u=this.children.slice();return u[r]=l,new ws(u,this.length-(n-e)+i.length)}return super.replace(s,a,l)}s=a+1}return super.replace(e,n,i)}sliceString(e,n=this.length,i=`
`){[e,n]=du(this,e,n);let r="";for(let s=0,o=0;s<this.children.length&&o<=n;s++){let a=this.children[s],l=o+a.length;o>e&&s&&(r+=i),e<l&&n>o&&(r+=a.sliceString(e-o,n-o,i)),o=l+1}return r}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof ws))return 0;let i=0,[r,s,o,a]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=n,s+=n){if(r==o||s==a)return i;let l=this.children[r],c=e.children[s];if(l!=c)return i+l.scanIdentical(c,n);i+=l.length+1}}static from(e,n=e.reduce((i,r)=>i+r.length+1,-1)){let i=0;for(let h of e)i+=h.lines;if(i<32){let h=[];for(let p of e)p.flatten(h);return new Gt(h,n)}let r=Math.max(32,i>>5),s=r<<1,o=r>>1,a=[],l=0,c=-1,u=[];function d(h){let p;if(h.lines>s&&h instanceof ws)for(let m of h.children)d(m);else h.lines>o&&(l>o||!l)?(f(),a.push(h)):h instanceof Gt&&l&&(p=u[u.length-1])instanceof Gt&&h.lines+p.lines<=32?(l+=h.lines,c+=h.length+1,u[u.length-1]=new Gt(p.text.concat(h.text),p.length+1+h.length)):(l+h.lines>r&&f(),l+=h.lines,c+=h.length+1,u.push(h))}function f(){l!=0&&(a.push(u.length==1?u[0]:ws.from(u,c)),c=-1,l=u.length=0)}for(let h of e)d(h);return f(),a.length==1?a[0]:new ws(a,n)}}lt.empty=new Gt([""],0);function KB(t){let e=-1;for(let n of t)e+=n.length+1;return e}function am(t,e,n=0,i=1e9){for(let r=0,s=0,o=!0;s<t.length&&r<=i;s++){let a=t[s],l=r+a.length;l>=n&&(l>i&&(a=a.slice(0,i-r)),r<n&&(a=a.slice(n-r)),o?(e[e.length-1]+=a,o=!1):e.push(a)),r=l+1}return e}function lE(t,e,n){return am(t,[""],e,n)}class jd{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof Gt?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,r=this.nodes[i],s=this.offsets[i],o=s>>1,a=r instanceof Gt?r.text.length:r.children.length;if(o==(n>0?a:0)){if(i==0)return this.done=!0,this.value="",this;n>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[i]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof Gt){let l=r.text[o+(n<0?-1:0)];if(this.offsets[i]+=n,l.length>Math.max(0,e))return this.value=e==0?l:n>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=r.children[o+(n<0?-1:0)];e>l.length?(e-=l.length,this.offsets[i]+=n):(n<0&&this.offsets[i]--,this.nodes.push(l),this.offsets.push(n>0?1:(l instanceof Gt?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class ZO{constructor(e,n,i){this.value="",this.done=!1,this.cursor=new jd(e,n>i?-1:1),this.pos=n>i?e.length:0,this.from=Math.min(n,i),this.to=Math.max(n,i)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let i=n<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*n,this.value=r.length<=i?r:n<0?r.slice(r.length-i):r.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class QO{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:i,value:r}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(lt.prototype[Symbol.iterator]=function(){return this.iter()},jd.prototype[Symbol.iterator]=ZO.prototype[Symbol.iterator]=QO.prototype[Symbol.iterator]=function(){return this});class XB{constructor(e,n,i,r){this.from=e,this.to=n,this.number=i,this.text=r}get length(){return this.to-this.from}}function du(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}let Bc="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(t=>t?parseInt(t,36):1);for(let t=1;t<Bc.length;t++)Bc[t]+=Bc[t-1];function qB(t){for(let e=1;e<Bc.length;e+=2)if(Bc[e]>t)return Bc[e-1]<=t;return!1}function cE(t){return t>=127462&&t<=127487}const uE=8205;function Tn(t,e,n=!0,i=!0){return(n?eN:YB)(t,e,i)}function eN(t,e,n){if(e==t.length)return e;e&&tN(t.charCodeAt(e))&&nN(t.charCodeAt(e-1))&&e--;let i=qn(t,e);for(e+=Lr(i);e<t.length;){let r=qn(t,e);if(i==uE||r==uE||n&&qB(r))e+=Lr(r),i=r;else if(cE(r)){let s=0,o=e-2;for(;o>=0&&cE(qn(t,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function YB(t,e,n){for(;e>0;){let i=eN(t,e-2,n);if(i<e)return i;e--}return 0}function tN(t){return t>=56320&&t<57344}function nN(t){return t>=55296&&t<56320}function qn(t,e){let n=t.charCodeAt(e);if(!nN(n)||e+1==t.length)return n;let i=t.charCodeAt(e+1);return tN(i)?(n-55296<<10)+(i-56320)+65536:n}function tS(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function Lr(t){return t<65536?1:2}const Sb=/\r\n?|\n/;var wi=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(wi||(wi={}));class Ps{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n+1];e+=i<0?this.sections[n]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,i=0,r=0;n<this.sections.length;){let s=this.sections[n++],o=this.sections[n++];o<0?(e(i,r,s),r+=s):r+=o,i+=s}}iterChangedRanges(e,n=!1){kb(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];r<0?e.push(i,r):e.push(r,i)}return new Ps(e)}composeDesc(e){return this.empty?e:e.empty?this:iN(this,e)}mapDesc(e,n=!1){return e.empty?this:_b(this,e,n)}mapPos(e,n=-1,i=wi.Simple){let r=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],c=r+a;if(l<0){if(c>e)return s+(e-r);s+=a}else{if(i!=wi.Simple&&c>=e&&(i==wi.TrackDel&&r<e&&c>e||i==wi.TrackBefore&&r<e||i==wi.TrackAfter&&c>e))return null;if(c>e||c==e&&n<0&&!a)return e==r||n<0?s:s+l;s+=l}r=c}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return s}touchesRange(e,n=e){for(let i=0,r=0;i<this.sections.length&&r<=n;){let s=this.sections[i++],o=this.sections[i++],a=r+s;if(o>=0&&r<=n&&a>=e)return r<e&&a>n?"cover":!0;r=a}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];e+=(e?" ":"")+i+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Ps(e)}static create(e){return new Ps(e)}}class on extends Ps{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return kb(this,(n,i,r,s,o)=>e=e.replace(r,r+(i-n),o),!1),e}mapDesc(e,n=!1){return _b(this,e,n,!0)}invert(e){let n=this.sections.slice(),i=[];for(let r=0,s=0;r<n.length;r+=2){let o=n[r],a=n[r+1];if(a>=0){n[r]=a,n[r+1]=o;let l=r>>1;for(;i.length<l;)i.push(lt.empty);i.push(o?e.slice(s,s+o):lt.empty)}s+=o}return new on(n,i)}compose(e){return this.empty?e:e.empty?this:iN(this,e,!0)}map(e,n=!1){return e.empty?this:_b(this,e,n,!0)}iterChanges(e,n=!1){kb(this,e,n)}get desc(){return Ps.create(this.sections)}filter(e){let n=[],i=[],r=[],s=new yf(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&s.len==0;){if(s.done)break e;let u=Math.min(s.len,l-a);Fn(r,u,-1);let d=s.ins==-1?-1:s.off==0?s.ins:0;Fn(n,u,d),d>0&&Zo(i,n,s.text),s.forward(u),a+=u}let c=e[o++];for(;a<c;){if(s.done)break e;let u=Math.min(s.len,c-a);Fn(n,u,-1),Fn(r,u,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(u),a+=u}}return{changes:new on(n,i),filtered:Ps.create(r)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n],r=this.sections[n+1];r<0?e.push(i):r==0?e.push([i]):e.push([i].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,i){let r=[],s=[],o=0,a=null;function l(u=!1){if(!u&&!r.length)return;o<n&&Fn(r,n-o,-1);let d=new on(r,s);a=a?a.compose(d.map(a)):d,r=[],s=[],o=0}function c(u){if(Array.isArray(u))for(let d of u)c(d);else if(u instanceof on){if(u.length!=n)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${n})`);l(),a=a?a.compose(u.map(a)):u}else{let{from:d,to:f=d,insert:h}=u;if(d>f||d<0||f>n)throw new RangeError(`Invalid change range ${d} to ${f} (in doc of length ${n})`);let p=h?typeof h=="string"?lt.of(h.split(i||Sb)):h:lt.empty,m=p.length;if(d==f&&m==0)return;d<o&&l(),d>o&&Fn(r,d-o,-1),Fn(r,f-d,m),Zo(s,r,p),o=f}}return c(e),l(!a),a}static empty(e){return new on(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],i=[];for(let r=0;r<e.length;r++){let s=e[r];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;i.length<r;)i.push(lt.empty);i[r]=lt.of(s.slice(1)),n.push(s[0],i[r].length)}}}return new on(n,i)}static createSet(e,n){return new on(e,n)}}function Fn(t,e,n,i=!1){if(e==0&&n<=0)return;let r=t.length-2;r>=0&&n<=0&&n==t[r+1]?t[r]+=e:e==0&&t[r]==0?t[r+1]+=n:i?(t[r]+=e,t[r+1]+=n):t.push(e,n)}function Zo(t,e,n){if(n.length==0)return;let i=e.length-2>>1;if(i<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<i;)t.push(lt.empty);t.push(n)}}function kb(t,e,n){let i=t.inserted;for(let r=0,s=0,o=0;o<t.sections.length;){let a=t.sections[o++],l=t.sections[o++];if(l<0)r+=a,s+=a;else{let c=r,u=s,d=lt.empty;for(;c+=a,u+=l,l&&i&&(d=d.append(i[o-2>>1])),!(n||o==t.sections.length||t.sections[o+1]<0);)a=t.sections[o++],l=t.sections[o++];e(r,c,s,u,d),r=c,s=u}}}function _b(t,e,n,i=!1){let r=[],s=i?[]:null,o=new yf(t),a=new yf(e);for(let l=-1;;)if(o.ins==-1&&a.ins==-1){let c=Math.min(o.len,a.len);Fn(r,c,-1),o.forward(c),a.forward(c)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!n))){let c=a.len;for(Fn(r,a.ins,-1);c;){let u=Math.min(o.len,c);o.ins>=0&&l<o.i&&o.len<=u&&(Fn(r,0,o.ins),s&&Zo(s,r,o.text),l=o.i),o.forward(u),c-=u}a.next()}else if(o.ins>=0){let c=0,u=o.len;for(;u;)if(a.ins==-1){let d=Math.min(u,a.len);c+=d,u-=d,a.forward(d)}else if(a.ins==0&&a.len<u)u-=a.len,a.next();else break;Fn(r,c,l<o.i?o.ins:0),s&&l<o.i&&Zo(s,r,o.text),l=o.i,o.forward(o.len-u)}else{if(o.done&&a.done)return s?on.createSet(r,s):Ps.create(r);throw new Error("Mismatched change set lengths")}}function iN(t,e,n=!1){let i=[],r=n?[]:null,s=new yf(t),o=new yf(e);for(let a=!1;;){if(s.done&&o.done)return r?on.createSet(i,r):Ps.create(i);if(s.ins==0)Fn(i,s.len,0,a),s.next();else if(o.len==0&&!o.done)Fn(i,0,o.ins,a),r&&Zo(r,i,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(s.len2,o.len),c=i.length;if(s.ins==-1){let u=o.ins==-1?-1:o.off?0:o.ins;Fn(i,l,u,a),r&&u&&Zo(r,i,o.text)}else o.ins==-1?(Fn(i,s.off?0:s.len,l,a),r&&Zo(r,i,s.textBit(l))):(Fn(i,s.off?0:s.len,o.off?0:o.ins,a),r&&!o.off&&Zo(r,i,o.text));a=(s.ins>l||o.ins>=0&&o.len>l)&&(a||i.length>c),s.forward2(l),o.forward(l)}}}}class yf{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?lt.empty:e[n]}textBit(e){let{inserted:n}=this.set,i=this.i-2>>1;return i>=n.length&&!e?lt.empty:n[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class ul{constructor(e,n,i){this.from=e,this.to=n,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let i,r;return this.empty?i=r=e.mapPos(this.from,n):(i=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),i==this.from&&r==this.to?this:new ul(i,r,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return re.range(e,n);let i=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return re.range(this.anchor,i)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return re.range(e.anchor,e.head)}static create(e,n,i){return new ul(e,n,i)}}class re{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:re.create(this.ranges.map(i=>i.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new re([this.main],0)}addRange(e,n=!0){return re.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let i=this.ranges.slice();return i[n]=e,re.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new re(e.ranges.map(n=>ul.fromJSON(n)),e.main)}static single(e,n=e){return new re([re.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,r=0;r<e.length;r++){let s=e[r];if(s.empty?s.from<=i:s.from<i)return re.normalized(e.slice(),n);i=s.to}return new re(e,n)}static cursor(e,n=0,i,r){return ul.create(e,e,(n==0?0:n<0?8:16)|(i==null?7:Math.min(6,i))|(r??16777215)<<6)}static range(e,n,i,r){let s=(i??16777215)<<6|(r==null?7:Math.min(6,r));return n<e?ul.create(n,e,48|s):ul.create(e,n,(n>e?8:0)|s)}static normalized(e,n=0){let i=e[n];e.sort((r,s)=>r.from-s.from),n=e.indexOf(i);for(let r=1;r<e.length;r++){let s=e[r],o=e[r-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,l=Math.max(s.to,o.to);r<=n&&n--,e.splice(--r,2,s.anchor>s.head?re.range(l,a):re.range(a,l))}}return new re(e,n)}}function rN(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let nS=0;class Ae{constructor(e,n,i,r,s){this.combine=e,this.compareInput=n,this.compare=i,this.isStatic=r,this.id=nS++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new Ae(e.combine||(n=>n),e.compareInput||((n,i)=>n===i),e.compare||(e.combine?(n,i)=>n===i:iS),!!e.static,e.enables)}of(e){return new lm([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new lm(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new lm(e,this,2,n)}from(e,n){return n||(n=i=>i),this.compute([e],i=>n(i.field(e)))}}function iS(t,e){return t==e||t.length==e.length&&t.every((n,i)=>n===e[i])}class lm{constructor(e,n,i,r){this.dependencies=e,this.facet=n,this.type=i,this.value=r,this.id=nS++}dynamicSlot(e){var n;let i=this.value,r=this.facet.compareInput,s=this.id,o=e[s]>>1,a=this.type==2,l=!1,c=!1,u=[];for(let d of this.dependencies)d=="doc"?l=!0:d=="selection"?c=!0:((n=e[d.id])!==null&&n!==void 0?n:1)&1||u.push(e[d.id]);return{create(d){return d.values[o]=i(d),1},update(d,f){if(l&&f.docChanged||c&&(f.docChanged||f.selection)||Cb(d,u)){let h=i(d);if(a?!dE(h,d.values[o],r):!r(h,d.values[o]))return d.values[o]=h,1}return 0},reconfigure:(d,f)=>{let h,p=f.config.address[s];if(p!=null){let m=cg(f,p);if(this.dependencies.every(w=>w instanceof Ae?f.facet(w)===d.facet(w):w instanceof si?f.field(w,!1)==d.field(w,!1):!0)||(a?dE(h=i(d),m,r):r(h=i(d),m)))return d.values[o]=m,0}else h=i(d);return d.values[o]=h,1}}}}function dE(t,e,n){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!n(t[i],e[i]))return!1;return!0}function Cb(t,e){let n=!1;for(let i of e)Fd(t,i)&1&&(n=!0);return n}function JB(t,e,n){let i=n.map(l=>t[l.id]),r=n.map(l=>l.type),s=i.filter(l=>!(l&1)),o=t[e.id]>>1;function a(l){let c=[];for(let u=0;u<i.length;u++){let d=cg(l,i[u]);if(r[u]==2)for(let f of d)c.push(f);else c.push(d)}return e.combine(c)}return{create(l){for(let c of i)Fd(l,c);return l.values[o]=a(l),1},update(l,c){if(!Cb(l,s))return 0;let u=a(l);return e.compare(u,l.values[o])?0:(l.values[o]=u,1)},reconfigure(l,c){let u=Cb(l,i),d=c.config.facets[e.id],f=c.facet(e);if(d&&!u&&iS(n,d))return l.values[o]=f,0;let h=a(l);return e.compare(h,f)?(l.values[o]=f,0):(l.values[o]=h,1)}}}const fE=Ae.define({static:!0});class si{constructor(e,n,i,r,s){this.id=e,this.createF=n,this.updateF=i,this.compareF=r,this.spec=s,this.provides=void 0}static define(e){let n=new si(nS++,e.create,e.update,e.compare||((i,r)=>i===r),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(fE).find(i=>i.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:i=>(i.values[n]=this.create(i),1),update:(i,r)=>{let s=i.values[n],o=this.updateF(s,r);return this.compareF(s,o)?0:(i.values[n]=o,1)},reconfigure:(i,r)=>r.config.address[this.id]!=null?(i.values[n]=r.field(this),0):(i.values[n]=this.create(i),1)}}init(e){return[this,fE.of({field:this,create:e})]}get extension(){return this}}const Qa={lowest:4,low:3,default:2,high:1,highest:0};function Zu(t){return e=>new sN(e,t)}const dh={highest:Zu(Qa.highest),high:Zu(Qa.high),default:Zu(Qa.default),low:Zu(Qa.low),lowest:Zu(Qa.lowest)};class sN{constructor(e,n){this.inner=e,this.prec=n}}class fh{of(e){return new Eb(this,e)}reconfigure(e){return fh.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Eb{constructor(e,n){this.compartment=e,this.inner=n}}class lg{constructor(e,n,i,r,s,o){for(this.base=e,this.compartments=n,this.dynamicSlots=i,this.address=r,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,i){let r=[],s=Object.create(null),o=new Map;for(let f of ZB(e,n,o))f instanceof si?r.push(f):(s[f.facet.id]||(s[f.facet.id]=[])).push(f);let a=Object.create(null),l=[],c=[];for(let f of r)a[f.id]=c.length<<1,c.push(h=>f.slot(h));let u=i==null?void 0:i.config.facets;for(let f in s){let h=s[f],p=h[0].facet,m=u&&u[f]||[];if(h.every(w=>w.type==0))if(a[p.id]=l.length<<1|1,iS(m,h))l.push(i.facet(p));else{let w=p.combine(h.map(v=>v.value));l.push(i&&p.compare(w,i.facet(p))?i.facet(p):w)}else{for(let w of h)w.type==0?(a[w.id]=l.length<<1|1,l.push(w.value)):(a[w.id]=c.length<<1,c.push(v=>w.dynamicSlot(v)));a[p.id]=c.length<<1,c.push(w=>JB(w,p,h))}}let d=c.map(f=>f(a));return new lg(e,o,d,a,l,s)}}function ZB(t,e,n){let i=[[],[],[],[],[]],r=new Map;function s(o,a){let l=r.get(o);if(l!=null){if(l<=a)return;let c=i[l].indexOf(o);c>-1&&i[l].splice(c,1),o instanceof Eb&&n.delete(o.compartment)}if(r.set(o,a),Array.isArray(o))for(let c of o)s(c,a);else if(o instanceof Eb){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=e.get(o.compartment)||o.inner;n.set(o.compartment,c),s(c,a)}else if(o instanceof sN)s(o.inner,o.prec);else if(o instanceof si)i[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof lm)i[a].push(o),o.facet.extensions&&s(o.facet.extensions,Qa.default);else{let c=o.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(c,a)}}return s(t,Qa.default),i.reduce((o,a)=>o.concat(a))}function Fd(t,e){if(e&1)return 2;let n=e>>1,i=t.status[n];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;t.status[n]=4;let r=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|r}function cg(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const oN=Ae.define(),Ab=Ae.define({combine:t=>t.some(e=>e),static:!0}),aN=Ae.define({combine:t=>t.length?t[0]:void 0,static:!0}),lN=Ae.define(),cN=Ae.define(),uN=Ae.define(),dN=Ae.define({combine:t=>t.length?t[0]:!1});class So{constructor(e,n){this.type=e,this.value=n}static define(){return new QB}}class QB{of(e){return new So(this,e)}}class ej{constructor(e){this.map=e}of(e){return new Ke(this,e)}}class Ke{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new Ke(this.type,n)}is(e){return this.type==e}static define(e={}){return new ej(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let i=[];for(let r of e){let s=r.map(n);s&&i.push(s)}return i}}Ke.reconfigure=Ke.define();Ke.appendConfig=Ke.define();class un{constructor(e,n,i,r,s,o){this.startState=e,this.changes=n,this.selection=i,this.effects=r,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,i&&rN(i,n.newLength),s.some(a=>a.type==un.time)||(this.annotations=s.concat(un.time.of(Date.now())))}static create(e,n,i,r,s,o){return new un(e,n,i,r,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(un.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}un.time=So.define();un.userEvent=So.define();un.addToHistory=So.define();un.remote=So.define();function tj(t,e){let n=[];for(let i=0,r=0;;){let s,o;if(i<t.length&&(r==e.length||e[r]>=t[i]))s=t[i++],o=t[i++];else if(r<e.length)s=e[r++],o=e[r++];else return n;!n.length||n[n.length-1]<s?n.push(s,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function fN(t,e,n){var i;let r,s,o;return n?(r=e.changes,s=on.empty(e.changes.length),o=t.changes.compose(e.changes)):(r=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(r)),{changes:o,selection:e.selection?e.selection.map(s):(i=t.selection)===null||i===void 0?void 0:i.map(r),effects:Ke.mapEffects(t.effects,r).concat(Ke.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function Pb(t,e,n){let i=e.selection,r=jc(e.annotations);return e.userEvent&&(r=r.concat(un.userEvent.of(e.userEvent))),{changes:e.changes instanceof on?e.changes:on.of(e.changes||[],n,t.facet(aN)),selection:i&&(i instanceof re?i:re.single(i.anchor,i.head)),effects:jc(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function hN(t,e,n){let i=Pb(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let o=!!e[s].sequential;i=fN(i,Pb(t,e[s],o?i.changes.newLength:t.doc.length),o)}let r=un.create(t,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return ij(n?nj(r):r)}function nj(t){let e=t.startState,n=!0;for(let r of e.facet(lN)){let s=r(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:tj(n,s))}if(n!==!0){let r,s;if(n===!1)s=t.changes.invertedDesc,r=on.empty(e.doc.length);else{let o=t.changes.filter(n);r=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}t=un.create(e,r,t.selection&&t.selection.map(s),Ke.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let i=e.facet(cN);for(let r=i.length-1;r>=0;r--){let s=i[r](t);s instanceof un?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof un?t=s[0]:t=hN(e,jc(s),!1)}return t}function ij(t){let e=t.startState,n=e.facet(uN),i=t;for(let r=n.length-1;r>=0;r--){let s=n[r](t);s&&Object.keys(s).length&&(i=fN(i,Pb(e,s,t.changes.newLength),!0))}return i==t?t:un.create(e,t.changes,t.selection,i.effects,i.annotations,i.scrollIntoView)}const rj=[];function jc(t){return t==null?rj:Array.isArray(t)?t:[t]}var On=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(On||(On={}));const sj=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let $b;try{$b=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function oj(t){if($b)return $b.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||sj.test(n)))return!0}return!1}function aj(t){return e=>{if(!/\S/.test(e))return On.Space;if(oj(e))return On.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return On.Word;return On.Other}}class Ye{constructor(e,n,i,r,s,o){this.config=e,this.doc=n,this.selection=i,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)Fd(this,a<<1);this.computeSlot=null}field(e,n=!0){let i=this.config.address[e.id];if(i==null){if(n)throw new RangeError("Field is not present in this state");return}return Fd(this,i),cg(this,i)}update(...e){return hN(this,e,!0)}applyTransaction(e){let n=this.config,{base:i,compartments:r}=n;for(let a of e.effects)a.is(fh.reconfigure)?(n&&(r=new Map,n.compartments.forEach((l,c)=>r.set(c,l)),n=null),r.set(a.value.compartment,a.value.extension)):a.is(Ke.reconfigure)?(n=null,i=a.value):a.is(Ke.appendConfig)&&(n=null,i=jc(i).concat(a.value));let s;n?s=e.startState.values.slice():(n=lg.resolve(i,r,this),s=new Ye(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(l,c)=>c.reconfigure(l,this),null).values);let o=e.startState.facet(Ab)?e.newSelection:e.newSelection.asSingle();new Ye(n,e.newDoc,o,s,(a,l)=>l.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:re.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,i=e(n.ranges[0]),r=this.changes(i.changes),s=[i.range],o=jc(i.effects);for(let a=1;a<n.ranges.length;a++){let l=e(n.ranges[a]),c=this.changes(l.changes),u=c.map(r);for(let f=0;f<a;f++)s[f]=s[f].map(u);let d=r.mapDesc(c,!0);s.push(l.range.map(d)),r=r.compose(u),o=Ke.mapEffects(o,u).concat(Ke.mapEffects(jc(l.effects),d))}return{changes:r,selection:re.create(s,n.mainIndex),effects:o}}changes(e=[]){return e instanceof on?e:on.of(e,this.doc.length,this.facet(Ye.lineSeparator))}toText(e){return lt.of(e.split(this.facet(Ye.lineSeparator)||Sb))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(Fd(this,n),cg(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let r=e[i];r instanceof si&&this.config.address[r.id]!=null&&(n[i]=r.spec.toJSON(this.field(e[i]),this))}return n}static fromJSON(e,n={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(i){for(let s in i)if(Object.prototype.hasOwnProperty.call(e,s)){let o=i[s],a=e[s];r.push(o.init(l=>o.spec.fromJSON(a,l)))}}return Ye.create({doc:e.doc,selection:re.fromJSON(e.selection),extensions:n.extensions?r.concat([n.extensions]):r})}static create(e={}){let n=lg.resolve(e.extensions||[],new Map),i=e.doc instanceof lt?e.doc:lt.of((e.doc||"").split(n.staticFacet(Ye.lineSeparator)||Sb)),r=e.selection?e.selection instanceof re?e.selection:re.single(e.selection.anchor,e.selection.head):re.single(0);return rN(r,i.length),n.staticFacet(Ab)||(r=r.asSingle()),new Ye(n,i,r,n.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(Ye.tabSize)}get lineBreak(){return this.facet(Ye.lineSeparator)||`
`}get readOnly(){return this.facet(dN)}phrase(e,...n){for(let i of this.facet(Ye.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(i,r)=>{if(r=="$")return"$";let s=+(r||1);return!s||s>n.length?i:n[s-1]})),e}languageDataAt(e,n,i=-1){let r=[];for(let s of this.facet(oN))for(let o of s(this,n,i))Object.prototype.hasOwnProperty.call(o,e)&&r.push(o[e]);return r}charCategorizer(e){return aj(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:i,length:r}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-i,a=e-i;for(;o>0;){let l=Tn(n,o,!1);if(s(n.slice(l,o))!=On.Word)break;o=l}for(;a<r;){let l=Tn(n,a);if(s(n.slice(a,l))!=On.Word)break;a=l}return o==a?null:re.range(o+i,a+i)}}Ye.allowMultipleSelections=Ab;Ye.tabSize=Ae.define({combine:t=>t.length?t[0]:4});Ye.lineSeparator=aN;Ye.readOnly=dN;Ye.phrases=Ae.define({compare(t,e){let n=Object.keys(t),i=Object.keys(e);return n.length==i.length&&n.every(r=>t[r]==e[r])}});Ye.languageData=oN;Ye.changeFilter=lN;Ye.transactionFilter=cN;Ye.transactionExtender=uN;fh.reconfigure=Ke.define();function Ia(t,e,n={}){let i={};for(let r of t)for(let s of Object.keys(r)){let o=r[s],a=i[s];if(a===void 0)i[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(n,s))i[s]=n[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let r in e)i[r]===void 0&&(i[r]=e[r]);return i}class Ol{eq(e){return this==e}range(e,n=e){return Tb.create(e,n,this)}}Ol.prototype.startSide=Ol.prototype.endSide=0;Ol.prototype.point=!1;Ol.prototype.mapMode=wi.TrackDel;let Tb=class pN{constructor(e,n,i){this.from=e,this.to=n,this.value=i}static create(e,n,i){return new pN(e,n,i)}};function Ob(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class rS{constructor(e,n,i,r){this.from=e,this.to=n,this.value=i,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,n,i,r=0){let s=i?this.to:this.from;for(let o=r,a=s.length;;){if(o==a)return o;let l=o+a>>1,c=s[l]-e||(i?this.value[l].endSide:this.value[l].startSide)-n;if(l==o)return c>=0?o:a;c>=0?a=l:o=l+1}}between(e,n,i,r){for(let s=this.findIndex(n,-1e9,!0),o=this.findIndex(i,1e9,!1,s);s<o;s++)if(r(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let i=[],r=[],s=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let c=this.value[l],u=this.from[l]+e,d=this.to[l]+e,f,h;if(u==d){let p=n.mapPos(u,c.startSide,c.mapMode);if(p==null||(f=h=p,c.startSide!=c.endSide&&(h=n.mapPos(u,c.endSide),h<f)))continue}else if(f=n.mapPos(u,c.startSide),h=n.mapPos(d,c.endSide),f>h||f==h&&c.startSide>0&&c.endSide<=0)continue;(h-f||c.endSide-c.startSide)<0||(o<0&&(o=f),c.point&&(a=Math.max(a,h-f)),i.push(c),r.push(f-o),s.push(h-o))}return{mapped:i.length?new rS(r,s,i,a):null,pos:o}}}class ut{constructor(e,n,i,r){this.chunkPos=e,this.chunk=n,this.nextLayer=i,this.maxPoint=r}static create(e,n,i,r){return new ut(e,n,i,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:i=!1,filterFrom:r=0,filterTo:s=this.length}=e,o=e.filter;if(n.length==0&&!o)return this;if(i&&(n=n.slice().sort(Ob)),this.isEmpty)return n.length?ut.of(n):this;let a=new mN(this,null,-1).goto(0),l=0,c=[],u=new Nl;for(;a.value||l<n.length;)if(l<n.length&&(a.from-n[l].from||a.startSide-n[l].value.startSide)>=0){let d=n[l++];u.addInner(d.from,d.to,d.value)||c.push(d)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==n.length||this.chunkEnd(a.chunkIndex)<n[l].from)&&(!o||r>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&u.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||r>a.to||s<a.from||o(a.from,a.to,a.value))&&(u.addInner(a.from,a.to,a.value)||c.push(Tb.create(a.from,a.to,a.value))),a.next());return u.finishInner(this.nextLayer.isEmpty&&!c.length?ut.empty:this.nextLayer.update({add:c,filter:o,filterFrom:r,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],i=[],r=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],c=e.touchesRange(a,a+l.length);if(c===!1)r=Math.max(r,l.maxPoint),n.push(l),i.push(e.mapPos(a));else if(c===!0){let{mapped:u,pos:d}=l.map(a,e);u&&(r=Math.max(r,u.maxPoint),n.push(u),i.push(d))}}let s=this.nextLayer.map(e);return n.length==0?s:new ut(i,n,s||ut.empty,r)}between(e,n,i){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let s=this.chunkPos[r],o=this.chunk[r];if(n>=s&&e<=s+o.length&&o.between(s,e-s,n-s,i)===!1)return}this.nextLayer.between(e,n,i)}}iter(e=0){return wf.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return wf.from(e).goto(n)}static compare(e,n,i,r,s=-1){let o=e.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),a=n.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),l=hE(o,a,i),c=new Qu(o,l,s),u=new Qu(a,l,s);i.iterGaps((d,f,h)=>pE(c,d,u,f,h,r)),i.empty&&i.length==0&&pE(c,0,u,0,0,r)}static eq(e,n,i=0,r){r==null&&(r=999999999);let s=e.filter(u=>!u.isEmpty&&n.indexOf(u)<0),o=n.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=hE(s,o),l=new Qu(s,a,0).goto(i),c=new Qu(o,a,0).goto(i);for(;;){if(l.to!=c.to||!Nb(l.active,c.active)||l.point&&(!c.point||!l.point.eq(c.point)))return!1;if(l.to>r)return!0;l.next(),c.next()}}static spans(e,n,i,r,s=-1){let o=new Qu(e,null,s).goto(n),a=n,l=o.openStart;for(;;){let c=Math.min(o.to,i);if(o.point){let u=o.activeForPoint(o.to),d=o.pointFrom<n?u.length+1:Math.min(u.length,l);r.point(a,c,o.point,u,d,o.pointRank),l=Math.min(o.openEnd(c),u.length)}else c>a&&(r.span(a,c,o.active,l),l=o.openEnd(c));if(o.to>i)return l+(o.point&&o.to>i?1:0);a=o.to,o.next()}}static of(e,n=!1){let i=new Nl;for(let r of e instanceof Tb?[e]:n?lj(e):e)i.add(r.from,r.to,r.value);return i.finish()}static join(e){if(!e.length)return ut.empty;let n=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let r=e[i];r!=ut.empty;r=r.nextLayer)n=new ut(r.chunkPos,r.chunk,n,Math.max(r.maxPoint,n.maxPoint));return n}}ut.empty=new ut([],[],null,-1);function lj(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let i=t[n];if(Ob(e,i)>0)return t.slice().sort(Ob);e=i}return t}ut.empty.nextLayer=ut.empty;class Nl{finishChunk(e){this.chunks.push(new rS(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,i){this.addInner(e,n,i)||(this.nextLayer||(this.nextLayer=new Nl)).add(e,n,i)}addInner(e,n,i){let r=e-this.lastTo||i.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=n,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let i=n.value.length-1;return this.last=n.value[i],this.lastFrom=n.from[i]+e,this.lastTo=n.to[i]+e,!0}finish(){return this.finishInner(ut.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=ut.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function hE(t,e,n){let i=new Map;for(let s of t)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&i.set(s.chunk[o],s.chunkPos[o]);let r=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let a=i.get(s.chunk[o]);a!=null&&(n?n.mapPos(a):a)==s.chunkPos[o]&&!(n!=null&&n.touchesRange(a,a+s.chunk[o].length))&&r.add(s.chunk[o])}return r}class mN{constructor(e,n,i,r=0){this.layer=e,this.skip=n,this.minPoint=i,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,i){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!i||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],i=e+n.from[this.rangeIndex];if(this.from=i,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class wf{constructor(e){this.heap=e}static from(e,n=null,i=-1){let r=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&r.push(new mN(o,n,i,s));return r.length==1?r[0]:new wf(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let i of this.heap)i.goto(e,n);for(let i=this.heap.length>>1;i>=0;i--)Q0(this.heap,i);return this.next(),this}forward(e,n){for(let i of this.heap)i.forward(e,n);for(let i=this.heap.length>>1;i>=0;i--)Q0(this.heap,i);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Q0(this.heap,0)}}}function Q0(t,e){for(let n=t[e];;){let i=(e<<1)+1;if(i>=t.length)break;let r=t[i];if(i+1<t.length&&r.compare(t[i+1])>=0&&(r=t[i+1],i++),n.compare(r)<0)break;t[i]=n,t[e]=r,e=i}}class Qu{constructor(e,n,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=wf.from(e,n,i)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){ep(this.active,e),ep(this.activeTo,e),ep(this.activeRank,e),this.minActive=mE(this.active,this.activeTo)}addActive(e){let n=0,{value:i,to:r,rank:s}=this.cursor;for(;n<this.activeRank.length&&(s-this.activeRank[n]||r-this.activeTo[n])>0;)n++;tp(this.active,n,i),tp(this.activeTo,n,r),tp(this.activeRank,n,s),e&&tp(e,n,this.cursor.from),this.minActive=mE(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),i&&ep(i,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(i),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let r=i.length-1;r>=0&&i[r]<e;r--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&n.push(this.active[i]);return n.reverse()}openEnd(e){let n=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)n++;return n}}function pE(t,e,n,i,r,s){t.goto(e),n.goto(i);let o=i+r,a=i,l=i-e;for(;;){let c=t.to+l-n.to||t.endSide-n.endSide,u=c<0?t.to+l:n.to,d=Math.min(u,o);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&Nb(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(a,d,t.point,n.point):d>a&&!Nb(t.active,n.active)&&s.compareRange(a,d,t.active,n.active),u>o)break;a=u,c<=0&&t.next(),c>=0&&n.next()}}function Nb(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function ep(t,e){for(let n=e,i=t.length-1;n<i;n++)t[n]=t[n+1];t.pop()}function tp(t,e,n){for(let i=t.length-1;i>=e;i--)t[i+1]=t[i];t[e]=n}function mE(t,e){let n=-1,i=1e9;for(let r=0;r<e.length;r++)(e[r]-i||t[r].endSide-t[n].endSide)<0&&(n=r,i=e[r]);return n}function hh(t,e,n=t.length){let i=0;for(let r=0;r<n;)t.charCodeAt(r)==9?(i+=e-i%e,r++):(i++,r=Tn(t,r));return i}function cj(t,e,n,i){for(let r=0,s=0;;){if(s>=e)return r;if(r==t.length)break;s+=t.charCodeAt(r)==9?n-s%n:1,r=Tn(t,r)}return i===!0?-1:t.length}const Rb="",gE=typeof Symbol>"u"?"__"+Rb:Symbol.for(Rb),Mb=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),vE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class xa{constructor(e,n){this.rules=[];let{finish:i}=n||{};function r(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,l,c){let u=[],d=/^@(\w+)\b/.exec(o[0]),f=d&&d[1]=="keyframes";if(d&&a==null)return l.push(o[0]+";");for(let h in a){let p=a[h];if(/&/.test(h))s(h.split(/,\s*/).map(m=>o.map(w=>m.replace(/&/,w))).reduce((m,w)=>m.concat(w)),p,l);else if(p&&typeof p=="object"){if(!d)throw new RangeError("The value of a property ("+h+") should be a primitive value.");s(r(h),p,u,f)}else p!=null&&u.push(h.replace(/_.*/,"").replace(/[A-Z]/g,m=>"-"+m.toLowerCase())+": "+p+";")}(u.length||f)&&l.push((i&&!d&&!c?o.map(i):o).join(", ")+" {"+u.join(" ")+"}")}for(let o in e)s(r(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=vE[gE]||1;return vE[gE]=e+1,Rb+e.toString(36)}static mount(e,n,i){let r=e[Mb],s=i&&i.nonce;r?s&&r.setNonce(s):r=new uj(e,s),r.mount(Array.isArray(n)?n:[n])}}let yE=new Map;class uj{constructor(e,n){let i=e.ownerDocument||e,r=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let s=yE.get(i);if(s)return e.adoptedStyleSheets=[s.sheet,...e.adoptedStyleSheets],e[Mb]=s;this.sheet=new r.CSSStyleSheet,e.adoptedStyleSheets=[this.sheet,...e.adoptedStyleSheets],yE.set(i,this)}else{this.styleTag=i.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);let s=e.head||e;s.insertBefore(this.styleTag,s.firstChild)}this.modules=[],e[Mb]=this}mount(e){let n=this.sheet,i=0,r=0;for(let s=0;s<e.length;s++){let o=e[s],a=this.modules.indexOf(o);if(a<r&&a>-1&&(this.modules.splice(a,1),r--,a=-1),a==-1){if(this.modules.splice(r++,0,o),n)for(let l=0;l<o.rules.length;l++)n.insertRule(o.rules[l],i++)}else{for(;r<a;)i+=this.modules[r++].rules.length;i+=o.rules.length,r++}}if(!n){let s="";for(let o=0;o<this.modules.length;o++)s+=this.modules[o].getRules()+`
`;this.styleTag.textContent=s}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var Sa={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},bf={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},dj=typeof navigator<"u"&&/Mac/.test(navigator.platform),fj=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Cn=0;Cn<10;Cn++)Sa[48+Cn]=Sa[96+Cn]=String(Cn);for(var Cn=1;Cn<=24;Cn++)Sa[Cn+111]="F"+Cn;for(var Cn=65;Cn<=90;Cn++)Sa[Cn]=String.fromCharCode(Cn+32),bf[Cn]=String.fromCharCode(Cn);for(var ey in Sa)bf.hasOwnProperty(ey)||(bf[ey]=Sa[ey]);function hj(t){var e=dj&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||fj&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?bf:Sa)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function ug(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function Db(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function pj(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function cm(t,e){if(!e.anchorNode)return!1;try{return Db(t,e.anchorNode)}catch{return!1}}function xf(t){return t.nodeType==3?Rl(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function zd(t,e,n,i){return n?wE(t,e,n,i,-1)||wE(t,e,n,i,1):!1}function Sf(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function wE(t,e,n,i,r){for(;;){if(t==n&&e==i)return!0;if(e==(r<0?0:fo(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=Sf(t)+(r<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(r<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=r<0?fo(t):0}else return!1}}function fo(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function sS(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function mj(t){return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function gN(t,e){let n=e.width/t.offsetWidth,i=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-t.offsetHeight)<1)&&(i=1),{scaleX:n,scaleY:i}}function gj(t,e,n,i,r,s,o,a){let l=t.ownerDocument,c=l.defaultView||window;for(let u=t,d=!1;u&&!d;)if(u.nodeType==1){let f,h=u==l.body,p=1,m=1;if(h)f=mj(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(u).position)&&(d=!0),u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let y=u.getBoundingClientRect();({scaleX:p,scaleY:m}=gN(u,y)),f={left:y.left,right:y.left+u.clientWidth*p,top:y.top,bottom:y.top+u.clientHeight*m}}let w=0,v=0;if(r=="nearest")e.top<f.top?(v=-(f.top-e.top+o),n>0&&e.bottom>f.bottom+v&&(v=e.bottom-f.bottom+v+o)):e.bottom>f.bottom&&(v=e.bottom-f.bottom+o,n<0&&e.top-v<f.top&&(v=-(f.top+v-e.top+o)));else{let y=e.bottom-e.top,x=f.bottom-f.top;v=(r=="center"&&y<=x?e.top+y/2-x/2:r=="start"||r=="center"&&n<0?e.top-o:e.bottom-x+o)-f.top}if(i=="nearest"?e.left<f.left?(w=-(f.left-e.left+s),n>0&&e.right>f.right+w&&(w=e.right-f.right+w+s)):e.right>f.right&&(w=e.right-f.right+s,n<0&&e.left<f.left+w&&(w=-(f.left+w-e.left+s))):w=(i=="center"?e.left+(e.right-e.left)/2-(f.right-f.left)/2:i=="start"==a?e.left-s:e.right-(f.right-f.left)+s)-f.left,w||v)if(h)c.scrollBy(w,v);else{let y=0,x=0;if(v){let k=u.scrollTop;u.scrollTop+=v/m,x=(u.scrollTop-k)*m}if(w){let k=u.scrollLeft;u.scrollLeft+=w/p,y=(u.scrollLeft-k)*p}e={left:e.left-y,top:e.top-x,right:e.right-y,bottom:e.bottom-x},y&&Math.abs(y-w)<1&&(i="nearest"),x&&Math.abs(x-v)<1&&(r="nearest")}if(h)break;u=u.assignedSlot||u.parentNode}else if(u.nodeType==11)u=u.host;else break}function vj(t){let e=t.ownerDocument;for(let n=t.parentNode;n&&n!=e.body;)if(n.nodeType==1){if(n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth)return n;n=n.assignedSlot||n.parentNode}else if(n.nodeType==11)n=n.host;else break;return null}class yj{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:i}=e;this.set(n,Math.min(e.anchorOffset,n?fo(n):0),i,Math.min(e.focusOffset,i?fo(i):0))}set(e,n,i,r){this.anchorNode=e,this.anchorOffset=n,this.focusNode=i,this.focusOffset=r}}let Zl=null;function vN(t){if(t.setActive)return t.setActive();if(Zl)return t.focus(Zl);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(Zl==null?{get preventScroll(){return Zl={preventScroll:!0},!0}}:void 0),!Zl){Zl=!1;for(let n=0;n<e.length;){let i=e[n++],r=e[n++],s=e[n++];i.scrollTop!=r&&(i.scrollTop=r),i.scrollLeft!=s&&(i.scrollLeft=s)}}}let bE;function Rl(t,e,n=e){let i=bE||(bE=document.createRange());return i.setEnd(t,n),i.setStart(t,e),i}function Fc(t,e,n){let i={key:e,code:e,keyCode:n,which:n,cancelable:!0},r=new KeyboardEvent("keydown",i);r.synthetic=!0,t.dispatchEvent(r);let s=new KeyboardEvent("keyup",i);return s.synthetic=!0,t.dispatchEvent(s),r.defaultPrevented||s.defaultPrevented}function wj(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function yN(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function bj(t,e){let n=e.focusNode,i=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=i)return!1;for(i=Math.min(i,fo(n));;)if(i){if(n.nodeType!=1)return!1;let r=n.childNodes[i-1];r.contentEditable=="false"?i--:(n=r,i=fo(n))}else{if(n==t)return!0;i=Sf(n),n=n.parentNode}}function wN(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}class Vn{constructor(e,n,i=!0){this.node=e,this.offset=n,this.precise=i}static before(e,n){return new Vn(e.parentNode,Sf(e),n)}static after(e,n){return new Vn(e.parentNode,Sf(e)+1,n)}}const oS=[];class $t{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let i of this.children){if(i==e)return n;n+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let i=this.dom,r=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=r?r.nextSibling:i.firstChild)){let a=$t.get(s);(!a||!a.parent&&a.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,n),o.flags&=-8}if(s=r?r.nextSibling:i.firstChild,n&&!n.written&&n.node==i&&s!=o.dom&&(n.written=!0),o.dom.parentNode==i)for(;s&&s!=o.dom;)s=xE(s);else i.insertBefore(o.dom,s);r=o.dom}for(s=r?r.nextSibling:i.firstChild,s&&n&&n.node==i&&(n.written=!0);s;)s=xE(s)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,n),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let i;if(e==this.dom)i=this.dom.childNodes[n];else{let r=fo(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;r==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?r=-1:r=1),e=s}r<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!$t.get(i);)i=i.nextSibling;if(!i)return this.length;for(let r=0,s=0;;r++){let o=this.children[r];if(o.dom==i)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,n,i=0){let r=-1,s=-1,o=-1,a=-1;for(let l=0,c=i,u=i;l<this.children.length;l++){let d=this.children[l],f=c+d.length;if(c<e&&f>n)return d.domBoundsAround(e,n,c);if(f>=e&&r==-1&&(r=l,s=c),c>n&&d.dom.parentNode==this.dom){o=l,a=u;break}u=f,c=f+d.breakAfter}return{from:s,to:a<0?i+this.length:a,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,i=oS){this.markDirty();for(let r=e;r<n;r++){let s=this.children[r];s.parent==this&&i.indexOf(s)<0&&s.destroy()}this.children.splice(e,n-e,...i);for(let r=0;r<i.length;r++)i[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new bN(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,i,r,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}$t.prototype.breakAfter=0;function xE(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class bN{constructor(e,n,i){this.children=e,this.pos=n,this.i=i,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function xN(t,e,n,i,r,s,o,a,l){let{children:c}=t,u=c.length?c[e]:null,d=s.length?s[s.length-1]:null,f=d?d.breakAfter:o;if(!(e==i&&u&&!o&&!f&&s.length<2&&u.merge(n,r,s.length?d:null,n==0,a,l))){if(i<c.length){let h=c[i];h&&(r<h.length||h.breakAfter&&(d!=null&&d.breakAfter))?(e==i&&(h=h.split(r),r=0),!f&&d&&h.merge(0,r,d,!0,0,l)?s[s.length-1]=h:((r||h.children.length&&!h.children[0].length)&&h.merge(0,r,null,!1,0,l),s.push(h))):h!=null&&h.breakAfter&&(d?d.breakAfter=1:o=1),i++}for(u&&(u.breakAfter=o,n>0&&(!o&&s.length&&u.merge(n,u.length,s[0],!1,a,0)?u.breakAfter=s.shift().breakAfter:(n<u.length||u.children.length&&u.children[u.children.length-1].length==0)&&u.merge(n,u.length,null,!1,a,0),e++));e<i&&s.length;)if(c[i-1].become(s[s.length-1]))i--,s.pop(),l=s.length?0:a;else if(c[e].become(s[0]))e++,s.shift(),a=s.length?0:l;else break;!s.length&&e&&i<c.length&&!c[e-1].breakAfter&&c[i].merge(0,0,c[e-1],!1,a,l)&&e--,(e<i||s.length)&&t.replaceChildren(e,i,s)}}function SN(t,e,n,i,r,s){let o=t.childCursor(),{i:a,off:l}=o.findPos(n,1),{i:c,off:u}=o.findPos(e,-1),d=e-n;for(let f of i)d+=f.length;t.length+=d,xN(t,c,u,a,l,i,0,r,s)}let Fi=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Ib=typeof document<"u"?document:{documentElement:{style:{}}};const Lb=/Edge\/(\d+)/.exec(Fi.userAgent),kN=/MSIE \d/.test(Fi.userAgent),Bb=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Fi.userAgent),_v=!!(kN||Bb||Lb),SE=!_v&&/gecko\/(\d+)/i.test(Fi.userAgent),ty=!_v&&/Chrome\/(\d+)/.exec(Fi.userAgent),kE="webkitFontSmoothing"in Ib.documentElement.style,_N=!_v&&/Apple Computer/.test(Fi.vendor),_E=_N&&(/Mobile\/\w+/.test(Fi.userAgent)||Fi.maxTouchPoints>2);var Ee={mac:_E||/Mac/.test(Fi.platform),windows:/Win/.test(Fi.platform),linux:/Linux|X11/.test(Fi.platform),ie:_v,ie_version:kN?Ib.documentMode||6:Bb?+Bb[1]:Lb?+Lb[1]:0,gecko:SE,gecko_version:SE?+(/Firefox\/(\d+)/.exec(Fi.userAgent)||[0,0])[1]:0,chrome:!!ty,chrome_version:ty?+ty[1]:0,ios:_E,android:/Android\b/.test(Fi.userAgent),webkit:kE,safari:_N,webkit_version:kE?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:Ib.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const xj=256;class ho extends $t{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,i){return this.flags&8||i&&(!(i instanceof ho)||this.length-(n-e)+i.length>xj||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new ho(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new Vn(this.dom,e)}domBoundsAround(e,n,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return Sj(this.dom,e,n)}}class po extends $t{constructor(e,n=[],i=0){super(),this.mark=e,this.children=n,this.length=i;for(let r of n)r.setParent(this)}setAttrs(e){if(yN(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,i,r,s,o){return i&&(!(i instanceof po&&i.mark.eq(this.mark))||e&&s<=0||n<this.length&&o<=0)?!1:(SN(this,e,n,i?i.children.slice():[],s-1,o-1),this.markDirty(),!0)}split(e){let n=[],i=0,r=-1,s=0;for(let a of this.children){let l=i+a.length;l>e&&n.push(i<e?a.split(e-i):a),r<0&&i>=e&&(r=s),i=l,s++}let o=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new po(this.mark,n,o)}domAtPos(e){return CN(this,e)}coordsAt(e,n){return AN(this,e,n)}}function Sj(t,e,n){let i=t.nodeValue.length;e>i&&(e=i);let r=e,s=e,o=0;e==0&&n<0||e==i&&n>=0?Ee.chrome||Ee.gecko||(e?(r--,o=1):s<i&&(s++,o=-1)):n<0?r--:s<i&&s++;let a=Rl(t,r,s).getClientRects();if(!a.length)return null;let l=a[(o?o<0:n>=0)?0:a.length-1];return Ee.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,c=>c.width)||l),o?sS(l,o<0):l||null}class Qo extends $t{static create(e,n,i){return new Qo(e,n,i)}constructor(e,n,i){super(),this.widget=e,this.length=n,this.side=i,this.prevWidget=null}split(e){let n=Qo.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,n,i,r,s,o){return i&&(!(i instanceof Qo)||!this.widget.compare(i.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}become(e){return e instanceof Qo&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return lt.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,i=n&&n.state.doc,r=this.posAtStart;return i?i.slice(r,r+this.length):lt.empty}domAtPos(e){return(this.length?e==0:this.side>0)?Vn.before(this.dom):Vn.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let i=this.widget.coordsAt(this.dom,e,n);if(i)return i;let r=this.dom.getClientRects(),s=null;if(!r.length)return null;let o=this.side?this.side<0:e>0;for(let a=o?r.length-1:0;s=r[a],!(e>0?a==0:a==r.length-1||s.top<s.bottom);a+=o?-1:1);return sS(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class fu extends $t{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof fu&&e.side==this.side}split(){return new fu(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?Vn.before(this.dom):Vn.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return lt.empty}get isHidden(){return!0}}ho.prototype.children=Qo.prototype.children=fu.prototype.children=oS;function CN(t,e){let n=t.dom,{children:i}=t,r=0;for(let s=0;r<i.length;r++){let o=i[r],a=s+o.length;if(!(a==s&&o.getSide()<=0)){if(e>s&&e<a&&o.dom.parentNode==n)return o.domAtPos(e-s);if(e<=s)break;s=a}}for(let s=r;s>0;s--){let o=i[s-1];if(o.dom.parentNode==n)return o.domAtPos(o.length)}for(let s=r;s<i.length;s++){let o=i[s];if(o.dom.parentNode==n)return o.domAtPos(0)}return new Vn(n,0)}function EN(t,e,n){let i,{children:r}=t;n>0&&e instanceof po&&r.length&&(i=r[r.length-1])instanceof po&&i.mark.eq(e.mark)?EN(i,e.children[0],n-1):(r.push(e),e.setParent(t)),t.length+=e.length}function AN(t,e,n){let i=null,r=-1,s=null,o=-1;function a(c,u){for(let d=0,f=0;d<c.children.length&&f<=u;d++){let h=c.children[d],p=f+h.length;p>=u&&(h.children.length?a(h,u-f):(!s||s.isHidden&&n>0)&&(p>u||f==p&&h.getSide()>0)?(s=h,o=u-f):(f<u||f==p&&h.getSide()<0&&!h.isHidden)&&(i=h,r=u-f)),f=p}}a(t,e);let l=(n<0?i:s)||i||s;return l?l.coordsAt(Math.max(0,l==i?r:o),n):kj(t)}function kj(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=xf(e);return n[n.length-1]||null}function jb(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const CE=Object.create(null);function aS(t,e,n){if(t==e)return!0;t||(t=CE),e||(e=CE);let i=Object.keys(t),r=Object.keys(e);if(i.length-(n&&i.indexOf(n)>-1?1:0)!=r.length-(n&&r.indexOf(n)>-1?1:0))return!1;for(let s of i)if(s!=n&&(r.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function Fb(t,e,n){let i=!1;if(e)for(let r in e)n&&r in n||(i=!0,r=="style"?t.style.cssText="":t.removeAttribute(r));if(n)for(let r in n)e&&e[r]==n[r]||(i=!0,r=="style"?t.style.cssText=n[r]:t.setAttribute(r,n[r]));return i}function _j(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let i=t.attributes[n];e[i.name]=i.value}return e}class rn extends $t{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,i,r,s,o){if(i){if(!(i instanceof rn))return!1;this.dom||i.transferDOM(this)}return r&&this.setDeco(i?i.attrs:null),SN(this,e,n,i?i.children.slice():[],s,o),!0}split(e){let n=new rn;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i,off:r}=this.childPos(e);r&&(n.append(this.children[i].split(r),0),this.children[i].merge(r,this.children[i].length,null,!1,0,0),i++);for(let s=i;s<this.children.length;s++)n.append(this.children[s],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){aS(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){EN(this,e,n)}addLineDeco(e){let n=e.spec.attributes,i=e.spec.class;n&&(this.attrs=jb(n,this.attrs||{})),i&&(this.attrs=jb({class:i},this.attrs||{}))}domAtPos(e){return CN(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var i;this.dom?this.flags&4&&(yN(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Fb(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let r=this.dom.lastChild;for(;r&&$t.get(r)instanceof po;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((i=$t.get(r))===null||i===void 0?void 0:i.isEditable)==!1&&(!Ee.ios||!this.children.some(s=>s instanceof ho))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let i of this.children){if(!(i instanceof ho)||/[^ -~]/.test(i.text))return null;let r=xf(i.dom);if(r.length!=1)return null;e+=r[0].width,n=r[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let i=AN(this,e,n);if(!this.children.length&&i&&this.parent){let{heightOracle:r}=this.parent.view.viewState,s=i.bottom-i.top;if(Math.abs(s-r.lineHeight)<2&&r.textHeight<s){let o=(s-r.textHeight)/2;return{top:i.top+o,bottom:i.bottom-o,left:i.left,right:i.left}}}return i}become(e){return!1}covers(){return!0}static find(e,n){for(let i=0,r=0;i<e.children.length;i++){let s=e.children[i],o=r+s.length;if(o>=n){if(s instanceof rn)return s;if(o>n)break}r=o+s.breakAfter}return null}}class ma extends $t{constructor(e,n,i){super(),this.widget=e,this.length=n,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,n,i,r,s,o){return i&&(!(i instanceof ma)||!this.widget.compare(i.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?Vn.before(this.dom):Vn.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let i=new ma(this.widget,n,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return oS}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):lt.empty}domBoundsAround(){return null}become(e){return e instanceof ma&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){return this.widget.coordsAt(this.dom,e,n)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:n,endSide:i}=this.deco;return n==i?!1:e<0?n<0:i>0}}class La{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Qn=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(Qn||(Qn={}));class Xe extends Ol{constructor(e,n,i,r){super(),this.startSide=e,this.endSide=n,this.widget=i,this.spec=r}get heightRelevant(){return!1}static mark(e){return new ph(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return n+=i&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new ka(e,n,n,i,e.widget||null,!1)}static replace(e){let n=!!e.block,i,r;if(e.isBlockGap)i=-5e8,r=4e8;else{let{start:s,end:o}=PN(e,n);i=(s?n?-3e8:-1:5e8)-1,r=(o?n?2e8:1:-6e8)+1}return new ka(e,i,r,n,e.widget||null,!0)}static line(e){return new mh(e)}static set(e,n=!1){return ut.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Xe.none=ut.empty;class ph extends Xe{constructor(e){let{start:n,end:i}=PN(e);super(n?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,i;return this==e||e instanceof ph&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&aS(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}ph.prototype.point=!1;class mh extends Xe{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof mh&&this.spec.class==e.spec.class&&aS(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}mh.prototype.mapMode=wi.TrackBefore;mh.prototype.point=!0;class ka extends Xe{constructor(e,n,i,r,s,o){super(n,i,s,e),this.block=r,this.isReplace=o,this.mapMode=r?n<=0?wi.TrackBefore:wi.TrackAfter:wi.TrackDel}get type(){return this.startSide!=this.endSide?Qn.WidgetRange:this.startSide<=0?Qn.WidgetBefore:Qn.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof ka&&Cj(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}ka.prototype.point=!0;function PN(t,e=!1){let{inclusiveStart:n,inclusiveEnd:i}=t;return n==null&&(n=t.inclusive),i==null&&(i=t.inclusive),{start:n??e,end:i??e}}function Cj(t,e){return t==e||!!(t&&e&&t.compare(e))}function zb(t,e,n,i=0){let r=n.length-1;r>=0&&n[r]+i>=t?n[r]=Math.max(n[r],e):n.push(t,e)}class Ud{constructor(e,n,i,r){this.doc=e,this.pos=n,this.end=i,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof ma&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new rn),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(np(new fu(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof ma)&&this.getLine()}buildText(e,n,i){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(n.slice(n.length-i)),this.getLine().append(np(new ho(this.text.slice(this.textOff,this.textOff+r)),n),i),this.atCursorPos=!0,this.textOff+=r,e-=r,i=0}}span(e,n,i,r){this.buildText(n-e,i,r),this.pos=n,this.openStart<0&&(this.openStart=r)}point(e,n,i,r,s,o){if(this.disallowBlockEffectsFor[o]&&i instanceof ka){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=n-e;if(i instanceof ka)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new ma(i.widget||new EE("div"),a,i));else{let l=Qo.create(i.widget||new EE("span"),a,a?0:i.startSide),c=this.atCursorPos&&!l.isEditable&&s<=r.length&&(e<n||i.startSide>0),u=!l.isEditable&&(e<n||s>r.length||i.startSide<=0),d=this.getLine();this.pendingBuffer==2&&!c&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(r),c&&(d.append(np(new fu(1),r),s),s=r.length+Math.max(0,s-r.length)),d.append(np(l,r),s),this.atCursorPos=u,this.pendingBuffer=u?e<n||s>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,i,r,s){let o=new Ud(e,n,i,s);return o.openEnd=ut.spans(r,n,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function np(t,e){for(let n of e)t=new po(n,[t],t.length);return t}class EE extends La{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}var Ot=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(Ot||(Ot={}));const Ml=Ot.LTR,lS=Ot.RTL;function $N(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const Ej=$N("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Aj=$N("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Ub=Object.create(null),is=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);Ub[e]=n,Ub[n]=-e}function TN(t){return t<=247?Ej[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?Aj[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const Pj=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class ea{get dir(){return this.level%2?lS:Ml}constructor(e,n,i){this.from=e,this.to=n,this.level=i}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,i,r){let s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=n&&a.to>=n){if(a.level==i)return o;(s<0||(r!=0?r<0?a.from<n:a.to>n:e[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}function ON(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let i=t[n],r=e[n];if(i.from!=r.from||i.to!=r.to||i.direction!=r.direction||!ON(i.inner,r.inner))return!1}return!0}const vt=[];function $j(t,e,n,i,r){for(let s=0;s<=i.length;s++){let o=s?i[s-1].to:e,a=s<i.length?i[s].from:n,l=s?256:r;for(let c=o,u=l,d=l;c<a;c++){let f=TN(t.charCodeAt(c));f==512?f=u:f==8&&d==4&&(f=16),vt[c]=f==4?2:f,f&7&&(d=f),u=f}for(let c=o,u=l,d=l;c<a;c++){let f=vt[c];if(f==128)c<a-1&&u==vt[c+1]&&u&24?f=vt[c]=u:vt[c]=256;else if(f==64){let h=c+1;for(;h<a&&vt[h]==64;)h++;let p=c&&u==8||h<n&&vt[h]==8?d==1?1:8:256;for(let m=c;m<h;m++)vt[m]=p;c=h-1}else f==8&&d==1&&(vt[c]=1);u=f,f&7&&(d=f)}}}function Tj(t,e,n,i,r){let s=r==1?2:1;for(let o=0,a=0,l=0;o<=i.length;o++){let c=o?i[o-1].to:e,u=o<i.length?i[o].from:n;for(let d=c,f,h,p;d<u;d++)if(h=Ub[f=t.charCodeAt(d)])if(h<0){for(let m=a-3;m>=0;m-=3)if(is[m+1]==-h){let w=is[m+2],v=w&2?r:w&4?w&1?s:r:0;v&&(vt[d]=vt[is[m]]=v),a=m;break}}else{if(is.length==189)break;is[a++]=d,is[a++]=f,is[a++]=l}else if((p=vt[d])==2||p==1){let m=p==r;l=m?0:1;for(let w=a-3;w>=0;w-=3){let v=is[w+2];if(v&2)break;if(m)is[w+2]|=2;else{if(v&4)break;is[w+2]|=4}}}}}function Oj(t,e,n,i){for(let r=0,s=i;r<=n.length;r++){let o=r?n[r-1].to:t,a=r<n.length?n[r].from:e;for(let l=o;l<a;){let c=vt[l];if(c==256){let u=l+1;for(;;)if(u==a){if(r==n.length)break;u=n[r++].to,a=r<n.length?n[r].from:e}else if(vt[u]==256)u++;else break;let d=s==1,f=(u<e?vt[u]:i)==1,h=d==f?d?1:2:i;for(let p=u,m=r,w=m?n[m-1].to:t;p>l;)p==w&&(p=n[--m].from,w=m?n[m-1].to:t),vt[--p]=h;l=u}else s=c,l++}}}function Vb(t,e,n,i,r,s,o){let a=i%2?2:1;if(i%2==r%2)for(let l=e,c=0;l<n;){let u=!0,d=!1;if(c==s.length||l<s[c].from){let m=vt[l];m!=a&&(u=!1,d=m==16)}let f=!u&&a==1?[]:null,h=u?i:i+1,p=l;e:for(;;)if(c<s.length&&p==s[c].from){if(d)break e;let m=s[c];if(!u)for(let w=m.to,v=c+1;;){if(w==n)break e;if(v<s.length&&s[v].from==w)w=s[v++].to;else{if(vt[w]==a)break e;break}}if(c++,f)f.push(m);else{m.from>l&&o.push(new ea(l,m.from,h));let w=m.direction==Ml!=!(h%2);Hb(t,w?i+1:i,r,m.inner,m.from,m.to,o),l=m.to}p=m.to}else{if(p==n||(u?vt[p]!=a:vt[p]==a))break;p++}f?Vb(t,l,p,i+1,r,f,o):l<p&&o.push(new ea(l,p,h)),l=p}else for(let l=n,c=s.length;l>e;){let u=!0,d=!1;if(!c||l>s[c-1].to){let m=vt[l-1];m!=a&&(u=!1,d=m==16)}let f=!u&&a==1?[]:null,h=u?i:i+1,p=l;e:for(;;)if(c&&p==s[c-1].to){if(d)break e;let m=s[--c];if(!u)for(let w=m.from,v=c;;){if(w==e)break e;if(v&&s[v-1].to==w)w=s[--v].from;else{if(vt[w-1]==a)break e;break}}if(f)f.push(m);else{m.to<l&&o.push(new ea(m.to,l,h));let w=m.direction==Ml!=!(h%2);Hb(t,w?i+1:i,r,m.inner,m.from,m.to,o),l=m.from}p=m.from}else{if(p==e||(u?vt[p-1]!=a:vt[p-1]==a))break;p--}f?Vb(t,p,l,i+1,r,f,o):p<l&&o.push(new ea(p,l,h)),l=p}}function Hb(t,e,n,i,r,s,o){let a=e%2?2:1;$j(t,r,s,i,a),Tj(t,r,s,i,a),Oj(r,s,i,a),Vb(t,r,s,e,n,i,o)}function Nj(t,e,n){if(!t)return[new ea(0,0,e==lS?1:0)];if(e==Ml&&!n.length&&!Pj.test(t))return NN(t.length);if(n.length)for(;t.length>vt.length;)vt[vt.length]=256;let i=[],r=e==Ml?0:1;return Hb(t,r,r,n,0,t.length,i),i}function NN(t){return[new ea(0,t,0)]}let RN="";function Rj(t,e,n,i,r){var s;let o=i.head-t.from,a=ea.find(e,o,(s=i.bidiLevel)!==null&&s!==void 0?s:-1,i.assoc),l=e[a],c=l.side(r,n);if(o==c){let f=a+=r?1:-1;if(f<0||f>=e.length)return null;l=e[a=f],o=l.side(!r,n),c=l.side(r,n)}let u=Tn(t.text,o,l.forward(r,n));(u<l.from||u>l.to)&&(u=c),RN=t.text.slice(Math.min(o,u),Math.max(o,u));let d=a==(r?e.length-1:0)?null:e[a+(r?1:-1)];return d&&u==c&&d.level+(r?0:1)<l.level?re.cursor(d.side(!r,n)+t.from,d.forward(r,n)?1:-1,d.level):re.cursor(u+t.from,l.forward(r,n)?-1:1,l.level)}function Mj(t,e,n){for(let i=e;i<n;i++){let r=TN(t.charCodeAt(i));if(r==1)return Ml;if(r==2||r==4)return lS}return Ml}const MN=Ae.define(),DN=Ae.define(),IN=Ae.define(),LN=Ae.define(),Wb=Ae.define(),BN=Ae.define(),jN=Ae.define(),FN=Ae.define({combine:t=>t.some(e=>e)}),zN=Ae.define({combine:t=>t.some(e=>e)});class zc{constructor(e,n="nearest",i="nearest",r=5,s=5,o=!1){this.range=e,this.y=n,this.x=i,this.yMargin=r,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new zc(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new zc(re.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const ip=Ke.define({map:(t,e)=>t.map(e)});function Hr(t,e,n){let i=t.facet(LN);i.length?i[0](e):window.onerror?window.onerror(String(e),n,void 0,void 0,e):n?console.error(n+":",e):console.error(e)}const Cv=Ae.define({combine:t=>t.length?t[0]:!0});let Dj=0;const xd=Ae.define();class Dn{constructor(e,n,i,r,s){this.id=e,this.create=n,this.domEventHandlers=i,this.domEventObservers=r,this.extension=s(this)}static define(e,n){const{eventHandlers:i,eventObservers:r,provide:s,decorations:o}=n||{};return new Dn(Dj++,e,i,r,a=>{let l=[xd.of(a)];return o&&l.push(kf.of(c=>{let u=c.plugin(a);return u?o(u):Xe.none})),s&&l.push(s(a)),l})}static fromClass(e,n){return Dn.define(i=>new e(i),n)}}class ny{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(i){if(Hr(n.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(n){Hr(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(i){Hr(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const UN=Ae.define(),cS=Ae.define(),kf=Ae.define(),VN=Ae.define(),uS=Ae.define(),HN=Ae.define();function AE(t,e){let n=t.state.facet(HN);if(!n.length)return n;let i=n.map(s=>s instanceof Function?s(t):s),r=[];return ut.spans(i,e.from,e.to,{point(){},span(s,o,a,l){let c=s-e.from,u=o-e.from,d=r;for(let f=a.length-1;f>=0;f--,l--){let h=a[f].spec.bidiIsolate,p;if(h==null&&(h=Mj(e.text,c,u)),l>0&&d.length&&(p=d[d.length-1]).to==c&&p.direction==h)p.to=u,d=p.inner;else{let m={from:c,to:u,direction:h,inner:[]};d.push(m),d=m.inner}}}}),r}const WN=Ae.define();function GN(t){let e=0,n=0,i=0,r=0;for(let s of t.state.facet(WN)){let o=s(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(n=Math.max(n,o.right)),o.top!=null&&(i=Math.max(i,o.top)),o.bottom!=null&&(r=Math.max(r,o.bottom)))}return{left:e,right:n,top:i,bottom:r}}const Sd=Ae.define();class vr{constructor(e,n,i,r){this.fromA=e,this.toA=n,this.fromB=i,this.toB=r}join(e){return new vr(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,i=this;for(;n>0;n--){let r=e[n-1];if(!(r.fromA>i.toA)){if(r.toA<i.fromA)break;i=i.join(r),e.splice(n-1,1)}}return e.splice(n,0,i),e}static extendWithRanges(e,n){if(n.length==0)return e;let i=[];for(let r=0,s=0,o=0,a=0;;r++){let l=r==e.length?null:e[r],c=o-a,u=l?l.fromB:1e9;for(;s<n.length&&n[s]<u;){let d=n[s],f=n[s+1],h=Math.max(a,d),p=Math.min(u,f);if(h<=p&&new vr(h+c,p+c,h,p).addToSet(i),f>u)break;s+=2}if(!l)return i;new vr(l.fromA,l.toA,l.fromB,l.toB).addToSet(i),o=l.toA,a=l.toB}}}class dg{constructor(e,n,i){this.view=e,this.state=n,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=on.empty(this.startState.doc.length);for(let s of i)this.changes=this.changes.compose(s.changes);let r=[];this.changes.iterChangedRanges((s,o,a,l)=>r.push(new vr(s,o,a,l))),this.changedRanges=r}static create(e,n,i){return new dg(e,n,i)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class PE extends $t{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new rn],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new vr(0,0,0,e.state.doc.length)],0,null)}update(e){var n;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:c,toA:u})=>u<this.minWidthFrom||c>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0);let r=-1;this.view.inputState.composing>=0&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?r=this.domChanged.newSel.head:!Uj(e.changes,this.hasComposition)&&!e.selectionSet&&(r=e.state.selection.main.head));let s=r>-1?Lj(this.view,e.changes,r):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:c,to:u}=this.hasComposition;i=new vr(c,u,e.changes.mapPos(c,-1),e.changes.mapPos(u,1)).addToSet(i.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(Ee.ie||Ee.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,a=this.updateDeco(),l=Fj(o,a,e.changes);return i=vr.extendWithRanges(i,l),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,i);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=Ee.chrome||Ee.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||r.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof ma&&o.widget instanceof $E&&s.push(o.dom);r.updateGaps(s)}updateChildren(e,n,i){let r=i?i.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let o=r.length-1;;o--){let a=o>=0?r[o]:null;if(!a)break;let{fromA:l,toA:c,fromB:u,toB:d}=a,f,h,p,m;if(i&&i.range.fromB<d&&i.range.toB>u){let k=Ud.build(this.view.state.doc,u,i.range.fromB,this.decorations,this.dynamicDecorationMap),_=Ud.build(this.view.state.doc,i.range.toB,d,this.decorations,this.dynamicDecorationMap);h=k.breakAtStart,p=k.openStart,m=_.openEnd;let P=this.compositionView(i);_.breakAtStart?P.breakAfter=1:_.content.length&&P.merge(P.length,P.length,_.content[0],!1,_.openStart,0)&&(P.breakAfter=_.content[0].breakAfter,_.content.shift()),k.content.length&&P.merge(0,0,k.content[k.content.length-1],!0,0,k.openEnd)&&k.content.pop(),f=k.content.concat(P).concat(_.content)}else({content:f,breakAtStart:h,openStart:p,openEnd:m}=Ud.build(this.view.state.doc,u,d,this.decorations,this.dynamicDecorationMap));let{i:w,off:v}=s.findPos(c,1),{i:y,off:x}=s.findPos(l,-1);xN(this,y,x,w,v,f,h,p,m)}i&&this.fixCompositionDOM(i)}compositionView(e){let n=new ho(e.text.nodeValue);n.flags|=8;for(let{deco:r}of e.marks)n=new po(r,[n],n.length);let i=new rn;return i.append(n,0),i}fixCompositionDOM(e){let n=(s,o)=>{o.flags|=8|(o.children.some(l=>l.flags&7)?1:0),this.markedForComposition.add(o);let a=$t.get(s);a&&a!=o&&(a.dom=null),o.setDOM(s)},i=this.childPos(e.range.fromB,1),r=this.children[i.i];n(e.line,r);for(let s=e.marks.length-1;s>=-1;s--)i=r.childPos(i.off,1),r=r.children[i.i],n(s>=0?e.marks[s].node:e.text,r)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,r=i==this.dom,s=!r&&cm(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(r||n||s))return;let o=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(a.anchor)),c=a.empty?l:this.moveToLine(this.domAtPos(a.head));if(Ee.gecko&&a.empty&&!this.hasComposition&&Ij(l)){let d=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(d,l.node.childNodes[l.offset]||null)),l=c=new Vn(d,0),o=!0}let u=this.view.observer.selectionRange;(o||!u.focusNode||(!zd(l.node,l.offset,u.anchorNode,u.anchorOffset)||!zd(c.node,c.offset,u.focusNode,u.focusOffset))&&!this.suppressWidgetCursorChange(u,a))&&(this.view.observer.ignore(()=>{Ee.android&&Ee.chrome&&this.dom.contains(u.focusNode)&&zj(u.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let d=ug(this.view.root);if(d)if(a.empty){if(Ee.gecko){let f=Bj(l.node,l.offset);if(f&&f!=3){let h=XN(l.node,l.offset,f==1?1:-1);h&&(l=new Vn(h.node,h.offset))}}d.collapse(l.node,l.offset),a.bidiLevel!=null&&d.caretBidiLevel!==void 0&&(d.caretBidiLevel=a.bidiLevel)}else if(d.extend){d.collapse(l.node,l.offset);try{d.extend(c.node,c.offset)}catch{}}else{let f=document.createRange();a.anchor>a.head&&([l,c]=[c,l]),f.setEnd(c.node,c.offset),f.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(f)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(l,c)),this.impreciseAnchor=l.precise?null:new Vn(u.anchorNode,u.anchorOffset),this.impreciseHead=c.precise?null:new Vn(u.focusNode,u.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&zd(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,i=ug(e.root),{anchorNode:r,anchorOffset:s}=e.observer.selectionRange;if(!i||!n.empty||!n.assoc||!i.modify)return;let o=rn.find(this,n.head);if(!o)return;let a=o.posAtStart;if(n.head==a||n.head==a+o.length)return;let l=this.coordsAt(n.head,-1),c=this.coordsAt(n.head,1);if(!l||!c||l.bottom>c.top)return;let u=this.domAtPos(n.head+n.assoc);i.collapse(u.node,u.offset),i.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let d=e.observer.selectionRange;e.docView.posFromDOM(d.anchorNode,d.anchorOffset)!=n.from&&i.collapse(r,s)}moveToLine(e){let n=this.dom,i;if(e.node!=n)return e;for(let r=e.offset;!i&&r<n.childNodes.length;r++){let s=$t.get(n.childNodes[r]);s instanceof rn&&(i=s.domAtPos(0))}for(let r=e.offset-1;!i&&r>=0;r--){let s=$t.get(n.childNodes[r]);s instanceof rn&&(i=s.domAtPos(s.length))}return i?new Vn(i.node,i.offset,!0):e}nearest(e){for(let n=e;n;){let i=$t.get(n);if(i&&i.rootView==this)return i;n=n.parentNode}return null}posFromDOM(e,n){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,n)+i.posAtStart}domAtPos(e){let{i:n,off:i}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let r=this.children[n];if(i<r.length||r instanceof rn)break;n++,i=0}return this.children[n].domAtPos(i)}coordsAt(e,n){let i=null,r=0;for(let s=this.length,o=this.children.length-1;o>=0;o--){let a=this.children[o],l=s-a.breakAfter,c=l-a.length;if(l<e)break;c<=e&&(c<e||a.covers(-1))&&(l>e||a.covers(1))&&(!i||a instanceof rn&&!(i instanceof rn&&n>=0))&&(i=a,r=c),s=c}return i?i.coordsAt(e-r,n):null}coordsForChar(e){let{i:n,off:i}=this.childPos(e,1),r=this.children[n];if(!(r instanceof rn))return null;for(;r.children.length;){let{i:a,off:l}=r.childPos(i,1);for(;;a++){if(a==r.children.length)return null;if((r=r.children[a]).length)break}i=l}if(!(r instanceof ho))return null;let s=Tn(r.text,i);if(s==i)return null;let o=Rl(r.dom,i,s).getClientRects();for(let a=0;a<o.length;a++){let l=o[a];if(a==o.length-1||l.top<l.bottom&&l.left<l.right)return l}return null}measureVisibleLineHeights(e){let n=[],{from:i,to:r}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==Ot.LTR;for(let c=0,u=0;u<this.children.length;u++){let d=this.children[u],f=c+d.length;if(f>r)break;if(c>=i){let h=d.dom.getBoundingClientRect();if(n.push(h.height),o){let p=d.dom.lastChild,m=p?xf(p):[];if(m.length){let w=m[m.length-1],v=l?w.right-h.left:h.right-w.left;v>a&&(a=v,this.minWidth=s,this.minWidthFrom=c,this.minWidthTo=f)}}}c=f+d.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?Ot.RTL:Ot.LTR}measureTextSize(){for(let s of this.children)if(s instanceof rn){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),n,i,r;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=xf(e.firstChild)[0];n=e.getBoundingClientRect().height,i=s?s.width/27:7,r=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:i,textHeight:r}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new bN(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let i=0,r=0;;r++){let s=r==n.viewports.length?null:n.viewports[r],o=s?s.from-1:this.length;if(o>i){let a=(n.lineBlockAt(o).bottom-n.lineBlockAt(i).top)/this.view.scaleY;e.push(Xe.replace({widget:new $E(a),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!s)break;i=s.to+1}return Xe.set(e)}updateDeco(){let e=this.view.state.facet(kf).map((r,s)=>(this.dynamicDecorationMap[s]=typeof r=="function")?r(this.view):r),n=!1,i=this.view.state.facet(VN).map((r,s)=>{let o=typeof r=="function";return o&&(n=!0),o?r(this.view):r});i.length&&(this.dynamicDecorationMap[e.length]=n,e.push(ut.join(i)));for(let r=e.length;r<e.length+3;r++)this.dynamicDecorationMap[r]=!1;return this.decorations=[...e,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){if(e.isSnapshot){let c=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=c.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}let{range:n}=e,i=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),r;if(!i)return;!n.empty&&(r=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(i={left:Math.min(i.left,r.left),top:Math.min(i.top,r.top),right:Math.max(i.right,r.right),bottom:Math.max(i.bottom,r.bottom)});let s=GN(this.view),o={left:i.left-s.left,top:i.top-s.top,right:i.right+s.right,bottom:i.bottom+s.bottom},{offsetWidth:a,offsetHeight:l}=this.view.scrollDOM;gj(this.view.scrollDOM,o,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==Ot.LTR)}}function Ij(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}class $E extends La{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}}function KN(t,e){let n=t.observer.selectionRange,i=n.focusNode&&XN(n.focusNode,n.focusOffset,0);if(!i)return null;let r=e-i.offset;return{from:r,to:r+i.node.nodeValue.length,node:i.node}}function Lj(t,e,n){let i=KN(t,n);if(!i)return null;let{node:r,from:s,to:o}=i,a=r.nodeValue;if(/[\n\r]/.test(a)||t.state.doc.sliceString(i.from,i.to)!=a)return null;let l=e.invertedDesc,c=new vr(l.mapPos(s),l.mapPos(o),s,o),u=[];for(let d=r.parentNode;;d=d.parentNode){let f=$t.get(d);if(f instanceof po)u.push({node:d,deco:f.mark});else{if(f instanceof rn||d.nodeName=="DIV"&&d.parentNode==t.contentDOM)return{range:c,text:r,marks:u,line:d};if(d!=t.contentDOM)u.push({node:d,deco:new ph({inclusive:!0,attributes:_j(d),tagName:d.tagName.toLowerCase()})});else return null}}}function XN(t,e,n){if(n<=0)for(let i=t,r=e;;){if(i.nodeType==3)return{node:i,offset:r};if(i.nodeType==1&&r>0)i=i.childNodes[r-1],r=fo(i);else break}if(n>=0)for(let i=t,r=e;;){if(i.nodeType==3)return{node:i,offset:r};if(i.nodeType==1&&r<i.childNodes.length&&n>=0)i=i.childNodes[r],r=0;else break}return null}function Bj(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let jj=class{constructor(){this.changes=[]}compareRange(e,n){zb(e,n,this.changes)}comparePoint(e,n){zb(e,n,this.changes)}};function Fj(t,e,n){let i=new jj;return ut.compare(t,e,n,i),i.changes}function zj(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function Uj(t,e){let n=!1;return e&&t.iterChangedRanges((i,r)=>{i<e.to&&r>e.from&&(n=!0)}),n}function Vj(t,e,n=1){let i=t.charCategorizer(e),r=t.doc.lineAt(e),s=e-r.from;if(r.length==0)return re.cursor(e);s==0?n=1:s==r.length&&(n=-1);let o=s,a=s;n<0?o=Tn(r.text,s,!1):a=Tn(r.text,s);let l=i(r.text.slice(o,a));for(;o>0;){let c=Tn(r.text,o,!1);if(i(r.text.slice(c,o))!=l)break;o=c}for(;a<r.length;){let c=Tn(r.text,a);if(i(r.text.slice(a,c))!=l)break;a=c}return re.range(o+r.from,a+r.from)}function Hj(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function Wj(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function iy(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function TE(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function OE(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function Gb(t,e,n){let i,r,s,o,a=!1,l,c,u,d;for(let p=t.firstChild;p;p=p.nextSibling){let m=xf(p);for(let w=0;w<m.length;w++){let v=m[w];r&&iy(r,v)&&(v=TE(OE(v,r.bottom),r.top));let y=Hj(e,v),x=Wj(n,v);if(y==0&&x==0)return p.nodeType==3?NE(p,e,n):Gb(p,e,n);if(!i||o>x||o==x&&s>y){i=p,r=v,s=y,o=x;let k=x?n<v.top?-1:1:y?e<v.left?-1:1:0;a=!k||(k>0?w<m.length-1:w>0)}y==0?n>v.bottom&&(!u||u.bottom<v.bottom)?(l=p,u=v):n<v.top&&(!d||d.top>v.top)&&(c=p,d=v):u&&iy(u,v)?u=OE(u,v.bottom):d&&iy(d,v)&&(d=TE(d,v.top))}}if(u&&u.bottom>=n?(i=l,r=u):d&&d.top<=n&&(i=c,r=d),!i)return{node:t,offset:0};let f=Math.max(r.left,Math.min(r.right,e));if(i.nodeType==3)return NE(i,f,n);if(a&&i.contentEditable!="false")return Gb(i,f,n);let h=Array.prototype.indexOf.call(t.childNodes,i)+(e>=(r.left+r.right)/2?1:0);return{node:t,offset:h}}function NE(t,e,n){let i=t.nodeValue.length,r=-1,s=1e9,o=0;for(let a=0;a<i;a++){let l=Rl(t,a,a+1).getClientRects();for(let c=0;c<l.length;c++){let u=l[c];if(u.top==u.bottom)continue;o||(o=e-u.left);let d=(u.top>n?u.top-n:n-u.bottom)-1;if(u.left-1<=e&&u.right+1>=e&&d<s){let f=e>=(u.left+u.right)/2,h=f;if((Ee.chrome||Ee.gecko)&&Rl(t,a).getBoundingClientRect().left==u.right&&(h=!f),d<=0)return{node:t,offset:a+(h?1:0)};r=a+(h?1:0),s=d}}}return{node:t,offset:r>-1?r:o>0?t.nodeValue.length:0}}function qN(t,e,n,i=-1){var r,s;let o=t.contentDOM.getBoundingClientRect(),a=o.top+t.viewState.paddingTop,l,{docHeight:c}=t.viewState,{x:u,y:d}=e,f=d-a;if(f<0)return 0;if(f>c)return t.state.doc.length;for(let k=t.viewState.heightOracle.textHeight/2,_=!1;l=t.elementAtHeight(f),l.type!=Qn.Text;)for(;f=i>0?l.bottom+k:l.top-k,!(f>=0&&f<=c);){if(_)return n?null:0;_=!0,i=-i}d=a+f;let h=l.from;if(h<t.viewport.from)return t.viewport.from==0?0:n?null:RE(t,o,l,u,d);if(h>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:RE(t,o,l,u,d);let p=t.dom.ownerDocument,m=t.root.elementFromPoint?t.root:p,w=m.elementFromPoint(u,d);w&&!t.contentDOM.contains(w)&&(w=null),w||(u=Math.max(o.left+1,Math.min(o.right-1,u)),w=m.elementFromPoint(u,d),w&&!t.contentDOM.contains(w)&&(w=null));let v,y=-1;if(w&&((r=t.docView.nearest(w))===null||r===void 0?void 0:r.isEditable)!=!1){if(p.caretPositionFromPoint){let k=p.caretPositionFromPoint(u,d);k&&({offsetNode:v,offset:y}=k)}else if(p.caretRangeFromPoint){let k=p.caretRangeFromPoint(u,d);k&&({startContainer:v,startOffset:y}=k,(!t.contentDOM.contains(v)||Ee.safari&&Gj(v,y,u)||Ee.chrome&&Kj(v,y,u))&&(v=void 0))}}if(!v||!t.docView.dom.contains(v)){let k=rn.find(t.docView,h);if(!k)return f>l.top+l.height/2?l.to:l.from;({node:v,offset:y}=Gb(k.dom,u,d))}let x=t.docView.nearest(v);if(!x)return null;if(x.isWidget&&((s=x.dom)===null||s===void 0?void 0:s.nodeType)==1){let k=x.dom.getBoundingClientRect();return e.y<k.top||e.y<=k.bottom&&e.x<=(k.left+k.right)/2?x.posAtStart:x.posAtEnd}else return x.localPosFromDOM(v,y)+x.posAtStart}function RE(t,e,n,i,r){let s=Math.round((i-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let a=t.viewState.heightOracle.textHeight,l=Math.floor((r-n.top-(t.defaultLineHeight-a)*.5)/a);s+=l*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(n.from,n.to);return n.from+cj(o,s,t.state.tabSize)}function Gj(t,e,n){let i;if(t.nodeType!=3||e!=(i=t.nodeValue.length))return!1;for(let r=t.nextSibling;r;r=r.nextSibling)if(r.nodeType!=1||r.nodeName!="BR")return!1;return Rl(t,i-1,i).getBoundingClientRect().left>n}function Kj(t,e,n){if(e!=0)return!1;for(let r=t;;){let s=r.parentNode;if(!s||s.nodeType!=1||s.firstChild!=r)return!1;if(s.classList.contains("cm-line"))break;r=s}let i=t.nodeType==1?t.getBoundingClientRect():Rl(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-i.left>5}function Kb(t,e){let n=t.lineBlockAt(e);if(Array.isArray(n.type)){for(let i of n.type)if(i.to>e||i.to==e&&(i.to==n.to||i.type==Qn.Text))return i}return n}function Xj(t,e,n,i){let r=Kb(t,e.head),s=!i||r.type!=Qn.Text||!(t.lineWrapping||r.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(s){let o=t.dom.getBoundingClientRect(),a=t.textDirectionAt(r.from),l=t.posAtCoords({x:n==(a==Ot.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(l!=null)return re.cursor(l,n?-1:1)}return re.cursor(n?r.to:r.from,n?-1:1)}function ME(t,e,n,i){let r=t.state.doc.lineAt(e.head),s=t.bidiSpans(r),o=t.textDirectionAt(r.from);for(let a=e,l=null;;){let c=Rj(r,s,o,a,n),u=RN;if(!c){if(r.number==(n?t.state.doc.lines:1))return a;u=`
`,r=t.state.doc.line(r.number+(n?1:-1)),s=t.bidiSpans(r),c=t.visualLineSide(r,!n)}if(l){if(!l(u))return a}else{if(!i)return c;l=i(u)}a=c}}function qj(t,e,n){let i=t.state.charCategorizer(e),r=i(n);return s=>{let o=i(s);return r==On.Space&&(r=o),r==o}}function Yj(t,e,n,i){let r=e.head,s=n?1:-1;if(r==(n?t.state.doc.length:0))return re.cursor(r,e.assoc);let o=e.goalColumn,a,l=t.contentDOM.getBoundingClientRect(),c=t.coordsAtPos(r,e.assoc||-1),u=t.documentTop;if(c)o==null&&(o=c.left-l.left),a=s<0?c.top:c.bottom;else{let h=t.viewState.lineBlockAt(r);o==null&&(o=Math.min(l.right-l.left,t.defaultCharacterWidth*(r-h.from))),a=(s<0?h.top:h.bottom)+u}let d=l.left+o,f=i??t.viewState.heightOracle.textHeight>>1;for(let h=0;;h+=10){let p=a+(f+h)*s,m=qN(t,{x:d,y:p},!1,s);if(p<l.top||p>l.bottom||(s<0?m<r:m>r)){let w=t.docView.coordsForChar(m),v=!w||p<w.top?-1:1;return re.cursor(m,v,void 0,o)}}}function um(t,e,n){for(;;){let i=0;for(let r of t)r.between(e-1,e+1,(s,o,a)=>{if(e>s&&e<o){let l=i||n||(e-s<o-e?-1:1);e=l<0?s:o,i=l}});if(!i)return e}}function ry(t,e,n){let i=um(t.state.facet(uS).map(r=>r(t)),n.from,e.head>n.from?-1:1);return i==n.from?n:re.cursor(i,i<n.from?1:-1)}class Jj{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Ee.safari&&e.contentDOM.addEventListener("input",()=>null),Ee.gecko&&hF(e.contentDOM.ownerDocument)}handleEvent(e){!sF(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||this.runHandlers(e.type,e)}runHandlers(e,n){let i=this.handlers[e];if(i){for(let r of i.observers)r(this.view,n);for(let r of i.handlers){if(n.defaultPrevented)break;if(r(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=Zj(e),i=this.handlers,r=this.view.contentDOM;for(let s in n)if(s!="scroll"){let o=!n[s].handlers.length,a=i[s];a&&o!=!a.handlers.length&&(r.removeEventListener(s,this.handleEvent),a=null),a||r.addEventListener(s,this.handleEvent,{passive:o})}for(let s in i)s!="scroll"&&!n[s]&&r.removeEventListener(s,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(e.keyCode!=27&&JN.indexOf(e.keyCode)<0&&(this.view.inputState.lastEscPress=0),Ee.android&&Ee.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return Ee.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=YN.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||Qj.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(){let e=this.pendingIOSKey;return e?(this.pendingIOSKey=void 0,Fc(this.view.contentDOM,e.key,e.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:Ee.safari&&!Ee.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function DE(t,e){return(n,i)=>{try{return e.call(t,i,n)}catch(r){Hr(n.state,r)}}}function Zj(t){let e=Object.create(null);function n(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of t){let r=i.spec;if(r&&r.domEventHandlers)for(let s in r.domEventHandlers){let o=r.domEventHandlers[s];o&&n(s).handlers.push(DE(i.value,o))}if(r&&r.domEventObservers)for(let s in r.domEventObservers){let o=r.domEventObservers[s];o&&n(s).observers.push(DE(i.value,o))}}for(let i in qr)n(i).handlers.push(qr[i]);for(let i in Yr)n(i).observers.push(Yr[i]);return e}const YN=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Qj="dthko",JN=[16,17,18,20,91,92,224,225],rp=6;function sp(t){return Math.max(0,t)*.7+8}function eF(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class tF{constructor(e,n,i,r){this.view=e,this.startEvent=n,this.style=i,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParent=vj(e.contentDOM),this.atoms=e.state.facet(uS).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(Ye.allowMultipleSelections)&&nF(e,n),this.dragging=rF(e,n)&&tR(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){var n;if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&eF(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let i=0,r=0,s=((n=this.scrollParent)===null||n===void 0?void 0:n.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},o=GN(this.view);e.clientX-o.left<=s.left+rp?i=-sp(s.left-e.clientX):e.clientX+o.right>=s.right-rp&&(i=sp(e.clientX-s.right)),e.clientY-o.top<=s.top+rp?r=-sp(s.top-e.clientY):e.clientY+o.bottom>=s.bottom-rp&&(r=sp(e.clientY-s.bottom)),this.setScrollSpeed(i,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let n=null;for(let i=0;i<e.ranges.length;i++){let r=e.ranges[i],s=null;if(r.empty){let o=um(this.atoms,r.from,0);o!=r.from&&(s=re.cursor(o,-1))}else{let o=um(this.atoms,r.from,-1),a=um(this.atoms,r.to,1);(o!=r.from||a!=r.to)&&(s=re.range(r.from==r.anchor?o:a,r.from==r.head?o:a))}s&&(n||(n=e.ranges.slice()),n[i]=s)}return n?re.create(n,e.mainIndex):e}select(e){let{view:n}=this,i=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function nF(t,e){let n=t.state.facet(MN);return n.length?n[0](e):Ee.mac?e.metaKey:e.ctrlKey}function iF(t,e){let n=t.state.facet(DN);return n.length?n[0](e):Ee.mac?!e.altKey:!e.ctrlKey}function rF(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let i=ug(t.root);if(!i||i.rangeCount==0)return!0;let r=i.getRangeAt(0).getClientRects();for(let s=0;s<r.length;s++){let o=r[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function sF(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,i;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(i=$t.get(n))&&i.ignoreEvent(e))return!1;return!0}const qr=Object.create(null),Yr=Object.create(null),ZN=Ee.ie&&Ee.ie_version<15||Ee.ios&&Ee.webkit_version<604;function oF(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),QN(t,n.value)},50)}function QN(t,e){let{state:n}=t,i,r=1,s=n.toText(e),o=s.lines==n.selection.ranges.length;if(Xb!=null&&n.selection.ranges.every(l=>l.empty)&&Xb==s.toString()){let l=-1;i=n.changeByRange(c=>{let u=n.doc.lineAt(c.from);if(u.from==l)return{range:c};l=u.from;let d=n.toText((o?s.line(r++).text:e)+n.lineBreak);return{changes:{from:u.from,insert:d},range:re.cursor(c.from+d.length)}})}else o?i=n.changeByRange(l=>{let c=s.line(r++);return{changes:{from:l.from,to:l.to,insert:c.text},range:re.cursor(l.from+c.length)}}):i=n.replaceSelection(s);t.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}Yr.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};qr.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&(t.inputState.lastEscPress=Date.now()),!1);Yr.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};Yr.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};qr.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let i of t.state.facet(IN))if(n=i(t,e),n)break;if(!n&&e.button==0&&(n=cF(t,e)),n){let i=!t.hasFocus;t.inputState.startMouseSelection(new tF(t,e,n,i)),i&&t.observer.ignore(()=>vN(t.contentDOM));let r=t.inputState.mouseSelection;if(r)return r.start(e),r.dragging===!1}return!1};function IE(t,e,n,i){if(i==1)return re.cursor(e,n);if(i==2)return Vj(t.state,e,n);{let r=rn.find(t.docView,e),s=t.state.doc.lineAt(r?r.posAtEnd:e),o=r?r.posAtStart:s.from,a=r?r.posAtEnd:s.to;return a<t.state.doc.length&&a==s.to&&a++,re.range(o,a)}}let eR=(t,e)=>t>=e.top&&t<=e.bottom,LE=(t,e,n)=>eR(e,n)&&t>=n.left&&t<=n.right;function aF(t,e,n,i){let r=rn.find(t.docView,e);if(!r)return 1;let s=e-r.posAtStart;if(s==0)return 1;if(s==r.length)return-1;let o=r.coordsAt(s,-1);if(o&&LE(n,i,o))return-1;let a=r.coordsAt(s,1);return a&&LE(n,i,a)?1:o&&eR(i,o)?-1:1}function BE(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:aF(t,n,e.clientX,e.clientY)}}const lF=Ee.ie&&Ee.ie_version<=11;let jE=null,FE=0,zE=0;function tR(t){if(!lF)return t.detail;let e=jE,n=zE;return jE=t,zE=Date.now(),FE=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(FE+1)%3:1}function cF(t,e){let n=BE(t,e),i=tR(e),r=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),r=r.map(s.changes))},get(s,o,a){let l=BE(t,s),c,u=IE(t,l.pos,l.bias,i);if(n.pos!=l.pos&&!o){let d=IE(t,n.pos,n.bias,i),f=Math.min(d.from,u.from),h=Math.max(d.to,u.to);u=f<u.from?re.range(f,h):re.range(h,f)}return o?r.replaceRange(r.main.extend(u.from,u.to)):a&&i==1&&r.ranges.length>1&&(c=uF(r,l.pos))?c:a?r.addRange(u):re.create([u])}}}function uF(t,e){for(let n=0;n<t.ranges.length;n++){let{from:i,to:r}=t.ranges[n];if(i<=e&&r>=e)return re.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}qr.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let r=t.docView.nearest(e.target);if(r&&r.isWidget){let s=r.posAtStart,o=s+r.length;(s>=n.to||o<=n.from)&&(n=re.range(s,o))}}let{inputState:i}=t;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",t.state.sliceDoc(n.from,n.to)),e.dataTransfer.effectAllowed="copyMove"),!1};qr.dragend=t=>(t.inputState.draggedContent=null,!1);function UE(t,e,n,i){if(!n)return;let r=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=t.inputState,o=i&&s&&iF(t,e)?{from:s.from,to:s.to}:null,a={from:r,insert:n},l=t.state.changes(o?[o,a]:a);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(r,-1),head:l.mapPos(r,1)},userEvent:o?"move.drop":"input.drop"}),t.inputState.draggedContent=null}qr.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let i=Array(n.length),r=0,s=()=>{++r==n.length&&UE(t,e,i.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<n.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(i[o]=a.result),s()},a.readAsText(n[o])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return UE(t,e,i,!0),!0}return!1};qr.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=ZN?null:e.clipboardData;return n?(QN(t,n.getData("text/plain")||n.getData("text/uri-text")),!0):(oF(t),!1)};function dF(t,e){let n=t.dom.parentNode;if(!n)return;let i=n.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),t.focus()},50)}function fF(t){let e=[],n=[],i=!1;for(let r of t.selection.ranges)r.empty||(e.push(t.sliceDoc(r.from,r.to)),n.push(r));if(!e.length){let r=-1;for(let{from:s}of t.selection.ranges){let o=t.doc.lineAt(s);o.number>r&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),r=o.number}i=!0}return{text:e.join(t.lineBreak),ranges:n,linewise:i}}let Xb=null;qr.copy=qr.cut=(t,e)=>{let{text:n,ranges:i,linewise:r}=fF(t.state);if(!n&&!r)return!1;Xb=r?n:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let s=ZN?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",n),!0):(dF(t,n),!1)};const nR=So.define();function iR(t,e){let n=[];for(let i of t.facet(jN)){let r=i(t,e);r&&n.push(r)}return n?t.update({effects:n,annotations:nR.of(!0)}):null}function rR(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=iR(t.state,e);n?t.dispatch(n):t.update([])}},10)}Yr.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),rR(t)};Yr.blur=t=>{t.observer.clearSelectionRange(),rR(t)};Yr.compositionstart=Yr.compositionupdate=t=>{t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0)};Yr.compositionend=t=>{t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,Ee.chrome&&Ee.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50)};Yr.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};qr.beforeinput=(t,e)=>{var n;let i;if(Ee.chrome&&Ee.android&&(i=YN.find(r=>r.inputType==e.inputType))&&(t.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let r=((n=window.visualViewport)===null||n===void 0?void 0:n.height)||0;setTimeout(()=>{var s;(((s=window.visualViewport)===null||s===void 0?void 0:s.height)||0)>r+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return!1};const VE=new Set;function hF(t){VE.has(t)||(VE.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const HE=["pre-wrap","normal","pre-line","break-spaces"];class pF{constructor(e){this.lineWrapping=e,this.doc=lt.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,n){let i=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((n-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return HE.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let i=0;i<e.length;i++){let r=e[i];r<0?i++:this.heightSamples[Math.floor(r*10)]||(n=!0,this.heightSamples[Math.floor(r*10)]=!0)}return n}refresh(e,n,i,r,s,o){let a=HE.indexOf(e)>-1,l=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=n,this.charWidth=i,this.textHeight=r,this.lineLength=s,l){this.heightSamples={};for(let c=0;c<o.length;c++){let u=o[c];u<0?c++:this.heightSamples[Math.floor(u*10)]=!0}}return l}}class mF{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class bs{constructor(e,n,i,r,s){this.from=e,this.length=n,this.top=i,this.height=r,this._content=s}get type(){return typeof this._content=="number"?Qn.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof ka?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new bs(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var At=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(At||(At={}));const dm=.001;class ei{constructor(e,n,i=2){this.length=e,this.height=n,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,n){this.height!=n&&(Math.abs(this.height-n)>dm&&(e.heightChanged=!0),this.height=n)}replace(e,n,i){return ei.of(i)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,i,r){let s=this,o=i.doc;for(let a=r.length-1;a>=0;a--){let{fromA:l,toA:c,fromB:u,toB:d}=r[a],f=s.lineAt(l,At.ByPosNoHeight,i.setDoc(n),0,0),h=f.to>=c?f:s.lineAt(c,At.ByPosNoHeight,i,0,0);for(d+=h.to-c,c=h.to;a>0&&f.from<=r[a-1].toA;)l=r[a-1].fromA,u=r[a-1].fromB,a--,l<f.from&&(f=s.lineAt(l,At.ByPosNoHeight,i,0,0));u+=f.from-l,l=f.from;let p=dS.build(i.setDoc(o),e,u,d);s=s.replace(l,c,p)}return s.updateHeight(i,0)}static empty(){return new Ii(0,0)}static of(e){if(e.length==1)return e[0];let n=0,i=e.length,r=0,s=0;for(;;)if(n==i)if(r>s*2){let a=e[n-1];a.break?e.splice(--n,1,a.left,null,a.right):e.splice(--n,1,a.left,a.right),i+=1+a.break,r-=a.size}else if(s>r*2){let a=e[i];a.break?e.splice(i,1,a.left,null,a.right):e.splice(i,1,a.left,a.right),i+=2+a.break,s-=a.size}else break;else if(r<s){let a=e[n++];a&&(r+=a.size)}else{let a=e[--i];a&&(s+=a.size)}let o=0;return e[n-1]==null?(o=1,n--):e[n]==null&&(o=1,i++),new gF(ei.of(e.slice(0,n)),o,ei.of(e.slice(i)))}}ei.prototype.size=1;class sR extends ei{constructor(e,n,i){super(e,n),this.deco=i}blockAt(e,n,i,r){return new bs(r,this.length,i,this.height,this.deco||0)}lineAt(e,n,i,r,s){return this.blockAt(0,i,r,s)}forEachLine(e,n,i,r,s,o){e<=s+this.length&&n>=s&&o(this.blockAt(0,i,r,s))}updateHeight(e,n=0,i=!1,r){return r&&r.from<=n&&r.more&&this.setHeight(e,r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Ii extends sR{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,i,r){return new bs(r,this.length,i,this.height,this.breaks)}replace(e,n,i){let r=i[0];return i.length==1&&(r instanceof Ii||r instanceof xn&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof xn?r=new Ii(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):ei.of(i)}updateHeight(e,n=0,i=!1,r){return r&&r.from<=n&&r.more?this.setHeight(e,r.heights[r.index++]):(i||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class xn extends ei{constructor(e){super(e,0)}heightMetrics(e,n){let i=e.doc.lineAt(n).number,r=e.doc.lineAt(n+this.length).number,s=r-i+1,o,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*s);o=l/s,this.length>s+1&&(a=(this.height-l)/(this.length-s-1))}else o=this.height/s;return{firstLine:i,lastLine:r,perLine:o,perChar:a}}blockAt(e,n,i,r){let{firstLine:s,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(n,r);if(n.lineWrapping){let c=r+Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length),u=n.doc.lineAt(c),d=a+u.length*l,f=Math.max(i,e-d/2);return new bs(u.from,u.length,f,d,0)}else{let c=Math.max(0,Math.min(o-s,Math.floor((e-i)/a))),{from:u,length:d}=n.doc.line(s+c);return new bs(u,d,i+a*c,a,0)}}lineAt(e,n,i,r,s){if(n==At.ByHeight)return this.blockAt(e,i,r,s);if(n==At.ByPosNoHeight){let{from:h,to:p}=i.doc.lineAt(e);return new bs(h,p-h,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(i,s),c=i.doc.lineAt(e),u=a+c.length*l,d=c.number-o,f=r+a*d+l*(c.from-s-d);return new bs(c.from,c.length,Math.max(r,Math.min(f,r+this.height-u)),u,0)}forEachLine(e,n,i,r,s,o){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:a,perLine:l,perChar:c}=this.heightMetrics(i,s);for(let u=e,d=r;u<=n;){let f=i.doc.lineAt(u);if(u==e){let p=f.number-a;d+=l*p+c*(e-s-p)}let h=l+c*f.length;o(new bs(f.from,f.length,d,h,0)),d+=h,u=f.to+1}}replace(e,n,i){let r=this.length-n;if(r>0){let s=i[i.length-1];s instanceof xn?i[i.length-1]=new xn(s.length+r):i.push(null,new xn(r-1))}if(e>0){let s=i[0];s instanceof xn?i[0]=new xn(e+s.length):i.unshift(new xn(e-1),null)}return ei.of(i)}decomposeLeft(e,n){n.push(new xn(e-1),null)}decomposeRight(e,n){n.push(null,new xn(this.length-e-1))}updateHeight(e,n=0,i=!1,r){let s=n+this.length;if(r&&r.from<=n+this.length&&r.more){let o=[],a=Math.max(n,r.from),l=-1;for(r.from>n&&o.push(new xn(r.from-n-1).updateHeight(e,n));a<=s&&r.more;){let u=e.doc.lineAt(a).length;o.length&&o.push(null);let d=r.heights[r.index++];l==-1?l=d:Math.abs(d-l)>=dm&&(l=-2);let f=new Ii(u,d);f.outdated=!1,o.push(f),a+=u+1}a<=s&&o.push(null,new xn(s-a).updateHeight(e,a));let c=ei.of(o);return(l<0||Math.abs(c.height-this.height)>=dm||Math.abs(l-this.heightMetrics(e,n).perLine)>=dm)&&(e.heightChanged=!0),c}else(i||this.outdated)&&(this.setHeight(e,e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class gF extends ei{constructor(e,n,i){super(e.length+n+i.length,e.height+i.height,n|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,n,i,r){let s=i+this.left.height;return e<s?this.left.blockAt(e,n,i,r):this.right.blockAt(e,n,s,r+this.left.length+this.break)}lineAt(e,n,i,r,s){let o=r+this.left.height,a=s+this.left.length+this.break,l=n==At.ByHeight?e<o:e<a,c=l?this.left.lineAt(e,n,i,r,s):this.right.lineAt(e,n,i,o,a);if(this.break||(l?c.to<a:c.from>a))return c;let u=n==At.ByPosNoHeight?At.ByPosNoHeight:At.ByPos;return l?c.join(this.right.lineAt(a,u,i,o,a)):this.left.lineAt(a,u,i,r,s).join(c)}forEachLine(e,n,i,r,s,o){let a=r+this.left.height,l=s+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,n,i,r,s,o),n>=l&&this.right.forEachLine(e,n,i,a,l,o);else{let c=this.lineAt(l,At.ByPos,i,r,s);e<c.from&&this.left.forEachLine(e,c.from-1,i,r,s,o),c.to>=e&&c.from<=n&&o(c),n>c.to&&this.right.forEachLine(c.to+1,n,i,a,l,o)}}replace(e,n,i){let r=this.left.length+this.break;if(n<r)return this.balanced(this.left.replace(e,n,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,n-r,i));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let a of i)s.push(a);if(e>0&&WE(s,o-1),n<this.length){let a=s.length;this.decomposeRight(n,s),WE(s,a)}return ei.of(s)}decomposeLeft(e,n){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(i++,e>=i&&n.push(null)),e>i&&this.right.decomposeLeft(e-i,n)}decomposeRight(e,n){let i=this.left.length,r=i+this.break;if(e>=r)return this.right.decomposeRight(e-r,n);e<i&&this.left.decomposeRight(e,n),this.break&&e<r&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?ei.of(this.break?[e,null,n]:[e,n]):(this.left=e,this.right=n,this.height=e.height+n.height,this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,i=!1,r){let{left:s,right:o}=this,a=n+s.length+this.break,l=null;return r&&r.from<=n+s.length&&r.more?l=s=s.updateHeight(e,n,i,r):s.updateHeight(e,n,i),r&&r.from<=a+o.length&&r.more?l=o=o.updateHeight(e,a,i,r):o.updateHeight(e,a,i),l?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function WE(t,e){let n,i;t[e]==null&&(n=t[e-1])instanceof xn&&(i=t[e+1])instanceof xn&&t.splice(e-1,3,new xn(n.length+1+i.length))}const vF=5;class dS{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let i=Math.min(n,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof Ii?r.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new Ii(i-this.pos,-1)),this.writtenTo=i,n>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,i){if(e<n||i.heightRelevant){let r=i.widget?i.widget.estimatedHeight:0,s=i.widget?i.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let o=n-e;i.block?this.addBlock(new sR(o,r,i)):(o||s||r>=vF)&&this.addLineDeco(r,s,o)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Ii(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let i=new xn(n-e);return this.oracle.doc.lineAt(e).to==n&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Ii)return e;let n=new Ii(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,i){let r=this.ensureLine();r.length+=i,r.collapsed+=i,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=n,this.writtenTo=this.pos=this.pos+i}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof Ii)&&!this.isCovered?this.nodes.push(new Ii(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let r of this.nodes)r instanceof Ii&&r.updateHeight(this.oracle,i),i+=r?r.length:1;return this.nodes}static build(e,n,i,r){let s=new dS(i,e);return ut.spans(n,i,r,s,0),s.finish(i)}}function yF(t,e,n){let i=new wF;return ut.compare(t,e,n,i,0),i.changes}class wF{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,i,r){(e<n||i&&i.heightRelevant||r&&r.heightRelevant)&&zb(e,n,this.changes,5)}}function bF(t,e){let n=t.getBoundingClientRect(),i=t.ownerDocument,r=i.defaultView||window,s=Math.max(0,n.left),o=Math.min(r.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(r.innerHeight,n.bottom);for(let c=t.parentNode;c&&c!=i.body;)if(c.nodeType==1){let u=c,d=window.getComputedStyle(u);if((u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&d.overflow!="visible"){let f=u.getBoundingClientRect();s=Math.max(s,f.left),o=Math.min(o,f.right),a=Math.max(a,f.top),l=c==t.parentNode?f.bottom:Math.min(l,f.bottom)}c=d.position=="absolute"||d.position=="fixed"?u.offsetParent:u.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:s-n.left,right:Math.max(s,o)-n.left,top:a-(n.top+e),bottom:Math.max(a,l)-(n.top+e)}}function xF(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class sy{constructor(e,n,i){this.from=e,this.to=n,this.size=i}static same(e,n){if(e.length!=n.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],s=n[i];if(r.from!=s.from||r.to!=s.to||r.size!=s.size)return!1}return!0}draw(e,n){return Xe.replace({widget:new SF(this.size*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class SF extends La{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class GE{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!0,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=KE,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Ot.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(cS).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new pF(n),this.stateDeco=e.facet(kf).filter(i=>typeof i!="function"),this.heightMap=ei.empty().applyChanges(this.stateDeco,lt.empty,this.heightOracle.setDoc(e.doc),[new vr(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Xe.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let i=0;i<=1;i++){let r=i?n.head:n.anchor;if(!e.some(({from:s,to:o})=>r>=s&&r<=o)){let{from:s,to:o}=this.lineBlockAt(r);e.push(new op(s,o))}}this.viewports=e.sort((i,r)=>i.from-r.from),this.scaler=this.heightMap.height<=7e6?KE:new CF(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:kd(e,this.scaler))})}update(e,n=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(kf).filter(u=>typeof u!="function");let r=e.changedRanges,s=vr.extendWithRanges(r,yF(i,this.stateDeco,e?e.changes:on.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),this.heightMap.height!=o&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<l.from||n.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,n));let c=!e.changes.empty||e.flags&2||l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,this.updateForViewport(),c&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(zN)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,i=window.getComputedStyle(n),r=this.heightOracle,s=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?Ot.RTL:Ot.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),a=n.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let c=0,u=0;if(a.width&&a.height){let{scaleX:k,scaleY:_}=gN(n,a);(this.scaleX!=k||this.scaleY!=_)&&(this.scaleX=k,this.scaleY=_,c|=8,o=l=!0)}let d=(parseInt(i.paddingTop)||0)*this.scaleY,f=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=d||this.paddingBottom!=f)&&(this.paddingTop=d,this.paddingBottom=f,c|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,c|=8);let h=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=h&&(this.scrollAnchorHeight=-1,this.scrollTop=h),this.scrolledToBottom=wN(e.scrollDOM);let p=(this.printing?xF:bF)(n,this.paddingTop),m=p.top-this.pixelViewport.top,w=p.bottom-this.pixelViewport.bottom;this.pixelViewport=p;let v=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(v!=this.inView&&(this.inView=v,v&&(l=!0)),!this.inView&&!this.scrollTarget)return 0;let y=a.width;if((this.contentDOMWidth!=y||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,c|=8),l){let k=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(k)&&(o=!0),o||r.lineWrapping&&Math.abs(y-this.contentDOMWidth)>r.charWidth){let{lineHeight:_,charWidth:P,textHeight:A}=e.docView.measureTextSize();o=_>0&&r.refresh(s,_,P,A,y/P,k),o&&(e.docView.minWidth=0,c|=8)}m>0&&w>0?u=Math.max(m,w):m<0&&w<0&&(u=Math.min(m,w)),r.heightChanged=!1;for(let _ of this.viewports){let P=_.from==this.viewport.from?k:e.docView.measureVisibleLineHeights(_);this.heightMap=(o?ei.empty().applyChanges(this.stateDeco,lt.empty,this.heightOracle,[new vr(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,o,new mF(_.from,P))}r.heightChanged&&(c|=2)}let x=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return x&&(this.viewport=this.getViewport(u,this.scrollTarget)),this.updateForViewport(),(c&2||x)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new op(r.lineAt(o-i*1e3,At.ByHeight,s,0,0).from,r.lineAt(a+(1-i)*1e3,At.ByHeight,s,0,0).to);if(n){let{head:c}=n.range;if(c<l.from||c>l.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),d=r.lineAt(c,At.ByPos,s,0,0),f;n.y=="center"?f=(d.top+d.bottom)/2-u/2:n.y=="start"||n.y=="nearest"&&c<l.from?f=d.top:f=d.bottom-u,l=new op(r.lineAt(f-1e3/2,At.ByHeight,s,0,0).from,r.lineAt(f+u+1e3/2,At.ByHeight,s,0,0).to)}}return l}mapViewport(e,n){let i=n.mapPos(e.from,-1),r=n.mapPos(e.to,1);return new op(this.heightMap.lineAt(i,At.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,At.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},i=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,At.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,At.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||r<=o-Math.max(10,Math.min(-i,250)))&&(n==this.state.doc.length||s>=a+Math.max(10,Math.min(i,250)))&&r>o-2*1e3&&s<a+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let i=[];for(let r of e)n.touchesRange(r.from,r.to)||i.push(new sy(n.mapPos(r.from),n.mapPos(r.to),r.size));return i}ensureLineGaps(e,n){let i=this.heightOracle.lineWrapping,r=i?1e4:2e3,s=r>>1,o=r<<1;if(this.defaultTextDirection!=Ot.LTR&&!i)return[];let a=[],l=(c,u,d,f)=>{if(u-c<s)return;let h=this.state.selection.main,p=[h.from];h.empty||p.push(h.to);for(let w of p)if(w>c&&w<u){l(c,w-10,d,f),l(w+10,u,d,f);return}let m=_F(e,w=>w.from>=d.from&&w.to<=d.to&&Math.abs(w.from-c)<s&&Math.abs(w.to-u)<s&&!p.some(v=>w.from<v&&w.to>v));if(!m){if(u<d.to&&n&&i&&n.visibleRanges.some(w=>w.from<=u&&w.to>=u)){let w=n.moveToLineBoundary(re.cursor(u),!1,!0).head;w>c&&(u=w)}m=new sy(c,u,this.gapSize(d,c,u,f))}a.push(m)};for(let c of this.viewportLines){if(c.length<o)continue;let u=kF(c.from,c.to,this.stateDeco);if(u.total<o)continue;let d=this.scrollTarget?this.scrollTarget.range.head:null,f,h;if(i){let p=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,m,w;if(d!=null){let v=lp(u,d),y=((this.visibleBottom-this.visibleTop)/2+p)/c.height;m=v-y,w=v+y}else m=(this.visibleTop-c.top-p)/c.height,w=(this.visibleBottom-c.top+p)/c.height;f=ap(u,m),h=ap(u,w)}else{let p=u.total*this.heightOracle.charWidth,m=r*this.heightOracle.charWidth,w,v;if(d!=null){let y=lp(u,d),x=((this.pixelViewport.right-this.pixelViewport.left)/2+m)/p;w=y-x,v=y+x}else w=(this.pixelViewport.left-m)/p,v=(this.pixelViewport.right+m)/p;f=ap(u,w),h=ap(u,v)}f>c.from&&l(c.from,f,c,u),h<c.to&&l(h,c.to,c,u)}return a}gapSize(e,n,i,r){let s=lp(r,i)-lp(r,n);return this.heightOracle.lineWrapping?e.height*s:r.total*this.heightOracle.charWidth*s}updateLineGaps(e){sy.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Xe.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let n=[];ut.spans(e,this.viewport.from,this.viewport.to,{span(r,s){n.push({from:r,to:s})},point(){}},20);let i=n.length!=this.visibleRanges.length||this.visibleRanges.some((r,s)=>r.from!=n[s].from||r.to!=n[s].to);return this.visibleRanges=n,i?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||kd(this.heightMap.lineAt(e,At.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return kd(this.heightMap.lineAt(this.scaler.fromDOM(e),At.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return kd(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class op{constructor(e,n){this.from=e,this.to=n}}function kF(t,e,n){let i=[],r=t,s=0;return ut.spans(n,t,e,{span(){},point(o,a){o>r&&(i.push({from:r,to:o}),s+=o-r),r=a}},20),r<e&&(i.push({from:r,to:e}),s+=e-r),{total:s,ranges:i}}function ap({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let i=Math.floor(t*n);for(let r=0;;r++){let{from:s,to:o}=e[r],a=o-s;if(i<=a)return s+i;i-=a}}function lp(t,e){let n=0;for(let{from:i,to:r}of t.ranges){if(e<=r){n+=e-i;break}n+=r-i}return n/t.total}function _F(t,e){for(let n of t)if(e(n))return n}const KE={toDOM(t){return t},fromDOM(t){return t},scale:1};class CF{constructor(e,n,i){let r=0,s=0,o=0;this.viewports=i.map(({from:a,to:l})=>{let c=n.lineAt(a,At.ByPos,e,0,0).top,u=n.lineAt(l,At.ByPos,e,0,0).bottom;return r+=u-c,{from:a,to:l,top:c,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(n.height-r);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(e){for(let n=0,i=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return r+(e-i)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);i=s.bottom,r=s.domBottom}}fromDOM(e){for(let n=0,i=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return i+(e-r)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);i=s.bottom,r=s.domBottom}}}function kd(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),i=e.toDOM(t.bottom);return new bs(t.from,t.length,n,i-n,Array.isArray(t._content)?t._content.map(r=>kd(r,e)):t._content)}const cp=Ae.define({combine:t=>t.join(" ")}),qb=Ae.define({combine:t=>t.indexOf(!0)>-1}),Yb=xa.newName(),oR=xa.newName(),aR=xa.newName(),lR={"&light":"."+oR,"&dark":"."+aR};function Jb(t,e,n){return new xa(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,r=>{if(r=="&")return t;if(!n||!n[r])throw new RangeError(`Unsupported selector: ${r}`);return n[r]}):t+" "+i}})}const EF=Jb("."+Yb,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},lR),_d="";class AF{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(Ye.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=_d}readRange(e,n){if(!e)return this;let i=e.parentNode;for(let r=e;;){this.findPointBefore(i,r);let s=this.text.length;this.readNode(r);let o=r.nextSibling;if(o==n)break;let a=$t.get(r),l=$t.get(o);(a&&l?a.breakAfter:(a?a.breakAfter:XE(r))||XE(o)&&(r.nodeName!="BR"||r.cmIgnore)&&this.text.length>s)&&this.lineBreak(),r=o}return this.findPointBefore(i,n),this}readTextNode(e){let n=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,n.length));for(let i=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(a=r.exec(n))&&(s=a.index,o=a[0].length),this.append(n.slice(i,s<0?n.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);i=s+o}}readNode(e){if(e.cmIgnore)return;let n=$t.get(e),i=n&&n.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let r=i.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==n&&(i.pos=this.text.length)}findPointInside(e,n){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(PF(e,i.node,i.offset)?n:0))}}function PF(t,e,n){for(;;){if(!e||n<fo(e))return!1;if(e==t)return!0;n=Sf(e)+1,e=e.parentNode}}function XE(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}class qE{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class $F{constructor(e,n,i,r){this.typeOver=r,this.bounds=null,this.text="";let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,i,0))){let a=s||o?[]:NF(e),l=new AF(a,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=RF(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=s&&s.node==a.focusNode&&s.offset==a.focusOffset||!Db(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),c=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!Db(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),u=e.viewport;if(Ee.ios&&e.state.selection.main.empty&&l!=c&&(u.from>0||u.to<e.state.doc.length)){let d=u.from-Math.min(l,c),f=u.to-Math.max(l,c);(d==0||d==1)&&(f==0||f==-1)&&(l=0,c=e.state.doc.length)}this.newSel=re.single(c,l)}}}function cR(t,e){let n,{newSel:i}=e,r=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,l=r.from,c=null;(s===8||Ee.android&&e.text.length<a-o)&&(l=r.to,c="end");let u=OF(t.state.doc.sliceString(o,a,_d),e.text,l-o,c);u&&(Ee.chrome&&s==13&&u.toB==u.from+2&&e.text.slice(u.from,u.toB)==_d+_d&&u.toB--,n={from:o+u.from,to:o+u.toA,insert:lt.of(e.text.slice(u.from,u.toB).split(_d))})}else i&&(!t.hasFocus&&t.state.facet(Cv)||i.main.eq(r))&&(i=null);if(!n&&!i)return!1;if(!n&&e.typeOver&&!r.empty&&i&&i.main.empty?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,r.to)}:n&&n.from>=r.from&&n.to<=r.to&&(n.from!=r.from||n.to!=r.to)&&r.to-r.from-(n.to-n.from)<=4?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,r.to))}:(Ee.mac||Ee.android)&&n&&n.from==n.to&&n.from==r.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(i&&n.insert.length==2&&(i=re.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:lt.of([" "])}):Ee.chrome&&n&&n.from==n.to&&n.from==r.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(i&&(i=re.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:lt.of([" "])}),n){if(Ee.ios&&t.inputState.flushIOSKey()||Ee.android&&(n.from==r.from&&n.to==r.to&&n.insert.length==1&&n.insert.lines==2&&Fc(t.contentDOM,"Enter",13)||(n.from==r.from-1&&n.to==r.to&&n.insert.length==0||s==8&&n.insert.length<n.to-n.from&&n.to>r.head)&&Fc(t.contentDOM,"Backspace",8)||n.from==r.from&&n.to==r.to+1&&n.insert.length==0&&Fc(t.contentDOM,"Delete",46)))return!0;let o=n.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let a,l=()=>a||(a=TF(t,n,i));return t.state.facet(BN).some(c=>c(t,n.from,n.to,o,l))||t.dispatch(l()),!0}else if(i&&!i.main.eq(r)){let o=!1,a="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),a=t.inputState.lastSelectionOrigin),t.dispatch({selection:i,scrollIntoView:o,userEvent:a}),!0}else return!1}function TF(t,e,n){let i,r=t.state,s=r.selection.main;if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let a=s.from<e.from?r.sliceDoc(s.from,e.from):"",l=s.to>e.to?r.sliceDoc(e.to,s.to):"";i=r.replaceSelection(t.state.toText(a+e.insert.sliceString(0,void 0,t.state.lineBreak)+l))}else{let a=r.changes(e),l=n&&n.main.to<=a.newLength?n.main:void 0;if(r.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let c=t.state.sliceDoc(e.from,e.to),u,d=n&&KN(t,n.main.head);if(d){let p=e.insert.length-(e.to-e.from);u={from:d.from,to:d.to-p}}else u=t.state.doc.lineAt(s.head);let f=s.to-e.to,h=s.to-s.from;i=r.changeByRange(p=>{if(p.from==s.from&&p.to==s.to)return{changes:a,range:l||p.map(a)};let m=p.to-f,w=m-c.length;if(p.to-p.from!=h||t.state.sliceDoc(w,m)!=c||p.to>=u.from&&p.from<=u.to)return{range:p};let v=r.changes({from:w,to:m,insert:e.insert}),y=p.to-s.to;return{changes:v,range:l?re.range(Math.max(0,l.anchor+y),Math.max(0,l.head+y)):p.map(v)}})}else i={changes:a,selection:l&&r.selection.replaceRange(l)}}let o="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,o+=".compose",t.inputState.compositionFirstChange&&(o+=".start",t.inputState.compositionFirstChange=!1)),r.update(i,{userEvent:o,scrollIntoView:!0})}function OF(t,e,n,i){let r=Math.min(t.length,e.length),s=0;for(;s<r&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==r&&t.length==e.length)return null;let o=t.length,a=e.length;for(;o>0&&a>0&&t.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(i=="end"){let l=Math.max(0,s-Math.min(o,a));n-=o+l-s}if(o<s&&t.length<e.length){let l=n<=s&&n>=o?s-n:0;s-=l,a=s+(a-o),o=s}else if(a<s){let l=n<=s&&n>=a?s-n:0;s-=l,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}function NF(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new qE(n,i)),(r!=n||s!=i)&&e.push(new qE(r,s))),e}function RF(t,e){if(t.length==0)return null;let n=t[0].pos,i=t.length==2?t[1].pos:n;return n>-1&&i>-1?re.single(n+e,i+e):null}const MF={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},oy=Ee.ie&&Ee.ie_version<=11;class DF{constructor(e){this.view=e,this.active=!1,this.selectionRange=new yj,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let i of n)this.queue.push(i);(Ee.ie&&Ee.ie_version<=11||Ee.ios&&e.composing)&&n.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),oy&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,i)=>n!=e[i]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,r=this.selectionRange;if(i.state.facet(Cv)?i.root.activeElement!=this.dom:!cm(i.dom,r))return;let s=r.anchorNode&&i.docView.nearest(r.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(Ee.ie&&Ee.ie_version<=11||Ee.android&&Ee.chrome)&&!i.state.selection.main.empty&&r.focusNode&&zd(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=Ee.safari&&e.root.nodeType==11&&pj(this.dom.ownerDocument)==this.dom&&IF(this.view)||ug(e.root);if(!n||this.selectionRange.eq(n))return!1;let i=cm(this.dom,n);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&bj(this.dom,n)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(n),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let i=this.dom;i;)if(i.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=n)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,MF),oy&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),oy&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var i;if(!this.delayedAndroidKey){let r=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&Fc(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,i=-1,r=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(r=!0),n==-1?{from:n,to:i}=o:(n=Math.min(o.from,n),i=Math.max(o.to,i)))}return{from:n,to:i,typeOver:r}}readChange(){let{from:e,to:n,typeOver:i}=this.processRecords(),r=this.selectionChanged&&cm(this.dom,this.selectionRange);if(e<0&&!r)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new $F(this.view,e,n,i);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let i=this.view.state,r=cR(this.view,n);return this.view.state==i&&this.view.update([]),r}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let i=YE(n,e.previousSibling||e.target.previousSibling,-1),r=YE(n,e.nextSibling||e.target.nextSibling,1);return{from:i?n.posAfter(i):n.posAtStart,to:r?n.posBefore(r):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,n,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function YE(t,e,n){for(;e;){let i=$t.get(e);if(i&&i.parent==t)return i;let r=e.parentNode;e=r!=t.dom?r:n>0?e.nextSibling:e.previousSibling}return null}function IF(t){let e=null;function n(l){l.preventDefault(),l.stopImmediatePropagation(),e=l.getTargetRanges()[0]}if(t.contentDOM.addEventListener("beforeinput",n,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",n,!0),!e)return null;let i=e.startContainer,r=e.startOffset,s=e.endContainer,o=e.endOffset,a=t.docView.domAtPos(t.state.selection.main.anchor);return zd(a.node,a.offset,s,o)&&([i,r,s,o]=[s,o,i,r]),{anchorNode:i,anchorOffset:r,focusNode:s,focusOffset:o}}class Pe{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:n}=e;this.dispatchTransactions=e.dispatchTransactions||n&&(i=>i.forEach(r=>n(r,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||wj(e.parent)||document,this.viewState=new GE(e.state||Ye.create(e)),e.scrollTo&&e.scrollTo.is(ip)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(xd).map(i=>new ny(i));for(let i of this.plugins)i.update(this);this.observer=new DF(this),this.inputState=new Jj(this),this.inputState.ensureHandlers(this.plugins),this.docView=new PE(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure()}dispatch(...e){let n=e.length==1&&e[0]instanceof un?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,i=!1,r,s=this.state;for(let f of e){if(f.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=f.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,a=0,l=null;e.some(f=>f.annotation(nR))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=iR(s,o),l||(a=1));let c=this.observer.delayedAndroidKey,u=null;if(c?(this.observer.clearDelayedAndroidKey(),u=this.observer.readChange(),(u&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(u=null)):this.observer.clear(),s.facet(Ye.phrases)!=this.state.facet(Ye.phrases))return this.setState(s);r=dg.create(this,s,e),r.flags|=a;let d=this.viewState.scrollTarget;try{this.updateState=2;for(let f of e){if(d&&(d=d.map(f.changes)),f.scrollIntoView){let{main:h}=f.state.selection;d=new zc(h.empty?h:re.cursor(h.head,h.head>h.anchor?-1:1))}for(let h of f.effects)h.is(ip)&&(d=h.value.clip(this.state))}this.viewState.update(r,d),this.bidiCache=fg.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),n=this.docView.update(r),this.state.facet(Sd)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(f=>f.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(cp)!=r.state.facet(cp)&&(this.viewState.mustMeasureContent=!0),(n||i||d||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!r.empty)for(let f of this.state.facet(Wb))try{f(r)}catch(h){Hr(this.state,h,"update listener")}(l||u)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),u&&!cR(this,u)&&c.force&&Fc(this.contentDOM,c.key,c.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new GE(e),this.plugins=e.facet(xd).map(i=>new ny(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new PE(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(xd),i=e.state.facet(xd);if(n!=i){let r=[];for(let s of i){let o=n.indexOf(s);if(o<0)r.push(new ny(s));else{let a=this.plugins[o];a.mustUpdate=e,r.push(a)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=r,this.pluginMap.clear()}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this);n!=i&&this.inputState.ensureHandlers(this.plugins)}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,i=this.scrollDOM,r=i.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(r-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(wN(i))s=-1,o=this.viewState.heightMap.height;else{let h=this.viewState.scrollAnchorAt(r);s=h.from,o=h.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let c=[];l&4||([this.measureRequests,c]=[c,this.measureRequests]);let u=c.map(h=>{try{return h.read(this)}catch(p){return Hr(this.state,p),JE}}),d=dg.create(this,this.state,[]),f=!1;d.flags|=l,n?n.flags|=l:n=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),f=this.docView.update(d));for(let h=0;h<c.length;h++)if(u[h]!=JE)try{let p=c[h];p.write&&p.write(u[h],this)}catch(p){Hr(this.state,p)}if(f&&this.docView.updateSelection(!0),!d.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let p=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(p>1||p<-1){r=r+p,i.scrollTop=r/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let a of this.state.facet(Wb))a(n)}get themeClasses(){return Yb+" "+(this.state.facet(qb)?aR:oR)+" "+this.state.facet(cp)}updateAttrs(){let e=ZE(this,UN,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(Cv)?"true":"false",class:"cm-content",style:`${Ee.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),ZE(this,cS,n);let i=this.observer.ignore(()=>{let r=Fb(this.contentDOM,this.contentAttrs,n),s=Fb(this.dom,this.editorAttrs,e);return r||s});return this.editorAttrs=e,this.contentAttrs=n,i}showAnnouncements(e){let n=!0;for(let i of e)for(let r of i.effects)if(r.is(Pe.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(Sd);let e=this.state.facet(Pe.cspNonce);xa.mount(this.root,this.styleModules.concat(EF).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.spec!=e)&&this.pluginMap.set(e,n=this.plugins.find(i=>i.spec==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,i){return ry(this,e,ME(this,e,n,i))}moveByGroup(e,n){return ry(this,e,ME(this,e,n,i=>qj(this,e.head,i)))}visualLineSide(e,n){let i=this.bidiSpans(e),r=this.textDirectionAt(e.from),s=i[n?i.length-1:0];return re.cursor(s.side(n,r)+e.from,s.forward(!n,r)?1:-1)}moveToLineBoundary(e,n,i=!0){return Xj(this,e,n,i)}moveVertically(e,n,i){return ry(this,e,Yj(this,e,n,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),qN(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let i=this.docView.coordsAt(e,n);if(!i||i.left==i.right)return i;let r=this.state.doc.lineAt(e),s=this.bidiSpans(r),o=s[ea.find(s,e-r.from,-1,n)];return sS(i,o.dir==Ot.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(FN)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>LF)return NN(e.length);let n=this.textDirectionAt(e.from),i;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==n&&(s.fresh||ON(s.isolates,i=AE(this,e))))return s.order;i||(i=AE(this,e));let r=Nj(e.text,n,i);return this.bidiCache.push(new fg(e.from,e.to,n,i,!0,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Ee.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{vN(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return ip.of(new zc(typeof e=="number"?re.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return ip.of(new zc(re.cursor(i.from),"start","start",i.top-e,n,!0))}static domEventHandlers(e){return Dn.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Dn.define(()=>({}),{eventObservers:e})}static theme(e,n){let i=xa.newName(),r=[cp.of(i),Sd.of(Jb(`.${i}`,e))];return n&&n.dark&&r.push(qb.of(!0)),r}static baseTheme(e){return dh.lowest(Sd.of(Jb("."+Yb,e,lR)))}static findFromDOM(e){var n;let i=e.querySelector(".cm-content"),r=i&&$t.get(i)||$t.get(e);return((n=r==null?void 0:r.rootView)===null||n===void 0?void 0:n.view)||null}}Pe.styleModule=Sd;Pe.inputHandler=BN;Pe.focusChangeEffect=jN;Pe.perLineTextDirection=FN;Pe.exceptionSink=LN;Pe.updateListener=Wb;Pe.editable=Cv;Pe.mouseSelectionStyle=IN;Pe.dragMovesSelection=DN;Pe.clickAddsSelectionRange=MN;Pe.decorations=kf;Pe.outerDecorations=VN;Pe.atomicRanges=uS;Pe.bidiIsolatedRanges=HN;Pe.scrollMargins=WN;Pe.darkTheme=qb;Pe.cspNonce=Ae.define({combine:t=>t.length?t[0]:""});Pe.contentAttributes=cS;Pe.editorAttributes=UN;Pe.lineWrapping=Pe.contentAttributes.of({class:"cm-lineWrapping"});Pe.announce=Ke.define();const LF=4096,JE={};class fg{constructor(e,n,i,r,s,o){this.from=e,this.to=n,this.dir=i,this.isolates=r,this.fresh=s,this.order=o}static update(e,n){if(n.empty&&!e.some(s=>s.fresh))return e;let i=[],r=e.length?e[e.length-1].dir:Ot.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==r&&!n.touchesRange(o.from,o.to)&&i.push(new fg(n.mapPos(o.from,1),n.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return i}}function ZE(t,e,n){for(let i=t.state.facet(e),r=i.length-1;r>=0;r--){let s=i[r],o=typeof s=="function"?s(t):s;o&&jb(o,n)}return n}const BF=Ee.mac?"mac":Ee.windows?"win":Ee.linux?"linux":"key";function jF(t,e){const n=t.split(/-(?!$)/);let i=n[n.length-1];i=="Space"&&(i=" ");let r,s,o,a;for(let l=0;l<n.length-1;++l){const c=n[l];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))e=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+c)}return r&&(i="Alt-"+i),s&&(i="Ctrl-"+i),a&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function up(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const FF=dh.default(Pe.domEventHandlers({keydown(t,e){return fR(dR(e.state),t,e,"editor")}})),uR=Ae.define({enables:FF}),QE=new WeakMap;function dR(t){let e=t.facet(uR),n=QE.get(e);return n||QE.set(e,n=VF(e.reduce((i,r)=>i.concat(r),[]))),n}function zF(t,e,n){return fR(dR(t.state),e,t,n)}let Vo=null;const UF=4e3;function VF(t,e=BF){let n=Object.create(null),i=Object.create(null),r=(o,a)=>{let l=i[o];if(l==null)i[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,l,c,u)=>{var d,f;let h=n[o]||(n[o]=Object.create(null)),p=a.split(/ (?!$)/).map(v=>jF(v,e));for(let v=1;v<p.length;v++){let y=p.slice(0,v).join(" ");r(y,!0),h[y]||(h[y]={preventDefault:!0,stopPropagation:!1,run:[x=>{let k=Vo={view:x,prefix:y,scope:o};return setTimeout(()=>{Vo==k&&(Vo=null)},UF),!0}]})}let m=p.join(" ");r(m,!1);let w=h[m]||(h[m]={preventDefault:!1,stopPropagation:!1,run:((f=(d=h._any)===null||d===void 0?void 0:d.run)===null||f===void 0?void 0:f.slice())||[]});l&&w.run.push(l),c&&(w.preventDefault=!0),u&&(w.stopPropagation=!0)};for(let o of t){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let c of a){let u=n[c]||(n[c]=Object.create(null));u._any||(u._any={preventDefault:!1,stopPropagation:!1,run:[]});for(let d in u)u[d].run.push(o.any)}let l=o[e]||o.key;if(l)for(let c of a)s(c,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(c,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return n}function fR(t,e,n,i){let r=hj(e),s=qn(r,0),o=Lr(s)==r.length&&r!=" ",a="",l=!1,c=!1,u=!1;Vo&&Vo.view==n&&Vo.scope==i&&(a=Vo.prefix+" ",JN.indexOf(e.keyCode)<0&&(c=!0,Vo=null));let d=new Set,f=w=>{if(w){for(let v of w.run)if(!d.has(v)&&(d.add(v),v(n,e)))return w.stopPropagation&&(u=!0),!0;w.preventDefault&&(w.stopPropagation&&(u=!0),c=!0)}return!1},h=t[i],p,m;return h&&(f(h[a+up(r,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Ee.windows&&e.ctrlKey&&e.altKey)&&(p=Sa[e.keyCode])&&p!=r?(f(h[a+up(p,e,!0)])||e.shiftKey&&(m=bf[e.keyCode])!=r&&m!=p&&f(h[a+up(m,e,!1)]))&&(l=!0):o&&e.shiftKey&&f(h[a+up(r,e,!0)])&&(l=!0),!l&&f(h._any)&&(l=!0)),c&&(l=!0),l&&u&&e.stopPropagation(),l}class gh{constructor(e,n,i,r,s){this.className=e,this.left=n,this.top=i,this.width=r,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,i){if(i.empty){let r=e.coordsAtPos(i.head,i.assoc||1);if(!r)return[];let s=hR(e);return[new gh(n,r.left-s.left,r.top-s.top,null,r.bottom-r.top)]}else return HF(e,n,i)}}function hR(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==Ot.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function e2(t,e,n){let i=re.cursor(e);return{from:Math.max(n.from,t.moveToLineBoundary(i,!1,!0).from),to:Math.min(n.to,t.moveToLineBoundary(i,!0,!0).from),type:Qn.Text}}function HF(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let i=Math.max(n.from,t.viewport.from),r=Math.min(n.to,t.viewport.to),s=t.textDirection==Ot.LTR,o=t.contentDOM,a=o.getBoundingClientRect(),l=hR(t),c=o.querySelector(".cm-line"),u=c&&window.getComputedStyle(c),d=a.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),f=a.right-(u?parseInt(u.paddingRight):0),h=Kb(t,i),p=Kb(t,r),m=h.type==Qn.Text?h:null,w=p.type==Qn.Text?p:null;if(m&&(t.lineWrapping||h.widgetLineBreaks)&&(m=e2(t,i,m)),w&&(t.lineWrapping||p.widgetLineBreaks)&&(w=e2(t,r,w)),m&&w&&m.from==w.from)return y(x(n.from,n.to,m));{let _=m?x(n.from,null,m):k(h,!1),P=w?x(null,n.to,w):k(p,!0),A=[];return(m||h).to<(w||p).from-(m&&w?1:0)||h.widgetLineBreaks>1&&_.bottom+t.defaultLineHeight/2<P.top?A.push(v(d,_.bottom,f,P.top)):_.bottom<P.top&&t.elementAtHeight((_.bottom+P.top)/2).type==Qn.Text&&(_.bottom=P.top=(_.bottom+P.top)/2),y(_).concat(A).concat(y(P))}function v(_,P,A,C){return new gh(e,_-l.left,P-l.top-.01,A-_,C-P+.01)}function y({top:_,bottom:P,horizontal:A}){let C=[];for(let N=0;N<A.length;N+=2)C.push(v(A[N],_,A[N+1],P));return C}function x(_,P,A){let C=1e9,N=-1e9,R=[];function M(T,V,Y,ne,W){let j=t.coordsAtPos(T,T==A.to?-2:2),Q=t.coordsAtPos(Y,Y==A.from?2:-2);!j||!Q||(C=Math.min(j.top,Q.top,C),N=Math.max(j.bottom,Q.bottom,N),W==Ot.LTR?R.push(s&&V?d:j.left,s&&ne?f:Q.right):R.push(!s&&ne?d:Q.left,!s&&V?f:j.right))}let L=_??A.from,H=P??A.to;for(let T of t.visibleRanges)if(T.to>L&&T.from<H)for(let V=Math.max(T.from,L),Y=Math.min(T.to,H);;){let ne=t.state.doc.lineAt(V);for(let W of t.bidiSpans(ne)){let j=W.from+ne.from,Q=W.to+ne.from;if(j>=Y)break;Q>V&&M(Math.max(j,V),_==null&&j<=L,Math.min(Q,Y),P==null&&Q>=H,W.dir)}if(V=ne.to+1,V>=Y)break}return R.length==0&&M(L,_==null,H,P==null,t.textDirection),{top:C,bottom:N,horizontal:R}}function k(_,P){let A=a.top+(P?_.top:_.bottom);return{top:A,bottom:A,horizontal:[]}}}function WF(t,e){return t.constructor==e.constructor&&t.eq(e)}class GF{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(fm)!=e.state.facet(fm)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}setOrder(e){let n=0,i=e.facet(fm);for(;n<i.length&&i[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:n}=this.view;(e!=this.scaleX||n!=this.scaleY)&&(this.scaleX=e,this.scaleY=n,this.dom.style.transform=`scale(${1/e}, ${1/n})`)}draw(e){if(e.length!=this.drawn.length||e.some((n,i)=>!WF(n,this.drawn[i]))){let n=this.dom.firstChild,i=0;for(let r of e)r.update&&n&&r.constructor&&this.drawn[i].constructor&&r.update(n,this.drawn[i])?(n=n.nextSibling,i++):this.dom.insertBefore(r.draw(),n);for(;n;){let r=n.nextSibling;n.remove(),n=r}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const fm=Ae.define();function pR(t){return[Dn.define(e=>new GF(e,t)),fm.of(t)]}const mR=!Ee.ios,_f=Ae.define({combine(t){return Ia(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function KF(t={}){return[_f.of(t),XF,qF,YF,zN.of(!0)]}function gR(t){return t.startState.facet(_f)!=t.state.facet(_f)}const XF=pR({above:!0,markers(t){let{state:e}=t,n=e.facet(_f),i=[];for(let r of e.selection.ranges){let s=r==e.selection.main;if(r.empty?!s||mR:n.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=r.empty?r:re.cursor(r.head,r.head>r.anchor?-1:1);for(let l of gh.forRange(t,o,a))i.push(l)}}return i},update(t,e){t.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=gR(t);return n&&t2(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){t2(e.state,t)},class:"cm-cursorLayer"});function t2(t,e){e.style.animationDuration=t.facet(_f).cursorBlinkRate+"ms"}const qF=pR({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:gh.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||gR(t)},class:"cm-selectionLayer"}),Zb={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};mR&&(Zb[".cm-line"].caretColor="transparent !important",Zb[".cm-content"]={caretColor:"transparent !important"});const YF=dh.highest(Pe.theme(Zb));function n2(t,e,n,i,r){e.lastIndex=0;for(let s=t.iterRange(n,i),o=n,a;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;a=e.exec(s.value);)r(o+a.index,a)}function JF(t,e){let n=t.visibleRanges;if(n.length==1&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let i=[];for(let{from:r,to:s}of n)r=Math.max(t.state.doc.lineAt(r).from,r-e),s=Math.min(t.state.doc.lineAt(s).to,s+e),i.length&&i[i.length-1].to>=r?i[i.length-1].to=s:i.push({from:r,to:s});return i}class ZF{constructor(e){const{regexp:n,decoration:i,decorate:r,boundary:s,maxLength:o=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,r)this.addMatch=(a,l,c,u)=>r(u,c,c+a[0].length,a,l);else if(typeof i=="function")this.addMatch=(a,l,c,u)=>{let d=i(a,l,c);d&&u(c,c+a[0].length,d)};else if(i)this.addMatch=(a,l,c,u)=>u(c,c+a[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let n=new Nl,i=n.add.bind(n);for(let{from:r,to:s}of JF(e,this.maxLength))n2(e.state.doc,this.regexp,r,s,(o,a)=>this.addMatch(a,e,o,i));return n.finish()}updateDeco(e,n){let i=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((s,o,a,l)=>{l>e.view.viewport.from&&a<e.view.viewport.to&&(i=Math.min(a,i),r=Math.max(l,r))}),e.viewportChanged||r-i>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,n.map(e.changes),i,r):n}updateRange(e,n,i,r){for(let s of e.visibleRanges){let o=Math.max(s.from,i),a=Math.min(s.to,r);if(a>o){let l=e.state.doc.lineAt(o),c=l.to<a?e.state.doc.lineAt(a):l,u=Math.max(s.from,l.from),d=Math.min(s.to,c.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){u=o;break}for(;a<c.to;a++)if(this.boundary.test(c.text[a-c.from])){d=a;break}}let f=[],h,p=(m,w,v)=>f.push(v.range(m,w));if(l==c)for(this.regexp.lastIndex=u-l.from;(h=this.regexp.exec(l.text))&&h.index<d-l.from;)this.addMatch(h,e,h.index+l.from,p);else n2(e.state.doc,this.regexp,u,d,(m,w)=>this.addMatch(w,e,m,p));n=n.update({filterFrom:u,filterTo:d,filter:(m,w)=>m<u||w>d,add:f})}}return n}}const Qb=/x/.unicode!=null?"gu":"g",QF=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,Qb),e7={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let ay=null;function t7(){var t;if(ay==null&&typeof document<"u"&&document.body){let e=document.body.style;ay=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return ay||!1}const hm=Ae.define({combine(t){let e=Ia(t,{render:null,specialChars:QF,addSpecialChars:null});return(e.replaceTabs=!t7())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,Qb)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,Qb)),e}});function n7(t={}){return[hm.of(t),i7()]}let i2=null;function i7(){return i2||(i2=Dn.fromClass(class{constructor(t){this.view=t,this.decorations=Xe.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(hm)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new ZF({regexp:t.specialChars,decoration:(e,n,i)=>{let{doc:r}=n.state,s=qn(e[0],0);if(s==9){let o=r.lineAt(i),a=n.state.tabSize,l=hh(o.text,a,i-o.from);return Xe.replace({widget:new a7((a-l%a)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=Xe.replace({widget:new o7(t,s)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(hm);t.startState.facet(hm)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const r7="";function s7(t){return t>=32?r7:t==10?"":String.fromCharCode(9216+t)}class o7 extends La{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=s7(this.code),i=e.state.phrase("Control character")+" "+(e7[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,i,n);if(r)return r;let s=document.createElement("span");return s.textContent=n,s.title=i,s.setAttribute("aria-label",i),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class a7 extends La{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function l7(){return u7}const c7=Xe.line({class:"cm-activeLine"}),u7=Dn.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let i of t.state.selection.ranges){let r=t.lineBlockAt(i.head);r.from>e&&(n.push(c7.range(r.from)),e=r.from)}return Xe.set(n)}},{decorations:t=>t.decorations}),ed="-10000px";class vR{constructor(e,n,i){this.facet=n,this.createTooltipView=i,this.input=e.state.facet(n),this.tooltips=this.input.filter(r=>r),this.tooltipViews=this.tooltips.map(i)}update(e,n){var i;let r=e.state.facet(this.facet),s=r.filter(l=>l);if(r===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let o=[],a=n?[]:null;for(let l=0;l<s.length;l++){let c=s[l],u=-1;if(c){for(let d=0;d<this.tooltips.length;d++){let f=this.tooltips[d];f&&f.create==c.create&&(u=d)}if(u<0)o[l]=this.createTooltipView(c),a&&(a[l]=!!c.above);else{let d=o[l]=this.tooltipViews[u];a&&(a[l]=n[u]),d.update&&d.update(e)}}}for(let l of this.tooltipViews)o.indexOf(l)<0&&(l.dom.remove(),(i=l.destroy)===null||i===void 0||i.call(l));return n&&(a.forEach((l,c)=>n[c]=l),n.length=a.length),this.input=r,this.tooltips=s,this.tooltipViews=o,!0}}function d7(t){let{win:e}=t;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const ly=Ae.define({combine:t=>{var e,n,i;return{position:Ee.ios?"absolute":((e=t.find(r=>r.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(r=>r.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((i=t.find(r=>r.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||d7}}}),r2=new WeakMap,fS=Dn.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(ly);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new vR(t,hS,n=>this.createTooltip(n)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let n=e||t.geometryChanged,i=t.state.facet(ly);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;n=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t){let e=t.create(this.view);if(e.dom.classList.add("cm-tooltip"),t.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let n=document.createElement("div");n.className="cm-tooltip-arrow",e.dom.appendChild(n)}return e.dom.style.position=this.position,e.dom.style.top=ed,e.dom.style.left="0px",this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var t,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let n of this.manager.tooltipViews)n.dom.remove(),(t=n.destroy)===null||t===void 0||t.call(n);this.parent&&this.container.remove(),(e=this.intersectionObserver)===null||e===void 0||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=this.view.dom.getBoundingClientRect(),e=1,n=1,i=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:r}=this.manager.tooltipViews[0];if(Ee.gecko)i=r.offsetParent!=this.container.ownerDocument.body;else if(r.style.top==ed&&r.style.left=="0px"){let s=r.getBoundingClientRect();i=Math.abs(s.top+1e4)>1||Math.abs(s.left)>1}}if(i||this.position=="absolute")if(this.parent){let r=this.parent.getBoundingClientRect();r.width&&r.height&&(e=r.width/this.parent.offsetWidth,n=r.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:n}=this.view.viewState);return{editor:t,parent:this.parent?this.container.getBoundingClientRect():t,pos:this.manager.tooltips.map((r,s)=>{let o=this.manager.tooltipViews[s];return o.getCoords?o.getCoords(r.pos):this.view.coordsAtPos(r.pos)}),size:this.manager.tooltipViews.map(({dom:r})=>r.getBoundingClientRect()),space:this.view.state.facet(ly).tooltipSpace(this.view),scaleX:e,scaleY:n,makeAbsolute:i}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{editor:n,space:i,scaleX:r,scaleY:s}=t,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],c=this.manager.tooltipViews[a],{dom:u}=c,d=t.pos[a],f=t.size[a];if(!d||d.bottom<=Math.max(n.top,i.top)||d.top>=Math.min(n.bottom,i.bottom)||d.right<Math.max(n.left,i.left)-.1||d.left>Math.min(n.right,i.right)+.1){u.style.top=ed;continue}let h=l.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,p=h?7:0,m=f.right-f.left,w=(e=r2.get(c))!==null&&e!==void 0?e:f.bottom-f.top,v=c.offset||h7,y=this.view.textDirection==Ot.LTR,x=f.width>i.right-i.left?y?i.left:i.right-f.width:y?Math.min(d.left-(h?14:0)+v.x,i.right-m):Math.max(i.left,d.left-m+(h?14:0)-v.x),k=this.above[a];!l.strictSide&&(k?d.top-(f.bottom-f.top)-v.y<i.top:d.bottom+(f.bottom-f.top)+v.y>i.bottom)&&k==i.bottom-d.bottom>d.top-i.top&&(k=this.above[a]=!k);let _=(k?d.top-i.top:i.bottom-d.bottom)-p;if(_<w&&c.resize!==!1){if(_<this.view.defaultLineHeight){u.style.top=ed;continue}r2.set(c,w),u.style.height=(w=_)/s+"px"}else u.style.height&&(u.style.height="");let P=k?d.top-w-p-v.y:d.bottom+p+v.y,A=x+m;if(c.overlap!==!0)for(let C of o)C.left<A&&C.right>x&&C.top<P+w&&C.bottom>P&&(P=k?C.top-w-2-p:C.bottom+p+2);if(this.position=="absolute"?(u.style.top=(P-t.parent.top)/s+"px",u.style.left=(x-t.parent.left)/r+"px"):(u.style.top=P/s+"px",u.style.left=x/r+"px"),h){let C=d.left+(y?v.x:-v.x)-(x+14-7);h.style.left=C/r+"px"}c.overlap!==!0&&o.push({left:x,top:P,right:A,bottom:P+w}),u.classList.toggle("cm-tooltip-above",k),u.classList.toggle("cm-tooltip-below",!k),c.positioned&&c.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=ed}},{eventObservers:{scroll(){this.maybeMeasure()}}}),f7=Pe.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),h7={x:0,y:0},hS=Ae.define({enables:[fS,f7]}),hg=Ae.define();class Ev{static create(e){return new Ev(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new vR(e,hg,n=>this.createHostedView(n))}createHostedView(e){let n=e.create(this.view);return n.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(n.dom),this.mounted&&n.mount&&n.mount(this.view),n}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}passProp(e){let n;for(let i of this.manager.tooltipViews){let r=i[e];if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}}return n}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const p7=hS.compute([hg],t=>{let e=t.facet(hg).filter(n=>n);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.map(n=>{var i;return(i=n.end)!==null&&i!==void 0?i:n.pos})),create:Ev.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class m7{constructor(e,n,i,r,s){this.view=e,this.source=n,this.field=i,this.setHover=r,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:n}=this,i=e.docView.nearest(n.target);if(!i)return;let r,s=1;if(i instanceof Qo)r=i.posAtStart;else{if(r=e.posAtCoords(n),r==null)return;let a=e.coordsAtPos(r);if(!a||n.y<a.top||n.y>a.bottom||n.x<a.left-e.defaultCharacterWidth||n.x>a.right+e.defaultCharacterWidth)return;let l=e.bidiSpans(e.state.doc.lineAt(r)).find(u=>u.from<=r&&u.to>=r),c=l&&l.dir==Ot.RTL?-1:1;s=n.x<a.left?-c:c}let o=this.source(e,r,s);if(o!=null&&o.then){let a=this.pending={pos:r};o.then(l=>{this.pending==a&&(this.pending=null,l&&e.dispatch({effects:this.setHover.of(l)}))},l=>Hr(e.state,l,"hover tooltip"))}else o&&e.dispatch({effects:this.setHover.of(o)})}get tooltip(){let e=this.view.plugin(fS),n=e?e.manager.tooltips.findIndex(i=>i.create==Ev.create):-1;return n>-1?e.manager.tooltipViews[n]:null}mousemove(e){var n;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:i,tooltip:r}=this;if(i&&r&&!g7(r.dom,e)||this.pending){let{pos:s}=i||this.pending,o=(n=i==null?void 0:i.end)!==null&&n!==void 0?n:s;(s==o?this.view.posAtCoords(this.lastMove)!=s:!v7(this.view,s,o,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:n}=this;if(n){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of(null)})}}watchTooltipLeave(e){let n=i=>{e.removeEventListener("mouseleave",n),this.active&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})};e.addEventListener("mouseleave",n)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const dp=4;function g7(t,e){let n=t.getBoundingClientRect();return e.clientX>=n.left-dp&&e.clientX<=n.right+dp&&e.clientY>=n.top-dp&&e.clientY<=n.bottom+dp}function v7(t,e,n,i,r,s){let o=t.scrollDOM.getBoundingClientRect(),a=t.documentTop+t.documentPadding.top+t.contentHeight;if(o.left>i||o.right<i||o.top>r||Math.min(o.bottom,a)<r)return!1;let l=t.posAtCoords({x:i,y:r},!1);return l>=e&&l<=n}function y7(t,e={}){let n=Ke.define(),i=si.define({create(){return null},update(r,s){if(r&&(e.hideOnChange&&(s.docChanged||s.selection)||e.hideOn&&e.hideOn(s,r)))return null;if(r&&s.docChanged){let o=s.changes.mapPos(r.pos,-1,wi.TrackDel);if(o==null)return null;let a=Object.assign(Object.create(null),r);a.pos=o,r.end!=null&&(a.end=s.changes.mapPos(r.end)),r=a}for(let o of s.effects)o.is(n)&&(r=o.value),o.is(b7)&&(r=null);return r},provide:r=>hg.from(r)});return[i,Dn.define(r=>new m7(r,t,i,n,e.hoverTime||300)),p7]}function w7(t,e){let n=t.plugin(fS);if(!n)return null;let i=n.manager.tooltips.indexOf(e);return i<0?null:n.manager.tooltipViews[i]}const b7=Ke.define(),s2=Ae.define({combine(t){let e,n;for(let i of t)e=e||i.topContainer,n=n||i.bottomContainer;return{topContainer:e,bottomContainer:n}}});function Cf(t,e){let n=t.plugin(yR),i=n?n.specs.indexOf(e):-1;return i>-1?n.panels[i]:null}const yR=Dn.fromClass(class{constructor(t){this.input=t.state.facet(Ef),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(s2);this.top=new fp(t,!0,e.topContainer),this.bottom=new fp(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(s2);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new fp(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new fp(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(Ef);if(n!=this.input){let i=n.filter(l=>l),r=[],s=[],o=[],a=[];for(let l of i){let c=this.specs.indexOf(l),u;c<0?(u=l(t.view),a.push(u)):(u=this.panels[c],u.update&&u.update(t)),r.push(u),(u.top?s:o).push(u)}this.specs=i,this.panels=r,this.top.sync(s),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let i of this.panels)i.update&&i.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>Pe.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class fp{constructor(e,n,i){this.view=e,this.top=n,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=o2(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=o2(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function o2(t){let e=t.nextSibling;return t.remove(),e}const Ef=Ae.define({enables:yR});class _a extends Ol{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}_a.prototype.elementClass="";_a.prototype.toDOM=void 0;_a.prototype.mapMode=wi.TrackBefore;_a.prototype.startSide=_a.prototype.endSide=-1;_a.prototype.point=!0;const pm=Ae.define(),mm=Ae.define(),e1=Ae.define({combine:t=>t.some(e=>e)});function x7(t){let e=[S7];return t&&t.fixed===!1&&e.push(e1.of(!0)),e}const S7=Dn.fromClass(class{constructor(t){this.view=t,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(mm).map(e=>new l2(t,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!t.state.facet(e1),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,i=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(i<(n.to-n.from)*.8)}t.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(e1)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&this.dom.remove();let n=ut.iter(this.view.state.facet(pm),this.view.viewport.from),i=[],r=this.gutters.map(s=>new k7(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(s.type)){let o=!0;for(let a of s.type)if(a.type==Qn.Text&&o){t1(n,i,a.from);for(let l of r)l.line(this.view,a,i);o=!1}else if(a.widget)for(let l of r)l.widget(this.view,a)}else if(s.type==Qn.Text){t1(n,i,s.from);for(let o of r)o.line(this.view,s,i)}else if(s.widget)for(let o of r)o.widget(this.view,s);for(let s of r)s.finish();t&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(t){let e=t.startState.facet(mm),n=t.state.facet(mm),i=t.docChanged||t.heightChanged||t.viewportChanged||!ut.eq(t.startState.facet(pm),t.state.facet(pm),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let r of this.gutters)r.update(t)&&(i=!0);else{i=!0;let r=[];for(let s of n){let o=e.indexOf(s);o<0?r.push(new l2(this.view,s)):(this.gutters[o].update(t),r.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),r.indexOf(s)<0&&s.destroy();for(let s of r)this.dom.appendChild(s.dom);this.gutters=r}return i}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove()}},{provide:t=>Pe.scrollMargins.of(e=>{let n=e.plugin(t);return!n||n.gutters.length==0||!n.fixed?null:e.textDirection==Ot.LTR?{left:n.dom.offsetWidth*e.scaleX}:{right:n.dom.offsetWidth*e.scaleX}})});function a2(t){return Array.isArray(t)?t:[t]}function t1(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class k7{constructor(e,n,i){this.gutter=e,this.height=i,this.i=0,this.cursor=ut.iter(e.markers,n.from)}addElement(e,n,i){let{gutter:r}=this,s=(n.top-this.height)/e.scaleY,o=n.height/e.scaleY;if(this.i==r.elements.length){let a=new wR(e,o,s,i);r.elements.push(a),r.dom.appendChild(a.dom)}else r.elements[this.i].update(e,o,s,i);this.height=n.bottom,this.i++}line(e,n,i){let r=[];t1(this.cursor,r,n.from),i.length&&(r=r.concat(i));let s=this.gutter.config.lineMarker(e,n,r);s&&r.unshift(s);let o=this.gutter;r.length==0&&!o.config.renderEmptyElements||this.addElement(e,n,r)}widget(e,n){let i=this.gutter.config.widgetMarker(e,n.widget,n);i&&this.addElement(e,n,[i])}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class l2{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in n.domEventHandlers)this.dom.addEventListener(i,r=>{let s=r.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let l=s.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=r.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);n.domEventHandlers[i](e,a,r)&&r.preventDefault()});this.markers=a2(n.markers(e)),n.initialSpacer&&(this.spacer=new wR(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=a2(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],e);r!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[r])}let i=e.view.viewport;return!ut.eq(this.markers,n,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class wR{constructor(e,n,i,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,i,r)}update(e,n,i,r){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),_7(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,n){let i="cm-gutterElement",r=this.dom.firstChild;for(let s=0,o=0;;){let a=o,l=s<n.length?n[s++]:null,c=!1;if(l){let u=l.elementClass;u&&(i+=" "+u);for(let d=o;d<this.markers.length;d++)if(this.markers[d].compare(l)){a=d,c=!0;break}}else a=this.markers.length;for(;o<a;){let u=this.markers[o++];if(u.toDOM){u.destroy(r);let d=r.nextSibling;r.remove(),r=d}}if(!l)break;l.toDOM&&(c?r=r.nextSibling:this.dom.insertBefore(l.toDOM(e),r)),c&&o++}this.dom.className=i,this.markers=n}destroy(){this.setMarkers(null,[])}}function _7(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const C7=Ae.define(),Ac=Ae.define({combine(t){return Ia(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let i=Object.assign({},e);for(let r in n){let s=i[r],o=n[r];i[r]=s?(a,l,c)=>s(a,l,c)||o(a,l,c):o}return i}})}});class cy extends _a{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function uy(t,e){return t.state.facet(Ac).formatNumber(e,t.state)}const E7=mm.compute([Ac],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(C7)},lineMarker(e,n,i){return i.some(r=>r.toDOM)?null:new cy(uy(e,e.state.doc.lineAt(n.from).number))},widgetMarker:()=>null,lineMarkerChange:e=>e.startState.facet(Ac)!=e.state.facet(Ac),initialSpacer(e){return new cy(uy(e,c2(e.state.doc.lines)))},updateSpacer(e,n){let i=uy(n.view,c2(n.view.state.doc.lines));return i==e.number?e:new cy(i)},domEventHandlers:t.facet(Ac).domEventHandlers}));function A7(t={}){return[Ac.of(t),x7(),E7]}function c2(t){let e=9;for(;e<t;)e=e*10+9;return e}const P7=new class extends _a{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},$7=pm.compute(["selection"],t=>{let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.head).from;r>n&&(n=r,e.push(P7.range(r)))}return ut.of(e)});function T7(){return $7}function bR(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=bR(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function He(){for(var t,e,n=0,i="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=bR(t))&&(i&&(i+=" "),i+=e);return i}var xR={BASE_URL:"/VonSim8/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const O7=Symbol((xR?"production":void 0)!=="production"?"RESET":""),N7=t=>typeof(t==null?void 0:t.then)=="function";function R7(t){let e,n;const i={getItem:(r,s)=>{var o,a;const l=u=>{if(u=u||"",e!==u){try{n=JSON.parse(u)}catch{return s}e=u}return n},c=(a=(o=t())==null?void 0:o.getItem(r))!=null?a:null;return N7(c)?c.then(l):l(c)},setItem:(r,s)=>{var o;return(o=t())==null?void 0:o.setItem(r,JSON.stringify(s))},removeItem:r=>{var s;return(s=t())==null?void 0:s.removeItem(r)}};return typeof window<"u"&&typeof window.addEventListener=="function"&&window.Storage&&(i.subscribe=(r,s,o)=>{if(!(t()instanceof window.Storage))return()=>{};const a=l=>{if(l.storageArea===t()&&l.key===r){let c;try{c=JSON.parse(l.newValue||"")}catch{c=o}s(c)}};return window.addEventListener("storage",a),()=>{window.removeEventListener("storage",a)}}),i}const M7=R7(()=>typeof window<"u"?window.localStorage:void 0);function SR(t,e,n=M7,i){const r=i==null?void 0:i.getOnInit,s=Ce(r?n.getItem(t,e):e);return(xR?"production":void 0)!=="production"&&(s.debugPrivate=!0),s.onMount=a=>{r||a(n.getItem(t,e));let l;return n.subscribe&&(l=n.subscribe(t,a,e)),l},Ce(a=>a(s),(a,l,c)=>{const u=typeof c=="function"?c(a(s)):c;return u===O7?(l(s,e),n.removeItem(t)):u instanceof Promise?u.then(d=>(l(s,d),n.setItem(t,d))):(l(s,u),n.setItem(t,u))})}function be(){return be=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},be.apply(this,arguments)}function D7(t,e=globalThis==null?void 0:globalThis.document){const n=ti(t);g.useEffect(()=>{const i=r=>{r.key==="Escape"&&n(r)};return e.addEventListener("keydown",i),()=>e.removeEventListener("keydown",i)},[n,e])}const n1="dismissableLayer.update",I7="dismissableLayer.pointerDownOutside",L7="dismissableLayer.focusOutside";let u2;const kR=g.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Av=g.forwardRef((t,e)=>{var n;const{disableOutsidePointerEvents:i=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...c}=t,u=g.useContext(kR),[d,f]=g.useState(null),h=(n=d==null?void 0:d.ownerDocument)!==null&&n!==void 0?n:globalThis==null?void 0:globalThis.document,[,p]=g.useState({}),m=st(e,C=>f(C)),w=Array.from(u.layers),[v]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),y=w.indexOf(v),x=d?w.indexOf(d):-1,k=u.layersWithOutsidePointerEventsDisabled.size>0,_=x>=y,P=j7(C=>{const N=C.target,R=[...u.branches].some(M=>M.contains(N));!_||R||(s==null||s(C),a==null||a(C),C.defaultPrevented||l==null||l())},h),A=F7(C=>{const N=C.target;[...u.branches].some(M=>M.contains(N))||(o==null||o(C),a==null||a(C),C.defaultPrevented||l==null||l())},h);return D7(C=>{x===u.layers.size-1&&(r==null||r(C),!C.defaultPrevented&&l&&(C.preventDefault(),l()))},h),g.useEffect(()=>{if(d)return i&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(u2=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),d2(),()=>{i&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=u2)}},[d,h,i,u]),g.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),d2())},[d,u]),g.useEffect(()=>{const C=()=>p({});return document.addEventListener(n1,C),()=>document.removeEventListener(n1,C)},[]),g.createElement(Ge.div,be({},c,{ref:m,style:{pointerEvents:k?_?"auto":"none":void 0,...t.style},onFocusCapture:ve(t.onFocusCapture,A.onFocusCapture),onBlurCapture:ve(t.onBlurCapture,A.onBlurCapture),onPointerDownCapture:ve(t.onPointerDownCapture,P.onPointerDownCapture)}))}),B7=g.forwardRef((t,e)=>{const n=g.useContext(kR),i=g.useRef(null),r=st(e,i);return g.useEffect(()=>{const s=i.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),g.createElement(Ge.div,be({},t,{ref:r}))});function j7(t,e=globalThis==null?void 0:globalThis.document){const n=ti(t),i=g.useRef(!1),r=g.useRef(()=>{});return g.useEffect(()=>{const s=a=>{if(a.target&&!i.current){let u=function(){_R(I7,n,c,{discrete:!0})};var l=u;const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=u,e.addEventListener("click",r.current,{once:!0})):u()}else e.removeEventListener("click",r.current);i.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",r.current)}},[e,n]),{onPointerDownCapture:()=>i.current=!0}}function F7(t,e=globalThis==null?void 0:globalThis.document){const n=ti(t),i=g.useRef(!1);return g.useEffect(()=>{const r=s=>{s.target&&!i.current&&_R(L7,n,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function d2(){const t=new CustomEvent(n1);document.dispatchEvent(t)}function _R(t,e,n,{discrete:i}){const r=n.originalEvent.target,s=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),i?Yx(r,s):r.dispatchEvent(s)}const z7=Av,U7=B7;let dy=0;function pS(){g.useEffect(()=>{var t,e;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(t=n[0])!==null&&t!==void 0?t:f2()),document.body.insertAdjacentElement("beforeend",(e=n[1])!==null&&e!==void 0?e:f2()),dy++,()=>{dy===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(i=>i.remove()),dy--}},[])}function f2(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",t}const fy="focusScope.autoFocusOnMount",hy="focusScope.autoFocusOnUnmount",h2={bubbles:!1,cancelable:!0},mS=g.forwardRef((t,e)=>{const{loop:n=!1,trapped:i=!1,onMountAutoFocus:r,onUnmountAutoFocus:s,...o}=t,[a,l]=g.useState(null),c=ti(r),u=ti(s),d=g.useRef(null),f=st(e,m=>l(m)),h=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(i){let y=function(P){if(h.paused||!a)return;const A=P.target;a.contains(A)?d.current=A:No(d.current,{select:!0})},x=function(P){if(h.paused||!a)return;const A=P.relatedTarget;A!==null&&(a.contains(A)||No(d.current,{select:!0}))},k=function(P){if(document.activeElement===document.body)for(const C of P)C.removedNodes.length>0&&No(a)};var m=y,w=x,v=k;document.addEventListener("focusin",y),document.addEventListener("focusout",x);const _=new MutationObserver(k);return a&&_.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",x),_.disconnect()}}},[i,a,h.paused]),g.useEffect(()=>{if(a){m2.add(h);const m=document.activeElement;if(!a.contains(m)){const v=new CustomEvent(fy,h2);a.addEventListener(fy,c),a.dispatchEvent(v),v.defaultPrevented||(V7(X7(CR(a)),{select:!0}),document.activeElement===m&&No(a))}return()=>{a.removeEventListener(fy,c),setTimeout(()=>{const v=new CustomEvent(hy,h2);a.addEventListener(hy,u),a.dispatchEvent(v),v.defaultPrevented||No(m??document.body,{select:!0}),a.removeEventListener(hy,u),m2.remove(h)},0)}}},[a,c,u,h]);const p=g.useCallback(m=>{if(!n&&!i||h.paused)return;const w=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,v=document.activeElement;if(w&&v){const y=m.currentTarget,[x,k]=H7(y);x&&k?!m.shiftKey&&v===k?(m.preventDefault(),n&&No(x,{select:!0})):m.shiftKey&&v===x&&(m.preventDefault(),n&&No(k,{select:!0})):v===y&&m.preventDefault()}},[n,i,h.paused]);return g.createElement(Ge.div,be({tabIndex:-1},o,{ref:f,onKeyDown:p}))});function V7(t,{select:e=!1}={}){const n=document.activeElement;for(const i of t)if(No(i,{select:e}),document.activeElement!==n)return}function H7(t){const e=CR(t),n=p2(e,t),i=p2(e.reverse(),t);return[n,i]}function CR(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function p2(t,e){for(const n of t)if(!W7(n,{upTo:e}))return n}function W7(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function G7(t){return t instanceof HTMLInputElement&&"select"in t}function No(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&G7(t)&&e&&t.select()}}const m2=K7();function K7(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=g2(t,e),t.unshift(e)},remove(e){var n;t=g2(t,e),(n=t[0])===null||n===void 0||n.resume()}}}function g2(t,e){const n=[...t],i=n.indexOf(e);return i!==-1&&n.splice(i,1),n}function X7(t){return t.filter(e=>e.tagName!=="A")}const q7=["top","right","bottom","left"],Ca=Math.min,Bi=Math.max,pg=Math.round,hp=Math.floor,Ea=t=>({x:t,y:t}),Y7={left:"right",right:"left",bottom:"top",top:"bottom"},J7={start:"end",end:"start"};function i1(t,e,n){return Bi(t,Ca(e,n))}function mo(t,e){return typeof t=="function"?t(e):t}function go(t){return t.split("-")[0]}function Ou(t){return t.split("-")[1]}function gS(t){return t==="x"?"y":"x"}function vS(t){return t==="y"?"height":"width"}function Nu(t){return["top","bottom"].includes(go(t))?"y":"x"}function yS(t){return gS(Nu(t))}function Z7(t,e,n){n===void 0&&(n=!1);const i=Ou(t),r=yS(t),s=vS(r);let o=r==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=mg(o)),[o,mg(o)]}function Q7(t){const e=mg(t);return[r1(t),e,r1(e)]}function r1(t){return t.replace(/start|end/g,e=>J7[e])}function e9(t,e,n){const i=["left","right"],r=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?r:i:e?i:r;case"left":case"right":return e?s:o;default:return[]}}function t9(t,e,n,i){const r=Ou(t);let s=e9(go(t),n==="start",i);return r&&(s=s.map(o=>o+"-"+r),e&&(s=s.concat(s.map(r1)))),s}function mg(t){return t.replace(/left|right|bottom|top/g,e=>Y7[e])}function n9(t){return{top:0,right:0,bottom:0,left:0,...t}}function ER(t){return typeof t!="number"?n9(t):{top:t,right:t,bottom:t,left:t}}function gg(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function v2(t,e,n){let{reference:i,floating:r}=t;const s=Nu(e),o=yS(e),a=vS(o),l=go(e),c=s==="y",u=i.x+i.width/2-r.width/2,d=i.y+i.height/2-r.height/2,f=i[a]/2-r[a]/2;let h;switch(l){case"top":h={x:u,y:i.y-r.height};break;case"bottom":h={x:u,y:i.y+i.height};break;case"right":h={x:i.x+i.width,y:d};break;case"left":h={x:i.x-r.width,y:d};break;default:h={x:i.x,y:i.y}}switch(Ou(e)){case"start":h[o]-=f*(n&&c?-1:1);break;case"end":h[o]+=f*(n&&c?-1:1);break}return h}const i9=async(t,e,n)=>{const{placement:i="bottom",strategy:r="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:r}),{x:u,y:d}=v2(c,i,l),f=i,h={},p=0;for(let m=0;m<a.length;m++){const{name:w,fn:v}=a[m],{x:y,y:x,data:k,reset:_}=await v({x:u,y:d,initialPlacement:i,placement:f,strategy:r,middlewareData:h,rects:c,platform:o,elements:{reference:t,floating:e}});if(u=y??u,d=x??d,h={...h,[w]:{...h[w],...k}},_&&p<=50){p++,typeof _=="object"&&(_.placement&&(f=_.placement),_.rects&&(c=_.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:r}):_.rects),{x:u,y:d}=v2(c,f,l)),m=-1;continue}}return{x:u,y:d,placement:f,strategy:r,middlewareData:h}};async function Af(t,e){var n;e===void 0&&(e={});const{x:i,y:r,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=mo(e,t),p=ER(h),w=a[f?d==="floating"?"reference":"floating":d],v=gg(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(w)))==null||n?w:w.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),y=d==="floating"?{...o.floating,x:i,y:r}:o.reference,x=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),k=await(s.isElement==null?void 0:s.isElement(x))?await(s.getScale==null?void 0:s.getScale(x))||{x:1,y:1}:{x:1,y:1},_=gg(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:y,offsetParent:x,strategy:l}):y);return{top:(v.top-_.top+p.top)/k.y,bottom:(_.bottom-v.bottom+p.bottom)/k.y,left:(v.left-_.left+p.left)/k.x,right:(_.right-v.right+p.right)/k.x}}const r9=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:i,placement:r,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:u=0}=mo(t,e)||{};if(c==null)return{};const d=ER(u),f={x:n,y:i},h=yS(r),p=vS(h),m=await o.getDimensions(c),w=h==="y",v=w?"top":"left",y=w?"bottom":"right",x=w?"clientHeight":"clientWidth",k=s.reference[p]+s.reference[h]-f[h]-s.floating[p],_=f[h]-s.reference[h],P=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let A=P?P[x]:0;(!A||!await(o.isElement==null?void 0:o.isElement(P)))&&(A=a.floating[x]||s.floating[p]);const C=k/2-_/2,N=A/2-m[p]/2-1,R=Ca(d[v],N),M=Ca(d[y],N),L=R,H=A-m[p]-M,T=A/2-m[p]/2+C,V=i1(L,T,H),Y=!l.arrow&&Ou(r)!=null&&T!=V&&s.reference[p]/2-(T<L?R:M)-m[p]/2<0,ne=Y?T<L?T-L:T-H:0;return{[h]:f[h]+ne,data:{[h]:V,centerOffset:T-V-ne,...Y&&{alignmentOffset:ne}},reset:Y}}}),s9=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,i;const{placement:r,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...w}=mo(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const v=go(r),y=go(a)===a,x=await(l.isRTL==null?void 0:l.isRTL(c.floating)),k=f||(y||!m?[mg(a)]:Q7(a));!f&&p!=="none"&&k.push(...t9(a,m,p,x));const _=[a,...k],P=await Af(e,w),A=[];let C=((i=s.flip)==null?void 0:i.overflows)||[];if(u&&A.push(P[v]),d){const L=Z7(r,o,x);A.push(P[L[0]],P[L[1]])}if(C=[...C,{placement:r,overflows:A}],!A.every(L=>L<=0)){var N,R;const L=(((N=s.flip)==null?void 0:N.index)||0)+1,H=_[L];if(H)return{data:{index:L,overflows:C},reset:{placement:H}};let T=(R=C.filter(V=>V.overflows[0]<=0).sort((V,Y)=>V.overflows[1]-Y.overflows[1])[0])==null?void 0:R.placement;if(!T)switch(h){case"bestFit":{var M;const V=(M=C.map(Y=>[Y.placement,Y.overflows.filter(ne=>ne>0).reduce((ne,W)=>ne+W,0)]).sort((Y,ne)=>Y[1]-ne[1])[0])==null?void 0:M[0];V&&(T=V);break}case"initialPlacement":T=a;break}if(r!==T)return{reset:{placement:T}}}return{}}}};function y2(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function w2(t){return q7.some(e=>t[e]>=0)}const o9=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:i="referenceHidden",...r}=mo(t,e);switch(i){case"referenceHidden":{const s=await Af(e,{...r,elementContext:"reference"}),o=y2(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:w2(o)}}}case"escaped":{const s=await Af(e,{...r,altBoundary:!0}),o=y2(s,n.floating);return{data:{escapedOffsets:o,escaped:w2(o)}}}default:return{}}}}};async function a9(t,e){const{placement:n,platform:i,elements:r}=t,s=await(i.isRTL==null?void 0:i.isRTL(r.floating)),o=go(n),a=Ou(n),l=Nu(n)==="y",c=["left","top"].includes(o)?-1:1,u=s&&l?-1:1,d=mo(e,t);let{mainAxis:f,crossAxis:h,alignmentAxis:p}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),l?{x:h*u,y:f*c}:{x:f*c,y:h*u}}const l9=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,i;const{x:r,y:s,placement:o,middlewareData:a}=e,l=await a9(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(i=a.arrow)!=null&&i.alignmentOffset?{}:{x:r+l.x,y:s+l.y,data:{...l,placement:o}}}}},c9=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:i,placement:r}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:w=>{let{x:v,y}=w;return{x:v,y}}},...l}=mo(t,e),c={x:n,y:i},u=await Af(e,l),d=Nu(go(r)),f=gS(d);let h=c[f],p=c[d];if(s){const w=f==="y"?"top":"left",v=f==="y"?"bottom":"right",y=h+u[w],x=h-u[v];h=i1(y,h,x)}if(o){const w=d==="y"?"top":"left",v=d==="y"?"bottom":"right",y=p+u[w],x=p-u[v];p=i1(y,p,x)}const m=a.fn({...e,[f]:h,[d]:p});return{...m,data:{x:m.x-n,y:m.y-i}}}}},u9=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:i,placement:r,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=mo(t,e),u={x:n,y:i},d=Nu(r),f=gS(d);let h=u[f],p=u[d];const m=mo(a,e),w=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const x=f==="y"?"height":"width",k=s.reference[f]-s.floating[x]+w.mainAxis,_=s.reference[f]+s.reference[x]-w.mainAxis;h<k?h=k:h>_&&(h=_)}if(c){var v,y;const x=f==="y"?"width":"height",k=["top","left"].includes(go(r)),_=s.reference[d]-s.floating[x]+(k&&((v=o.offset)==null?void 0:v[d])||0)+(k?0:w.crossAxis),P=s.reference[d]+s.reference[x]+(k?0:((y=o.offset)==null?void 0:y[d])||0)-(k?w.crossAxis:0);p<_?p=_:p>P&&(p=P)}return{[f]:h,[d]:p}}}},d9=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){const{placement:n,rects:i,platform:r,elements:s}=e,{apply:o=()=>{},...a}=mo(t,e),l=await Af(e,a),c=go(n),u=Ou(n),d=Nu(n)==="y",{width:f,height:h}=i.floating;let p,m;c==="top"||c==="bottom"?(p=c,m=u===(await(r.isRTL==null?void 0:r.isRTL(s.floating))?"start":"end")?"left":"right"):(m=c,p=u==="end"?"top":"bottom");const w=h-l[p],v=f-l[m],y=!e.middlewareData.shift;let x=w,k=v;if(d){const P=f-l.left-l.right;k=u||y?Ca(v,P):P}else{const P=h-l.top-l.bottom;x=u||y?Ca(w,P):P}if(y&&!u){const P=Bi(l.left,0),A=Bi(l.right,0),C=Bi(l.top,0),N=Bi(l.bottom,0);d?k=f-2*(P!==0||A!==0?P+A:Bi(l.left,l.right)):x=h-2*(C!==0||N!==0?C+N:Bi(l.top,l.bottom))}await o({...e,availableWidth:k,availableHeight:x});const _=await r.getDimensions(s.floating);return f!==_.width||h!==_.height?{reset:{rects:!0}}:{}}}};function Aa(t){return AR(t)?(t.nodeName||"").toLowerCase():"#document"}function Ki(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ko(t){var e;return(e=(AR(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function AR(t){return t instanceof Node||t instanceof Ki(t).Node}function vo(t){return t instanceof Element||t instanceof Ki(t).Element}function $s(t){return t instanceof HTMLElement||t instanceof Ki(t).HTMLElement}function b2(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Ki(t).ShadowRoot}function vh(t){const{overflow:e,overflowX:n,overflowY:i,display:r}=_r(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!["inline","contents"].includes(r)}function f9(t){return["table","td","th"].includes(Aa(t))}function wS(t){const e=bS(),n=_r(t);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(i=>(n.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(n.contain||"").includes(i))}function h9(t){let e=hu(t);for(;$s(e)&&!Pv(e);){if(wS(e))return e;e=hu(e)}return null}function bS(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Pv(t){return["html","body","#document"].includes(Aa(t))}function _r(t){return Ki(t).getComputedStyle(t)}function $v(t){return vo(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function hu(t){if(Aa(t)==="html")return t;const e=t.assignedSlot||t.parentNode||b2(t)&&t.host||ko(t);return b2(e)?e.host:e}function PR(t){const e=hu(t);return Pv(e)?t.ownerDocument?t.ownerDocument.body:t.body:$s(e)&&vh(e)?e:PR(e)}function Pf(t,e,n){var i;e===void 0&&(e=[]),n===void 0&&(n=!0);const r=PR(t),s=r===((i=t.ownerDocument)==null?void 0:i.body),o=Ki(r);return s?e.concat(o,o.visualViewport||[],vh(r)?r:[],o.frameElement&&n?Pf(o.frameElement):[]):e.concat(r,Pf(r,[],n))}function $R(t){const e=_r(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=$s(t),s=r?t.offsetWidth:n,o=r?t.offsetHeight:i,a=pg(n)!==s||pg(i)!==o;return a&&(n=s,i=o),{width:n,height:i,$:a}}function xS(t){return vo(t)?t:t.contextElement}function Uc(t){const e=xS(t);if(!$s(e))return Ea(1);const n=e.getBoundingClientRect(),{width:i,height:r,$:s}=$R(e);let o=(s?pg(n.width):n.width)/i,a=(s?pg(n.height):n.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const p9=Ea(0);function TR(t){const e=Ki(t);return!bS()||!e.visualViewport?p9:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function m9(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Ki(t)?!1:e}function Dl(t,e,n,i){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=xS(t);let o=Ea(1);e&&(i?vo(i)&&(o=Uc(i)):o=Uc(t));const a=m9(s,n,i)?TR(s):Ea(0);let l=(r.left+a.x)/o.x,c=(r.top+a.y)/o.y,u=r.width/o.x,d=r.height/o.y;if(s){const f=Ki(s),h=i&&vo(i)?Ki(i):i;let p=f.frameElement;for(;p&&i&&h!==f;){const m=Uc(p),w=p.getBoundingClientRect(),v=_r(p),y=w.left+(p.clientLeft+parseFloat(v.paddingLeft))*m.x,x=w.top+(p.clientTop+parseFloat(v.paddingTop))*m.y;l*=m.x,c*=m.y,u*=m.x,d*=m.y,l+=y,c+=x,p=Ki(p).frameElement}}return gg({width:u,height:d,x:l,y:c})}function g9(t){let{rect:e,offsetParent:n,strategy:i}=t;const r=$s(n),s=ko(n);if(n===s)return e;let o={scrollLeft:0,scrollTop:0},a=Ea(1);const l=Ea(0);if((r||!r&&i!=="fixed")&&((Aa(n)!=="body"||vh(s))&&(o=$v(n)),$s(n))){const c=Dl(n);a=Uc(n),l.x=c.x+n.clientLeft,l.y=c.y+n.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-o.scrollLeft*a.x+l.x,y:e.y*a.y-o.scrollTop*a.y+l.y}}function v9(t){return Array.from(t.getClientRects())}function OR(t){return Dl(ko(t)).left+$v(t).scrollLeft}function y9(t){const e=ko(t),n=$v(t),i=t.ownerDocument.body,r=Bi(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),s=Bi(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let o=-n.scrollLeft+OR(t);const a=-n.scrollTop;return _r(i).direction==="rtl"&&(o+=Bi(e.clientWidth,i.clientWidth)-r),{width:r,height:s,x:o,y:a}}function w9(t,e){const n=Ki(t),i=ko(t),r=n.visualViewport;let s=i.clientWidth,o=i.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;const c=bS();(!c||c&&e==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a,y:l}}function b9(t,e){const n=Dl(t,!0,e==="fixed"),i=n.top+t.clientTop,r=n.left+t.clientLeft,s=$s(t)?Uc(t):Ea(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=r*s.x,c=i*s.y;return{width:o,height:a,x:l,y:c}}function x2(t,e,n){let i;if(e==="viewport")i=w9(t,n);else if(e==="document")i=y9(ko(t));else if(vo(e))i=b9(e,n);else{const r=TR(t);i={...e,x:e.x-r.x,y:e.y-r.y}}return gg(i)}function NR(t,e){const n=hu(t);return n===e||!vo(n)||Pv(n)?!1:_r(n).position==="fixed"||NR(n,e)}function x9(t,e){const n=e.get(t);if(n)return n;let i=Pf(t,[],!1).filter(a=>vo(a)&&Aa(a)!=="body"),r=null;const s=_r(t).position==="fixed";let o=s?hu(t):t;for(;vo(o)&&!Pv(o);){const a=_r(o),l=wS(o);!l&&a.position==="fixed"&&(r=null),(s?!l&&!r:!l&&a.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||vh(o)&&!l&&NR(t,o))?i=i.filter(u=>u!==o):r=a,o=hu(o)}return e.set(t,i),i}function S9(t){let{element:e,boundary:n,rootBoundary:i,strategy:r}=t;const o=[...n==="clippingAncestors"?x9(e,this._c):[].concat(n),i],a=o[0],l=o.reduce((c,u)=>{const d=x2(e,u,r);return c.top=Bi(d.top,c.top),c.right=Ca(d.right,c.right),c.bottom=Ca(d.bottom,c.bottom),c.left=Bi(d.left,c.left),c},x2(e,a,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function k9(t){const{width:e,height:n}=$R(t);return{width:e,height:n}}function _9(t,e,n){const i=$s(e),r=ko(e),s=n==="fixed",o=Dl(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=Ea(0);if(i||!i&&!s)if((Aa(e)!=="body"||vh(r))&&(a=$v(e)),i){const c=Dl(e,!0,s,e);l.x=c.x+e.clientLeft,l.y=c.y+e.clientTop}else r&&(l.x=OR(r));return{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function S2(t,e){return!$s(t)||_r(t).position==="fixed"?null:e?e(t):t.offsetParent}function RR(t,e){const n=Ki(t);if(!$s(t))return n;let i=S2(t,e);for(;i&&f9(i)&&_r(i).position==="static";)i=S2(i,e);return i&&(Aa(i)==="html"||Aa(i)==="body"&&_r(i).position==="static"&&!wS(i))?n:i||h9(t)||n}const C9=async function(t){let{reference:e,floating:n,strategy:i}=t;const r=this.getOffsetParent||RR,s=this.getDimensions;return{reference:_9(e,await r(n),i),floating:{x:0,y:0,...await s(n)}}};function E9(t){return _r(t).direction==="rtl"}const A9={convertOffsetParentRelativeRectToViewportRelativeRect:g9,getDocumentElement:ko,getClippingRect:S9,getOffsetParent:RR,getElementRects:C9,getClientRects:v9,getDimensions:k9,getScale:Uc,isElement:vo,isRTL:E9};function P9(t,e){let n=null,i;const r=ko(t);function s(){clearTimeout(i),n&&n.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:c,top:u,width:d,height:f}=t.getBoundingClientRect();if(a||e(),!d||!f)return;const h=hp(u),p=hp(r.clientWidth-(c+d)),m=hp(r.clientHeight-(u+f)),w=hp(c),y={rootMargin:-h+"px "+-p+"px "+-m+"px "+-w+"px",threshold:Bi(0,Ca(1,l))||1};let x=!0;function k(_){const P=_[0].intersectionRatio;if(P!==l){if(!x)return o();P?o(!1,P):i=setTimeout(()=>{o(!1,1e-7)},100)}x=!1}try{n=new IntersectionObserver(k,{...y,root:r.ownerDocument})}catch{n=new IntersectionObserver(k,y)}n.observe(t)}return o(!0),s}function $9(t,e,n,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,c=xS(t),u=r||s?[...c?Pf(c):[],...Pf(e)]:[];u.forEach(v=>{r&&v.addEventListener("scroll",n,{passive:!0}),s&&v.addEventListener("resize",n)});const d=c&&a?P9(c,n):null;let f=-1,h=null;o&&(h=new ResizeObserver(v=>{let[y]=v;y&&y.target===c&&h&&(h.unobserve(e),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{h&&h.observe(e)})),n()}),c&&!l&&h.observe(c),h.observe(e));let p,m=l?Dl(t):null;l&&w();function w(){const v=Dl(t);m&&(v.x!==m.x||v.y!==m.y||v.width!==m.width||v.height!==m.height)&&n(),m=v,p=requestAnimationFrame(w)}return n(),()=>{u.forEach(v=>{r&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),d&&d(),h&&h.disconnect(),h=null,l&&cancelAnimationFrame(p)}}const T9=c9,O9=s9,N9=d9,R9=o9,k2=r9,M9=u9,D9=(t,e,n)=>{const i=new Map,r={platform:A9,...n},s={...r.platform,_c:i};return i9(t,e,{...r,platform:s})},I9=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:i,padding:r}=typeof t=="function"?t(n):t;return i&&e(i)?i.current!=null?k2({element:i.current,padding:r}).fn(n):{}:i?k2({element:i,padding:r}).fn(n):{}}}};var gm=typeof document<"u"?g.useLayoutEffect:g.useEffect;function vg(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,i,r;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(i=n;i--!==0;)if(!vg(t[i],e[i]))return!1;return!0}if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!{}.hasOwnProperty.call(e,r[i]))return!1;for(i=n;i--!==0;){const s=r[i];if(!(s==="_owner"&&t.$$typeof)&&!vg(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function MR(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function _2(t,e){const n=MR(t);return Math.round(e*n)/n}function C2(t){const e=g.useRef(t);return gm(()=>{e.current=t}),e}function L9(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:i=[],platform:r,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[u,d]=g.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[f,h]=g.useState(i);vg(f,i)||h(i);const[p,m]=g.useState(null),[w,v]=g.useState(null),y=g.useCallback(Y=>{Y!=P.current&&(P.current=Y,m(Y))},[m]),x=g.useCallback(Y=>{Y!==A.current&&(A.current=Y,v(Y))},[v]),k=s||p,_=o||w,P=g.useRef(null),A=g.useRef(null),C=g.useRef(u),N=C2(l),R=C2(r),M=g.useCallback(()=>{if(!P.current||!A.current)return;const Y={placement:e,strategy:n,middleware:f};R.current&&(Y.platform=R.current),D9(P.current,A.current,Y).then(ne=>{const W={...ne,isPositioned:!0};L.current&&!vg(C.current,W)&&(C.current=W,bo.flushSync(()=>{d(W)}))})},[f,e,n,R]);gm(()=>{c===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,d(Y=>({...Y,isPositioned:!1})))},[c]);const L=g.useRef(!1);gm(()=>(L.current=!0,()=>{L.current=!1}),[]),gm(()=>{if(k&&(P.current=k),_&&(A.current=_),k&&_){if(N.current)return N.current(k,_,M);M()}},[k,_,M,N]);const H=g.useMemo(()=>({reference:P,floating:A,setReference:y,setFloating:x}),[y,x]),T=g.useMemo(()=>({reference:k,floating:_}),[k,_]),V=g.useMemo(()=>{const Y={position:n,left:0,top:0};if(!T.floating)return Y;const ne=_2(T.floating,u.x),W=_2(T.floating,u.y);return a?{...Y,transform:"translate("+ne+"px, "+W+"px)",...MR(T.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ne,top:W}},[n,a,T.floating,u.x,u.y]);return g.useMemo(()=>({...u,update:M,refs:H,elements:T,floatingStyles:V}),[u,M,H,T,V])}function SS(t){const[e,n]=g.useState(void 0);return kr(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const i=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const s=r[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;o=c.inlineSize,a=c.blockSize}else o=t.offsetWidth,a=t.offsetHeight;n({width:o,height:a})});return i.observe(t,{box:"border-box"}),()=>i.unobserve(t)}else n(void 0)},[t]),e}const DR="Popper",[IR,Ru]=es(DR),[B9,LR]=IR(DR),j9=t=>{const{__scopePopper:e,children:n}=t,[i,r]=g.useState(null);return g.createElement(B9,{scope:e,anchor:i,onAnchorChange:r},n)},F9="PopperAnchor",z9=g.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:i,...r}=t,s=LR(F9,n),o=g.useRef(null),a=st(e,o);return g.useEffect(()=>{s.onAnchorChange((i==null?void 0:i.current)||o.current)}),i?null:g.createElement(Ge.div,be({},r,{ref:a}))}),BR="PopperContent",[U9,wne]=IR(BR),V9=g.forwardRef((t,e)=>{var n,i,r,s,o,a,l,c;const{__scopePopper:u,side:d="bottom",sideOffset:f=0,align:h="center",alignOffset:p=0,arrowPadding:m=0,avoidCollisions:w=!0,collisionBoundary:v=[],collisionPadding:y=0,sticky:x="partial",hideWhenDetached:k=!1,updatePositionStrategy:_="optimized",onPlaced:P,...A}=t,C=LR(BR,u),[N,R]=g.useState(null),M=st(e,se=>R(se)),[L,H]=g.useState(null),T=SS(L),V=(n=T==null?void 0:T.width)!==null&&n!==void 0?n:0,Y=(i=T==null?void 0:T.height)!==null&&i!==void 0?i:0,ne=d+(h!=="center"?"-"+h:""),W=typeof y=="number"?y:{top:0,right:0,bottom:0,left:0,...y},j=Array.isArray(v)?v:[v],Q=j.length>0,K={padding:W,boundary:j.filter(H9),altBoundary:Q},{refs:ee,floatingStyles:le,placement:B,isPositioned:I,middlewareData:z}=L9({strategy:"fixed",placement:ne,whileElementsMounted:(...se)=>$9(...se,{animationFrame:_==="always"}),elements:{reference:C.anchor},middleware:[l9({mainAxis:f+Y,alignmentAxis:p}),w&&T9({mainAxis:!0,crossAxis:!1,limiter:x==="partial"?M9():void 0,...K}),w&&O9({...K}),N9({...K,apply:({elements:se,rects:Me,availableWidth:pe,availableHeight:Le})=>{const{width:ze,height:xe}=Me.reference,it=se.floating.style;it.setProperty("--radix-popper-available-width",`${pe}px`),it.setProperty("--radix-popper-available-height",`${Le}px`),it.setProperty("--radix-popper-anchor-width",`${ze}px`),it.setProperty("--radix-popper-anchor-height",`${xe}px`)}}),L&&I9({element:L,padding:m}),W9({arrowWidth:V,arrowHeight:Y}),k&&R9({strategy:"referenceHidden",...K})]}),[S,$]=jR(B),D=ti(P);kr(()=>{I&&(D==null||D())},[I,D]);const O=(r=z.arrow)===null||r===void 0?void 0:r.x,U=(s=z.arrow)===null||s===void 0?void 0:s.y,X=((o=z.arrow)===null||o===void 0?void 0:o.centerOffset)!==0,[te,J]=g.useState();return kr(()=>{N&&J(window.getComputedStyle(N).zIndex)},[N]),g.createElement("div",{ref:ee.setFloating,"data-radix-popper-content-wrapper":"",style:{...le,transform:I?le.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:te,"--radix-popper-transform-origin":[(a=z.transformOrigin)===null||a===void 0?void 0:a.x,(l=z.transformOrigin)===null||l===void 0?void 0:l.y].join(" ")},dir:t.dir},g.createElement(U9,{scope:u,placedSide:S,onArrowChange:H,arrowX:O,arrowY:U,shouldHideArrow:X},g.createElement(Ge.div,be({"data-side":S,"data-align":$},A,{ref:M,style:{...A.style,animation:I?void 0:"none",opacity:(c=z.hide)!==null&&c!==void 0&&c.referenceHidden?0:void 0}}))))});function H9(t){return t!==null}const W9=t=>({name:"transformOrigin",options:t,fn(e){var n,i,r,s,o;const{placement:a,rects:l,middlewareData:c}=e,d=((n=c.arrow)===null||n===void 0?void 0:n.centerOffset)!==0,f=d?0:t.arrowWidth,h=d?0:t.arrowHeight,[p,m]=jR(a),w={start:"0%",center:"50%",end:"100%"}[m],v=((i=(r=c.arrow)===null||r===void 0?void 0:r.x)!==null&&i!==void 0?i:0)+f/2,y=((s=(o=c.arrow)===null||o===void 0?void 0:o.y)!==null&&s!==void 0?s:0)+h/2;let x="",k="";return p==="bottom"?(x=d?w:`${v}px`,k=`${-h}px`):p==="top"?(x=d?w:`${v}px`,k=`${l.floating.height+h}px`):p==="right"?(x=`${-h}px`,k=d?w:`${y}px`):p==="left"&&(x=`${l.floating.width+h}px`,k=d?w:`${y}px`),{data:{x,y:k}}}});function jR(t){const[e,n="center"]=t.split("-");return[e,n]}const kS=j9,_S=z9,CS=V9,Tv=g.forwardRef((t,e)=>{var n;const{container:i=globalThis==null||(n=globalThis.document)===null||n===void 0?void 0:n.body,...r}=t;return i?P8.createPortal(g.createElement(Ge.div,be({},r,{ref:e})),i):null});var G9=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Ql=new WeakMap,pp=new WeakMap,mp={},py=0,FR=function(t){return t&&(t.host||FR(t.parentNode))},K9=function(t,e){return e.map(function(n){if(t.contains(n))return n;var i=FR(n);return i&&t.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},X9=function(t,e,n,i){var r=K9(e,Array.isArray(t)?t:[t]);mp[n]||(mp[n]=new WeakMap);var s=mp[n],o=[],a=new Set,l=new Set(r),c=function(d){!d||a.has(d)||(a.add(d),c(d.parentNode))};r.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(f){if(a.has(f))u(f);else{var h=f.getAttribute(i),p=h!==null&&h!=="false",m=(Ql.get(f)||0)+1,w=(s.get(f)||0)+1;Ql.set(f,m),s.set(f,w),o.push(f),m===1&&p&&pp.set(f,!0),w===1&&f.setAttribute(n,"true"),p||f.setAttribute(i,"true")}})};return u(e),a.clear(),py++,function(){o.forEach(function(d){var f=Ql.get(d)-1,h=s.get(d)-1;Ql.set(d,f),s.set(d,h),f||(pp.has(d)||d.removeAttribute(i),pp.delete(d)),h||d.removeAttribute(n)}),py--,py||(Ql=new WeakMap,Ql=new WeakMap,pp=new WeakMap,mp={})}},ES=function(t,e,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(t)?t:[t]),r=e||G9(t);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live]"))),X9(i,r,n,"aria-hidden")):function(){return null}},vm="right-scroll-bar-position",ym="width-before-scroll-bar",q9="with-scroll-bars-hidden",Y9="--removed-body-scroll-bar-size";function my(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function J9(t,e){var n=g.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(i){var r=n.value;r!==i&&(n.value=i,n.callback(i,r))}}}})[0];return n.callback=e,n.facade}var E2=new WeakMap;function Z9(t,e){var n=J9(e||null,function(i){return t.forEach(function(r){return my(r,i)})});return g.useLayoutEffect(function(){var i=E2.get(n);if(i){var r=new Set(i),s=new Set(t),o=n.current;r.forEach(function(a){s.has(a)||my(a,null)}),s.forEach(function(a){r.has(a)||my(a,o)})}E2.set(n,t)},[t]),n}function Q9(t){return t}function ez(t,e){e===void 0&&(e=Q9);var n=[],i=!1,r={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,i);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(i=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){i=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var u=o;o=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),n}}}};return r}function tz(t){t===void 0&&(t={});var e=ez(null);return e.options=ys({async:!0,ssr:!1},t),e}var zR=function(t){var e=t.sideCar,n=YO(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=e.read();if(!i)throw new Error("Sidecar medium not found");return g.createElement(i,ys({},n))};zR.isSideCarExport=!0;function nz(t,e){return t.useMedium(e),zR}var UR=tz(),gy=function(){},Ov=g.forwardRef(function(t,e){var n=g.useRef(null),i=g.useState({onScrollCapture:gy,onWheelCapture:gy,onTouchMoveCapture:gy}),r=i[0],s=i[1],o=t.forwardProps,a=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,f=t.sideCar,h=t.noIsolation,p=t.inert,m=t.allowPinchZoom,w=t.as,v=w===void 0?"div":w,y=YO(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),x=f,k=Z9([n,e]),_=ys(ys({},y),r);return g.createElement(g.Fragment,null,u&&g.createElement(x,{sideCar:UR,removeScrollBar:c,shards:d,noIsolation:h,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:n}),o?g.cloneElement(g.Children.only(a),ys(ys({},_),{ref:k})):g.createElement(v,ys({},_,{className:l,ref:k}),a))});Ov.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ov.classNames={fullWidth:ym,zeroRight:vm};var iz=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function rz(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=iz();return e&&t.setAttribute("nonce",e),t}function sz(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function oz(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var az=function(){var t=0,e=null;return{add:function(n){t==0&&(e=rz())&&(sz(e,n),oz(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},lz=function(){var t=az();return function(e,n){g.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},VR=function(){var t=lz(),e=function(n){var i=n.styles,r=n.dynamic;return t(i,r),null};return e},cz={left:0,top:0,right:0,gap:0},vy=function(t){return parseInt(t||"",10)||0},uz=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],i=e[t==="padding"?"paddingTop":"marginTop"],r=e[t==="padding"?"paddingRight":"marginRight"];return[vy(n),vy(i),vy(r)]},dz=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return cz;var e=uz(t),n=document.documentElement.clientWidth,i=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,i-n+e[2]-e[0])}},fz=VR(),hz=function(t,e,n,i){var r=t.left,s=t.top,o=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(q9,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(a,"px ").concat(i,`;
  }
  body {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(i,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(i,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(vm,` {
    right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(ym,` {
    margin-right: `).concat(a,"px ").concat(i,`;
  }
  
  .`).concat(vm," .").concat(vm,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(ym," .").concat(ym,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body {
    `).concat(Y9,": ").concat(a,`px;
  }
`)},pz=function(t){var e=t.noRelative,n=t.noImportant,i=t.gapMode,r=i===void 0?"margin":i,s=g.useMemo(function(){return dz(r)},[r]);return g.createElement(fz,{styles:hz(s,!e,r,n?"":"!important")})},s1=!1;if(typeof window<"u")try{var gp=Object.defineProperty({},"passive",{get:function(){return s1=!0,!0}});window.addEventListener("test",gp,gp),window.removeEventListener("test",gp,gp)}catch{s1=!1}var ec=s1?{passive:!1}:!1,mz=function(t){return t.tagName==="TEXTAREA"},HR=function(t,e){var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!mz(t)&&n[e]==="visible")},gz=function(t){return HR(t,"overflowY")},vz=function(t){return HR(t,"overflowX")},A2=function(t,e){var n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var i=WR(t,n);if(i){var r=GR(t,n),s=r[1],o=r[2];if(s>o)return!0}n=n.parentNode}while(n&&n!==document.body);return!1},yz=function(t){var e=t.scrollTop,n=t.scrollHeight,i=t.clientHeight;return[e,n,i]},wz=function(t){var e=t.scrollLeft,n=t.scrollWidth,i=t.clientWidth;return[e,n,i]},WR=function(t,e){return t==="v"?gz(e):vz(e)},GR=function(t,e){return t==="v"?yz(e):wz(e)},bz=function(t,e){return t==="h"&&e==="rtl"?-1:1},xz=function(t,e,n,i,r){var s=bz(t,window.getComputedStyle(e).direction),o=s*i,a=n.target,l=e.contains(a),c=!1,u=o>0,d=0,f=0;do{var h=GR(t,a),p=h[0],m=h[1],w=h[2],v=m-w-s*p;(p||v)&&WR(t,a)&&(d+=v,f+=p),a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(u&&(r&&d===0||!r&&o>d)||!u&&(r&&f===0||!r&&-o>f))&&(c=!0),c},vp=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},P2=function(t){return[t.deltaX,t.deltaY]},$2=function(t){return t&&"current"in t?t.current:t},Sz=function(t,e){return t[0]===e[0]&&t[1]===e[1]},kz=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},_z=0,tc=[];function Cz(t){var e=g.useRef([]),n=g.useRef([0,0]),i=g.useRef(),r=g.useState(_z++)[0],s=g.useState(function(){return VR()})[0],o=g.useRef(t);g.useEffect(function(){o.current=t},[t]),g.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(r));var m=MB([t.lockRef.current],(t.shards||[]).map($2),!0).filter(Boolean);return m.forEach(function(w){return w.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),m.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(r))})}}},[t.inert,t.lockRef.current,t.shards]);var a=g.useCallback(function(m,w){if("touches"in m&&m.touches.length===2)return!o.current.allowPinchZoom;var v=vp(m),y=n.current,x="deltaX"in m?m.deltaX:y[0]-v[0],k="deltaY"in m?m.deltaY:y[1]-v[1],_,P=m.target,A=Math.abs(x)>Math.abs(k)?"h":"v";if("touches"in m&&A==="h"&&P.type==="range")return!1;var C=A2(A,P);if(!C)return!0;if(C?_=A:(_=A==="v"?"h":"v",C=A2(A,P)),!C)return!1;if(!i.current&&"changedTouches"in m&&(x||k)&&(i.current=_),!_)return!0;var N=i.current||_;return xz(N,w,m,N==="h"?x:k,!0)},[]),l=g.useCallback(function(m){var w=m;if(!(!tc.length||tc[tc.length-1]!==s)){var v="deltaY"in w?P2(w):vp(w),y=e.current.filter(function(_){return _.name===w.type&&_.target===w.target&&Sz(_.delta,v)})[0];if(y&&y.should){w.cancelable&&w.preventDefault();return}if(!y){var x=(o.current.shards||[]).map($2).filter(Boolean).filter(function(_){return _.contains(w.target)}),k=x.length>0?a(w,x[0]):!o.current.noIsolation;k&&w.cancelable&&w.preventDefault()}}},[]),c=g.useCallback(function(m,w,v,y){var x={name:m,delta:w,target:v,should:y};e.current.push(x),setTimeout(function(){e.current=e.current.filter(function(k){return k!==x})},1)},[]),u=g.useCallback(function(m){n.current=vp(m),i.current=void 0},[]),d=g.useCallback(function(m){c(m.type,P2(m),m.target,a(m,t.lockRef.current))},[]),f=g.useCallback(function(m){c(m.type,vp(m),m.target,a(m,t.lockRef.current))},[]);g.useEffect(function(){return tc.push(s),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,ec),document.addEventListener("touchmove",l,ec),document.addEventListener("touchstart",u,ec),function(){tc=tc.filter(function(m){return m!==s}),document.removeEventListener("wheel",l,ec),document.removeEventListener("touchmove",l,ec),document.removeEventListener("touchstart",u,ec)}},[]);var h=t.removeScrollBar,p=t.inert;return g.createElement(g.Fragment,null,p?g.createElement(s,{styles:kz(r)}):null,h?g.createElement(pz,{gapMode:"margin"}):null)}const Ez=nz(UR,Cz);var KR=g.forwardRef(function(t,e){return g.createElement(Ov,ys({},t,{ref:e,sideCar:Ez}))});KR.classNames=Ov.classNames;const AS=KR,o1=["Enter"," "],Az=["ArrowDown","PageUp","Home"],XR=["ArrowUp","PageDown","End"],Pz=[...Az,...XR],$z={ltr:[...o1,"ArrowRight"],rtl:[...o1,"ArrowLeft"]},Tz={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Nv="Menu",[$f,Oz,Nz]=ch(Nv),[Vl,qR]=es(Nv,[Nz,Ru,xv]),PS=Ru(),YR=xv(),[Rz,Hl]=Vl(Nv),[Mz,yh]=Vl(Nv),Dz=t=>{const{__scopeMenu:e,open:n=!1,children:i,dir:r,onOpenChange:s,modal:o=!0}=t,a=PS(e),[l,c]=g.useState(null),u=g.useRef(!1),d=ti(s),f=uh(r);return g.useEffect(()=>{const h=()=>{u.current=!0,document.addEventListener("pointerdown",p,{capture:!0,once:!0}),document.addEventListener("pointermove",p,{capture:!0,once:!0})},p=()=>u.current=!1;return document.addEventListener("keydown",h,{capture:!0}),()=>{document.removeEventListener("keydown",h,{capture:!0}),document.removeEventListener("pointerdown",p,{capture:!0}),document.removeEventListener("pointermove",p,{capture:!0})}},[]),g.createElement(kS,a,g.createElement(Rz,{scope:e,open:n,onOpenChange:d,content:l,onContentChange:c},g.createElement(Mz,{scope:e,onClose:g.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:f,modal:o},i)))},JR=g.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t,r=PS(n);return g.createElement(_S,be({},r,i,{ref:e}))}),ZR="MenuPortal",[Iz,QR]=Vl(ZR,{forceMount:void 0}),Lz=t=>{const{__scopeMenu:e,forceMount:n,children:i,container:r}=t,s=Hl(ZR,e);return g.createElement(Iz,{scope:e,forceMount:n},g.createElement(xo,{present:n||s.open},g.createElement(Tv,{asChild:!0,container:r},i)))},Wr="MenuContent",[Bz,$S]=Vl(Wr),jz=g.forwardRef((t,e)=>{const n=QR(Wr,t.__scopeMenu),{forceMount:i=n.forceMount,...r}=t,s=Hl(Wr,t.__scopeMenu),o=yh(Wr,t.__scopeMenu);return g.createElement($f.Provider,{scope:t.__scopeMenu},g.createElement(xo,{present:i||s.open},g.createElement($f.Slot,{scope:t.__scopeMenu},o.modal?g.createElement(Fz,be({},r,{ref:e})):g.createElement(zz,be({},r,{ref:e})))))}),Fz=g.forwardRef((t,e)=>{const n=Hl(Wr,t.__scopeMenu),i=g.useRef(null),r=st(e,i);return g.useEffect(()=>{const s=i.current;if(s)return ES(s)},[]),g.createElement(TS,be({},t,{ref:r,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:ve(t.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)}))}),zz=g.forwardRef((t,e)=>{const n=Hl(Wr,t.__scopeMenu);return g.createElement(TS,be({},t,{ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)}))}),TS=g.forwardRef((t,e)=>{const{__scopeMenu:n,loop:i=!1,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:h,disableOutsideScroll:p,...m}=t,w=Hl(Wr,n),v=yh(Wr,n),y=PS(n),x=YR(n),k=Oz(n),[_,P]=g.useState(null),A=g.useRef(null),C=st(e,A,w.onContentChange),N=g.useRef(0),R=g.useRef(""),M=g.useRef(0),L=g.useRef(null),H=g.useRef("right"),T=g.useRef(0),V=p?AS:g.Fragment,Y=p?{as:$l,allowPinchZoom:!0}:void 0,ne=j=>{var Q,K;const ee=R.current+j,le=k().filter(D=>!D.disabled),B=document.activeElement,I=(Q=le.find(D=>D.ref.current===B))===null||Q===void 0?void 0:Q.textValue,z=le.map(D=>D.textValue),S=iU(z,ee,I),$=(K=le.find(D=>D.textValue===S))===null||K===void 0?void 0:K.ref.current;(function D(O){R.current=O,window.clearTimeout(N.current),O!==""&&(N.current=window.setTimeout(()=>D(""),1e3))})(ee),$&&setTimeout(()=>$.focus())};g.useEffect(()=>()=>window.clearTimeout(N.current),[]),pS();const W=g.useCallback(j=>{var Q,K;return H.current===((Q=L.current)===null||Q===void 0?void 0:Q.side)&&sU(j,(K=L.current)===null||K===void 0?void 0:K.area)},[]);return g.createElement(Bz,{scope:n,searchRef:R,onItemEnter:g.useCallback(j=>{W(j)&&j.preventDefault()},[W]),onItemLeave:g.useCallback(j=>{var Q;W(j)||((Q=A.current)===null||Q===void 0||Q.focus(),P(null))},[W]),onTriggerLeave:g.useCallback(j=>{W(j)&&j.preventDefault()},[W]),pointerGraceTimerRef:M,onPointerGraceIntentChange:g.useCallback(j=>{L.current=j},[])},g.createElement(V,Y,g.createElement(mS,{asChild:!0,trapped:r,onMountAutoFocus:ve(s,j=>{var Q;j.preventDefault(),(Q=A.current)===null||Q===void 0||Q.focus()}),onUnmountAutoFocus:o},g.createElement(Av,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,onDismiss:h},g.createElement(kO,be({asChild:!0},x,{dir:v.dir,orientation:"vertical",loop:i,currentTabStopId:_,onCurrentTabStopIdChange:P,onEntryFocus:ve(l,j=>{v.isUsingKeyboardRef.current||j.preventDefault()})}),g.createElement(CS,be({role:"menu","aria-orientation":"vertical","data-state":rM(w.open),"data-radix-menu-content":"",dir:v.dir},y,m,{ref:C,style:{outline:"none",...m.style},onKeyDown:ve(m.onKeyDown,j=>{const K=j.target.closest("[data-radix-menu-content]")===j.currentTarget,ee=j.ctrlKey||j.altKey||j.metaKey,le=j.key.length===1;K&&(j.key==="Tab"&&j.preventDefault(),!ee&&le&&ne(j.key));const B=A.current;if(j.target!==B||!Pz.includes(j.key))return;j.preventDefault();const z=k().filter(S=>!S.disabled).map(S=>S.ref.current);XR.includes(j.key)&&z.reverse(),tU(z)}),onBlur:ve(t.onBlur,j=>{j.currentTarget.contains(j.target)||(window.clearTimeout(N.current),R.current="")}),onPointerMove:ve(t.onPointerMove,Tf(j=>{const Q=j.target,K=T.current!==j.clientX;if(j.currentTarget.contains(Q)&&K){const ee=j.clientX>T.current?"right":"left";H.current=ee,T.current=j.clientX}}))})))))))}),Uz=g.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return g.createElement(Ge.div,be({},i,{ref:e}))}),a1="MenuItem",T2="menu.itemSelect",OS=g.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:i,...r}=t,s=g.useRef(null),o=yh(a1,t.__scopeMenu),a=$S(a1,t.__scopeMenu),l=st(e,s),c=g.useRef(!1),u=()=>{const d=s.current;if(!n&&d){const f=new CustomEvent(T2,{bubbles:!0,cancelable:!0});d.addEventListener(T2,h=>i==null?void 0:i(h),{once:!0}),Yx(d,f),f.defaultPrevented?c.current=!1:o.onClose()}};return g.createElement(eM,be({},r,{ref:l,disabled:n,onClick:ve(t.onClick,u),onPointerDown:d=>{var f;(f=t.onPointerDown)===null||f===void 0||f.call(t,d),c.current=!0},onPointerUp:ve(t.onPointerUp,d=>{var f;c.current||(f=d.currentTarget)===null||f===void 0||f.click()}),onKeyDown:ve(t.onKeyDown,d=>{const f=a.searchRef.current!=="";n||f&&d.key===" "||o1.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})}))}),eM=g.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:i=!1,textValue:r,...s}=t,o=$S(a1,n),a=YR(n),l=g.useRef(null),c=st(e,l),[u,d]=g.useState(!1),[f,h]=g.useState("");return g.useEffect(()=>{const p=l.current;if(p){var m;h(((m=p.textContent)!==null&&m!==void 0?m:"").trim())}},[s.children]),g.createElement($f.ItemSlot,{scope:n,disabled:i,textValue:r??f},g.createElement(_O,be({asChild:!0},a,{focusable:!i}),g.createElement(Ge.div,be({role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":i||void 0,"data-disabled":i?"":void 0},s,{ref:c,onPointerMove:ve(t.onPointerMove,Tf(p=>{i?o.onItemLeave(p):(o.onItemEnter(p),p.defaultPrevented||p.currentTarget.focus())})),onPointerLeave:ve(t.onPointerLeave,Tf(p=>o.onItemLeave(p))),onFocus:ve(t.onFocus,()=>d(!0)),onBlur:ve(t.onBlur,()=>d(!1))}))))}),Vz=g.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:i,...r}=t;return g.createElement(nM,{scope:t.__scopeMenu,checked:n},g.createElement(OS,be({role:"menuitemcheckbox","aria-checked":yg(n)?"mixed":n},r,{ref:e,"data-state":NS(n),onSelect:ve(r.onSelect,()=>i==null?void 0:i(yg(n)?!0:!n),{checkForDefaultPrevented:!1})})))}),Hz="MenuRadioGroup",[bne,Wz]=Vl(Hz,{value:void 0,onValueChange:()=>{}}),Gz="MenuRadioItem",Kz=g.forwardRef((t,e)=>{const{value:n,...i}=t,r=Wz(Gz,t.__scopeMenu),s=n===r.value;return g.createElement(nM,{scope:t.__scopeMenu,checked:s},g.createElement(OS,be({role:"menuitemradio","aria-checked":s},i,{ref:e,"data-state":NS(s),onSelect:ve(i.onSelect,()=>{var o;return(o=r.onValueChange)===null||o===void 0?void 0:o.call(r,n)},{checkForDefaultPrevented:!1})})))}),tM="MenuItemIndicator",[nM,Xz]=Vl(tM,{checked:!1}),qz=g.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:i,...r}=t,s=Xz(tM,n);return g.createElement(xo,{present:i||yg(s.checked)||s.checked===!0},g.createElement(Ge.span,be({},r,{ref:e,"data-state":NS(s.checked)})))}),Yz=g.forwardRef((t,e)=>{const{__scopeMenu:n,...i}=t;return g.createElement(Ge.div,be({role:"separator","aria-orientation":"horizontal"},i,{ref:e}))}),Jz="MenuSub",[xne,iM]=Vl(Jz),yp="MenuSubTrigger",Zz=g.forwardRef((t,e)=>{const n=Hl(yp,t.__scopeMenu),i=yh(yp,t.__scopeMenu),r=iM(yp,t.__scopeMenu),s=$S(yp,t.__scopeMenu),o=g.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=s,c={__scopeMenu:t.__scopeMenu},u=g.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return g.useEffect(()=>u,[u]),g.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),l(null)}},[a,l]),g.createElement(JR,be({asChild:!0},c),g.createElement(eM,be({id:r.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":r.contentId,"data-state":rM(n.open)},t,{ref:bv(e,r.onTriggerChange),onClick:d=>{var f;(f=t.onClick)===null||f===void 0||f.call(t,d),!(t.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:ve(t.onPointerMove,Tf(d=>{s.onItemEnter(d),!d.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(s.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:ve(t.onPointerLeave,Tf(d=>{var f;u();const h=(f=n.content)===null||f===void 0?void 0:f.getBoundingClientRect();if(h){var p;const m=(p=n.content)===null||p===void 0?void 0:p.dataset.side,w=m==="right",v=w?-5:5,y=h[w?"left":"right"],x=h[w?"right":"left"];s.onPointerGraceIntentChange({area:[{x:d.clientX+v,y:d.clientY},{x:y,y:h.top},{x,y:h.top},{x,y:h.bottom},{x:y,y:h.bottom}],side:m}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(d),d.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:ve(t.onKeyDown,d=>{const f=s.searchRef.current!=="";if(!(t.disabled||f&&d.key===" ")&&$z[i.dir].includes(d.key)){var h;n.onOpenChange(!0),(h=n.content)===null||h===void 0||h.focus(),d.preventDefault()}})})))}),Qz="MenuSubContent",eU=g.forwardRef((t,e)=>{const n=QR(Wr,t.__scopeMenu),{forceMount:i=n.forceMount,...r}=t,s=Hl(Wr,t.__scopeMenu),o=yh(Wr,t.__scopeMenu),a=iM(Qz,t.__scopeMenu),l=g.useRef(null),c=st(e,l);return g.createElement($f.Provider,{scope:t.__scopeMenu},g.createElement(xo,{present:i||s.open},g.createElement($f.Slot,{scope:t.__scopeMenu},g.createElement(TS,be({id:a.contentId,"aria-labelledby":a.triggerId},r,{ref:c,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var d;o.isUsingKeyboardRef.current&&((d=l.current)===null||d===void 0||d.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:ve(t.onFocusOutside,u=>{u.target!==a.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:ve(t.onEscapeKeyDown,u=>{o.onClose(),u.preventDefault()}),onKeyDown:ve(t.onKeyDown,u=>{const d=u.currentTarget.contains(u.target),f=Tz[o.dir].includes(u.key);if(d&&f){var h;s.onOpenChange(!1),(h=a.trigger)===null||h===void 0||h.focus(),u.preventDefault()}})})))))});function rM(t){return t?"open":"closed"}function yg(t){return t==="indeterminate"}function NS(t){return yg(t)?"indeterminate":t?"checked":"unchecked"}function tU(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function nU(t,e){return t.map((n,i)=>t[(e+i)%t.length])}function iU(t,e,n){const r=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=nU(t,Math.max(s,0));r.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.toLowerCase().startsWith(r.toLowerCase()));return l!==n?l:void 0}function rU(t,e){const{x:n,y:i}=t;let r=!1;for(let s=0,o=e.length-1;s<e.length;o=s++){const a=e[s].x,l=e[s].y,c=e[o].x,u=e[o].y;l>i!=u>i&&n<(c-a)*(i-l)/(u-l)+a&&(r=!r)}return r}function sU(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return rU(n,e)}function Tf(t){return e=>e.pointerType==="mouse"?t(e):void 0}const oU=Dz,aU=JR,lU=Lz,cU=jz,uU=Uz,dU=OS,fU=Vz,hU=Kz,pU=qz,mU=Yz,gU=Zz,vU=eU,sM="DropdownMenu",[yU,Sne]=es(sM,[qR]),Er=qR(),[wU,oM]=yU(sM),bU=t=>{const{__scopeDropdownMenu:e,children:n,dir:i,open:r,defaultOpen:s,onOpenChange:o,modal:a=!0}=t,l=Er(e),c=g.useRef(null),[u=!1,d]=uo({prop:r,defaultProp:s,onChange:o});return g.createElement(wU,{scope:e,triggerId:Tl(),triggerRef:c,contentId:Tl(),open:u,onOpenChange:d,onOpenToggle:g.useCallback(()=>d(f=>!f),[d]),modal:a},g.createElement(oU,be({},l,{open:u,onOpenChange:d,dir:i,modal:a}),n))},xU="DropdownMenuTrigger",SU=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:i=!1,...r}=t,s=oM(xU,n),o=Er(n);return g.createElement(aU,be({asChild:!0},o),g.createElement(Ge.button,be({type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":i?"":void 0,disabled:i},r,{ref:bv(e,s.triggerRef),onPointerDown:ve(t.onPointerDown,a=>{!i&&a.button===0&&a.ctrlKey===!1&&(s.onOpenToggle(),s.open||a.preventDefault())}),onKeyDown:ve(t.onKeyDown,a=>{i||(["Enter"," "].includes(a.key)&&s.onOpenToggle(),a.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})))}),kU=t=>{const{__scopeDropdownMenu:e,...n}=t,i=Er(e);return g.createElement(lU,be({},i,n))},_U="DropdownMenuContent",CU=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=oM(_U,n),s=Er(n),o=g.useRef(!1);return g.createElement(cU,be({id:r.contentId,"aria-labelledby":r.triggerId},s,i,{ref:e,onCloseAutoFocus:ve(t.onCloseAutoFocus,a=>{var l;o.current||(l=r.triggerRef.current)===null||l===void 0||l.focus(),o.current=!1,a.preventDefault()}),onInteractOutside:ve(t.onInteractOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!r.modal||u)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))}),EU=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Er(n);return g.createElement(uU,be({},r,i,{ref:e}))}),AU=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Er(n);return g.createElement(dU,be({},r,i,{ref:e}))}),PU=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Er(n);return g.createElement(fU,be({},r,i,{ref:e}))}),$U=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Er(n);return g.createElement(hU,be({},r,i,{ref:e}))}),TU=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Er(n);return g.createElement(pU,be({},r,i,{ref:e}))}),OU=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Er(n);return g.createElement(mU,be({},r,i,{ref:e}))}),NU=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Er(n);return g.createElement(gU,be({},r,i,{ref:e}))}),RU=g.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...i}=t,r=Er(n);return g.createElement(vU,be({},r,i,{ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))}),MU=bU,DU=SU,IU=kU,aM=CU,lM=EU,cM=AU,uM=PU,dM=$U,fM=TU,hM=OU,pM=NU,mM=RU,gM=MU,vM=DU,LU=g.forwardRef(({className:t,inset:e,children:n,...i},r)=>b.jsxs(pM,{ref:r,className:He("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-mantis-500 data-[state=open]:bg-mantis-500",e&&"pl-8",t),...i,children:[n,b.jsx("span",{className:"icon-[lucide--chevron-right] ml-auto block h-4 w-4"})]}));LU.displayName=pM.displayName;const BU=g.forwardRef(({className:t,...e},n)=>b.jsx(mM,{ref:n,className:He("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-stone-900 p-1 text-white shadow-lg transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...e}));BU.displayName=mM.displayName;const RS=g.forwardRef(({className:t,sideOffset:e=4,...n},i)=>b.jsx(IU,{children:b.jsx(aM,{ref:i,sideOffset:e,className:He("z-50 min-w-[8rem] overflow-hidden rounded-md border border-stone-600 bg-stone-900 p-1 text-white shadow-md transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...n})}));RS.displayName=aM.displayName;const vl=g.forwardRef(({className:t,inset:e,...n},i)=>b.jsx(cM,{ref:i,className:He("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));vl.displayName=cM.displayName;const jU=g.forwardRef(({className:t,children:e,checked:n,...i},r)=>b.jsxs(uM,{ref:r,className:He("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...i,children:[b.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:b.jsx(fM,{children:b.jsx("span",{className:"icon-[lucide--check] h-4 w-4"})})}),e]}));jU.displayName=uM.displayName;const FU=g.forwardRef(({className:t,children:e,...n},i)=>b.jsxs(dM,{ref:i,className:He("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-mantis-500 focus:text-white data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[b.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:b.jsx(fM,{children:b.jsx("span",{className:"icon-[lucide--circle-dot] block h-4 w-4"})})}),e]}));FU.displayName=dM.displayName;const zU=g.forwardRef(({className:t,inset:e,...n},i)=>b.jsx(lM,{ref:i,className:He("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));zU.displayName=lM.displayName;const UU=g.forwardRef(({className:t,...e},n)=>b.jsx(hM,{ref:n,className:He("-mx-1 my-1 h-px bg-stone-600",t),...e}));UU.displayName=hM.displayName;function yM(t,e){const n=e.split(".");let i=t;for(const r of n)if(r in i)i=i[r];else throw new ReferenceError(`Couldn't find path "${e}".`);return i}const wM=["en","es"];function MS(t){return function(n,i,...r){const s=yM(t[n],i);if(typeof s=="function")return s(...r);if(typeof s=="string")return s;throw new Error(`Missing translation for key ${i}`)}}const q=Qx();function VU(t){return b.jsx(hB,{store:q,children:t.children})}var ot;(function(t){t.assertEqual=r=>r;function e(r){}t.assertIs=e;function n(r){throw new Error}t.assertNever=n,t.arrayToEnum=r=>{const s={};for(const o of r)s[o]=o;return s},t.getValidEnumValues=r=>{const s=t.objectKeys(r).filter(a=>typeof r[r[a]]!="number"),o={};for(const a of s)o[a]=r[a];return t.objectValues(o)},t.objectValues=r=>t.objectKeys(r).map(function(s){return r[s]}),t.objectKeys=typeof Object.keys=="function"?r=>Object.keys(r):r=>{const s=[];for(const o in r)Object.prototype.hasOwnProperty.call(r,o)&&s.push(o);return s},t.find=(r,s)=>{for(const o of r)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?r=>Number.isInteger(r):r=>typeof r=="number"&&isFinite(r)&&Math.floor(r)===r;function i(r,s=" | "){return r.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=i,t.jsonStringifyReplacer=(r,s)=>typeof s=="bigint"?s.toString():s})(ot||(ot={}));var l1;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(l1||(l1={}));const ye=ot.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Ho=t=>{switch(typeof t){case"undefined":return ye.undefined;case"string":return ye.string;case"number":return isNaN(t)?ye.nan:ye.number;case"boolean":return ye.boolean;case"function":return ye.function;case"bigint":return ye.bigint;case"symbol":return ye.symbol;case"object":return Array.isArray(t)?ye.array:t===null?ye.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ye.promise:typeof Map<"u"&&t instanceof Map?ye.map:typeof Set<"u"&&t instanceof Set?ye.set:typeof Date<"u"&&t instanceof Date?ye.date:ye.object;default:return ye.unknown}},ue=ot.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),HU=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Gr extends Error{constructor(e){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(s){return s.message},i={_errors:[]},r=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(r);else if(o.code==="invalid_return_type")r(o.returnTypeError);else if(o.code==="invalid_arguments")r(o.argumentsError);else if(o.path.length===0)i._errors.push(n(o));else{let a=i,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(n(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return r(this),i}toString(){return this.message}get message(){return JSON.stringify(this.issues,ot.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},i=[];for(const r of this.issues)r.path.length>0?(n[r.path[0]]=n[r.path[0]]||[],n[r.path[0]].push(e(r))):i.push(e(r));return{formErrors:i,fieldErrors:n}}get formErrors(){return this.flatten()}}Gr.create=t=>new Gr(t);const Of=(t,e)=>{let n;switch(t.code){case ue.invalid_type:t.received===ye.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case ue.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,ot.jsonStringifyReplacer)}`;break;case ue.unrecognized_keys:n=`Unrecognized key(s) in object: ${ot.joinValues(t.keys,", ")}`;break;case ue.invalid_union:n="Invalid input";break;case ue.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${ot.joinValues(t.options)}`;break;case ue.invalid_enum_value:n=`Invalid enum value. Expected ${ot.joinValues(t.options)}, received '${t.received}'`;break;case ue.invalid_arguments:n="Invalid function arguments";break;case ue.invalid_return_type:n="Invalid function return type";break;case ue.invalid_date:n="Invalid date";break;case ue.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:ot.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case ue.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case ue.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case ue.custom:n="Invalid input";break;case ue.invalid_intersection_types:n="Intersection results could not be merged";break;case ue.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case ue.not_finite:n="Number must be finite";break;default:n=e.defaultError,ot.assertNever(t)}return{message:n}};let bM=Of;function WU(t){bM=t}function wg(){return bM}const bg=t=>{const{data:e,path:n,errorMaps:i,issueData:r}=t,s=[...n,...r.path||[]],o={...r,path:s};let a="";const l=i.filter(c=>!!c).slice().reverse();for(const c of l)a=c(o,{data:e,defaultError:a}).message;return{...r,path:s,message:r.message||a}},GU=[];function Se(t,e){const n=bg({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,wg(),Of].filter(i=>!!i)});t.common.issues.push(n)}class Wn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const i=[];for(const r of n){if(r.status==="aborted")return Be;r.status==="dirty"&&e.dirty(),i.push(r.value)}return{status:e.value,value:i}}static async mergeObjectAsync(e,n){const i=[];for(const r of n)i.push({key:await r.key,value:await r.value});return Wn.mergeObjectSync(e,i)}static mergeObjectSync(e,n){const i={};for(const r of n){const{key:s,value:o}=r;if(s.status==="aborted"||o.status==="aborted")return Be;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||r.alwaysSet)&&(i[s.value]=o.value)}return{status:e.value,value:i}}}const Be=Object.freeze({status:"aborted"}),xM=t=>({status:"dirty",value:t}),ni=t=>({status:"valid",value:t}),c1=t=>t.status==="aborted",u1=t=>t.status==="dirty",Nf=t=>t.status==="valid",xg=t=>typeof Promise<"u"&&t instanceof Promise;var Oe;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Oe||(Oe={}));class Ts{constructor(e,n,i,r){this._cachedPath=[],this.parent=e,this.data=n,this._path=i,this._key=r}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const O2=(t,e)=>{if(Nf(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Gr(t.common.issues);return this._error=n,this._error}}};function Fe(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:i,description:r}=t;if(e&&(n||i))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:r}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:i??a.defaultError}:{message:n??a.defaultError},description:r}}class We{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Ho(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Ho(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Wn,ctx:{common:e.parent.common,data:e.data,parsedType:Ho(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(xg(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const i=this.safeParse(e,n);if(i.success)return i.data;throw i.error}safeParse(e,n){var i;const r={common:{issues:[],async:(i=n==null?void 0:n.async)!==null&&i!==void 0?i:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ho(e)},s=this._parseSync({data:e,path:r.path,parent:r});return O2(r,s)}async parseAsync(e,n){const i=await this.safeParseAsync(e,n);if(i.success)return i.data;throw i.error}async safeParseAsync(e,n){const i={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Ho(e)},r=this._parse({data:e,path:i.path,parent:i}),s=await(xg(r)?r:Promise.resolve(r));return O2(i,s)}refine(e,n){const i=r=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(r):n;return this._refinement((r,s)=>{const o=e(r),a=()=>s.addIssue({code:ue.custom,...i(r)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((i,r)=>e(i)?!0:(r.addIssue(typeof n=="function"?n(i,r):n),!1))}_refinement(e){return new Jr({schema:this,typeName:De.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return ro.create(this,this._def)}nullable(){return Bl.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Kr.create(this,this._def)}promise(){return mu.create(this,this._def)}or(e){return If.create([this,e],this._def)}and(e){return Lf.create(this,e,this._def)}transform(e){return new Jr({...Fe(this._def),schema:this,typeName:De.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Uf({...Fe(this._def),innerType:this,defaultValue:n,typeName:De.ZodDefault})}brand(){return new kM({typeName:De.ZodBranded,type:this,...Fe(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Cg({...Fe(this._def),innerType:this,catchValue:n,typeName:De.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return wh.create(this,e)}readonly(){return Ag.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const KU=/^c[^\s-]{8,}$/i,XU=/^[a-z][a-z0-9]*$/,qU=/^[0-9A-HJKMNP-TV-Z]{26}$/,YU=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,JU=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,ZU="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let yy;const QU=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,eV=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,tV=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function nV(t,e){return!!((e==="v4"||!e)&&QU.test(t)||(e==="v6"||!e)&&eV.test(t))}class Br extends We{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ye.string){const s=this._getOrReturnCtx(e);return Se(s,{code:ue.invalid_type,expected:ye.string,received:s.parsedType}),Be}const i=new Wn;let r;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(r=this._getOrReturnCtx(e,r),Se(r,{code:ue.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="max")e.data.length>s.value&&(r=this._getOrReturnCtx(e,r),Se(r,{code:ue.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(r=this._getOrReturnCtx(e,r),o?Se(r,{code:ue.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&Se(r,{code:ue.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),i.dirty())}else if(s.kind==="email")JU.test(e.data)||(r=this._getOrReturnCtx(e,r),Se(r,{validation:"email",code:ue.invalid_string,message:s.message}),i.dirty());else if(s.kind==="emoji")yy||(yy=new RegExp(ZU,"u")),yy.test(e.data)||(r=this._getOrReturnCtx(e,r),Se(r,{validation:"emoji",code:ue.invalid_string,message:s.message}),i.dirty());else if(s.kind==="uuid")YU.test(e.data)||(r=this._getOrReturnCtx(e,r),Se(r,{validation:"uuid",code:ue.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid")KU.test(e.data)||(r=this._getOrReturnCtx(e,r),Se(r,{validation:"cuid",code:ue.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid2")XU.test(e.data)||(r=this._getOrReturnCtx(e,r),Se(r,{validation:"cuid2",code:ue.invalid_string,message:s.message}),i.dirty());else if(s.kind==="ulid")qU.test(e.data)||(r=this._getOrReturnCtx(e,r),Se(r,{validation:"ulid",code:ue.invalid_string,message:s.message}),i.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),Se(r,{validation:"url",code:ue.invalid_string,message:s.message}),i.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),Se(r,{validation:"regex",code:ue.invalid_string,message:s.message}),i.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(r=this._getOrReturnCtx(e,r),Se(r,{code:ue.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),i.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(r=this._getOrReturnCtx(e,r),Se(r,{code:ue.invalid_string,validation:{startsWith:s.value},message:s.message}),i.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(r=this._getOrReturnCtx(e,r),Se(r,{code:ue.invalid_string,validation:{endsWith:s.value},message:s.message}),i.dirty()):s.kind==="datetime"?tV(s).test(e.data)||(r=this._getOrReturnCtx(e,r),Se(r,{code:ue.invalid_string,validation:"datetime",message:s.message}),i.dirty()):s.kind==="ip"?nV(e.data,s.version)||(r=this._getOrReturnCtx(e,r),Se(r,{validation:"ip",code:ue.invalid_string,message:s.message}),i.dirty()):ot.assertNever(s);return{status:i.value,value:e.data}}_regex(e,n,i){return this.refinement(r=>e.test(r),{validation:n,code:ue.invalid_string,...Oe.errToObj(i)})}_addCheck(e){return new Br({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Oe.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Oe.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Oe.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Oe.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Oe.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Oe.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Oe.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Oe.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...Oe.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Oe.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Oe.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Oe.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Oe.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Oe.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Oe.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Oe.errToObj(n)})}nonempty(e){return this.min(1,Oe.errToObj(e))}trim(){return new Br({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Br({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Br({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Br.create=t=>{var e;return new Br({checks:[],typeName:De.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Fe(t)})};function iV(t,e){const n=(t.toString().split(".")[1]||"").length,i=(e.toString().split(".")[1]||"").length,r=n>i?n:i,s=parseInt(t.toFixed(r).replace(".","")),o=parseInt(e.toFixed(r).replace(".",""));return s%o/Math.pow(10,r)}class Pa extends We{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ye.number){const s=this._getOrReturnCtx(e);return Se(s,{code:ue.invalid_type,expected:ye.number,received:s.parsedType}),Be}let i;const r=new Wn;for(const s of this._def.checks)s.kind==="int"?ot.isInteger(e.data)||(i=this._getOrReturnCtx(e,i),Se(i,{code:ue.invalid_type,expected:"integer",received:"float",message:s.message}),r.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(i=this._getOrReturnCtx(e,i),Se(i,{code:ue.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(i=this._getOrReturnCtx(e,i),Se(i,{code:ue.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="multipleOf"?iV(e.data,s.value)!==0&&(i=this._getOrReturnCtx(e,i),Se(i,{code:ue.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(i=this._getOrReturnCtx(e,i),Se(i,{code:ue.not_finite,message:s.message}),r.dirty()):ot.assertNever(s);return{status:r.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Oe.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Oe.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Oe.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Oe.toString(n))}setLimit(e,n,i,r){return new Pa({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:Oe.toString(r)}]})}_addCheck(e){return new Pa({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Oe.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Oe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Oe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Oe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Oe.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Oe.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Oe.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Oe.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Oe.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ot.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const i of this._def.checks){if(i.kind==="finite"||i.kind==="int"||i.kind==="multipleOf")return!0;i.kind==="min"?(n===null||i.value>n)&&(n=i.value):i.kind==="max"&&(e===null||i.value<e)&&(e=i.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Pa.create=t=>new Pa({checks:[],typeName:De.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...Fe(t)});class $a extends We{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==ye.bigint){const s=this._getOrReturnCtx(e);return Se(s,{code:ue.invalid_type,expected:ye.bigint,received:s.parsedType}),Be}let i;const r=new Wn;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(i=this._getOrReturnCtx(e,i),Se(i,{code:ue.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(i=this._getOrReturnCtx(e,i),Se(i,{code:ue.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(i=this._getOrReturnCtx(e,i),Se(i,{code:ue.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):ot.assertNever(s);return{status:r.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Oe.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Oe.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Oe.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Oe.toString(n))}setLimit(e,n,i,r){return new $a({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:Oe.toString(r)}]})}_addCheck(e){return new $a({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Oe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Oe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Oe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Oe.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Oe.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}$a.create=t=>{var e;return new $a({checks:[],typeName:De.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...Fe(t)})};class Rf extends We{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ye.boolean){const i=this._getOrReturnCtx(e);return Se(i,{code:ue.invalid_type,expected:ye.boolean,received:i.parsedType}),Be}return ni(e.data)}}Rf.create=t=>new Rf({typeName:De.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...Fe(t)});class Il extends We{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ye.date){const s=this._getOrReturnCtx(e);return Se(s,{code:ue.invalid_type,expected:ye.date,received:s.parsedType}),Be}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return Se(s,{code:ue.invalid_date}),Be}const i=new Wn;let r;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(r=this._getOrReturnCtx(e,r),Se(r,{code:ue.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),i.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(r=this._getOrReturnCtx(e,r),Se(r,{code:ue.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),i.dirty()):ot.assertNever(s);return{status:i.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Il({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Oe.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Oe.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Il.create=t=>new Il({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:De.ZodDate,...Fe(t)});class Sg extends We{_parse(e){if(this._getType(e)!==ye.symbol){const i=this._getOrReturnCtx(e);return Se(i,{code:ue.invalid_type,expected:ye.symbol,received:i.parsedType}),Be}return ni(e.data)}}Sg.create=t=>new Sg({typeName:De.ZodSymbol,...Fe(t)});class Mf extends We{_parse(e){if(this._getType(e)!==ye.undefined){const i=this._getOrReturnCtx(e);return Se(i,{code:ue.invalid_type,expected:ye.undefined,received:i.parsedType}),Be}return ni(e.data)}}Mf.create=t=>new Mf({typeName:De.ZodUndefined,...Fe(t)});class Df extends We{_parse(e){if(this._getType(e)!==ye.null){const i=this._getOrReturnCtx(e);return Se(i,{code:ue.invalid_type,expected:ye.null,received:i.parsedType}),Be}return ni(e.data)}}Df.create=t=>new Df({typeName:De.ZodNull,...Fe(t)});class pu extends We{constructor(){super(...arguments),this._any=!0}_parse(e){return ni(e.data)}}pu.create=t=>new pu({typeName:De.ZodAny,...Fe(t)});class yl extends We{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ni(e.data)}}yl.create=t=>new yl({typeName:De.ZodUnknown,...Fe(t)});class yo extends We{_parse(e){const n=this._getOrReturnCtx(e);return Se(n,{code:ue.invalid_type,expected:ye.never,received:n.parsedType}),Be}}yo.create=t=>new yo({typeName:De.ZodNever,...Fe(t)});class kg extends We{_parse(e){if(this._getType(e)!==ye.undefined){const i=this._getOrReturnCtx(e);return Se(i,{code:ue.invalid_type,expected:ye.void,received:i.parsedType}),Be}return ni(e.data)}}kg.create=t=>new kg({typeName:De.ZodVoid,...Fe(t)});class Kr extends We{_parse(e){const{ctx:n,status:i}=this._processInputParams(e),r=this._def;if(n.parsedType!==ye.array)return Se(n,{code:ue.invalid_type,expected:ye.array,received:n.parsedType}),Be;if(r.exactLength!==null){const o=n.data.length>r.exactLength.value,a=n.data.length<r.exactLength.value;(o||a)&&(Se(n,{code:o?ue.too_big:ue.too_small,minimum:a?r.exactLength.value:void 0,maximum:o?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),i.dirty())}if(r.minLength!==null&&n.data.length<r.minLength.value&&(Se(n,{code:ue.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),i.dirty()),r.maxLength!==null&&n.data.length>r.maxLength.value&&(Se(n,{code:ue.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),i.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>r.type._parseAsync(new Ts(n,o,n.path,a)))).then(o=>Wn.mergeArray(i,o));const s=[...n.data].map((o,a)=>r.type._parseSync(new Ts(n,o,n.path,a)));return Wn.mergeArray(i,s)}get element(){return this._def.type}min(e,n){return new Kr({...this._def,minLength:{value:e,message:Oe.toString(n)}})}max(e,n){return new Kr({...this._def,maxLength:{value:e,message:Oe.toString(n)}})}length(e,n){return new Kr({...this._def,exactLength:{value:e,message:Oe.toString(n)}})}nonempty(e){return this.min(1,e)}}Kr.create=(t,e)=>new Kr({type:t,minLength:null,maxLength:null,exactLength:null,typeName:De.ZodArray,...Fe(e)});function oc(t){if(t instanceof It){const e={};for(const n in t.shape){const i=t.shape[n];e[n]=ro.create(oc(i))}return new It({...t._def,shape:()=>e})}else return t instanceof Kr?new Kr({...t._def,type:oc(t.element)}):t instanceof ro?ro.create(oc(t.unwrap())):t instanceof Bl?Bl.create(oc(t.unwrap())):t instanceof Os?Os.create(t.items.map(e=>oc(e))):t}class It extends We{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=ot.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==ye.object){const c=this._getOrReturnCtx(e);return Se(c,{code:ue.invalid_type,expected:ye.object,received:c.parsedType}),Be}const{status:i,ctx:r}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof yo&&this._def.unknownKeys==="strip"))for(const c in r.data)o.includes(c)||a.push(c);const l=[];for(const c of o){const u=s[c],d=r.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new Ts(r,d,r.path,c)),alwaysSet:c in r.data})}if(this._def.catchall instanceof yo){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of a)l.push({key:{status:"valid",value:u},value:{status:"valid",value:r.data[u]}});else if(c==="strict")a.length>0&&(Se(r,{code:ue.unrecognized_keys,keys:a}),i.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of a){const d=r.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new Ts(r,d,r.path,u)),alwaysSet:u in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const d=await u.key;c.push({key:d,value:await u.value,alwaysSet:u.alwaysSet})}return c}).then(c=>Wn.mergeObjectSync(i,c)):Wn.mergeObjectSync(i,l)}get shape(){return this._def.shape()}strict(e){return Oe.errToObj,new It({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,i)=>{var r,s,o,a;const l=(o=(s=(r=this._def).errorMap)===null||s===void 0?void 0:s.call(r,n,i).message)!==null&&o!==void 0?o:i.defaultError;return n.code==="unrecognized_keys"?{message:(a=Oe.errToObj(e).message)!==null&&a!==void 0?a:l}:{message:l}}}:{}})}strip(){return new It({...this._def,unknownKeys:"strip"})}passthrough(){return new It({...this._def,unknownKeys:"passthrough"})}extend(e){return new It({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new It({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:De.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new It({...this._def,catchall:e})}pick(e){const n={};return ot.objectKeys(e).forEach(i=>{e[i]&&this.shape[i]&&(n[i]=this.shape[i])}),new It({...this._def,shape:()=>n})}omit(e){const n={};return ot.objectKeys(this.shape).forEach(i=>{e[i]||(n[i]=this.shape[i])}),new It({...this._def,shape:()=>n})}deepPartial(){return oc(this)}partial(e){const n={};return ot.objectKeys(this.shape).forEach(i=>{const r=this.shape[i];e&&!e[i]?n[i]=r:n[i]=r.optional()}),new It({...this._def,shape:()=>n})}required(e){const n={};return ot.objectKeys(this.shape).forEach(i=>{if(e&&!e[i])n[i]=this.shape[i];else{let s=this.shape[i];for(;s instanceof ro;)s=s._def.innerType;n[i]=s}}),new It({...this._def,shape:()=>n})}keyof(){return SM(ot.objectKeys(this.shape))}}It.create=(t,e)=>new It({shape:()=>t,unknownKeys:"strip",catchall:yo.create(),typeName:De.ZodObject,...Fe(e)});It.strictCreate=(t,e)=>new It({shape:()=>t,unknownKeys:"strict",catchall:yo.create(),typeName:De.ZodObject,...Fe(e)});It.lazycreate=(t,e)=>new It({shape:t,unknownKeys:"strip",catchall:yo.create(),typeName:De.ZodObject,...Fe(e)});class If extends We{_parse(e){const{ctx:n}=this._processInputParams(e),i=this._def.options;function r(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new Gr(a.ctx.common.issues));return Se(n,{code:ue.invalid_union,unionErrors:o}),Be}if(n.common.async)return Promise.all(i.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(r);{let s;const o=[];for(const l of i){const c={...n,common:{...n.common,issues:[]},parent:null},u=l._parseSync({data:n.data,path:n.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!s&&(s={result:u,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(l=>new Gr(l));return Se(n,{code:ue.invalid_union,unionErrors:a}),Be}}get options(){return this._def.options}}If.create=(t,e)=>new If({options:t,typeName:De.ZodUnion,...Fe(e)});const wm=t=>t instanceof jf?wm(t.schema):t instanceof Jr?wm(t.innerType()):t instanceof Ff?[t.value]:t instanceof Ta?t.options:t instanceof zf?Object.keys(t.enum):t instanceof Uf?wm(t._def.innerType):t instanceof Mf?[void 0]:t instanceof Df?[null]:null;class Rv extends We{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ye.object)return Se(n,{code:ue.invalid_type,expected:ye.object,received:n.parsedType}),Be;const i=this.discriminator,r=n.data[i],s=this.optionsMap.get(r);return s?n.common.async?s._parseAsync({data:n.data,path:n.path,parent:n}):s._parseSync({data:n.data,path:n.path,parent:n}):(Se(n,{code:ue.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[i]}),Be)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,i){const r=new Map;for(const s of n){const o=wm(s.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(r.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);r.set(a,s)}}return new Rv({typeName:De.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:r,...Fe(i)})}}function d1(t,e){const n=Ho(t),i=Ho(e);if(t===e)return{valid:!0,data:t};if(n===ye.object&&i===ye.object){const r=ot.objectKeys(e),s=ot.objectKeys(t).filter(a=>r.indexOf(a)!==-1),o={...t,...e};for(const a of s){const l=d1(t[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(n===ye.array&&i===ye.array){if(t.length!==e.length)return{valid:!1};const r=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],l=d1(o,a);if(!l.valid)return{valid:!1};r.push(l.data)}return{valid:!0,data:r}}else return n===ye.date&&i===ye.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Lf extends We{_parse(e){const{status:n,ctx:i}=this._processInputParams(e),r=(s,o)=>{if(c1(s)||c1(o))return Be;const a=d1(s.value,o.value);return a.valid?((u1(s)||u1(o))&&n.dirty(),{status:n.value,value:a.data}):(Se(i,{code:ue.invalid_intersection_types}),Be)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([s,o])=>r(s,o)):r(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}Lf.create=(t,e,n)=>new Lf({left:t,right:e,typeName:De.ZodIntersection,...Fe(n)});class Os extends We{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==ye.array)return Se(i,{code:ue.invalid_type,expected:ye.array,received:i.parsedType}),Be;if(i.data.length<this._def.items.length)return Se(i,{code:ue.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Be;!this._def.rest&&i.data.length>this._def.items.length&&(Se(i,{code:ue.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...i.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new Ts(i,o,i.path,a)):null}).filter(o=>!!o);return i.common.async?Promise.all(s).then(o=>Wn.mergeArray(n,o)):Wn.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new Os({...this._def,rest:e})}}Os.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Os({items:t,typeName:De.ZodTuple,rest:null,...Fe(e)})};class Bf extends We{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==ye.object)return Se(i,{code:ue.invalid_type,expected:ye.object,received:i.parsedType}),Be;const r=[],s=this._def.keyType,o=this._def.valueType;for(const a in i.data)r.push({key:s._parse(new Ts(i,a,i.path,a)),value:o._parse(new Ts(i,i.data[a],i.path,a))});return i.common.async?Wn.mergeObjectAsync(n,r):Wn.mergeObjectSync(n,r)}get element(){return this._def.valueType}static create(e,n,i){return n instanceof We?new Bf({keyType:e,valueType:n,typeName:De.ZodRecord,...Fe(i)}):new Bf({keyType:Br.create(),valueType:e,typeName:De.ZodRecord,...Fe(n)})}}class _g extends We{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==ye.map)return Se(i,{code:ue.invalid_type,expected:ye.map,received:i.parsedType}),Be;const r=this._def.keyType,s=this._def.valueType,o=[...i.data.entries()].map(([a,l],c)=>({key:r._parse(new Ts(i,a,i.path,[c,"key"])),value:s._parse(new Ts(i,l,i.path,[c,"value"]))}));if(i.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return Be;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of o){const c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return Be;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}}}}_g.create=(t,e,n)=>new _g({valueType:e,keyType:t,typeName:De.ZodMap,...Fe(n)});class Ll extends We{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==ye.set)return Se(i,{code:ue.invalid_type,expected:ye.set,received:i.parsedType}),Be;const r=this._def;r.minSize!==null&&i.data.size<r.minSize.value&&(Se(i,{code:ue.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),n.dirty()),r.maxSize!==null&&i.data.size>r.maxSize.value&&(Se(i,{code:ue.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),n.dirty());const s=this._def.valueType;function o(l){const c=new Set;for(const u of l){if(u.status==="aborted")return Be;u.status==="dirty"&&n.dirty(),c.add(u.value)}return{status:n.value,value:c}}const a=[...i.data.values()].map((l,c)=>s._parse(new Ts(i,l,i.path,c)));return i.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,n){return new Ll({...this._def,minSize:{value:e,message:Oe.toString(n)}})}max(e,n){return new Ll({...this._def,maxSize:{value:e,message:Oe.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Ll.create=(t,e)=>new Ll({valueType:t,minSize:null,maxSize:null,typeName:De.ZodSet,...Fe(e)});class Vc extends We{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ye.function)return Se(n,{code:ue.invalid_type,expected:ye.function,received:n.parsedType}),Be;function i(a,l){return bg({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,wg(),Of].filter(c=>!!c),issueData:{code:ue.invalid_arguments,argumentsError:l}})}function r(a,l){return bg({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,wg(),Of].filter(c=>!!c),issueData:{code:ue.invalid_return_type,returnTypeError:l}})}const s={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof mu){const a=this;return ni(async function(...l){const c=new Gr([]),u=await a._def.args.parseAsync(l,s).catch(h=>{throw c.addIssue(i(l,h)),c}),d=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(d,s).catch(h=>{throw c.addIssue(r(d,h)),c})})}else{const a=this;return ni(function(...l){const c=a._def.args.safeParse(l,s);if(!c.success)throw new Gr([i(l,c.error)]);const u=Reflect.apply(o,this,c.data),d=a._def.returns.safeParse(u,s);if(!d.success)throw new Gr([r(u,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Vc({...this._def,args:Os.create(e).rest(yl.create())})}returns(e){return new Vc({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,i){return new Vc({args:e||Os.create([]).rest(yl.create()),returns:n||yl.create(),typeName:De.ZodFunction,...Fe(i)})}}class jf extends We{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}jf.create=(t,e)=>new jf({getter:t,typeName:De.ZodLazy,...Fe(e)});class Ff extends We{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Se(n,{received:n.data,code:ue.invalid_literal,expected:this._def.value}),Be}return{status:"valid",value:e.data}}get value(){return this._def.value}}Ff.create=(t,e)=>new Ff({value:t,typeName:De.ZodLiteral,...Fe(e)});function SM(t,e){return new Ta({values:t,typeName:De.ZodEnum,...Fe(e)})}class Ta extends We{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),i=this._def.values;return Se(n,{expected:ot.joinValues(i),received:n.parsedType,code:ue.invalid_type}),Be}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),i=this._def.values;return Se(n,{received:n.data,code:ue.invalid_enum_value,options:i}),Be}return ni(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return Ta.create(e)}exclude(e){return Ta.create(this.options.filter(n=>!e.includes(n)))}}Ta.create=SM;class zf extends We{_parse(e){const n=ot.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(e);if(i.parsedType!==ye.string&&i.parsedType!==ye.number){const r=ot.objectValues(n);return Se(i,{expected:ot.joinValues(r),received:i.parsedType,code:ue.invalid_type}),Be}if(n.indexOf(e.data)===-1){const r=ot.objectValues(n);return Se(i,{received:i.data,code:ue.invalid_enum_value,options:r}),Be}return ni(e.data)}get enum(){return this._def.values}}zf.create=(t,e)=>new zf({values:t,typeName:De.ZodNativeEnum,...Fe(e)});class mu extends We{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ye.promise&&n.common.async===!1)return Se(n,{code:ue.invalid_type,expected:ye.promise,received:n.parsedType}),Be;const i=n.parsedType===ye.promise?n.data:Promise.resolve(n.data);return ni(i.then(r=>this._def.type.parseAsync(r,{path:n.path,errorMap:n.common.contextualErrorMap})))}}mu.create=(t,e)=>new mu({type:t,typeName:De.ZodPromise,...Fe(e)});class Jr extends We{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===De.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:i}=this._processInputParams(e),r=this._def.effect||null,s={addIssue:o=>{Se(i,o),o.fatal?n.abort():n.dirty()},get path(){return i.path}};if(s.addIssue=s.addIssue.bind(s),r.type==="preprocess"){const o=r.transform(i.data,s);return i.common.issues.length?{status:"dirty",value:i.data}:i.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:i.path,parent:i})):this._def.schema._parseSync({data:o,path:i.path,parent:i})}if(r.type==="refinement"){const o=a=>{const l=r.refinement(a,s);if(i.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(i.common.async===!1){const a=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return a.status==="aborted"?Be:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(a=>a.status==="aborted"?Be:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(r.type==="transform")if(i.common.async===!1){const o=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!Nf(o))return o;const a=r.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(o=>Nf(o)?Promise.resolve(r.transform(o.value,s)).then(a=>({status:n.value,value:a})):o);ot.assertNever(r)}}Jr.create=(t,e,n)=>new Jr({schema:t,typeName:De.ZodEffects,effect:e,...Fe(n)});Jr.createWithPreprocess=(t,e,n)=>new Jr({schema:e,effect:{type:"preprocess",transform:t},typeName:De.ZodEffects,...Fe(n)});class ro extends We{_parse(e){return this._getType(e)===ye.undefined?ni(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ro.create=(t,e)=>new ro({innerType:t,typeName:De.ZodOptional,...Fe(e)});class Bl extends We{_parse(e){return this._getType(e)===ye.null?ni(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Bl.create=(t,e)=>new Bl({innerType:t,typeName:De.ZodNullable,...Fe(e)});class Uf extends We{_parse(e){const{ctx:n}=this._processInputParams(e);let i=n.data;return n.parsedType===ye.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Uf.create=(t,e)=>new Uf({innerType:t,typeName:De.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Fe(e)});class Cg extends We{_parse(e){const{ctx:n}=this._processInputParams(e),i={...n,common:{...n.common,issues:[]}},r=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return xg(r)?r.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Gr(i.common.issues)},input:i.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new Gr(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}Cg.create=(t,e)=>new Cg({innerType:t,typeName:De.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Fe(e)});class Eg extends We{_parse(e){if(this._getType(e)!==ye.nan){const i=this._getOrReturnCtx(e);return Se(i,{code:ue.invalid_type,expected:ye.nan,received:i.parsedType}),Be}return{status:"valid",value:e.data}}}Eg.create=t=>new Eg({typeName:De.ZodNaN,...Fe(t)});const rV=Symbol("zod_brand");class kM extends We{_parse(e){const{ctx:n}=this._processInputParams(e),i=n.data;return this._def.type._parse({data:i,path:n.path,parent:n})}unwrap(){return this._def.type}}class wh extends We{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return s.status==="aborted"?Be:s.status==="dirty"?(n.dirty(),xM(s.value)):this._def.out._parseAsync({data:s.value,path:i.path,parent:i})})();{const r=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return r.status==="aborted"?Be:r.status==="dirty"?(n.dirty(),{status:"dirty",value:r.value}):this._def.out._parseSync({data:r.value,path:i.path,parent:i})}}static create(e,n){return new wh({in:e,out:n,typeName:De.ZodPipeline})}}class Ag extends We{_parse(e){const n=this._def.innerType._parse(e);return Nf(n)&&(n.value=Object.freeze(n.value)),n}}Ag.create=(t,e)=>new Ag({innerType:t,typeName:De.ZodReadonly,...Fe(e)});const _M=(t,e={},n)=>t?pu.create().superRefine((i,r)=>{var s,o;if(!t(i)){const a=typeof e=="function"?e(i):typeof e=="string"?{message:e}:e,l=(o=(s=a.fatal)!==null&&s!==void 0?s:n)!==null&&o!==void 0?o:!0,c=typeof a=="string"?{message:a}:a;r.addIssue({code:"custom",...c,fatal:l})}}):pu.create(),sV={object:It.lazycreate};var De;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(De||(De={}));const oV=(t,e={message:`Input not instance of ${t.name}`})=>_M(n=>n instanceof t,e),CM=Br.create,EM=Pa.create,aV=Eg.create,lV=$a.create,AM=Rf.create,cV=Il.create,uV=Sg.create,dV=Mf.create,fV=Df.create,hV=pu.create,pV=yl.create,mV=yo.create,gV=kg.create,vV=Kr.create,yV=It.create,wV=It.strictCreate,bV=If.create,xV=Rv.create,SV=Lf.create,kV=Os.create,_V=Bf.create,CV=_g.create,EV=Ll.create,AV=Vc.create,PV=jf.create,$V=Ff.create,TV=Ta.create,OV=zf.create,NV=mu.create,N2=Jr.create,RV=ro.create,MV=Bl.create,DV=Jr.createWithPreprocess,IV=wh.create,LV=()=>CM().optional(),BV=()=>EM().optional(),jV=()=>AM().optional(),FV={string:t=>Br.create({...t,coerce:!0}),number:t=>Pa.create({...t,coerce:!0}),boolean:t=>Rf.create({...t,coerce:!0}),bigint:t=>$a.create({...t,coerce:!0}),date:t=>Il.create({...t,coerce:!0})},zV=Be;var Ai=Object.freeze({__proto__:null,defaultErrorMap:Of,setErrorMap:WU,getErrorMap:wg,makeIssue:bg,EMPTY_PATH:GU,addIssueToContext:Se,ParseStatus:Wn,INVALID:Be,DIRTY:xM,OK:ni,isAborted:c1,isDirty:u1,isValid:Nf,isAsync:xg,get util(){return ot},get objectUtil(){return l1},ZodParsedType:ye,getParsedType:Ho,ZodType:We,ZodString:Br,ZodNumber:Pa,ZodBigInt:$a,ZodBoolean:Rf,ZodDate:Il,ZodSymbol:Sg,ZodUndefined:Mf,ZodNull:Df,ZodAny:pu,ZodUnknown:yl,ZodNever:yo,ZodVoid:kg,ZodArray:Kr,ZodObject:It,ZodUnion:If,ZodDiscriminatedUnion:Rv,ZodIntersection:Lf,ZodTuple:Os,ZodRecord:Bf,ZodMap:_g,ZodSet:Ll,ZodFunction:Vc,ZodLazy:jf,ZodLiteral:Ff,ZodEnum:Ta,ZodNativeEnum:zf,ZodPromise:mu,ZodEffects:Jr,ZodTransformer:Jr,ZodOptional:ro,ZodNullable:Bl,ZodDefault:Uf,ZodCatch:Cg,ZodNaN:Eg,BRAND:rV,ZodBranded:kM,ZodPipeline:wh,ZodReadonly:Ag,custom:_M,Schema:We,ZodSchema:We,late:sV,get ZodFirstPartyTypeKind(){return De},coerce:FV,any:hV,array:vV,bigint:lV,boolean:AM,date:cV,discriminatedUnion:xV,effect:N2,enum:TV,function:AV,instanceof:oV,intersection:SV,lazy:PV,literal:$V,map:CV,nan:aV,nativeEnum:OV,never:mV,null:fV,nullable:MV,number:EM,object:yV,oboolean:jV,onumber:BV,optional:RV,ostring:LV,pipeline:IV,preprocess:DV,promise:NV,record:_V,set:EV,strictObject:wV,string:CM,symbol:uV,transformer:N2,tuple:kV,undefined:dV,union:bV,unknown:pV,void:gV,NEVER:zV,ZodIssueCode:ue,quotelessJson:HU,ZodError:Gr});const PM=["randomize","clean","unchanged"],$M=["no-devices","keyboard-and-screen","pio-switches-and-leds","pio-printer","handshake"],f1=Ai.object({language:Ai.enum(wM).catch(UV),editorFontSize:Ai.number().int().min(8).max(64).catch(14),dataOnLoad:Ai.enum(PM).catch("clean"),devices:Ai.enum($M).catch("no-devices"),animations:Ai.boolean().catch(!0),executionUnit:Ai.number().min(1).max(500).catch(150),clockSpeed:Ai.number().min(100).max(3e3).catch(1e3),printerSpeed:Ai.number().min(500).max(2e4).catch(5e3),filterBightness:Ai.number().min(0).catch(1),filterContrast:Ai.number().min(0).catch(1),filterInvert:Ai.boolean().catch(!1),filterSaturation:Ai.number().min(0).catch(1)}),ac=f1.parse({});function UV(){const t=navigator.language.toLowerCase();for(const e of wM)if(t.startsWith(e))return e;return"en"}const Ba=SR("vonsim-settings",ac,{getItem(t,e){try{const n=localStorage.getItem(t);return f1.parse(JSON.parse(n??""))}catch{return e}},setItem(t,e){localStorage.setItem(t,JSON.stringify(e))},removeItem(t){localStorage.removeItem(t)},subscribe(t,e,n){const i=r=>{if(r.storageArea===localStorage&&r.key===t){let s;try{s=f1.parse(JSON.parse(r.newValue??""))}catch{s=n}e(s)}};return window==null||window.addEventListener("storage",i),()=>window==null?void 0:window.removeEventListener("storage",i)}},{getOnInit:!0}),bi=()=>q.get(Ba),TM=()=>Tu(Ba),VV=Ce(t=>t(Ba).language),DS=()=>Vt(VV),HV=Ce(t=>t(Ba).editorFontSize),WV=()=>Vt(HV);Ce(t=>t(Ba).dataOnLoad);const GV=Ce(t=>t(Ba).devices),KV=()=>Vt(GV);Ce(t=>{const e=t(Ba);return{executionUnit:e.executionUnit,clock:e.clockSpeed,printer:e.printerSpeed}});const XV=Ce(t=>{const e=t(Ba);return[`brightness(${e.filterBightness})`,`contrast(${e.filterContrast})`,`invert(${e.filterInvert?1:0})`,`saturate(${e.filterSaturation})`].filter(Boolean).join(" ")}),qV=()=>Vt(XV);function Vf(t){const e=t.charCodeAt(0);return F.fitsUnsigned(e,8)?e:null}function IS(t){return F.fitsUnsigned(t,8)?String.fromCharCode(t):null}function OM(t){return YV.at(t)??null}const YV=["NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","HT","LF","VT","FF","CR","SO","SI","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US","SPACE","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","<","=",">","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","\\","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","DEL","XXX","XXX","BPH","NBH","IND","NEL","SSA","ESA","HTS","HTJ","VTS","PLD","PLU","RI","SS2","SS3","DCS","PU1","PU2","STS","CCH","MW","SPA","EPA","SOS","XXX","SCI","CSI","ST","OSC","PM","APC","NBSP","","","","","","","","","","","","","SHY","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""];var Nt,Dt;const Ze=class Ze{constructor(e,n){$e(this,Nt,void 0);$e(this,Dt,void 0);Z(this,Nt,e|0),Z(this,Dt,n)}get size(){return E(this,Dt)}is8bits(){return E(this,Dt)===8}is16bits(){return E(this,Dt)===16}get unsigned(){return E(this,Nt)}get signed(){return E(this,Nt)<=Ze.maxSignedValue(E(this,Dt))?E(this,Nt):E(this,Nt)-(Ze.maxValue(E(this,Dt))+1)}get low(){return this.is8bits()?this:Ze.fromUnsigned(E(this,Nt)&Ze.maxValue(8),8)}get high(){return this.is8bits()?new Ze(0,8):Ze.fromUnsigned(E(this,Nt)>>8&Ze.maxValue(8),8)}withLow(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return Ze.fromUnsigned(E(this,Nt)&~Ze.maxValue(8)|e.unsigned,E(this,Dt))}withHigh(e){if(e.is16bits())throw new TypeError("Byte must be 8 bits");return Ze.fromUnsigned(E(this,Nt)&Ze.maxValue(8)|e.unsigned<<8,16)}bit(e){if(!Number.isSafeInteger(e)||e<0||e>=E(this,Dt))throw new RangeError(`Index ${e} out of bounds for byte of size ${E(this,Dt)}`);return(E(this,Nt)&1<<e)!==0}withBit(e,n){if(!Number.isSafeInteger(e)||e<0||e>=E(this,Dt))throw new RangeError(`Index ${e} out of bounds for byte of size ${E(this,Dt)}`);return n?Ze.fromUnsigned(E(this,Nt)|1<<e,E(this,Dt)):Ze.fromUnsigned(E(this,Nt)&~(1<<e),E(this,Dt))}add(e){return e=Number(e),Ze.fromUnsigned(E(this,Nt)+e,E(this,Dt))}isZero(){return this.unsigned===0}equals(e){return typeof e=="number"?e<0?this.signed===e:this.unsigned===e:E(this,Nt)===E(e,Nt)}toUint8Array(){return this.is8bits()?new Uint8Array([this.unsigned]):new Uint8Array([this.low.unsigned,this.high.unsigned])}toArray(){const e=new Array(E(this,Dt));for(let n=0;n<E(this,Dt);n++)e[n]=this.bit(n);return e}toString(e="int"){switch(e){case"hex":return E(this,Nt).toString(16).padStart(E(this,Dt)/4,"0").toUpperCase();case"bin":return E(this,Nt).toString(2).padStart(E(this,Dt),"0");case"int":return this.signed.toString(10);case"uint":return this.unsigned.toString(10);case"ascii":return E(this,Dt)===8?IS(E(this,Nt))??"---":this.low.toString("ascii")+this.high.toString("ascii");case"safe-ascii":return E(this,Dt)===8?OM(E(this,Nt))??"---":this.low.toString("safe-ascii")+" "+this.high.toString("safe-ascii")}}toJSON(){return E(this,Nt)}valueOf(){return E(this,Nt)}static minValue(){return 0}static maxValue(e){return 2**e-1}static minSignedValue(e){return-(2**(e-1))}static maxSignedValue(e){return 2**(e-1)-1}static fits(e,n){return Number.isSafeInteger(e)&&e>=Ze.minSignedValue(n)&&e<=Ze.maxValue(n)}static fitsUnsigned(e,n){return Number.isSafeInteger(e)&&e>=Ze.minValue()&&e<=Ze.maxValue(n)}static fitsSigned(e,n){return Number.isSafeInteger(e)&&e>=Ze.minSignedValue(n)&&e<=Ze.maxSignedValue(n)}static fromUnsigned(e,n){if(!Ze.fitsUnsigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return new Ze(e,n)}static fromSigned(e,n){if(!Ze.fitsSigned(e,n))throw new RangeError(`Value ${e} does not fit in a ${n}-bit byte.`);return e<0?new Ze(e+Ze.maxValue(n)+1,n):new Ze(e,n)}static fromNumber(e,n){return e<0?Ze.fromSigned(e,n):Ze.fromUnsigned(e,n)}static fromChar(e){const n=Vf(e)??-1;return Ze.fromUnsigned(n,8)}static random(e){const n=Math.round(Math.random()*Ze.maxValue(e));return new Ze(n,e)}static zero(e){return new Ze(0,e)}};Nt=new WeakMap,Dt=new WeakMap;let F=Ze;var zs;const Bo=class Bo{constructor(e){$e(this,zs,void 0);Z(this,zs,e)}get value(){return E(this,zs).unsigned}get byte(){return E(this,zs)}toString(e=!1){let n=E(this,zs).toString("hex");return e&&(n+="h"),n.slice(-2)}toJSON(){return E(this,zs).toJSON()}valueOf(){return E(this,zs).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=Bo.MIN_ADDRESS&&e<=Bo.MAX_ADDRESS}static from(e){if(e=Number(e),!Bo.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=F.fromUnsigned(e,16);return new Bo(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"????";let i=e.toString(16).padStart(4,"0").toUpperCase();return n&&(i+="h"),i.slice(-3)}};zs=new WeakMap,ae(Bo,"MIN_ADDRESS",0),ae(Bo,"MAX_ADDRESS",255);let we=Bo;var Us;const jo=class jo{constructor(e){$e(this,Us,void 0);Z(this,Us,e)}get value(){return E(this,Us).unsigned}get byte(){return E(this,Us)}toString(e=!0){let n=E(this,Us).toString("hex");return e&&(n+="h"),n}toJSON(){return E(this,Us).toJSON()}valueOf(){return E(this,Us).valueOf()}static inRange(e){return e=Number(e),Number.isSafeInteger(e)&&e>=jo.MIN_ADDRESS&&e<=jo.MAX_ADDRESS}static from(e){if(e=Number(e),!jo.inRange(e))throw new RangeError(`Address ${e} is out of range.`);const n=F.fromUnsigned(e,8);return new jo(n)}static format(e,n=!0){if(e=Number(e),!Number.isSafeInteger(e)||e<0)return"??";let i=e.toString(16).padStart(2,"0").toUpperCase();return n&&(i+="h"),i}};Us=new WeakMap,ae(jo,"MIN_ADDRESS",0),ae(jo,"MAX_ADDRESS",127);let qi=jo;function R2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function M2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?R2(Object(n),!0).forEach(function(i){JV(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R2(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function JV(t,e,n){return e=ZV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ZV(t){var e=QV(t,"string");return typeof e=="symbol"?e:String(e)}function QV(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const Pg=NM({});function NM(t){return e.withOptions=n=>NM(M2(M2({},t),n)),e;function e(n,...i){const r=typeof n=="string"?[n]:n.raw,{escapeSpecialCharacters:s=Array.isArray(n)}=t;let o="";for(let c=0;c<r.length;c++){let u=r[c];s&&(u=u.replace(/\\\n[ \t]*/g,"").replace(/\\`/g,"`").replace(/\\\$/g,"$").replace(/\\{/g,"{")),o+=u,c<i.length&&(o+=i[c])}const a=o.split(`
`);let l=null;for(const c of a){const u=c.match(/^(\s+)\S+/);if(u){const d=u[1].length;l?l=Math.min(l,d):l=d}}if(l!==null){const c=l;o=a.map(u=>u[0]===" "||u[0]==="	"?u.slice(c):u).join(`
`)}return o.trim().replace(/\\n/g,`
`)}}const eH=we.from(we.MAX_ADDRESS).toString(),tH={generics:{clean:"Clean","io-register":(t,e)=>`${t} register (${qi.format(e)})`,"byte-representation":{hex:"Hexadecimal",bin:"Binary",uint:"Unsigned integer",int:"Signed integer","safe-ascii":"ASCII"}},update:{"update-available":"There's a new version available!",reload:"Update"},messages:{"assemble-error":"Assemble error. Fix the errors and try again.","invalid-action":"Invalid action."},editor:{lintSummary:t=>t===0?"Ready to compile":t===1?"There's an error":`There're ${t} errors`,files:{unsupported:"Your browser doesn't support the FileSystem API","no-file":"No file open",open:"Open file",unsaved:"There are unsaved changes, do you want to discard them?","open-error":"Error opening file",save:"Save file","save-as":"Save file as","save-error":"Error saving file"},example:Pg`
      ; Welcome to VonSim!
      ; This is an example program that calculates the first
      ; n numbers of the Fibonacci sequence, and stores them
      ; starting at memory position 1000h.
      
           n  equ 10    ; Calculate the first 10 numbers
      
              org 10h
      start   db 1
      
              org 20h
              mov bx, offset start + 1
              mov al, 0
              mov ah, start
      
      loop:   cmp bx, offset start + n
              jns finish
              mov cl, ah
              add cl, al
              mov al, ah
              mov ah, cl
              mov [bx], cl
              inc bx
              jmp loop
      finish: hlt
              end
    `},control:{action:{start:"Start",continue:"Continue",running:"Running...",run:{"cycle-change":"One cycle","end-of-instruction":"One instruction",infinity:"Until stop"},stop:"Stop"},tabs:{editor:"Editor",computer:"Computer"},zoom:{in:"Zoom in",out:"Zoom out"}},computer:{cpu:{name:"CPU",register:t=>`${t} register`,"control-unit":"Control unit",decoder:"Decoder",status:{fetching:"Fetching instruction...","fetching-operands":"Fetching operands...",executing:"Executing...",writeback:"Saving results...",interrupt:"Handling interrupt...",stopped:"Stopped","stopped-error":"Error","waiting-for-input":"Waiting for input...",int6:"Running INT 6...",int7:"Running INT 7..."}},memory:{name:"Memory",cell:t=>`Cell ${we.format(t)}`,"fix-address":"Fix address","unfix-address":"Unfix address","address-must-be-integer":"Start address must be an hexadecimal integer.","address-out-of-range":`Start address must be less or equal to ${eH}.`,"address-increment":"Increment address (Page Up)","address-decrement":"Decrement address (Page Down)"},"chip-select":{name:"Chip select",mem:"mem",pic:"pic",timer:"timer",pio:"pio",handshake:"handshake"},f10:"F10 key",keyboard:"Keyboard",leds:"LEDs",printer:{name:"Printer",buffer:"Buffer"},screen:"Screen",switches:"Switches",handshake:{name:"Handshake",data:"Data",state:"State"},pic:"PIC",pio:{name:"PIO",port:t=>`Port ${t}`},timer:"Timer"},settings:{title:"Settings",language:{label:"Language"},editorFontSize:{label:"Editor font size",increase:"Increase font size",decrease:"Decrease font size"},dataOnLoad:{label:"Data on load",description:"What to do with the memory when loading a new program.",randomize:"Randomize",clean:"Empty",unchanged:"Unchanged"},devices:{label:"Devices",description:"Which preset of devices to use.","no-devices":"No devices","keyboard-and-screen":"Keyboard and screen","pio-switches-and-leds":"Switches and LEDs","pio-printer":"Printer (PIO)",handshake:"Printer (Handshake)"},animations:{label:"Animations",description:["Disabling animations, you get faster execution.","Only affects animations affected by the simulation speed (like the CPU).","Other animations (like the clock and the printer) will run at their own speed.","Be careful! Very high simulation speeds without animations can saturate the processor."].join(" ")},speeds:{executionUnit:"Simulation speed",clockSpeed:"Clock speed",printerSpeed:"Printer speed"},filters:{label:"Filters",description:"Filters applied to the page. Useful when you're using a projector.",revert:"Revert to default filters",brightness:"Brightness",contrast:"Contrast",invert:"Invert",saturation:"Saturation"},reset:"Reset settings"},footer:{documentation:"Documentation",copyright:"III-LIDI, FI, UNLP, UNER",issue:{report:"Report an issue",body:(t,e)=>Pg`
        <!-- Please describe the problem you are having in as much detail as possible. -->
        <!-- Most importantly, add the steps to reproduce the problem. -->

        <details>
          <summary>Debug info (PLEASE, DO NOT DELETE)</summary>

          **Version**: [${"117033f"}](https://github.com/vonsim/vonsim/commit/${"117033f"})

          #### Program

          \`\`\`asm
          ${e.split(`
`).map(n=>n.trim()).join(`
`)}
          \`\`\`

          #### Settings

          ${Object.entries(t).map(([n,i])=>`- **${n}**: ${i}`).join(`
          `)}
          
        </details>
      `}}},nH=we.from(we.MAX_ADDRESS).toString(),iH={generics:{clean:"Limpiar","io-register":(t,e)=>`Registro ${t} (${qi.format(e)})`,"byte-representation":{hex:"Hexadecimal",bin:"Binario",uint:"Entero sin signo",int:"Entero con signo","safe-ascii":"ASCII"}},update:{"update-available":"Hay una nueva versin disponible!",reload:"Actualizar"},messages:{"assemble-error":"Error de ensamblado. Solucione los errores y vuelva a intentar.","invalid-action":"Accin invlida."},editor:{lintSummary:t=>t===0?"Listo para compilar":t===1?"Hay un error":`Hay ${t} errores`,files:{unsupported:"Tu navegador no soporta la FileSystem API","no-file":"No hay ningn archivo abierto",open:"Abrir",unsaved:"Hay cambios sin guardar, desea descartarlos?","open-error":"Error al abrir el archivo",save:"Guardar","save-as":"Guardar como","save-error":"Error al guardar el archivo"},example:Pg`
      ; Bienvenido a VonSim 8!
      ; Este es un ejemplo de cdigo que suma dos variables z = x + y
      
      org 10h
        x  db 3
        y  db 2
        z  db 0
      org 20h
        mov al, x
        add al, y
        mov z, al
        hlt
      end
    `},control:{action:{start:"Iniciar",continue:"Continuar",running:"Ejecutando...",run:{"cycle-change":"Un ciclo","end-of-instruction":"Una instruccin",infinity:"Hasta el final"},stop:"Detener"},tabs:{editor:"Editor",computer:"Computadora"},zoom:{in:"Acercar",out:"Alejar"}},computer:{cpu:{name:"CPU",register:t=>`Registro ${t}`,"control-unit":"Unidad de control",decoder:"Decodificador",status:{fetching:"Captacin instruccin...","fetching-operands":"Leyendo operandos...",executing:"Ejecutando...",writeback:"Escribiendo resultados...",interrupt:"Manejando interrupcin...",stopped:"Detenido","stopped-error":"Error","waiting-for-input":"Esperando tecla...",int6:"Ejecutando INT 6...",int7:"Ejecutando INT 7..."}},memory:{name:"Memoria",cell:t=>`Celda ${we.format(t)}`,"fix-address":"Fijar direccin","unfix-address":"Desfijar direccin","address-must-be-integer":"El valor de inicio debe ser un nmero entero hexadecimal.","address-out-of-range":`El valor de inicio debe ser menor o igual a ${nH}.`,"address-increment":"Incrementar direccin (Page Up)","address-decrement":"Decrementar direccin (Page Down)"},"chip-select":{name:"Chip select",mem:"mem",pic:"pic",timer:"timer",pio:"pio",handshake:"handshake"},f10:"Tecla F10",keyboard:"Teclado",leds:"Leds",printer:{name:"Impresora",buffer:"Buffer"},screen:"Pantalla",switches:"Llaves",handshake:{name:"Handshake",data:"Dato",state:"Estado"},pic:"PIC",pio:{name:"PIO",port:t=>`Puerto ${t}`},timer:"Timer"},settings:{title:"Configuracin",language:{label:"Idioma"},editorFontSize:{label:"Tamao de fuente del editor",increase:"Aumentar",decrease:"Disminuir"},dataOnLoad:{label:"Memoria al cargar",description:"Qu hacer con la memoria al cargar un nuevo programa.",randomize:"Aleatoria",clean:"Vaciar",unchanged:"Reusar"},devices:{label:"Dispositivos",description:"Qu conjunto de dispositivos usar.","no-devices":"Ninguno","keyboard-and-screen":"Teclado y pantalla","pio-switches-and-leds":"Llaves y luces","pio-printer":"Impresora (PIO)",handshake:"Impresora (Handshake)"},animations:{label:"Animaciones",description:["Inhabilitando las animaciones, se obtiene ejecucin ms rpida.","Solo afecta a las animaciones afectadas por la velocidad de simulacin (como la CPU).","Otras animaciones (como el reloj y la impresora) se ejecutarn a su propia velocidad.","Cuidado! Velocidades de simulacin muy altas sin animaciones puede saturar el procesador."].join(" ")},speeds:{executionUnit:"Velocidad de simulacin",clockSpeed:"Velocidad del reloj",printerSpeed:"Velocidad de impresin"},filters:{label:"Filtros",description:"Filtros aplicados a la pgina. til cuando se usa un proyector.",revert:"Revertir a los valores por defecto",brightness:"Brillo",contrast:"Contraste",invert:"Invertir",saturation:"Saturacin"},reset:"Restablecer configuracin"},footer:{documentation:"Documentacin",copyright:"III-LIDI, FI, UNLP, UNER",issue:{report:"Reportar un error",body:(t,e)=>Pg`
        <!-- Por favor, describa el problema que est teniendo en la mayor cantidad de detalle posible. -->
        <!-- Por sobre todo, agregue los pasos para reproducir el problema. -->

        <details>
          <summary>Informacin extra (POR FAVOR, NO BORRAR)</summary>

          **Versin**: [${"117033f"}](https://github.com/ruiz-jose/VonSim8/commit/${"117033f"})

          #### Programa

          \`\`\`asm
          ${e.split(`
`).map(n=>n.trim()).join(`
`)}
          \`\`\`

          #### Configuracin

          ${Object.entries(t).map(([n,i])=>`- **${n}**: ${i}`).join(`
          `)}
          
        </details>
      `}}},Mv=MS({en:tH,es:iH});function St(){const t=DS();return g.useCallback((e,...n)=>Mv(t,e,...n),[t])}const rH=1,D2=5e3,cs=new Map,Vd=[];function sH(){let t=0;for(const e of cs.keys())e>t&&(t=e);return t+1}function oH(){let t=1/0;for(const e of cs.keys())e<t&&(t=e);return t}function ta(t,e=!0){switch(t.type){case"ADD_TOAST":{const{toastId:n,toast:i}=t,r=i.duration??D2,s=Number.isFinite(r)?setTimeout(()=>ta({type:"DISMISS_TOAST",toastId:n}),r):null;cs.set(n,{...i,timeout:s,otherProps:{open:!0,onOpenChange:o=>{o||ta({type:"DISMISS_TOAST",toastId:n})}}}),cs.size>rH&&ta({type:"DISMISS_TOAST",toastId:oH()},!1);break}case"UPDATE_TOAST":{const{toastId:n,toast:i}=t,r=cs.get(n);if(!r)return;if(typeof i.duration=="number"){r.timeout!==null&&clearTimeout(r.timeout);const s=i.duration??D2,o=Number.isFinite(s)?setTimeout(()=>ta({type:"DISMISS_TOAST",toastId:n}),s):null;cs.set(n,{...r,...i,timeout:o})}else cs.set(n,{...r,...i});break}case"DISMISS_TOAST":{const{toastId:n}=t,i=cs.get(n);if(!i)return;i.timeout!==null&&clearTimeout(i.timeout),cs.delete(n);break}default:{const n=t;throw new Error(`Unhandled action: ${n}`)}}if(e&&Vd.length>0){const n=Array.from(cs.entries()).map(([i,r])=>({...r,id:i})).sort((i,r)=>r.id-i.id);for(const i of Vd)i(n)}}function gi(t){const e=sH(),n=r=>ta({type:"UPDATE_TOAST",toastId:e,toast:{...r}}),i=()=>ta({type:"DISMISS_TOAST",toastId:e});return ta({type:"ADD_TOAST",toastId:e,toast:t}),{id:e,dismiss:i,update:n}}function aH(){const[t,e]=g.useState([]);return g.useEffect(()=>(Vd.push(e),()=>{const n=Vd.indexOf(e);n>-1&&Vd.splice(n,1)}),[]),{toastList:t,toast:gi,dismiss:n=>ta({type:"DISMISS_TOAST",toastId:n})}}const Dv=SR("vonsim-program",Mv(bi().language,"editor.example"),void 0,{getOnInit:!0}),lH=()=>Vt(Dv),cH=()=>q.get(Dv),uH=Dn.fromClass(class{constructor(t){this.view=t}update(t){t.docChanged&&q.set(Dv,this.view.state.doc.toString())}}),td="showSaveFilePicker"in window,dH=Ce(null),RM=Ce(""),fH=Ce(t=>t(RM)!==t(Dv));function hH(){const t=St(),[e,n]=Tu(dH),i=Vt(fH),r=OO(RM),s=e&&i,o=g.useCallback(async()=>{if(!td){gi({title:t("editor.files.unsupported"),variant:"error"});return}if(!(s&&!confirm(t("editor.files.unsaved"))))try{const[d]=await window.showOpenFilePicker({multiple:!1,excludeAcceptAllOption:!0,types:[{accept:{"text/plain":[".txt",".asm",".vonsim"]}}]});await d.requestPermission({mode:"readwrite"})==="granted"&&n(d);const p=await(await d.getFile()).text();r(p),window.codemirror.dispatch({changes:{from:0,to:window.codemirror.state.doc.length,insert:p}})}catch(d){console.error(d),gi({title:t("editor.files.open-error"),variant:"error"})}},[t,s,n,r]);io(d=>d.ctrlKey&&d.key==="o",d=>{d.preventDefault(),o()},void 0,[o]);const a=g.useCallback(async d=>{var h,p;if(d.stopPropagation(),d.preventDefault(),!td){gi({title:t("editor.files.unsupported"),variant:"error"});return}const f=(p=(h=d.dataTransfer)==null?void 0:h.items)==null?void 0:p[0];if(!(!f||f.kind!=="file")&&!(s&&!confirm(t("editor.files.unsaved"))))try{const m=await f.getAsFileSystemHandle();if(!m)throw new Error("File handle not found");await m.requestPermission({mode:"readwrite"})==="granted"&&n(m);const y=await(await m.getFile()).text();r(y),window.codemirror.dispatch({changes:{from:0,to:window.codemirror.state.doc.length,insert:y}})}catch(m){console.error(m),gi({title:t("editor.files.open-error"),variant:"error"})}},[n,r,t,s]);om("drop",a,window),om("dragover",d=>{d.preventDefault(),d.stopPropagation()},window);const l=g.useCallback(async()=>{if(!td){gi({title:t("editor.files.unsupported"),variant:"error"});return}if(s)try{const d=window.codemirror.state.doc.toString(),f=await e.createWritable({keepExistingData:!1});await f.write(d),await f.close(),r(d)}catch(d){console.error(d),gi({title:t("editor.files.save-error"),variant:"error"})}},[t,s,e,r]),c=g.useCallback(async()=>{const d=window.codemirror.state.doc.toString(),f=(e==null?void 0:e.name)||`vonsim-${new Date().toISOString().slice(0,10)}.asm`;if(td)try{const h=await window.showSaveFilePicker({suggestedName:f,excludeAcceptAllOption:!0,types:[{accept:{"text/plain":[".txt",".asm",".vonsim"]}}]}),p=await h.requestPermission({mode:"readwrite"});if(p!=="granted")throw new Error(`Permission denied: ${p}`);n(h);const m=await h.createWritable({keepExistingData:!1});await m.write(d),await m.close(),r(d)}catch(h){console.error(h),gi({title:t("editor.files.save-error"),variant:"error"})}else{const h=new Blob([d],{type:"text/plain"}),p=URL.createObjectURL(h),m=document.createElement("a");m.style.display="none",m.href=p,m.download=f,document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(p)}},[t,e,n,r]);io(d=>d.ctrlKey&&d.key==="s",d=>{d.preventDefault(),td&&(e?l():c())},void 0,[e,l,c]),io(d=>d.ctrlKey&&d.shiftKey&&d.key==="S",d=>{d.preventDefault(),c()},void 0,[c]);const u=g.useCallback(d=>{s&&(d.preventDefault(),d.returnValue=t("editor.files.unsaved"))},[t,s]);return om("beforeunload",u,window),b.jsxs(gM,{children:[b.jsx(vM,{asChild:!0,children:b.jsxs("button",{className:He("flex items-center transition-colors hover:text-white",e&&"text-white"),children:[e?e.name:t("editor.files.no-file"),s&&b.jsx("span",{className:"ml-1 h-2 w-2 rounded-full bg-current"})]})}),b.jsxs(RS,{className:"w-64",align:"start",children:[b.jsxs(vl,{onClick:o,children:[b.jsx("span",{className:"icon-[lucide--file-search-2] mr-2 h-4 w-4"}),t("editor.files.open"),b.jsx("div",{className:"grow"}),b.jsx("kbd",{className:"text-stone-600",children:"Ctrl+O"})]}),b.jsxs(vl,{disabled:!s,onClick:l,children:[b.jsx("span",{className:"icon-[lucide--save] mr-2 h-4 w-4"}),t("editor.files.save"),b.jsx("div",{className:"grow"}),b.jsx("kbd",{className:"text-stone-600",children:"Ctrl+S"})]}),b.jsxs(vl,{onClick:c,children:[b.jsx("span",{className:"icon-[lucide--save-all] mr-2 h-4 w-4"}),t("editor.files.save-as"),b.jsx("div",{className:"grow"}),b.jsx("kbd",{className:"text-stone-600",children:"Ctrl+Shift+S"})]})]})]})}function pH(){const t=St(),e=mH();return b.jsxs("footer",{className:"px-2 py-1 text-center text-xs tracking-wider text-stone-500",children:[b.jsx("a",{href:"/VonSim8/docs",className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:t("footer.documentation")}),b.jsx("span",{className:"px-2",children:""}),b.jsx("a",{href:"https://ruiz-jose.github.io/VonSim8/",className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:"GitHub"}),b.jsx("span",{className:"px-2",children:""}),b.jsx("a",{href:e,className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:t("footer.issue.report")}),b.jsx("span",{className:"px-2 max-sm:hidden",children:""}),b.jsx("br",{className:"sm:hidden"}),b.jsxs("a",{href:"/docs#licencia",className:"transition-colors hover:text-stone-400",target:"_blank",rel:"noopener noreferrer",children:[" Copyright 2017-",new Date().getFullYear(),"  ",t("footer.copyright")]})]})}function mH(){const t=St(),[e]=TM(),n=lH();return"https://github.com/ruiz-jose/VonSim8/issues/new?body="+encodeURIComponent(t("footer.issue.body",e,n))}function $g(t,e,n){const i=[];for(let r=0;r<t.length;r++)try{const s=e(t[r],r,t);s&&(Array.isArray(s)?s.forEach(o=>o&&i.push(n(o,r,t))):i.push(n(s,r,t)))}catch(s){i.push(n(s,r,t))}return i}class an{constructor(e,n){ae(this,"start");ae(this,"end");this.start=e|0,this.end=(n??e)|0}get range(){return[this.start,this.end]}toString(){let e=`${this.start}`;return this.end!==this.start&&(e+=`:${this.end}`),e}static merge(...e){const n=e.filter(Boolean);if(n.length===0)throw new Error("Cannot merge 0 positions");let i=n[0].start,r=n[0].end;for(const s of n)s.start<i&&(i=s.start),s.end>r&&(r=s.end);return new an(i,r)}toJSON(){return this.range}}const I2=we.from(we.MAX_ADDRESS).toString(),gH=qi.from(qi.MAX_ADDRESS).toString(),vH={"address-has-code":t=>`Memory address ${t} has instructions. It cannot be used as a data address.`,"address-out-of-range":t=>`Memory address ${we.format(t)} is out of range (max memory address: ${I2}).`,"cannot-accept-strings":t=>`${t} can't accept strings.`,"cannot-be-indirect":"This operand can't be an indirect memory address.","cannot-be-unassinged":t=>`${t} can't be unassigned.`,"cannot-be-word":"This operand can't be of 16 bits.","circular-reference":"Circular reference detected.","constant-must-have-a-label":"Constant must have a label.","constant-must-have-one-value":"Constant must have exactly one value.","destination-cannot-be-immediate":"The destination can't be an immediate value.","double-memory-access":"Can't access to a memory location twice in the same instruction.","duplicated-label":t=>`Duplicated label "${t}".`,"empty-program":"Empty program. The program must have, at least, an END statement.","end-must-be-the-last-statement":"END must be the last statement.","equ-not-found":t=>`EQU "${t}" not found.`,"expects-ax":"This operand should be AX or AL.","expects-dx":"The only valid register is DX.","expects-immediate":"This operand should be immediate.","expects-label":"This operand should be a label.","expects-no-operands":"This instruction doesn't expect any operands.","expects-one-operand":"This instruction expects one operand.","expects-two-operands":"This instruction expects two operands.","expects-word-register":"This instruction expects a 16-bits register as its operand.","instruction-out-of-range":t=>`This instruction would be placed in address ${we.format(t)}, which is outside the memory range (max memory address: ${I2}).`,"invalid-interrupt":t=>`Invalid interrupt number ${t}.`,"io-address-out-of-range":t=>`I/O address ${t} is out of range (max I/O address: ${gH}).`,"label-not-found":t=>`Label "${t}" has not been defined.`,"label-should-be-a-number":t=>`Label ${t} should point to a EQU declaration or to a instruction. Maybe you ment to write OFFSET ${t}.`,"label-should-be-an-instruction":t=>`Label ${t} should point to a instruction.`,"missing-org":"No ORG before this instruction  cannot determine its location in memory.","must-have-one-or-more-values":t=>`${t} must have at least one value.`,"occupied-address":t=>`This instruction would be placed in address ${t}, which is already occupied.`,"offset-only-with-data-directive":"OFFSET can only be use with data directives.","reserved-address":t=>`This instruction would be placed in address ${t}, which is reserved by the system.`,"size-mismatch":(t,e)=>`The source (${t}-bit) and destination (${e}-bit) must be the same size.`,"unexpected-error":t=>`Unexpected error: ${String(t)}`,"unknown-size":"Addressing an unknown memory address with an immediate operand requires specifying the type of pointer with WORD PTR or BYTE PTR before the address.","value-out-of-range":(t,e)=>`The number ${t} cannot be represented with ${e} bits.`,lexer:{"character-too-long":"Character literals can only have one character.","empty-character":"Character literals can't be empty.","invalid-binary":"Invalid binary number. It should only contain 0s and 1s.","invalid-decimal":"Invalid decimal number. It should only contain digits.","only-ascii":"Only ASCII character are supported for characters literals and strings.","unexpected-character":t=>`Unexpected character "${t}".`,"unterminated-character":"Unterminated character.","unterminated-string":"Unterminated string."},parser:{"ambiguous-unary":"Ambiguous unary expression detected. Use parentheses to disambiguate.","expected-address-after-org":"Expected address after ORG.","expected-argument":"Expected argument.","expected-eos":"Expected end of statement.","expected-instruction":t=>`Expected instruction, got ${t.type}.`,"expected-label-after-offset":"Expected label after OFFSET.","expected-instruction-after-label":t=>`Expected instruction after label, got ${t.type}.`,"expected-literal-after-expression":t=>`Expected "${t}" after expression.`,"expected-literal-after-literal":(t,e)=>`Expected "${t}" after "${e}".`,"expected-type":(t,e)=>`Expected ${t}, got ${e}.`,"indirect-addressing-must-be-bx":"The only register supported for indirect addressing is BX.","unclosed-parenthesis":"Unclosed parenthesis.","unexpected-identifier":"Unexpected identifier. You may have forgotten a colon (:) to make it a label."}},L2=we.from(we.MAX_ADDRESS).toString(),yH=qi.from(qi.MAX_ADDRESS).toString(),wH={"address-has-code":t=>`La direccin de memoria ${we.format(t)} tiene instrucciones. No se puede usar como direccin de datos.`,"address-out-of-range":t=>`La direccin de memoria ${we.format(t)} est fuera de rango (direccin mxima de memoria: ${L2}).`,"cannot-accept-strings":t=>`${t} no puede aceptar cadenas de texto.`,"cannot-be-indirect":"Este operando no puede ser una direccin de memoria indirecta.","cannot-be-unassinged":t=>`${t} no puede estar sin asignar.`,"cannot-be-word":"Este operando no puede ser de 16 bits.","circular-reference":"Se detect una referencia circular.","constant-must-have-a-label":"La constante debe tener una etiqueta.","constant-must-have-one-value":"La constante debe tener una exactamente un valor.","destination-cannot-be-immediate":"El destino no puede ser un valor inmediato.","double-memory-access":"No se puede acceder a una memoria dos veces en la misma instruccin.","duplicated-label":t=>`Etiqueta duplicada "${t}".`,"empty-program":"Programa vaco. El programa debe tener, al menos, una instruccin END.","end-must-be-the-last-statement":"END debe ser la ltima instruccin.","equ-not-found":t=>`EQU "${t}" no encontrado.`,"expects-ax":"Este operando debe ser AX o AL.","expects-dx":"El nico registro vlido es DX.","expects-immediate":"Este operando debe ser inmediato.","expects-label":"Este operando debe ser una etiqueta.","expects-no-operands":"Esta instruccin no espera ningn operando.","expects-one-operand":"Esta instruccin espera un operando.","expects-two-operands":"Esta instruccin espera dos operandos.","expects-word-register":"Esta instruccin espera un registro de 16 bits como su operando.","instruction-out-of-range":t=>`Esta instruccin se colocara en la direccin ${we.format(t)}, la cual se encuentra fuera del rango de memoria (direccin mxima de memoria: ${L2}).`,"invalid-interrupt":t=>`${t} no es un nmero de interrupcin vlido.`,"io-address-out-of-range":t=>`La direccin de E/S ${t} est fuera de rango (direccin mxima de memoria E/S: ${yH}).`,"label-not-found":t=>`La etiqueta "${t}" no ha sido definida.`,"label-should-be-a-number":t=>`La etiqueta ${t} debera apuntar a una constante EQU o a una instruccin. Quizs quiso escribir OFFSET ${t}.`,"label-should-be-an-instruction":t=>`La etiqueta ${t} debera apuntar a una instruccin.`,"missing-org":"No hay ningn ORG antes de esta instruccin, por lo que no se puede determinar su ubicacin en memoria.","must-have-one-or-more-values":t=>`${t} debe tener al menos un valor.`,"occupied-address":t=>`Esta instruccin sera colocada en la direccin ${we.format(t)}, la cual ya est ocupada.`,"offset-only-with-data-directive":"OFFSET solo puede ser usado con variables.","reserved-address":t=>`Esta instruccin sera colocada en la direccin ${we.format(t)}, la cual ya est reservada por el sistema.`,"size-mismatch":(t,e)=>`La fuente (${t} bits) y el destino (${e} bits) deben ser del mismo tamao.`,"unexpected-error":t=>`Error inesperado: ${String(t)}`,"unknown-size":"Acceder a una direccin de memoria desconocida con un operando inmediato requiere especificar el tipo de puntero con WORD PTR o BYTE PTR antes de la direccin.","value-out-of-range":(t,e)=>`El nmero ${t} no puede ser representado con ${e} bits.`,lexer:{"character-too-long":"El carcter solo puede contener un carcter.","empty-character":"Los carcter no puede estar vaco.","invalid-binary":"Nmero binario invlido. Solo puede contener ceros y unos.","invalid-decimal":"Nmero decimal invlido. Solo puede contener dgitos.","only-ascii":"Solo se soportan caracteres ASCII para caracteres y cadenas de texto.","unexpected-character":t=>`Carcter inesperado "${t}".`,"unterminated-character":"Carcter sin terminar.","unterminated-string":"Cadena sin terminar."},parser:{"ambiguous-unary":"Se detect una expresin unaria ambigua. Use parntesis para evitar ambigedades.","expected-address-after-org":"Se esperaba una direccin despus de ORG.","expected-argument":"Se esperaba un argumento.","expected-eos":"Se esperaba que la instruccin termine.","expected-instruction":t=>`Se esperaba una instruccin, se obtuvo ${t.type}.`,"expected-label-after-offset":"Se esperaba una etiqueta despus de OFFSET.","expected-instruction-after-label":t=>`Se esperaba una instruccin despus de la etiqueta, se obtuvo ${t.type}.`,"expected-literal-after-expression":t=>`Se esperaba "${t}" despus de la expresin.`,"expected-literal-after-literal":(t,e)=>`Se esperaba "${t}" despus de "${e}".`,"expected-type":(t,e)=>`Se esperaba ${t}, se obtuvo ${e}.`,"indirect-addressing-must-be-bx":"El nico registro vlido para el direccionamiento indirecto es BL.","unclosed-parenthesis":"Parntesis sin cerrar.","unexpected-identifier":"Identificador inesperado. Tal vez te olvidaste agregar dos puntos (:) para hacerlo una etiqueta."}},bH=MS({en:vH,es:wH});class ce extends Error{constructor(n,...i){super();ae(this,"code");ae(this,"context");ae(this,"position");this.code=n,this.context=i,this.position=null,n==="unexpected-error"&&console.error("[Unexpected Assembler Error]",...i)}at(n){return n&&(n instanceof an?this.position=n:"position"in n?this.position=n.position:"meta"in n&&(this.position=n.meta.position)),this}translate(n){return bH(n,this.code,...this.context)}get message(){let n=this.translate("en");return this.position&&(n+=` (${this.position})`),n}toString(){return this.message}static from(n){return n instanceof ce?n:new ce("unexpected-error",n)}}const LS=[[0,F.fromUnsigned(160,8)],[3,F.fromUnsigned(176,8)],[6,F.fromUnsigned(192,8)],[7,F.fromUnsigned(208,8)]],xH=new Set(...LS.map(([t])=>[t,t+1,t+2,t+3]));var Wo,Xc;class SH{constructor(){ae(this,"codeMemory",new Set);ae(this,"labels",new Map);$e(this,Wo,!1);$e(this,Xc,!1)}loadStatements(e){if(E(this,Wo))throw new Error("Tried to load statements twice");Z(this,Wo,!0),this.labels.clear();const n=[];for(const i of e)if("label"in i&&i.label){if(this.labels.has(i.label)){n.push(new ce("duplicated-label",i.label).at(i.position));continue}i.isInstruction()?this.labels.set(i.label,{type:"instruction",address:we.from(0)}):i.directive==="EQU"?this.labels.set(i.label,{type:"EQU",constant:i}):this.labels.set(i.label,{type:i.directive,address:we.from(0)})}return n}computeAddresses(e){if(E(this,Xc))throw new Error("Tried to compute addresses twice");Z(this,Xc,!0),this.codeMemory.clear();const n=new Set;let i=null;return $g(e,s=>{if(s.isEnd()||s.isDataDirective()&&s.directive==="EQU")return;if(s.isOriginChange()){i=s.newAddress;return}if(i===null)throw new ce("missing-org").at(s);const o=s.length;for(let l=0;l<o;l++){if(!we.inRange(i+l))throw new ce("instruction-out-of-range",i+l).at(s);const c=we.from(i+l);if(n.has(c.value))throw new ce("occupied-address",c).at(s);if(xH.has(c.value))throw new ce("reserved-address",c).at(s);n.add(c.value),s.isInstruction()&&this.codeMemory.add(c.value)}const a=we.from(i);s.setStart(a),s.label&&this.labels.set(s.label,{type:s.isInstruction()?"instruction":s.directive,address:a}),i+=o},ce.from)}labelExists(e){if(!E(this,Wo))throw new Error("Tried to check if label exists before loading statements");return this.labels.has(e)}getLabelType(e){var n;if(!E(this,Wo))throw new Error("Tried to get type of label before loading statements");return(n=this.labels.get(e))==null?void 0:n.type}getLabelValue(e){if(!E(this,Wo))throw new Error("Tried to get type of label before loading statements");const n=this.labels.get(e);if(n){if(n.type==="EQU")return n.constant.evaluate(this);if(!E(this,Xc))throw new Error("Tried to get address of label before computing addresses");return n.address.value}}addressIsReserved(e){return e instanceof we&&(e=e.value),this.codeMemory.has(e)}}Wo=new WeakMap,Xc=new WeakMap;const kH=["AL","BL","CL","DL","AH","BH","CH","DH"],MM=["AX","BX","CX","DX","SP"],Tg=[...kH,...MM],BS=["DB","DW","EQU"],jS=["MOV","PUSH","POP","IN","OUT","PUSHF","POPF","ADD","ADC","INC","SUB","SBB","DEC","NEG","CMP","NOT","AND","OR","XOR","CALL","JMP","RET","JZ","JO","JS","JC","JNZ","JNO","JNS","JNC","INT","IRET","CLI","STI","NOP","HLT"],_H=["OFFSET","ORG","BYTE","WORD","PTR","END",...Tg,...jS,...BS];class CH{constructor(e,n,i){ae(this,"type");ae(this,"lexeme");ae(this,"position");this.type=e,this.lexeme=n,this.position=i}toJSON(){return{type:this.type,lexeme:this.lexeme,position:this.position.toJSON()}}}class EH{constructor(e){ae(this,"scanned",!1);ae(this,"tokens",[]);ae(this,"position",new an(0));this.source=e}scanTokens(){if(this.scanned)throw new Error("Scanner has already been used.");for(this.scanned=!0;!this.isAtEnd();){this.position=new an(this.position.end);const e=this.advance();switch(e){case"(":this.addToken("LEFT_PAREN");continue;case")":this.addToken("RIGHT_PAREN");continue;case"[":this.addToken("LEFT_BRACKET");continue;case"]":this.addToken("RIGHT_BRACKET");continue;case",":this.addToken("COMMA");continue;case"?":this.addToken("QUESTION_MARK");continue;case"+":this.addToken("PLUS");continue;case"-":this.addToken("MINUS");continue;case"*":this.addToken("ASTERISK");continue;case"'":{let n=0;for(;this.peek()!=="'";){if(this.isAtEnd()||this.peek()===`
`)throw new ce("lexer.unterminated-character").at(this.position);if(Vf(this.peek())===null)throw new ce("lexer.only-ascii").at(new an(this.position.end,this.position.end+1));this.advance(),n++}if(this.advance(),n===0)throw new ce("lexer.empty-character").at(this.position);if(n>=2)throw new ce("lexer.character-too-long").at(this.position);this.addToken("CHARACTER");continue}case'"':for(;this.peek()!=='"';){if(this.isAtEnd()||this.peek()===`
`)throw new ce("lexer.unterminated-string").at(this.position);if(Vf(this.peek())===null)throw new ce("lexer.only-ascii").at(new an(this.position.end,this.position.end+1));this.advance()}this.advance(),this.addToken("STRING");continue;case";":for(;this.peek()!==`
`&&!this.isAtEnd();)this.advance();continue;case" ":case"\r":case"	":continue;case`
`:this.addToken("EOL");continue}if(this.isDigit(e)){for(;this.isDigit(this.peek())||this.peek()>="a"&&this.peek()<="f"||this.peek()>="A"&&this.peek()<="F";)this.advance();if(this.peek()==="H"||this.peek()==="h")this.advance();else{const n=this.source.slice(this.position.start,this.position.end);if(n.at(-1)==="b"||n.at(-1)==="B"){if(!/^[01]+b$/i.test(n))throw new ce("lexer.invalid-binary").at(this.position)}else if(!/^\d+$/.test(n))throw new ce("lexer.invalid-decimal").at(this.position)}this.addToken("NUMBER");continue}if(this.isAlpha(e)){for(;this.isAlphaNumeric(this.peek());)this.advance();const n=this.source.slice(this.position.start,this.position.end).toUpperCase();_H.includes(n)?this.addToken(n):this.peek()===":"?(this.advance(),this.addToken("LABEL")):this.addToken("IDENTIFIER");continue}throw new ce("lexer.unexpected-character",e).at(this.position)}return this.position=new an(this.position.end),this.addToken("EOF"),this.tokens}addToken(e){this.tokens.push(new CH(e,this.source.slice(this.position.start,this.position.end),this.position))}advance(){const e=this.source.charAt(this.position.end);return this.position=new an(this.position.start,this.position.end+1),e}isAlpha(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e==="_"}isAlphaNumeric(e){return this.isAlpha(e)||this.isDigit(e)}isAtEnd(){return this.position.end>=this.source.length}isDigit(e){return e>="0"&&e<="9"}peek(){return this.isAtEnd()?"\0":this.source.charAt(this.position.end)}}class En{constructor(e){this.position=e}isNumberLiteral(){return this.type==="number-literal"}isLabel(){return this.type==="label"}isUnaryOperation(){return this.type==="unary-operation"}isBinaryOperation(){return this.type==="binary-operation"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}ae(En,"numberLiteral",(...e)=>new AH(...e)),ae(En,"label",(...e)=>new PH(...e)),ae(En,"unaryOperation",(...e)=>new $H(...e)),ae(En,"binaryOperation",(...e)=>new TH(...e));class AH extends En{constructor(n,i){super(i);ae(this,"type","number-literal");this.value=n}evaluate(){return this.value}toJSON(){return{...super.toJSON(),value:this.value}}}let PH=class extends En{constructor(n,i,r){super(r);ae(this,"type","label");this.value=n,this.offset=i}evaluate(n){if(!n.labelExists(this.value))throw new ce("label-not-found",this.value).at(this.position);const i=n.getLabelType(this.value);if((i==="DB"||i==="DW")&&!this.offset)throw new ce("label-should-be-a-number",this.value).at(this.position);if((i==="EQU"||i==="instruction")&&this.offset)throw new ce("offset-only-with-data-directive").at(this.position);return n.getLabelValue(this.value)}toJSON(){return{...super.toJSON(),value:this.value,offset:this.offset}}};class $H extends En{constructor(n,i,r){super(r);ae(this,"type","unary-operation");this.operator=n,this.right=i}evaluate(n){return this.operator==="+"?this.right.evaluate(n):-this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,right:this.right.toJSON()}}}class TH extends En{constructor(n,i,r,s){super(s);ae(this,"type","binary-operation");this.left=n,this.operator=i,this.right=r}evaluate(n){return this.operator==="+"?this.left.evaluate(n)+this.right.evaluate(n):this.operator==="-"?this.left.evaluate(n)-this.right.evaluate(n):this.left.evaluate(n)*this.right.evaluate(n)}toJSON(){return{...super.toJSON(),operator:this.operator,left:this.left.toJSON(),right:this.right.toJSON()}}}class Iv{constructor(e){this.position=e}isOriginChange(){return this.type==="origin-change"}isEnd(){return this.type==="end"}isDataDirective(){return this.type==="data-directive"}isInstruction(){return this.type==="instruction"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}var Vs;class DM extends Iv{constructor(n,i,r){super(r);ae(this,"type","data-directive");ae(this,"label");ae(this,"values");$e(this,Vs,null);this.values=n,this.label=i}get start(){if(E(this,Vs)===null)throw new Error("Start not set");return E(this,Vs)}setStart(n){if(E(this,Vs)!==null)throw new Error("Start already set");Z(this,Vs,n)}toJSON(){return{...super.toJSON(),...E(this,Vs)?{start:E(this,Vs).toJSON()}:{},directive:this.directive,label:this.label}}}Vs=new WeakMap;var fl,Go,qc;class OH extends DM{constructor(n,i,r){super(n,i,r);ae(this,"directive","EQU");$e(this,fl,"not-processed");$e(this,Go,null);$e(this,qc,null)}toJSON(){var n;return{...super.toJSON(),value:E(this,qc)??((n=E(this,Go))==null?void 0:n.toJSON())??this.values.map(i=>i.toJSON())}}validate(){if(E(this,Go))throw new Error("Constant already validated");if(!this.label)throw new ce("constant-must-have-a-label").at(this);if(this.values.length!==1)throw new ce("constant-must-have-one-value").at(this);const n=this.values[0];if(n.type==="string")throw new ce("cannot-accept-strings","EQU").at(n);if(n.type==="unassigned")throw new ce("cannot-be-unassinged","EQU").at(n);Z(this,Go,n.value)}evaluateExpressions(n){if(!E(this,Go))throw new Error("Constant not validated");if(E(this,fl)==="processed")return E(this,qc);if(E(this,fl)==="processing")throw new ce("circular-reference").at(this.position);Z(this,fl,"processed");const i=E(this,Go).evaluate(n);return Z(this,fl,"processed"),Z(this,qc,i),i}evaluate(n){return this.evaluateExpressions(n)}}fl=new WeakMap,Go=new WeakMap,qc=new WeakMap;const Cd=Symbol("unassigned");var ui,Tr;class NH extends DM{constructor(n,i,r,s){super(i,r,s);ae(this,"size");$e(this,ui,null);$e(this,Tr,null);this.directive=n,this.size=n==="DB"?8:16}get length(){if(!E(this,ui))throw new Error("Data directive not validated");return E(this,ui).length*(this.size/8)}getValues(){if(!E(this,Tr))throw new Error("Data directive not evaluated");return E(this,Tr)}toJSON(){return{...super.toJSON(),values:(E(this,Tr)??E(this,ui)??this.values).map(n=>n===Cd?"?":n.toJSON())}}validate(){if(E(this,ui))throw new Error("Data directive already validated");Z(this,ui,[]);for(const n of this.values)if(n.isUnassigned())E(this,ui).push(Cd);else if(n.isString()){if(this.directive!=="DB")throw new ce("cannot-accept-strings",this.directive).at(n);const i=n.value;for(let r=0;r<i.length;r++){const s=Vf(i[r]);if(s===null)throw new Error("Invalid character, should not happen");const o=new an(n.position.start+r,n.position.start+r+1),a=En.numberLiteral(s,o);E(this,ui).push(a)}}else E(this,ui).push(n.value);if(E(this,ui).length===0)throw new ce("must-have-one-or-more-values",this.directive).at(this)}evaluateExpressions(n){if(!E(this,ui))throw new Error("Data directive not validated");if(E(this,Tr))throw new Error("Data directive already evaluated");Z(this,Tr,[]);const i=$g(E(this,ui),r=>{if(r===Cd)E(this,Tr).push(Cd);else{const s=r.evaluate(n);if(!F.fits(s,this.size))throw new ce("value-out-of-range",s,this.size).at(this);const o=F.fromNumber(s,this.size);E(this,Tr).push(o)}},ce.from);return i.length>0&&Z(this,Tr,null),i}}ui=new WeakMap,Tr=new WeakMap;class FS{constructor(e){this.position=e}isString(){return this.type==="string"}isUnassigned(){return this.type==="unassigned"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class RH extends FS{constructor(n,i){super(i);ae(this,"type","string");this.value=n}toJSON(){return{...super.toJSON(),value:this.value}}}class MH extends FS{constructor(n){super(n);ae(this,"type","unassigned")}}class DH extends FS{constructor(n){super(n.position);ae(this,"type","number-expression");this.value=n}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function IH(t,e,n){const i=an.merge(t.position,...e.map(r=>r.position));switch(t.type){case"DB":case"DW":return new NH(t.type,e,n,i);case"EQU":return new OH(e,n,i)}}class LH extends Iv{constructor(n){super(n);ae(this,"type","end")}}function el(t){switch(t){case"AL":case"AX":return 0;case"BL":case"BX":return 1;case"CL":case"CX":return 2;case"DL":case"DX":return 3;case"AH":case"SP":return 4;case"CH":return 5;case"DH":return 6;case"BH":return 7;default:throw new Error(`Registro no soportado: ${t}`)}}var Hs;class Wl extends Iv{constructor(n,i,r){super(r);ae(this,"type","instruction");ae(this,"label");ae(this,"operands");$e(this,Hs,null);this.operands=n,this.label=i}get start(){if(E(this,Hs)===null)throw new Error("Start not set");return E(this,Hs)}setStart(n){if(E(this,Hs)!==null)throw new Error("Start already set");Z(this,Hs,n)}toJSON(){return{...super.toJSON(),...E(this,Hs)?{start:E(this,Hs).toJSON()}:{},instruction:this.instruction,label:this.label}}}Hs=new WeakMap;var Bn,nr;class BH extends Wl{constructor(n,i,r,s){super(i,r,s);$e(this,Bn,null);$e(this,nr,null);this.instruction=n}get length(){if(!E(this,Bn))throw new Error("Instruction not validated");const{mode:n,size:i,out:r,src:s}=E(this,Bn);let o=1;return(n==="reg<-mem"&&s.mode==="direct"||(n==="mem<-reg"||n==="mem<-imd")&&r.mode==="direct")&&(o+=1),(n==="reg<-imd"||n==="mem<-imd")&&(o+=i/8),o}get operation(){if(!E(this,nr))throw new Error("Instruction not evaluated");return E(this,nr)}toBytes(){const{mode:n,size:i,out:r,src:s}=this.operation,o=[],a={MOV:0,AND:130,OR:132,XOR:134,ADD:64,ADC:138,SUB:140,SBB:142,CMP:144};switch(o[0]=a[this.instruction],i===16&&(o[0]|=1),n){case"reg<-reg":{o[0]|=(el(r)&3)<<2,o[0]|=(el(s)&3)<<0;break}case"reg<-mem":{s.mode==="direct"?(o[0]=16,o.push(s.address.byte.low.unsigned)):o[0]=17,o[0]|=(el(r)&3)<<2;break}case"reg<-imd":{o[0]=18,o.push(s.low.unsigned),o[0]|=(el(r)&3)<<2;break}case"mem<-reg":{r.mode==="direct"?(o[0]=32,o.push(r.address.byte.low.unsigned)):o[0]=65,o[0]|=(el(s)&3)<<2;break}case"mem<-imd":{r.mode==="direct"?(o[0]=44,o.push(r.address.byte.low.unsigned)):o[0]=45,o.push(s.low.unsigned),i===16&&o.push(s.high.unsigned);break}default:return n}return new Uint8Array(o)}toJSON(){return{...super.toJSON(),...E(this,nr)??E(this,Bn)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(E(this,Bn))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new ce("expects-two-operands").at(this);const[i,r]=this.operands;if(i.isRegister()){if(r.isRegister()){if(i.size!==r.size)throw new ce("size-mismatch",r.size,i.size).at(this);Z(this,Bn,{mode:"reg<-reg",size:i.size,out:i.value,src:r.value});return}if(r.isDirectAddress()){if(r.size!=="auto"&&r.size!==i.size)throw new ce("size-mismatch",r.size,i.size).at(this);Z(this,Bn,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"direct",address:r.value}});return}if(r.isIndirectAddress()){if(r.size!=="auto"&&r.size!==i.size)throw new ce("size-mismatch",r.size,i.size).at(this);Z(this,Bn,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"indirect"}});return}const s=r.getAsDirectAddress(n);if(s){if(s.size!==i.size)throw new ce("size-mismatch",s.size,i.size).at(this);Z(this,Bn,{mode:"reg<-mem",size:i.size,out:i.value,src:{mode:"direct",address:s.expression}});return}Z(this,Bn,{mode:"reg<-imd",size:i.size,out:i.value,src:r.value});return}else{let s,o;if(i.isIndirectAddress())s=i.size,o={mode:"indirect"};else if(i.isDirectAddress())s=i.size,o={mode:"direct",address:i.value};else{const a=i.getAsDirectAddress(n);if(a)s=a.size,o={mode:"direct",address:a.expression};else throw new ce("destination-cannot-be-immediate").at(i)}if(r.isRegister()){if(s!=="auto"&&s!==r.size)throw new ce("size-mismatch",s,r.size).at(this);Z(this,Bn,{mode:"mem<-reg",size:r.size,out:o,src:r.value});return}if(r.isNumberExpression()){if(r.getAsDirectAddress(n))throw new ce("double-memory-access").at(this);if(s==="auto")throw new ce("unknown-size").at(i);Z(this,Bn,{mode:"mem<-imd",size:s,out:o,src:r.value});return}throw new ce("double-memory-access").at(this)}}evaluateExpressions(n){if(!E(this,Bn))throw new Error("Instruction not validated");if(E(this,nr))throw new Error("Instruction aready evaluated");const{mode:i,size:r,out:s,src:o}=E(this,Bn),a=l=>{const c=l.evaluate(n);if(!we.inRange(c))throw new ce("address-out-of-range",c).at(l);const u=we.from(c);if(n.addressIsReserved(u))throw new ce("address-has-code",u).at(l);return u};switch(i){case"reg<-reg":{Z(this,nr,{mode:i,size:r,out:s,src:o});return}case"reg<-mem":{Z(this,nr,{mode:i,size:r,out:s,src:o.mode==="direct"?{mode:"direct",address:a(o.address)}:{mode:"indirect"}});return}case"reg<-imd":{const l=o.evaluate(n);if(!F.fits(l,r))throw new ce("value-out-of-range",l,r).at(o);const c=F.fromNumber(l,r);Z(this,nr,{mode:i,size:r,out:s,src:c});return}case"mem<-reg":{Z(this,nr,{mode:i,size:r,out:s.mode==="direct"?{mode:"direct",address:a(s.address)}:{mode:"indirect"},src:o});return}case"mem<-imd":{const l=o.evaluate(n);if(!F.fits(l,r))throw new ce("value-out-of-range",l,r).at(o);const c=F.fromNumber(l,r);Z(this,nr,{mode:i,size:r,out:s.mode==="direct"?{mode:"direct",address:a(s.address)}:{mode:"indirect"},src:c});return}default:return i}}}Bn=new WeakMap,nr=new WeakMap;var fs,Ws;class jH extends Wl{constructor(n,i,r,s){super(i,r,s);$e(this,fs,null);$e(this,Ws,null);ae(this,"length",2);this.instruction=n}toBytes(){return new Uint8Array([26,this.value.unsigned])}get value(){if(!E(this,Ws))throw new Error("Instruction not evaluated");return E(this,Ws)}toJSON(){return{...super.toJSON(),...E(this,Ws)?{value:E(this,Ws).toJSON()}:E(this,fs)?{initialValue:E(this,fs).toJSON()}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(E(this,fs))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new ce("expects-one-operand").at(this);const n=this.operands[0];if(!n.isNumberExpression())throw new ce("expects-immediate").at(n);Z(this,fs,n.value)}evaluateExpressions(n){if(!E(this,fs))throw new Error("Instruction not validated");if(E(this,Ws))throw new Error("Instruction aready evaluated");const i=E(this,fs).evaluate(n);if(!F.fitsUnsigned(i,8))throw new ce("invalid-interrupt",i).at(E(this,fs));Z(this,Ws,F.fromUnsigned(i,8))}}fs=new WeakMap,Ws=new WeakMap;var Or,Gs,AP;let FH=(AP=class extends Wl{constructor(n,i,r,s){super(i,r,s);$e(this,Or,null);$e(this,Gs,null);this.instruction=n}get length(){if(!E(this,Or))throw new Error("Instruction not validated");return E(this,Or).port==="fixed"?2:1}toBytes(){const n=[],i={IN:80,OUT:84};return n[0]=i[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.port==="fixed"?n[1]=this.operation.address.value:n[0]|=2,new Uint8Array(n)}get operation(){if(E(this,Gs)===null)throw new Error("Operation not set");return E(this,Gs)}toJSON(){return{...super.toJSON(),...E(this,Gs)??E(this,Or)??{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(E(this,Or))throw new Error("Instruction already validated");if(this.operands.length!==2)throw new ce("expects-two-operands").at(this);const n=this.operands[this.instruction==="IN"?0:1],i=this.operands[this.instruction==="IN"?1:0];if(!n.isRegister()||n.value!=="AL"&&n.value!=="AX")throw new ce("expects-ax").at(n);const r=n.value==="AX"?16:8;if(i.isRegister()){if(i.value!=="DX")throw new ce("expects-dx").at(i);Z(this,Or,{port:"variable",size:r});return}if(i.isNumberExpression()){Z(this,Or,{port:"fixed",size:r,address:i.value});return}throw new ce("expects-immediate").at(i)}evaluateExpressions(n){if(!E(this,Or))throw new Error("Instruction not validated");if(E(this,Gs))throw new Error("Instruction aready evaluated");const i=E(this,Or);if(i.port==="fixed"){const r=i.address.evaluate(n);if(!qi.inRange(r))throw new ce("io-address-out-of-range",r).at(this);const s=qi.from(r);Z(this,Gs,{port:"fixed",size:i.size,address:s})}else Z(this,Gs,{port:"variable",size:i.size})}},Or=new WeakMap,Gs=new WeakMap,AP);var Ks,Xs,PP;let zH=(PP=class extends Wl{constructor(n,i,r,s){super(i,r,s);$e(this,Ks,null);$e(this,Xs,null);ae(this,"length",2);this.instruction=n}toBytes(){const n=[],i={JC:195,JNC:196,JZ:193,JNZ:34,JS:197,JNS:198,JO:199,JNO:200,JMP:192,CALL:201};return n.push(i[this.instruction]),n.push(this.address.byte.low.unsigned),new Uint8Array(n)}get address(){if(E(this,Xs)===null)throw new Error("Instruction not evaluated");return E(this,Xs)}toJSON(){return{...super.toJSON(),...E(this,Xs)?{address:E(this,Xs).toJSON()}:E(this,Ks)?{jumpTo:E(this,Ks)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(E(this,Ks))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new ce("expects-one-operand").at(this);const i=this.operands[0];if(!i.isNumberExpression()||!i.value.isLabel())throw new ce("expects-label").at(i);const r=i.value.value,s=n.getLabelType(r);if(!s)throw new ce("label-not-found",r).at(i);if(s!=="instruction")throw new ce("label-should-be-an-instruction",r).at(i);Z(this,Ks,r)}evaluateExpressions(n){if(!E(this,Ks))throw new Error("Instruction not validated");if(E(this,Xs))throw new Error("Instruction aready evaluated");const i=n.getLabelValue(E(this,Ks));if(!we.inRange(i))throw new ce("address-out-of-range",i).at(this);Z(this,Xs,we.from(i))}},Ks=new WeakMap,Xs=new WeakMap,PP);var hs,$P;let UH=($P=class extends Wl{constructor(n,i,r,s){super(i,r,s);$e(this,hs,null);ae(this,"length",1);this.instruction=n}toBytes(){let i={PUSH:96,POP:104}[this.instruction];return i|=el(this.register),new Uint8Array([i])}get register(){if(!E(this,hs))throw new Error("Instruction not evaluated");return E(this,hs)}toJSON(){return{...super.toJSON(),...E(this,hs)?{register:E(this,hs)}:{operands:this.operands.map(n=>n.toJSON())}}}validate(){if(E(this,hs))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new ce("expects-one-operand").at(this);const n=this.operands[0];if(!n.isRegister()||n.size!==16)throw new ce("expects-word-register").at(n);Z(this,hs,n.value)}evaluateExpressions(){if(!E(this,hs))throw new Error("Instruction not validated")}},hs=new WeakMap,$P);var Ni,ps;class VH extends Wl{constructor(n,i,r,s){super(i,r,s);$e(this,Ni,null);$e(this,ps,null);this.instruction=n}get length(){if(!E(this,Ni))throw new Error("Instruction not validated");const{mode:n}=E(this,Ni);let i=2;return n==="mem-direct"&&(i+=2),i}toBytes(){const n=[],i={NOT:64,NEG:66,INC:68,DEC:70};switch(n[0]=i[this.instruction],this.operation.size===16&&(n[0]|=1),this.operation.mode){case"reg":{n[1]=0,n[1]|=el(this.operation.reg);break}case"mem-direct":{n[1]=192;const r=this.operation.address.byte;n.push(r.low.unsigned),n.push(r.high.unsigned);break}case"mem-indirect":{n[1]=208;break}default:return this.operation}return new Uint8Array(n)}get operation(){if(!E(this,ps))throw new Error("Instruction not evaluated");return E(this,ps)}toJSON(){return{...super.toJSON(),...E(this,ps)??E(this,Ni)??{operands:this.operands.map(n=>n.toJSON())}}}validate(n){if(E(this,Ni))throw new Error("Instruction already validated");if(this.operands.length!==1)throw new ce("expects-one-operand").at(this);const i=this.operands[0];if(i.isRegister()){Z(this,Ni,{mode:"reg",size:i.size,reg:i.value});return}if(i.isDirectAddress()){if(i.size==="auto")throw new ce("unknown-size").at(i);Z(this,Ni,{mode:"mem-direct",size:i.size,address:i.value});return}if(i.isIndirectAddress()){if(i.size==="auto")throw new ce("unknown-size").at(i);Z(this,Ni,{mode:"mem-indirect",size:i.size});return}const r=i.getAsDirectAddress(n);if(r){Z(this,Ni,{mode:"mem-direct",size:r.size,address:r.expression});return}throw new ce("destination-cannot-be-immediate").at(i)}evaluateExpressions(n){if(!E(this,Ni))throw new Error("Instruction not validated");if(E(this,ps))throw new Error("Instruction aready evaluated");const i=E(this,Ni);switch(i.mode){case"reg":{Z(this,ps,{mode:"reg",size:i.size,reg:i.reg});return}case"mem-direct":{const r=i.address.evaluate(n);if(!we.inRange(r))throw new ce("address-out-of-range",r).at(i.address);const s=we.from(r);if(n.addressIsReserved(s))throw new ce("address-has-code",s).at(i.address);Z(this,ps,{mode:"mem-direct",size:i.size,address:s});return}case"mem-indirect":{Z(this,ps,{mode:"mem-indirect",size:i.size});return}default:return i}}}Ni=new WeakMap,ps=new WeakMap;var Yc;class HH extends Wl{constructor(n,i,r,s){super(i,r,s);$e(this,Yc,!1);ae(this,"length",1);this.instruction=n}toBytes(){const n={PUSHF:112,POPF:120,RET:51,CLI:24,STI:25,IRET:59,NOP:16,HLT:17};return new Uint8Array([n[this.instruction]])}validate(){if(E(this,Yc))throw new Error("Instruction already validated");if(this.operands.length>0)throw new ce("expects-no-operands").at(this);Z(this,Yc,!0)}evaluateExpressions(){if(!E(this,Yc))throw new Error("Instruction not validated")}}Yc=new WeakMap;class Lv{constructor(e){this.position=e}isRegister(){return this.type==="register"}isIndirectAddress(){return this.type==="indirect-address"}isDirectAddress(){return this.type==="direct-address"}isNumberExpression(){return this.type==="number-expression"}toJSON(){return{type:this.type,position:this.position.toJSON()}}}class WH extends Lv{constructor(n){super(n.position);ae(this,"type","register");ae(this,"value");this.value=n.type}get size(){return MM.includes(this.value)?16:8}toJSON(){return{...super.toJSON(),value:this.value}}}class GH extends Lv{constructor(n,i){super(i);ae(this,"type","indirect-address");ae(this,"size");n?this.size=n==="BYTE"?8:16:this.size="auto"}toJSON(){return{...super.toJSON(),size:this.size}}}class KH extends Lv{constructor(n,i,r){super(r);ae(this,"type","direct-address");ae(this,"size");this.value=n,i?this.size=i==="BYTE"?8:16:this.size="auto"}toJSON(){return{...super.toJSON(),size:this.size,value:this.value.toJSON()}}}class Og extends Lv{constructor(n){super(n.position);ae(this,"type","number-expression");this.value=n}getAsDirectAddress(n){return Og.recursiveGetAsDirectAddress(this.value,n)}static recursiveGetAsDirectAddress(n,i){if(n.isLabel()){const r=n;if(r.offset)return!1;if(!i.labelExists(r.value))throw new ce("label-not-found",r.value).at(n.position);const s=i.getLabelType(r.value),o=s==="DB"?8:s==="DW"?16:!1;return o?{size:o,expression:En.label(r.value,!0,n.position)}:!1}else if(n.isBinaryOperation()){if(n.operator!=="+"&&n.operator!=="-")return!1;const r=Og.recursiveGetAsDirectAddress(n.left,i);return r?{size:r.size,expression:En.binaryOperation(r.expression,n.operator,n.right,n.position)}:!1}return!1}toJSON(){return{...super.toJSON(),value:this.value.toJSON()}}}function B2(t,e,n){const i=an.merge(t.position,...e.map(r=>r.position));switch(t.type){case"PUSHF":case"POPF":case"RET":case"IRET":case"CLI":case"STI":case"NOP":case"HLT":return new HH(t.type,e,n,i);case"MOV":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":case"AND":case"OR":case"XOR":return new BH(t.type,e,n,i);case"NEG":case"INC":case"DEC":case"NOT":return new VH(t.type,e,n,i);case"PUSH":case"POP":return new UH(t.type,e,n,i);case"CALL":case"JZ":case"JNZ":case"JS":case"JNS":case"JC":case"JNC":case"JO":case"JNO":case"JMP":return new zH(t.type,e,n,i);case"IN":case"OUT":return new FH(t.type,e,n,i);case"INT":return new jH(t.type,e,n,i)}}class XH extends Iv{constructor(n,i){super(i);ae(this,"type","origin-change");this.newAddress=n}toJSON(){return{...super.toJSON(),newAddress:this.newAddress}}}let qH=class{constructor(e){ae(this,"tokens");ae(this,"current",0);this.tokens=e}parse(){this.current=0;const e=[];for(;!this.isAtEnd();)this.match("EOL")||e.push(this.statement());return e}statement(){const e=this.originChangeStatement()??this.endStatement()??this.dataDirectiveStatement()??this.instructionStatement();if(!e){const n=this.peek();throw new ce("parser.expected-instruction",n).at(n)}return e}originChangeStatement(){const e=this.match("ORG");if(!e)return null;const n=this.consume("NUMBER",new ce("parser.expected-address-after-org")),i=this.parseNumber(n);return this.endOfStatement(),new XH(i,an.merge(e.position,n.position))}endStatement(){const e=this.match("END");if(!e)return null;for(;!this.isAtEnd();)if(!this.match("EOL"))throw new ce("end-must-be-the-last-statement").at(e);return new LH(e.position)}dataDirectiveStatement(){const e=this.match("IDENTIFIER"),n=this.match(...BS);if(e&&!n)throw new ce("parser.unexpected-identifier").at(e);if(!n)return null;const i=(e==null?void 0:e.lexeme.toUpperCase())||null,r=[this.dataDirectiveValue()];for(;this.match("COMMA");)r.push(this.dataDirectiveValue());return this.endOfStatement(),IH(n,r,i)}dataDirectiveValue(){if(this.match("STRING")){const e=this.previous();return new RH(this.parseString(e),e.position)}if(this.match("QUESTION_MARK")){const e=this.previous();return new MH(e.position)}return new DH(this.numberExpression())}instructionStatement(){const e=this.match("LABEL");for(;this.match("EOL"););const n=this.match(...jS);if(e&&!n){const s=this.peek();throw new ce("parser.expected-instruction-after-label",s).at(s)}if(!n)return null;const i=(e==null?void 0:e.lexeme.toUpperCase().slice(0,-1))||null;if(this.isAtEndOfStatement())return B2(n,[],i);const r=[this.instructionOperand()];for(;this.match("COMMA");)r.push(this.instructionOperand());return this.endOfStatement(),B2(n,r,i)}instructionOperand(){if(this.match(...Tg)){const n=this.previous();return new WH(n)}const e=this.match("BYTE","WORD");if(e&&this.consume("PTR",new ce("parser.expected-literal-after-literal","PTR",this.previous().type)),this.match("LEFT_BRACKET")){const n=this.previous();if(this.check(...Tg)){this.consume("BL",new ce("parser.indirect-addressing-must-be-bx"));const i=this.consume("RIGHT_BRACKET",new ce("parser.expected-literal-after-literal","]","BL"));return new GH(e==null?void 0:e.type,an.merge(e==null?void 0:e.position,n.position,i.position))}else{const i=this.numberExpression(),r=this.consume("RIGHT_BRACKET",new ce("parser.expected-literal-after-expression","]"));return new KH(i,e==null?void 0:e.type,an.merge(e==null?void 0:e.position,n.position,r.position))}}else if(e)throw new ce("parser.expected-literal-after-literal","[","PTR");return new Og(this.numberExpression())}advance(){return this.tokens[this.current++]}check(...e){if(this.isAtEnd())return!1;for(const n of e)if(this.peek().type===n)return!0;return!1}consume(e,n){Array.isArray(e)||(e=[e]);const i=this.match(...e);if(i)return i;throw n||(n=new ce("parser.expected-type",e.join(","),this.peek().type)),n.at(this.peek())}endOfStatement(){if(!this.isAtEnd()){if(this.check("EOL"))return this.advance();throw new ce("parser.expected-eos").at(this.peek())}}isAtEnd(){return this.peek().type==="EOF"}isAtEndOfStatement(){return this.check("EOL")||this.isAtEnd()}match(...e){return this.check(...e)?this.advance():null}parseNumber(e){return e.lexeme.at(-1)==="h"||e.lexeme.at(-1)==="H"?parseInt(e.lexeme.slice(0,-1),16):e.lexeme.at(-1)==="b"||e.lexeme.at(-1)==="B"?parseInt(e.lexeme.slice(0,-1),2):parseInt(e.lexeme,10)}parseString(e){return e.lexeme.slice(1,-1)}peek(){return this.tokens[this.current]}previous(){return this.tokens[this.current-1]}primaryNE(){if(this.match("NUMBER")){const i=this.previous(),r=this.parseNumber(i);return En.numberLiteral(r,i.position)}if(this.match("CHARACTER")){const i=this.previous(),r=Vf(i.lexeme.slice(1,-1));return En.numberLiteral(r,i.position)}if(this.match("LEFT_PAREN")){const i=this.numberExpression();return this.consume("RIGHT_PAREN",new ce("parser.unclosed-parenthesis")),i}const e=this.match("OFFSET"),n=this.match("IDENTIFIER");if(e&&!n)throw new ce("parser.expected-label-after-offset").at(this.peek());if(!n)throw new ce("parser.expected-argument").at(this.peek());return En.label(n.lexeme.toUpperCase(),e!==null,an.merge(e==null?void 0:e.position,n.position))}unaryNE(){if(this.match("PLUS","MINUS")){const e=this.previous();if(this.check("PLUS","MINUS"))throw new ce("parser.ambiguous-unary").at(this.peek());const n=this.unaryNE();return En.unaryOperation(e.type==="PLUS"?"+":"-",n,an.merge(e.position,n.position))}return this.primaryNE()}factorNE(){let e=this.unaryNE();for(;this.match("ASTERISK");){const n=this.unaryNE();e=En.binaryOperation(e,"*",n,an.merge(e.position,n.position))}return e}termNE(){let e=this.factorNE();for(;this.match("PLUS","MINUS");){const n=this.previous(),i=this.factorNE();e=En.binaryOperation(e,n.type==="PLUS"?"+":"-",i,an.merge(e.position,i.position))}return e}numberExpression(){return this.termNE()}};function IM(t){try{const n=new EH(t).scanTokens(),r=new qH(n).parse(),s=r.at(-1);if(!s)throw new ce("empty-program");if(!s.isEnd())throw new ce("end-must-be-the-last-statement").at(s);let o=[];const a=new SH;if(o=a.loadStatements(r),o.length>0)return{success:!1,errors:o};if(o=$g(r,u=>{u.isOriginChange()||u.isEnd()||u.validate(a)},ce.from),o.length>0)return{success:!1,errors:o};if(o=a.computeAddresses(r),o.length>0)return{success:!1,errors:o};const l=[],c=[];return o=$g(r,u=>{if(u.isDataDirective())if(u.directive==="EQU")u.evaluateExpressions(a);else{const d=u.evaluateExpressions(a);return l.push(u),d}else u.isInstruction()&&(u.evaluateExpressions(a),c.push(u))},ce.from),o.length>0?{success:!1,errors:o}:{success:!0,data:l,instructions:c}}catch(e){return{success:!1,errors:[ce.from(e)]}}}class oi{constructor(e){ae(this,"computer");this.computer=e.computer}}const YH=t=>we.format(t).slice(-2),JH=YH(we.MAX_ADDRESS),ZH={"address-has-instruction":t=>`Memory address ${we.format(t)} has an instruction, and cannot be written.`,"address-is-reserved":t=>`Memory address ${we.format(t)} is reserved, and cannot be written.`,"address-out-of-range":t=>`Memory address ${we.format(t)} is out of range (max memory address: ${JH}).`,"device-not-connected":t=>`"${t}" is not connected to the computer.`,"io-memory-not-connected":t=>`Didn't found a module connected to I/O memory address ${qi.format(t)}.`,"no-instruction":t=>`Expected instruction at memory address ${we.format(t)} but none was found.`,"no-program":"No program loaded. Assemble before running.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Unexpected error: ${String(t)}`},QH=we.from(we.MAX_ADDRESS).toString(),eW={"address-has-instruction":t=>`La direccin de memoria ${we.format(t)} tiene una instruccin, y no se puede escribir.`,"address-is-reserved":t=>`La direccin de memoria ${we.format(t)} est reservada, y no se puede escribir.`,"address-out-of-range":t=>`La direccin de memoria ${we.format(t)} est fuera de rango (direccin mxima de memoria: ${QH}).`,"device-not-connected":t=>`"${t}" no est conectado a la computadora.`,"io-memory-not-connected":t=>`No se encontr ningn mdulo conectado a la direccin de memoria E/S ${qi.format(t)}.`,"no-instruction":t=>`Se esperaba una instruccin en la direccin de memoria ${we.format(t)} pero no se encontr ninguna.`,"no-program":"No hay ningn programa cargado. Ensambl antes de ejecutar.","stack-overflow":"Stack overflow","stack-underflow":"Stack underflow","unexpected-error":t=>`Error inesperado: ${String(t)}`},tW=MS({en:ZH,es:eW});class tt extends Error{constructor(n,...i){super();ae(this,"code");ae(this,"context");this.code=n,this.context=i,n==="unexpected-error"&&console.error("[Unexpected Simulator Error]",...i)}translate(n){return tW(n,this.code,...this.context)}get message(){return this.translate("en")}toString(){return this.message}static from(n){return n instanceof tt?n:new tt("unexpected-error",n)}}class _o{constructor(e){this.statement=e}get name(){return this.statement.instruction}get start(){return this.statement.start}get position(){return this.statement.position}*consumeInstruction(e,n){if(yield*e.cpu.setMAR("IP"),!(yield*e.cpu.useBus("mem-read"))){const r=e.cpu.getRegister("IP").toString("hex");throw new tt("unexpected-error",`Could not read instruction byte at address ${r}h`)}yield*e.cpu.updateWordRegister("IP",r=>r.add(1)),yield*e.cpu.getMBR(n)}}var ev,LM;class nW extends _o{constructor(){super(...arguments);$e(this,ev)}get operation(){return this.statement.operation}*execute(n){const{mode:i,size:r,out:s,src:o}=this.operation;if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:pt(this,ev,LM).call(this),willUse:{ri:!1}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},i==="reg<-reg"||i==="reg<-mem"||i==="reg<-imd")r===8?yield*n.cpu.copyByteRegister(s,"left.l"):yield*n.cpu.copyWordRegister(s,"left");else{if(s.mode==="direct"?yield*this.consumeInstruction(n,"ri.l"):yield*n.cpu.copyWordRegister("BX","ri"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("left.l"),r===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}if(i==="reg<-reg"||i==="mem<-reg")r===8?yield*n.cpu.copyByteRegister(o,"right.l"):yield*n.cpu.copyWordRegister(o,"right");else if(i==="reg<-imd"||i==="mem<-imd")yield*this.consumeInstruction(n,"right.l"),r===16&&(yield*this.consumeInstruction(n,"right.h"));else{if(o.mode==="direct"?yield*this.consumeInstruction(n,"ri.l"):yield*n.cpu.copyWordRegister("BX","ri"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("right.l"),r===16){if(yield*n.cpu.updateWordRegister("ri",d=>d.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("right.h")}}yield{type:"cpu:cycle.update",phase:"execute"};const a=r===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left"),l=r===8?n.cpu.getRegister("right.l"):n.cpu.getRegister("right");let c;const u={};switch(this.name){case"AND":case"OR":case"XOR":{const d=this.name==="AND"?a.signed&l.signed:this.name==="OR"?a.signed|l.signed:a.signed^l.signed;c=F.fromSigned(d,r),u.CF=!1,u.OF=!1;break}case"ADD":case"ADC":{const d=this.name==="ADC"&&n.cpu.getFlag("CF")?1:0,f=a.unsigned+l.unsigned+d;f>F.maxValue(r)?(u.CF=!0,c=F.fromUnsigned(f-F.maxValue(r)-1,r)):(u.CF=!1,c=F.fromUnsigned(f,r)),u.OF=a.signed>=0&&l.signed>=0&&c.signed<0||a.signed<0&&l.signed<0&&c.signed>=0;break}case"SUB":case"SBB":case"CMP":{const d=this.name==="SBB"&&n.cpu.getFlag("CF")?1:0,f=a.unsigned-l.unsigned-d;f<0?(u.CF=!0,c=F.fromUnsigned(f+F.maxValue(r)+1,r)):(u.CF=!1,c=F.fromUnsigned(f,r)),u.OF=a.signed>=0&&l.signed<0&&c.signed<0||a.signed<0&&l.signed>=0&&c.signed>=0;break}}if(u.ZF=c.isZero(),u.SF=c.signed<0,yield*n.cpu.aluExecute(this.name==="CMP"?"SUB":this.name,c,u),this.name==="CMP")return!0;if(yield{type:"cpu:cycle.update",phase:"writeback"},i==="reg<-reg"||i==="reg<-mem"||i==="reg<-imd")r===8?yield*n.cpu.copyByteRegister("result.l",s):yield*n.cpu.copyWordRegister("result",s);else{if(r===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",d=>d.add(-1))}if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.l"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}ev=new WeakSet,LM=function(){const{mode:n,out:i,src:r}=this.operation;switch(n){case"reg<-reg":return[i,r];case"reg<-mem":{const s=r.mode==="direct"?r.address.toString():"BL";return[i,`[${s}]`]}case"reg<-imd":return[i,`${r.toString("hex")}h`];case"mem<-reg":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,r];case"mem<-imd":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,`${r.toString("hex")}h`];default:return n}};var tv,BM;class iW extends _o{constructor(){super(...arguments);$e(this,tv)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:pt(this,tv,BM).call(this),willUse:{ri:!1}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister(this.operation.reg,"left.l"):yield*n.cpu.copyWordRegister(this.operation.reg,"left");else{if(this.operation.mode==="mem-direct"?(yield*this.consumeInstruction(n,"ri.l"),yield*this.consumeInstruction(n,"ri.h")):yield*n.cpu.copyWordRegister("BX","ri"),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;if(yield*n.cpu.getMBR("left.l"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",o=>o.add(1)),yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("mem-read")))return!1;yield*n.cpu.getMBR("left.h")}}yield{type:"cpu:cycle.update",phase:"execute"};const i=this.operation.size===8?n.cpu.getRegister("left.l"):n.cpu.getRegister("left");let r;const s={};switch(this.name){case"NOT":{r=F.fromSigned(~i.signed,this.operation.size),s.CF=!1,s.OF=!1;break}case"NEG":{r=F.fromSigned(-i.signed,this.operation.size),s.CF=!i.isZero(),s.OF=i.signed===F.minSignedValue(this.operation.size);break}case"INC":{yield*n.cpu.updateWordRegister("right",F.fromSigned(1,16));const o=i.unsigned+1;o>F.maxValue(this.operation.size)?(s.CF=!0,r=F.fromUnsigned(o-F.maxValue(this.operation.size)-1,this.operation.size)):(s.CF=!1,r=F.fromUnsigned(o,this.operation.size)),s.OF=i.signed>=0&&r.signed<0;break}case"DEC":{yield*n.cpu.updateWordRegister("right",F.fromSigned(1,16));const o=i.unsigned-1;o<0?(s.CF=!0,r=F.fromUnsigned(o+F.maxValue(this.operation.size)+1,this.operation.size)):(s.CF=!1,r=F.fromUnsigned(o,this.operation.size)),s.OF=i.signed<0&&r.signed>=0;break}}if(s.ZF=r.isZero(),s.SF=r.signed<0,yield*n.cpu.aluExecute(this.name==="INC"?"ADD":this.name==="DEC"?"SUB":this.name,r,s),yield{type:"cpu:cycle.update",phase:"writeback"},this.operation.mode==="reg")this.operation.size===8?yield*n.cpu.copyByteRegister("result.l",this.operation.reg):yield*n.cpu.copyWordRegister("result",this.operation.reg);else{if(this.operation.size===16){if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.h"),!(yield*n.cpu.useBus("mem-write")))return!1;yield*n.cpu.updateWordRegister("ri",o=>o.add(-1))}if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("result.l"),!(yield*n.cpu.useBus("mem-write")))return!1}return!0}}tv=new WeakSet,BM=function(){switch(this.operation.mode){case"reg":return[this.operation.reg];case"mem-direct":return[`[${this.operation.address.toString()}]`];case"mem-indirect":return["[BX]"];default:return this.operation}};class rW extends _o{get number(){return this.statement.value}*execute(e){return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.number.toString("uint")],willUse:{id:!0}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"id.l"),yield{type:"cpu:cycle.update",phase:"execute"},yield*e.cpu.startInterrupt(this.number)}}var nv,jM;class sW extends _o{constructor(){super(...arguments);$e(this,nv)}get operation(){return this.statement.operation}*execute(n){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:pt(this,nv,jM).call(this),willUse:{ri:!1}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},this.operation.port==="fixed")yield*n.cpu.updateWordRegister("ri",F.zero(16)),yield*super.consumeInstruction(n,"ri.l");else if(yield*n.cpu.copyWordRegister("DX","ri"),!n.cpu.getRegister("DX").high.isZero())return yield{type:"cpu:error",error:new tt("io-memory-not-connected",n.cpu.getRegister("DX"))},!1;if(yield{type:"cpu:cycle.update",phase:"writeback"},this.name==="IN"){if(yield*n.cpu.setMAR("ri"),!(yield*n.cpu.useBus("io-read")))return!1;if(yield*n.cpu.getMBR("AL"),this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",i=>i.add(1)),yield*n.cpu.setMAR("ri"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new tt("io-memory-not-connected",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-read")))return!1;yield*n.cpu.getMBR("AH")}}else{if(yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AL"),!(yield*n.cpu.useBus("io-write")))return!1;if(this.operation.size===16){if(yield*n.cpu.updateWordRegister("ri",i=>i.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("AH"),!n.cpu.getRegister("ri.h").isZero())return yield{type:"cpu:error",error:new tt("io-memory-not-connected",n.cpu.getRegister("ri"))},!1;if(!(yield*n.cpu.useBus("io-write")))return!1}}return!0}}nv=new WeakSet,jM=function(){const n=[];return this.operation.port==="variable"?n.push("DX"):n.push(this.operation.address.toString()),this.operation.size===8?n.push("AL"):n.push("AX"),this.name==="IN"?n.reverse():n};class oW extends _o{get jumpTo(){return this.statement.address}*execute(e){yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[this.jumpTo.toString(!1)],willUse:{id:this.name==="CALL",ri:!1}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},yield*super.consumeInstruction(e,"ri.l"),yield{type:"cpu:cycle.update",phase:"execute"};let n;switch(this.name){case"JC":n=e.cpu.getFlag("CF");break;case"JNC":n=!e.cpu.getFlag("CF");break;case"JZ":n=e.cpu.getFlag("ZF");break;case"JNZ":n=!e.cpu.getFlag("ZF");break;case"JS":n=e.cpu.getFlag("SF");break;case"JNS":n=!e.cpu.getFlag("SF");break;case"JO":n=e.cpu.getFlag("OF");break;case"JNO":n=!e.cpu.getFlag("OF");break;case"CALL":case"JMP":n=!0;break;default:return this.name}if(n)if(this.name==="CALL"){if(yield*e.cpu.copyByteRegister("IP.l","id.l"),yield*e.cpu.copyByteRegister("ri.l","IP.l"),!(yield*e.cpu.pushToStack("id.l")))return!1}else yield*e.cpu.copyByteRegister("ri.l","IP.l");return!0}}class aW extends _o{*execute(e){if(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},this.name==="CLI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!1});else if(this.name==="STI")yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield*e.cpu.updateFLAGS({IF:!0});else if(this.name==="HLT")return yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},yield{type:"cpu:halt"},!1;return!0}}function tl(t){switch(t){case"AL":return["AX","low"];case"AH":return["AX","high"];case"BL":return["BX","low"];case"BH":return["BX","high"];case"CL":return["CX","low"];case"CH":return["CX","high"];case"DL":return["DX","low"];case"DH":return["DX","high"];default:{const[e,n]=t.split(".");return e==="MBR"?[e,null]:[e,n==="l"?"low":n==="h"?"high":null]}}}function lW(t){switch(t){case"AX":return["AL","AH"];case"BX":return["BL","BH"];case"CX":return["CL","CH"];case"DX":return["DL","DH"];case"SP":return["SP.l","SP.h"];case"IP":return["IP.l","IP.h"];case"ri":return["ri.l","ri.h"];case"id":return["id.l","id.h"];case"left":return["left.l","left.h"];case"right":return["right.l","right.h"];case"result":return["result.l","result.h"];case"FLAGS":return["FLAGS.l","FLAGS.h"];default:return[t,null]}}var iv,FM;class cW extends _o{constructor(){super(...arguments);$e(this,iv)}get operation(){return this.statement.operation}*execute(n){const{mode:i,size:r,out:s,src:o}=this.operation;switch(yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:pt(this,iv,FM).call(this),willUse:{ri:i==="mem<-imd",id:i==="mem<-imd"}}},yield*super.consumeInstruction(n,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"fetch-operands"},(this.operation.mode==="reg<-mem"||this.operation.mode==="mem<-reg"||this.operation.mode==="mem<-imd")&&((this.operation.mode==="reg<-mem"?this.operation.src.mode:this.operation.out.mode)==="direct"?yield*super.consumeInstruction(n,"ri.l"):yield*n.cpu.copyByteRegister("BL","ri.l")),this.operation.mode==="reg<-imd"&&(r===8&&typeof s=="string"&&(yield*super.consumeInstruction(n,s)),this.operation.size===16&&(yield*super.consumeInstruction(n,"id.h"))),this.operation.mode==="mem<-imd"&&(yield*super.consumeInstruction(n,"id.l"),this.operation.size===16&&(yield*super.consumeInstruction(n,"id.h"))),yield{type:"cpu:cycle.update",phase:"writeback"},i){case"reg<-reg":return r===8?yield*n.cpu.copyByteRegister(o,s):yield*n.cpu.copyWordRegister(o,s),!0;case"reg<-mem":return yield*n.cpu.setMAR("ri"),(yield*n.cpu.useBus("mem-read"))?(r===8&&(yield*n.cpu.getMBR(s)),!0):!1;case"reg<-imd":return r===16&&(yield*n.cpu.setMBR("id.h")),!0;case"mem<-reg":{const[a]=lW(o);return yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR(a),!!(yield*n.cpu.useBus("mem-write"))}case"mem<-imd":return yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("id.l"),!(!(yield*n.cpu.useBus("mem-write"))||r===16&&(yield*n.cpu.updateWordRegister("ri",a=>a.add(1)),yield*n.cpu.setMAR("ri"),yield*n.cpu.setMBR("id.h"),!(yield*n.cpu.useBus("mem-write"))));default:return i}}}iv=new WeakSet,FM=function(){const{mode:n,out:i,src:r}=this.operation;switch(n){case"reg<-reg":return[i,r];case"reg<-mem":{const s=r.mode==="direct"?r.address.toString():"BL";return[i,`[${s}]`]}case"reg<-imd":return[i,`${r.toString("hex")}h`];case"mem<-reg":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,r];case"mem<-imd":return[`[${i.mode==="direct"?i.address.toString():"BL"}]`,`${r.toString("hex")}h`];default:return n}};class uW extends _o{*execute(e){return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:[],willUse:{id:!1}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},!(!(yield*e.cpu.popFromStack("IP.l"))||this.name==="IRET"&&!(yield*e.cpu.popFromStack("FLAGS.l")))}}class dW extends _o{*execute(e){const n=this.statement.instruction==="PUSH"||this.statement.instruction==="POP"?this.statement.register:"FLAGS";return yield{type:"cpu:cycle.start",instruction:{name:this.name,position:this.position,operands:n!=="FLAGS"?[n]:[],willUse:{id:!1}}},yield*super.consumeInstruction(e,"IR"),yield{type:"cpu:decode"},yield{type:"cpu:cycle.update",phase:"decoded",next:"execute"},this.name==="PUSH"||this.name==="PUSHF"?(yield*e.cpu.copyWordRegister(n,"id"),yield*e.cpu.pushToStack()):(yield*e.cpu.popFromStack())?(yield*e.cpu.copyWordRegister("id",n),!0):!1}}function fW(t){switch(t.instruction){case"MOV":return new cW(t);case"AND":case"OR":case"XOR":case"ADD":case"ADC":case"SUB":case"SBB":case"CMP":return new nW(t);case"NOT":case"NEG":case"INC":case"DEC":return new iW(t);case"IN":case"OUT":return new sW(t);case"PUSH":case"POP":case"PUSHF":case"POPF":return new dW(t);case"JC":case"JNC":case"JZ":case"JNZ":case"JS":case"JNS":case"JO":case"JNO":case"JMP":case"CALL":return new oW(t);case"RET":case"IRET":return new uW(t);case"INT":return new rW(t);case"CLI":case"STI":case"NOP":case"HLT":return new aW(t)}}function hW(t){for(const[e,n]of LS)if(n.unsigned===t.unsigned)return e;return null}function*pW(t,e){switch(e){case 0:return yield{type:"cpu:int.0"},!1;case 3:{yield{type:"cpu:int.3"};break}case 6:{if(yield{type:"cpu:int.6"},!("keyboard"in t.io))return yield{type:"cpu:error",error:new tt("device-not-connected","keyboard")},!1;if(!(yield*t.cpu.pushToStack("DL")))return!1;const n=yield*t.io.keyboard.readChar();if(yield*t.cpu.updateByteRegister("DL",n),yield*t.cpu.copyByteRegister("BL","ri.l"),yield*t.cpu.setMAR("ri"),yield*t.cpu.setMBR("DL"),!(yield*t.cpu.useBus("mem-write"))||!(yield*t.cpu.popFromStack("DL")))return!1;break}case 7:{if(yield{type:"cpu:int.7"},!("screen"in t.io))return yield{type:"cpu:error",error:new tt("device-not-connected","screen")},!1;if(!(yield*t.cpu.pushToStack("DL")))return!1;let n=192;for(;!t.cpu.getRegister("AL").isZero();){if(yield*t.cpu.copyWordRegister("BX","ri"),yield*t.cpu.setMAR("ri"),!(yield*t.cpu.useBus("mem-read"))||(yield*t.cpu.getMBR("DL"),yield*t.cpu.updateByteRegister("ri.l",F.fromUnsigned(n,8)),yield*t.cpu.setMAR("ri"),yield*t.cpu.setMBR("DL"),!(yield*t.cpu.useBus("mem-write"))))return!1;const i=t.cpu.getRegister("DL");yield*t.io.screen.sendChar(i),n++,yield*t.cpu.copyWordRegister("BX","left"),yield*t.cpu.updateWordRegister("right",F.fromUnsigned(1,16));const r=t.cpu.getRegister("BX").add(1);yield*t.cpu.aluExecute("ADD",r,{CF:!1,OF:r.signed<0,SF:r.signed<0,ZF:!1}),yield*t.cpu.copyWordRegister("result","BX"),yield*t.cpu.copyByteRegister("AL","left.l"),yield*t.cpu.updateByteRegister("right.l",F.fromUnsigned(1,8));const s=t.cpu.getRegister("AL").add(-1);yield*t.cpu.aluExecute("SUB",s,{CF:!1,OF:s.signed===F.maxSignedValue(8),SF:s.signed<0,ZF:s.isZero()}),yield*t.cpu.copyByteRegister("result.l","AL")}if(!(yield*t.cpu.popFromStack("DL")))return!1;break}default:throw new Error("Invalid interrupt number")}return!(!(yield*t.cpu.popFromStack("IP.l"))||!(yield*t.cpu.popFromStack("FLAGS.l")))}var Jc,je,ir,di,Ko,lc,fi,tr,TP;let mW=(TP=class extends oi{constructor(n){super(n);$e(this,Ko);$e(this,fi);$e(this,Jc,void 0);$e(this,je,void 0);$e(this,ir,void 0);$e(this,di,void 0);n.data==="unchanged"?(Z(this,je,E(n.previous.cpu,je)),Z(this,ir,E(n.previous.cpu,ir)),Z(this,di,E(n.previous.cpu,di))):(Z(this,je,{AX:F.zero(16),BX:F.zero(16),CX:F.zero(16),DX:F.zero(16),SP:F.zero(16),IP:F.zero(16),IR:F.zero(8),ri:F.zero(16),id:F.zero(16),left:F.zero(16),right:F.zero(16),result:F.zero(16),FLAGS:F.zero(16)}),Z(this,ir,F.zero(16)),Z(this,di,F.zero(8))),E(this,je).SP=F.fromUnsigned(we.MAX_ADDRESS,16),E(this,je).IP=F.fromUnsigned(32,16),E(this,je).ri=F.fromUnsigned(0,16),E(this,je).id=F.fromUnsigned(0,16),pt(this,fi,tr).call(this,"IF",!0),Z(this,Jc,new Map);for(const i of n.program.instructions){const r=fW(i);E(this,Jc).set(r.start.value,r)}}*run(){for(;;){const n=E(this,je).IP,i=hW(n);if(i!==null){if(!(yield*pW(this.computer,i)))return}else{const r=E(this,Jc).get(n.unsigned);if(!r){yield{type:"cpu:error",error:new tt("no-instruction",E(this,je).IP)};return}if(!(yield*r.execute(this.computer)))return}if(this.getFlag("IF")&&"pic"in this.computer.io&&this.computer.io.pic.isINTRActive()){yield{type:"cpu:cycle.interrupt"};const r=yield*this.computer.io.pic.handleINTR();yield*this.getMBR("ri.l"),yield*this.updateByteRegister("ri.h",F.zero(8)),yield*this.startInterrupt(r)}yield{type:"cpu:cycle.end"}}}*startInterrupt(n){return!(yield*this.pushToStack("FLAGS.l"))||(yield*this.updateFLAGS({IF:!1}),!(yield*this.pushToStack("IP.l")))||(yield*this.copyByteRegister("id.l","ri.l"),yield*this.setMAR("ri"),!(yield*this.useBus("mem-read")))?!1:(yield*this.getMBR("IP.l"),!0)}toJSON(){return{...Object.entries(E(this,je)).reduce((i,[r,s])=>({...i,[r]:s.toJSON()}),{}),MAR:E(this,ir).toJSON(),MBR:E(this,di).toJSON()}}getRegister(n){const[i,r]=tl(n);return r==="low"?E(this,je)[i].low:r==="high"?E(this,je)[i].high:E(this,je)[i]}*copyByteRegister(n,i){const r=this.getRegister(n);pt(this,Ko,lc).call(this,i,r),yield{type:"cpu:register.copy",size:8,src:n,dest:i}}*copyWordRegister(n,i){const r=this.getRegister(n);pt(this,Ko,lc).call(this,i,r.withHigh(F.zero(8))),yield{type:"cpu:register.copy",size:16,src:n,dest:i}}*updateByteRegister(n,i){i=typeof i=="function"?i(this.getRegister(n)):i,pt(this,Ko,lc).call(this,n,i),yield{type:"cpu:register.update",size:8,register:n,value:i}}*updateWordRegister(n,i){i=typeof i=="function"?i(this.getRegister(n)):i,pt(this,Ko,lc).call(this,n,i),yield{type:"cpu:register.update",size:16,register:n,value:i}}getFlag(n){switch(n){case"CF":return E(this,je).FLAGS.bit(1);case"ZF":return E(this,je).FLAGS.bit(0);case"SF":return E(this,je).FLAGS.bit(3);case"IF":return E(this,je).FLAGS.bit(4);case"OF":return E(this,je).FLAGS.bit(2);default:throw new TypeError(`Invalid flag ${n}`)}}*updateFLAGS(n){typeof n.CF=="boolean"&&pt(this,fi,tr).call(this,"CF",n.CF),typeof n.ZF=="boolean"&&pt(this,fi,tr).call(this,"ZF",n.ZF),typeof n.SF=="boolean"&&pt(this,fi,tr).call(this,"SF",n.SF),typeof n.IF=="boolean"&&pt(this,fi,tr).call(this,"IF",n.IF),typeof n.OF=="boolean"&&pt(this,fi,tr).call(this,"OF",n.OF),yield{type:"cpu:register.update",size:16,register:"FLAGS",value:E(this,je).FLAGS}}*aluExecute(n,i,r){E(this,je).result=i.is8bits()?E(this,je).result.withLow(i):i,typeof r.CF=="boolean"&&pt(this,fi,tr).call(this,"CF",r.CF),typeof r.ZF=="boolean"&&pt(this,fi,tr).call(this,"ZF",r.ZF),typeof r.SF=="boolean"&&pt(this,fi,tr).call(this,"SF",r.SF),typeof r.IF=="boolean"&&pt(this,fi,tr).call(this,"IF",r.IF),typeof r.OF=="boolean"&&pt(this,fi,tr).call(this,"OF",r.OF),yield{type:"cpu:alu.execute",operation:n,size:i.size,result:E(this,je).result,flags:E(this,je).FLAGS}}*setMAR(n){const i=this.getRegister(n);Z(this,ir,i.withHigh(F.zero(8))),yield{type:"cpu:mar.set",register:n}}*getMBR(n){pt(this,Ko,lc).call(this,n,E(this,di)),yield{type:"cpu:mbr.get",register:n}}*setMBR(n){const i=this.getRegister(n);Z(this,di,i),yield{type:"cpu:mbr.set",register:n}}*useBus(n){switch(n){case"mem-read":{yield{type:"cpu:rd.on"};const i=yield*this.computer.memory.read(E(this,ir));return i?(Z(this,di,i),yield{type:"bus:reset"},!0):!1}case"mem-write":return yield{type:"cpu:wr.on"},(yield*this.computer.memory.write(E(this,ir),E(this,di)))?(yield{type:"bus:reset"},!0):!1;case"io-read":{yield{type:"cpu:iom.on"};const i=yield*this.computer.io.chipSelect(E(this,ir).low);if(!i)return!1;yield{type:"cpu:rd.on"};const r=yield*this.computer.io.read(i);return r?(Z(this,di,r),yield{type:"bus:reset"},!0):!1}case"io-write":{yield{type:"cpu:iom.on"};const i=yield*this.computer.io.chipSelect(E(this,ir).low);return!i||(yield{type:"cpu:wr.on"},!(yield*this.computer.io.write(i,E(this,di))))?!1:(yield{type:"bus:reset"},!0)}case"intr-read":{if(!("pic"in this.computer.io))return!1;const i=yield*this.computer.io.pic.handleINTR();return Z(this,di,i),yield{type:"bus:reset"},!0}default:return n}}*pushToStack(n){let i=this.getRegister("SP");return we.inRange(i.unsigned-1)?we.inRange(i.unsigned-1)?(yield*this.setMAR("SP"),yield*this.setMBR(n),(yield*this.useBus("mem-write"))?(i=i.add(-1),yield*this.updateWordRegister("SP",i),!0):!1):(yield{type:"cpu:error",error:new tt("stack-overflow")},!1):(yield{type:"cpu:error",error:new tt("stack-overflow")},!1)}*popFromStack(n){let i=this.getRegister("SP");return we.inRange(i)?(i=i.add(1),yield*this.updateWordRegister("SP",i),yield*this.setMAR("SP"),(yield*this.useBus("mem-read"))?(yield*this.getMBR(n),!0):!1):(yield{type:"cpu:error",error:new tt("stack-underflow")},!1)}},Jc=new WeakMap,je=new WeakMap,ir=new WeakMap,di=new WeakMap,Ko=new WeakSet,lc=function(n,i){const[r,s]=tl(n);if(s===null){if(E(this,je)[r].size!==i.size)throw new TypeError(`Cannot set register ${n} with value ${i} of different size`);E(this,je)[r]=i}else{if(!i.is8bits())throw new TypeError(`Cannot set register ${n} with value ${i} of different size`);s==="low"?E(this,je)[r]=E(this,je)[r].withLow(i):E(this,je)[r]=E(this,je)[r].withHigh(i)}},fi=new WeakSet,tr=function(n,i){switch(n){case"CF":E(this,je).FLAGS=E(this,je).FLAGS.withBit(1,i);return;case"ZF":E(this,je).FLAGS=E(this,je).FLAGS.withBit(0,i);return;case"SF":E(this,je).FLAGS=E(this,je).FLAGS.withBit(3,i);return;case"IF":E(this,je).FLAGS=E(this,je).FLAGS.withBit(4,i);return;case"OF":E(this,je).FLAGS=E(this,je).FLAGS.withBit(2,i);return;default:throw new TypeError(`Invalid flag ${n}`)}},TP),zS=class extends oi{*tick(){yield{type:"clock:tick"},yield*this.computer.io.timer.tick()}toJSON(){return null}},US=class extends oi{*press(){yield{type:"f10:press"},yield*this.computer.io.pic.interrupt(0)}toJSON(){return null}};var Zc,OP;let Bv=(OP=class extends oi{constructor(){super(...arguments);$e(this,Zc,null)}*readChar(){yield{type:"keyboard:listen-key"};const n=E(this,Zc);if(!n)throw new Error("INT 6 was not given a valid 8-bit character!");return yield{type:"keyboard:read",char:n},Z(this,Zc,null),n}setLastCharRead(n){Z(this,Zc,n)}toJSON(){return null}},Zc=new WeakMap,OP);var Ri,NP;let jv=(NP=class extends oi{constructor(n){super(n);$e(this,Ri,void 0);n.data==="unchanged"&&"screen"in n.previous.io?Z(this,Ri,E(n.previous.io.screen,Ri)):Z(this,Ri,"")}clear(){return this.sendChar(F.fromUnsigned(12,8))}*sendChar(n){switch(n.unsigned){case 8:Z(this,Ri,E(this,Ri).slice(0,-1));break;case 10:Z(this,Ri,E(this,Ri)+`
`);break;case 12:Z(this,Ri,"");break;default:Z(this,Ri,E(this,Ri)+IS(n.unsigned));break}yield{type:"screen:send-char",char:n,output:E(this,Ri)}}toJSON(){return E(this,Ri)}},Ri=new WeakMap,NP);class Fv extends oi{}var ks,qs,hi,Gn,Nr,Qc,bm,eu,xm;let VS=(ks=class extends Fv{constructor(n){super(n);$e(this,Qc);$e(this,eu);$e(this,qs,void 0);$e(this,hi,void 0);$e(this,Gn,void 0);$e(this,Nr,void 0);Z(this,qs,F.fromUnsigned(255,8)),Z(this,hi,F.fromUnsigned(0,8)),Z(this,Gn,F.fromUnsigned(0,8)),n.data==="unchanged"&&"pic"in n.previous.io?Z(this,Nr,E(n.previous.io.pic,Nr)):n.data==="randomize"?Z(this,Nr,new Array(ks.LINES).fill(F.zero(8)).map(()=>F.random(8))):Z(this,Nr,new Array(ks.LINES).fill(F.zero(8)))}chipSelect(n){const r=4+ks.LINES;return n=Number(n)-32,n<0||n>=r?null:n===0?"EOI":n===1?"IMR":n===2?"IRR":n===3?"ISR":`INT${n-4}`}*read(n){yield{type:"pic:read",register:n};let i;if(n==="EOI")i=F.zero(8);else if(n==="IMR")i=E(this,qs);else if(n==="IRR")i=E(this,hi);else if(n==="ISR")i=E(this,Gn);else{const r=Number(n.slice(3));i=E(this,Nr)[r]}return yield{type:"pic:read.ok",value:i},i}*write(n,i){if(yield{type:"pic:write",register:n,value:i},n==="EOI")E(this,Gn).isZero()||(yield{type:"pic:intr.off"},Z(this,Gn,F.zero(8)),yield{type:"pic:register.update",register:"ISR",value:E(this,Gn)},yield*pt(this,eu,xm).call(this));else if(n==="IMR")Z(this,qs,i),yield{type:"pic:register.update",register:"IMR",value:E(this,qs)},yield*pt(this,eu,xm).call(this);else if(!(n==="IRR"||n==="ISR")){const r=Number(n.slice(3));E(this,Nr)[r]=i,yield{type:"pic:register.update",register:n,value:i}}yield{type:"pic:write.ok"}}*interrupt(n){if(n<0||n>=ks.LINES)throw new RangeError(`Invalid interrupt line ${n}`);E(this,hi).bit(n)||(Z(this,hi,E(this,hi).withBit(n,!0)),yield{type:"pic:register.update",register:"IRR",value:E(this,hi)},yield*pt(this,eu,xm).call(this))}isINTRActive(){return E(this,Gn).isZero()&&pt(this,Qc,bm).call(this)!==null}*handleINTR(){if(yield{type:"cpu:inta.on"},!E(this,Gn).isZero())throw new Error("INTR line is active but ISR is not zero");const n=pt(this,Qc,bm).call(this);if(n===null)throw new Error("INTR line is active but no interrupt is pending");Z(this,Gn,E(this,Gn).withBit(n,!0)),yield{type:"pic:register.update",register:"ISR",value:E(this,Gn)},Z(this,hi,E(this,hi).withBit(n,!1)),yield{type:"pic:register.update",register:"IRR",value:E(this,hi)},yield{type:"cpu:inta.off"},yield{type:"cpu:inta.on"};const i=E(this,Nr)[n];return yield{type:"pic:int.send",number:i},yield{type:"cpu:inta.off"},yield{type:"pic:intr.off"},i}toJSON(){return{IMR:E(this,qs).toJSON(),IRR:E(this,hi).toJSON(),ISR:E(this,Gn).toJSON(),lines:E(this,Nr).map(n=>n.toJSON())}}},qs=new WeakMap,hi=new WeakMap,Gn=new WeakMap,Nr=new WeakMap,Qc=new WeakSet,bm=function(){for(let n=0;n<ks.LINES;n++)if(E(this,hi).bit(n)&&!E(this,qs).bit(n))return n;return null},eu=new WeakSet,xm=function*(){E(this,Gn).isZero()&&pt(this,Qc,bm).call(this)!==null&&(yield{type:"pic:intr.on"})},ae(ks,"LINES",8),ks);var ms,Xo,RP;let HS=(RP=class extends Fv{constructor(n){super(n);$e(this,ms,void 0);$e(this,Xo,void 0);Z(this,ms,F.zero(8)),Z(this,Xo,F.zero(8))}chipSelect(n){return n=Number(n),n===16?"CONT":n===17?"COMP":null}*read(n){yield{type:"timer:read",register:n};let i;if(n==="CONT")i=E(this,ms);else if(n==="COMP")i=E(this,Xo);else return n;return yield{type:"timer:read.ok",value:i},i}*write(n,i){if(yield{type:"timer:write",register:n,value:i},n==="CONT")Z(this,ms,i);else if(n==="COMP")Z(this,Xo,i);else return n;yield{type:"timer:register.update",register:n,value:i},yield{type:"timer:write.ok"}}*tick(){const n=E(this,ms).unsigned===F.maxValue(8)?F.zero(8):E(this,ms).add(1);Z(this,ms,n),yield{type:"timer:register.update",register:"CONT",value:n},E(this,Xo).equals(n)?(yield{type:"timer:int.on"},yield*this.computer.io.pic.interrupt(1)):yield{type:"timer:int.off"}}toJSON(){return{CONT:E(this,ms).toJSON(),COMP:E(this,Xo).toJSON()}}},ms=new WeakMap,Xo=new WeakMap,RP);var gs,Kn,MP;let gW=(MP=class extends Fv{constructor(n){super(n);$e(this,gs,void 0);$e(this,Kn,void 0);n.data==="unchanged"&&"handshake"in n.previous.io?Z(this,gs,F.zero(8)):n.data==="randomize"?Z(this,gs,F.random(8)):Z(this,gs,F.zero(8)),Z(this,Kn,F.zero(8))}get interrupts(){return E(this,Kn).bit(7)}get DATA(){return E(this,gs)}chipSelect(n){return n=Number(n),n===64?"DATA":n===65?"STATE":null}*read(n){yield{type:"handshake:read",register:n};let i;if(n==="DATA")i=E(this,gs);else if(n==="STATE")i=E(this,Kn);else return n;return yield{type:"handshake:read.ok",value:i},i}*write(n,i){if(yield{type:"handshake:write",register:n,value:i},n==="DATA")Z(this,gs,i),yield{type:"handshake:register.update",register:n,value:i},yield*this.computer.io.printer.setStrobe(!0),yield*this.computer.io.printer.setStrobe(!1);else if(n==="STATE")i=i.withBit(0,this.computer.io.printer.busy),Z(this,Kn,i),yield{type:"handshake:register.update",register:n,value:i},E(this,Kn).bit(1)?(yield*this.computer.io.printer.setStrobe(!0),yield*this.computer.io.printer.setStrobe(!1),Z(this,Kn,E(this,Kn).withBit(1,!1)),yield{type:"handshake:register.update",register:n,value:E(this,Kn)}):this.interrupts&&!this.computer.io.printer.busy?(yield{type:"handshake:int.on"},yield*this.computer.io.pic.interrupt(2)):yield{type:"handshake:int.off"};else return n;yield{type:"handshake:write.ok"}}*updateBusy(n){Z(this,Kn,E(this,Kn).withBit(0,n)),yield{type:"handshake:register.update",register:"STATE",value:E(this,Kn)},this.interrupts&&!n?(yield{type:"handshake:int.on"},yield*this.computer.io.pic.interrupt(2)):yield{type:"handshake:int.off"}}toJSON(){return{DATA:E(this,gs).toJSON(),STATE:E(this,Kn).toJSON()}}},gs=new WeakMap,Kn=new WeakMap,MP);var rr,Ys,qo;const qd=class qd extends oi{constructor(n){super(n);$e(this,rr,void 0);$e(this,Ys,void 0);$e(this,qo,!1);this.computer=n.computer,n.data==="unchanged"&&"printer"in n.previous.io?(Z(this,rr,E(n.previous.io.printer,rr)),Z(this,Ys,E(n.previous.io.printer,Ys)),Z(this,qo,E(n.previous.io.printer,qo))):(Z(this,rr,[]),Z(this,Ys,""),Z(this,qo,!1))}get busy(){return E(this,rr).length>=qd.BUFFER_SIZE}*setStrobe(n){const i=E(this,qo);if(i===n)return;if(Z(this,qo,n),n?yield{type:"printer:strobe.on"}:yield{type:"printer:strobe.off"},n&&!i&&!this.busy){const s=yield*this.readData();E(this,rr).push(s),yield{type:"printer:buffer.add",char:s},yield*this.updateBusy(!0),this.busy||(yield*this.updateBusy(!1))}}*clear(){Z(this,Ys,""),yield{type:"printer:paper.replace"}}*print(){if(E(this,rr).length===0)return;const[n,...i]=E(this,rr);if(Z(this,rr,i),yield{type:"printer:buffer.pop",char:n},i.length===qd.BUFFER_SIZE-1&&(yield*this.updateBusy(!1)),n.unsigned===12)yield*this.clear();else{const r=IS(n.unsigned);Z(this,Ys,E(this,Ys)+r),yield{type:"printer:paper.print",char:r}}}toJSON(){return{paper:E(this,Ys),buffer:[...E(this,rr).map(n=>n.unsigned)]}}};rr=new WeakMap,Ys=new WeakMap,qo=new WeakMap,ae(qd,"BUFFER_SIZE",5);let Ng=qd,vW=class extends Ng{*readData(){const e=this.computer.io.handshake.DATA;return yield{type:"printer:data.read",char:e},e}*updateBusy(e){e?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*this.computer.io.handshake.updateBusy(e)}},yW=class extends oi{constructor(n){super(n);ae(this,"clock");ae(this,"f10");ae(this,"keyboard");ae(this,"printer");ae(this,"screen");ae(this,"handshake");ae(this,"pic");ae(this,"timer");this.clock=new zS(n),this.f10=new US(n),this.keyboard=new Bv(n),this.printer=new vW(n),this.screen=new jv(n),this.handshake=new gW(n),this.pic=new VS(n),this.timer=new HS(n)}*chipSelect(n){const i=this.handshake.chipSelect(n);if(i)return yield{type:"bus:io.selected",chip:"handshake"},{chip:"handshake",register:i};const r=this.pic.chipSelect(n);if(r)return yield{type:"bus:io.selected",chip:"pic"},{chip:"pic",register:r};const s=this.timer.chipSelect(n);return s?(yield{type:"bus:io.selected",chip:"timer"},{chip:"timer",register:s}):(yield{type:"bus:io.error",error:new tt("io-memory-not-connected",n)},null)}*read(n){const{chip:i,register:r}=n;return i==="handshake"?yield*this.handshake.read(r):i==="pic"?yield*this.pic.read(r):i==="timer"?yield*this.timer.read(r):(yield{type:"bus:io.error",error:new tt("device-not-connected",i)},null)}*write(n,i){const{chip:r,register:s}=n;return r==="handshake"?(yield*this.handshake.write(s,i),!0):r==="pic"?(yield*this.pic.write(s,i),!0):r==="timer"?(yield*this.timer.write(s,i),!0):(yield{type:"bus:io.error",error:new tt("device-not-connected",r)},!1)}toJSON(){return{clock:this.clock.toJSON(),f10:this.f10.toJSON(),keyboard:this.keyboard.toJSON(),printer:this.printer.toJSON(),screen:this.screen.toJSON(),handshake:this.handshake.toJSON(),pic:this.pic.toJSON(),timer:this.timer.toJSON()}}};class wW extends oi{constructor(n){super(n);ae(this,"keyboard");ae(this,"screen");this.keyboard=new Bv(n),this.screen=new jv(n)}*chipSelect(n){return yield{type:"bus:io.error",error:new tt("io-memory-not-connected",n)},null}*read(n){return yield{type:"bus:io.error",error:new tt("device-not-connected",n.chip)},null}*write(n){return yield{type:"bus:io.error",error:new tt("device-not-connected",n.chip)},!1}toJSON(){return{keyboard:this.keyboard.toJSON(),screen:this.screen.toJSON()}}}class bW extends oi{*chipSelect(e){return yield{type:"bus:io.error",error:new tt("io-memory-not-connected",e)},null}*read(e){return yield{type:"bus:io.error",error:new tt("device-not-connected",e.chip)},null}*write(e){return yield{type:"bus:io.error",error:new tt("device-not-connected",e.chip)},!1}toJSON(){return{}}}class zM extends Fv{constructor(n){super(n);ae(this,"PA");ae(this,"PB");ae(this,"CA");ae(this,"CB");n.data==="unchanged"&&"pio"in n.previous.io?(this.PA=n.previous.io.pio.PA,this.PB=n.previous.io.pio.PB,this.CA=n.previous.io.pio.CA,this.CB=n.previous.io.pio.CB):n.data==="randomize"?(this.PA=F.random(8),this.PB=F.random(8),this.CA=F.random(8),this.CB=F.random(8)):(this.PA=F.zero(8),this.PB=F.zero(8),this.CA=F.zero(8),this.CB=F.zero(8))}chipSelect(n){return n=Number(n),n===48?"PA":n===49?"PB":n===50?"CA":n===51?"CB":null}*read(n){yield{type:"pio:read",register:n};let i;if(n==="PA")i=this.PA;else if(n==="PB")i=this.PB;else if(n==="CA")i=this.CA;else if(n==="CB")i=this.CB;else return n;return yield{type:"pio:read.ok",value:i},i}*write(n,i){if(yield{type:"pio:write",register:n,value:i},n==="PA")this.PA=i;else if(n==="PB")this.PB=i;else if(n==="CA")this.CA=i;else if(n==="CB")this.CB=i;else return n;yield{type:"pio:register.update",register:n,value:i},n==="PA"||n==="CA"?yield*this.updatePort("A"):yield*this.updatePort("B"),yield{type:"pio:write.ok"}}line(n,i){return n==="A"?this.CA.bit(i)?"input":"output":this.CB.bit(i)?"input":"output"}toJSON(){return{PA:this.PA.toJSON(),PB:this.PB.toJSON(),CA:this.CA.toJSON(),CB:this.CB.toJSON()}}}let xW=class extends zM{constructor(e){super(e),this.PA=this.PA.withBit(1,!1)}readData(){const e=this.PB.unsigned&~this.CB.unsigned;return F.fromUnsigned(e,8)}*updatePort(e){if(e==="B")return;let n=this.PA.unsigned;const i=this.CA.unsigned,r=this.computer.io.printer.busy;n=n&~i,this.line("A",0)==="input"&&r&&(n|=1),n!==this.PA.unsigned&&(this.PA=F.fromUnsigned(n,8),yield{type:"pio:register.update",register:"PA",value:this.PA}),this.line("A",1)==="output"&&(yield*this.computer.io.printer.setStrobe(this.PA.bit(1)))}},SW=class extends Ng{*readData(){const e=this.computer.io.pio.readData();return yield{type:"printer:data.read",char:e},e}*updateBusy(e){e?yield{type:"printer:busy.on"}:yield{type:"printer:busy.off"},yield*this.computer.io.pio.updatePort("A")}};class kW extends oi{constructor(n){super(n);ae(this,"clock");ae(this,"f10");ae(this,"keyboard");ae(this,"printer");ae(this,"screen");ae(this,"pic");ae(this,"pio");ae(this,"timer");this.clock=new zS(n),this.f10=new US(n),this.keyboard=new Bv(n),this.printer=new SW(n),this.screen=new jv(n),this.pic=new VS(n),this.pio=new xW(n),this.timer=new HS(n)}*chipSelect(n){const i=this.pic.chipSelect(n);if(i)return yield{type:"bus:io.selected",chip:"pic"},{chip:"pic",register:i};const r=this.pio.chipSelect(n);if(r)return yield{type:"bus:io.selected",chip:"pio"},{chip:"pio",register:r};const s=this.timer.chipSelect(n);return s?(yield{type:"bus:io.selected",chip:"timer"},{chip:"timer",register:s}):(yield{type:"bus:io.error",error:new tt("io-memory-not-connected",n)},null)}*read(n){const{chip:i,register:r}=n;return i==="pic"?yield*this.pic.read(r):i==="pio"?yield*this.pio.read(r):i==="timer"?yield*this.timer.read(r):(yield{type:"bus:io.error",error:new tt("device-not-connected",i)},null)}*write(n,i){const{chip:r,register:s}=n;return r==="pic"?(yield*this.pic.write(s,i),!0):r==="pio"?(yield*this.pio.write(s,i),!0):r==="timer"?(yield*this.timer.write(s,i),!0):(yield{type:"bus:io.error",error:new tt("device-not-connected",r)},!1)}toJSON(){return{clock:this.clock.toJSON(),f10:this.f10.toJSON(),keyboard:this.keyboard.toJSON(),printer:this.printer.toJSON(),screen:this.screen.toJSON(),pic:this.pic.toJSON(),pio:this.pio.toJSON(),timer:this.timer.toJSON()}}}var Js,DP;let _W=(DP=class extends oi{constructor(n){super(n);$e(this,Js,void 0);n.data==="unchanged"&&"leds"in n.previous.io?Z(this,Js,E(n.previous.io.leds,Js)):n.data==="randomize"?Z(this,Js,F.random(8)):Z(this,Js,F.zero(8))}get state(){return E(this,Js)}*update(n){yield{type:"leds:update",state:n}}toJSON(){return E(this,Js).toJSON()}},Js=new WeakMap,DP),CW=class extends zM{*updatePort(e){if(e==="A"){const n=this.computer.io.switches.state.unsigned;let i=this.PA.unsigned;const r=this.CA.unsigned;i=n&r|i&~r,i!==this.PA.unsigned&&(this.PA=F.fromUnsigned(i,8),yield{type:"pio:register.update",register:"PA",value:this.PA})}else{let n=this.PB.unsigned;const i=this.CB.unsigned;n=n&~i,yield*this.computer.io.leds.update(F.fromUnsigned(n,8))}}};var sr,IP;let EW=(IP=class extends oi{constructor(n){super(n);$e(this,sr,void 0);this.computer=n.computer,n.data==="unchanged"&&"switches"in n.previous.io?Z(this,sr,E(n.previous.io.switches,sr)):n.data==="randomize"?Z(this,sr,F.random(8)):Z(this,sr,F.zero(8))}get state(){return E(this,sr)}*toggle(n){Z(this,sr,E(this,sr).withBit(n,!E(this,sr).bit(n))),yield{type:"switches:toggle",index:n},yield*this.computer.io.pio.updatePort("A")}toJSON(){return E(this,sr).toJSON()}},sr=new WeakMap,IP);class AW extends oi{constructor(n){super(n);ae(this,"clock");ae(this,"f10");ae(this,"keyboard");ae(this,"leds");ae(this,"screen");ae(this,"switches");ae(this,"pic");ae(this,"pio");ae(this,"timer");this.clock=new zS(n),this.f10=new US(n),this.keyboard=new Bv(n),this.leds=new _W(n),this.screen=new jv(n),this.switches=new EW(n),this.pic=new VS(n),this.pio=new CW(n),this.timer=new HS(n)}*chipSelect(n){const i=this.pic.chipSelect(n);if(i)return yield{type:"bus:io.selected",chip:"pic"},{chip:"pic",register:i};const r=this.pio.chipSelect(n);if(r)return yield{type:"bus:io.selected",chip:"pio"},{chip:"pio",register:r};const s=this.timer.chipSelect(n);return s?(yield{type:"bus:io.selected",chip:"timer"},{chip:"timer",register:s}):(yield{type:"bus:io.error",error:new tt("io-memory-not-connected",n)},null)}*read(n){const{chip:i,register:r}=n;return i==="pic"?yield*this.pic.read(r):i==="pio"?yield*this.pio.read(r):i==="timer"?yield*this.timer.read(r):(yield{type:"bus:io.error",error:new tt("device-not-connected",i)},null)}*write(n,i){const{chip:r,register:s}=n;return r==="pic"?(yield*this.pic.write(s,i),!0):r==="pio"?(yield*this.pio.write(s,i),!0):r==="timer"?(yield*this.timer.write(s,i),!0):(yield{type:"bus:io.error",error:new tt("device-not-connected",r)},!1)}toJSON(){return{clock:this.clock.toJSON(),f10:this.f10.toJSON(),keyboard:this.keyboard.toJSON(),leds:this.leds.toJSON(),screen:this.screen.toJSON(),switches:this.switches.toJSON(),pic:this.pic.toJSON(),pio:this.pio.toJSON(),timer:this.timer.toJSON()}}}var bl,pi,tu,Zs;let PW=(bl=class extends oi{constructor(n){super(n);$e(this,pi,void 0);$e(this,tu,void 0);$e(this,Zs,void 0);n.data==="unchanged"?Z(this,pi,E(n.previous.memory,pi)):n.data==="randomize"?Z(this,pi,new Uint8Array(bl.SIZE).map(()=>F.zero(8).unsigned)):Z(this,pi,new Uint8Array(bl.SIZE)),Z(this,Zs,new Set);for(const[i,r]of LS){const s=i;E(this,pi).set(r.toUint8Array(),s),E(this,pi).set(F.zero(16).toUint8Array(),s+2),E(this,Zs).add(s),E(this,Zs).add(s+1),E(this,Zs).add(s+2),E(this,Zs).add(s+3)}for(const i of n.program.data){let r=i.start.value;for(const s of i.getValues())s!==Cd&&E(this,pi).set(s.toUint8Array(),r),r+=i.size/8}Z(this,tu,new Set);for(const i of n.program.instructions){E(this,pi).set(i.toBytes(),i.start.value);for(let r=0;r<i.length;r++)E(this,tu).add(i.start.value+r)}}*read(n){if(n=Number(n),yield{type:"memory:read",address:n},!we.inRange(n))return yield{type:"memory:read.error",error:new tt("address-out-of-range",n)},null;const i=F.fromUnsigned(E(this,pi).at(n),8);return yield{type:"memory:read.ok",address:we.from(n),value:i},i}*write(n,i){return n=Number(n),yield{type:"memory:write",address:n,value:i},we.inRange(n)?E(this,tu).has(n)?(yield{type:"memory:write.error",error:new tt("address-has-instruction",n)},!1):E(this,Zs).has(n)?(yield{type:"memory:write.error",error:new tt("address-is-reserved",n)},!1):(E(this,pi).set([i.unsigned],n),yield{type:"memory:write.ok",address:we.from(n),value:i},!0):(yield{type:"memory:write.error",error:new tt("address-out-of-range",n)},!1)}toJSON(){return[...E(this,pi)]}},pi=new WeakMap,tu=new WeakMap,Zs=new WeakMap,ae(bl,"SIZE",we.MAX_ADDRESS+1),bl);class j2{constructor(e){ae(this,"cpu");ae(this,"memory");ae(this,"io");const n={computer:this,...e};switch(this.cpu=new mW(n),this.memory=new PW(n),e.devices){case"no-devices":{this.io=new bW(n);break}case"keyboard-and-screen":{this.io=new wW(n);break}case"pio-switches-and-leds":{this.io=new AW(n);break}case"pio-printer":{this.io=new kW(n);break}case"handshake":{this.io=new yW(n);break}default:{const i=e.devices;throw new Error(`Unknown devices configuration: ${i}`)}}}toJSON(){return{cpu:this.cpu.toJSON(),memory:this.memory.toJSON(),io:this.io.toJSON()}}}var ct;class $W{constructor(){$e(this,ct,new j2({program:{data:[],instructions:[]},devices:"pio-switches-and-leds",data:"clean"}))}loadProgram(e){Z(this,ct,new j2({...e,previous:E(this,ct)}))}getComputerState(){var e;return((e=E(this,ct))==null?void 0:e.toJSON())||null}startCPU(){if(!E(this,ct))throw new tt("no-program");return E(this,ct).cpu.run()}get devices(){if(!E(this,ct))throw new Error("No computer loaded!");return{clock:{connected:()=>"clock"in E(this,ct).io,tick:()=>{if("clock"in E(this,ct).io)return E(this,ct).io.clock.tick();console.warn("Called clock.tick() when no clock was connected to the computer")}},f10:{connected:()=>"f10"in E(this,ct).io,press:()=>{if("f10"in E(this,ct).io)return E(this,ct).io.f10.press();console.warn("Called f10.press() when no f10 was connected to the computer")}},keyboard:{connected:()=>"keyboard"in E(this,ct).io,readChar:e=>{if("keyboard"in E(this,ct).io)return E(this,ct).io.keyboard.setLastCharRead(e);console.warn("Called keyboard.press() when no keyboard was connected to the computer")}},leds:{connected:()=>"leds"in E(this,ct).io},printer:{connected:()=>"printer"in E(this,ct).io,clear:()=>{if("printer"in E(this,ct).io)return E(this,ct).io.printer.clear();console.warn("No printer connected to the computer!")},print:()=>{if("printer"in E(this,ct).io)return E(this,ct).io.printer.print();console.warn("No printer connected to the computer!")}},screen:{connected:()=>"screen"in E(this,ct).io,clear:()=>{if("screen"in E(this,ct).io)return E(this,ct).io.screen.clear();console.warn("Called screen.clear() when no screen was connected to the computer")}},switches:{connected:()=>"switches"in E(this,ct).io,toggle:e=>{if("switches"in E(this,ct).io)return E(this,ct).io.switches.toggle(e);console.warn("Called switches.toggle() when no switches were connected to the computer")}}}}}ct=new WeakMap;const UM=new fh;function VM(t){window.codemirror&&window.codemirror.dispatch({effects:UM.reconfigure(Ye.readOnly.of(t))})}const h1=Ke.define(),TW=si.define({create(){return Xe.none},update(t,e){let n=t.map(e.changes);for(const i of e.effects)i.is(h1)&&(n=Xe.none,i.value!==null&&(n=n.update({add:[OW.range(i.value)]})));return n},provide:t=>Pe.decorations.from(t)}),OW=Xe.line({class:"!bg-mantis-400/10"});function HM(t){if(window.codemirror)if(t===null)window.codemirror.dispatch({effects:h1.of(null)});else{const e=window.codemirror.state.doc.lineAt(t).from;window.codemirror.dispatch({effects:h1.of(e)})}}const WM=Oc.init("phc_Iq0zy6d8IRJY2ts0uHNWlSbectCsUgQK77MLj3ypSdM",{api_host:"https://us.posthog.com",autocapture:!1,capture_pageview:!0,persistence:"memory"})||Oc,wy=Ce(F.zero(16)),by=Ce(F.zero(16)),xy=Ce(F.zero(16)),Sy=Ce(F.zero(16)),ky=Ce(F.zero(16)),_y=Ce(F.zero(16)),NW=Ce(F.zero(8)),Cy=Ce(F.zero(16)),Ey=Ce(F.zero(16)),Ay=Ce(F.zero(16)),Py=Ce(F.zero(16)),$y=Ce(F.zero(16)),Ty=Ce(F.zero(16)),GM=Ce(F.zero(16)),Rg=Ce(F.zero(8)),Jt=Ce(null),Zi=t=>Ce(e=>e(t).low,(e,n,i)=>{const r=e(t),s=typeof i=="function"?i(r.low):i;n(t,r.withLow(s))}),Qi=t=>Ce(e=>e(t).high,(e,n,i)=>{const r=e(t),s=typeof i=="function"?i(r.high):i;n(t,r.withHigh(s))}),Et={AX:wy,AL:Zi(wy),AH:Qi(wy),BX:by,BL:Zi(by),BH:Qi(by),CX:xy,CL:Zi(xy),CH:Qi(xy),DX:Sy,DL:Zi(Sy),DH:Qi(Sy),SP:ky,"SP.l":Zi(ky),"SP.h":Qi(ky),IP:_y,"IP.l":Zi(_y),"IP.h":Qi(_y),IR:NW,ri:Cy,"ri.l":Zi(Cy),"ri.h":Qi(Cy),id:Ey,"id.l":Zi(Ey),"id.h":Qi(Ey),left:Ay,"left.l":Zi(Ay),"left.h":Qi(Ay),right:Py,"right.l":Zi(Py),"right.h":Qi(Py),result:$y,"result.l":Zi($y),"result.h":Qi($y),FLAGS:Ty,"FLAGS.l":Zi(Ty),"FLAGS.h":Qi(Ty),MAR:GM,MBR:Rg},us=Ce({phase:"stopped"}),KM=Ce("ADD");function RW(t){q.set(Et.AX,F.fromUnsigned(t.cpu.AX,16)),q.set(Et.BX,F.fromUnsigned(t.cpu.BX,16)),q.set(Et.CX,F.fromUnsigned(t.cpu.CX,16)),q.set(Et.DX,F.fromUnsigned(t.cpu.DX,16)),q.set(Et.SP,F.fromUnsigned(t.cpu.SP,16)),q.set(Et.IP,F.fromUnsigned(t.cpu.IP,16)),q.set(Et.IR,F.fromUnsigned(t.cpu.IR,8)),q.set(Et.ri,F.fromUnsigned(t.cpu.ri,16)),q.set(Et.id,F.fromUnsigned(t.cpu.id,16)),q.set(Et.left,F.fromUnsigned(t.cpu.left,16)),q.set(Et.right,F.fromUnsigned(t.cpu.right,16)),q.set(Et.result,F.fromUnsigned(t.cpu.result,16)),t.cpu.FLAGS=16,q.set(Et.FLAGS,F.fromUnsigned(t.cpu.FLAGS,16)),q.set(Et.MAR,F.fromUnsigned(t.cpu.MAR,16)),q.set(Et.MBR,F.fromUnsigned(t.cpu.MBR,8)),q.set(us,{phase:"stopped"})}var MW=Object.defineProperty,DW=(t,e)=>{for(var n in e)MW(t,n,{get:e[n],enumerable:!0})},Zr={};DW(Zr,{assign:()=>jW,colors:()=>ga,createStringInterpolator:()=>JS,skipAnimation:()=>tD,to:()=>eD,willAdvance:()=>ZS});var WS=xh(),Ve=t=>bh(t,WS),GS=xh();Ve.write=t=>bh(t,GS);var zv=xh();Ve.onStart=t=>bh(t,zv);var KS=xh();Ve.onFrame=t=>bh(t,KS);var XS=xh();Ve.onFinish=t=>bh(t,XS);var Hc=[];Ve.setTimeout=(t,e)=>{const n=Ve.now()+e,i=()=>{const s=Hc.findIndex(o=>o.cancel==i);~s&&Hc.splice(s,1),ia-=~s?1:0},r={time:n,handler:t,cancel:i};return Hc.splice(XM(n),0,r),ia+=1,qM(),r};var XM=t=>~(~Hc.findIndex(e=>e.time>t)||~Hc.length);Ve.cancel=t=>{zv.delete(t),KS.delete(t),XS.delete(t),WS.delete(t),GS.delete(t)};Ve.sync=t=>{p1=!0,Ve.batchedUpdates(t),p1=!1};Ve.throttle=t=>{let e;function n(){try{t(...e)}finally{e=null}}function i(...r){e=r,Ve.onStart(n)}return i.handler=t,i.cancel=()=>{zv.delete(n),e=null},i};var qS=typeof window<"u"?window.requestAnimationFrame:()=>{};Ve.use=t=>qS=t;Ve.now=typeof performance<"u"?()=>performance.now():Date.now;Ve.batchedUpdates=t=>t();Ve.catch=console.error;Ve.frameLoop="always";Ve.advance=()=>{Ve.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):JM()};var na=-1,ia=0,p1=!1;function bh(t,e){p1?(e.delete(t),t(0)):(e.add(t),qM())}function qM(){na<0&&(na=0,Ve.frameLoop!=="demand"&&qS(YM))}function IW(){na=-1}function YM(){~na&&(qS(YM),Ve.batchedUpdates(JM))}function JM(){const t=na;na=Ve.now();const e=XM(na);if(e&&(ZM(Hc.splice(0,e),n=>n.handler()),ia-=e),!ia){IW();return}zv.flush(),WS.flush(t?Math.min(64,na-t):16.667),KS.flush(),GS.flush(),XS.flush()}function xh(){let t=new Set,e=t;return{add(n){ia+=e==t&&!t.has(n)?1:0,t.add(n)},delete(n){return ia-=e==t&&t.has(n)?1:0,t.delete(n)},flush(n){e.size&&(t=new Set,ia-=e.size,ZM(e,i=>i(n)&&t.add(i)),ia+=t.size,e=t)}}}function ZM(t,e){t.forEach(n=>{try{e(n)}catch(i){Ve.catch(i)}})}function LW(){}var BW=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),ge={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function Bs(t,e){if(ge.arr(t)){if(!ge.arr(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return t===e}var Pn=(t,e)=>t.forEach(e);function Oa(t,e,n){if(ge.arr(t)){for(let i=0;i<t.length;i++)e.call(n,t[i],`${i}`);return}for(const i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i)}var ra=t=>ge.und(t)?[]:ge.arr(t)?t:[t];function QM(t,e){if(t.size){const n=Array.from(t);t.clear(),Pn(n,e)}}var wp=(t,...e)=>QM(t,n=>n(...e)),YS=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),JS,eD,ga=null,tD=!1,ZS=LW,jW=t=>{t.to&&(eD=t.to),t.now&&(Ve.now=t.now),t.colors!==void 0&&(ga=t.colors),t.skipAnimation!=null&&(tD=t.skipAnimation),t.createStringInterpolator&&(JS=t.createStringInterpolator),t.requestAnimationFrame&&Ve.use(t.requestAnimationFrame),t.batchedUpdates&&(Ve.batchedUpdates=t.batchedUpdates),t.willAdvance&&(ZS=t.willAdvance),t.frameLoop&&(Ve.frameLoop=t.frameLoop)},Hd=new Set,dr=[],Oy=[],Mg=0,Uv={get idle(){return!Hd.size&&!dr.length},start(t){Mg>t.priority?(Hd.add(t),Ve.onStart(FW)):(nD(t),Ve(m1))},advance:m1,sort(t){if(Mg)Ve.onFrame(()=>Uv.sort(t));else{const e=dr.indexOf(t);~e&&(dr.splice(e,1),iD(t))}},clear(){dr=[],Hd.clear()}};function FW(){Hd.forEach(nD),Hd.clear(),Ve(m1)}function nD(t){dr.includes(t)||iD(t)}function iD(t){dr.splice(zW(dr,e=>e.priority>t.priority),0,t)}function m1(t){const e=Oy;for(let n=0;n<dr.length;n++){const i=dr[n];Mg=i.priority,i.idle||(ZS(i),i.advance(t),i.idle||e.push(i))}return Mg=0,Oy=dr,Oy.length=0,dr=e,dr.length>0}function zW(t,e){const n=t.findIndex(e);return n<0?t.length:n}var UW=(t,e,n)=>Math.min(Math.max(n,t),e),VW={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},jr="[-+]?\\d*\\.?\\d+",Dg=jr+"%";function Vv(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var HW=new RegExp("rgb"+Vv(jr,jr,jr)),WW=new RegExp("rgba"+Vv(jr,jr,jr,jr)),GW=new RegExp("hsl"+Vv(jr,Dg,Dg)),KW=new RegExp("hsla"+Vv(jr,Dg,Dg,jr)),XW=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,qW=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,YW=/^#([0-9a-fA-F]{6})$/,JW=/^#([0-9a-fA-F]{8})$/;function ZW(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=YW.exec(t))?parseInt(e[1]+"ff",16)>>>0:ga&&ga[t]!==void 0?ga[t]:(e=HW.exec(t))?(nc(e[1])<<24|nc(e[2])<<16|nc(e[3])<<8|255)>>>0:(e=WW.exec(t))?(nc(e[1])<<24|nc(e[2])<<16|nc(e[3])<<8|U2(e[4]))>>>0:(e=XW.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=JW.exec(t))?parseInt(e[1],16)>>>0:(e=qW.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=GW.exec(t))?(F2(z2(e[1]),bp(e[2]),bp(e[3]))|255)>>>0:(e=KW.exec(t))?(F2(z2(e[1]),bp(e[2]),bp(e[3]))|U2(e[4]))>>>0:null}function Ny(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function F2(t,e,n){const i=n<.5?n*(1+e):n+e-n*e,r=2*n-i,s=Ny(r,i,t+1/3),o=Ny(r,i,t),a=Ny(r,i,t-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function nc(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function z2(t){return(parseFloat(t)%360+360)%360/360}function U2(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function bp(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function V2(t){let e=ZW(t);if(e===null)return t;e=e||0;const n=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,s=(e&255)/255;return`rgba(${n}, ${i}, ${r}, ${s})`}var Hf=(t,e,n)=>{if(ge.fun(t))return t;if(ge.arr(t))return Hf({range:t,output:e,extrapolate:n});if(ge.str(t.output[0]))return JS(t);const i=t,r=i.output,s=i.range||[0,1],o=i.extrapolateLeft||i.extrapolate||"extend",a=i.extrapolateRight||i.extrapolate||"extend",l=i.easing||(c=>c);return c=>{const u=eG(c,s);return QW(c,s[u],s[u+1],r[u],r[u+1],l,o,a,i.map)}};function QW(t,e,n,i,r,s,o,a,l){let c=l?l(t):t;if(c<e){if(o==="identity")return c;o==="clamp"&&(c=e)}if(c>n){if(a==="identity")return c;a==="clamp"&&(c=n)}return i===r?i:e===n?t<=e?i:r:(e===-1/0?c=-c:n===1/0?c=c-e:c=(c-e)/(n-e),c=s(c),i===-1/0?c=-c:r===1/0?c=c+i:c=c*(r-i)+i,c)}function eG(t,e){for(var n=1;n<e.length-1&&!(e[n]>=t);++n);return n-1}var tG=(t,e="end")=>n=>{n=e==="end"?Math.min(n,.999):Math.max(n,.001);const i=n*t,r=e==="end"?Math.floor(i):Math.ceil(i);return UW(0,1,r/t)},Ig=1.70158,xp=Ig*1.525,H2=Ig+1,W2=2*Math.PI/3,G2=2*Math.PI/4.5,Sp=t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,rD={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>1-(1-t)*(1-t),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2,easeInCubic:t=>t*t*t,easeOutCubic:t=>1-Math.pow(1-t,3),easeInOutCubic:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2,easeInQuart:t=>t*t*t*t,easeOutQuart:t=>1-Math.pow(1-t,4),easeInOutQuart:t=>t<.5?8*t*t*t*t:1-Math.pow(-2*t+2,4)/2,easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>1-Math.pow(1-t,5),easeInOutQuint:t=>t<.5?16*t*t*t*t*t:1-Math.pow(-2*t+2,5)/2,easeInSine:t=>1-Math.cos(t*Math.PI/2),easeOutSine:t=>Math.sin(t*Math.PI/2),easeInOutSine:t=>-(Math.cos(Math.PI*t)-1)/2,easeInExpo:t=>t===0?0:Math.pow(2,10*t-10),easeOutExpo:t=>t===1?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>t===0?0:t===1?1:t<.5?Math.pow(2,20*t-10)/2:(2-Math.pow(2,-20*t+10))/2,easeInCirc:t=>1-Math.sqrt(1-Math.pow(t,2)),easeOutCirc:t=>Math.sqrt(1-Math.pow(t-1,2)),easeInOutCirc:t=>t<.5?(1-Math.sqrt(1-Math.pow(2*t,2)))/2:(Math.sqrt(1-Math.pow(-2*t+2,2))+1)/2,easeInBack:t=>H2*t*t*t-Ig*t*t,easeOutBack:t=>1+H2*Math.pow(t-1,3)+Ig*Math.pow(t-1,2),easeInOutBack:t=>t<.5?Math.pow(2*t,2)*((xp+1)*2*t-xp)/2:(Math.pow(2*t-2,2)*((xp+1)*(t*2-2)+xp)+2)/2,easeInElastic:t=>t===0?0:t===1?1:-Math.pow(2,10*t-10)*Math.sin((t*10-10.75)*W2),easeOutElastic:t=>t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t*10-.75)*W2)+1,easeInOutElastic:t=>t===0?0:t===1?1:t<.5?-(Math.pow(2,20*t-10)*Math.sin((20*t-11.125)*G2))/2:Math.pow(2,-20*t+10)*Math.sin((20*t-11.125)*G2)/2+1,easeInBounce:t=>1-Sp(1-t),easeOutBounce:Sp,easeInOutBounce:t=>t<.5?(1-Sp(1-2*t))/2:(1+Sp(2*t-1))/2,steps:tG},Wf=Symbol.for("FluidValue.get"),gu=Symbol.for("FluidValue.observers"),ur=t=>!!(t&&t[Wf]),vi=t=>t&&t[Wf]?t[Wf]():t,K2=t=>t[gu]||null;function nG(t,e){t.eventObserved?t.eventObserved(e):t(e)}function Gf(t,e){const n=t[gu];n&&n.forEach(i=>{nG(i,e)})}var sD=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");iG(this,t)}},iG=(t,e)=>oD(t,Wf,e);function Hv(t,e){if(t[Wf]){let n=t[gu];n||oD(t,gu,n=new Set),n.has(e)||(n.add(e),t.observerAdded&&t.observerAdded(n.size,e))}return e}function Kf(t,e){const n=t[gu];if(n&&n.has(e)){const i=n.size-1;i?n.delete(e):t[gu]=null,t.observerRemoved&&t.observerRemoved(i,e)}}var oD=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0}),Sm=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rG=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,X2=new RegExp(`(${Sm.source})(%|[a-z]+)`,"i"),sG=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,Wv=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,aD=t=>{const[e,n]=oG(t);if(!e||YS())return t;const i=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(i)return i.trim();if(n&&n.startsWith("--")){const r=window.getComputedStyle(document.documentElement).getPropertyValue(n);return r||t}else{if(n&&Wv.test(n))return aD(n);if(n)return n}return t},oG=t=>{const e=Wv.exec(t);if(!e)return[,];const[,n,i]=e;return[n,i]},Ry,aG=(t,e,n,i,r)=>`rgba(${Math.round(e)}, ${Math.round(n)}, ${Math.round(i)}, ${r})`,lD=t=>{Ry||(Ry=ga?new RegExp(`(${Object.keys(ga).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(s=>vi(s).replace(Wv,aD).replace(rG,V2).replace(Ry,V2)),n=e.map(s=>s.match(Sm).map(Number)),r=n[0].map((s,o)=>n.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>Hf({...t,output:s}));return s=>{var l;const o=!X2.test(e[0])&&((l=e.find(c=>X2.test(c)))==null?void 0:l.replace(Sm,""));let a=0;return e[0].replace(Sm,()=>`${r[a++](s)}${o||""}`).replace(sG,aG)}},cD="react-spring: ",uD=t=>{const e=t;let n=!1;if(typeof e!="function")throw new TypeError(`${cD}once requires a function parameter`);return(...i)=>{n||(e(...i),n=!0)}},lG=uD(console.warn);function cG(){lG(`${cD}The "interpolate" function is deprecated in v9 (use "to" instead)`)}uD(console.warn);function Gv(t){return ge.str(t)&&(t[0]=="#"||/\d/.test(t)||!YS()&&Wv.test(t)||t in(ga||{}))}var dD=YS()?g.useEffect:g.useLayoutEffect,uG=()=>{const t=g.useRef(!1);return dD(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function dG(){const t=g.useState()[1],e=uG();return()=>{e.current&&t(Math.random())}}function fG(t,e){const[n]=g.useState(()=>({inputs:e,result:t()})),i=g.useRef(),r=i.current;let s=r;return s?e&&s.inputs&&hG(e,s.inputs)||(s={inputs:e,result:t()}):s=n,g.useEffect(()=>{i.current=s,r==n&&(n.inputs=n.result=void 0)},[s]),s.result}function hG(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var pG=t=>g.useEffect(t,mG),mG=[],Xf=Symbol.for("Animated:node"),gG=t=>!!t&&t[Xf]===t,ds=t=>t&&t[Xf],QS=(t,e)=>BW(t,Xf,e),Kv=t=>t&&t[Xf]&&t[Xf].getPayload(),fD=class{constructor(){QS(this,this)}getPayload(){return this.payload||[]}},Sh=class extends fD{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,ge.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new Sh(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return ge.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,ge.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},qf=class extends Sh{constructor(t){super(0),this._string=null,this._toString=Hf({output:[t,t]})}static create(t){return new qf(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(ge.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=Hf({output:[this.getValue(),t]})),this._value=0,super.reset()}},Lg={dependencies:null},Xv=class extends fD{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const e={};return Oa(this.source,(n,i)=>{gG(n)?e[i]=n.getValue(t):ur(n)?e[i]=vi(n):t||(e[i]=n)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&Pn(this.payload,t=>t.reset())}_makePayload(t){if(t){const e=new Set;return Oa(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){Lg.dependencies&&ur(t)&&Lg.dependencies.add(t);const e=Kv(t);e&&Pn(e,n=>this.add(n))}},hD=class extends Xv{constructor(t){super(t)}static create(t){return new hD(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const e=this.getPayload();return t.length==e.length?e.map((n,i)=>n.setValue(t[i])).some(Boolean):(super.setValue(t.map(vG)),!0)}};function vG(t){return(Gv(t)?qf:Sh).create(t)}function g1(t){const e=ds(t);return e?e.constructor:ge.arr(t)?hD:Gv(t)?qf:Sh}var q2=(t,e)=>{const n=!ge.fun(t)||t.prototype&&t.prototype.isReactComponent;return g.forwardRef((i,r)=>{const s=g.useRef(null),o=n&&g.useCallback(p=>{s.current=bG(r,p)},[r]),[a,l]=wG(i,e),c=dG(),u=()=>{const p=s.current;if(n&&!p)return;(p?e.applyAnimatedValues(p,a.getValue(!0)):!1)===!1&&c()},d=new yG(u,l),f=g.useRef();dD(()=>(f.current=d,Pn(l,p=>Hv(p,d)),()=>{f.current&&(Pn(f.current.deps,p=>Kf(p,f.current)),Ve.cancel(f.current.update))})),g.useEffect(u,[]),pG(()=>()=>{const p=f.current;Pn(p.deps,m=>Kf(m,p))});const h=e.getComponentProps(a.getValue());return g.createElement(t,{...h,ref:o})})},yG=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){t.type=="change"&&Ve.write(this.update)}};function wG(t,e){const n=new Set;return Lg.dependencies=n,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new Xv(t),Lg.dependencies=null,[t,n]}function bG(t,e){return t&&(ge.fun(t)?t(e):t.current=e),e}var Y2=Symbol.for("AnimatedComponent"),xG=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:n=r=>new Xv(r),getComponentProps:i=r=>r}={})=>{const r={applyAnimatedValues:e,createAnimatedStyle:n,getComponentProps:i},s=o=>{const a=J2(o)||"Anonymous";return ge.str(o)?o=s[o]||(s[o]=q2(o,r)):o=o[Y2]||(o[Y2]=q2(o,r)),o.displayName=`Animated(${a})`,o};return Oa(t,(o,a)=>{ge.arr(t)&&(a=J2(o)),s[a]=s(o)}),{animated:s}},J2=t=>ge.str(t)?t:t&&ge.str(t.displayName)?t.displayName:ge.fun(t)&&t.name||null;function nl(t,...e){return ge.fun(t)?t(...e):t}var Wd=(t,e)=>t===!0||!!(e&&t&&(ge.fun(t)?t(e):ra(t).includes(e))),pD=(t,e)=>ge.obj(t)?e&&t[e]:t,SG=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,kG=t=>t,mD=(t,e=kG)=>{let n=_G;t.default&&t.default!==!0&&(t=t.default,n=Object.keys(t));const i={};for(const r of n){const s=e(t[r],r);ge.und(s)||(i[r]=s)}return i},_G=["config","onProps","onStart","onChange","onPause","onResume","onRest"],CG={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function EG(t){const e={};let n=0;if(Oa(t,(i,r)=>{CG[r]||(e[r]=i,n++)}),n)return e}function gD(t){const e=EG(t);if(e){const n={to:e};return Oa(t,(i,r)=>r in e||(n[r]=i)),n}return{...t}}function Yf(t){return t=vi(t),ge.arr(t)?t.map(Yf):Gv(t)?Zr.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function v1(t){return ge.fun(t)||ge.arr(t)&&ge.obj(t[0])}var AG={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},y1={...AG.default,mass:1,damping:1,easing:rD.linear,clamp:!1},PG=class{constructor(){this.velocity=0,Object.assign(this,y1)}};function $G(t,e,n){n&&(n={...n},Z2(n,e),e={...n,...e}),Z2(t,e),Object.assign(t,e);for(const o in y1)t[o]==null&&(t[o]=y1[o]);let{frequency:i,damping:r}=t;const{mass:s}=t;return ge.und(i)||(i<.01&&(i=.01),r<0&&(r=0),t.tension=Math.pow(2*Math.PI/i,2)*s,t.friction=4*Math.PI*r*s/i),t}function Z2(t,e){if(!ge.und(e.decay))t.duration=void 0;else{const n=!ge.und(e.tension)||!ge.und(e.friction);(n||!ge.und(e.frequency)||!ge.und(e.damping)||!ge.und(e.mass))&&(t.duration=void 0,t.decay=void 0),n&&(t.frequency=void 0)}}var Q2=[],TG=class{constructor(){this.changed=!1,this.values=Q2,this.toValues=null,this.fromValues=Q2,this.config=new PG,this.immediate=!1}};function OG(t,{key:e,props:n,defaultProps:i,state:r,actions:s}){return new Promise((o,a)=>{let l,c,u=Wd(n.cancel??(i==null?void 0:i.cancel),e);if(u)h();else{ge.und(n.pause)||(r.paused=Wd(n.pause,e));let p=i==null?void 0:i.pause;p!==!0&&(p=r.paused||Wd(p,e)),l=nl(n.delay||0,e),p?(r.resumeQueue.add(f),s.pause()):(s.resume(),f())}function d(){r.resumeQueue.add(f),r.timeouts.delete(c),c.cancel(),l=c.time-Ve.now()}function f(){l>0&&!Zr.skipAnimation?(r.delayed=!0,c=Ve.setTimeout(h,l),r.pauseQueue.add(d),r.timeouts.add(c)):h()}function h(){r.delayed&&(r.delayed=!1),r.pauseQueue.delete(d),r.timeouts.delete(c),t<=(r.cancelId||0)&&(u=!0);try{s.start({...n,callId:t,cancel:u},o)}catch(p){a(p)}}})}var NG=(t,e)=>e.length==1?e[0]:e.some(n=>n.cancelled)?Gd(t.get()):e.every(n=>n.noop)?vD(t.get()):Ir(t.get(),e.every(n=>n.finished)),vD=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),Ir=(t,e,n=!1)=>({value:t,finished:e,cancelled:n}),Gd=t=>({value:t,cancelled:!0,finished:!1});function RG(t,e,n,i){const{callId:r,parentId:s,onRest:o}=e,{asyncTo:a,promise:l}=n;return!s&&t===a&&!e.reset?l:n.promise=(async()=>{n.asyncId=r,n.asyncTo=t;const c=mD(e,(w,v)=>v==="onRest"?void 0:w);let u,d;const f=new Promise((w,v)=>(u=w,d=v)),h=w=>{const v=r<=(n.cancelId||0)&&Gd(i)||r!==n.asyncId&&Ir(i,!1);if(v)throw w.result=v,d(w),w},p=(w,v)=>{const y=new eA,x=new tA;return(async()=>{if(Zr.skipAnimation)throw w1(n),x.result=Ir(i,!1),d(x),x;h(y);const k=ge.obj(w)?{...w}:{...v,to:w};k.parentId=r,Oa(c,(P,A)=>{ge.und(k[A])&&(k[A]=P)});const _=await i.start(k);return h(y),n.paused&&await new Promise(P=>{n.resumeQueue.add(P)}),_})()};let m;if(Zr.skipAnimation)return w1(n),Ir(i,!1);try{let w;ge.arr(t)?w=(async v=>{for(const y of v)await p(y)})(t):w=Promise.resolve(t(p,i.stop.bind(i))),await Promise.all([w.then(u),f]),m=Ir(i.get(),!0,!1)}catch(w){if(w instanceof eA)m=w.result;else if(w instanceof tA)m=w.result;else throw w}finally{r==n.asyncId&&(n.asyncId=s,n.asyncTo=s?a:void 0,n.promise=s?l:void 0)}return ge.fun(o)&&Ve.batchedUpdates(()=>{o(m,i,i.item)}),m})()}function w1(t,e){QM(t.timeouts,n=>n.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}var eA=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},tA=class extends Error{constructor(){super("SkipAnimationSignal")}},b1=t=>t instanceof ek,MG=1,ek=class extends sD{constructor(){super(...arguments),this.id=MG++,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=ds(this);return t&&t.getValue()}to(...t){return Zr.to(this,t)}interpolate(...t){return cG(),Zr.to(this,t)}toJSON(){return this.get()}observerAdded(t){t==1&&this._attach()}observerRemoved(t){t==0&&this._detach()}_attach(){}_detach(){}_onChange(t,e=!1){Gf(this,{type:"change",parent:this,value:t,idle:e})}_onPriorityChange(t){this.idle||Uv.sort(this),Gf(this,{type:"priority",parent:this,priority:t})}},jl=Symbol.for("SpringPhase"),yD=1,x1=2,S1=4,My=t=>(t[jl]&yD)>0,$o=t=>(t[jl]&x1)>0,nd=t=>(t[jl]&S1)>0,nA=(t,e)=>e?t[jl]|=x1|yD:t[jl]&=~x1,iA=(t,e)=>e?t[jl]|=S1:t[jl]&=~S1,mt=class extends ek{constructor(t,e){if(super(),this.animation=new TG,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!ge.und(t)||!ge.und(e)){const n=ge.obj(t)?{...t}:{...e,from:t};ge.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!($o(this)||this._state.asyncTo)||nd(this)}get goal(){return vi(this.animation.to)}get velocity(){const t=ds(this);return t instanceof Sh?t.lastVelocity||0:t.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return My(this)}get isAnimating(){return $o(this)}get isPaused(){return nd(this)}get isDelayed(){return this._state.delayed}advance(t){let e=!0,n=!1;const i=this.animation;let{toValues:r}=i;const{config:s}=i,o=Kv(i.to);!o&&ur(i.to)&&(r=ra(vi(i.to))),i.values.forEach((c,u)=>{if(c.done)return;const d=c.constructor==qf?1:o?o[u].lastPosition:r[u];let f=i.immediate,h=d;if(!f){if(h=c.lastPosition,s.tension<=0){c.done=!0;return}let p=c.elapsedTime+=t;const m=i.fromValues[u],w=c.v0!=null?c.v0:c.v0=ge.arr(s.velocity)?s.velocity[u]:s.velocity;let v;const y=s.precision||(m==d?.005:Math.min(1,Math.abs(d-m)*.001));if(ge.und(s.duration))if(s.decay){const x=s.decay===!0?.998:s.decay,k=Math.exp(-(1-x)*p);h=m+w/(1-x)*(1-k),f=Math.abs(c.lastPosition-h)<=y,v=w*k}else{v=c.lastVelocity==null?w:c.lastVelocity;const x=s.restVelocity||y/10,k=s.clamp?0:s.bounce,_=!ge.und(k),P=m==d?c.v0>0:m<d;let A,C=!1;const N=1,R=Math.ceil(t/N);for(let M=0;M<R&&(A=Math.abs(v)>x,!(!A&&(f=Math.abs(d-h)<=y,f)));++M){_&&(C=h==d||h>d==P,C&&(v=-v*k,h=d));const L=-s.tension*1e-6*(h-d),H=-s.friction*.001*v,T=(L+H)/s.mass;v=v+T*N,h=h+v*N}}else{let x=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,c.durationProgress>0&&(c.elapsedTime=s.duration*c.durationProgress,p=c.elapsedTime+=t)),x=(s.progress||0)+p/this._memoizedDuration,x=x>1?1:x<0?0:x,c.durationProgress=x),h=m+s.easing(x)*(d-m),v=(h-c.lastPosition)/t,f=x==1}c.lastVelocity=v,Number.isNaN(h)&&(console.warn("Got NaN while animating:",this),f=!0)}o&&!o[u].done&&(f=!1),f?c.done=!0:e=!1,c.setValue(h,s.round)&&(n=!0)});const a=ds(this),l=a.getValue();if(e){const c=vi(i.to);(l!==c||n)&&!s.decay?(a.setValue(c),this._onChange(c)):n&&s.decay&&this._onChange(l),this._stop()}else n&&this._onChange(l)}set(t){return Ve.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if($o(this)){const{to:t,config:e}=this.animation;Ve.batchedUpdates(()=>{this._onStart(),e.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,e){let n;return ge.und(t)?(n=this.queue||[],this.queue=[]):n=[ge.obj(t)?t:{...e,to:t}],Promise.all(n.map(i=>this._update(i))).then(i=>NG(this,i))}stop(t){const{to:e}=this.animation;return this._focus(this.get()),w1(this._state,t&&this._lastCallId),Ve.batchedUpdates(()=>this._stop(e,t)),this}reset(){this._update({reset:!0})}eventObserved(t){t.type=="change"?this._start():t.type=="priority"&&(this.priority=t.priority+1)}_prepareNode(t){const e=this.key||"";let{to:n,from:i}=t;n=ge.obj(n)?n[e]:n,(n==null||v1(n))&&(n=void 0),i=ge.obj(i)?i[e]:i,i==null&&(i=void 0);const r={to:n,from:i};return My(this)||(t.reverse&&([n,i]=[i,n]),i=vi(i),ge.und(i)?ds(this)||this._set(n):this._set(i)),r}_update({...t},e){const{key:n,defaultProps:i}=this;t.default&&Object.assign(i,mD(t,(o,a)=>/^on/.test(a)?pD(o,n):o)),sA(this,t,"onProps"),rd(this,"onProps",t,this);const r=this._prepareNode(t);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return OG(++this._lastCallId,{key:n,props:t,defaultProps:i,state:s,actions:{pause:()=>{nd(this)||(iA(this,!0),wp(s.pauseQueue),rd(this,"onPause",Ir(this,id(this,this.animation.to)),this))},resume:()=>{nd(this)&&(iA(this,!1),$o(this)&&this._resume(),wp(s.resumeQueue),rd(this,"onResume",Ir(this,id(this,this.animation.to)),this))},start:this._merge.bind(this,r)}}).then(o=>{if(t.loop&&o.finished&&!(e&&o.noop)){const a=DG(t);if(a)return this._update(a,!0)}return o})}_merge(t,e,n){if(e.cancel)return this.stop(!0),n(Gd(this));const i=!ge.und(t.to),r=!ge.und(t.from);if(i||r)if(e.callId>this._lastToId)this._lastToId=e.callId;else return n(Gd(this));const{key:s,defaultProps:o,animation:a}=this,{to:l,from:c}=a;let{to:u=l,from:d=c}=t;r&&!i&&(!e.default||ge.und(u))&&(u=d),e.reverse&&([u,d]=[d,u]);const f=!Bs(d,c);f&&(a.from=d),d=vi(d);const h=!Bs(u,l);h&&this._focus(u);const p=v1(e.to),{config:m}=a,{decay:w,velocity:v}=m;(i||r)&&(m.velocity=0),e.config&&!p&&$G(m,nl(e.config,s),e.config!==o.config?nl(o.config,s):void 0);let y=ds(this);if(!y||ge.und(u))return n(Ir(this,!0));const x=ge.und(e.reset)?r&&!e.default:!ge.und(d)&&Wd(e.reset,s),k=x?d:this.get(),_=Yf(u),P=ge.num(_)||ge.arr(_)||Gv(_),A=!p&&(!P||Wd(o.immediate||e.immediate,s));if(h){const M=g1(u);if(M!==y.constructor)if(A)y=this._set(_);else throw Error(`Cannot animate between ${y.constructor.name} and ${M.name}, as the "to" prop suggests`)}const C=y.constructor;let N=ur(u),R=!1;if(!N){const M=x||!My(this)&&f;(h||M)&&(R=Bs(Yf(k),_),N=!R),(!Bs(a.immediate,A)&&!A||!Bs(m.decay,w)||!Bs(m.velocity,v))&&(N=!0)}if(R&&$o(this)&&(a.changed&&!x?N=!0:N||this._stop(l)),!p&&((N||ur(l))&&(a.values=y.getPayload(),a.toValues=ur(u)?null:C==qf?[1]:ra(_)),a.immediate!=A&&(a.immediate=A,!A&&!x&&this._set(l)),N)){const{onRest:M}=a;Pn(LG,H=>sA(this,e,H));const L=Ir(this,id(this,l));wp(this._pendingCalls,L),this._pendingCalls.add(n),a.changed&&Ve.batchedUpdates(()=>{var H;a.changed=!x,M==null||M(L,this),x?nl(o.onRest,L):(H=a.onStart)==null||H.call(a,L,this)})}x&&this._set(k),p?n(RG(e.to,e,this._state,this)):N?this._start():$o(this)&&!h?this._pendingCalls.add(n):n(vD(k))}_focus(t){const e=this.animation;t!==e.to&&(K2(this)&&this._detach(),e.to=t,K2(this)&&this._attach())}_attach(){let t=0;const{to:e}=this.animation;ur(e)&&(Hv(e,this),b1(e)&&(t=e.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;ur(t)&&Kf(t,this)}_set(t,e=!0){const n=vi(t);if(!ge.und(n)){const i=ds(this);if(!i||!Bs(n,i.getValue())){const r=g1(n);!i||i.constructor!=r?QS(this,r.create(n)):i.setValue(n),i&&Ve.batchedUpdates(()=>{this._onChange(n,e)})}}return ds(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,rd(this,"onStart",Ir(this,id(this,t.to)),this))}_onChange(t,e){e||(this._onStart(),nl(this.animation.onChange,t,this)),nl(this.defaultProps.onChange,t,this),super._onChange(t,e)}_start(){const t=this.animation;ds(this).reset(vi(t.to)),t.immediate||(t.fromValues=t.values.map(e=>e.lastPosition)),$o(this)||(nA(this,!0),nd(this)||this._resume())}_resume(){Zr.skipAnimation?this.finish():Uv.start(this)}_stop(t,e){if($o(this)){nA(this,!1);const n=this.animation;Pn(n.values,r=>{r.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),Gf(this,{type:"idle",parent:this});const i=e?Gd(this.get()):Ir(this.get(),id(this,t??n.to));wp(this._pendingCalls,i),n.changed&&(n.changed=!1,rd(this,"onRest",i,this))}}};function id(t,e){const n=Yf(e),i=Yf(t.get());return Bs(i,n)}function DG(t,e=t.loop,n=t.to){const i=nl(e);if(i){const r=i!==!0&&gD(i),s=(r||t).reverse,o=!r||r.reset;return IG({...t,loop:e,default:!1,pause:void 0,to:!s||v1(n)?n:void 0,from:o?t.from:void 0,reset:o,...r})}}function IG(t){const{to:e,from:n}=t=gD(t),i=new Set;return ge.obj(e)&&rA(e,i),ge.obj(n)&&rA(n,i),t.keys=i.size?Array.from(i):null,t}function rA(t,e){Oa(t,(n,i)=>n!=null&&e.add(i))}var LG=["onStart","onRest","onChange","onPause","onResume"];function sA(t,e,n){t.animation[n]=e[n]!==SG(e,n)?pD(e[n],t.key):void 0}function rd(t,e,...n){var i,r,s,o;(r=(i=t.animation)[e])==null||r.call(i,...n),(o=(s=t.defaultProps)[e])==null||o.call(s,...n)}var tk=({children:t,...e})=>{const n=g.useContext(Bg),i=e.pause||!!n.pause,r=e.immediate||!!n.immediate;e=fG(()=>({pause:i,immediate:r}),[i,r]);const{Provider:s}=Bg;return g.createElement(s,{value:e},t)},Bg=BG(tk,{});tk.Provider=Bg.Provider;tk.Consumer=Bg.Consumer;function BG(t,e){return Object.assign(t,g.createContext(e)),t.Provider._context=t,t.Consumer._context=t,t}var jG=class extends ek{constructor(t,e){super(),this.source=t,this.idle=!0,this._active=new Set,this.calc=Hf(...e);const n=this._get(),i=g1(n);QS(this,i.create(n))}advance(t){const e=this._get(),n=this.get();Bs(e,n)||(ds(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&oA(this._active)&&Dy(this)}_get(){const t=ge.arr(this.source)?this.source.map(vi):ra(vi(this.source));return this.calc(...t)}_start(){this.idle&&!oA(this._active)&&(this.idle=!1,Pn(Kv(this),t=>{t.done=!1}),Zr.skipAnimation?(Ve.batchedUpdates(()=>this.advance()),Dy(this)):Uv.start(this))}_attach(){let t=1;Pn(ra(this.source),e=>{ur(e)&&Hv(e,this),b1(e)&&(e.idle||this._active.add(e),t=Math.max(t,e.priority+1))}),this.priority=t,this._start()}_detach(){Pn(ra(this.source),t=>{ur(t)&&Kf(t,this)}),this._active.clear(),Dy(this)}eventObserved(t){t.type=="change"?t.idle?this.advance():(this._active.add(t.parent),this._start()):t.type=="idle"?this._active.delete(t.parent):t.type=="priority"&&(this.priority=ra(this.source).reduce((e,n)=>Math.max(e,(b1(n)?n.priority:0)+1),0))}};function FG(t){return t.idle!==!1}function oA(t){return!t.size||Array.from(t).every(FG)}function Dy(t){t.idle||(t.idle=!0,Pn(Kv(t),e=>{e.done=!0}),Gf(t,{type:"idle",parent:t}))}Zr.assign({createStringInterpolator:lD,to:(t,e)=>new jG(t,e)});var wD=/^--/;function zG(t,e){return e==null||typeof e=="boolean"||e===""?"":typeof e=="number"&&e!==0&&!wD.test(t)&&!(Kd.hasOwnProperty(t)&&Kd[t])?e+"px":(""+e).trim()}var aA={};function UG(t,e){if(!t.nodeType||!t.setAttribute)return!1;const n=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter",{style:i,children:r,scrollTop:s,scrollLeft:o,viewBox:a,...l}=e,c=Object.values(l),u=Object.keys(l).map(d=>n||t.hasAttribute(d)?d:aA[d]||(aA[d]=d.replace(/([A-Z])/g,f=>"-"+f.toLowerCase())));r!==void 0&&(t.textContent=r);for(const d in i)if(i.hasOwnProperty(d)){const f=zG(d,i[d]);wD.test(d)?t.style.setProperty(d,f):t.style[d]=f}u.forEach((d,f)=>{t.setAttribute(d,c[f])}),s!==void 0&&(t.scrollTop=s),o!==void 0&&(t.scrollLeft=o),a!==void 0&&t.setAttribute("viewBox",a)}var Kd={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},VG=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),HG=["Webkit","Ms","Moz","O"];Kd=Object.keys(Kd).reduce((t,e)=>(HG.forEach(n=>t[VG(n,e)]=t[e]),t),Kd);var WG=/^(matrix|translate|scale|rotate|skew)/,GG=/^(translate)/,KG=/^(rotate|skew)/,Iy=(t,e)=>ge.num(t)&&t!==0?t+e:t,km=(t,e)=>ge.arr(t)?t.every(n=>km(n,e)):ge.num(t)?t===e:parseFloat(t)===e,XG=class extends Xv{constructor({x:t,y:e,z:n,...i}){const r=[],s=[];(t||e||n)&&(r.push([t||0,e||0,n||0]),s.push(o=>[`translate3d(${o.map(a=>Iy(a,"px")).join(",")})`,km(o,0)])),Oa(i,(o,a)=>{if(a==="transform")r.push([o||""]),s.push(l=>[l,l===""]);else if(WG.test(a)){if(delete i[a],ge.und(o))return;const l=GG.test(a)?"px":KG.test(a)?"deg":"";r.push(ra(o)),s.push(a==="rotate3d"?([c,u,d,f])=>[`rotate3d(${c},${u},${d},${Iy(f,l)})`,km(f,0)]:c=>[`${a}(${c.map(u=>Iy(u,l)).join(",")})`,km(c,a.startsWith("scale")?1:0)])}}),r.length&&(i.transform=new qG(r,s)),super(i)}},qG=class extends sD{constructor(t,e){super(),this.inputs=t,this.transforms=e,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let t="",e=!0;return Pn(this.inputs,(n,i)=>{const r=vi(n[0]),[s,o]=this.transforms[i](ge.arr(r)?r:n.map(vi));t+=" "+s,e=e&&o}),e?"none":t}observerAdded(t){t==1&&Pn(this.inputs,e=>Pn(e,n=>ur(n)&&Hv(n,this)))}observerRemoved(t){t==0&&Pn(this.inputs,e=>Pn(e,n=>ur(n)&&Kf(n,this)))}eventObserved(t){t.type=="change"&&(this._value=null),Gf(this,t)}},YG=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];Zr.assign({batchedUpdates:bo.unstable_batchedUpdates,createStringInterpolator:lD,colors:VW});var JG=xG(YG,{applyAnimatedValues:UG,createAnimatedStyle:t=>new XG(t),getComponentProps:({scrollTop:t,scrollLeft:e,...n})=>n}),Kt=JG.animated;const wt={blue:{500:"#3b82f6"},mantis:{400:"#82bd69"},red:{500:"#ef4444"},stone:{600:"#57534e",700:"#44403c",800:"#292524"},white:"#ffffff"},Je=(t=wt.stone[800])=>({backgroundColor:new mt(t),opacity:new mt(1)}),dn=()=>({strokeDashoffset:new mt(1),opacity:new mt(1)}),nk={bus:{address:{stroke:new mt(wt.stone[700])},data:{stroke:new mt(wt.stone[700])},rd:{stroke:new mt(wt.stone[700])},wr:{stroke:new mt(wt.stone[700])},iom:dn(),mem:{stroke:new mt(wt.red[500])},handshake:dn(),pic:dn(),pio:dn(),timer:dn(),intr:dn(),inta:dn(),int0:dn(),int1:dn(),int2:dn(),"switches->pio":dn(),"pio->leds":dn(),printer:{data:dn(),strobe:dn(),busy:dn()}},clock:{angle:new mt(0)},cpu:{internalBus:{address:{strokeDashoffset:new mt(1),opacity:new mt(1),path:new mt("")},data:{strokeDashoffset:new mt(1),opacity:new mt(1),path:new mt("")}},alu:{operands:dn(),results:dn(),cog:{rot:new mt(0)},operation:{backgroundColor:new mt(wt.stone[800])}},decoder:{path:dn(),progress:{progress:new mt(0),opacity:new mt(1)}},AX:Je(),BX:Je(),CX:Je(),DX:Je(),SP:Je(),IP:Je(),IR:Je(),ri:{...Je(),opacity:new mt(0)},id:{...Je(),opacity:new mt(0)},left:Je(),right:Je(),result:Je(),FLAGS:Je(),MAR:Je(),MBR:Je()},handshake:{DATA:Je(),STATE:Je()},memory:{"operating-cell":{color:new mt(wt.white)}},pic:{IMR:Je(),IRR:Je(),ISR:Je(),INT0:Je(),INT1:Je(),INT2:Je(),INT3:Je(),INT4:Je(),INT5:Je(),INT6:Je(),INT7:Je()},pio:{PA:Je(),PB:Je(),CA:Je(),CB:Je()},printer:{printing:{progress:new mt(0),opacity:new mt(1)}},timer:{CONT:Je(),COMP:Je()}};function ft(t){return yM(nk,t)}function bD(t){const e={};for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];i instanceof mt?e[n]=i.get():e[n]=bD(i)}return e}const ZG=bD(nk);function xD(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];i instanceof mt?i.set(e[n]):xD(t[n],e[n])}}const QG=()=>xD(nk,ZG),Jf=new Set;async function Qe(t,e){const n=q.get(Nn);if(n.type==="stopped")return null;if(n.type==="paused")return await new Promise(s=>{const o=q.sub(Nn,()=>{q.get(Nn).type!=="paused"&&(o(),s())})}),await Qe(t,e);const i=bi();if(!i.animations&&!e.forceMs)return null;const r={duration:e.forceMs?e.duration:e.duration*i.executionUnit,easing:rD[e.easing]};return Array.isArray(t)||(t=[t]),await Promise.all(t.map(async({key:s,from:o,to:a})=>{if(a===void 0&&o===void 0)return null;const l=ft(s);if(a===void 0)return l.set(o);{Jf.add(s);const c=await ft(s).start({from:o,to:a,config:r});return Jf.delete(s),c}}))}const eK=()=>Jf.forEach(t=>ft(t).pause()),tK=()=>Jf.forEach(t=>ft(t).resume());function SD(){Jf.forEach(t=>{const e=ft(t);e.stop(!0),e.isPaused&&e.resume()}),setTimeout(()=>QG(),10)}async function or(t,e=wt.mantis[400]){return await Qe({key:`${t}.backgroundColor`,to:e},{duration:1,easing:"easeOutQuart"})}async function ar(t){return await Qe({key:`${t}.backgroundColor`,to:wt.stone[800]},{duration:1,easing:"easeOutQuart"})}async function vu(t){await Qe({key:"bus.data.stroke",to:wt.mantis[400]},{duration:5,easing:"easeOutSine"}),await or("cpu.MBR"),q.set(Rg,t),await ar("cpu.MBR")}async function yr(t,e){return await Qe([{key:`${t}.strokeDashoffset`,from:1,to:0},{key:`${t}.opacity`,from:1}],{duration:e,easing:"easeInOutSine"})}async function Yn(t){return await Qe({key:`${t}.opacity`,to:0},{duration:1,easing:"easeInSine"})}async function nK(t){switch(t.type){case"bus:io.selected":{await Promise.all([Qe({key:"bus.mem.stroke",to:wt.stone[700]},{duration:1,easing:"easeInSine"}),yr(`bus.${t.chip}`,15)]);return}case"bus:io.error":{wu(t.error);return}case"bus:reset":{await Promise.all([Qe([{key:"bus.address.stroke",to:wt.stone[700]},{key:"bus.data.stroke",to:wt.stone[700]},{key:"bus.rd.stroke",to:wt.stone[700]},{key:"bus.wr.stroke",to:wt.stone[700]}],{duration:1,easing:"easeInSine"}),Qe({key:"bus.mem.stroke",to:wt.red[500]},{duration:1,easing:"easeOutSine"}),Yn("bus.iom"),Yn("bus.handshake"),Yn("bus.pio"),Yn("bus.pic"),Yn("bus.timer")]);return}default:return t}}async function iK(t){switch(t.type){case"clock:tick":return;default:return t.type}}function rK(t){switch(t){case"IP":return"M 451 309 H 550 V 349 H 698";case"SP":return"M 451 349 H 698";case"ri":return"";default:throw new Error(`Invalid register ${t}`)}}function sK(){const{path:t,...e}=ft("cpu.internalBus.address"),[n]=g.useState(!1),i=["M 451 309 H 550 V 349","M 451 349 H 550","M 444 388 H 550 V 349","M 451 349 H 698"];return b.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[i.map((r,s)=>b.jsx("path",{className:`fill-none stroke-bus ${n&&r==="M 444 388 H 575 V 349"?"stroke-mantis-400":"stroke-stone-700"}`,strokeLinejoin:"round",d:r},s)),b.jsx(Kt.path,{d:t,className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:e})]})}var ik={exports:{}},Wc=typeof Reflect=="object"?Reflect:null,lA=Wc&&typeof Wc.apply=="function"?Wc.apply:function(e,n,i){return Function.prototype.apply.call(e,n,i)},_m;Wc&&typeof Wc.ownKeys=="function"?_m=Wc.ownKeys:Object.getOwnPropertySymbols?_m=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:_m=function(e){return Object.getOwnPropertyNames(e)};function oK(t){console&&console.warn&&console.warn(t)}var kD=Number.isNaN||function(e){return e!==e};function ht(){ht.init.call(this)}ik.exports=ht;ik.exports.once=uK;ht.EventEmitter=ht;ht.prototype._events=void 0;ht.prototype._eventsCount=0;ht.prototype._maxListeners=void 0;var cA=10;function qv(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(ht,"defaultMaxListeners",{enumerable:!0,get:function(){return cA},set:function(t){if(typeof t!="number"||t<0||kD(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");cA=t}});ht.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};ht.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||kD(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function _D(t){return t._maxListeners===void 0?ht.defaultMaxListeners:t._maxListeners}ht.prototype.getMaxListeners=function(){return _D(this)};ht.prototype.emit=function(e){for(var n=[],i=1;i<arguments.length;i++)n.push(arguments[i]);var r=e==="error",s=this._events;if(s!==void 0)r=r&&s.error===void 0;else if(!r)return!1;if(r){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[e];if(l===void 0)return!1;if(typeof l=="function")lA(l,this,n);else for(var c=l.length,u=$D(l,c),i=0;i<c;++i)lA(u[i],this,n);return!0};function CD(t,e,n,i){var r,s,o;if(qv(n),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),o===void 0)o=s[e]=n,++t._eventsCount;else if(typeof o=="function"?o=s[e]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),r=_D(t),r>0&&o.length>r&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,oK(a)}return t}ht.prototype.addListener=function(e,n){return CD(this,e,n,!1)};ht.prototype.on=ht.prototype.addListener;ht.prototype.prependListener=function(e,n){return CD(this,e,n,!0)};function aK(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function ED(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=aK.bind(i);return r.listener=n,i.wrapFn=r,r}ht.prototype.once=function(e,n){return qv(n),this.on(e,ED(this,e,n)),this};ht.prototype.prependOnceListener=function(e,n){return qv(n),this.prependListener(e,ED(this,e,n)),this};ht.prototype.removeListener=function(e,n){var i,r,s,o,a;if(qv(n),r=this._events,r===void 0)return this;if(i=r[e],i===void 0)return this;if(i===n||i.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,i.listener||n));else if(typeof i!="function"){for(s=-1,o=i.length-1;o>=0;o--)if(i[o]===n||i[o].listener===n){a=i[o].listener,s=o;break}if(s<0)return this;s===0?i.shift():lK(i,s),i.length===1&&(r[e]=i[0]),r.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};ht.prototype.off=ht.prototype.removeListener;ht.prototype.removeAllListeners=function(e){var n,i,r;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var s=Object.keys(i),o;for(r=0;r<s.length;++r)o=s[r],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=i[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(r=n.length-1;r>=0;r--)this.removeListener(e,n[r]);return this};function AD(t,e,n){var i=t._events;if(i===void 0)return[];var r=i[e];return r===void 0?[]:typeof r=="function"?n?[r.listener||r]:[r]:n?cK(r):$D(r,r.length)}ht.prototype.listeners=function(e){return AD(this,e,!0)};ht.prototype.rawListeners=function(e){return AD(this,e,!1)};ht.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):PD.call(t,e)};ht.prototype.listenerCount=PD;function PD(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}ht.prototype.eventNames=function(){return this._eventsCount>0?_m(this._events):[]};function $D(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}function lK(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function cK(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function uK(t,e){return new Promise(function(n,i){function r(o){t.removeListener(e,s),i(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",r),n([].slice.call(arguments))}TD(t,e,s,{once:!0}),e!=="error"&&dK(t,r,{once:!0})})}function dK(t,e,n){typeof t.on=="function"&&TD(t,"error",e,n)}function TD(t,e,n,i){if(typeof t.on=="function")i.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function r(s){i.once&&t.removeEventListener(e,r),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var fK=ik.exports;function Ns(t){if(typeof t!="function")throw new Error("obliterator/iterator: expecting a function!");this.next=t}typeof Symbol<"u"&&(Ns.prototype[Symbol.iterator]=function(){return this});Ns.of=function(){var t=arguments,e=t.length,n=0;return new Ns(function(){return n>=e?{done:!0}:{done:!1,value:t[n++]}})};Ns.empty=function(){var t=new Ns(function(){return{done:!0}});return t};Ns.fromSequence=function(t){var e=0,n=t.length;return new Ns(function(){return e>=n?{done:!0}:{done:!1,value:t[e++]}})};Ns.is=function(t){return t instanceof Ns?!0:typeof t=="object"&&t!==null&&typeof t.next=="function"};var Yv=Ns;const Cr=Eu(Yv);var Jv={};Jv.ARRAY_BUFFER_SUPPORT=typeof ArrayBuffer<"u";Jv.SYMBOL_SUPPORT=typeof Symbol<"u";var hK=Yv,OD=Jv,pK=OD.ARRAY_BUFFER_SUPPORT,mK=OD.SYMBOL_SUPPORT;function gK(t){return typeof t=="string"||Array.isArray(t)||pK&&ArrayBuffer.isView(t)?hK.fromSequence(t):typeof t!="object"||t===null?null:mK&&typeof t[Symbol.iterator]=="function"?t[Symbol.iterator]():typeof t.next=="function"?t:null}var ND=function(e){var n=gK(e);if(!n)throw new Error("obliterator: target is not iterable nor a valid iterator.");return n},vK=ND,yK=function(e,n){for(var i=arguments.length>1?n:1/0,r=i!==1/0?new Array(i):[],s,o=0,a=vK(e);;){if(o===i)return r;if(s=a.next(),s.done)return o!==n&&(r.length=o),r;r[o++]=s.value}};const RD=Eu(yK);var wK=Yv,bK=ND,xK=function(){var e=arguments,n=null,i=-1;return new wK(function(){var s=null;do{if(n===null){if(i++,i>=e.length)return{done:!0};n=bK(e[i])}if(s=n.next(),s.done===!0){n=null;continue}break}while(!0);return s})};const so=Eu(xK);function SK(){const t=arguments[0];for(let e=1,n=arguments.length;e<n;e++)if(arguments[e])for(const i in arguments[e])t[i]=arguments[e][i];return t}let ln=SK;typeof Object.assign=="function"&&(ln=Object.assign);function wr(t,e,n,i){const r=t._nodes.get(e);let s=null;return r&&(i==="mixed"?s=r.out&&r.out[n]||r.undirected&&r.undirected[n]:i==="directed"?s=r.out&&r.out[n]:s=r.undirected&&r.undirected[n]),s}function $n(t){return typeof t=="object"&&t!==null}function MD(t){let e;for(e in t)return!1;return!0}function er(t,e,n){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!0,value:n})}function Pr(t,e,n){const i={enumerable:!0,configurable:!0};typeof n=="function"?i.get=n:(i.value=n,i.writable=!1),Object.defineProperty(t,e,i)}function uA(t){return!(!$n(t)||t.attributes&&!Array.isArray(t.attributes))}function kK(){let t=Math.floor(Math.random()*256)&255;return()=>t++}class rk extends Error{constructor(e){super(),this.name="GraphError",this.message=e}}class me extends rk{constructor(e){super(e),this.name="InvalidArgumentsGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,me.prototype.constructor)}}class de extends rk{constructor(e){super(e),this.name="NotFoundGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,de.prototype.constructor)}}class Re extends rk{constructor(e){super(e),this.name="UsageGraphError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Re.prototype.constructor)}}function DD(t,e){this.key=t,this.attributes=e,this.clear()}DD.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.undirectedDegree=0,this.undirectedLoops=0,this.directedLoops=0,this.in={},this.out={},this.undirected={}};function ID(t,e){this.key=t,this.attributes=e,this.clear()}ID.prototype.clear=function(){this.inDegree=0,this.outDegree=0,this.directedLoops=0,this.in={},this.out={}};function LD(t,e){this.key=t,this.attributes=e,this.clear()}LD.prototype.clear=function(){this.undirectedDegree=0,this.undirectedLoops=0,this.undirected={}};function Mu(t,e,n,i,r){this.key=e,this.attributes=r,this.undirected=t,this.source=n,this.target=i}Mu.prototype.attach=function(){let t="out",e="in";this.undirected&&(t=e="undirected");const n=this.source.key,i=this.target.key;this.source[t][i]=this,!(this.undirected&&n===i)&&(this.target[e][n]=this)};Mu.prototype.attachMulti=function(){let t="out",e="in";const n=this.source.key,i=this.target.key;this.undirected&&(t=e="undirected");const r=this.source[t],s=r[i];if(typeof s>"u"){r[i]=this,this.undirected&&n===i||(this.target[e][n]=this);return}s.previous=this,this.next=s,r[i]=this,this.target[e][n]=this};Mu.prototype.detach=function(){const t=this.source.key,e=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),delete this.source[n][e],delete this.target[i][t]};Mu.prototype.detachMulti=function(){const t=this.source.key,e=this.target.key;let n="out",i="in";this.undirected&&(n=i="undirected"),this.previous===void 0?this.next===void 0?(delete this.source[n][e],delete this.target[i][t]):(this.next.previous=void 0,this.source[n][e]=this.next,this.target[i][t]=this.next):(this.previous.next=this.next,this.next!==void 0&&(this.next.previous=this.previous))};const BD=0,jD=1,_K=2,FD=3;function Co(t,e,n,i,r,s,o){let a,l,c,u;if(i=""+i,n===BD){if(a=t._nodes.get(i),!a)throw new de(`Graph.${e}: could not find the "${i}" node in the graph.`);c=r,u=s}else if(n===FD){if(r=""+r,l=t._edges.get(r),!l)throw new de(`Graph.${e}: could not find the "${r}" edge in the graph.`);const d=l.source.key,f=l.target.key;if(i===d)a=l.target;else if(i===f)a=l.source;else throw new de(`Graph.${e}: the "${i}" node is not attached to the "${r}" edge (${d}, ${f}).`);c=s,u=o}else{if(l=t._edges.get(i),!l)throw new de(`Graph.${e}: could not find the "${i}" edge in the graph.`);n===jD?a=l.source:a=l.target,c=r,u=s}return[a,c,u]}function CK(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=Co(this,e,n,i,r,s);return o.attributes[a]}}function EK(t,e,n){t.prototype[e]=function(i,r){const[s]=Co(this,e,n,i,r);return s.attributes}}function AK(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=Co(this,e,n,i,r,s);return o.attributes.hasOwnProperty(a)}}function PK(t,e,n){t.prototype[e]=function(i,r,s,o){const[a,l,c]=Co(this,e,n,i,r,s,o);return a.attributes[l]=c,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function $K(t,e,n){t.prototype[e]=function(i,r,s,o){const[a,l,c]=Co(this,e,n,i,r,s,o);if(typeof c!="function")throw new me(`Graph.${e}: updater should be a function.`);const u=a.attributes,d=c(u[l]);return u[l]=d,this.emit("nodeAttributesUpdated",{key:a.key,type:"set",attributes:a.attributes,name:l}),this}}function TK(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=Co(this,e,n,i,r,s);return delete o.attributes[a],this.emit("nodeAttributesUpdated",{key:o.key,type:"remove",attributes:o.attributes,name:a}),this}}function OK(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=Co(this,e,n,i,r,s);if(!$n(a))throw new me(`Graph.${e}: provided attributes are not a plain object.`);return o.attributes=a,this.emit("nodeAttributesUpdated",{key:o.key,type:"replace",attributes:o.attributes}),this}}function NK(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=Co(this,e,n,i,r,s);if(!$n(a))throw new me(`Graph.${e}: provided attributes are not a plain object.`);return ln(o.attributes,a),this.emit("nodeAttributesUpdated",{key:o.key,type:"merge",attributes:o.attributes,data:a}),this}}function RK(t,e,n){t.prototype[e]=function(i,r,s){const[o,a]=Co(this,e,n,i,r,s);if(typeof a!="function")throw new me(`Graph.${e}: provided updater is not a function.`);return o.attributes=a(o.attributes),this.emit("nodeAttributesUpdated",{key:o.key,type:"update",attributes:o.attributes}),this}}const MK=[{name:t=>`get${t}Attribute`,attacher:CK},{name:t=>`get${t}Attributes`,attacher:EK},{name:t=>`has${t}Attribute`,attacher:AK},{name:t=>`set${t}Attribute`,attacher:PK},{name:t=>`update${t}Attribute`,attacher:$K},{name:t=>`remove${t}Attribute`,attacher:TK},{name:t=>`replace${t}Attributes`,attacher:OK},{name:t=>`merge${t}Attributes`,attacher:NK},{name:t=>`update${t}Attributes`,attacher:RK}];function DK(t){MK.forEach(function({name:e,attacher:n}){n(t,e("Node"),BD),n(t,e("Source"),jD),n(t,e("Target"),_K),n(t,e("Opposite"),FD)})}function IK(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Re(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Re(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=wr(this,o,a,n),!s)throw new de(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Re(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new de(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes[r]}}function LK(t,e,n){t.prototype[e]=function(i){let r;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Re(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>1){if(this.multi)throw new Re(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const s=""+i,o=""+arguments[1];if(r=wr(this,s,o,n),!r)throw new de(`Graph.${e}: could not find an edge for the given path ("${s}" - "${o}").`)}else{if(n!=="mixed")throw new Re(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,r=this._edges.get(i),!r)throw new de(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return r.attributes}}function BK(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Re(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Re(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=wr(this,o,a,n),!s)throw new de(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Re(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new de(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return s.attributes.hasOwnProperty(r)}}function jK(t,e,n){t.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Re(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new Re(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,l=""+r;if(r=arguments[2],s=arguments[3],o=wr(this,a,l,n),!o)throw new de(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new Re(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new de(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return o.attributes[r]=s,this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function FK(t,e,n){t.prototype[e]=function(i,r,s){let o;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Re(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>3){if(this.multi)throw new Re(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const a=""+i,l=""+r;if(r=arguments[2],s=arguments[3],o=wr(this,a,l,n),!o)throw new de(`Graph.${e}: could not find an edge for the given path ("${a}" - "${l}").`)}else{if(n!=="mixed")throw new Re(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,o=this._edges.get(i),!o)throw new de(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof s!="function")throw new me(`Graph.${e}: updater should be a function.`);return o.attributes[r]=s(o.attributes[r]),this.emit("edgeAttributesUpdated",{key:o.key,type:"set",attributes:o.attributes,name:r}),this}}function zK(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Re(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Re(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=wr(this,o,a,n),!s)throw new de(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Re(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new de(`Graph.${e}: could not find the "${i}" edge in the graph.`)}return delete s.attributes[r],this.emit("edgeAttributesUpdated",{key:s.key,type:"remove",attributes:s.attributes,name:r}),this}}function UK(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Re(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Re(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=wr(this,o,a,n),!s)throw new de(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Re(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new de(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!$n(r))throw new me(`Graph.${e}: provided attributes are not a plain object.`);return s.attributes=r,this.emit("edgeAttributesUpdated",{key:s.key,type:"replace",attributes:s.attributes}),this}}function VK(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Re(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Re(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=wr(this,o,a,n),!s)throw new de(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Re(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new de(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(!$n(r))throw new me(`Graph.${e}: provided attributes are not a plain object.`);return ln(s.attributes,r),this.emit("edgeAttributesUpdated",{key:s.key,type:"merge",attributes:s.attributes,data:r}),this}}function HK(t,e,n){t.prototype[e]=function(i,r){let s;if(this.type!=="mixed"&&n!=="mixed"&&n!==this.type)throw new Re(`Graph.${e}: cannot find this type of edges in your ${this.type} graph.`);if(arguments.length>2){if(this.multi)throw new Re(`Graph.${e}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`);const o=""+i,a=""+r;if(r=arguments[2],s=wr(this,o,a,n),!s)throw new de(`Graph.${e}: could not find an edge for the given path ("${o}" - "${a}").`)}else{if(n!=="mixed")throw new Re(`Graph.${e}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`);if(i=""+i,s=this._edges.get(i),!s)throw new de(`Graph.${e}: could not find the "${i}" edge in the graph.`)}if(typeof r!="function")throw new me(`Graph.${e}: provided updater is not a function.`);return s.attributes=r(s.attributes),this.emit("edgeAttributesUpdated",{key:s.key,type:"update",attributes:s.attributes}),this}}const WK=[{name:t=>`get${t}Attribute`,attacher:IK},{name:t=>`get${t}Attributes`,attacher:LK},{name:t=>`has${t}Attribute`,attacher:BK},{name:t=>`set${t}Attribute`,attacher:jK},{name:t=>`update${t}Attribute`,attacher:FK},{name:t=>`remove${t}Attribute`,attacher:zK},{name:t=>`replace${t}Attributes`,attacher:UK},{name:t=>`merge${t}Attributes`,attacher:VK},{name:t=>`update${t}Attributes`,attacher:HK}];function GK(t){WK.forEach(function({name:e,attacher:n}){n(t,e("Edge"),"mixed"),n(t,e("DirectedEdge"),"directed"),n(t,e("UndirectedEdge"),"undirected")})}const KK=[{name:"edges",type:"mixed"},{name:"inEdges",type:"directed",direction:"in"},{name:"outEdges",type:"directed",direction:"out"},{name:"inboundEdges",type:"mixed",direction:"in"},{name:"outboundEdges",type:"mixed",direction:"out"},{name:"directedEdges",type:"directed"},{name:"undirectedEdges",type:"undirected"}];function XK(t,e,n,i){let r=!1;for(const s in e){if(s===i)continue;const o=e[s];if(r=n(o.key,o.attributes,o.source.key,o.target.key,o.source.attributes,o.target.attributes,o.undirected),t&&r)return o.key}}function qK(t,e,n,i){let r,s,o,a=!1;for(const l in e)if(l!==i){r=e[l];do{if(s=r.source,o=r.target,a=n(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected),t&&a)return r.key;r=r.next}while(r!==void 0)}}function Ly(t,e){const n=Object.keys(t),i=n.length;let r,s=0;return new Cr(function(){do if(r)r=r.next;else{if(s>=i)return{done:!0};const a=n[s++];if(a===e){r=void 0;continue}r=t[a]}while(!r);return{done:!1,value:{edge:r.key,attributes:r.attributes,source:r.source.key,target:r.target.key,sourceAttributes:r.source.attributes,targetAttributes:r.target.attributes,undirected:r.undirected}}})}function YK(t,e,n,i){const r=e[n];if(!r)return;const s=r.source,o=r.target;if(i(r.key,r.attributes,s.key,o.key,s.attributes,o.attributes,r.undirected)&&t)return r.key}function JK(t,e,n,i){let r=e[n];if(!r)return;let s=!1;do{if(s=i(r.key,r.attributes,r.source.key,r.target.key,r.source.attributes,r.target.attributes,r.undirected),t&&s)return r.key;r=r.next}while(r!==void 0)}function By(t,e){let n=t[e];return n.next!==void 0?new Cr(function(){if(!n)return{done:!0};const i={edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected};return n=n.next,{done:!1,value:i}}):Cr.of({edge:n.key,attributes:n.attributes,source:n.source.key,target:n.target.key,sourceAttributes:n.source.attributes,targetAttributes:n.target.attributes,undirected:n.undirected})}function ZK(t,e){if(t.size===0)return[];if(e==="mixed"||e===t.type)return typeof Array.from=="function"?Array.from(t._edges.keys()):RD(t._edges.keys(),t._edges.size);const n=e==="undirected"?t.undirectedSize:t.directedSize,i=new Array(n),r=e==="undirected",s=t._edges.values();let o=0,a,l;for(;a=s.next(),a.done!==!0;)l=a.value,l.undirected===r&&(i[o++]=l.key);return i}function zD(t,e,n,i){if(e.size===0)return;const r=n!=="mixed"&&n!==e.type,s=n==="undirected";let o,a,l=!1;const c=e._edges.values();for(;o=c.next(),o.done!==!0;){if(a=o.value,r&&a.undirected!==s)continue;const{key:u,attributes:d,source:f,target:h}=a;if(l=i(u,d,f.key,h.key,f.attributes,h.attributes,a.undirected),t&&l)return u}}function QK(t,e){if(t.size===0)return Cr.empty();const n=e!=="mixed"&&e!==t.type,i=e==="undirected",r=t._edges.values();return new Cr(function(){let o,a;for(;;){if(o=r.next(),o.done)return o;if(a=o.value,!(n&&a.undirected!==i))break}return{value:{edge:a.key,attributes:a.attributes,source:a.source.key,target:a.target.key,sourceAttributes:a.source.attributes,targetAttributes:a.target.attributes,undirected:a.undirected},done:!1}})}function sk(t,e,n,i,r,s){const o=e?qK:XK;let a;if(n!=="undirected"&&(i!=="out"&&(a=o(t,r.in,s),t&&a)||i!=="in"&&(a=o(t,r.out,s,i?void 0:r.key),t&&a))||n!=="directed"&&(a=o(t,r.undirected,s),t&&a))return a}function eX(t,e,n,i){const r=[];return sk(!1,t,e,n,i,function(s){r.push(s)}),r}function tX(t,e,n){let i=Cr.empty();return t!=="undirected"&&(e!=="out"&&typeof n.in<"u"&&(i=so(i,Ly(n.in))),e!=="in"&&typeof n.out<"u"&&(i=so(i,Ly(n.out,e?void 0:n.key)))),t!=="directed"&&typeof n.undirected<"u"&&(i=so(i,Ly(n.undirected))),i}function ok(t,e,n,i,r,s,o){const a=n?JK:YK;let l;if(e!=="undirected"&&(typeof r.in<"u"&&i!=="out"&&(l=a(t,r.in,s,o),t&&l)||typeof r.out<"u"&&i!=="in"&&(i||r.key!==s)&&(l=a(t,r.out,s,o),t&&l))||e!=="directed"&&typeof r.undirected<"u"&&(l=a(t,r.undirected,s,o),t&&l))return l}function nX(t,e,n,i,r){const s=[];return ok(!1,t,e,n,i,r,function(o){s.push(o)}),s}function iX(t,e,n,i){let r=Cr.empty();return t!=="undirected"&&(typeof n.in<"u"&&e!=="out"&&i in n.in&&(r=so(r,By(n.in,i))),typeof n.out<"u"&&e!=="in"&&i in n.out&&(e||n.key!==i)&&(r=so(r,By(n.out,i)))),t!=="directed"&&typeof n.undirected<"u"&&i in n.undirected&&(r=so(r,By(n.undirected,i))),r}function rX(t,e){const{name:n,type:i,direction:r}=e;t.prototype[n]=function(s,o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];if(!arguments.length)return ZK(this,i);if(arguments.length===1){s=""+s;const a=this._nodes.get(s);if(typeof a>"u")throw new de(`Graph.${n}: could not find the "${s}" node in the graph.`);return eX(this.multi,i==="mixed"?this.type:i,r,a)}if(arguments.length===2){s=""+s,o=""+o;const a=this._nodes.get(s);if(!a)throw new de(`Graph.${n}:  could not find the "${s}" source node in the graph.`);if(!this._nodes.has(o))throw new de(`Graph.${n}:  could not find the "${o}" target node in the graph.`);return nX(i,this.multi,r,a,o)}throw new me(`Graph.${n}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function sX(t,e){const{name:n,type:i,direction:r}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(c,u,d){if(!(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)){if(arguments.length===1)return d=c,zD(!1,this,i,d);if(arguments.length===2){c=""+c,d=u;const f=this._nodes.get(c);if(typeof f>"u")throw new de(`Graph.${s}: could not find the "${c}" node in the graph.`);return sk(!1,this.multi,i==="mixed"?this.type:i,r,f,d)}if(arguments.length===3){c=""+c,u=""+u;const f=this._nodes.get(c);if(!f)throw new de(`Graph.${s}:  could not find the "${c}" source node in the graph.`);if(!this._nodes.has(u))throw new de(`Graph.${s}:  could not find the "${u}" target node in the graph.`);return ok(!1,i,this.multi,r,f,u,d)}throw new me(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)}};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(){const c=Array.prototype.slice.call(arguments),u=c.pop();let d;if(c.length===0){let f=0;i!=="directed"&&(f+=this.undirectedSize),i!=="undirected"&&(f+=this.directedSize),d=new Array(f);let h=0;c.push((p,m,w,v,y,x,k)=>{d[h++]=u(p,m,w,v,y,x,k)})}else d=[],c.push((f,h,p,m,w,v,y)=>{d.push(u(f,h,p,m,w,v,y))});return this[s].apply(this,c),d};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(){const c=Array.prototype.slice.call(arguments),u=c.pop(),d=[];return c.push((f,h,p,m,w,v,y)=>{u(f,h,p,m,w,v,y)&&d.push(f)}),this[s].apply(this,c),d};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(){let c=Array.prototype.slice.call(arguments);if(c.length<2||c.length>4)throw new me(`Graph.${l}: invalid number of arguments (expecting 2, 3 or 4 and got ${c.length}).`);if(typeof c[c.length-1]=="function"&&typeof c[c.length-2]!="function")throw new me(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let u,d;c.length===2?(u=c[0],d=c[1],c=[]):c.length===3?(u=c[1],d=c[2],c=[c[0]]):c.length===4&&(u=c[2],d=c[3],c=[c[0],c[1]]);let f=d;return c.push((h,p,m,w,v,y,x)=>{f=u(f,h,p,m,w,v,y,x)}),this[s].apply(this,c),f}}function oX(t,e){const{name:n,type:i,direction:r}=e,s="find"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(l,c,u){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return!1;if(arguments.length===1)return u=l,zD(!0,this,i,u);if(arguments.length===2){l=""+l,u=c;const d=this._nodes.get(l);if(typeof d>"u")throw new de(`Graph.${s}: could not find the "${l}" node in the graph.`);return sk(!0,this.multi,i==="mixed"?this.type:i,r,d,u)}if(arguments.length===3){l=""+l,c=""+c;const d=this._nodes.get(l);if(!d)throw new de(`Graph.${s}:  could not find the "${l}" source node in the graph.`);if(!this._nodes.has(c))throw new de(`Graph.${s}:  could not find the "${c}" target node in the graph.`);return ok(!0,i,this.multi,r,d,c,u)}throw new me(`Graph.${s}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`)};const o="some"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[o]=function(){const l=Array.prototype.slice.call(arguments),c=l.pop();return l.push((d,f,h,p,m,w,v)=>c(d,f,h,p,m,w,v)),!!this[s].apply(this,l)};const a="every"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[a]=function(){const l=Array.prototype.slice.call(arguments),c=l.pop();return l.push((d,f,h,p,m,w,v)=>!c(d,f,h,p,m,w,v)),!this[s].apply(this,l)}}function aX(t,e){const{name:n,type:i,direction:r}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o,a){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return Cr.empty();if(!arguments.length)return QK(this,i);if(arguments.length===1){o=""+o;const l=this._nodes.get(o);if(!l)throw new de(`Graph.${s}: could not find the "${o}" node in the graph.`);return tX(i,r,l)}if(arguments.length===2){o=""+o,a=""+a;const l=this._nodes.get(o);if(!l)throw new de(`Graph.${s}:  could not find the "${o}" source node in the graph.`);if(!this._nodes.has(a))throw new de(`Graph.${s}:  could not find the "${a}" target node in the graph.`);return iX(i,r,l,a)}throw new me(`Graph.${s}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`)}}function lX(t){KK.forEach(e=>{rX(t,e),sX(t,e),oX(t,e),aX(t,e)})}const cX=[{name:"neighbors",type:"mixed"},{name:"inNeighbors",type:"directed",direction:"in"},{name:"outNeighbors",type:"directed",direction:"out"},{name:"inboundNeighbors",type:"mixed",direction:"in"},{name:"outboundNeighbors",type:"mixed",direction:"out"},{name:"directedNeighbors",type:"directed"},{name:"undirectedNeighbors",type:"undirected"}];function Zv(){this.A=null,this.B=null}Zv.prototype.wrap=function(t){this.A===null?this.A=t:this.B===null&&(this.B=t)};Zv.prototype.has=function(t){return this.A!==null&&t in this.A||this.B!==null&&t in this.B};function sd(t,e,n,i,r){for(const s in i){const o=i[s],a=o.source,l=o.target,c=a===n?l:a;if(e&&e.has(c.key))continue;const u=r(c.key,c.attributes);if(t&&u)return c.key}}function ak(t,e,n,i,r){if(e!=="mixed"){if(e==="undirected")return sd(t,null,i,i.undirected,r);if(typeof n=="string")return sd(t,null,i,i[n],r)}const s=new Zv;let o;if(e!=="undirected"){if(n!=="out"){if(o=sd(t,null,i,i.in,r),t&&o)return o;s.wrap(i.in)}if(n!=="in"){if(o=sd(t,s,i,i.out,r),t&&o)return o;s.wrap(i.out)}}if(e!=="directed"&&(o=sd(t,s,i,i.undirected,r),t&&o))return o}function uX(t,e,n){if(t!=="mixed"){if(t==="undirected")return Object.keys(n.undirected);if(typeof e=="string")return Object.keys(n[e])}const i=[];return ak(!1,t,e,n,function(r){i.push(r)}),i}function od(t,e,n){const i=Object.keys(n),r=i.length;let s=0;return new Cr(function(){let a=null;do{if(s>=r)return t&&t.wrap(n),{done:!0};const l=n[i[s++]],c=l.source,u=l.target;if(a=c===e?u:c,t&&t.has(a.key)){a=null;continue}}while(a===null);return{done:!1,value:{neighbor:a.key,attributes:a.attributes}}})}function dX(t,e,n){if(t!=="mixed"){if(t==="undirected")return od(null,n,n.undirected);if(typeof e=="string")return od(null,n,n[e])}let i=Cr.empty();const r=new Zv;return t!=="undirected"&&(e!=="out"&&(i=so(i,od(r,n,n.in))),e!=="in"&&(i=so(i,od(r,n,n.out)))),t!=="directed"&&(i=so(i,od(r,n,n.undirected))),i}function fX(t,e){const{name:n,type:i,direction:r}=e;t.prototype[n]=function(s){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return[];s=""+s;const o=this._nodes.get(s);if(typeof o>"u")throw new de(`Graph.${n}: could not find the "${s}" node in the graph.`);return uX(i==="mixed"?this.type:i,r,o)}}function hX(t,e){const{name:n,type:i,direction:r}=e,s="forEach"+n[0].toUpperCase()+n.slice(1,-1);t.prototype[s]=function(c,u){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;c=""+c;const d=this._nodes.get(c);if(typeof d>"u")throw new de(`Graph.${s}: could not find the "${c}" node in the graph.`);ak(!1,i==="mixed"?this.type:i,r,d,u)};const o="map"+n[0].toUpperCase()+n.slice(1);t.prototype[o]=function(c,u){const d=[];return this[s](c,(f,h)=>{d.push(u(f,h))}),d};const a="filter"+n[0].toUpperCase()+n.slice(1);t.prototype[a]=function(c,u){const d=[];return this[s](c,(f,h)=>{u(f,h)&&d.push(f)}),d};const l="reduce"+n[0].toUpperCase()+n.slice(1);t.prototype[l]=function(c,u,d){if(arguments.length<3)throw new me(`Graph.${l}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`);let f=d;return this[s](c,(h,p)=>{f=u(f,h,p)}),f}}function pX(t,e){const{name:n,type:i,direction:r}=e,s=n[0].toUpperCase()+n.slice(1,-1),o="find"+s;t.prototype[o]=function(c,u){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return;c=""+c;const d=this._nodes.get(c);if(typeof d>"u")throw new de(`Graph.${o}: could not find the "${c}" node in the graph.`);return ak(!0,i==="mixed"?this.type:i,r,d,u)};const a="some"+s;t.prototype[a]=function(c,u){return!!this[o](c,u)};const l="every"+s;t.prototype[l]=function(c,u){return!this[o](c,(f,h)=>!u(f,h))}}function mX(t,e){const{name:n,type:i,direction:r}=e,s=n.slice(0,-1)+"Entries";t.prototype[s]=function(o){if(i!=="mixed"&&this.type!=="mixed"&&i!==this.type)return Cr.empty();o=""+o;const a=this._nodes.get(o);if(typeof a>"u")throw new de(`Graph.${s}: could not find the "${o}" node in the graph.`);return dX(i==="mixed"?this.type:i,r,a)}}function gX(t){cX.forEach(e=>{fX(t,e),hX(t,e),pX(t,e),mX(t,e)})}function kp(t,e,n,i,r){const s=i._nodes.values(),o=i.type;let a,l,c,u,d,f,h;for(;a=s.next(),a.done!==!0;){let p=!1;if(l=a.value,o!=="undirected"){u=l.out;for(c in u){d=u[c];do{if(f=d.target,p=!0,h=r(l.key,f.key,l.attributes,f.attributes,d.key,d.attributes,d.undirected),t&&h)return d;d=d.next}while(d)}}if(o!=="directed"){u=l.undirected;for(c in u)if(!(e&&l.key>c)){d=u[c];do{if(f=d.target,f.key!==c&&(f=d.source),p=!0,h=r(l.key,f.key,l.attributes,f.attributes,d.key,d.attributes,d.undirected),t&&h)return d;d=d.next}while(d)}}if(n&&!p&&(h=r(l.key,null,l.attributes,null,null,null,null),t&&h))return null}}function vX(t,e){const n={key:t};return MD(e.attributes)||(n.attributes=ln({},e.attributes)),n}function yX(t,e,n){const i={key:e,source:n.source.key,target:n.target.key};return MD(n.attributes)||(i.attributes=ln({},n.attributes)),t==="mixed"&&n.undirected&&(i.undirected=!0),i}function wX(t){if(!$n(t))throw new me('Graph.import: invalid serialized node. A serialized node should be a plain object with at least a "key" property.');if(!("key"in t))throw new me("Graph.import: serialized node is missing its key.");if("attributes"in t&&(!$n(t.attributes)||t.attributes===null))throw new me("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.")}function bX(t){if(!$n(t))throw new me('Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a "source" & "target" property.');if(!("source"in t))throw new me("Graph.import: serialized edge is missing its source.");if(!("target"in t))throw new me("Graph.import: serialized edge is missing its target.");if("attributes"in t&&(!$n(t.attributes)||t.attributes===null))throw new me("Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.");if("undirected"in t&&typeof t.undirected!="boolean")throw new me("Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.")}const xX=kK(),SX=new Set(["directed","undirected","mixed"]),dA=new Set(["domain","_events","_eventsCount","_maxListeners"]),kX=[{name:t=>`${t}Edge`,generateKey:!0},{name:t=>`${t}DirectedEdge`,generateKey:!0,type:"directed"},{name:t=>`${t}UndirectedEdge`,generateKey:!0,type:"undirected"},{name:t=>`${t}EdgeWithKey`},{name:t=>`${t}DirectedEdgeWithKey`,type:"directed"},{name:t=>`${t}UndirectedEdgeWithKey`,type:"undirected"}],_X={allowSelfLoops:!0,multi:!1,type:"mixed"};function CX(t,e,n){if(n&&!$n(n))throw new me(`Graph.addNode: invalid attributes. Expecting an object but got "${n}"`);if(e=""+e,n=n||{},t._nodes.has(e))throw new Re(`Graph.addNode: the "${e}" node already exist in the graph.`);const i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}function fA(t,e,n){const i=new t.NodeDataClass(e,n);return t._nodes.set(e,i),t.emit("nodeAdded",{key:e,attributes:n}),i}function UD(t,e,n,i,r,s,o,a){if(!i&&t.type==="undirected")throw new Re(`Graph.${e}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`);if(i&&t.type==="directed")throw new Re(`Graph.${e}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`);if(a&&!$n(a))throw new me(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`);if(s=""+s,o=""+o,a=a||{},!t.allowSelfLoops&&s===o)throw new Re(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);const l=t._nodes.get(s),c=t._nodes.get(o);if(!l)throw new de(`Graph.${e}: source node "${s}" not found.`);if(!c)throw new de(`Graph.${e}: target node "${o}" not found.`);const u={key:null,undirected:i,source:s,target:o,attributes:a};if(n)r=t._edgeKeyGenerator();else if(r=""+r,t._edges.has(r))throw new Re(`Graph.${e}: the "${r}" edge already exists in the graph.`);if(!t.multi&&(i?typeof l.undirected[o]<"u":typeof l.out[o]<"u"))throw new Re(`Graph.${e}: an edge linking "${s}" to "${o}" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`);const d=new Mu(i,r,l,c,a);t._edges.set(r,d);const f=s===o;return i?(l.undirectedDegree++,c.undirectedDegree++,f&&(l.undirectedLoops++,t._undirectedSelfLoopCount++)):(l.outDegree++,c.inDegree++,f&&(l.directedLoops++,t._directedSelfLoopCount++)),t.multi?d.attachMulti():d.attach(),i?t._undirectedSize++:t._directedSize++,u.key=r,t.emit("edgeAdded",u),r}function EX(t,e,n,i,r,s,o,a,l){if(!i&&t.type==="undirected")throw new Re(`Graph.${e}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`);if(i&&t.type==="directed")throw new Re(`Graph.${e}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`);if(a){if(l){if(typeof a!="function")throw new me(`Graph.${e}: invalid updater function. Expecting a function but got "${a}"`)}else if(!$n(a))throw new me(`Graph.${e}: invalid attributes. Expecting an object but got "${a}"`)}s=""+s,o=""+o;let c;if(l&&(c=a,a=void 0),!t.allowSelfLoops&&s===o)throw new Re(`Graph.${e}: source & target are the same ("${s}"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`);let u=t._nodes.get(s),d=t._nodes.get(o),f,h;if(!n&&(f=t._edges.get(r),f)){if((f.source.key!==s||f.target.key!==o)&&(!i||f.source.key!==o||f.target.key!==s))throw new Re(`Graph.${e}: inconsistency detected when attempting to merge the "${r}" edge with "${s}" source & "${o}" target vs. ("${f.source.key}", "${f.target.key}").`);h=f}if(!h&&!t.multi&&u&&(h=i?u.undirected[o]:u.out[o]),h){const y=[h.key,!1,!1,!1];if(l?!c:!a)return y;if(l){const x=h.attributes;h.attributes=c(x),t.emit("edgeAttributesUpdated",{type:"replace",key:h.key,attributes:h.attributes})}else ln(h.attributes,a),t.emit("edgeAttributesUpdated",{type:"merge",key:h.key,attributes:h.attributes,data:a});return y}a=a||{},l&&c&&(a=c(a));const p={key:null,undirected:i,source:s,target:o,attributes:a};if(n)r=t._edgeKeyGenerator();else if(r=""+r,t._edges.has(r))throw new Re(`Graph.${e}: the "${r}" edge already exists in the graph.`);let m=!1,w=!1;u||(u=fA(t,s,{}),m=!0,s===o&&(d=u,w=!0)),d||(d=fA(t,o,{}),w=!0),f=new Mu(i,r,u,d,a),t._edges.set(r,f);const v=s===o;return i?(u.undirectedDegree++,d.undirectedDegree++,v&&(u.undirectedLoops++,t._undirectedSelfLoopCount++)):(u.outDegree++,d.inDegree++,v&&(u.directedLoops++,t._directedSelfLoopCount++)),t.multi?f.attachMulti():f.attach(),i?t._undirectedSize++:t._directedSize++,p.key=r,t.emit("edgeAdded",p),[r,!0,m,w]}function ic(t,e){t._edges.delete(e.key);const{source:n,target:i,attributes:r}=e,s=e.undirected,o=n===i;s?(n.undirectedDegree--,i.undirectedDegree--,o&&(n.undirectedLoops--,t._undirectedSelfLoopCount--)):(n.outDegree--,i.inDegree--,o&&(n.directedLoops--,t._directedSelfLoopCount--)),t.multi?e.detachMulti():e.detach(),s?t._undirectedSize--:t._directedSize--,t.emit("edgeDropped",{key:e.key,attributes:r,source:n.key,target:i.key,undirected:s})}class xt extends fK.EventEmitter{constructor(e){if(super(),e=ln({},_X,e),typeof e.multi!="boolean")throw new me(`Graph.constructor: invalid 'multi' option. Expecting a boolean but got "${e.multi}".`);if(!SX.has(e.type))throw new me(`Graph.constructor: invalid 'type' option. Should be one of "mixed", "directed" or "undirected" but got "${e.type}".`);if(typeof e.allowSelfLoops!="boolean")throw new me(`Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got "${e.allowSelfLoops}".`);const n=e.type==="mixed"?DD:e.type==="directed"?ID:LD;er(this,"NodeDataClass",n);const i="geid_"+xX()+"_";let r=0;const s=()=>{let o;do o=i+r++;while(this._edges.has(o));return o};er(this,"_attributes",{}),er(this,"_nodes",new Map),er(this,"_edges",new Map),er(this,"_directedSize",0),er(this,"_undirectedSize",0),er(this,"_directedSelfLoopCount",0),er(this,"_undirectedSelfLoopCount",0),er(this,"_edgeKeyGenerator",s),er(this,"_options",e),dA.forEach(o=>er(this,o,this[o])),Pr(this,"order",()=>this._nodes.size),Pr(this,"size",()=>this._edges.size),Pr(this,"directedSize",()=>this._directedSize),Pr(this,"undirectedSize",()=>this._undirectedSize),Pr(this,"selfLoopCount",()=>this._directedSelfLoopCount+this._undirectedSelfLoopCount),Pr(this,"directedSelfLoopCount",()=>this._directedSelfLoopCount),Pr(this,"undirectedSelfLoopCount",()=>this._undirectedSelfLoopCount),Pr(this,"multi",this._options.multi),Pr(this,"type",this._options.type),Pr(this,"allowSelfLoops",this._options.allowSelfLoops),Pr(this,"implementation",()=>"graphology")}_resetInstanceCounters(){this._directedSize=0,this._undirectedSize=0,this._directedSelfLoopCount=0,this._undirectedSelfLoopCount=0}hasNode(e){return this._nodes.has(""+e)}hasDirectedEdge(e,n){if(this.type==="undirected")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&!r.undirected}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?i.out.hasOwnProperty(n):!1}throw new me(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasUndirectedEdge(e,n){if(this.type==="directed")return!1;if(arguments.length===1){const i=""+e,r=this._edges.get(i);return!!r&&r.undirected}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?i.undirected.hasOwnProperty(n):!1}throw new me(`Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}hasEdge(e,n){if(arguments.length===1){const i=""+e;return this._edges.has(i)}else if(arguments.length===2){e=""+e,n=""+n;const i=this._nodes.get(e);return i?typeof i.out<"u"&&i.out.hasOwnProperty(n)||typeof i.undirected<"u"&&i.undirected.hasOwnProperty(n):!1}throw new me(`Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`)}directedEdge(e,n){if(this.type==="undirected")return;if(e=""+e,n=""+n,this.multi)throw new Re("Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.");const i=this._nodes.get(e);if(!i)throw new de(`Graph.directedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new de(`Graph.directedEdge: could not find the "${n}" target node in the graph.`);const r=i.out&&i.out[n]||void 0;if(r)return r.key}undirectedEdge(e,n){if(this.type==="directed")return;if(e=""+e,n=""+n,this.multi)throw new Re("Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.");const i=this._nodes.get(e);if(!i)throw new de(`Graph.undirectedEdge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new de(`Graph.undirectedEdge: could not find the "${n}" target node in the graph.`);const r=i.undirected&&i.undirected[n]||void 0;if(r)return r.key}edge(e,n){if(this.multi)throw new Re("Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.");e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new de(`Graph.edge: could not find the "${e}" source node in the graph.`);if(!this._nodes.has(n))throw new de(`Graph.edge: could not find the "${n}" target node in the graph.`);const r=i.out&&i.out[n]||i.undirected&&i.undirected[n]||void 0;if(r)return r.key}areDirectedNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new de(`Graph.areDirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.in||n in i.out}areOutNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new de(`Graph.areOutNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.out}areInNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new de(`Graph.areInNeighbors: could not find the "${e}" node in the graph.`);return this.type==="undirected"?!1:n in i.in}areUndirectedNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new de(`Graph.areUndirectedNeighbors: could not find the "${e}" node in the graph.`);return this.type==="directed"?!1:n in i.undirected}areNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new de(`Graph.areNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&(n in i.in||n in i.out)||this.type!=="directed"&&n in i.undirected}areInboundNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new de(`Graph.areInboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in i.in||this.type!=="directed"&&n in i.undirected}areOutboundNeighbors(e,n){e=""+e,n=""+n;const i=this._nodes.get(e);if(!i)throw new de(`Graph.areOutboundNeighbors: could not find the "${e}" node in the graph.`);return this.type!=="undirected"&&n in i.out||this.type!=="directed"&&n in i.undirected}inDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new de(`Graph.inDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree}outDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new de(`Graph.outDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree}directedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new de(`Graph.directedDegree: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree}undirectedDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new de(`Graph.undirectedDegree: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree}inboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new de(`Graph.inboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.inDegree),i}outboundDegree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new de(`Graph.outboundDegree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.outDegree),i}degree(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new de(`Graph.degree: could not find the "${e}" node in the graph.`);let i=0;return this.type!=="directed"&&(i+=n.undirectedDegree),this.type!=="undirected"&&(i+=n.inDegree+n.outDegree),i}inDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new de(`Graph.inDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree-n.directedLoops}outDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new de(`Graph.outDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.outDegree-n.directedLoops}directedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new de(`Graph.directedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="undirected"?0:n.inDegree+n.outDegree-n.directedLoops*2}undirectedDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new de(`Graph.undirectedDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);return this.type==="directed"?0:n.undirectedDegree-n.undirectedLoops*2}inboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new de(`Graph.inboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.inDegree,r+=n.directedLoops),i-r}outboundDegreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new de(`Graph.outboundDegreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.outDegree,r+=n.directedLoops),i-r}degreeWithoutSelfLoops(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new de(`Graph.degreeWithoutSelfLoops: could not find the "${e}" node in the graph.`);let i=0,r=0;return this.type!=="directed"&&(i+=n.undirectedDegree,r+=n.undirectedLoops*2),this.type!=="undirected"&&(i+=n.inDegree+n.outDegree,r+=n.directedLoops*2),i-r}source(e){e=""+e;const n=this._edges.get(e);if(!n)throw new de(`Graph.source: could not find the "${e}" edge in the graph.`);return n.source.key}target(e){e=""+e;const n=this._edges.get(e);if(!n)throw new de(`Graph.target: could not find the "${e}" edge in the graph.`);return n.target.key}extremities(e){e=""+e;const n=this._edges.get(e);if(!n)throw new de(`Graph.extremities: could not find the "${e}" edge in the graph.`);return[n.source.key,n.target.key]}opposite(e,n){e=""+e,n=""+n;const i=this._edges.get(n);if(!i)throw new de(`Graph.opposite: could not find the "${n}" edge in the graph.`);const r=i.source.key,s=i.target.key;if(e===r)return s;if(e===s)return r;throw new de(`Graph.opposite: the "${e}" node is not attached to the "${n}" edge (${r}, ${s}).`)}hasExtremity(e,n){e=""+e,n=""+n;const i=this._edges.get(e);if(!i)throw new de(`Graph.hasExtremity: could not find the "${e}" edge in the graph.`);return i.source.key===n||i.target.key===n}isUndirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new de(`Graph.isUndirected: could not find the "${e}" edge in the graph.`);return n.undirected}isDirected(e){e=""+e;const n=this._edges.get(e);if(!n)throw new de(`Graph.isDirected: could not find the "${e}" edge in the graph.`);return!n.undirected}isSelfLoop(e){e=""+e;const n=this._edges.get(e);if(!n)throw new de(`Graph.isSelfLoop: could not find the "${e}" edge in the graph.`);return n.source===n.target}addNode(e,n){return CX(this,e,n).key}mergeNode(e,n){if(n&&!$n(n))throw new me(`Graph.mergeNode: invalid attributes. Expecting an object but got "${n}"`);e=""+e,n=n||{};let i=this._nodes.get(e);return i?(n&&(ln(i.attributes,n),this.emit("nodeAttributesUpdated",{type:"merge",key:e,attributes:i.attributes,data:n})),[e,!1]):(i=new this.NodeDataClass(e,n),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:n}),[e,!0])}updateNode(e,n){if(n&&typeof n!="function")throw new me(`Graph.updateNode: invalid updater function. Expecting a function but got "${n}"`);e=""+e;let i=this._nodes.get(e);if(i){if(n){const s=i.attributes;i.attributes=n(s),this.emit("nodeAttributesUpdated",{type:"replace",key:e,attributes:i.attributes})}return[e,!1]}const r=n?n({}):{};return i=new this.NodeDataClass(e,r),this._nodes.set(e,i),this.emit("nodeAdded",{key:e,attributes:r}),[e,!0]}dropNode(e){e=""+e;const n=this._nodes.get(e);if(!n)throw new de(`Graph.dropNode: could not find the "${e}" node in the graph.`);let i;if(this.type!=="undirected"){for(const r in n.out){i=n.out[r];do ic(this,i),i=i.next;while(i)}for(const r in n.in){i=n.in[r];do ic(this,i),i=i.next;while(i)}}if(this.type!=="directed")for(const r in n.undirected){i=n.undirected[r];do ic(this,i),i=i.next;while(i)}this._nodes.delete(e),this.emit("nodeDropped",{key:e,attributes:n.attributes})}dropEdge(e){let n;if(arguments.length>1){const i=""+arguments[0],r=""+arguments[1];if(n=wr(this,i,r,this.type),!n)throw new de(`Graph.dropEdge: could not find the "${i}" -> "${r}" edge in the graph.`)}else if(e=""+e,n=this._edges.get(e),!n)throw new de(`Graph.dropEdge: could not find the "${e}" edge in the graph.`);return ic(this,n),this}dropDirectedEdge(e,n){if(arguments.length<2)throw new Re("Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new Re("Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");e=""+e,n=""+n;const i=wr(this,e,n,"directed");if(!i)throw new de(`Graph.dropDirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return ic(this,i),this}dropUndirectedEdge(e,n){if(arguments.length<2)throw new Re("Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.");if(this.multi)throw new Re("Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.");const i=wr(this,e,n,"undirected");if(!i)throw new de(`Graph.dropUndirectedEdge: could not find a "${e}" -> "${n}" edge in the graph.`);return ic(this,i),this}clear(){this._edges.clear(),this._nodes.clear(),this._resetInstanceCounters(),this.emit("cleared")}clearEdges(){const e=this._nodes.values();let n;for(;n=e.next(),n.done!==!0;)n.value.clear();this._edges.clear(),this._resetInstanceCounters(),this.emit("edgesCleared")}getAttribute(e){return this._attributes[e]}getAttributes(){return this._attributes}hasAttribute(e){return this._attributes.hasOwnProperty(e)}setAttribute(e,n){return this._attributes[e]=n,this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}updateAttribute(e,n){if(typeof n!="function")throw new me("Graph.updateAttribute: updater should be a function.");const i=this._attributes[e];return this._attributes[e]=n(i),this.emit("attributesUpdated",{type:"set",attributes:this._attributes,name:e}),this}removeAttribute(e){return delete this._attributes[e],this.emit("attributesUpdated",{type:"remove",attributes:this._attributes,name:e}),this}replaceAttributes(e){if(!$n(e))throw new me("Graph.replaceAttributes: provided attributes are not a plain object.");return this._attributes=e,this.emit("attributesUpdated",{type:"replace",attributes:this._attributes}),this}mergeAttributes(e){if(!$n(e))throw new me("Graph.mergeAttributes: provided attributes are not a plain object.");return ln(this._attributes,e),this.emit("attributesUpdated",{type:"merge",attributes:this._attributes,data:e}),this}updateAttributes(e){if(typeof e!="function")throw new me("Graph.updateAttributes: provided updater is not a function.");return this._attributes=e(this._attributes),this.emit("attributesUpdated",{type:"update",attributes:this._attributes}),this}updateEachNodeAttributes(e,n){if(typeof e!="function")throw new me("Graph.updateEachNodeAttributes: expecting an updater function.");if(n&&!uA(n))throw new me("Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._nodes.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,s.attributes=e(s.key,s.attributes);this.emit("eachNodeAttributesUpdated",{hints:n||null})}updateEachEdgeAttributes(e,n){if(typeof e!="function")throw new me("Graph.updateEachEdgeAttributes: expecting an updater function.");if(n&&!uA(n))throw new me("Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}");const i=this._edges.values();let r,s,o,a;for(;r=i.next(),r.done!==!0;)s=r.value,o=s.source,a=s.target,s.attributes=e(s.key,s.attributes,o.key,a.key,o.attributes,a.attributes,s.undirected);this.emit("eachEdgeAttributesUpdated",{hints:n||null})}forEachAdjacencyEntry(e){if(typeof e!="function")throw new me("Graph.forEachAdjacencyEntry: expecting a callback.");kp(!1,!1,!1,this,e)}forEachAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new me("Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.");kp(!1,!1,!0,this,e)}forEachAssymetricAdjacencyEntry(e){if(typeof e!="function")throw new me("Graph.forEachAssymetricAdjacencyEntry: expecting a callback.");kp(!1,!0,!1,this,e)}forEachAssymetricAdjacencyEntryWithOrphans(e){if(typeof e!="function")throw new me("Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.");kp(!1,!0,!0,this,e)}nodes(){return typeof Array.from=="function"?Array.from(this._nodes.keys()):RD(this._nodes.keys(),this._nodes.size)}forEachNode(e){if(typeof e!="function")throw new me("Graph.forEachNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)}findNode(e){if(typeof e!="function")throw new me("Graph.findNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return r.key}mapNodes(e){if(typeof e!="function")throw new me("Graph.mapNode: expecting a callback.");const n=this._nodes.values();let i,r;const s=new Array(this.order);let o=0;for(;i=n.next(),i.done!==!0;)r=i.value,s[o++]=e(r.key,r.attributes);return s}someNode(e){if(typeof e!="function")throw new me("Graph.someNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,e(r.key,r.attributes))return!0;return!1}everyNode(e){if(typeof e!="function")throw new me("Graph.everyNode: expecting a callback.");const n=this._nodes.values();let i,r;for(;i=n.next(),i.done!==!0;)if(r=i.value,!e(r.key,r.attributes))return!1;return!0}filterNodes(e){if(typeof e!="function")throw new me("Graph.filterNodes: expecting a callback.");const n=this._nodes.values();let i,r;const s=[];for(;i=n.next(),i.done!==!0;)r=i.value,e(r.key,r.attributes)&&s.push(r.key);return s}reduceNodes(e,n){if(typeof e!="function")throw new me("Graph.reduceNodes: expecting a callback.");if(arguments.length<2)throw new me("Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.");let i=n;const r=this._nodes.values();let s,o;for(;s=r.next(),s.done!==!0;)o=s.value,i=e(i,o.key,o.attributes);return i}nodeEntries(){const e=this._nodes.values();return new Cr(()=>{const n=e.next();if(n.done)return n;const i=n.value;return{value:{node:i.key,attributes:i.attributes},done:!1}})}export(){const e=new Array(this._nodes.size);let n=0;this._nodes.forEach((r,s)=>{e[n++]=vX(s,r)});const i=new Array(this._edges.size);return n=0,this._edges.forEach((r,s)=>{i[n++]=yX(this.type,s,r)}),{options:{type:this.type,multi:this.multi,allowSelfLoops:this.allowSelfLoops},attributes:this.getAttributes(),nodes:e,edges:i}}import(e,n=!1){if(e instanceof xt)return e.forEachNode((l,c)=>{n?this.mergeNode(l,c):this.addNode(l,c)}),e.forEachEdge((l,c,u,d,f,h,p)=>{n?p?this.mergeUndirectedEdgeWithKey(l,u,d,c):this.mergeDirectedEdgeWithKey(l,u,d,c):p?this.addUndirectedEdgeWithKey(l,u,d,c):this.addDirectedEdgeWithKey(l,u,d,c)}),this;if(!$n(e))throw new me("Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.");if(e.attributes){if(!$n(e.attributes))throw new me("Graph.import: invalid attributes. Expecting a plain object.");n?this.mergeAttributes(e.attributes):this.replaceAttributes(e.attributes)}let i,r,s,o,a;if(e.nodes){if(s=e.nodes,!Array.isArray(s))throw new me("Graph.import: invalid nodes. Expecting an array.");for(i=0,r=s.length;i<r;i++){o=s[i],wX(o);const{key:l,attributes:c}=o;n?this.mergeNode(l,c):this.addNode(l,c)}}if(e.edges){let l=!1;if(this.type==="undirected"&&(l=!0),s=e.edges,!Array.isArray(s))throw new me("Graph.import: invalid edges. Expecting an array.");for(i=0,r=s.length;i<r;i++){a=s[i],bX(a);const{source:c,target:u,attributes:d,undirected:f=l}=a;let h;"key"in a?(h=n?f?this.mergeUndirectedEdgeWithKey:this.mergeDirectedEdgeWithKey:f?this.addUndirectedEdgeWithKey:this.addDirectedEdgeWithKey,h.call(this,a.key,c,u,d)):(h=n?f?this.mergeUndirectedEdge:this.mergeDirectedEdge:f?this.addUndirectedEdge:this.addDirectedEdge,h.call(this,c,u,d))}}return this}nullCopy(e){const n=new xt(ln({},this._options,e));return n.replaceAttributes(ln({},this.getAttributes())),n}emptyCopy(e){const n=this.nullCopy(e);return this._nodes.forEach((i,r)=>{const s=ln({},i.attributes);i=new n.NodeDataClass(r,s),n._nodes.set(r,i)}),n}copy(e){if(e=e||{},typeof e.type=="string"&&e.type!==this.type&&e.type!=="mixed")throw new Re(`Graph.copy: cannot create an incompatible copy from "${this.type}" type to "${e.type}" because this would mean losing information about the current graph.`);if(typeof e.multi=="boolean"&&e.multi!==this.multi&&e.multi!==!0)throw new Re("Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.");if(typeof e.allowSelfLoops=="boolean"&&e.allowSelfLoops!==this.allowSelfLoops&&e.allowSelfLoops!==!0)throw new Re("Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.");const n=this.emptyCopy(e),i=this._edges.values();let r,s;for(;r=i.next(),r.done!==!0;)s=r.value,UD(n,"copy",!1,s.undirected,s.key,s.source.key,s.target.key,ln({},s.attributes));return n}toJSON(){return this.export()}toString(){return"[object Graph]"}inspect(){const e={};this._nodes.forEach((s,o)=>{e[o]=s.attributes});const n={},i={};this._edges.forEach((s,o)=>{const a=s.undirected?"--":"->";let l="",c=s.source.key,u=s.target.key,d;s.undirected&&c>u&&(d=c,c=u,u=d);const f=`(${c})${a}(${u})`;o.startsWith("geid_")?this.multi&&(typeof i[f]>"u"?i[f]=0:i[f]++,l+=`${i[f]}. `):l+=`[${o}]: `,l+=f,n[l]=s.attributes});const r={};for(const s in this)this.hasOwnProperty(s)&&!dA.has(s)&&typeof this[s]!="function"&&typeof s!="symbol"&&(r[s]=this[s]);return r.attributes=this._attributes,r.nodes=e,r.edges=n,er(r,"constructor",this.constructor),r}}typeof Symbol<"u"&&(xt.prototype[Symbol.for("nodejs.util.inspect.custom")]=xt.prototype.inspect);kX.forEach(t=>{["add","merge","update"].forEach(e=>{const n=t.name(e),i=e==="add"?UD:EX;t.generateKey?xt.prototype[n]=function(r,s,o){return i(this,n,!0,(t.type||this.type)==="undirected",null,r,s,o,e==="update")}:xt.prototype[n]=function(r,s,o,a){return i(this,n,!1,(t.type||this.type)==="undirected",r,s,o,a,e==="update")}})});DK(xt);GK(xt);lX(xt);gX(xt);class VD extends xt{constructor(e){const n=ln({type:"directed"},e);if("multi"in n&&n.multi!==!1)throw new me("DirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="directed")throw new me('DirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class lk extends xt{constructor(e){const n=ln({type:"undirected"},e);if("multi"in n&&n.multi!==!1)throw new me("UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!");if(n.type!=="undirected")throw new me('UndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class HD extends xt{constructor(e){const n=ln({multi:!0},e);if("multi"in n&&n.multi!==!0)throw new me("MultiGraph.from: inconsistent indication that the graph should be simple in given options!");super(n)}}class WD extends xt{constructor(e){const n=ln({type:"directed",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new me("MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="directed")throw new me('MultiDirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}class GD extends xt{constructor(e){const n=ln({type:"undirected",multi:!0},e);if("multi"in n&&n.multi!==!0)throw new me("MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!");if(n.type!=="undirected")throw new me('MultiUndirectedGraph.from: inconsistent "'+n.type+'" type in given options!');super(n)}}function Du(t){t.from=function(e,n){const i=ln({},e.options,n),r=new t(i);return r.import(e),r}}Du(xt);Du(VD);Du(lk);Du(HD);Du(WD);Du(GD);xt.Graph=xt;xt.DirectedGraph=VD;xt.UndirectedGraph=lk;xt.MultiGraph=HD;xt.MultiDirectedGraph=WD;xt.MultiUndirectedGraph=GD;xt.InvalidArgumentsGraphError=me;xt.NotFoundGraphError=de;xt.UsageGraphError=Re;var AX=function(e){return e!==null&&typeof e=="object"&&typeof e.addUndirectedEdgeWithKey=="function"&&typeof e.dropNode=="function"&&typeof e.multi=="boolean"},KD=Jv,PX=KD.ARRAY_BUFFER_SUPPORT,$X=KD.SYMBOL_SUPPORT,TX=function(e,n){var i,r,s,o,a;if(!e)throw new Error("obliterator/forEach: invalid iterable.");if(typeof n!="function")throw new Error("obliterator/forEach: expecting a callback.");if(Array.isArray(e)||PX&&ArrayBuffer.isView(e)||typeof e=="string"||e.toString()==="[object Arguments]"){for(s=0,o=e.length;s<o;s++)n(e[s],s);return}if(typeof e.forEach=="function"){e.forEach(n);return}if($X&&Symbol.iterator in e&&typeof e.next!="function"&&(e=e[Symbol.iterator]()),typeof e.next=="function"){for(i=e,s=0;a=i.next(),a.done!==!0;)n(a.value,s),s++;return}for(r in e)e.hasOwnProperty(r)&&n(e[r],r)},XD=Yv,OX=TX;function en(){this.clear()}en.prototype.clear=function(){this.items=[],this.offset=0,this.size=0};en.prototype.enqueue=function(t){return this.items.push(t),++this.size};en.prototype.dequeue=function(){if(this.size){var t=this.items[this.offset];return++this.offset*2>=this.items.length&&(this.items=this.items.slice(this.offset),this.offset=0),this.size--,t}};en.prototype.peek=function(){if(this.size)return this.items[this.offset]};en.prototype.forEach=function(t,e){e=arguments.length>1?e:this;for(var n=this.offset,i=0,r=this.items.length;n<r;n++,i++)t.call(e,this.items[n],i,this)};en.prototype.toArray=function(){return this.items.slice(this.offset)};en.prototype.values=function(){var t=this.items,e=this.offset;return new XD(function(){if(e>=t.length)return{done:!0};var n=t[e];return e++,{value:n,done:!1}})};en.prototype.entries=function(){var t=this.items,e=this.offset,n=0;return new XD(function(){if(e>=t.length)return{done:!0};var i=t[e];return e++,{value:[n++,i],done:!1}})};typeof Symbol<"u"&&(en.prototype[Symbol.iterator]=en.prototype.values);en.prototype.toString=function(){return this.toArray().join(",")};en.prototype.toJSON=function(){return this.toArray()};en.prototype.inspect=function(){var t=this.toArray();return Object.defineProperty(t,"constructor",{value:en,enumerable:!1}),t};typeof Symbol<"u"&&(en.prototype[Symbol.for("nodejs.util.inspect.custom")]=en.prototype.inspect);en.from=function(t){var e=new en;return OX(t,function(n){e.enqueue(n)}),e};en.of=function(){return en.from(arguments)};var NX=function(e,n){var i=n.length;if(i!==0){var r=e.length;e.length+=i;for(var s=0;s<i;s++)e[r+s]=n[s]}},qD=AX,RX=NX;function MX(t,e,n){if(!qD(t))throw new Error("graphology-shortest-path: invalid graphology instance.");if(arguments.length<3)throw new Error("graphology-shortest-path: invalid number of arguments. Expecting at least 3.");if(!t.hasNode(e))throw new Error('graphology-shortest-path: the "'+e+'" source node does not exist in the given graph.');if(!t.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" target node does not exist in the given graph.');if(e=""+e,n=""+n,e===n)return[e];var i=t.inboundNeighbors.bind(t),r=t.outboundNeighbors.bind(t),s={},o={};s[e]=null,o[n]=null;var a=[e],l=[n],c,u,d,f,h,p,m,w,v=!1;e:for(;a.length&&l.length;)if(a.length<=l.length){for(c=a,a=[],h=0,m=c.length;h<m;h++)for(u=c[h],d=r(u),p=0,w=d.length;p<w;p++)if(f=d[p],f in s||(a.push(f),s[f]=u),f in o){v=!0;break e}}else for(c=l,l=[],h=0,m=c.length;h<m;h++)for(u=c[h],d=i(u),p=0,w=d.length;p<w;p++)if(f=d[p],f in o||(l.push(f),o[f]=u),f in s){v=!0;break e}if(!v)return null;for(var y=[];f;)y.unshift(f),f=s[f];for(f=o[y[y.length-1]];f;)y.push(f),f=o[f];return y.length?y:null}function YD(t,e,n){if(!qD(e))throw new Error("graphology-shortest-path: invalid graphology instance.");if(!e.hasNode(n))throw new Error('graphology-shortest-path: the "'+n+'" source node does not exist in the given graph.');n=""+n;var i=new Set,r={},s=0;r[n]=0;for(var o=[n],a,l,c;o.length!==0;){var u=[];for(a=0,l=o.length;a<l;a++)c=o[a],!i.has(c)&&(i.add(c),RX(u,e[t](c)),r[c]=s);s++,o=u}return r}YD.bind(null,"outboundNeighbors");YD.bind(null,"neighbors");var DX=MX;const ie=new lk({allowSelfLoops:!1});ie.addNode("MBR",{position:[620,250]});ie.addNode("AX",{position:[451,45]});ie.addNode("BX",{position:[451,85]});ie.addNode("CX",{position:[451,125]});ie.addNode("DX",{position:[451,165]});ie.addNode("id",{position:[451,205]});ie.addNode("IP",{position:[451,309]});ie.addNode("SP",{position:[451,349]});ie.addNode("ri",{position:[451,388]});ie.addNode("MAR",{position:[698,349]});ie.addNode("result",{position:[370,130]});ie.addNode("FLAGS",{position:[250,225]});ie.addNode("IR",{position:[205,272]});ie.addNode("left",{position:[60,85]});ie.addNode("right",{position:[60,145]});ie.addNode("rmbr",{position:[250,390]});ie.addNode("AX join",{position:[421,45]});ie.addNode("BX join",{position:[421,85]});ie.addNode("CX join",{position:[421,125]});ie.addNode("DX join",{position:[421,165]});ie.addNode("id join",{position:[421,205]});ie.addNode("data mbr join",{position:[421,250]});ie.addNode("IP join",{position:[421,309]});ie.addNode("SP join",{position:[421,349]});ie.addNode("ri join",{position:[421,388]});ie.addNode("MAR join1",{position:[550,388]});ie.addNode("MAR join2",{position:[550,348]});ie.addNode("addresses mbr join",{position:[421,250]});ie.addNode("result mbr join",{position:[370,250]});ie.addNode("FLAGS mbr join",{position:[250,250]});ie.addNode("IR mbr join",{position:[205,250]});ie.addNode("left join",{position:[30,85]});ie.addNode("right join",{position:[30,145]});ie.addNode("operands mbr join",{position:[30,250]});ie.addNode("outr mbr join",{position:[553,250]});ie.addNode("mbr reg join",{position:[421,250]});ie.addNode("AX out",{position:[510,45]});ie.addNode("BX out",{position:[510,85]});ie.addNode("CX out",{position:[510,125]});ie.addNode("DX out",{position:[510,165]});ie.addNode("id out",{position:[510,205]});ie.addNode("AX out join",{position:[553,45]});ie.addNode("BX out join",{position:[553,85]});ie.addNode("CX out join",{position:[553,125]});ie.addNode("DX out join",{position:[553,165]});ie.addNode("id out join",{position:[553,205]});ie.addUndirectedEdge("AX","AX out");ie.addUndirectedEdge("BX","BX out");ie.addUndirectedEdge("CX","CX out");ie.addUndirectedEdge("DX","DX out");ie.addUndirectedEdge("id","id out");ie.addUndirectedEdge("AX out","AX out join");ie.addUndirectedEdge("BX out","BX out join");ie.addUndirectedEdge("CX out","CX out join");ie.addUndirectedEdge("DX out","DX out join");ie.addUndirectedEdge("id out","id out join");ie.addUndirectedEdge("AX out join","outr mbr join");ie.addUndirectedEdge("BX out join","outr mbr join");ie.addUndirectedEdge("CX out join","outr mbr join");ie.addUndirectedEdge("DX out join","outr mbr join");ie.addUndirectedEdge("id out join","outr mbr join");ie.addUndirectedEdge("outr mbr join","mbr reg join");ie.addUndirectedEdge("MBR","outr mbr join");ie.addUndirectedEdge("mbr reg join","AX join");ie.addUndirectedEdge("mbr reg join","BX join");ie.addUndirectedEdge("mbr reg join","CX join");ie.addUndirectedEdge("mbr reg join","DX join");ie.addUndirectedEdge("mbr reg join","id join");ie.addUndirectedEdge("outr mbr join","operands mbr join");ie.addUndirectedEdge("AX join","AX");ie.addUndirectedEdge("BX join","BX");ie.addUndirectedEdge("CX join","CX");ie.addUndirectedEdge("DX join","DX");ie.addUndirectedEdge("id join","data mbr join");ie.addUndirectedEdge("MBR","data mbr join");ie.addUndirectedEdge("IP","IP join");ie.addUndirectedEdge("SP","SP join");ie.addUndirectedEdge("ri","ri join");ie.addUndirectedEdge("MAR join1","ri");ie.addUndirectedEdge("MAR join2","MAR join1");ie.addUndirectedEdge("MAR","MAR join2");ie.addUndirectedEdge("IP join","SP join");ie.addUndirectedEdge("SP join","ri join");ie.addUndirectedEdge("IP join","addresses mbr join");ie.addUndirectedEdge("addresses mbr join","data mbr join");ie.addUndirectedEdge("result","result mbr join");ie.addUndirectedEdge("result mbr join","addresses mbr join");ie.addUndirectedEdge("FLAGS","FLAGS mbr join");ie.addUndirectedEdge("FLAGS mbr join","result mbr join");ie.addUndirectedEdge("IR","IR mbr join");ie.addUndirectedEdge("IR mbr join","FLAGS mbr join");ie.addUndirectedEdge("left","left join");ie.addUndirectedEdge("right","right join");ie.addUndirectedEdge("left join","right join");ie.addUndirectedEdge("right join","operands mbr join");function IX(t,e,n,i){console.log("from:",t),console.log("to:",e);const r=(c,u)=>[c,`${c} out`,`${c} out join`,"outr mbr join","mbr reg join",`${u} join`,u];let s=[];const o=["AX","BX","CX","DX","id"];if(t==="MBR"&&e==="ri"?s=["MBR","mbr reg join","outr mbr join","mbr reg join","ri join","ri","MAR join1","MAR join2","MAR"]:t==="MBR"&&o.includes(e)?s=["MBR","mbr reg join",`${e} join`,e]:o.includes(t)&&o.includes(e)?s=r(t,e):t==="IP"&&e==="id"?s=["IP","IP join","id join","id"]:t==="id"&&e==="ri"?s=["id out","id out join","outr mbr join","mbr reg join","ri join","ri","MAR join1","MAR join2","MAR"]:t==="BX"&&e==="ri"?s=["BX out","BX out join","outr mbr join","mbr reg join","ri join","ri","MAR join1","MAR join2","MAR"]:t==="id"&&e==="MBR"?s=["id out","id out join","outr mbr join","MBR"]:t==="id"&&e==="IP"&&n==="RET"?s=["MBR","mbr reg join","IP join","IP"]:s=DX(ie,t,e)||[],t==="ri"&&e==="IP"&&(s=["MBR","mbr reg join","IP join","IP"]),t==="MBR"&&e==="ri"&&["JMP","JZ","JC","CALL"].includes(n??""))return"";if(s.length===0)throw new Error(`No path from ${t} to ${e}`);const a=ie.getNodeAttribute(s[0],"position");console.log("start:",a);let l=`M ${a[0]} ${a[1]}`;for(let c=1;c<s.length;c++){const[u,d]=ie.getNodeAttribute(s[c],"position");l+=` L ${u} ${d}`}return l}function LX(){const{path:t,...e}=ft("cpu.internalBus.data");return b.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[b.jsx("path",{className:"fill-none stroke-stone-700 stroke-bus",strokeLinejoin:"round",d:["M 60 85 H 30","V 250 H 630","M 60 145 H 30","M 370 110 V 250","M 250 225 V 250","M 33 85 H 220","M 32 145 H 220","M 272 115 h 100","M 250 145 v 46","M 205 250 V 272","M 205 300 V 320","M 451 388 H 421","V 250","M 451 349 H 421","M 451 309 H 421","M 451 45 H 421","V 250","M 451 85 H 421","M 451 125 H 421","M 451 165 H 421","M 550 45 H 520","M 550 85 H 510","M 550 125 H 510","M 550 165 H 510","M 550 40 V 250"].join(" ")}),b.jsx(Kt.path,{d:t,className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:e})]})}const jy=(t,e,n,i)=>{const r=IX(t,e,n);return Qe([{key:"cpu.internalBus.data.path",from:r},{key:"cpu.internalBus.data.opacity",from:1},{key:"cpu.internalBus.data.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"})},Fy=()=>Qe({key:"cpu.internalBus.data.opacity",to:0},{duration:1,easing:"easeInSine"});let _p="";async function BX(t){switch(t.type){case"cpu:alu.execute":{const e={duration:3,easing:"easeInOutSine"};await Qe([{key:"cpu.alu.operands.opacity",from:1},{key:"cpu.alu.operands.strokeDashoffset",from:1,to:0}],e),q.set(KM,t.operation),await Promise.all([Qe({key:"cpu.alu.operation.backgroundColor",to:wt.mantis[400]},{duration:1,easing:"easeOutQuart"}),Qe({key:"cpu.alu.cog.rot",to:6},{duration:10,easing:"easeInOutCubic"})]),await Promise.all([Qe({key:"cpu.alu.operation.backgroundColor",to:wt.stone[800]},{duration:1,easing:"easeOutQuart"}),Qe([{key:"cpu.alu.results.opacity",from:1},{key:"cpu.alu.results.strokeDashoffset",from:1,to:0}],e)]),await Promise.all([or("cpu.result"),or("cpu.FLAGS")]),q.set(Et.FLAGS,t.flags),q.set(Et.result,t.result),await Promise.all([ar("cpu.result"),ar("cpu.FLAGS")]),await Qe([{key:"cpu.alu.operands.opacity",to:0},{key:"cpu.alu.results.opacity",to:0}],{duration:1,easing:"easeInSine"});return}case"cpu:cycle.end":return;case"cpu:cycle.interrupt":{q.set(us,e=>"metadata"in e?{...e,phase:"interrupt"}:e),await Qe([{key:"cpu.id.opacity",to:0},{key:"cpu.ri.opacity",to:0}],{duration:.5,easing:"easeInOutQuad"});return}case"cpu:cycle.start":{_p=t.instruction.name,t.instruction.willUse.id,HM(t.instruction.position.start),q.set(us,{phase:"fetching",metadata:t.instruction}),await Qe([{key:"cpu.id.opacity",to:t.instruction.willUse.id?.4:0},{key:"cpu.ri.opacity",to:t.instruction.willUse.ri?.4:0}],{duration:.5,easing:"easeInOutQuad"});return}case"cpu:cycle.update":{q.set(us,e=>"metadata"in e?{...e,phase:t.phase==="execute"?"executing":t.phase==="writeback"?"writeback":t.next==="fetch-operands"?"fetching-operands":t.next==="execute"?"executing":t.next==="writeback"?"writeback":e.phase}:e);return}case"cpu:decode":{await Qe([{key:"cpu.decoder.path.opacity",from:1},{key:"cpu.decoder.path.strokeDashoffset",from:1,to:0}],{duration:3,easing:"easeInOutSine"}),await Qe([{key:"cpu.decoder.progress.opacity",from:1},{key:"cpu.decoder.progress.progress",from:0,to:1}],{duration:3,easing:"easeInOutSine"}),await Qe([{key:"cpu.decoder.path.opacity",to:0},{key:"cpu.decoder.progress.opacity",to:0}],{duration:1,easing:"easeInSine"});return}case"cpu:error":{q.set(us,{phase:"stopped",error:t.error}),wu(t.error);return}case"cpu:halt":case"cpu:int.0":{q.set(us,{phase:"stopped"}),wu();return}case"cpu:int.3":{yn();return}case"cpu:int.6":{q.set(us,{phase:"int6"});return}case"cpu:int.7":{q.set(us,{phase:"int7"});return}case"cpu:inta.off":{await Yn("bus.inta");return}case"cpu:inta.on":{await yr("bus.inta",10);return}case"cpu:rd.on":case"cpu:wr.on":{const e=t.type.slice(4,6);await Qe({key:"bus.address.stroke",to:wt.blue[500]},{duration:5,easing:"easeInOutSine"}),await Qe({key:`bus.${e}.stroke`,to:wt.red[500]},{duration:5,easing:"easeOutSine"}),await Qe({key:"bus.data.stroke",to:wt.mantis[400]},{duration:5,easing:"easeOutSine"});return}case"cpu:iom.on":{await yr("bus.iom",15);return}case"cpu:mar.set":{await Qe([{key:"cpu.internalBus.address.path",from:rK(t.register)},{key:"cpu.internalBus.address.opacity",from:1},{key:"cpu.internalBus.address.strokeDashoffset",from:1,to:0}],{duration:5,easing:"easeInOutSine"}),await or("cpu.MAR",wt.blue[500]),q.set(GM,q.get(Et[t.register])),await Promise.all([ar("cpu.MAR"),Qe({key:"cpu.internalBus.address.opacity",to:0},{duration:1,easing:"easeInSine"})]);return}case"cpu:mbr.get":{const[e]=tl(t.register);await jy("MBR",e,_p),await or(`cpu.${e}`),q.set(Et[t.register],q.get(Rg)),await Promise.all([ar(`cpu.${e}`),Fy()]);return}case"cpu:mbr.set":{const[e]=tl(t.register);await jy(e,"MBR",_p),await or("cpu.MBR"),q.set(Rg,q.get(Et[t.register])),await Promise.all([ar("cpu.MBR"),Fy()]);return}case"cpu:register.copy":{const[e]=tl(t.src),[n]=tl(t.dest);e!==n&&await jy(e,n,_p),await or(`cpu.${n}`),q.set(Et[t.dest],q.get(Et[t.src])),await Promise.all([ar(`cpu.${n}`),e!==n&&Fy()]);return}case"cpu:register.update":{const[e]=tl(t.register);await or(`cpu.${e}`),q.set(Et[t.register],t.value),await ar(`cpu.${e}`);return}default:return t}}async function jX(t){switch(t.type){case"f10:press":await yr("bus.int0",2),await Yn("bus.int0");return;default:return t.type}}const ck=Ce(F.zero(8)),uk=Ce(F.zero(8));function FX(t){"handshake"in t.io&&(q.set(ck,F.fromUnsigned(t.io.handshake.DATA,8)),q.set(uk,F.fromUnsigned(t.io.handshake.STATE,8)))}async function zX(t){switch(t.type){case"handshake:read":return;case"handshake:read.ok":{await vu(t.value);return}case"handshake:write":case"handshake:register.update":{switch(await or(`handshake.${t.register}`),t.register){case"DATA":{q.set(ck,t.value);break}case"STATE":{q.set(uk,t.value);break}default:return t.register}await ar(`handshake.${t.register}`);return}case"handshake:write.ok":return;case"handshake:int.off":{await Yn("bus.int2");return}case"handshake:int.on":{await yr("bus.int2",10);return}default:return t}}async function UX(t){switch(t.type){case"keyboard:listen-key":{q.set(Nn,e=>e.type!=="running"||e.waitingForInput?e:{...e,waitingForInput:!0}),await new Promise(e=>{q.sub(Nn,()=>{const n=q.get(Nn);(n.type!=="running"||!n.waitingForInput)&&e()})});return}case"keyboard:read":return;default:return t}}const dk=Ce(F.zero(8));function VX(t){"leds"in t.io&&q.set(dk,F.fromUnsigned(t.io.leds,8))}async function HX(t){switch(t.type){case"leds:update":{await yr("bus.pio->leds",2),q.set(dk,t.state),await Yn("bus.pio->leds");return}default:return t.type}}const fk=Ce(new Array(we.MAX_ADDRESS+1).fill(F.zero(8))),yu=Ce(we.from(32)),JD=Ce(null),Cp=16,WX=Ce(t=>{const e=t(JD)??t(yu);let n=e.value-e.value%Cp,i=n+Cp-1;i>we.MAX_ADDRESS&&(i=we.MAX_ADDRESS,n=i-Cp+1);const r=t(fk),s=[];for(let o=0;o<Cp;o++)s.push({address:we.from(n+o),value:r[n+o]});return s});function GX(t){q.set(fk,t.memory.map(e=>F.fromUnsigned(e,8))),q.set(yu,we.from(32))}async function KX(t){switch(t.type){case"memory:read":return;case"memory:read.ok":{q.set(yu,we.from(t.address)),await Qe({key:"memory.operating-cell.color",to:wt.mantis[400]},{duration:1,easing:"easeOutQuart"}),await vu(t.value),await Qe({key:"memory.operating-cell.color",to:wt.white},{duration:1,easing:"easeOutQuart"});return}case"memory:write":return;case"memory:write.ok":{q.set(yu,we.from(t.address)),await Qe({key:"memory.operating-cell.color",to:wt.mantis[400]},{duration:1,easing:"easeOutQuart"}),q.set(fk,e=>[...e.slice(0,t.address.value),t.value,...e.slice(t.address.value+1)]),await Qe({key:"memory.operating-cell.color",to:wt.white},{duration:1,easing:"easeOutQuart"});return}case"memory:read.error":case"memory:write.error":{wu(t.error);return}default:return t}}const hk=Ce(F.fromUnsigned(255,8)),pk=Ce(F.fromUnsigned(0,8)),mk=Ce(F.fromUnsigned(0,8)),jg=[Ce(F.zero(8)),Ce(F.zero(8)),Ce(F.zero(8)),Ce(F.zero(8)),Ce(F.zero(8)),Ce(F.zero(8)),Ce(F.zero(8)),Ce(F.zero(8))];function XX(t){if("pic"in t.io){q.set(hk,F.fromUnsigned(t.io.pic.IMR,8)),q.set(pk,F.fromUnsigned(t.io.pic.IRR,8)),q.set(mk,F.fromUnsigned(t.io.pic.ISR,8));for(let e=0;e<jg.length;e++)q.set(jg[e],F.fromUnsigned(t.io.pic.lines[e],8))}}async function qX(t){switch(t.type){case"pic:read":return;case"pic:read.ok":{await vu(t.value);return}case"pic:write":return;case"pic:register.update":{switch(await or(`pic.${t.register}`),t.register){case"IMR":{q.set(hk,t.value);break}case"IRR":{q.set(pk,t.value);break}case"ISR":{q.set(mk,t.value);break}case"INT0":case"INT1":case"INT2":case"INT3":case"INT4":case"INT5":case"INT6":case"INT7":{const e=Number(t.register.slice(3));q.set(jg[e],t.value);break}default:return t}await ar(`pic.${t.register}`);return}case"pic:write.ok":return;case"pic:intr.off":{await Yn("bus.intr");return}case"pic:intr.on":{await yr("bus.intr",10);return}case"pic:int.send":{await vu(t.number);return}default:return t}}const gk=Ce(F.zero(8)),vk=Ce(F.zero(8)),yk=Ce(F.zero(8)),wk=Ce(F.zero(8));function YX(t){"pio"in t.io&&(q.set(gk,F.fromUnsigned(t.io.pio.PA,8)),q.set(vk,F.fromUnsigned(t.io.pio.PB,8)),q.set(yk,F.fromUnsigned(t.io.pio.CA,8)),q.set(wk,F.fromUnsigned(t.io.pio.CB,8)))}async function JX(t){switch(t.type){case"pio:read":return;case"pio:read.ok":{await vu(t.value);return}case"pio:write":return;case"pio:register.update":{switch(await or(`pio.${t.register}`),t.register){case"PA":{q.set(gk,t.value);break}case"PB":{q.set(vk,t.value);break}case"CA":{q.set(yk,t.value);break}case"CB":{q.set(wk,t.value);break}default:return t.register}await ar(`pio.${t.register}`);return}case"pio:write.ok":return;default:return t}}const Fg=Ce([]),zg=Ce("");function ZX(t){"printer"in t.io&&(q.set(Fg,t.io.printer.buffer.map(e=>F.fromUnsigned(e,8))),q.set(zg,t.io.printer.paper))}async function QX(t){switch(t.type){case"printer:buffer.add":{q.set(Fg,e=>[...e,t.char]);return}case"printer:buffer.pop":{q.set(Fg,e=>e.slice(1));return}case"printer:busy.off":{await Yn("bus.printer.busy");return}case"printer:busy.on":{await yr("bus.printer.busy",15);return}case"printer:data.read":{await yr("bus.printer.data",15),await Yn("bus.printer.data");return}case"printer:paper.print":{q.set(zg,e=>e+t.char);return}case"printer:paper.replace":{q.set(zg,"");return}case"printer:strobe.off":{await Yn("bus.printer.strobe");return}case"printer:strobe.on":{await yr("bus.printer.strobe",15);return}default:return t}}const bk=Ce("");function eq(t){"screen"in t.io&&q.set(bk,t.io.screen)}async function tq(t){switch(t.type){case"screen:send-char":{q.set(bk,t.output);return}default:return t.type}}const xk=Ce(F.zero(8));function nq(t){"switches"in t.io&&q.set(xk,F.fromUnsigned(t.io.switches,8))}async function iq(t){switch(t.type){case"switches:toggle":{q.set(xk,e=>e.withBit(t.index,!e.bit(t.index))),await yr("bus.switches->pio",2),await Yn("bus.switches->pio");return}default:return t.type}}const Sk=Ce(F.zero(8)),kk=Ce(F.zero(8));function rq(t){"timer"in t.io&&(q.set(Sk,F.fromUnsigned(t.io.timer.CONT,8)),q.set(kk,F.fromUnsigned(t.io.timer.COMP,8)))}async function sq(t){switch(t.type){case"timer:read":return;case"timer:read.ok":{await vu(t.value);return}case"timer:write":return;case"timer:register.update":{switch(await or(`timer.${t.register}`),t.register){case"CONT":{q.set(Sk,t.value);break}case"COMP":{q.set(kk,t.value);break}default:return t.register}await ar(`timer.${t.register}`);return}case"timer:write.ok":return;case"timer:int.off":{await Yn("bus.int1");return}case"timer:int.on":{await yr("bus.int1",10);return}default:return t}}const k1=new Set;async function oq(t){lq(t);const[e]=t.type.split(":",2);switch(k1.add(t.type),e){case"bus":{await nK(t);break}case"clock":{await iK(t);break}case"cpu":{await BX(t);break}case"f10":{await jX(t);break}case"handshake":{await zX(t);break}case"keyboard":{await UX(t);break}case"leds":{await HX(t);break}case"memory":{await KX(t);break}case"pic":{await qX(t);break}case"pio":{await JX(t);break}case"printer":{await QX(t);break}case"screen":{await tq(t);break}case"switches":{await iq(t);break}case"timer":{await sq(t);break}default:return e}k1.delete(t.type)}function hA(...t){for(const e of t)if(k1.has(e))return!0;return!1}const aq={bus:"#2563eb",clock:"#65a30d",cpu:"#dc2626",f10:"#65a30d",handshake:"#2563eb",keyboard:"#65a30d",leds:"#65a30d",memory:"#f59e0b",pic:"#2563eb",pio:"#2563eb",printer:"#65a30d",screen:"#65a30d",switches:"#65a30d",timer:"#2563eb"};function lq(t){const[e,n]=t.type.split(":",2);console.group(`%c ${e} %c ${n}`,`background: ${aq[e]}; color: #fff; font-weight: bold;`,"background: unset; color: unset; font-weight: normal;");for(const i in t)if(i!=="type"&&Object.prototype.hasOwnProperty.call(t,i)){const r=t[i];r instanceof F?console.log(`${i}: %c${r.toString("hex")}h %c(Byte)`,"color: #8b5cf6;","color: #737373;"):r instanceof we?console.log(`${i}: %c${r.toString()} %c(MemoryAddress)`,"color: #8b5cf6;","color: #737373;"):r instanceof qi?console.log(`${i}: %c${r.toString()} %c(IOAddress)`,"color: #8b5cf6;","color: #737373;"):typeof r=="number"?console.log(`${i}: %c${r.toString(16)}h %c(number)`,"color: #8b5cf6;","color: #737373;"):typeof r=="string"?console.log(`${i}: %c"${r}" %c(string)`,"color: #f97316;","color: #737373;"):typeof r=="boolean"?console.log(`${i}: %c${r}`,"color: #06b6d4;"):r===null?console.log(`${i}: %cnull`,"color: #b91c1c;"):console.log(`${i}:`,r)}console.groupEnd()}const jn=new $W,Nn=Ce({type:"stopped"});function cq(t){const e=t.translate(bi().language);gi({title:e,variant:"error"})}function wu(t){t&&cq(t),HM(null),VM(!1),q.set(Nn,{type:"stopped",error:t}),q.set(us,{phase:"stopped",error:t}),SD()}function yn(){q.set(Nn,{type:"paused"}),eK()}function uq(){gi({title:Mv(bi().language,"messages.assemble-error"),variant:"error"})}function rc(){gi({title:Mv(bi().language,"messages.invalid-action"),variant:"error"})}function dq(t){RW(t),GX(t),FX(t),XX(t),YX(t),rq(t),VX(t),ZX(t),eq(t),nq(t)}let Pi=null,Ga=0,To=0,ad="",ld=!0,zy=!0;async function il(t){try{for(;;){const e=q.get(Nn),n=bi();if(e.type==="stopped"){Ga=0,To=0,ad="";break}if(e.type==="paused"){await new Promise(r=>{const s=q.sub(Nn,()=>{s(),r()})});continue}const i=t.next();if(i.done)break;if(await oq(i.value),i.value.type==="cpu:cycle.start"&&(Pi=i.value.instruction.name),e.until==="cycle-change"){if(i.value.type==="cpu:cycle.end"){Ga=0,To=0,ad="",yn();continue}else i.value.type==="cpu:int.6"?(q.set(Jt,"PILA  DL; DL  ASCII; (BL)  DL; IRET"),yn()):i.value.type==="cpu:int.7"&&(q.set(Jt,"PILA  DL; Bucle: DL  (BL); video  DL; SUB AL, 1; JNZ Bucle; (BL)  DL; IRET"),yn());if(Ga<3)i.value.type==="cpu:mar.set"?(i.value.register==="SP"?(Ga=3,To=3,q.set(Jt,"Ejecucin: MAR  SP")):q.set(Jt,"Captacin: MAR  IP"),yn(),Ga++):i.value.type==="cpu:register.update"?(q.set(Jt,"Captacin: MBR  read(Memoria[MAR]); IP  IP + 1"),yn(),Ga++):i.value.type==="cpu:mbr.get"&&(q.set(Jt,"Captacin: IR  MBR"),yn(),Ga++);else if(i.value.type==="cpu:rd.on"&&To>1?ad="Ejecucin: MBR  read(Memoria[MAR])":i.value.type==="cpu:wr.on"&&(ad="Ejecucin: write(Memoria[MAR])  MBR"),i.value.type==="cpu:mar.set"){const r=i.value.register,s=r==="ri"?"MBR":r;ld&&q.set(Jt,`Ejecucin: MAR  ${s}`),yn(),To++}else if(i.value.type==="cpu:register.update"){const r=i.value.register;let s="";ld=!0,r==="SP"?((Pi==="CALL"||Pi==="INT"&&zy)&&(s="SP = SP - 1"),(Pi==="RET"||Pi==="IRET"||!zy&&Pi==="INT")&&(s="SP = SP + 1")):r==="FLAGS"?s="IF = 0":r==="DL"&&Pi==="INT"?(s="DL  ASCII",zy=!1):r==="right.l"&&Pi==="INT"?s="SUB AL, 1":r==="right"&&Pi==="INT"?s="ADD BL, 1":r==="ri.l"&&Pi==="INT"?(s="MAR  (video)",ld=!1):s=r==="IP"?"Ejecucin: MBR  read(Memoria[MAR]); IP  IP + 1":`Ejecucin: MBR  ${r}`,q.set(Jt,s),s!=="MAR  (video)"&&yn(),To++}else if(i.value.type==="cpu:mbr.get"){const r=i.value.register==="id.l"?"id":i.value.register==="IP.l"?"IP":i.value.register==="FLAGS.l"?"FLAGS":i.value.register;String(r)!=="ri.l"&&(q.set(Jt,`Ejecucin: ${r}  MBR`),(String(r)==="id"||String(r)==="DL"&&Pi==="INT")&&yn())}else if(i.value.type==="cpu:register.copy"){const r=i.value.src,s=i.value.dest;let a=`Ejecucin: ${s}  ${r==="result.l"?"ALU":r}`;r==="ri.l"&&s==="IP.l"?(a="Ejecucin: IP  MBR",q.set(Jt,a),yn()):s==="left"&&Pi==="INT"?a="ADD BL, 1":(r==="result"||r==="result.l")&&Pi==="INT"?yn():r==="IP.l"&&s==="id.l"?(a="Ejecucin: id  IP",q.set(Jt,a),yn()):r==="id.l"&&s==="ri.l"?(a="Ejecucin: MAR  id",ld=!1,q.set(Jt,a)):r==="MBR"&&s==="ri.l"?(a="Ejecucin: MAR  MBR",q.set(Jt,a)):r==="id"&&s==="IP"?(a="Ejecucin: IP  MBR",q.set(Jt,a),yn()):r==="BL"&&s==="ri.l"||r==="BX"&&s==="ri"?(a="Ejecucin: MAR  BL",q.set(Jt,a),ld=!1,To++):q.set(Jt,a)}else if(i.value.type==="bus:reset"&&To>1)q.set(Jt,ad),yn();else if(i.value.type==="cpu:mbr.set"){const r=i.value.register==="id.l"?"id":i.value.register==="FLAGS.l"?"FLAGS":i.value.register==="IP.l"?"IP":i.value.register;q.set(Jt,`Ejecucin: MBR  ${r}`),yn()}}else q.set(Jt,"");i.value.type==="cpu:cycle.update"||i.value.type==="cpu:cycle.interrupt"?e.until==="cycle-change"||n.animations||await new Promise(r=>setTimeout(r,n.executionUnit)):i.value.type==="cpu:cycle.end"&&(e.until==="cycle-change"||e.until==="end-of-instruction"?yn():n.animations||await new Promise(r=>setTimeout(r,n.executionUnit)))}t.return()}catch(e){const n=tt.from(e);wu(n)}}async function fq(...t){const e=t[0],n=q.get(Nn);switch(e){case"cpu.run":{if(n.type==="running")return rc();const i=t[1];if(n.type==="stopped"){if(!window.codemirror)return;const r=window.codemirror.state.doc.toString(),s=IM(r);if(!s.success)return uq();VM(!0),jn.loadProgram({program:s,data:bi().dataOnLoad,devices:bi().devices}),dq(jn.getComputerState());const o=["Start CPU",{until:i,devices:bi().devices,language:bi().language,animations:bi().animations?"yes":"no"}];WM.capture(...o),q.set(Nn,{type:"running",until:i,waitingForInput:!1}),il(jn.startCPU()),hq(),pq()}else q.set(Nn,{type:"running",until:i,waitingForInput:!1}),tK();return}case"cpu.stop":{wu();return}case"f10.press":{if(!jn.devices.f10.connected()||n.type!=="running")return rc();if(hA("f10:press"))return;il(jn.devices.f10.press());return}case"switch.toggle":{if(n.type!=="running"||!jn.devices.switches.connected())return rc();if(hA("switches:toggle"))return;const i=t[1];il(jn.devices.switches.toggle(i));return}case"keyboard.sendChar":{if(n.type!=="running"||!n.waitingForInput)return rc();jn.devices.keyboard.readChar(F.fromChar(t[1])),q.set(Nn,{...n,waitingForInput:!1});return}case"screen.clean":{if(!jn.devices.screen.connected())return rc();il(jn.devices.screen.clear());return}case"printer.clean":{if(!jn.devices.printer.connected())return rc();il(jn.devices.printer.clear());return}default:return e}}async function hq(){if(jn.devices.clock.connected())for(;q.get(Nn).type!=="stopped";){const t=bi().clockSpeed;await Qe({key:"clock.angle",from:0,to:360},{duration:t,forceMs:!0,easing:"linear"}),il(jn.devices.clock.tick())}}async function pq(){if(jn.devices.printer.connected())for(;q.get(Nn).type!=="stopped";){const t=bi().printerSpeed;await Qe([{key:"printer.printing.opacity",from:1},{key:"printer.printing.progress",from:0,to:1}],{duration:t,forceMs:!0,easing:"easeInOutSine"}),await Qe({key:"printer.printing.opacity",to:0},{duration:1,easing:"easeInSine"}),il(jn.devices.printer.print())}}function gn(){const t=Vt(Nn),e=KV(),n=g.useMemo(()=>({preset:e,hasIOBus:e==="pio-switches-and-leds"||e==="pio-printer"||e==="handshake",clock:e==="pio-switches-and-leds"||e==="pio-printer"||e==="handshake",f10:e==="pio-switches-and-leds"||e==="pio-printer"||e==="handshake",keyboard:e==="keyboard-and-screen"||e==="pio-switches-and-leds"||e==="pio-printer"||e==="handshake",handshake:e==="handshake",leds:e==="pio-switches-and-leds",pic:e==="pio-switches-and-leds"||e==="pio-printer"||e==="handshake",pio:e==="pio-switches-and-leds"||e==="pio-printer",printer:e==="pio-printer"||e==="handshake",screen:e==="keyboard-and-screen"||e==="pio-switches-and-leds"||e==="pio-printer"||e==="handshake",switches:e==="pio-switches-and-leds",timer:e==="pio-switches-and-leds"||e==="pio-printer"||e==="handshake"}),[e]);return{status:t,dispatch:fq,devices:n}}function mq({className:t}){const e=St(),{status:n,dispatch:i}=gn(),r=g.useCallback(()=>{n.type!=="running"&&i("cpu.run","cycle-change")},[n.type,i]);io("F7",a=>{a.preventDefault(),r()},void 0,[r]);const s=g.useCallback(()=>{n.type!=="running"&&i("cpu.run","end-of-instruction")},[n.type,i]);io("F8",a=>{a.preventDefault(),s()},void 0,[s]);const o=g.useCallback(()=>{n.type!=="running"&&i("cpu.run","infinity")},[n.type,i]);return io("F4",a=>{a.preventDefault(),o()},void 0,[o]),b.jsxs("div",{className:He("flex items-center justify-center gap-4",t),children:[b.jsxs(gM,{children:[b.jsx(vM,{asChild:!0,children:b.jsx("button",{disabled:n.type==="running",className:"inline-flex h-9 items-center justify-center whitespace-nowrap rounded-md bg-mantis-500 px-3 text-sm text-white ring-offset-stone-900 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-mantis-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",children:n.type==="stopped"?b.jsxs(b.Fragment,{children:[b.jsx("span",{className:"icon-[lucide--play] mr-2 h-4 w-4"}),e("control.action.start")]}):n.type==="paused"?b.jsxs(b.Fragment,{children:[b.jsx("span",{className:"icon-[lucide--play] mr-2 h-4 w-4"}),e("control.action.continue")]}):b.jsxs(b.Fragment,{children:[b.jsx("span",{className:"icon-[lucide--refresh-cw] mr-2 h-4 w-4 animate-spin"}),e("control.action.running")]})})}),b.jsxs(RS,{className:"w-56",align:"start",children:[b.jsxs(vl,{disabled:n.type==="running",onClick:r,children:[b.jsx("span",{className:"icon-[lucide--chevron-right] mr-2 h-4 w-4"}),e("control.action.run.cycle-change"),b.jsx("div",{className:"grow"}),b.jsx("kbd",{className:"text-stone-600",children:"F7"})]}),b.jsxs(vl,{disabled:n.type==="running",onClick:s,children:[b.jsx("span",{className:"icon-[lucide--chevrons-right] mr-2 h-4 w-4"}),e("control.action.run.end-of-instruction"),b.jsx("div",{className:"grow"}),b.jsx("kbd",{className:"text-stone-600",children:"F8"})]}),b.jsxs(vl,{disabled:n.type==="running",onClick:o,children:[b.jsx("span",{className:"icon-[lucide--infinity] mr-2 h-4 w-4"}),e("control.action.run.infinity"),b.jsx("div",{className:"grow"}),b.jsx("kbd",{className:"text-stone-600",children:"F4"})]})]})]}),b.jsxs("button",{disabled:n.type==="stopped",onClick:()=>i("cpu.stop"),className:"inline-flex h-9 items-center justify-center whitespace-nowrap rounded-md bg-mantis-500 px-3 text-sm text-white ring-offset-stone-900 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-mantis-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",children:[b.jsx("span",{className:"icon-[lucide--stop-circle] mr-2 h-4 w-4"}),e("control.action.stop")]})]})}function Ug(t,[e,n]){return Math.min(n,Math.max(e,t))}function _k(t){const e=g.useRef({value:t,previous:t});return g.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}const Ck=g.forwardRef((t,e)=>g.createElement(Ge.span,be({},t,{ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}))),gq=[" ","Enter","ArrowUp","ArrowDown"],vq=[" ","Enter"],Qv="Select",[e0,Ek,yq]=ch(Qv),[Iu,Une]=es(Qv,[yq,Ru]),Ak=Ru(),[wq,Gl]=Iu(Qv),[bq,xq]=Iu(Qv),Sq=t=>{const{__scopeSelect:e,children:n,open:i,defaultOpen:r,onOpenChange:s,value:o,defaultValue:a,onValueChange:l,dir:c,name:u,autoComplete:d,disabled:f,required:h}=t,p=Ak(e),[m,w]=g.useState(null),[v,y]=g.useState(null),[x,k]=g.useState(!1),_=uh(c),[P=!1,A]=uo({prop:i,defaultProp:r,onChange:s}),[C,N]=uo({prop:o,defaultProp:a,onChange:l}),R=g.useRef(null),M=m?!!m.closest("form"):!0,[L,H]=g.useState(new Set),T=Array.from(L).map(V=>V.props.value).join(";");return g.createElement(kS,p,g.createElement(wq,{required:h,scope:e,trigger:m,onTriggerChange:w,valueNode:v,onValueNodeChange:y,valueNodeHasChildren:x,onValueNodeHasChildrenChange:k,contentId:Tl(),value:C,onValueChange:N,open:P,onOpenChange:A,dir:_,triggerPointerDownPosRef:R,disabled:f},g.createElement(e0.Provider,{scope:e},g.createElement(bq,{scope:t.__scopeSelect,onNativeOptionAdd:g.useCallback(V=>{H(Y=>new Set(Y).add(V))},[]),onNativeOptionRemove:g.useCallback(V=>{H(Y=>{const ne=new Set(Y);return ne.delete(V),ne})},[])},n)),M?g.createElement(eI,{key:T,"aria-hidden":!0,required:h,tabIndex:-1,name:u,autoComplete:d,value:C,onChange:V=>N(V.target.value),disabled:f},C===void 0?g.createElement("option",{value:""}):null,Array.from(L)):null))},kq="SelectTrigger",_q=g.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:i=!1,...r}=t,s=Ak(n),o=Gl(kq,n),a=o.disabled||i,l=st(e,o.onTriggerChange),c=Ek(n),[u,d,f]=tI(p=>{const m=c().filter(y=>!y.disabled),w=m.find(y=>y.value===o.value),v=nI(m,p,w);v!==void 0&&o.onValueChange(v.value)}),h=()=>{a||(o.onOpenChange(!0),f())};return g.createElement(_S,be({asChild:!0},s),g.createElement(Ge.button,be({type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":QD(o.value)?"":void 0},r,{ref:l,onClick:ve(r.onClick,p=>{p.currentTarget.focus()}),onPointerDown:ve(r.onPointerDown,p=>{const m=p.target;m.hasPointerCapture(p.pointerId)&&m.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&(h(),o.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)},p.preventDefault())}),onKeyDown:ve(r.onKeyDown,p=>{const m=u.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&d(p.key),!(m&&p.key===" ")&&gq.includes(p.key)&&(h(),p.preventDefault())})})))}),Cq="SelectValue",Eq=g.forwardRef((t,e)=>{const{__scopeSelect:n,className:i,style:r,children:s,placeholder:o="",...a}=t,l=Gl(Cq,n),{onValueNodeHasChildrenChange:c}=l,u=s!==void 0,d=st(e,l.onValueNodeChange);return kr(()=>{c(u)},[c,u]),g.createElement(Ge.span,be({},a,{ref:d,style:{pointerEvents:"none"}}),QD(l.value)?g.createElement(g.Fragment,null,o):s)}),Aq=g.forwardRef((t,e)=>{const{__scopeSelect:n,children:i,...r}=t;return g.createElement(Ge.span,be({"aria-hidden":!0},r,{ref:e}),i||"")}),Pq=t=>g.createElement(Tv,be({asChild:!0},t)),bu="SelectContent",$q=g.forwardRef((t,e)=>{const n=Gl(bu,t.__scopeSelect),[i,r]=g.useState();if(kr(()=>{r(new DocumentFragment)},[]),!n.open){const s=i;return s?bo.createPortal(g.createElement(ZD,{scope:t.__scopeSelect},g.createElement(e0.Slot,{scope:t.__scopeSelect},g.createElement("div",null,t.children))),s):null}return g.createElement(Tq,be({},t,{ref:e}))}),js=10,[ZD,t0]=Iu(bu),Tq=g.forwardRef((t,e)=>{const{__scopeSelect:n,position:i="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:s,onPointerDownOutside:o,side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:h,sticky:p,hideWhenDetached:m,avoidCollisions:w,...v}=t,y=Gl(bu,n),[x,k]=g.useState(null),[_,P]=g.useState(null),A=st(e,S=>k(S)),[C,N]=g.useState(null),[R,M]=g.useState(null),L=Ek(n),[H,T]=g.useState(!1),V=g.useRef(!1);g.useEffect(()=>{if(x)return ES(x)},[x]),pS();const Y=g.useCallback(S=>{const[$,...D]=L().map(X=>X.ref.current),[O]=D.slice(-1),U=document.activeElement;for(const X of S)if(X===U||(X==null||X.scrollIntoView({block:"nearest"}),X===$&&_&&(_.scrollTop=0),X===O&&_&&(_.scrollTop=_.scrollHeight),X==null||X.focus(),document.activeElement!==U))return},[L,_]),ne=g.useCallback(()=>Y([C,x]),[Y,C,x]);g.useEffect(()=>{H&&ne()},[H,ne]);const{onOpenChange:W,triggerPointerDownPosRef:j}=y;g.useEffect(()=>{if(x){let S={x:0,y:0};const $=O=>{var U,X,te,J;S={x:Math.abs(Math.round(O.pageX)-((U=(X=j.current)===null||X===void 0?void 0:X.x)!==null&&U!==void 0?U:0)),y:Math.abs(Math.round(O.pageY)-((te=(J=j.current)===null||J===void 0?void 0:J.y)!==null&&te!==void 0?te:0))}},D=O=>{S.x<=10&&S.y<=10?O.preventDefault():x.contains(O.target)||W(!1),document.removeEventListener("pointermove",$),j.current=null};return j.current!==null&&(document.addEventListener("pointermove",$),document.addEventListener("pointerup",D,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",$),document.removeEventListener("pointerup",D,{capture:!0})}}},[x,W,j]),g.useEffect(()=>{const S=()=>W(!1);return window.addEventListener("blur",S),window.addEventListener("resize",S),()=>{window.removeEventListener("blur",S),window.removeEventListener("resize",S)}},[W]);const[Q,K]=tI(S=>{const $=L().filter(U=>!U.disabled),D=$.find(U=>U.ref.current===document.activeElement),O=nI($,S,D);O&&setTimeout(()=>O.ref.current.focus())}),ee=g.useCallback((S,$,D)=>{const O=!V.current&&!D;(y.value!==void 0&&y.value===$||O)&&(N(S),O&&(V.current=!0))},[y.value]),le=g.useCallback(()=>x==null?void 0:x.focus(),[x]),B=g.useCallback((S,$,D)=>{const O=!V.current&&!D;(y.value!==void 0&&y.value===$||O)&&M(S)},[y.value]),I=i==="popper"?pA:Oq,z=I===pA?{side:a,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:f,collisionPadding:h,sticky:p,hideWhenDetached:m,avoidCollisions:w}:{};return g.createElement(ZD,{scope:n,content:x,viewport:_,onViewportChange:P,itemRefCallback:ee,selectedItem:C,onItemLeave:le,itemTextRefCallback:B,focusSelectedItem:ne,selectedItemText:R,position:i,isPositioned:H,searchRef:Q},g.createElement(AS,{as:$l,allowPinchZoom:!0},g.createElement(mS,{asChild:!0,trapped:y.open,onMountAutoFocus:S=>{S.preventDefault()},onUnmountAutoFocus:ve(r,S=>{var $;($=y.trigger)===null||$===void 0||$.focus({preventScroll:!0}),S.preventDefault()})},g.createElement(Av,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:o,onFocusOutside:S=>S.preventDefault(),onDismiss:()=>y.onOpenChange(!1)},g.createElement(I,be({role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:S=>S.preventDefault()},v,z,{onPlaced:()=>T(!0),ref:A,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:ve(v.onKeyDown,S=>{const $=S.ctrlKey||S.altKey||S.metaKey;if(S.key==="Tab"&&S.preventDefault(),!$&&S.key.length===1&&K(S.key),["ArrowUp","ArrowDown","Home","End"].includes(S.key)){let O=L().filter(U=>!U.disabled).map(U=>U.ref.current);if(["ArrowUp","End"].includes(S.key)&&(O=O.slice().reverse()),["ArrowUp","ArrowDown"].includes(S.key)){const U=S.target,X=O.indexOf(U);O=O.slice(X+1)}setTimeout(()=>Y(O)),S.preventDefault()}})}))))))}),Oq=g.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:i,...r}=t,s=Gl(bu,n),o=t0(bu,n),[a,l]=g.useState(null),[c,u]=g.useState(null),d=st(e,A=>u(A)),f=Ek(n),h=g.useRef(!1),p=g.useRef(!0),{viewport:m,selectedItem:w,selectedItemText:v,focusSelectedItem:y}=o,x=g.useCallback(()=>{if(s.trigger&&s.valueNode&&a&&c&&m&&w&&v){const A=s.trigger.getBoundingClientRect(),C=c.getBoundingClientRect(),N=s.valueNode.getBoundingClientRect(),R=v.getBoundingClientRect();if(s.dir!=="rtl"){const U=R.left-C.left,X=N.left-U,te=A.left-X,J=A.width+te,se=Math.max(J,C.width),Me=window.innerWidth-js,pe=Ug(X,[js,Me-se]);a.style.minWidth=J+"px",a.style.left=pe+"px"}else{const U=C.right-R.right,X=window.innerWidth-N.right-U,te=window.innerWidth-A.right-X,J=A.width+te,se=Math.max(J,C.width),Me=window.innerWidth-js,pe=Ug(X,[js,Me-se]);a.style.minWidth=J+"px",a.style.right=pe+"px"}const M=f(),L=window.innerHeight-js*2,H=m.scrollHeight,T=window.getComputedStyle(c),V=parseInt(T.borderTopWidth,10),Y=parseInt(T.paddingTop,10),ne=parseInt(T.borderBottomWidth,10),W=parseInt(T.paddingBottom,10),j=V+Y+H+W+ne,Q=Math.min(w.offsetHeight*5,j),K=window.getComputedStyle(m),ee=parseInt(K.paddingTop,10),le=parseInt(K.paddingBottom,10),B=A.top+A.height/2-js,I=L-B,z=w.offsetHeight/2,S=w.offsetTop+z,$=V+Y+S,D=j-$;if($<=B){const U=w===M[M.length-1].ref.current;a.style.bottom="0px";const X=c.clientHeight-m.offsetTop-m.offsetHeight,te=Math.max(I,z+(U?le:0)+X+ne),J=$+te;a.style.height=J+"px"}else{const U=w===M[0].ref.current;a.style.top="0px";const te=Math.max(B,V+m.offsetTop+(U?ee:0)+z)+D;a.style.height=te+"px",m.scrollTop=$-B+m.offsetTop}a.style.margin=`${js}px 0`,a.style.minHeight=Q+"px",a.style.maxHeight=L+"px",i==null||i(),requestAnimationFrame(()=>h.current=!0)}},[f,s.trigger,s.valueNode,a,c,m,w,v,s.dir,i]);kr(()=>x(),[x]);const[k,_]=g.useState();kr(()=>{c&&_(window.getComputedStyle(c).zIndex)},[c]);const P=g.useCallback(A=>{A&&p.current===!0&&(x(),y==null||y(),p.current=!1)},[x,y]);return g.createElement(Nq,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:h,onScrollButtonChange:P},g.createElement("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:k}},g.createElement(Ge.div,be({},r,{ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}}))))}),pA=g.forwardRef((t,e)=>{const{__scopeSelect:n,align:i="start",collisionPadding:r=js,...s}=t,o=Ak(n);return g.createElement(CS,be({},o,s,{ref:e,align:i,collisionPadding:r,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}}))}),[Nq,Rq]=Iu(bu,{}),mA="SelectViewport",Mq=g.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=t0(mA,n),s=Rq(mA,n),o=st(e,r.onViewportChange),a=g.useRef(0);return g.createElement(g.Fragment,null,g.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),g.createElement(e0.Slot,{scope:n},g.createElement(Ge.div,be({"data-radix-select-viewport":"",role:"presentation"},i,{ref:o,style:{position:"relative",flex:1,overflow:"auto",...i.style},onScroll:ve(i.onScroll,l=>{const c=l.currentTarget,{contentWrapper:u,shouldExpandOnScrollRef:d}=s;if(d!=null&&d.current&&u){const f=Math.abs(a.current-c.scrollTop);if(f>0){const h=window.innerHeight-js*2,p=parseFloat(u.style.minHeight),m=parseFloat(u.style.height),w=Math.max(p,m);if(w<h){const v=w+f,y=Math.min(h,v),x=v-y;u.style.height=y+"px",u.style.bottom==="0px"&&(c.scrollTop=x>0?x:0,u.style.justifyContent="flex-end")}}}a.current=c.scrollTop})}))))}),Dq="SelectGroup";Iu(Dq);const _1="SelectItem",[Iq,Lq]=Iu(_1),Bq=g.forwardRef((t,e)=>{const{__scopeSelect:n,value:i,disabled:r=!1,textValue:s,...o}=t,a=Gl(_1,n),l=t0(_1,n),c=a.value===i,[u,d]=g.useState(s??""),[f,h]=g.useState(!1),p=st(e,v=>{var y;return(y=l.itemRefCallback)===null||y===void 0?void 0:y.call(l,v,i,r)}),m=Tl(),w=()=>{r||(a.onValueChange(i),a.onOpenChange(!1))};if(i==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return g.createElement(Iq,{scope:n,value:i,disabled:r,textId:m,isSelected:c,onItemTextChange:g.useCallback(v=>{d(y=>{var x;return y||((x=v==null?void 0:v.textContent)!==null&&x!==void 0?x:"").trim()})},[])},g.createElement(e0.ItemSlot,{scope:n,value:i,disabled:r,textValue:u},g.createElement(Ge.div,be({role:"option","aria-labelledby":m,"data-highlighted":f?"":void 0,"aria-selected":c&&f,"data-state":c?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1},o,{ref:p,onFocus:ve(o.onFocus,()=>h(!0)),onBlur:ve(o.onBlur,()=>h(!1)),onPointerUp:ve(o.onPointerUp,w),onPointerMove:ve(o.onPointerMove,v=>{if(r){var y;(y=l.onItemLeave)===null||y===void 0||y.call(l)}else v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ve(o.onPointerLeave,v=>{if(v.currentTarget===document.activeElement){var y;(y=l.onItemLeave)===null||y===void 0||y.call(l)}}),onKeyDown:ve(o.onKeyDown,v=>{var y;((y=l.searchRef)===null||y===void 0?void 0:y.current)!==""&&v.key===" "||(vq.includes(v.key)&&w(),v.key===" "&&v.preventDefault())})}))))}),Ep="SelectItemText",jq=g.forwardRef((t,e)=>{const{__scopeSelect:n,className:i,style:r,...s}=t,o=Gl(Ep,n),a=t0(Ep,n),l=Lq(Ep,n),c=xq(Ep,n),[u,d]=g.useState(null),f=st(e,v=>d(v),l.onItemTextChange,v=>{var y;return(y=a.itemTextRefCallback)===null||y===void 0?void 0:y.call(a,v,l.value,l.disabled)}),h=u==null?void 0:u.textContent,p=g.useMemo(()=>g.createElement("option",{key:l.value,value:l.value,disabled:l.disabled},h),[l.disabled,l.value,h]),{onNativeOptionAdd:m,onNativeOptionRemove:w}=c;return kr(()=>(m(p),()=>w(p)),[m,w,p]),g.createElement(g.Fragment,null,g.createElement(Ge.span,be({id:l.textId},s,{ref:f})),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?bo.createPortal(s.children,o.valueNode):null)});function QD(t){return t===""||t===void 0}const eI=g.forwardRef((t,e)=>{const{value:n,...i}=t,r=g.useRef(null),s=st(e,r),o=_k(n);return g.useEffect(()=>{const a=r.current,l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==n&&u){const d=new Event("change",{bubbles:!0});u.call(a,n),a.dispatchEvent(d)}},[o,n]),g.createElement(Ck,{asChild:!0},g.createElement("select",be({},i,{ref:s,defaultValue:n})))});eI.displayName="BubbleSelect";function tI(t){const e=ti(t),n=g.useRef(""),i=g.useRef(0),r=g.useCallback(o=>{const a=n.current+o;e(a),function l(c){n.current=c,window.clearTimeout(i.current),c!==""&&(i.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),s=g.useCallback(()=>{n.current="",window.clearTimeout(i.current)},[]);return g.useEffect(()=>()=>window.clearTimeout(i.current),[]),[n,r,s]}function nI(t,e,n){const r=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=n?t.indexOf(n):-1;let o=Fq(t,Math.max(s,0));r.length===1&&(o=o.filter(c=>c!==n));const l=o.find(c=>c.textValue.toLowerCase().startsWith(r.toLowerCase()));return l!==n?l:void 0}function Fq(t,e){return t.map((n,i)=>t[(e+i)%t.length])}const zq=Sq,iI=_q,Uq=Eq,Vq=Aq,Hq=Pq,rI=$q,Wq=Mq,sI=Bq,Gq=jq,Uy=zq,Vy=Uq,Cm=g.forwardRef(({className:t,children:e,...n},i)=>b.jsxs(iI,{ref:i,className:He("flex h-10 items-center justify-between rounded-md border border-stone-600 bg-stone-900 px-3 py-2 text-sm ring-offset-stone-800 placeholder:text-stone-500 focus:outline-none focus:ring-2 focus:ring-stone-600 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...n,children:[e,b.jsx(Vq,{asChild:!0,children:b.jsx("span",{className:"icon-[lucide--chevron-down] h-4 w-4 opacity-50"})})]}));Cm.displayName=iI.displayName;const Em=g.forwardRef(({className:t,children:e,position:n="popper",...i},r)=>b.jsx(Hq,{children:b.jsx(rI,{ref:r,className:He("relative z-50 min-w-[8rem] overflow-hidden rounded-md border border-stone-600 bg-stone-900 text-white shadow-md",t),position:n,...i,children:b.jsx(Wq,{className:"p-1",children:e})})}));Em.displayName=rI.displayName;const Ed=g.forwardRef(({className:t,children:e,...n},i)=>b.jsx(sI,{ref:i,className:He("w-full cursor-default select-none rounded-sm px-2 py-1.5 text-sm outline-none transition-colors duration-75 focus:bg-stone-800 focus:text-mantis-400 data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:b.jsx(Gq,{children:e})}));Ed.displayName=sI.displayName;const oI=["PageUp","PageDown"],aI=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],lI={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},kh="Slider",[C1,Kq,Xq]=ch(kh),[cI,Vne]=es(kh,[Xq]),[qq,n0]=cI(kh),Yq=g.forwardRef((t,e)=>{const{name:n,min:i=0,max:r=100,step:s=1,orientation:o="horizontal",disabled:a=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[i],value:u,onValueChange:d=()=>{},onValueCommit:f=()=>{},inverted:h=!1,...p}=t,[m,w]=g.useState(null),v=st(e,T=>w(T)),y=g.useRef(new Set),x=g.useRef(0),k=o==="horizontal",_=m?!!m.closest("form"):!0,P=k?Jq:Zq,[A=[],C]=uo({prop:u,defaultProp:c,onChange:T=>{var V;(V=[...y.current][x.current])===null||V===void 0||V.focus(),d(T)}}),N=g.useRef(A);function R(T){const V=aY(A,T);H(T,V)}function M(T){H(T,x.current)}function L(){const T=N.current[x.current];A[x.current]!==T&&f(A)}function H(T,V,{commit:Y}={commit:!1}){const ne=dY(s),W=fY(Math.round((T-i)/s)*s+i,ne),j=Ug(W,[i,r]);C((Q=[])=>{const K=sY(Q,j,V);if(uY(K,l*s)){x.current=K.indexOf(j);const ee=String(K)!==String(Q);return ee&&Y&&f(K),ee?K:Q}else return Q})}return g.createElement(qq,{scope:t.__scopeSlider,disabled:a,min:i,max:r,valueIndexToChangeRef:x,thumbs:y.current,values:A,orientation:o},g.createElement(C1.Provider,{scope:t.__scopeSlider},g.createElement(C1.Slot,{scope:t.__scopeSlider},g.createElement(P,bt({"aria-disabled":a,"data-disabled":a?"":void 0},p,{ref:v,onPointerDown:ve(p.onPointerDown,()=>{a||(N.current=A)}),min:i,max:r,inverted:h,onSlideStart:a?void 0:R,onSlideMove:a?void 0:M,onSlideEnd:a?void 0:L,onHomeKeyDown:()=>!a&&H(i,0,{commit:!0}),onEndKeyDown:()=>!a&&H(r,A.length-1,{commit:!0}),onStepKeyDown:({event:T,direction:V})=>{if(!a){const W=oI.includes(T.key)||T.shiftKey&&aI.includes(T.key)?10:1,j=x.current,Q=A[j],K=s*W*V;H(Q+K,j,{commit:!0})}}})))),_&&A.map((T,V)=>g.createElement(rY,{key:V,name:n?n+(A.length>1?"[]":""):void 0,value:T})))}),[uI,dI]=cI(kh,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Jq=g.forwardRef((t,e)=>{const{min:n,max:i,dir:r,inverted:s,onSlideStart:o,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c,...u}=t,[d,f]=g.useState(null),h=st(e,x=>f(x)),p=g.useRef(),m=uh(r),w=m==="ltr",v=w&&!s||!w&&s;function y(x){const k=p.current||d.getBoundingClientRect(),_=[0,k.width],A=Pk(_,v?[n,i]:[i,n]);return p.current=k,A(x-k.left)}return g.createElement(uI,{scope:t.__scopeSlider,startEdge:v?"left":"right",endEdge:v?"right":"left",direction:v?1:-1,size:"width"},g.createElement(fI,bt({dir:m,"data-orientation":"horizontal"},u,{ref:h,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:x=>{const k=y(x.clientX);o==null||o(k)},onSlideMove:x=>{const k=y(x.clientX);a==null||a(k)},onSlideEnd:()=>{p.current=void 0,l==null||l()},onStepKeyDown:x=>{const _=lI[v?"from-left":"from-right"].includes(x.key);c==null||c({event:x,direction:_?-1:1})}})))}),Zq=g.forwardRef((t,e)=>{const{min:n,max:i,inverted:r,onSlideStart:s,onSlideMove:o,onSlideEnd:a,onStepKeyDown:l,...c}=t,u=g.useRef(null),d=st(e,u),f=g.useRef(),h=!r;function p(m){const w=f.current||u.current.getBoundingClientRect(),v=[0,w.height],x=Pk(v,h?[i,n]:[n,i]);return f.current=w,x(m-w.top)}return g.createElement(uI,{scope:t.__scopeSlider,startEdge:h?"bottom":"top",endEdge:h?"top":"bottom",size:"height",direction:h?1:-1},g.createElement(fI,bt({"data-orientation":"vertical"},c,{ref:d,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:m=>{const w=p(m.clientY);s==null||s(w)},onSlideMove:m=>{const w=p(m.clientY);o==null||o(w)},onSlideEnd:()=>{f.current=void 0,a==null||a()},onStepKeyDown:m=>{const v=lI[h?"from-bottom":"from-top"].includes(m.key);l==null||l({event:m,direction:v?-1:1})}})))}),fI=g.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:i,onSlideMove:r,onSlideEnd:s,onHomeKeyDown:o,onEndKeyDown:a,onStepKeyDown:l,...c}=t,u=n0(kh,n);return g.createElement(Ge.span,bt({},c,{ref:e,onKeyDown:ve(t.onKeyDown,d=>{d.key==="Home"?(o(d),d.preventDefault()):d.key==="End"?(a(d),d.preventDefault()):oI.concat(aI).includes(d.key)&&(l(d),d.preventDefault())}),onPointerDown:ve(t.onPointerDown,d=>{const f=d.target;f.setPointerCapture(d.pointerId),d.preventDefault(),u.thumbs.has(f)?f.focus():i(d)}),onPointerMove:ve(t.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&r(d)}),onPointerUp:ve(t.onPointerUp,d=>{const f=d.target;f.hasPointerCapture(d.pointerId)&&(f.releasePointerCapture(d.pointerId),s(d))})}))}),Qq="SliderTrack",eY=g.forwardRef((t,e)=>{const{__scopeSlider:n,...i}=t,r=n0(Qq,n);return g.createElement(Ge.span,bt({"data-disabled":r.disabled?"":void 0,"data-orientation":r.orientation},i,{ref:e}))}),gA="SliderRange",tY=g.forwardRef((t,e)=>{const{__scopeSlider:n,...i}=t,r=n0(gA,n),s=dI(gA,n),o=g.useRef(null),a=st(e,o),l=r.values.length,c=r.values.map(f=>hI(f,r.min,r.max)),u=l>1?Math.min(...c):0,d=100-Math.max(...c);return g.createElement(Ge.span,bt({"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0},i,{ref:a,style:{...t.style,[s.startEdge]:u+"%",[s.endEdge]:d+"%"}}))}),vA="SliderThumb",nY=g.forwardRef((t,e)=>{const n=Kq(t.__scopeSlider),[i,r]=g.useState(null),s=st(e,a=>r(a)),o=g.useMemo(()=>i?n().findIndex(a=>a.ref.current===i):-1,[n,i]);return g.createElement(iY,bt({},t,{ref:s,index:o}))}),iY=g.forwardRef((t,e)=>{const{__scopeSlider:n,index:i,...r}=t,s=n0(vA,n),o=dI(vA,n),[a,l]=g.useState(null),c=st(e,w=>l(w)),u=SS(a),d=s.values[i],f=d===void 0?0:hI(d,s.min,s.max),h=oY(i,s.values.length),p=u==null?void 0:u[o.size],m=p?lY(p,f,o.direction):0;return g.useEffect(()=>{if(a)return s.thumbs.add(a),()=>{s.thumbs.delete(a)}},[a,s.thumbs]),g.createElement("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${f}% + ${m}px)`}},g.createElement(C1.ItemSlot,{scope:t.__scopeSlider},g.createElement(Ge.span,bt({role:"slider","aria-label":t["aria-label"]||h,"aria-valuemin":s.min,"aria-valuenow":d,"aria-valuemax":s.max,"aria-orientation":s.orientation,"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,tabIndex:s.disabled?void 0:0},r,{ref:c,style:d===void 0?{display:"none"}:t.style,onFocus:ve(t.onFocus,()=>{s.valueIndexToChangeRef.current=i})}))))}),rY=t=>{const{value:e,...n}=t,i=g.useRef(null),r=_k(e);return g.useEffect(()=>{const s=i.current,o=window.HTMLInputElement.prototype,l=Object.getOwnPropertyDescriptor(o,"value").set;if(r!==e&&l){const c=new Event("input",{bubbles:!0});l.call(s,e),s.dispatchEvent(c)}},[r,e]),g.createElement("input",bt({style:{display:"none"}},n,{ref:i,defaultValue:e}))};function sY(t=[],e,n){const i=[...t];return i[n]=e,i.sort((r,s)=>r-s)}function hI(t,e,n){const s=100/(n-e)*(t-e);return Ug(s,[0,100])}function oY(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function aY(t,e){if(t.length===1)return 0;const n=t.map(r=>Math.abs(r-e)),i=Math.min(...n);return n.indexOf(i)}function lY(t,e,n){const i=t/2,s=Pk([0,50],[0,i]);return(i-s(e)*n)*n}function cY(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function uY(t,e){if(e>0){const n=cY(t);return Math.min(...n)>=e}return!0}function Pk(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const i=(e[1]-e[0])/(t[1]-t[0]);return e[0]+i*(n-t[0])}}function dY(t){return(String(t).split(".")[1]||"").length}function fY(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}const pI=Yq,hY=eY,pY=tY,mY=nY,Ja=g.forwardRef(({className:t,...e},n)=>b.jsxs(pI,{ref:n,className:He("relative flex touch-none select-none items-center",t),...e,children:[b.jsx(hY,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-stone-900",children:b.jsx(pY,{className:"absolute h-full bg-mantis-400"})}),b.jsx(mY,{className:"block h-5 w-5 rounded-full border-2 border-stone-900 bg-mantis-400 ring-offset-stone-800 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Ja.displayName=pI.displayName;const mI="Switch",[gY,Hne]=es(mI),[vY,yY]=gY(mI),wY=g.forwardRef((t,e)=>{const{__scopeSwitch:n,name:i,checked:r,defaultChecked:s,required:o,disabled:a,value:l="on",onCheckedChange:c,...u}=t,[d,f]=g.useState(null),h=st(e,y=>f(y)),p=g.useRef(!1),m=d?!!d.closest("form"):!0,[w=!1,v]=uo({prop:r,defaultProp:s,onChange:c});return g.createElement(vY,{scope:n,checked:w,disabled:a},g.createElement(Ge.button,bt({type:"button",role:"switch","aria-checked":w,"aria-required":o,"data-state":gI(w),"data-disabled":a?"":void 0,disabled:a,value:l},u,{ref:h,onClick:ve(t.onClick,y=>{v(x=>!x),m&&(p.current=y.isPropagationStopped(),p.current||y.stopPropagation())})})),m&&g.createElement(SY,{control:d,bubbles:!p.current,name:i,value:l,checked:w,required:o,disabled:a,style:{transform:"translateX(-100%)"}}))}),bY="SwitchThumb",xY=g.forwardRef((t,e)=>{const{__scopeSwitch:n,...i}=t,r=yY(bY,n);return g.createElement(Ge.span,bt({"data-state":gI(r.checked),"data-disabled":r.disabled?"":void 0},i,{ref:e}))}),SY=t=>{const{control:e,checked:n,bubbles:i=!0,...r}=t,s=g.useRef(null),o=_k(n),a=SS(e);return g.useEffect(()=>{const l=s.current,c=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(c,"checked").set;if(o!==n&&d){const f=new Event("click",{bubbles:i});d.call(l,n),l.dispatchEvent(f)}},[o,n,i]),g.createElement("input",bt({type:"checkbox","aria-hidden":!0,defaultChecked:n},r,{tabIndex:-1,ref:s,style:{...t.style,...a,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function gI(t){return t?"checked":"unchecked"}const vI=wY,kY=xY,Vg=g.forwardRef(({className:t,...e},n)=>b.jsx(vI,{className:He("peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-mantis-400 data-[state=unchecked]:bg-stone-900",t),...e,ref:n,children:b.jsx(kY,{className:He("pointer-events-none block h-5 w-5 rounded-full bg-white shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Vg.displayName=vI.displayName;const $k=Ce(!1);function yI({className:t}){const e=St(),[n,i]=TM(),{status:r}=gn();return b.jsxs("div",{className:He("overflow-auto scrollbar-stone-700",t),children:[b.jsxs("h3",{className:"flex items-center gap-2 border-b border-stone-600 py-2 pl-4 text-xl font-semibold",children:[b.jsx("span",{className:"icon-[lucide--settings] h-6 w-6"})," ",e("settings.title")]}),b.jsxs(Ms,{children:[b.jsx(Ds,{children:b.jsxs(Is,{children:[b.jsx("span",{className:"icon-[lucide--languages] h-6 w-6"}),e("settings.language.label")]})}),b.jsxs(Uy,{value:n.language,onValueChange:s=>i(o=>({...o,language:s})),children:[b.jsx(Cm,{className:"w-32",children:b.jsx(Vy,{})}),b.jsxs(Em,{children:[b.jsx(Ed,{value:"en",children:b.jsxs("span",{className:"inline-flex items-center gap-2",children:[b.jsx("span",{className:"icon-[circle-flags--uk] h-4 w-4"})," English"]})}),b.jsx(Ed,{value:"es",children:b.jsxs("span",{className:"inline-flex items-center gap-2",children:[b.jsx("span",{className:"icon-[circle-flags--ar] h-4 w-4"})," Espaol"]})})]})]})]}),b.jsxs(Ms,{children:[b.jsx(Ds,{children:b.jsxs(Is,{children:[b.jsx("span",{className:"icon-[lucide--pilcrow-square] h-6 w-6"}),e("settings.editorFontSize.label")]})}),b.jsxs("div",{className:"flex items-center rounded-lg border border-stone-600 bg-stone-900",children:[b.jsx("button",{className:"m-0.5 flex h-8 w-8 items-center justify-center rounded-lg text-white transition-colors hover:enabled:bg-stone-800 disabled:cursor-not-allowed",disabled:n.editorFontSize<=8,onClick:()=>i(s=>({...s,editorFontSize:s.editorFontSize-1})),title:e("settings.editorFontSize.decrease"),children:b.jsx("span",{className:"icon-[lucide--minus] h-4 w-4"})}),b.jsx("span",{className:"w-8 text-center text-sm font-normal",children:n.editorFontSize}),b.jsx("button",{className:"m-0.5 flex h-8 w-8 items-center justify-center rounded-lg text-white transition-colors hover:enabled:bg-stone-800 disabled:cursor-not-allowed",disabled:n.editorFontSize>=64,onClick:()=>i(s=>({...s,editorFontSize:s.editorFontSize+1})),title:e("settings.editorFontSize.increase"),children:b.jsx("span",{className:"icon-[lucide--plus] h-4 w-4"})})]})]}),b.jsx("hr",{className:"border-stone-600"}),b.jsxs(Ms,{children:[b.jsxs(Ds,{children:[b.jsxs(Is,{children:[b.jsx("span",{className:"icon-[lucide--memory-stick] h-6 w-6"}),e("settings.dataOnLoad.label")]}),b.jsx(Ap,{children:e("settings.dataOnLoad.description")})]}),b.jsxs(Uy,{value:n.dataOnLoad,onValueChange:s=>i(o=>({...o,dataOnLoad:s})),children:[b.jsx(Cm,{className:"w-32 min-w-[theme(width.32)]",children:b.jsx(Vy,{})}),b.jsx(Em,{children:PM.map(s=>b.jsx(Ed,{value:s,children:e(`settings.dataOnLoad.${s}`)},s))})]})]}),b.jsxs(Ms,{children:[b.jsxs(Ds,{children:[b.jsxs(Is,{children:[b.jsx("span",{className:"icon-[lucide--monitor-smartphone] h-6 w-6"}),e("settings.devices.label")]}),b.jsx(Ap,{children:e("settings.devices.description")})]}),b.jsxs(Uy,{value:n.devices,onValueChange:s=>i(o=>({...o,devices:s})),disabled:r.type!=="stopped",children:[b.jsx(Cm,{className:"w-52 min-w-[theme(width.52)]",children:b.jsx(Vy,{})}),b.jsx(Em,{children:$M.map(s=>b.jsx(Ed,{value:s,children:e(`settings.devices.${s}`)},s))})]})]}),b.jsx("hr",{className:"border-stone-600"}),b.jsxs(Ms,{children:[b.jsxs(Ds,{children:[b.jsxs(Is,{children:[b.jsx("span",{className:"icon-[lucide--rotate-3d] h-6 w-6"}),e("settings.animations.label")]}),b.jsx(Ap,{children:e("settings.animations.description")})]}),b.jsx(Vg,{className:"ml-8",checked:n.animations,onCheckedChange:s=>{i(o=>({...o,animations:s})),s===!1&&SD()}})]}),b.jsxs(Ms,{children:[b.jsx(Ds,{children:b.jsxs(Is,{children:[b.jsx("span",{className:"icon-[lucide--gauge] h-6 w-6"}),e("settings.speeds.executionUnit")]})}),b.jsx(Ja,{className:"w-44",...Hy({value:n.executionUnit,onValueChange:s=>i(o=>({...o,executionUnit:s})),min:500,max:1})})]}),b.jsxs(Ms,{children:[b.jsx(Ds,{children:b.jsxs(Is,{children:[b.jsx("span",{className:"icon-[lucide--clock] h-6 w-6"}),e("settings.speeds.clockSpeed")]})}),b.jsx(Ja,{className:"w-44",...Hy({value:n.clockSpeed,onValueChange:s=>i(o=>({...o,clockSpeed:s})),min:3e3,max:100})})]}),b.jsxs(Ms,{children:[b.jsx(Ds,{children:b.jsxs(Is,{children:[b.jsx("span",{className:"icon-[lucide--printer] h-6 w-6"}),e("settings.speeds.printerSpeed")]})}),b.jsx(Ja,{className:"w-44",...Hy({value:n.printerSpeed,onValueChange:s=>i(o=>({...o,printerSpeed:s})),min:2e4,max:500})})]}),b.jsx("hr",{className:"border-stone-600"}),b.jsxs(Ms,{children:[b.jsxs(Ds,{children:[b.jsxs(Is,{children:[b.jsx("span",{className:"icon-[lucide--contrast] h-6 w-6"}),e("settings.filters.label")]}),b.jsxs(Ap,{children:[e("settings.filters.description"),b.jsx("button",{className:"mt-1 block text-mantis-400 transition-colors hover:text-mantis-300",onClick:()=>i(s=>({...s,filterBightness:ac.filterBightness,filterContrast:ac.filterContrast,filterInvert:ac.filterInvert,filterSaturation:ac.filterSaturation})),children:e("settings.filters.revert")})]})]}),b.jsxs("div",{className:"ml-8 grid w-64 grid-cols-[min-content,auto] items-center gap-2",children:[b.jsx("span",{className:"text-xs",children:e("settings.filters.brightness")}),b.jsx(Ja,{value:[n.filterBightness],onValueChange:([s])=>i(o=>({...o,filterBightness:s})),min:0,max:5,step:.05}),b.jsx("span",{className:"text-xs",children:e("settings.filters.contrast")}),b.jsx(Ja,{value:[n.filterContrast],onValueChange:([s])=>i(o=>({...o,filterContrast:s})),min:0,max:5,step:.05}),b.jsx("span",{className:"text-xs",children:e("settings.filters.invert")}),b.jsx(Vg,{checked:n.filterInvert,onCheckedChange:s=>i(o=>({...o,filterInvert:s}))}),b.jsx("span",{className:"text-xs",children:e("settings.filters.saturation")}),b.jsx(Ja,{value:[n.filterSaturation],onValueChange:([s])=>i(o=>({...o,filterSaturation:s})),min:0,max:5,step:.05})]})]}),b.jsx("hr",{className:"border-stone-600"}),b.jsx("div",{className:"flex justify-end p-4",children:b.jsxs("button",{className:"inline-flex items-center gap-1 text-sm text-red-500 transition-colors hover:text-red-400",onClick:()=>i(s=>({...ac,language:s.language,devices:s.devices})),children:[b.jsx("span",{className:"icon-[lucide--trash-2] h-4 w-4"}),e("settings.reset")]})})]})}function Ms({children:t}){return b.jsx("div",{className:"m-4 flex items-center justify-between gap-4",children:t})}function Ds({children:t}){return b.jsx("div",{className:"grow",children:t})}function Is({children:t}){return b.jsx("p",{className:"flex items-center gap-2 font-medium",children:t})}function Ap({children:t}){return b.jsx("p",{className:"mt-1 text-xs text-stone-400",children:t})}function Hy({value:t,onValueChange:e,min:n,max:i}){const r=Math.log(n),o=(Math.log(i)-r)/100;return{value:[(Math.log(t)-r)/o],onValueChange:a=>e(Math.exp(r+o*a[0])),min:0,max:100}}function _Y(){const t=St(),[e,n]=Tu($k);return b.jsxs("header",{className:"relative p-2 text-sm text-white",children:[b.jsx(mq,{className:" absolute inset-0"}),b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsxs("div",{className:"flex select-none items-center justify-center",children:[b.jsx("img",{src:"/VonSim8/favicon.svg",className:"mr-2 h-10 w-10"}),b.jsxs("h1",{className:"text-xl font-bold max-sm:hidden",children:["Von",b.jsx("span",{className:"text-mantis-400",children:"Sim"}),"8"]})]}),b.jsx("button",{className:He("h-min w-min rounded-full p-2 transition-colors focus:outline-stone-400",e?"bg-stone-700 hover:bg-stone-600 focus:bg-stone-600":"hover:bg-stone-800 focus:bg-stone-800"),title:t("settings.title"),onClick:()=>n(!e),children:b.jsx("span",{className:"icon-[lucide--settings] block h-6 w-6"})})]})]})}const wI="ToastProvider",[Tk,CY,EY]=ch("Toast"),[bI,Wne]=es("Toast",[EY]),[AY,i0]=bI(wI),xI=t=>{const{__scopeToast:e,label:n="Notification",duration:i=5e3,swipeDirection:r="right",swipeThreshold:s=50,children:o}=t,[a,l]=g.useState(null),[c,u]=g.useState(0),d=g.useRef(!1),f=g.useRef(!1);return g.createElement(Tk.Provider,{scope:e},g.createElement(AY,{scope:e,label:n,duration:i,swipeDirection:r,swipeThreshold:s,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:g.useCallback(()=>u(h=>h+1),[]),onToastRemove:g.useCallback(()=>u(h=>h-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:f},o))};xI.propTypes={label(t){if(t.label&&typeof t.label=="string"&&!t.label.trim()){const e=`Invalid prop \`label\` supplied to \`${wI}\`. Expected non-empty \`string\`.`;return new Error(e)}return null}};const PY="ToastViewport",$Y=["F8"],E1="toast.viewportPause",A1="toast.viewportResume",TY=g.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:i=$Y,label:r="Notifications ({hotkey})",...s}=t,o=i0(PY,n),a=CY(n),l=g.useRef(null),c=g.useRef(null),u=g.useRef(null),d=g.useRef(null),f=st(e,d,o.onViewportChange),h=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),p=o.toastCount>0;g.useEffect(()=>{const w=v=>{var y;i.every(k=>v[k]||v.code===k)&&((y=d.current)===null||y===void 0||y.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[i]),g.useEffect(()=>{const w=l.current,v=d.current;if(p&&w&&v){const y=()=>{if(!o.isClosePausedRef.current){const P=new CustomEvent(E1);v.dispatchEvent(P),o.isClosePausedRef.current=!0}},x=()=>{if(o.isClosePausedRef.current){const P=new CustomEvent(A1);v.dispatchEvent(P),o.isClosePausedRef.current=!1}},k=P=>{!w.contains(P.relatedTarget)&&x()},_=()=>{w.contains(document.activeElement)||x()};return w.addEventListener("focusin",y),w.addEventListener("focusout",k),w.addEventListener("pointermove",y),w.addEventListener("pointerleave",_),window.addEventListener("blur",y),window.addEventListener("focus",x),()=>{w.removeEventListener("focusin",y),w.removeEventListener("focusout",k),w.removeEventListener("pointermove",y),w.removeEventListener("pointerleave",_),window.removeEventListener("blur",y),window.removeEventListener("focus",x)}}},[p,o.isClosePausedRef]);const m=g.useCallback(({tabbingDirection:w})=>{const y=a().map(x=>{const k=x.ref.current,_=[k,...GY(k)];return w==="forwards"?_:_.reverse()});return(w==="forwards"?y.reverse():y).flat()},[a]);return g.useEffect(()=>{const w=d.current;if(w){const v=y=>{const x=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!x){const C=document.activeElement,N=y.shiftKey;if(y.target===w&&N){var _;(_=c.current)===null||_===void 0||_.focus();return}const L=m({tabbingDirection:N?"backwards":"forwards"}),H=L.findIndex(T=>T===C);if(Wy(L.slice(H+1)))y.preventDefault();else{var P,A;N?(P=c.current)===null||P===void 0||P.focus():(A=u.current)===null||A===void 0||A.focus()}}};return w.addEventListener("keydown",v),()=>w.removeEventListener("keydown",v)}},[a,m]),g.createElement(U7,{ref:l,role:"region","aria-label":r.replace("{hotkey}",h),tabIndex:-1,style:{pointerEvents:p?void 0:"none"}},p&&g.createElement(yA,{ref:c,onFocusFromOutsideViewport:()=>{const w=m({tabbingDirection:"forwards"});Wy(w)}}),g.createElement(Tk.Slot,{scope:n},g.createElement(Ge.ol,be({tabIndex:-1},s,{ref:f}))),p&&g.createElement(yA,{ref:u,onFocusFromOutsideViewport:()=>{const w=m({tabbingDirection:"backwards"});Wy(w)}}))}),OY="ToastFocusProxy",yA=g.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:i,...r}=t,s=i0(OY,n);return g.createElement(Ck,be({"aria-hidden":!0,tabIndex:0},r,{ref:e,style:{position:"fixed"},onFocus:o=>{var a;const l=o.relatedTarget;!((a=s.viewport)!==null&&a!==void 0&&a.contains(l))&&i()}}))}),r0="Toast",NY="toast.swipeStart",RY="toast.swipeMove",MY="toast.swipeCancel",DY="toast.swipeEnd",IY=g.forwardRef((t,e)=>{const{forceMount:n,open:i,defaultOpen:r,onOpenChange:s,...o}=t,[a=!0,l]=uo({prop:i,defaultProp:r,onChange:s});return g.createElement(xo,{present:n||a},g.createElement(SI,be({open:a},o,{ref:e,onClose:()=>l(!1),onPause:ti(t.onPause),onResume:ti(t.onResume),onSwipeStart:ve(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ve(t.onSwipeMove,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:ve(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ve(t.onSwipeEnd,c=>{const{x:u,y:d}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),l(!1)})})))}),[LY,BY]=bI(r0,{onClose(){}}),SI=g.forwardRef((t,e)=>{const{__scopeToast:n,type:i="foreground",duration:r,open:s,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:u,onSwipeMove:d,onSwipeCancel:f,onSwipeEnd:h,...p}=t,m=i0(r0,n),[w,v]=g.useState(null),y=st(e,T=>v(T)),x=g.useRef(null),k=g.useRef(null),_=r||m.duration,P=g.useRef(0),A=g.useRef(_),C=g.useRef(0),{onToastAdd:N,onToastRemove:R}=m,M=ti(()=>{var T;(w==null?void 0:w.contains(document.activeElement))&&((T=m.viewport)===null||T===void 0||T.focus()),o()}),L=g.useCallback(T=>{!T||T===1/0||(window.clearTimeout(C.current),P.current=new Date().getTime(),C.current=window.setTimeout(M,T))},[M]);g.useEffect(()=>{const T=m.viewport;if(T){const V=()=>{L(A.current),c==null||c()},Y=()=>{const ne=new Date().getTime()-P.current;A.current=A.current-ne,window.clearTimeout(C.current),l==null||l()};return T.addEventListener(E1,Y),T.addEventListener(A1,V),()=>{T.removeEventListener(E1,Y),T.removeEventListener(A1,V)}}},[m.viewport,_,l,c,L]),g.useEffect(()=>{s&&!m.isClosePausedRef.current&&L(_)},[s,_,m.isClosePausedRef,L]),g.useEffect(()=>(N(),()=>R()),[N,R]);const H=g.useMemo(()=>w?EI(w):null,[w]);return m.viewport?g.createElement(g.Fragment,null,H&&g.createElement(jY,{__scopeToast:n,role:"status","aria-live":i==="foreground"?"assertive":"polite","aria-atomic":!0},H),g.createElement(LY,{scope:n,onClose:M},bo.createPortal(g.createElement(Tk.ItemSlot,{scope:n},g.createElement(z7,{asChild:!0,onEscapeKeyDown:ve(a,()=>{m.isFocusedToastEscapeKeyDownRef.current||M(),m.isFocusedToastEscapeKeyDownRef.current=!1})},g.createElement(Ge.li,be({role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":m.swipeDirection},p,{ref:y,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:ve(t.onKeyDown,T=>{T.key==="Escape"&&(a==null||a(T.nativeEvent),T.nativeEvent.defaultPrevented||(m.isFocusedToastEscapeKeyDownRef.current=!0,M()))}),onPointerDown:ve(t.onPointerDown,T=>{T.button===0&&(x.current={x:T.clientX,y:T.clientY})}),onPointerMove:ve(t.onPointerMove,T=>{if(!x.current)return;const V=T.clientX-x.current.x,Y=T.clientY-x.current.y,ne=!!k.current,W=["left","right"].includes(m.swipeDirection),j=["left","up"].includes(m.swipeDirection)?Math.min:Math.max,Q=W?j(0,V):0,K=W?0:j(0,Y),ee=T.pointerType==="touch"?10:2,le={x:Q,y:K},B={originalEvent:T,delta:le};ne?(k.current=le,Pp(RY,d,B,{discrete:!1})):wA(le,m.swipeDirection,ee)?(k.current=le,Pp(NY,u,B,{discrete:!1}),T.target.setPointerCapture(T.pointerId)):(Math.abs(V)>ee||Math.abs(Y)>ee)&&(x.current=null)}),onPointerUp:ve(t.onPointerUp,T=>{const V=k.current,Y=T.target;if(Y.hasPointerCapture(T.pointerId)&&Y.releasePointerCapture(T.pointerId),k.current=null,x.current=null,V){const ne=T.currentTarget,W={originalEvent:T,delta:V};wA(V,m.swipeDirection,m.swipeThreshold)?Pp(DY,h,W,{discrete:!0}):Pp(MY,f,W,{discrete:!0}),ne.addEventListener("click",j=>j.preventDefault(),{once:!0})}})})))),m.viewport))):null});SI.propTypes={type(t){if(t.type&&!["foreground","background"].includes(t.type)){const e=`Invalid prop \`type\` supplied to \`${r0}\`. Expected \`foreground | background\`.`;return new Error(e)}return null}};const jY=t=>{const{__scopeToast:e,children:n,...i}=t,r=i0(r0,e),[s,o]=g.useState(!1),[a,l]=g.useState(!1);return HY(()=>o(!0)),g.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:g.createElement(Tv,{asChild:!0},g.createElement(Ck,i,s&&g.createElement(g.Fragment,null,r.label," ",n)))},FY=g.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t;return g.createElement(Ge.div,be({},i,{ref:e}))}),zY=g.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t;return g.createElement(Ge.div,be({},i,{ref:e}))}),UY="ToastAction",kI=g.forwardRef((t,e)=>{const{altText:n,...i}=t;return n?g.createElement(CI,{altText:n,asChild:!0},g.createElement(_I,be({},i,{ref:e}))):null});kI.propTypes={altText(t){return t.altText?null:new Error(`Missing prop \`altText\` expected on \`${UY}\``)}};const VY="ToastClose",_I=g.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t,r=BY(VY,n);return g.createElement(CI,{asChild:!0},g.createElement(Ge.button,be({type:"button"},i,{ref:e,onClick:ve(t.onClick,r.onClose)})))}),CI=g.forwardRef((t,e)=>{const{__scopeToast:n,altText:i,...r}=t;return g.createElement(Ge.div,be({"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":i||void 0},r,{ref:e}))});function EI(t){const e=[];return Array.from(t.childNodes).forEach(i=>{if(i.nodeType===i.TEXT_NODE&&i.textContent&&e.push(i.textContent),WY(i)){const r=i.ariaHidden||i.hidden||i.style.display==="none",s=i.dataset.radixToastAnnounceExclude==="";if(!r)if(s){const o=i.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...EI(i))}}),e}function Pp(t,e,n,{discrete:i}){const r=n.originalEvent.currentTarget,s=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),i?Yx(r,s):r.dispatchEvent(s)}const wA=(t,e,n=0)=>{const i=Math.abs(t.x),r=Math.abs(t.y),s=i>r;return e==="left"||e==="right"?s&&i>n:!s&&r>n};function HY(t=()=>{}){const e=ti(t);kr(()=>{let n=0,i=0;return n=window.requestAnimationFrame(()=>i=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(i)}},[e])}function WY(t){return t.nodeType===t.ELEMENT_NODE}function GY(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Wy(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}const KY=xI,AI=TY,PI=IY,$I=FY,TI=zY,OI=kI,NI=_I,XY=KY,RI=g.forwardRef(({className:t,...e},n)=>b.jsx(AI,{ref:n,className:He("fixed inset-x-0 top-12 z-[100] mx-auto flex max-h-screen w-full flex-col p-4 md:max-w-[420px]",t),...e}));RI.displayName=AI.displayName;const MI=g.forwardRef(({className:t,variant:e="default",...n},i)=>b.jsx(PI,{ref:i,"data-variant":e,className:He("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-bottom-full data-[state=open]:slide-in-from-top-full",e==="default"&&"border border-stone-600 bg-stone-900 text-white",e==="error"&&"group bg-red-900 text-red-50",e==="info"&&"border border-green-500 border-stone-600 bg-stone-900 text-white",t),...n}));MI.displayName=PI.displayName;const DI=g.forwardRef(({className:t,...e},n)=>b.jsx(OI,{ref:n,className:He("inline-flex h-8 shrink-0 items-center justify-center rounded-md bg-mantis-500 px-3 text-sm font-medium ring-offset-stone-900 transition-colors hover:bg-mantis-400 focus:outline-none focus:ring-2 focus:ring-stone-600 focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50","group-data-[variant=error]:border group-data-[variant=error]:border-white/40 group-data-[variant=error]:hover:border-white/30  group-data-[variant=error]:hover:bg-red-700 group-data-[variant=error]:hover:text-white group-data-[variant=error]:focus:ring-white",t),...e}));DI.displayName=OI.displayName;const II=g.forwardRef(({className:t,...e},n)=>b.jsx(NI,{ref:n,className:He("text-current/50 absolute right-2 top-2 rounded-md p-1 opacity-0 transition-opacity hover:text-current focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-data-[variant=error]:text-red-300 group-data-[variant=error]:hover:text-red-50 group-data-[variant=error]:focus:ring-red-400 group-data-[variant=error]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:b.jsx("span",{className:"icon-[lucide--x] block h-4 w-4"})}));II.displayName=NI.displayName;const LI=g.forwardRef(({className:t,...e},n)=>b.jsx($I,{ref:n,className:He("text-sm font-semibold",t),...e}));LI.displayName=$I.displayName;const BI=g.forwardRef(({className:t,...e},n)=>b.jsx(TI,{ref:n,className:He("text-sm opacity-90",t),...e}));BI.displayName=TI.displayName;var hr=function(t,e){return Number(t.toFixed(e))},qY=function(t,e){return typeof t=="number"?t:e},Rt=function(t,e,n){n&&typeof n=="function"&&n(t,e)},YY=function(t){return-Math.cos(t*Math.PI)/2+.5},JY=function(t){return t},ZY=function(t){return t*t},QY=function(t){return t*(2-t)},eJ=function(t){return t<.5?2*t*t:-1+(4-2*t)*t},tJ=function(t){return t*t*t},nJ=function(t){return--t*t*t+1},iJ=function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},rJ=function(t){return t*t*t*t},sJ=function(t){return 1- --t*t*t*t},oJ=function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},aJ=function(t){return t*t*t*t*t},lJ=function(t){return 1+--t*t*t*t*t},cJ=function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},jI={easeOut:YY,linear:JY,easeInQuad:ZY,easeOutQuad:QY,easeInOutQuad:eJ,easeInCubic:tJ,easeOutCubic:nJ,easeInOutCubic:iJ,easeInQuart:rJ,easeOutQuart:sJ,easeInOutQuart:oJ,easeInQuint:aJ,easeOutQuint:lJ,easeInOutQuint:cJ},FI=function(t){typeof t=="number"&&cancelAnimationFrame(t)},xs=function(t){t.mounted&&(FI(t.animation),t.animate=!1,t.animation=null,t.velocity=null)};function zI(t,e,n,i){if(t.mounted){var r=new Date().getTime(),s=1;xs(t),t.animation=function(){if(!t.mounted)return FI(t.animation);var o=new Date().getTime()-r,a=o/n,l=jI[e],c=l(a);o>=n?(i(s),t.animation=null):t.animation&&(i(c),requestAnimationFrame(t.animation))},requestAnimationFrame(t.animation)}}function uJ(t){var e=t.scale,n=t.positionX,i=t.positionY;return!(Number.isNaN(e)||Number.isNaN(n)||Number.isNaN(i))}function ja(t,e,n,i){var r=uJ(e);if(!(!t.mounted||!r)){var s=t.setTransformState,o=t.transformState,a=o.scale,l=o.positionX,c=o.positionY,u=e.scale-a,d=e.positionX-l,f=e.positionY-c;n===0?s(e.scale,e.positionX,e.positionY):zI(t,i,n,function(h){var p=a+u*h,m=l+d*h,w=c+f*h;s(p,m,w)})}}function dJ(t,e,n){var i=t.offsetWidth,r=t.offsetHeight,s=e.offsetWidth,o=e.offsetHeight,a=s*n,l=o*n,c=i-a,u=r-l;return{wrapperWidth:i,wrapperHeight:r,newContentWidth:a,newDiffWidth:c,newContentHeight:l,newDiffHeight:u}}var fJ=function(t,e,n,i,r,s,o){var a=t>e?n*(o?1:.5):0,l=i>r?s*(o?1:.5):0,c=t-e-a,u=a,d=i-r-l,f=l;return{minPositionX:c,maxPositionX:u,minPositionY:d,maxPositionY:f}},Ok=function(t,e){var n=t.wrapperComponent,i=t.contentComponent,r=t.setup.centerZoomedOut;if(!n||!i)throw new Error("Components are not mounted");var s=dJ(n,i,e),o=s.wrapperWidth,a=s.wrapperHeight,l=s.newContentWidth,c=s.newDiffWidth,u=s.newContentHeight,d=s.newDiffHeight,f=fJ(o,l,c,a,u,d,!!r);return f},P1=function(t,e,n,i){return i?t<e?hr(e,2):t>n?hr(n,2):hr(t,2):hr(t,2)},xu=function(t,e){var n=Ok(t,e);return t.bounds=n,n};function s0(t,e,n,i,r,s,o){var a=n.minPositionX,l=n.minPositionY,c=n.maxPositionX,u=n.maxPositionY,d=0,f=0;o&&(d=r,f=s);var h=P1(t,a-d,c+d,i),p=P1(e,l-f,u+f,i);return{x:h,y:p}}function o0(t,e,n,i,r,s){var o=t.transformState,a=o.scale,l=o.positionX,c=o.positionY,u=i-a;if(typeof e!="number"||typeof n!="number")return console.error("Mouse X and Y position were not provided!"),{x:l,y:c};var d=l-e*u,f=c-n*u,h=s0(d,f,r,s,0,0,null);return h}function _h(t,e,n,i,r){var s=r?i:0,o=e-s;return!Number.isNaN(n)&&t>=n?n:!Number.isNaN(e)&&t<=o?o:t}var bA=function(t,e){var n=t.setup.panning.excluded,i=t.isInitialized,r=t.wrapperComponent,s=e.target,o=r==null?void 0:r.contains(s),a=i&&s&&o;if(!a)return!1;var l=a0(s,n);return!l},xA=function(t){var e=t.isInitialized,n=t.isPanning,i=t.setup,r=i.panning.disabled,s=e&&n&&!r;return!!s},hJ=function(t,e){var n=t.transformState,i=n.positionX,r=n.positionY;t.isPanning=!0;var s=e.clientX,o=e.clientY;t.startCoords={x:s-i,y:o-r}},pJ=function(t,e){var n=e.touches,i=t.transformState,r=i.positionX,s=i.positionY;t.isPanning=!0;var o=n.length===1;if(o){var a=n[0].clientX,l=n[0].clientY;t.startCoords={x:a-r,y:l-s}}};function mJ(t){var e=t.transformState,n=e.positionX,i=e.positionY,r=e.scale,s=t.setup,o=s.disabled,a=s.limitToBounds,l=s.centerZoomedOut,c=t.wrapperComponent;if(!(o||!c||!t.bounds)){var u=t.bounds,d=u.maxPositionX,f=u.minPositionX,h=u.maxPositionY,p=u.minPositionY,m=n>d||n<f,w=i>h||i<p,v=n>d?c.offsetWidth:t.setup.minPositionX||0,y=i>h?c.offsetHeight:t.setup.minPositionY||0,x=o0(t,v,y,r,t.bounds,a||l),k=x.x,_=x.y;return{scale:r,positionX:m?k:n,positionY:w?_:i}}}function gJ(t,e,n,i,r){var s=t.setup.limitToBounds,o=t.wrapperComponent,a=t.bounds,l=t.transformState,c=l.scale,u=l.positionX,d=l.positionY;if(!(o===null||a===null||e===u&&n===d)){var f=s0(e,n,a,s,i,r,o),h=f.x,p=f.y;t.setTransformState(c,h,p)}}var vJ=function(t,e,n){var i=t.startCoords,r=t.transformState,s=t.setup.panning,o=s.lockAxisX,a=s.lockAxisY,l=r.positionX,c=r.positionY;if(!i)return{x:l,y:c};var u=e-i.x,d=n-i.y,f=o?l:u,h=a?c:d;return{x:f,y:h}},Hg=function(t,e){var n=t.setup,i=t.transformState,r=i.scale,s=n.minScale,o=n.disablePadding;return e>0&&r>=s&&!o?e:0},yJ=function(t){var e=t.mounted,n=t.setup,i=n.disabled,r=n.velocityAnimation,s=t.transformState.scale,o=r.disabled,a=!o||s>1||!i||e;return!!a},wJ=function(t){var e=t.mounted,n=t.velocity,i=t.bounds,r=t.setup,s=r.disabled,o=r.velocityAnimation,a=t.transformState.scale,l=o.disabled,c=!l||a>1||!s||e;return!(!c||!n||!i)};function bJ(t,e){var n=t.setup.velocityAnimation,i=n.equalToMove,r=n.animationTime,s=n.sensitivity;return i?r*e*s:r}function SA(t,e,n,i,r,s,o,a,l,c){if(r){if(e>o&&n>o){var u=o+(t-o)*c;return u>l?l:u<o?o:u}if(e<s&&n<s){var u=s+(t-s)*c;return u<a?a:u>s?s:u}}return i?e:P1(t,s,o,r)}function xJ(t,e){var n=1;return e?Math.min(n,t.offsetWidth/window.innerWidth):n}function SJ(t,e){var n=yJ(t);if(n){var i=t.lastMousePosition,r=t.velocityTime,s=t.setup,o=t.wrapperComponent,a=s.velocityAnimation.equalToMove,l=Date.now();if(i&&r&&o){var c=xJ(o,a),u=e.x-i.x,d=e.y-i.y,f=u/c,h=d/c,p=l-r,m=u*u+d*d,w=Math.sqrt(m)/p;t.velocity={velocityX:f,velocityY:h,total:w}}t.lastMousePosition=e,t.velocityTime=l}}function kJ(t){var e=t.velocity,n=t.bounds,i=t.setup,r=t.wrapperComponent,s=wJ(t);if(!(!s||!e||!n||!r)){var o=e.velocityX,a=e.velocityY,l=e.total,c=n.maxPositionX,u=n.minPositionX,d=n.maxPositionY,f=n.minPositionY,h=i.limitToBounds,p=i.alignmentAnimation,m=i.zoomAnimation,w=i.panning,v=w.lockAxisY,y=w.lockAxisX,x=m.animationType,k=p.sizeX,_=p.sizeY,P=p.velocityAlignmentTime,A=P,C=bJ(t,l),N=Math.max(C,A),R=Hg(t,k),M=Hg(t,_),L=R*r.offsetWidth/100,H=M*r.offsetHeight/100,T=c+L,V=u-L,Y=d+H,ne=f-H,W=t.transformState,j=new Date().getTime();zI(t,x,N,function(Q){var K=t.transformState,ee=K.scale,le=K.positionX,B=K.positionY,I=new Date().getTime()-j,z=I/A,S=jI[p.animationType],$=1-S(Math.min(1,z)),D=1-Q,O=le+o*D,U=B+a*D,X=SA(O,W.positionX,le,y,h,u,c,V,T,$),te=SA(U,W.positionY,B,v,h,f,d,ne,Y,$);(le!==O||B!==U)&&t.setTransformState(ee,X,te)})}}function kA(t,e){var n=t.transformState.scale;xs(t),xu(t,n),window.TouchEvent!==void 0&&e instanceof TouchEvent?pJ(t,e):hJ(t,e)}function UI(t){var e=t.transformState.scale,n=t.setup,i=n.minScale,r=n.alignmentAnimation,s=r.disabled,o=r.sizeX,a=r.sizeY,l=r.animationTime,c=r.animationType,u=s||e<i||!o&&!a;if(!u){var d=mJ(t);d&&ja(t,d,l,c)}}function _A(t,e,n){var i=t.startCoords,r=t.setup,s=r.alignmentAnimation,o=s.sizeX,a=s.sizeY;if(i){var l=vJ(t,e,n),c=l.x,u=l.y,d=Hg(t,o),f=Hg(t,a);SJ(t,{x:c,y:u}),gJ(t,c,u,d,f)}}function _J(t){if(t.isPanning){var e=t.setup.panning.velocityDisabled,n=t.velocity,i=t.wrapperComponent,r=t.contentComponent;t.isPanning=!1,t.animate=!1,t.animation=null;var s=i==null?void 0:i.getBoundingClientRect(),o=r==null?void 0:r.getBoundingClientRect(),a=(s==null?void 0:s.width)||0,l=(s==null?void 0:s.height)||0,c=(o==null?void 0:o.width)||0,u=(o==null?void 0:o.height)||0,d=a<c||l<u,f=!e&&n&&(n==null?void 0:n.total)>.1&&d;f?kJ(t):UI(t)}}function Nk(t,e,n,i){var r=t.setup,s=r.minScale,o=r.maxScale,a=r.limitToBounds,l=_h(hr(e,2),s,o,0,!1),c=xu(t,l),u=o0(t,n,i,l,c,a),d=u.x,f=u.y;return{scale:l,positionX:d,positionY:f}}function VI(t,e,n){var i=t.transformState.scale,r=t.wrapperComponent,s=t.setup,o=s.minScale,a=s.limitToBounds,l=s.zoomAnimation,c=l.disabled,u=l.animationTime,d=l.animationType,f=c||i>=o;if((i>=1||a)&&UI(t),!(f||!r||!t.mounted)){var h=e||r.offsetWidth/2,p=n||r.offsetHeight/2,m=Nk(t,o,h,p);m&&ja(t,m,u,d)}}var va=function(){return va=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},va.apply(this,arguments)};function CA(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))}var $p={previousScale:1,scale:1,positionX:0,positionY:0},cd={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,allowLeftClickPan:!0,allowMiddleClickPan:!0,allowRightClickPan:!0,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},HI=function(t){var e,n,i,r;return{previousScale:(e=t.initialScale)!==null&&e!==void 0?e:$p.scale,scale:(n=t.initialScale)!==null&&n!==void 0?n:$p.scale,positionX:(i=t.initialPositionX)!==null&&i!==void 0?i:$p.positionX,positionY:(r=t.initialPositionY)!==null&&r!==void 0?r:$p.positionY}},EA=function(t){var e=va({},cd);return Object.keys(t).forEach(function(n){var i=typeof t[n]<"u",r=typeof cd[n]<"u";if(r&&i){var s=Object.prototype.toString.call(cd[n]),o=s==="[object Object]",a=s==="[object Array]";o?e[n]=va(va({},cd[n]),t[n]):a?e[n]=CA(CA([],cd[n],!0),t[n],!0):e[n]=t[n]}}),e},WI=function(t,e,n){var i=t.transformState.scale,r=t.wrapperComponent,s=t.setup,o=s.maxScale,a=s.minScale,l=s.zoomAnimation,c=s.smooth,u=l.size;if(!r)throw new Error("Wrapper is not mounted");var d=c?i*Math.exp(e*n):i+e*n,f=_h(hr(d,3),a,o,u,!1);return f};function GI(t,e,n,i,r){var s=t.wrapperComponent,o=t.transformState,a=o.scale,l=o.positionX,c=o.positionY;if(!s)return console.error("No WrapperComponent found");var u=s.offsetWidth,d=s.offsetHeight,f=(u/2-l)/a,h=(d/2-c)/a,p=WI(t,e,n),m=Nk(t,p,f,h);if(!m)return console.error("Error during zoom event. New transformation state was not calculated.");ja(t,m,i,r)}function KI(t,e,n,i){var r=t.setup,s=t.wrapperComponent,o=r.limitToBounds,a=HI(t.props),l=t.transformState,c=l.scale,u=l.positionX,d=l.positionY;if(s){var f=Ok(t,a.scale),h=s0(a.positionX,a.positionY,f,o,0,0,s),p={scale:a.scale,positionX:h.x,positionY:h.y};c===a.scale&&u===a.positionX&&d===a.positionY||(i==null||i(),ja(t,p,e,n))}}function CJ(t,e,n,i){var r=t.getBoundingClientRect(),s=e.getBoundingClientRect(),o=n.getBoundingClientRect(),a=s.x*i.scale,l=s.y*i.scale;return{x:(r.x-o.x+a)/i.scale,y:(r.y-o.y+l)/i.scale}}function EJ(t,e,n){var i=t.wrapperComponent,r=t.contentComponent,s=t.transformState,o=t.setup,a=o.limitToBounds,l=o.minScale,c=o.maxScale;if(!i||!r)return s;var u=i.getBoundingClientRect(),d=e.getBoundingClientRect(),f=CJ(e,i,r,s),h=f.x,p=f.y,m=d.width/s.scale,w=d.height/s.scale,v=i.offsetWidth/m,y=i.offsetHeight/w,x=_h(n||Math.min(v,y),l,c,0,!1),k=(u.width-m*x)/2,_=(u.height-w*x)/2,P=(u.left-h)*x+k,A=(u.top-p)*x+_,C=Ok(t,x),N=s0(P,A,C,a,0,0,i),R=N.x,M=N.y;return{positionX:R,positionY:M,scale:x}}var AJ=function(t){return function(e,n,i){e===void 0&&(e=.5),n===void 0&&(n=300),i===void 0&&(i="easeOut"),GI(t,1,e,n,i)}},PJ=function(t){return function(e,n,i){e===void 0&&(e=.5),n===void 0&&(n=300),i===void 0&&(i="easeOut"),GI(t,-1,e,n,i)}},$J=function(t){return function(e,n,i,r,s){r===void 0&&(r=300),s===void 0&&(s="easeOut");var o=t.transformState,a=o.positionX,l=o.positionY,c=o.scale,u=t.wrapperComponent,d=t.contentComponent,f=t.setup.disabled;if(!(f||!u||!d)){var h={positionX:Number.isNaN(e)?a:e,positionY:Number.isNaN(n)?l:n,scale:Number.isNaN(i)?c:i};ja(t,h,r,s)}}},TJ=function(t){return function(e,n){e===void 0&&(e=200),n===void 0&&(n="easeOut"),KI(t,e,n)}},OJ=function(t){return function(e,n,i){n===void 0&&(n=200),i===void 0&&(i="easeOut");var r=t.transformState,s=t.wrapperComponent,o=t.contentComponent;if(s&&o){var a=XI(e||r.scale,s,o);ja(t,a,n,i)}}},NJ=function(t){return function(e,n,i,r){i===void 0&&(i=600),r===void 0&&(r="easeOut"),xs(t);var s=t.wrapperComponent,o=typeof e=="string"?document.getElementById(e):e;if(s&&o&&s.contains(o)){var a=EJ(t,o,n);ja(t,a,i,r)}}},$1=function(t){return{instance:t,zoomIn:AJ(t),zoomOut:PJ(t),setTransform:$J(t),resetTransform:TJ(t),centerView:OJ(t),zoomToElement:NJ(t)}},RJ=function(t){return{instance:t,state:t.transformState}},gt=function(t){var e={};return Object.assign(e,RJ(t)),Object.assign(e,$1(t)),e},Gy=!1;function Ky(){try{var t={get passive(){return Gy=!0,!1}};return t}catch{return Gy=!1,Gy}}var a0=function(t,e){var n=t.tagName.toUpperCase(),i=e.find(function(s){return s.toUpperCase()===n});if(i)return!0;var r=e.find(function(s){return t.classList.contains(s)});return!!r},T1=function(t){t&&clearTimeout(t)},MJ=function(t,e,n){return"translate(".concat(t,"px, ").concat(e,"px) scale(").concat(n,")")},XI=function(t,e,n){var i=n.offsetWidth*t,r=n.offsetHeight*t,s=(e.offsetWidth-i)/2,o=(e.offsetHeight-r)/2;return{scale:t,positionX:s,positionY:o}};function DJ(t){return function(e){t.forEach(function(n){typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var IJ=function(t,e){var n=t.setup.wheel,i=n.disabled,r=n.wheelDisabled,s=n.touchPadDisabled,o=n.excluded,a=t.isInitialized,l=t.isPanning,c=e.target,u=a&&!l&&!i&&c;if(!u||r&&!e.ctrlKey||s&&e.ctrlKey)return!1;var d=a0(c,o);return!d},LJ=function(t){return t?t.deltaY<0?1:-1:0};function BJ(t,e){var n=LJ(t),i=qY(e,n);return i}function qI(t,e,n){var i=e.getBoundingClientRect(),r=0,s=0;if("clientX"in t)r=(t.clientX-i.left)/n,s=(t.clientY-i.top)/n;else{var o=t.touches[0];r=(o.clientX-i.left)/n,s=(o.clientY-i.top)/n}return(Number.isNaN(r)||Number.isNaN(s))&&console.error("No mouse or touch offset found"),{x:r,y:s}}var jJ=function(t,e,n,i,r){var s=t.transformState.scale,o=t.wrapperComponent,a=t.setup,l=a.maxScale,c=a.minScale,u=a.zoomAnimation,d=a.disablePadding,f=u.size,h=u.disabled;if(!o)throw new Error("Wrapper is not mounted");var p=s+e*n;if(r)return p;var m=i?!1:!h,w=_h(hr(p,3),c,l,f,m&&!d);return w},FJ=function(t,e){var n=t.previousWheelEvent,i=t.transformState.scale,r=t.setup,s=r.maxScale,o=r.minScale;return n?i<s||i>o||Math.sign(n.deltaY)!==Math.sign(e.deltaY)||n.deltaY>0&&n.deltaY<e.deltaY||n.deltaY<0&&n.deltaY>e.deltaY||Math.sign(n.deltaY)!==Math.sign(e.deltaY):!1},zJ=function(t,e){var n=t.setup.pinch,i=n.disabled,r=n.excluded,s=t.isInitialized,o=e.target,a=s&&!i&&o;if(!a)return!1;var l=a0(o,r);return!l},UJ=function(t){var e=t.setup.pinch.disabled,n=t.isInitialized,i=t.pinchStartDistance,r=n&&!e&&i;return!!r},VJ=function(t,e,n){var i=n.getBoundingClientRect(),r=t.touches,s=hr(r[0].clientX-i.left,5),o=hr(r[0].clientY-i.top,5),a=hr(r[1].clientX-i.left,5),l=hr(r[1].clientY-i.top,5);return{x:(s+a)/2/e,y:(o+l)/2/e}},YI=function(t){return Math.sqrt(Math.pow(t.touches[0].pageX-t.touches[1].pageX,2)+Math.pow(t.touches[0].pageY-t.touches[1].pageY,2))},HJ=function(t,e){var n=t.pinchStartScale,i=t.pinchStartDistance,r=t.setup,s=r.maxScale,o=r.minScale,a=r.zoomAnimation,l=r.disablePadding,c=a.size,u=a.disabled;if(!n||i===null||!e)throw new Error("Pinch touches distance was not provided");if(e<0)return t.transformState.scale;var d=e/i,f=d*n;return _h(hr(f,2),o,s,c,!u&&!l)},WJ=160,GJ=100,KJ=function(t,e){var n=t.props,i=n.onWheelStart,r=n.onZoomStart;t.wheelStopEventTimer||(xs(t),Rt(gt(t),e,i),Rt(gt(t),e,r))},XJ=function(t,e){var n=t.props,i=n.onWheel,r=n.onZoom,s=t.contentComponent,o=t.setup,a=t.transformState,l=a.scale,c=o.limitToBounds,u=o.centerZoomedOut,d=o.zoomAnimation,f=o.wheel,h=o.disablePadding,p=o.smooth,m=d.size,w=d.disabled,v=f.step,y=f.smoothStep;if(!s)throw new Error("Component not mounted");e.preventDefault(),e.stopPropagation();var x=BJ(e,null),k=p?y*Math.abs(e.deltaY):v,_=jJ(t,x,k,!e.ctrlKey);if(l!==_){var P=xu(t,_),A=qI(e,s,l),C=w||m===0||u||h,N=c&&C,R=o0(t,A.x,A.y,_,P,N),M=R.x,L=R.y;t.previousWheelEvent=e,t.setTransformState(_,M,L),Rt(gt(t),e,i),Rt(gt(t),e,r)}},qJ=function(t,e){var n=t.props,i=n.onWheelStop,r=n.onZoomStop;T1(t.wheelAnimationTimer),t.wheelAnimationTimer=setTimeout(function(){t.mounted&&(VI(t,e.x,e.y),t.wheelAnimationTimer=null)},GJ);var s=FJ(t,e);s&&(T1(t.wheelStopEventTimer),t.wheelStopEventTimer=setTimeout(function(){t.mounted&&(t.wheelStopEventTimer=null,Rt(gt(t),e,i),Rt(gt(t),e,r))},WJ))},YJ=function(t,e){var n=YI(e);t.pinchStartDistance=n,t.lastDistance=n,t.pinchStartScale=t.transformState.scale,t.isPanning=!1,xs(t)},JJ=function(t,e){var n=t.contentComponent,i=t.pinchStartDistance,r=t.transformState.scale,s=t.setup,o=s.limitToBounds,a=s.centerZoomedOut,l=s.zoomAnimation,c=l.disabled,u=l.size;if(!(i===null||!n)){var d=VJ(e,r,n);if(!(!Number.isFinite(d.x)||!Number.isFinite(d.y))){var f=YI(e),h=HJ(t,f);if(h!==r){var p=xu(t,h),m=c||u===0||a,w=o&&m,v=o0(t,d.x,d.y,h,p,w),y=v.x,x=v.y;t.pinchMidpoint=d,t.lastDistance=f,t.setTransformState(h,y,x)}}}},ZJ=function(t){var e=t.pinchMidpoint;t.velocity=null,t.lastDistance=null,t.pinchMidpoint=null,t.pinchStartScale=null,t.pinchStartDistance=null,VI(t,e==null?void 0:e.x,e==null?void 0:e.y)},JI=function(t,e){var n=t.props.onZoomStop,i=t.setup.doubleClick.animationTime;T1(t.doubleClickStopEventTimer),t.doubleClickStopEventTimer=setTimeout(function(){t.doubleClickStopEventTimer=null,Rt(gt(t),e,n)},i)},QJ=function(t,e){var n=t.props,i=n.onZoomStart,r=n.onZoom,s=t.setup.doubleClick,o=s.animationTime,a=s.animationType;Rt(gt(t),e,i),KI(t,o,a,function(){return Rt(gt(t),e,r)}),JI(t,e)};function eZ(t,e){var n=t.setup,i=t.doubleClickStopEventTimer,r=t.transformState,s=t.contentComponent,o=r.scale,a=t.props,l=a.onZoomStart,c=a.onZoom,u=n.doubleClick,d=u.disabled,f=u.mode,h=u.step,p=u.animationTime,m=u.animationType;if(!d&&!i){if(f==="reset")return QJ(t,e);if(!s)return console.error("No ContentComponent found");var w=f==="zoomOut"?-1:1,v=WI(t,w,h);if(o!==v){Rt(gt(t),e,l);var y=qI(e,s,o),x=Nk(t,v,y.x,y.y);if(!x)return console.error("Error during zoom event. New transformation state was not calculated.");Rt(gt(t),e,c),ja(t,x,p,m),JI(t,e)}}}var tZ=function(t,e){var n=t.isInitialized,i=t.setup,r=t.wrapperComponent,s=i.doubleClick,o=s.disabled,a=s.excluded,l=e.target,c=r==null?void 0:r.contains(l),u=n&&l&&c&&!o;if(!u)return!1;var d=a0(l,a);return!d},nZ=function(){function t(e){var n=this;this.mounted=!0,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){n.initializeWindowEvents()},this.unmount=function(){n.cleanupWindowEvents()},this.update=function(i){xu(n,n.transformState.scale),n.setup=EA(i)},this.initializeWindowEvents=function(){var i,r=Ky(),s=(i=n.wrapperComponent)===null||i===void 0?void 0:i.ownerDocument,o=s==null?void 0:s.defaultView;o==null||o.addEventListener("mousedown",n.onPanningStart,r),o==null||o.addEventListener("mousemove",n.onPanning,r),o==null||o.addEventListener("mouseup",n.onPanningStop,r),s==null||s.addEventListener("mouseleave",n.clearPanning,r),o==null||o.addEventListener("keyup",n.setKeyUnPressed,r),o==null||o.addEventListener("keydown",n.setKeyPressed,r)},this.cleanupWindowEvents=function(){var i,r,s=Ky(),o=(i=n.wrapperComponent)===null||i===void 0?void 0:i.ownerDocument,a=o==null?void 0:o.defaultView;a==null||a.removeEventListener("mousedown",n.onPanningStart,s),a==null||a.removeEventListener("mousemove",n.onPanning,s),a==null||a.removeEventListener("mouseup",n.onPanningStop,s),o==null||o.removeEventListener("mouseleave",n.clearPanning,s),a==null||a.removeEventListener("keyup",n.setKeyUnPressed,s),a==null||a.removeEventListener("keydown",n.setKeyPressed,s),document.removeEventListener("mouseleave",n.clearPanning,s),xs(n),(r=n.observer)===null||r===void 0||r.disconnect()},this.handleInitializeWrapperEvents=function(i){var r=Ky();i.addEventListener("wheel",n.onWheelZoom,r),i.addEventListener("dblclick",n.onDoubleClick,r),i.addEventListener("touchstart",n.onTouchPanningStart,r),i.addEventListener("touchmove",n.onTouchPanning,r),i.addEventListener("touchend",n.onTouchPanningStop,r)},this.handleInitialize=function(i){var r=n.setup.centerOnInit;n.applyTransformation(),n.onInitCallbacks.forEach(function(s){return s(gt(n))}),r&&(n.setCenter(),n.observer=new ResizeObserver(function(){var s;n.onInitCallbacks.forEach(function(o){return o(gt(n))}),n.setCenter(),(s=n.observer)===null||s===void 0||s.disconnect()}),n.observer.observe(i))},this.onWheelZoom=function(i){var r=n.setup.disabled;if(!r){var s=IJ(n,i);if(s){var o=n.isPressingKeys(n.setup.wheel.activationKeys);o&&(KJ(n,i),XJ(n,i),qJ(n,i))}}},this.onPanningStart=function(i){var r=n.setup.disabled,s=n.props.onPanningStart;if(!r){var o=bA(n,i);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(i.button===0&&!n.setup.panning.allowLeftClickPan||i.button===1&&!n.setup.panning.allowMiddleClickPan||i.button===2&&!n.setup.panning.allowRightClickPan||(i.preventDefault(),i.stopPropagation(),xs(n),kA(n,i),Rt(gt(n),i,s)))}}},this.onPanning=function(i){var r=n.setup.disabled,s=n.props.onPanning;if(!r){var o=xA(n);if(o){var a=n.isPressingKeys(n.setup.panning.activationKeys);a&&(i.preventDefault(),i.stopPropagation(),_A(n,i.clientX,i.clientY),Rt(gt(n),i,s))}}},this.onPanningStop=function(i){var r=n.props.onPanningStop;n.isPanning&&(_J(n),Rt(gt(n),i,r))},this.onPinchStart=function(i){var r=n.setup.disabled,s=n.props,o=s.onPinchingStart,a=s.onZoomStart;if(!r){var l=zJ(n,i);l&&(YJ(n,i),xs(n),Rt(gt(n),i,o),Rt(gt(n),i,a))}},this.onPinch=function(i){var r=n.setup.disabled,s=n.props,o=s.onPinching,a=s.onZoom;if(!r){var l=UJ(n);l&&(i.preventDefault(),i.stopPropagation(),JJ(n,i),Rt(gt(n),i,o),Rt(gt(n),i,a))}},this.onPinchStop=function(i){var r=n.props,s=r.onPinchingStop,o=r.onZoomStop;n.pinchStartScale&&(ZJ(n),Rt(gt(n),i,s),Rt(gt(n),i,o))},this.onTouchPanningStart=function(i){var r=n.setup.disabled,s=n.props.onPanningStart;if(!r){var o=bA(n,i);if(o){var a=n.lastTouch&&+new Date-n.lastTouch<200;if(a&&i.touches.length===1)n.onDoubleClick(i);else{n.lastTouch=+new Date,xs(n);var l=i.touches,c=l.length===1,u=l.length===2;c&&(xs(n),kA(n,i),Rt(gt(n),i,s)),u&&n.onPinchStart(i)}}}},this.onTouchPanning=function(i){var r=n.setup.disabled,s=n.props.onPanning;if(n.isPanning&&i.touches.length===1){if(r)return;var o=xA(n);if(!o)return;i.preventDefault(),i.stopPropagation();var a=i.touches[0];_A(n,a.clientX,a.clientY),Rt(gt(n),i,s)}else i.touches.length>1&&n.onPinch(i)},this.onTouchPanningStop=function(i){n.onPanningStop(i),n.onPinchStop(i)},this.onDoubleClick=function(i){var r=n.setup.disabled;if(!r){var s=tZ(n,i);s&&eZ(n,i)}},this.clearPanning=function(i){n.isPanning&&n.onPanningStop(i)},this.setKeyPressed=function(i){n.pressedKeys[i.key]=!0},this.setKeyUnPressed=function(i){n.pressedKeys[i.key]=!1},this.isPressingKeys=function(i){return i.length?!!i.find(function(r){return n.pressedKeys[r]}):!0},this.setTransformState=function(i,r,s){var o=n.props.onTransformed;if(!Number.isNaN(i)&&!Number.isNaN(r)&&!Number.isNaN(s)){i!==n.transformState.scale&&(n.transformState.previousScale=n.transformState.scale,n.transformState.scale=i),n.transformState.positionX=r,n.transformState.positionY=s,n.applyTransformation();var a=gt(n);n.onChangeCallbacks.forEach(function(l){return l(a)}),Rt(a,{scale:i,positionX:r,positionY:s},o)}else console.error("Detected NaN set state values")},this.setCenter=function(){if(n.wrapperComponent&&n.contentComponent){var i=XI(n.transformState.scale,n.wrapperComponent,n.contentComponent);n.setTransformState(i.scale,i.positionX,i.positionY)}},this.handleTransformStyles=function(i,r,s){return n.props.customTransform?n.props.customTransform(i,r,s):MJ(i,r,s)},this.applyTransformation=function(){if(!(!n.mounted||!n.contentComponent)){var i=n.transformState,r=i.scale,s=i.positionX,o=i.positionY,a=n.handleTransformStyles(s,o,r);n.contentComponent.style.transform=a}},this.getContext=function(){return gt(n)},this.onChange=function(i){return n.onChangeCallbacks.has(i)||n.onChangeCallbacks.add(i),function(){n.onChangeCallbacks.delete(i)}},this.onInit=function(i){return n.onInitCallbacks.has(i)||n.onInitCallbacks.add(i),function(){n.onInitCallbacks.delete(i)}},this.init=function(i,r){n.cleanupWindowEvents(),n.wrapperComponent=i,n.contentComponent=r,xu(n,n.transformState.scale),n.handleInitializeWrapperEvents(i),n.handleInitialize(r),n.initializeWindowEvents(),n.isInitialized=!0;var s=gt(n);Rt(s,void 0,n.props.onInit)},this.props=e,this.setup=EA(this.props),this.transformState=HI(this.props)}return t}(),Rk=Wt.createContext(null),iZ=function(t,e){return typeof t=="function"?t(e):t},rZ=Wt.forwardRef(function(t,e){var n=g.useRef(new nZ(t)).current,i=iZ(t.children,$1(n));return g.useImperativeHandle(e,function(){return $1(n)},[n]),g.useEffect(function(){n.update(t)},[n,t]),Wt.createElement(Rk.Provider,{value:n},i)});Wt.forwardRef(function(t,e){var n=g.useRef(null),i=g.useContext(Rk);return g.useEffect(function(){return i.onChange(function(r){if(n.current){var s=0,o=0;n.current.style.transform=i.handleTransformStyles(s,o,1/r.instance.transformState.scale)}})},[i]),Wt.createElement("div",va({},t,{ref:DJ([n,e])}))});function sZ(t,e){e===void 0&&(e={});var n=e.insertAt;if(!(!t||typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",n==="top"&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}}var oZ=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,AA={wrapper:"transform-component-module_wrapper__SPB86",content:"transform-component-module_content__FBWxo"};sZ(oZ);var aZ=function(t){var e=t.children,n=t.wrapperClass,i=n===void 0?"":n,r=t.contentClass,s=r===void 0?"":r,o=t.wrapperStyle,a=t.contentStyle,l=t.wrapperProps,c=l===void 0?{}:l,u=t.contentProps,d=u===void 0?{}:u,f=g.useContext(Rk),h=f.init,p=f.cleanupWindowEvents,m=g.useRef(null),w=g.useRef(null);return g.useEffect(function(){var v=m.current,y=w.current;return v!==null&&y!==null&&h&&(h==null||h(v,y)),function(){p==null||p()}},[]),Wt.createElement("div",va({},c,{ref:m,className:"react-transform-wrapper ".concat(AA.wrapper," ").concat(i),style:o}),Wt.createElement("div",va({},d,{ref:w,className:"react-transform-component ".concat(AA.content," ").concat(s),style:a}),e))};function lZ({wrapperRef:t}){const e=St();return b.jsxs("div",{className:"absolute right-2 top-2 flex flex-col rounded-lg border border-stone-600 bg-stone-900 shadow",children:[b.jsx("button",{className:"m-0.5 flex h-8 w-8 items-center justify-center rounded-t-lg text-white transition-colors hover:enabled:bg-stone-800",onClick:()=>{var n;return(n=t.current)==null?void 0:n.zoomIn()},title:e("control.zoom.in"),children:b.jsx("span",{className:"icon-[lucide--zoom-in] h-4 w-4"})}),b.jsx("hr",{className:"border-stone-600"}),b.jsx("button",{className:"m-0.5 flex h-8 w-8 items-center justify-center rounded-b-lg text-white transition-colors hover:enabled:bg-stone-800",onClick:()=>{var n;return(n=t.current)==null?void 0:n.zoomOut()},title:e("control.zoom.out"),children:b.jsx("span",{className:"icon-[lucide--zoom-out] h-4 w-4"})})]})}function cZ(){const t=St(),{devices:e}=gn();return e.hasIOBus?b.jsx("div",{className:"absolute left-[500px] top-[525px] z-10 h-[70px] w-[250px] rounded-lg border border-stone-600 bg-stone-900",children:b.jsx("span",{className:"block w-min whitespace-nowrap rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-lg text-white",children:t("computer.chip-select.name")})}):null}function uZ(){const{devices:t}=gn(),e=["M 380 420 H 800",t.hasIOBus&&"M 780 420 V 805",t.hasIOBus&&"M 450 805 H 900",t.hasIOBus&&"M 583 805 V 875"].filter(Boolean).join(" "),n=["M 380 440 H 800",t.hasIOBus&&"M 790 440 V 815",t.hasIOBus&&"M 450 815 H 900",t.hasIOBus&&"M 573 815 V 875"].filter(Boolean).join(" "),i="M 750 545 H 860 V 460";return b.jsxs("svg",{className:"pointer-events-none absolute inset-0 z-[15] h-full w-full",children:[b.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:e}),b.jsx(Kt.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:e,style:ft("bus.rd")}),b.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:n}),b.jsx(Kt.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:n,style:ft("bus.wr")}),t.hasIOBus&&b.jsxs(b.Fragment,{children:[b.jsx(fn,{springs:"bus.iom",d:"M 380 460 H 675 V 525"}),b.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:i}),b.jsx(Kt.path,{className:"fill-none stroke-[4px]",strokeLinejoin:"round",d:i,style:ft("bus.mem")})]}),t.pic&&b.jsx(fn,{springs:"bus.pic",d:"M 521 595 V 730 H 450"}),t.timer&&b.jsx(fn,{springs:"bus.timer",d:"M 563 595 V 875"}),t.pio&&b.jsx(fn,{springs:"bus.pio",d:"M 612 595 V 730 H 900"}),t.handshake&&b.jsx(fn,{springs:"bus.handshake",d:"M 635 595 V 730 H 900"}),t.pic&&b.jsxs(b.Fragment,{children:[b.jsx(fn,{springs:"bus.intr",d:"M 110 700 V 470"}),b.jsx(fn,{springs:"bus.inta",d:"M 160 470 V 700"})]}),t.pic&&t.f10&&b.jsx(fn,{springs:"bus.int0",d:"M 145 950 V 900"}),t.pic&&t.timer&&b.jsx(fn,{springs:"bus.int1",d:"M 500 955 H 400 V 900"}),t.pic&&t.handshake&&b.jsx(fn,{springs:"bus.int2",d:"M 930 866 V 1050 H 300 V 900"}),t.preset==="pio-switches-and-leds"&&b.jsxs(b.Fragment,{children:[b.jsx(fn,{springs:"bus.switches->pio",d:"M 1300 768 H 1120"}),b.jsx(fn,{springs:"bus.pio->leds",d:"M 1120 858 H 1300"})]}),t.preset==="pio-printer"&&b.jsxs(b.Fragment,{children:[b.jsx(fn,{springs:"bus.printer.strobe",d:"M 1120 767 H 1250"}),b.jsx(fn,{springs:"bus.printer.busy",d:"M 1250 782 H 1120"}),b.jsx(fn,{springs:"bus.printer.data",d:"M 1120 837 H 1250"})]}),t.preset==="handshake"&&b.jsxs(b.Fragment,{children:[b.jsx(fn,{springs:"bus.printer.strobe",d:"M 1120 767 H 1250"}),b.jsx(fn,{springs:"bus.printer.busy",d:"M 1250 782 H 1120"}),b.jsx(fn,{springs:"bus.printer.data",d:"M 1120 837 H 1250"})]})]})}function fn({d:t,springs:e}){return b.jsxs(b.Fragment,{children:[b.jsx("path",{className:"fill-none stroke-stone-900 stroke-[6px]",strokeLinejoin:"round",d:t}),b.jsx("path",{className:"fill-none stroke-stone-700 stroke-[4px]",strokeLinejoin:"round",d:t}),b.jsx(Kt.path,{d:t,className:"fill-none stroke-red-500 stroke-[4px]",strokeLinejoin:"round",pathLength:1,strokeDasharray:1,style:ft(e)})]})}function dZ(){const t=St(),{devices:e}=gn();return b.jsxs(b.Fragment,{children:[b.jsx($i,{className:"left-[384px] top-[403px]",children:"rd"}),b.jsx($i,{className:"left-[384px] top-[423px]",children:"wr"}),e.hasIOBus&&b.jsxs(b.Fragment,{children:[b.jsx($i,{className:"left-[384px] top-[443px]",children:"io/m"}),b.jsx($i,{className:"left-[715px] top-[538px]",children:t("computer.chip-select.mem")})]}),e.pic&&b.jsx($i,{className:"left-[510px] top-[573px]",children:t("computer.chip-select.pic")}),e.timer&&b.jsx($i,{className:"left-[545px] top-[573px]",children:t("computer.chip-select.timer")}),e.pio&&b.jsx($i,{className:"left-[600px] top-[573px]",children:t("computer.chip-select.pio")}),e.handshake&&b.jsx($i,{className:"left-[600px] top-[573px]",children:t("computer.chip-select.handshake")}),e.pic&&b.jsxs(b.Fragment,{children:[b.jsx($i,{className:"left-[75px] top-[478px]",children:"intr"}),b.jsx($i,{className:"left-[125px] top-[478px]",children:"inta"})]}),e.printer&&b.jsxs(b.Fragment,{children:[b.jsx($i,{className:"left-[1260px] top-[758px]",children:"strobe"}),b.jsx($i,{className:"left-[1260px] top-[773px]",children:"busy"}),b.jsx($i,{className:"left-[1260px] top-[828px]",children:"data"})]})]})}function $i({className:t,children:e}){return b.jsx("span",{className:He("pointer-events-none absolute z-[15] block font-mono text-xs font-bold tracking-wider text-stone-400",t),children:e})}function fZ(){const{devices:t}=gn(),e=["M 699 349 H 800",t.hasIOBus&&"M 725 349 V 770",t.hasIOBus&&"M 450 770 H 900",t.hasIOBus&&"M 618 770 V 875"].filter(Boolean).join(" "),n=["M 687 249 H 800",t.hasIOBus&&"M 765 249 V 790",t.hasIOBus&&"M 450 790 H 900",t.hasIOBus&&"M 598 790 V 875"].filter(Boolean).join(" ");return b.jsxs("svg",{className:"pointer-events-none absolute inset-0 z-[5] h-full w-full",children:[b.jsx("path",{className:"fill-none stroke-stone-900 stroke-[14px]",strokeLinejoin:"round",d:n}),b.jsx(Kt.path,{className:"fill-none stroke-[12px]",strokeLinejoin:"round",d:n,style:ft("bus.data")}),b.jsx("path",{className:"fill-none stroke-stone-900 stroke-[14px]",strokeLinejoin:"round",d:e}),b.jsx(Kt.path,{className:"fill-none stroke-[12px]",strokeLinejoin:"round",d:e,style:ft("bus.address")})]})}function hZ(){return b.jsxs(b.Fragment,{children:[b.jsx(fZ,{}),b.jsx(uZ,{}),b.jsx(dZ,{}),b.jsx(cZ,{})]})}function pZ(){const{devices:t}=gn();if(!t.clock)return null;const e=ft("clock.angle");return b.jsx("div",{className:"absolute left-[520px] top-[930px] z-10 h-12 w-12 rounded-full border border-stone-600 bg-stone-800 p-1 [&_*]:z-20",children:b.jsxs("svg",{viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:"h-full w-full fill-none stroke-white stroke-2",children:[b.jsx("circle",{cx:"12",cy:"12",r:"10"}),b.jsx(Kt.line,{x1:e.to(n=>12+6*Math.sin(n*Math.PI/180)),y1:e.to(n=>12-6*Math.cos(n*Math.PI/180)),x2:12,y2:12})]})})}const ZI="Popover",[QI,Gne]=es(ZI,[Ru]),Mk=Ru(),[mZ,Lu]=QI(ZI),gZ=t=>{const{__scopePopover:e,children:n,open:i,defaultOpen:r,onOpenChange:s,modal:o=!1}=t,a=Mk(e),l=g.useRef(null),[c,u]=g.useState(!1),[d=!1,f]=uo({prop:i,defaultProp:r,onChange:s});return g.createElement(kS,a,g.createElement(mZ,{scope:e,contentId:Tl(),triggerRef:l,open:d,onOpenChange:f,onOpenToggle:g.useCallback(()=>f(h=>!h),[f]),hasCustomAnchor:c,onCustomAnchorAdd:g.useCallback(()=>u(!0),[]),onCustomAnchorRemove:g.useCallback(()=>u(!1),[]),modal:o},n))},vZ="PopoverTrigger",yZ=g.forwardRef((t,e)=>{const{__scopePopover:n,...i}=t,r=Lu(vZ,n),s=Mk(n),o=st(e,r.triggerRef),a=g.createElement(Ge.button,be({type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":n3(r.open)},i,{ref:o,onClick:ve(t.onClick,r.onOpenToggle)}));return r.hasCustomAnchor?a:g.createElement(_S,be({asChild:!0},s),a)}),e3="PopoverPortal",[wZ,bZ]=QI(e3,{forceMount:void 0}),xZ=t=>{const{__scopePopover:e,forceMount:n,children:i,container:r}=t,s=Lu(e3,e);return g.createElement(wZ,{scope:e,forceMount:n},g.createElement(xo,{present:n||s.open},g.createElement(Tv,{asChild:!0,container:r},i)))},Zf="PopoverContent",SZ=g.forwardRef((t,e)=>{const n=bZ(Zf,t.__scopePopover),{forceMount:i=n.forceMount,...r}=t,s=Lu(Zf,t.__scopePopover);return g.createElement(xo,{present:i||s.open},s.modal?g.createElement(kZ,be({},r,{ref:e})):g.createElement(_Z,be({},r,{ref:e})))}),kZ=g.forwardRef((t,e)=>{const n=Lu(Zf,t.__scopePopover),i=g.useRef(null),r=st(e,i),s=g.useRef(!1);return g.useEffect(()=>{const o=i.current;if(o)return ES(o)},[]),g.createElement(AS,{as:$l,allowPinchZoom:!0},g.createElement(t3,be({},t,{ref:r,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ve(t.onCloseAutoFocus,o=>{var a;o.preventDefault(),s.current||(a=n.triggerRef.current)===null||a===void 0||a.focus()}),onPointerDownOutside:ve(t.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0,c=a.button===2||l;s.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:ve(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})))}),_Z=g.forwardRef((t,e)=>{const n=Lu(Zf,t.__scopePopover),i=g.useRef(!1),r=g.useRef(!1);return g.createElement(t3,be({},t,{ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var o;if((o=t.onCloseAutoFocus)===null||o===void 0||o.call(t,s),!s.defaultPrevented){var a;i.current||(a=n.triggerRef.current)===null||a===void 0||a.focus(),s.preventDefault()}i.current=!1,r.current=!1},onInteractOutside:s=>{var o,a;(o=t.onInteractOutside)===null||o===void 0||o.call(t,s),s.defaultPrevented||(i.current=!0,s.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const l=s.target;((a=n.triggerRef.current)===null||a===void 0?void 0:a.contains(l))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&r.current&&s.preventDefault()}}))}),t3=g.forwardRef((t,e)=>{const{__scopePopover:n,trapFocus:i,onOpenAutoFocus:r,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...d}=t,f=Lu(Zf,n),h=Mk(n);return pS(),g.createElement(mS,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:r,onUnmountAutoFocus:s},g.createElement(Av,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>f.onOpenChange(!1)},g.createElement(CS,be({"data-state":n3(f.open),role:"dialog",id:f.contentId},h,d,{ref:e,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}}))))});function n3(t){return t?"open":"closed"}const CZ=gZ,EZ=yZ,AZ=xZ,i3=SZ,r3=CZ,s3=EZ,Dk=g.forwardRef(({className:t,align:e="center",sideOffset:n=4,...i},r)=>b.jsx(AZ,{children:b.jsx(i3,{ref:r,align:e,sideOffset:n,className:He("z-50 w-72 rounded-md border border-stone-600 bg-stone-900 text-white shadow-md outline-none transition-opacity data-[state=closed]:opacity-0 data-[state=open]:opacity-100",t),...i})}));Dk.displayName=i3.displayName;function Ui({name:t,valueAtom:e,springs:n,emphasis:i=!1,className:r}){const s=St(),o=Vt(e),a=o.low,c={AX:"AL",BX:"BL",CX:"CL",DX:"DL"}[t]||t;return b.jsxs(r3,{children:[b.jsx(s3,{asChild:!0,children:b.jsxs(Kt.button,{title:`Registro ${c}`,className:He("flex w-min cursor-pointer items-center rounded-md border bg-stone-800 px-2 py-1 font-mono leading-none transition-opacity",i?"border-mantis-400 text-lg":"border-stone-600 text-base",r),style:ft(n),children:[b.jsx("span",{className:"mr-2 font-bold",children:c}),b.jsx("span",{className:"rounded bg-stone-900 p-0.5 font-light",children:a.toString("hex")})]})}),b.jsxs(Dk,{className:"w-60",children:[b.jsxs("p",{className:"px-4 py-2 font-medium text-white",children:["Registro ",c]}),b.jsx("hr",{className:"border-stone-600"}),b.jsx("ul",{className:"px-4 py-2 text-sm",children:["hex","bin","uint","int","safe-ascii"].map(u=>b.jsxs("li",{children:[b.jsx("b",{className:"font-medium",children:s(`generics.byte-representation.${u}`)}),":"," ",b.jsx("span",{className:"font-mono text-mantis-400",children:o.low.toString(u)})]},u))})]})]})}function PZ(){const t=Vt(Et.FLAGS),e=Vt(KM),n=t.bit(1),i=t.bit(0),r=t.bit(4);return b.jsxs(b.Fragment,{children:[b.jsxs("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:[b.jsx(Kt.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 150 85 H 220",pathLength:1,strokeDasharray:1,style:ft("cpu.alu.operands")}),b.jsx(Kt.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 159 145 H 220",pathLength:1,strokeDasharray:1,style:ft("cpu.alu.operands")}),b.jsx(Kt.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 272 115 h 28",pathLength:1,strokeDasharray:1,style:ft("cpu.alu.results")}),b.jsx(Kt.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 250 145 v 46",pathLength:1,strokeDasharray:1,style:ft("cpu.alu.results")}),b.jsx("path",{d:"M 220 65 v 40 l 17.32 10 l -17.32 10 v 40 l 51.96 -30 v -40 Z",className:"fill-stone-800 stroke-stone-600",strokeLinejoin:"round"})]}),b.jsx(Kt.span,{className:"icon-[lucide--settings] absolute left-[242px] top-[103px] block h-6 w-6 text-stone-300",style:{transform:ft("cpu.alu.cog").rot.to(s=>`rotate(${s*60}deg)`)}}),b.jsx(Kt.span,{className:"absolute left-[260px] top-[50px] flex w-min items-center rounded-md border border-stone-600 px-2 py-1 font-mono leading-none",style:ft("cpu.alu.operation"),children:e}),b.jsxs(Kt.div,{className:"absolute left-[215px] top-[190px] flex w-min items-center gap-1 rounded-md border border-mantis-400 bg-stone-800 px-2 py-1 font-mono leading-none",style:ft("cpu.FLAGS"),children:[b.jsx("span",{className:He("rounded p-1 font-light",r?"bg-mantis-400":"bg-stone-900"),children:"IF"}),b.jsx("span",{className:He("rounded p-1 font-light",n?"bg-mantis-400":"bg-stone-900"),children:"CF"}),b.jsx("span",{className:He("rounded p-1 font-light",i?"bg-mantis-400":"bg-stone-900"),children:"ZF"})]})]})}function $Z(){const t=St(),{status:e}=gn(),n=Vt(us),i=Vt(Jt),r=g.useMemo(()=>{if(!("metadata"in n)||n.metadata.operands.length===0)return"";if(n.phase==="fetching-operands"){let o=" __";for(let a=1;a<n.metadata.operands.length;a++)o+=", __";return o}else return" "+n.metadata.operands.join(", ")},[n]),s=g.useMemo(()=>e.type==="running"&&e.waitingForInput?"waiting-for-input":e.type==="stopped"?e.error?"stopped-error":"stopped":n.phase==="stopped"&&n.error?"stopped-error":n.phase,[e,n]);return b.jsxs(b.Fragment,{children:[b.jsx("svg",{viewBox:"0 0 650 500",className:"pointer-events-none absolute inset-0",children:b.jsx(Kt.path,{className:"fill-none stroke-mantis-400 stroke-bus",strokeLinejoin:"round",d:"M 205 300 V 320",pathLength:1,strokeDasharray:1,style:ft("cpu.decoder.path")})}),b.jsx("div",{className:"absolute bottom-[172px] left-[30px] flex w-full items-start",children:b.jsx("span",{className:"block w-min whitespace-nowrap rounded-t-lg border border-b-0 border-stone-600 bg-mantis-500 px-2 pb-3 pt-1 text-xs tracking-wide text-white",children:t("computer.cpu.control-unit")})}),b.jsxs("div",{className:"absolute bottom-[30px] left-[30px] flex h-[150px] w-[350px] flex-col items-center rounded-lg border border-stone-600 bg-stone-800",children:[b.jsxs("div",{className:"overflow-hidden rounded-b-lg border border-t-0 border-stone-600 bg-stone-900 px-4",children:[b.jsx("span",{className:"text-sm leading-none",children:t("computer.cpu.decoder")}),b.jsx("div",{className:"my-1 h-1 w-full overflow-hidden rounded-full bg-stone-600",children:b.jsx(Kt.div,{className:"h-full bg-mantis-400",style:{width:ft("cpu.decoder.progress.progress").to(o=>`${o*100}%`),opacity:ft("cpu.decoder.progress.opacity")}})})]}),b.jsx("span",{className:He("mt-4 w-full rounded-lg border border-stone-600 py-2 text-center text-sm leading-none transition-colors",s==="stopped-error"?"bg-red-500":s==="waiting-for-input"?"bg-amber-600":s==="int6"||s==="int7"?"bg-blue-600":"bg-stone-900"),children:s==="int6"||s==="int7"?b.jsxs(b.Fragment,{children:[t(`computer.cpu.status.${s}`),b.jsx("div",{children:i})]}):s==="stopped-error"||s==="waiting-for-input"?b.jsx(b.Fragment,{children:t(`computer.cpu.status.${s}`)}):i?b.jsx("div",{children:i}):t(`computer.cpu.status.${s}`)}),b.jsx("div",{className:"mt-4 w-64 overflow-hidden rounded-lg border border-stone-600 bg-stone-900 py-2",children:b.jsx("p",{className:"text-center font-mono",children:!("metadata"in n)||n.phase==="fetching"?b.jsx("span",{className:"italic text-stone-400",children:"???"}):b.jsxs(b.Fragment,{children:[b.jsx("span",{className:"text-mantis-400",children:n.metadata.name}),b.jsx("span",{className:"text-white",children:r})]})})})]})]})}function TZ(){const t=St();return b.jsxs("div",{className:"absolute left-0 top-0 z-10 h-[500px] w-[650px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[b.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl text-white",children:t("computer.cpu.name")}),b.jsx(sK,{}),b.jsx(LX,{}),b.jsx(li,{name:"left",className:"left-[60px] top-[70px]"}),b.jsx(li,{name:"right",className:"left-[60px] top-[130px]"}),b.jsx(li,{name:"result",className:"left-[300px] top-[100px]"}),b.jsx(PZ,{}),b.jsx(li,{name:"AX",emphasis:!0,className:"left-[450px] top-[30px]"}),b.jsx(li,{name:"BX",emphasis:!0,className:"left-[450px] top-[70px]"}),b.jsx(li,{name:"CX",emphasis:!0,className:"left-[450px] top-[110px]"}),b.jsx(li,{name:"DX",emphasis:!0,className:"left-[450px] top-[150px]"}),b.jsx(li,{name:"id",emphasis:!0,className:"left-[450px] top-[190px] opacity-0"}),b.jsx(li,{name:"MBR",className:"right-[-51px] top-[233px]"}),b.jsx(li,{name:"IR",className:"left-[171px] top-[270px]"}),b.jsx($Z,{}),b.jsx(li,{name:"IP",emphasis:!0,className:"left-[450px] top-[292px]"}),b.jsx(li,{name:"SP",emphasis:!0,className:"left-[450px] top-[332px]"}),b.jsx(li,{name:"ri",emphasis:!0,className:"left-[450px] top-[372px] opacity-0"}),b.jsx(li,{name:"MAR",className:"right-[-51px] top-[333px]"})]})}function li({name:t,emphasis:e,className:n}){return b.jsx(Ui,{name:t,valueAtom:Et[t],springs:`cpu.${t}`,emphasis:e,className:He("absolute",n)})}const OZ="_pushable_1q0ek_2",NZ="_front_1q0ek_15",RZ="_shadow_1q0ek_20",MZ="_edge_1q0ek_52",Tp={pushable:OZ,front:NZ,shadow:RZ,edge:MZ};function DZ(){const t=St(),{status:e,dispatch:n,devices:i}=gn();return io("F10",r=>{r.preventDefault(),i.f10&&n("f10.press")},void 0,[n,i.f10]),i.f10?b.jsx("div",{className:"absolute left-[50px] top-[950px] z-10 flex h-min w-48 flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:b.jsxs("button",{className:Tp.pushable,disabled:e.type!=="running",onClick:()=>n("f10.press"),children:[b.jsx("div",{className:Tp.shadow}),b.jsx("div",{className:Tp.edge}),b.jsx("span",{className:Tp.front,children:t("computer.f10")})]})}):null}function IZ(){const t=St(),{devices:e}=gn();return e.handshake?b.jsxs("div",{className:"absolute left-[900px] top-[700px] z-10 h-min w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[b.jsx("span",{className:"block h-min w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.handshake.name")}),b.jsx(Ui,{name:t("computer.handshake.state"),title:t("generics.io-register","STATE",65),valueAtom:uk,springs:"handshake.STATE",className:"mx-auto my-4"}),b.jsx("hr",{className:"border-stone-600"}),b.jsx(Ui,{name:t("computer.handshake.data"),title:t("generics.io-register","DATA",64),valueAtom:ck,springs:"handshake.DATA",className:"mx-auto my-4"})]}):null}var o3={exports:{}};/*!
 * 
 *   react-simple-keyboard v3.7.63 (index.modern.js - Modern Browsers bundle)
 *   https://github.com/hodgef/react-simple-keyboard
 *
 *   NOTE: This modern browsers bundle (index.modern.js) removes all polyfills
 *   included in the standard version. Use this if you are supporting
 *   modern browsers only. Otherwise, use the standard version (index.js).
 *
 *   Copyright (c) Francisco Hodge (https://github.com/hodgef) and project contributors.
 *
 *   This source code is licensed under the MIT license found in the
 *   LICENSE file in the root directory of this source tree.
 *
 */(function(t,e){(function(n,i){t.exports=i(g)})(OL,function(n){return function(){var i={689:function(a){a.exports=function(){var l={d:function(B,I){for(var z in I)l.o(I,z)&&!l.o(B,z)&&Object.defineProperty(B,z,{enumerable:!0,get:I[z]})},o:function(B,I){return Object.prototype.hasOwnProperty.call(B,I)},r:function(B){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(B,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(B,"__esModule",{value:!0})}},c={};function u(B){return function(I){if(Array.isArray(I))return f(I)}(B)||function(I){if(typeof Symbol<"u"&&I[Symbol.iterator]!=null||I["@@iterator"]!=null)return Array.from(I)}(B)||d(B)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function d(B,I){if(B){if(typeof B=="string")return f(B,I);var z=Object.prototype.toString.call(B).slice(8,-1);return z==="Object"&&B.constructor&&(z=B.constructor.name),z==="Map"||z==="Set"?Array.from(B):z==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(z)?f(B,I):void 0}}function f(B,I){(I==null||I>B.length)&&(I=B.length);for(var z=0,S=new Array(I);z<I;z++)S[z]=B[z];return S}function h(B){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},h(B)}function p(B,I){for(var z=0;z<I.length;z++){var S=I[z];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(B,w(S.key),S)}}function m(B,I,z){return(I=w(I))in B?Object.defineProperty(B,I,{value:z,enumerable:!0,configurable:!0,writable:!0}):B[I]=z,B}function w(B){var I=function(z,S){if(h(z)!="object"||!z)return z;var $=z[Symbol.toPrimitive];if($!==void 0){var D=$.call(z,S||"default");if(h(D)!="object")return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(z)}(B,"string");return h(I)=="symbol"?I:String(I)}l.r(c),l.d(c,{SimpleKeyboard:function(){return ee},default:function(){return le}});var v=function(){function B($){var D=$.getOptions,O=$.getCaretPosition,U=$.getCaretPositionEnd,X=$.dispatch;(function(te,J){if(!(te instanceof J))throw new TypeError("Cannot call a class as a function")})(this,B),m(this,"getOptions",void 0),m(this,"getCaretPosition",void 0),m(this,"getCaretPositionEnd",void 0),m(this,"dispatch",void 0),m(this,"maxLengthReached",void 0),m(this,"isStandardButton",function(te){return te&&!(te[0]==="{"&&te[te.length-1]==="}")}),this.getOptions=D,this.getCaretPosition=O,this.getCaretPositionEnd=U,this.dispatch=X,B.bindMethods(B,this)}var I,z,S;return I=B,z=[{key:"getButtonType",value:function($){return $.includes("{")&&$.includes("}")&&$!=="{//}"?"functionBtn":"standardBtn"}},{key:"getButtonClass",value:function($){var D=this.getButtonType($),O=$.replace("{","").replace("}",""),U="";return D!=="standardBtn"&&(U=" hg-button-".concat(O)),"hg-".concat(D).concat(U)}},{key:"getDefaultDiplay",value:function(){return{"{bksp}":"backspace","{backspace}":"backspace","{enter}":"< enter","{shift}":"shift","{shiftleft}":"shift","{shiftright}":"shift","{alt}":"alt","{s}":"shift","{tab}":"tab","{lock}":"caps","{capslock}":"caps","{accept}":"Submit","{space}":" ","{//}":" ","{esc}":"esc","{escape}":"esc","{f1}":"f1","{f2}":"f2","{f3}":"f3","{f4}":"f4","{f5}":"f5","{f6}":"f6","{f7}":"f7","{f8}":"f8","{f9}":"f9","{f10}":"f10","{f11}":"f11","{f12}":"f12","{numpaddivide}":"/","{numlock}":"lock","{arrowup}":"","{arrowleft}":"","{arrowdown}":"","{arrowright}":"","{prtscr}":"print","{scrolllock}":"scroll","{pause}":"pause","{insert}":"ins","{home}":"home","{pageup}":"up","{delete}":"del","{forwarddelete}":"del","{end}":"end","{pagedown}":"down","{numpadmultiply}":"*","{numpadsubtract}":"-","{numpadadd}":"+","{numpadenter}":"enter","{period}":".","{numpaddecimal}":".","{numpad0}":"0","{numpad1}":"1","{numpad2}":"2","{numpad3}":"3","{numpad4}":"4","{numpad5}":"5","{numpad6}":"6","{numpad7}":"7","{numpad8}":"8","{numpad9}":"9"}}},{key:"getButtonDisplayName",value:function($,D){return(D=arguments.length>2&&arguments[2]!==void 0&&arguments[2]?Object.assign({},this.getDefaultDiplay(),D):D||this.getDefaultDiplay())[$]||$}},{key:"getUpdatedInput",value:function($,D,O){var U=arguments.length>3&&arguments[3]!==void 0?arguments[3]:O,X=arguments.length>4&&arguments[4]!==void 0&&arguments[4],te=this.getOptions(),J=[O,U,X],se=D;return($==="{bksp}"||$==="{backspace}")&&se.length>0?se=this.removeAt.apply(this,[se].concat(J)):($==="{delete}"||$==="{forwarddelete}")&&se.length>0?se=this.removeForwardsAt.apply(this,[se].concat(J)):$==="{space}"?se=this.addStringAt.apply(this,[se," "].concat(J)):$!=="{tab}"||typeof te.tabCharOnTab=="boolean"&&te.tabCharOnTab===!1?$!=="{enter}"&&$!=="{numpadenter}"||!te.newLineOnEnter?$.includes("numpad")&&Number.isInteger(Number($[$.length-2]))?se=this.addStringAt.apply(this,[se,$[$.length-2]].concat(J)):$==="{numpaddivide}"?se=this.addStringAt.apply(this,[se,"/"].concat(J)):$==="{numpadmultiply}"?se=this.addStringAt.apply(this,[se,"*"].concat(J)):$==="{numpadsubtract}"?se=this.addStringAt.apply(this,[se,"-"].concat(J)):$==="{numpadadd}"?se=this.addStringAt.apply(this,[se,"+"].concat(J)):$==="{numpaddecimal}"?se=this.addStringAt.apply(this,[se,"."].concat(J)):$==="{"||$==="}"?se=this.addStringAt.apply(this,[se,$].concat(J)):$.includes("{")||$.includes("}")||(se=this.addStringAt.apply(this,[se,$].concat(J))):se=this.addStringAt.apply(this,[se,`
`].concat(J)):se=this.addStringAt.apply(this,[se,"	"].concat(J)),te.debug&&console.log("Input will be: "+se),se}},{key:"updateCaretPos",value:function($){var D=arguments.length>1&&arguments[1]!==void 0&&arguments[1],O=this.updateCaretPosAction($,D);this.dispatch(function(U){U.setCaretPosition(O)})}},{key:"updateCaretPosAction",value:function($){var D=arguments.length>1&&arguments[1]!==void 0&&arguments[1],O=this.getOptions(),U=this.getCaretPosition();return U!=null&&(D?U>0&&(U-=$):U+=$),O.debug&&console.log("Caret at:",U),U}},{key:"addStringAt",value:function($,D){var O,U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:$.length,X=arguments.length>3&&arguments[3]!==void 0?arguments[3]:$.length,te=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return U||U===0?(O=[$.slice(0,U),D,$.slice(X)].join(""),this.isMaxLengthReached()||te&&this.updateCaretPos(D.length)):O=$+D,O}},{key:"removeAt",value:function($){var D,O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:$.length,U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:$.length,X=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(O===0&&U===0)return $;if(O===U){var te=/([\uD800-\uDBFF][\uDC00-\uDFFF])/g;O&&O>=0?$.substring(O-2,O).match(te)?(D=$.substr(0,O-2)+$.substr(O),X&&this.updateCaretPos(2,!0)):(D=$.substr(0,O-1)+$.substr(O),X&&this.updateCaretPos(1,!0)):$.slice(-2).match(te)?(D=$.slice(0,-2),X&&this.updateCaretPos(2,!0)):(D=$.slice(0,-1),X&&this.updateCaretPos(1,!0))}else D=$.slice(0,O)+$.slice(U),X&&this.dispatch(function(J){J.setCaretPosition(O)});return D}},{key:"removeForwardsAt",value:function($){var D,O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:$.length,U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:$.length,X=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return $!=null&&$.length&&O!==null?(O===U?D=$.substring(O,O+2).match(/([\uD800-\uDBFF][\uDC00-\uDFFF])/g)?$.substr(0,O)+$.substr(O+2):$.substr(0,O)+$.substr(O+1):(D=$.slice(0,O)+$.slice(U),X&&this.dispatch(function(te){te.setCaretPosition(O)})),D):$}},{key:"handleMaxLength",value:function($,D){var O=this.getOptions(),U=O.maxLength,X=$[O.inputName||"default"],te=D.length-1>=U;if(D.length<=X.length)return!1;if(Number.isInteger(U))return O.debug&&console.log("maxLength (num) reached:",te),te?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1);if(h(U)==="object"){var J=D.length-1>=U[O.inputName||"default"];return O.debug&&console.log("maxLength (obj) reached:",J),J?(this.maxLengthReached=!0,!0):(this.maxLengthReached=!1,!1)}}},{key:"isMaxLengthReached",value:function(){return!!this.maxLengthReached}},{key:"isTouchDevice",value:function(){return"ontouchstart"in window||navigator.maxTouchPoints}},{key:"pointerEventsSupported",value:function(){return!!window.PointerEvent}},{key:"camelCase",value:function($){return $?$.toLowerCase().trim().split(/[.\-_\s]/g).reduce(function(D,O){return O.length?D+O[0].toUpperCase()+O.slice(1):D}):""}},{key:"chunkArray",value:function($,D){return u(Array(Math.ceil($.length/D))).map(function(O,U){return $.slice(D*U,D+D*U)})}},{key:"escapeRegex",value:function($){return $.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}},{key:"getRtlOffset",value:function($,D){var O=$,U=D.indexOf("");return U<$&&U!=-1&&O--,D.indexOf("")<$&&U!=-1&&O--,O<0?0:O}}],S=[{key:"bindMethods",value:function($,D){var O,U=function(te,J){var se=typeof Symbol<"u"&&te[Symbol.iterator]||te["@@iterator"];if(!se){if(Array.isArray(te)||(se=d(te))||J&&te&&typeof te.length=="number"){se&&(te=se);var Me=0,pe=function(){};return{s:pe,n:function(){return Me>=te.length?{done:!0}:{done:!1,value:te[Me++]}},e:function(it){throw it},f:pe}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Le,ze=!0,xe=!1;return{s:function(){se=se.call(te)},n:function(){var it=se.next();return ze=it.done,it},e:function(it){xe=!0,Le=it},f:function(){try{ze||se.return==null||se.return()}finally{if(xe)throw Le}}}}(Object.getOwnPropertyNames($.prototype));try{for(U.s();!(O=U.n()).done;){var X=O.value;X==="constructor"||X==="bindMethods"||(D[X]=D[X].bind(D))}}catch(te){U.e(te)}finally{U.f()}}}],z&&p(I.prototype,z),S&&p(I,S),Object.defineProperty(I,"prototype",{writable:!1}),B}();m(v,"noop",function(){});var y=v;function x(B){return x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},x(B)}function k(B,I){for(var z=0;z<I.length;z++){var S=I[z];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(B,P(S.key),S)}}function _(B,I,z){return(I=P(I))in B?Object.defineProperty(B,I,{value:z,enumerable:!0,configurable:!0,writable:!0}):B[I]=z,B}function P(B){var I=function(z,S){if(x(z)!="object"||!z)return z;var $=z[Symbol.toPrimitive];if($!==void 0){var D=$.call(z,S||"default");if(x(D)!="object")return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(z)}(B,"string");return x(I)=="symbol"?I:String(I)}var A=function(){function B(S){var $=this,D=S.dispatch,O=S.getOptions;(function(U,X){if(!(U instanceof X))throw new TypeError("Cannot call a class as a function")})(this,B),_(this,"getOptions",void 0),_(this,"dispatch",void 0),_(this,"isMofifierKey",function(U){return U.altKey||U.ctrlKey||U.shiftKey||["Tab","CapsLock","Esc","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(U.code||U.key||$.keyCodeToKey(U==null?void 0:U.keyCode))}),this.dispatch=D,this.getOptions=O,y.bindMethods(B,this)}var I,z;return I=B,(z=[{key:"handleHighlightKeyDown",value:function(S){var $=this.getOptions();$.physicalKeyboardHighlightPreventDefault&&this.isMofifierKey(S)&&(S.preventDefault(),S.stopImmediatePropagation());var D=this.getSimpleKeyboardLayoutKey(S);this.dispatch(function(O){var U,X,te=O.getButtonElement(D),J=O.getButtonElement("{".concat(D,"}"));if(te)U=te,X=D;else{if(!J)return;U=J,X="{".concat(D,"}")}var se,Me,pe,Le,ze=function(it){it.style.background=$.physicalKeyboardHighlightBgColor||"#dadce4",it.style.color=$.physicalKeyboardHighlightTextColor||"black"};if(U)if(Array.isArray(U)){if(U.forEach(function(it){return ze(it)}),$.physicalKeyboardHighlightPress)if($.physicalKeyboardHighlightPressUsePointerEvents)(se=U[0])===null||se===void 0||(Me=se.onpointerdown)===null||Me===void 0||Me.call(se,S);else if($.physicalKeyboardHighlightPressUseClick){var xe;(xe=U[0])===null||xe===void 0||xe.click()}else O.handleButtonClicked(X,S)}else ze(U),$.physicalKeyboardHighlightPress&&($.physicalKeyboardHighlightPressUsePointerEvents?(pe=U)===null||pe===void 0||(Le=pe.onpointerdown)===null||Le===void 0||Le.call(pe,S):$.physicalKeyboardHighlightPressUseClick?U.click():O.handleButtonClicked(X,S))})}},{key:"handleHighlightKeyUp",value:function(S){var $=this.getOptions();$.physicalKeyboardHighlightPreventDefault&&this.isMofifierKey(S)&&(S.preventDefault(),S.stopImmediatePropagation());var D=this.getSimpleKeyboardLayoutKey(S);this.dispatch(function(O){var U,X,te,J=O.getButtonElement(D)||O.getButtonElement("{".concat(D,"}")),se=function(Me){Me.removeAttribute&&Me.removeAttribute("style")};J&&(Array.isArray(J)?(J.forEach(function(Me){return se(Me)}),$.physicalKeyboardHighlightPressUsePointerEvents&&((U=J[0])===null||U===void 0||(X=U.onpointerup)===null||X===void 0||X.call(U,S))):(se(J),$.physicalKeyboardHighlightPressUsePointerEvents&&(J==null||(te=J.onpointerup)===null||te===void 0||te.call(J,S))))})}},{key:"getSimpleKeyboardLayoutKey",value:function(S){var $,D="",O=S.code||S.key||this.keyCodeToKey(S==null?void 0:S.keyCode);return(D=O!=null&&O.includes("Numpad")||O!=null&&O.includes("Shift")||O!=null&&O.includes("Space")||O!=null&&O.includes("Backspace")||O!=null&&O.includes("Control")||O!=null&&O.includes("Alt")||O!=null&&O.includes("Meta")?S.code||"":S.key||this.keyCodeToKey(S==null?void 0:S.keyCode)||"").length>1?($=D)===null||$===void 0?void 0:$.toLowerCase():D}},{key:"keyCodeToKey",value:function(S){return{8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",91:"Meta",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9",106:"NumpadMultiply",107:"NumpadAdd",109:"NumpadSubtract",110:"NumpadDecimal",111:"NumpadDivide",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}[S]||""}}])&&k(I.prototype,z),Object.defineProperty(I,"prototype",{writable:!1}),B}();function C(B){return C=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},C(B)}function N(B,I){for(var z=0;z<I.length;z++){var S=I[z];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(B,M(S.key),S)}}function R(B,I,z){return(I=M(I))in B?Object.defineProperty(B,I,{value:z,enumerable:!0,configurable:!0,writable:!0}):B[I]=z,B}function M(B){var I=function(z,S){if(C(z)!="object"||!z)return z;var $=z[Symbol.toPrimitive];if($!==void 0){var D=$.call(z,S||"default");if(C(D)!="object")return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(z)}(B,"string");return C(I)=="symbol"?I:String(I)}var L=function(){function B(S){var $=S.utilities,D=S.options;(function(O,U){if(!(O instanceof U))throw new TypeError("Cannot call a class as a function")})(this,B),R(this,"utilities",void 0),R(this,"options",void 0),R(this,"candidateBoxElement",void 0),R(this,"pageIndex",0),R(this,"pageSize",void 0),this.utilities=$,this.options=D,y.bindMethods(B,this),this.pageSize=this.utilities.getOptions().layoutCandidatesPageSize||5}var I,z;return I=B,z=[{key:"destroy",value:function(){this.candidateBoxElement&&(this.candidateBoxElement.remove(),this.pageIndex=0)}},{key:"show",value:function(S){var $=this,D=S.candidateValue,O=S.targetElement,U=S.onSelect;if(D&&D.length){var X=this.utilities.chunkArray(D.split(" "),this.pageSize);this.renderPage({candidateListPages:X,targetElement:O,pageIndex:this.pageIndex,nbPages:X.length,onItemSelected:function(te,J){U(te,J),$.destroy()}})}}},{key:"renderPage",value:function(S){var $,D=this,O=S.candidateListPages,U=S.targetElement,X=S.pageIndex,te=S.nbPages,J=S.onItemSelected;($=this.candidateBoxElement)===null||$===void 0||$.remove(),this.candidateBoxElement=document.createElement("div"),this.candidateBoxElement.className="hg-candidate-box";var se=document.createElement("ul");se.className="hg-candidate-box-list",O[X].forEach(function(ai){var Va,ts=document.createElement("li"),Eo=function(){var Ao=new(D.options.useTouchEvents?TouchEvent:MouseEvent)("click");return Object.defineProperty(Ao,"target",{value:ts}),Ao};ts.className="hg-candidate-box-list-item",ts.innerHTML=((Va=D.options.display)===null||Va===void 0?void 0:Va[ai])||ai,D.options.useTouchEvents?ts.ontouchstart=function(Ao){return J(ai,Ao||Eo())}:ts.onclick=function(){var Ao=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Eo();return J(ai,Ao)},se.appendChild(ts)});var Me=X>0,pe=document.createElement("div");pe.classList.add("hg-candidate-box-prev"),Me&&pe.classList.add("hg-candidate-box-btn-active");var Le=function(){Me&&D.renderPage({candidateListPages:O,targetElement:U,pageIndex:X-1,nbPages:te,onItemSelected:J})};this.options.useTouchEvents?pe.ontouchstart=Le:pe.onclick=Le,this.candidateBoxElement.appendChild(pe),this.candidateBoxElement.appendChild(se);var ze=X<te-1,xe=document.createElement("div");xe.classList.add("hg-candidate-box-next"),ze&&xe.classList.add("hg-candidate-box-btn-active");var it=function(){ze&&D.renderPage({candidateListPages:O,targetElement:U,pageIndex:X+1,nbPages:te,onItemSelected:J})};this.options.useTouchEvents?xe.ontouchstart=it:xe.onclick=it,this.candidateBoxElement.appendChild(xe),U.prepend(this.candidateBoxElement)}}],z&&N(I.prototype,z),Object.defineProperty(I,"prototype",{writable:!1}),B}(),H=L;function T(B){return function(I){if(Array.isArray(I))return V(I)}(B)||function(I){if(typeof Symbol<"u"&&I[Symbol.iterator]!=null||I["@@iterator"]!=null)return Array.from(I)}(B)||function(I,z){if(I){if(typeof I=="string")return V(I,z);var S=Object.prototype.toString.call(I).slice(8,-1);return S==="Object"&&I.constructor&&(S=I.constructor.name),S==="Map"||S==="Set"?Array.from(I):S==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S)?V(I,z):void 0}}(B)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function V(B,I){(I==null||I>B.length)&&(I=B.length);for(var z=0,S=new Array(I);z<I;z++)S[z]=B[z];return S}function Y(B){return Y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},Y(B)}function ne(B,I){var z=Object.keys(B);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(B);I&&(S=S.filter(function($){return Object.getOwnPropertyDescriptor(B,$).enumerable})),z.push.apply(z,S)}return z}function W(B,I){for(var z=0;z<I.length;z++){var S=I[z];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(B,Q(S.key),S)}}function j(B,I,z){return(I=Q(I))in B?Object.defineProperty(B,I,{value:z,enumerable:!0,configurable:!0,writable:!0}):B[I]=z,B}function Q(B){var I=function(z,S){if(Y(z)!="object"||!z)return z;var $=z[Symbol.toPrimitive];if($!==void 0){var D=$.call(z,S||"default");if(Y(D)!="object")return D;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(z)}(B,"string");return Y(I)=="symbol"?I:String(I)}var K=function(){function B(S,$){var D=this;if(function(pe,Le){if(!(pe instanceof Le))throw new TypeError("Cannot call a class as a function")}(this,B),j(this,"input",void 0),j(this,"options",void 0),j(this,"utilities",void 0),j(this,"caretPosition",void 0),j(this,"caretPositionEnd",void 0),j(this,"keyboardDOM",void 0),j(this,"keyboardPluginClasses",void 0),j(this,"keyboardDOMClass",void 0),j(this,"buttonElements",void 0),j(this,"currentInstanceName",void 0),j(this,"allKeyboardInstances",void 0),j(this,"keyboardInstanceNames",void 0),j(this,"isFirstKeyboardInstance",void 0),j(this,"physicalKeyboard",void 0),j(this,"modules",void 0),j(this,"activeButtonClass",void 0),j(this,"holdInteractionTimeout",void 0),j(this,"holdTimeout",void 0),j(this,"isMouseHold",void 0),j(this,"initialized",void 0),j(this,"candidateBox",void 0),j(this,"keyboardRowsDOM",void 0),j(this,"defaultName","default"),j(this,"activeInputElement",null),j(this,"handleParams",function(pe,Le){var ze,xe,it;if(typeof pe=="string")ze=pe.split(".").join(""),xe=document.querySelector(".".concat(ze)),it=Le;else if(pe instanceof HTMLDivElement){if(!pe.className)throw console.warn("Any DOM element passed as parameter must have a class."),new Error("KEYBOARD_DOM_CLASS_ERROR");ze=pe.className.split(" ")[0],xe=pe,it=Le}else ze="simple-keyboard",xe=document.querySelector(".".concat(ze)),it=pe;return{keyboardDOMClass:ze,keyboardDOM:xe,options:it}}),j(this,"getOptions",function(){return D.options}),j(this,"getCaretPosition",function(){return D.caretPosition}),j(this,"getCaretPositionEnd",function(){return D.caretPositionEnd}),j(this,"registerModule",function(pe,Le){D.modules[pe]||(D.modules[pe]={}),Le(D.modules[pe])}),j(this,"getKeyboardClassString",function(){for(var pe=arguments.length,Le=new Array(pe),ze=0;ze<pe;ze++)Le[ze]=arguments[ze];return[D.keyboardDOMClass].concat(Le).filter(function(xe){return!!xe}).join(" ")}),typeof window<"u"){var O=this.handleParams(S,$),U=O.keyboardDOMClass,X=O.keyboardDOM,te=O.options,J=te===void 0?{}:te;this.utilities=new y({getOptions:this.getOptions,getCaretPosition:this.getCaretPosition,getCaretPositionEnd:this.getCaretPositionEnd,dispatch:this.dispatch}),this.caretPosition=null,this.caretPositionEnd=null,this.keyboardDOM=X,this.options=function(pe){for(var Le=1;Le<arguments.length;Le++){var ze=arguments[Le]!=null?arguments[Le]:{};Le%2?ne(Object(ze),!0).forEach(function(xe){j(pe,xe,ze[xe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(pe,Object.getOwnPropertyDescriptors(ze)):ne(Object(ze)).forEach(function(xe){Object.defineProperty(pe,xe,Object.getOwnPropertyDescriptor(ze,xe))})}return pe}({layoutName:"default",theme:"hg-theme-default",inputName:"default",preventMouseDownDefault:!1,enableLayoutCandidates:!0,excludeFromLayout:{}},J),this.keyboardPluginClasses="",y.bindMethods(B,this);var se=this.options.inputName,Me=se===void 0?this.defaultName:se;if(this.input={},this.input[Me]="",this.keyboardDOMClass=U,this.buttonElements={},window.SimpleKeyboardInstances||(window.SimpleKeyboardInstances={}),this.currentInstanceName=this.utilities.camelCase(this.keyboardDOMClass),window.SimpleKeyboardInstances[this.currentInstanceName]=this,this.allKeyboardInstances=window.SimpleKeyboardInstances,this.keyboardInstanceNames=Object.keys(window.SimpleKeyboardInstances),this.isFirstKeyboardInstance=this.keyboardInstanceNames[0]===this.currentInstanceName,this.physicalKeyboard=new A({dispatch:this.dispatch,getOptions:this.getOptions}),this.candidateBox=this.options.enableLayoutCandidates?new H({utilities:this.utilities,options:this.options}):null,!this.keyboardDOM)throw console.warn('".'.concat(U,'" was not found in the DOM.')),new Error("KEYBOARD_DOM_ERROR");this.render(),this.modules={},this.loadModules()}}var I,z;return I=B,z=[{key:"setCaretPosition",value:function(S){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:S;this.caretPosition=S,this.caretPositionEnd=$}},{key:"getInputCandidates",value:function(S){var $=this,D=this.options,O=D.layoutCandidates,U=D.layoutCandidatesCaseSensitiveMatch;if(!O||Y(O)!=="object")return{};var X=Object.keys(O).filter(function(se){var Me=S.substring(0,$.getCaretPositionEnd()||0)||S,pe=new RegExp("".concat($.utilities.escapeRegex(se),"$"),U?"g":"gi");return!!T(Me.matchAll(pe)).length});if(X.length>1){var te=X.sort(function(se,Me){return Me.length-se.length})[0];return{candidateKey:te,candidateValue:O[te]}}if(X.length){var J=X[0];return{candidateKey:J,candidateValue:O[J]}}return{}}},{key:"showCandidatesBox",value:function(S,$,D){var O=this;this.candidateBox&&this.candidateBox.show({candidateValue:$,targetElement:D,onSelect:function(U,X){var te=O.options,J=te.layoutCandidatesCaseSensitiveMatch,se=te.disableCandidateNormalization,Me=te.enableLayoutCandidatesKeyPress,pe=U;se||(pe=U.normalize("NFD"));var Le=O.getInput(O.options.inputName,!0),ze=O.getCaretPositionEnd()||0,xe=Le.substring(0,ze||0)||Le,it=new RegExp("".concat(O.utilities.escapeRegex(S),"$"),J?"g":"gi"),ai=xe.replace(it,pe),Va=Le.replace(xe,ai),ts=ai.length-xe.length,Eo=(ze||Le.length)+ts;Eo<0&&(Eo=0),O.setInput(Va,O.options.inputName,!0),O.setCaretPosition(Eo),Me&&typeof O.options.onKeyPress=="function"&&O.options.onKeyPress(U,X),typeof O.options.onChange=="function"&&O.options.onChange(O.getInput(O.options.inputName,!0),X),typeof O.options.onChangeAll=="function"&&O.options.onChangeAll(O.getAllInputs(),X)}})}},{key:"handleButtonClicked",value:function(S,$){var D=this.options,O=D.inputName,U=O===void 0?this.defaultName:O,X=D.debug;if(S!=="{//}"){this.input[U]||(this.input[U]="");var te=this.utilities.getUpdatedInput(S,this.input[U],this.caretPosition,this.caretPositionEnd);if(this.utilities.isStandardButton(S)&&this.activeInputElement&&this.input[U]&&this.input[U]===te&&this.caretPosition===0&&this.caretPositionEnd===te.length)return this.setInput("",this.options.inputName,!0),this.setCaretPosition(0),this.activeInputElement.value="",this.activeInputElement.setSelectionRange(0,0),void this.handleButtonClicked(S,$);if(typeof this.options.onKeyPress=="function"&&this.options.onKeyPress(S,$),this.input[U]!==te&&(!this.options.inputPattern||this.options.inputPattern&&this.inputPatternIsValid(te))){if(this.options.maxLength&&this.utilities.handleMaxLength(this.input,te))return;var J=this.utilities.getUpdatedInput(S,this.input[U],this.caretPosition,this.caretPositionEnd,!0);if(this.setInput(J,this.options.inputName,!0),X&&console.log("Input changed:",this.getAllInputs()),this.options.debug&&console.log("Caret at: ",this.getCaretPosition(),this.getCaretPositionEnd(),"(".concat(this.keyboardDOMClass,")"),$==null?void 0:$.type),this.options.syncInstanceInputs&&this.syncInstanceInputs(),typeof this.options.onChange=="function"&&this.options.onChange(this.getInput(this.options.inputName,!0),$),typeof this.options.onChangeAll=="function"&&this.options.onChangeAll(this.getAllInputs(),$),$!=null&&$.target&&this.options.enableLayoutCandidates){var se,Me=this.getInputCandidates(te),pe=Me.candidateKey,Le=Me.candidateValue;pe&&Le?this.showCandidatesBox(pe,Le,this.keyboardDOM):(se=this.candidateBox)===null||se===void 0||se.destroy()}}this.caretPositionEnd&&this.caretPosition!==this.caretPositionEnd&&(this.setCaretPosition(this.caretPositionEnd,this.caretPositionEnd),this.activeInputElement&&this.activeInputElement.setSelectionRange(this.caretPositionEnd,this.caretPositionEnd),this.options.debug&&console.log("Caret position aligned",this.caretPosition)),X&&console.log("Key pressed:",S)}}},{key:"getMouseHold",value:function(){return this.isMouseHold}},{key:"setMouseHold",value:function(S){this.options.syncInstanceInputs?this.dispatch(function($){$.isMouseHold=S}):this.isMouseHold=S}},{key:"handleButtonMouseDown",value:function(S,$){var D=this;$&&(this.options.preventMouseDownDefault&&$.preventDefault(),this.options.stopMouseDownPropagation&&$.stopPropagation(),$.target.classList.add(this.activeButtonClass)),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdTimeout&&clearTimeout(this.holdTimeout),this.setMouseHold(!0),this.options.disableButtonHold||(this.holdTimeout=window.setTimeout(function(){(D.getMouseHold()&&(!S.includes("{")&&!S.includes("}")||S==="{delete}"||S==="{backspace}"||S==="{bksp}"||S==="{space}"||S==="{tab}")||S==="{arrowright}"||S==="{arrowleft}"||S==="{arrowup}"||S==="{arrowdown}")&&(D.options.debug&&console.log("Button held:",S),D.handleButtonHold(S)),clearTimeout(D.holdTimeout)},500))}},{key:"handleButtonMouseUp",value:function(S,$){var D=this;$&&(this.options.preventMouseUpDefault&&$.preventDefault&&$.preventDefault(),this.options.stopMouseUpPropagation&&$.stopPropagation&&$.stopPropagation(),!($.target===this.keyboardDOM||$.target&&this.keyboardDOM.contains($.target)||this.candidateBox&&this.candidateBox.candidateBoxElement&&($.target===this.candidateBox.candidateBoxElement||$.target&&this.candidateBox.candidateBoxElement.contains($.target)))&&this.candidateBox&&this.candidateBox.destroy()),this.recurseButtons(function(O){O.classList.remove(D.activeButtonClass)}),this.setMouseHold(!1),this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),S&&typeof this.options.onKeyReleased=="function"&&this.options.onKeyReleased(S,$)}},{key:"handleKeyboardContainerMouseDown",value:function(S){this.options.preventMouseDownDefault&&S.preventDefault()}},{key:"handleButtonHold",value:function(S){var $=this;this.holdInteractionTimeout&&clearTimeout(this.holdInteractionTimeout),this.holdInteractionTimeout=window.setTimeout(function(){$.getMouseHold()?($.handleButtonClicked(S),$.handleButtonHold(S)):clearTimeout($.holdInteractionTimeout)},100)}},{key:"syncInstanceInputs",value:function(){var S=this;this.dispatch(function($){$.replaceInput(S.input),$.setCaretPosition(S.caretPosition,S.caretPositionEnd)})}},{key:"clearInput",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName;this.input[S]="",this.setCaretPosition(0),this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"getInput",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.inputName||this.defaultName,$=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return this.options.syncInstanceInputs&&!$&&this.syncInstanceInputs(),this.options.rtl?""+this.input[S].replace("","").replace("","")+"":this.input[S]}},{key:"getAllInputs",value:function(){var S=this,$={};return Object.keys(this.input).forEach(function(D){$[D]=S.getInput(D,!0)}),$}},{key:"setInput",value:function(S){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.inputName||this.defaultName,D=arguments.length>2?arguments[2]:void 0;this.input[$]=S,!D&&this.options.syncInstanceInputs&&this.syncInstanceInputs()}},{key:"replaceInput",value:function(S){this.input=S}},{key:"setOptions",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},$=this.changedOptions(S);this.options=Object.assign(this.options,S),$.length&&(this.options.debug&&console.log("changedOptions",$),this.onSetOptions($),this.render())}},{key:"changedOptions",value:function(S){var $=this;return Object.keys(S).filter(function(D){return JSON.stringify(S[D])!==JSON.stringify($.options[D])})}},{key:"onSetOptions",value:function(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];S.includes("layoutName")&&this.candidateBox&&this.candidateBox.destroy(),(S.includes("layoutCandidatesPageSize")||S.includes("layoutCandidates"))&&this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=new H({utilities:this.utilities,options:this.options}))}},{key:"resetRows",value:function(){this.keyboardRowsDOM&&this.keyboardRowsDOM.remove(),this.keyboardDOM.className=this.keyboardDOMClass,this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.buttonElements={}}},{key:"dispatch",value:function(S){if(!window.SimpleKeyboardInstances)throw console.warn("SimpleKeyboardInstances is not defined. Dispatch cannot be called."),new Error("INSTANCES_VAR_ERROR");return Object.keys(window.SimpleKeyboardInstances).forEach(function($){S(window.SimpleKeyboardInstances[$],$)})}},{key:"addButtonTheme",value:function(S,$){var D=this;$&&S&&(S.split(" ").forEach(function(O){$.split(" ").forEach(function(U){D.options.buttonTheme||(D.options.buttonTheme=[]);var X=!1;D.options.buttonTheme.map(function(te){if(te!=null&&te.class.split(" ").includes(U)){X=!0;var J=te.buttons.split(" ");J.includes(O)||(X=!0,J.push(O),te.buttons=J.join(" "))}return te}),X||D.options.buttonTheme.push({class:U,buttons:S})})}),this.render())}},{key:"removeButtonTheme",value:function(S,$){var D=this;if(!S&&!$)return this.options.buttonTheme=[],void this.render();S&&Array.isArray(this.options.buttonTheme)&&this.options.buttonTheme.length&&(S.split(" ").forEach(function(O){var U;(U=D.options)===null||U===void 0||(U=U.buttonTheme)===null||U===void 0||U.map(function(X,te){if(X&&$&&$.includes(X.class)||!$){var J,se,Me=(J=X)===null||J===void 0?void 0:J.buttons.split(" ").filter(function(pe){return pe!==O});X&&Me!=null&&Me.length?X.buttons=Me.join(" "):((se=D.options.buttonTheme)===null||se===void 0||se.splice(te,1),X=null)}return X})}),this.render())}},{key:"getButtonElement",value:function(S){var $,D=this.buttonElements[S];return D&&($=D.length>1?D:D[0]),$}},{key:"inputPatternIsValid",value:function(S){var $,D=this.options.inputPattern;if(($=D instanceof RegExp?D:D[this.options.inputName||this.defaultName])&&S){var O=$.test(S);return this.options.debug&&console.log('inputPattern ("'.concat($,'"): ').concat(O?"passed":"did not pass!")),O}return!0}},{key:"setEventListeners",value:function(){if(this.isFirstKeyboardInstance||!this.allKeyboardInstances){this.options.debug&&console.log("Caret handling started (".concat(this.keyboardDOMClass,")"));var S=this.options.physicalKeyboardHighlightPreventDefault,$=S!==void 0&&S;document.addEventListener("keyup",this.handleKeyUp,$),document.addEventListener("keydown",this.handleKeyDown,$),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("touchend",this.handleTouchEnd),document.addEventListener("selectionchange",this.handleSelectionChange),document.addEventListener("select",this.handleSelect)}}},{key:"handleKeyUp",value:function(S){this.caretEventHandler(S),this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyUp(S)}},{key:"handleKeyDown",value:function(S){this.options.physicalKeyboardHighlight&&this.physicalKeyboard.handleHighlightKeyDown(S)}},{key:"handleMouseUp",value:function(S){this.caretEventHandler(S)}},{key:"handleTouchEnd",value:function(S){this.caretEventHandler(S)}},{key:"handleSelect",value:function(S){this.caretEventHandler(S)}},{key:"handleSelectionChange",value:function(S){navigator.userAgent.includes("Firefox")||this.caretEventHandler(S)}},{key:"caretEventHandler",value:function(S){var $,D=this;S.target.tagName&&($=S.target.tagName.toLowerCase()),this.dispatch(function(O){var U=S.target===O.keyboardDOM||S.target&&O.keyboardDOM.contains(S.target);if(D.options.syncInstanceInputs&&Array.isArray(S.path)&&(U=S.path.some(function(J){var se;return J==null||(se=J.hasAttribute)===null||se===void 0?void 0:se.call(J,"data-skInstance")})),($==="textarea"||$==="input"&&["text","search","url","tel","password"].includes(S.target.type))&&!O.options.disableCaretPositioning){var X=S.target.selectionStart,te=S.target.selectionEnd;O.options.rtl&&(X=O.utilities.getRtlOffset(X,O.getInput()),te=O.utilities.getRtlOffset(te,O.getInput())),O.setCaretPosition(X,te),D.activeInputElement=S.target,O.options.debug&&console.log("Caret at: ",O.getCaretPosition(),O.getCaretPositionEnd(),S&&S.target.tagName.toLowerCase(),"(".concat(O.keyboardDOMClass,")"),S==null?void 0:S.type)}else!O.options.disableCaretPositioning&&U||(S==null?void 0:S.type)==="selectionchange"||(O.setCaretPosition(null),D.activeInputElement=null,O.options.debug&&console.log('Caret position reset due to "'.concat(S==null?void 0:S.type,'" event'),S))})}},{key:"recurseButtons",value:function(S){var $=this;S&&Object.keys(this.buttonElements).forEach(function(D){return $.buttonElements[D].forEach(S)})}},{key:"destroy",value:function(){this.options.debug&&console.log("Destroying simple-keyboard instance: ".concat(this.currentInstanceName));var S=this.options.physicalKeyboardHighlightPreventDefault,$=S!==void 0&&S;document.removeEventListener("keyup",this.handleKeyUp,$),document.removeEventListener("keydown",this.handleKeyDown,$),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("touchend",this.handleTouchEnd),document.removeEventListener("select",this.handleSelect),document.removeEventListener("selectionchange",this.handleSelectionChange),document.onpointerup=null,document.ontouchend=null,document.ontouchcancel=null,document.onmouseup=null,this.recurseButtons(function(D){D&&(D.onpointerdown=null,D.onpointerup=null,D.onpointercancel=null,D.ontouchstart=null,D.ontouchend=null,D.ontouchcancel=null,D.onclick=null,D.onmousedown=null,D.onmouseup=null,D.remove(),D=null)}),this.keyboardDOM.onpointerdown=null,this.keyboardDOM.ontouchstart=null,this.keyboardDOM.onmousedown=null,this.resetRows(),this.candidateBox&&(this.candidateBox.destroy(),this.candidateBox=null),this.activeInputElement=null,this.keyboardDOM.removeAttribute("data-skInstance"),this.keyboardDOM.innerHTML="",window.SimpleKeyboardInstances[this.currentInstanceName]=null,delete window.SimpleKeyboardInstances[this.currentInstanceName],this.initialized=!1}},{key:"getButtonThemeClasses",value:function(S){var $=this.options.buttonTheme,D=[];return Array.isArray($)&&$.forEach(function(O){if(O&&O.class&&typeof O.class=="string"&&O.buttons&&typeof O.buttons=="string"){var U=O.class.split(" ");O.buttons.split(" ").includes(S)&&(D=[].concat(T(D),T(U)))}else console.warn('Incorrect "buttonTheme". Please check the documentation.',O)}),D}},{key:"setDOMButtonAttributes",value:function(S,$){var D=this.options.buttonAttributes;Array.isArray(D)&&D.forEach(function(O){O.attribute&&typeof O.attribute=="string"&&O.value&&typeof O.value=="string"&&O.buttons&&typeof O.buttons=="string"?O.buttons.split(" ").includes(S)&&$(O.attribute,O.value):console.warn('Incorrect "buttonAttributes". Please check the documentation.',O)})}},{key:"onTouchDeviceDetected",value:function(){this.processAutoTouchEvents(),this.disableContextualWindow()}},{key:"disableContextualWindow",value:function(){window.oncontextmenu=function(S){if(S.target.classList.contains("hg-button"))return S.preventDefault(),S.stopPropagation(),!1}}},{key:"processAutoTouchEvents",value:function(){this.options.autoUseTouchEvents&&(this.options.useTouchEvents=!0,this.options.debug&&console.log("autoUseTouchEvents: Touch device detected, useTouchEvents enabled."))}},{key:"onInit",value:function(){this.options.debug&&console.log("".concat(this.keyboardDOMClass," Initialized")),this.setEventListeners(),typeof this.options.onInit=="function"&&this.options.onInit(this)}},{key:"beforeFirstRender",value:function(){this.utilities.isTouchDevice()&&this.onTouchDeviceDetected(),typeof this.options.beforeFirstRender=="function"&&this.options.beforeFirstRender(this),this.isFirstKeyboardInstance&&this.utilities.pointerEventsSupported()&&!this.options.useTouchEvents&&!this.options.useMouseEvents&&this.options.debug&&console.log("Using PointerEvents as it is supported by this browser"),this.options.useTouchEvents&&this.options.debug&&console.log("useTouchEvents has been enabled. Only touch events will be used.")}},{key:"beforeRender",value:function(){typeof this.options.beforeRender=="function"&&this.options.beforeRender(this)}},{key:"onRender",value:function(){typeof this.options.onRender=="function"&&this.options.onRender(this)}},{key:"onModulesLoaded",value:function(){typeof this.options.onModulesLoaded=="function"&&this.options.onModulesLoaded(this)}},{key:"loadModules",value:function(){var S=this;Array.isArray(this.options.modules)&&(this.options.modules.forEach(function($){var D=new $(S);D.init&&D.init(S)}),this.keyboardPluginClasses="modules-loaded",this.render(),this.onModulesLoaded())}},{key:"getModuleProp",value:function(S,$){return!!this.modules[S]&&this.modules[S][$]}},{key:"getModulesList",value:function(){return Object.keys(this.modules)}},{key:"parseRowDOMContainers",value:function(S,$,D,O){var U=this,X=Array.from(S.children),te=0;return X.length&&D.forEach(function(J,se){var Me=O[se];if(!(Me&&Me>J))return!1;var pe=J-te,Le=Me-te,ze=document.createElement("div");ze.className+="hg-button-container";var xe="".concat(U.options.layoutName,"-r").concat($,"c").concat(se);ze.setAttribute("data-skUID",xe);var it=X.splice(pe,Le-pe+1);te=Le-pe,it.forEach(function(ai){return ze.appendChild(ai)}),X.splice(pe,0,ze),S.innerHTML="",X.forEach(function(ai){return S.appendChild(ai)}),U.options.debug&&console.log("rowDOMContainer",it,pe,Le,te+1)}),S}},{key:"render",value:function(){var S=this;this.resetRows(),this.initialized||this.beforeFirstRender(),this.beforeRender();var $="hg-layout-".concat(this.options.layoutName),D=this.options.layout||{default:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}",".com @ {space}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}",".com @ {space}"]},O=this.options.useTouchEvents||!1,U=O?"hg-touch-events":"",X=this.options.useMouseEvents||!1,te=this.options.disableRowButtonContainers;this.keyboardDOM.className=this.getKeyboardClassString(this.options.theme,$,this.keyboardPluginClasses,U),this.keyboardDOM.setAttribute("data-skInstance",this.currentInstanceName),this.keyboardRowsDOM=document.createElement("div"),this.keyboardRowsDOM.className="hg-rows",D[this.options.layoutName||this.defaultName].forEach(function(J,se){var Me=J.split(" ");S.options.excludeFromLayout&&S.options.excludeFromLayout[S.options.layoutName||S.defaultName]&&(Me=Me.filter(function(xe){return S.options.excludeFromLayout&&!S.options.excludeFromLayout[S.options.layoutName||S.defaultName].includes(xe)}));var pe=document.createElement("div");pe.className+="hg-row";var Le=[],ze=[];Me.forEach(function(xe,it){var ai,Va=!te&&typeof xe=="string"&&xe.length>1&&xe.indexOf("[")===0,ts=!te&&typeof xe=="string"&&xe.length>1&&xe.indexOf("]")===xe.length-1;Va&&(Le.push(it),xe=xe.replace(/\[/g,"")),ts&&(ze.push(it),xe=xe.replace(/\]/g,""));var Eo=S.utilities.getButtonClass(xe),Ao=S.utilities.getButtonDisplayName(xe,S.options.display,S.options.mergeDisplay),CL=S.options.useButtonTag?"button":"div",vn=document.createElement(CL);vn.className+="hg-button ".concat(Eo),(ai=vn.classList).add.apply(ai,T(S.getButtonThemeClasses(xe))),S.setDOMButtonAttributes(xe,function(zt,AL){vn.setAttribute(zt,AL)}),S.activeButtonClass="hg-activeButton",!S.utilities.pointerEventsSupported()||O||X?O?(vn.ontouchstart=function(zt){S.handleButtonClicked(xe,zt),S.handleButtonMouseDown(xe,zt)},vn.ontouchend=function(zt){S.handleButtonMouseUp(xe,zt)},vn.ontouchcancel=function(zt){S.handleButtonMouseUp(xe,zt)}):(vn.onclick=function(zt){S.setMouseHold(!1),typeof S.options.onKeyReleased!="function"&&S.handleButtonClicked(xe,zt)},vn.onmousedown=function(zt){typeof S.options.onKeyReleased!="function"||S.isMouseHold||S.handleButtonClicked(xe,zt),S.handleButtonMouseDown(xe,zt)},vn.onmouseup=function(zt){S.handleButtonMouseUp(xe,zt)}):(vn.onpointerdown=function(zt){S.handleButtonClicked(xe,zt),S.handleButtonMouseDown(xe,zt)},vn.onpointerup=function(zt){S.handleButtonMouseUp(xe,zt)},vn.onpointercancel=function(zt){S.handleButtonMouseUp(xe,zt)}),vn.setAttribute("data-skBtn",xe);var EL="".concat(S.options.layoutName,"-r").concat(se,"b").concat(it);vn.setAttribute("data-skBtnUID",EL);var r_=document.createElement("span");r_.innerHTML=Ao,vn.appendChild(r_),S.buttonElements[xe]||(S.buttonElements[xe]=[]),S.buttonElements[xe].push(vn),pe.appendChild(vn)}),pe=S.parseRowDOMContainers(pe,se,Le,ze),S.keyboardRowsDOM.appendChild(pe)}),this.keyboardDOM.appendChild(this.keyboardRowsDOM),this.onRender(),this.initialized||(this.initialized=!0,!this.utilities.pointerEventsSupported()||O||X?O?(document.ontouchend=function(J){return S.handleButtonMouseUp(void 0,J)},document.ontouchcancel=function(J){return S.handleButtonMouseUp(void 0,J)},this.keyboardDOM.ontouchstart=function(J){return S.handleKeyboardContainerMouseDown(J)}):O||(document.onmouseup=function(J){return S.handleButtonMouseUp(void 0,J)},this.keyboardDOM.onmousedown=function(J){return S.handleKeyboardContainerMouseDown(J)}):(document.onpointerup=function(J){return S.handleButtonMouseUp(void 0,J)},this.keyboardDOM.onpointerdown=function(J){return S.handleKeyboardContainerMouseDown(J)}),this.onInit())}}],z&&W(I.prototype,z),Object.defineProperty(I,"prototype",{writable:!1}),B}(),ee=K,le=ee;return c}()},787:function(a){a.exports=n}},r={};function s(a){var l=r[a];if(l!==void 0)return l.exports;var c=r[a]={exports:{}};return i[a].call(c.exports,c,c.exports,s),c.exports}s.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return s.d(l,{a:l}),l},s.d=function(a,l){for(var c in l)s.o(l,c)&&!s.o(a,c)&&Object.defineProperty(a,c,{enumerable:!0,get:l[c]})},s.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},s.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})};var o={};return function(){s.r(o),s.d(o,{KeyboardReact:function(){return m},default:function(){return w}});var a=s(787);function l(v){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},l(v)}function c(v,y){var x=Object.keys(v);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(v);y&&(k=k.filter(function(_){return Object.getOwnPropertyDescriptor(v,_).enumerable})),x.push.apply(x,k)}return x}function u(v){for(var y=1;y<arguments.length;y++){var x=arguments[y]!=null?arguments[y]:{};y%2?c(Object(x),!0).forEach(function(k){d(v,k,x[k])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(x)):c(Object(x)).forEach(function(k){Object.defineProperty(v,k,Object.getOwnPropertyDescriptor(x,k))})}return v}function d(v,y,x){var k;return k=function(_,P){if(l(_)!="object"||!_)return _;var A=_[Symbol.toPrimitive];if(A!==void 0){var C=A.call(_,P||"default");if(l(C)!="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return(P==="string"?String:Number)(_)}(y,"string"),(y=l(k)=="symbol"?k:String(k))in v?Object.defineProperty(v,y,{value:x,enumerable:!0,configurable:!0,writable:!0}):v[y]=x,v}var f=function(v){return u(u({},v),{},{keyboardRef:null})},h=s(689),p=s.n(h),m=function(v){var y=v.baseClass||"react-simple-keyboard",x=a.useRef(null),k=a.useRef(null),_=a.useRef(null),P=a.useRef(v);return a.useEffect(function(){return function(){_.current&&_.current.destroy(),x.current=!1}},[]),a.useEffect(function(){var A=function(L){return u(u({},L),{},{theme:"simple-keyboard ".concat(L.theme||"hg-theme-default")})}(v);if(!x.current){x.current=!0,A.debug&&console.log("ReactSimpleKeyboard: Init");var C=k.current,N=".".concat(y);_.current=new(p())(C||N,A),A.keyboardRef&&A.keyboardRef(_.current)}var R=function(L,H){var T=f(H),V=f(L);return Object.keys(T).filter(function(Y){return T[Y]!==V[Y]})}(P.current,A);if(R.length){var M=_.current;P.current=A,M==null||M.setOptions(A),A.debug&&console.log("ReactSimpleKeyboard - setOptions called due to updated props:",R)}},[x,y,P,v]),a.createElement("div",{className:y,ref:k})},w=m}(),o}()})})(o3);var LZ=o3.exports;const BZ=Eu(LZ),jZ={en:["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","{lock} a s d f g h j k l ; ' {enter}","{shiftleft} z x c v b n m , . / {shiftright}","{space}"],"en-shift":["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'{lock} A S D F G H J K L : " {enter}',"{shiftleft} Z X C V B N M < > ? {shiftright}","{space}"],es:["| 1 2 3 4 5 6 7 8 9 0 '  {bksp}","{tab} q w e r t y u i o p  +","{lock} a s d f g h j k l  { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-shift":[' ! " # $ % & / ( ) = ?  {bksp}',"{tab} Q W E R T Y U I O P  *","{lock} A S D F G H J K L  [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"],"es-accent":["| 1 2 3 4 5 6 7 8 9 0 '  {bksp}","{tab} q w  r t y    p  +","{lock}  s d f g h j k l  { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-accent-shift":[' ! " # $ % & / ( ) = ?  {bksp}',"{tab} Q W  R T Y    P  *","{lock}  S D F G H J K L  [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"],"es-diaeresis-default":["| 1 2 3 4 5 6 7 8 9 0 '  {bksp}","{tab} q w e r t y  i o p  +","{lock} a s d f g h j k l  { } {enter}","{shiftleft} < z x c v b n m , . - {shiftright}","{space}"],"es-diaeresis-shift":[' ! " # $ % & / ( ) = ?  {bksp}',"{tab} Q W E R T Y  I O P  *","{lock} A S D F G H J K L  [ ] {enter}","{shiftleft} > Z X C V B N M ; : _ {shiftright}","{space}"]},FZ={en:{"{bksp}":"Backspace ","{enter}":"Enter ","{shiftleft}":"Shift ","{shiftright}":"Shift ","{tab}":"Tab ","{lock}":"Caps Lock ","{space}":"Space"},es:{"{bksp}":"","{enter}":"Intro ","{shiftleft}":"Shift ","{shiftright}":"Shift ","{tab}":"Tab ","{lock}":"Bloq Mays ","{space}":"Espacio"}},PA="          ",$A="  ";function zZ(){const t=DS(),e=St(),{status:n,dispatch:i,devices:r}=gn(),[s,o]=g.useState("none"),[a,l]=g.useState(!1),[c,u]=g.useState(!1),d=g.useMemo(()=>[t,t==="es"&&(a&&"accent"||c&&"diaeresis"),s!=="none"&&"shift"].filter(Boolean).join("-"),[t,s,a,c]),f=g.useCallback(h=>{r.keyboard&&n.type==="running"&&n.waitingForInput&&i("keyboard.sendChar",h)},[n,i,r.keyboard]);return r.keyboard?b.jsxs("div",{className:"absolute left-[1200px] top-[300px] z-10 h-min w-[500px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[b.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-xl text-white",children:e("computer.keyboard")}),b.jsx(BZ,{theme:He("hg-theme-vonsim",`hg-shift-${s}`,a&&"hg-accentDeadKey",c&&"hg-diaeresisDeadKey"),layoutName:d,layout:jZ,display:FZ[t],buttonTheme:[{class:"hg-accentDeadKeyButton",buttons:PA},{class:"hg-diaeresisDeadKeyButton",buttons:$A}],disableButtonHold:!0,onKeyPress:h=>{if(h==="{shiftleft}"||h==="{shiftright}"){o(p=>p==="none"?"once":"none");return}if(h==="{lock}"){o(p=>p==="none"?"lock":"none");return}if(t==="es"){if(a){PA.includes(h)&&(l(!1),s==="once"&&o("none"),f(h));return}else if(h===""){l(!0);return}if(c){$A.includes(h)&&(u(!1),s==="once"&&o("none"),f(h));return}else if(h===""){u(!0);return}}s==="once"&&o("none"),f(h==="{bksp}"?"\b":h==="{enter}"?`
`:h==="{tab}"?"	":h==="{space}"?" ":h)}})]}):null}function UZ(){const t=St(),{devices:e}=gn(),n=Vt(dk).toArray();return e.leds?b.jsxs("div",{className:"absolute left-[1300px] top-[828px] z-10 h-min w-min rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[b.jsx("span",{className:"block h-min w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.leds")}),b.jsx("div",{className:"flex flex-row-reverse gap-2 p-4",children:n.map((i,r)=>b.jsx("div",{className:He("relative h-7 w-7 rounded-full transition",i?"bg-mantis-400":"bg-stone-700 shadow-inner shadow-stone-900"),children:b.jsx("div",{className:He("absolute inset-0 rounded-full bg-mantis-400 blur-sm transition",i?"opacity-100":"opacity-0")})},r))})]}):null}const a3=g.forwardRef(({className:t,type:e,...n},i)=>b.jsx("input",{type:e,className:He("flex h-10 w-full rounded-md border border-stone-600 bg-stone-900 px-3 py-2 text-sm ring-offset-stone-900 file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-stone-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-stone-600 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:i,...n}));a3.displayName="Input";const VZ=g.forwardRef((t,e)=>g.createElement(Ge.label,bt({},t,{ref:e,onMouseDown:n=>{var i;(i=t.onMouseDown)===null||i===void 0||i.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault()}}))),l3=VZ,c3=g.forwardRef(({className:t,...e},n)=>b.jsx(l3,{ref:n,className:He("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",t),...e}));c3.displayName=l3.displayName;function HZ(){const t=St(),e=Vt(WX),n=Math.ceil(e.length/2),i=Vt(yu),[r,s]=Tu(JD),o=g.useId(),[a,l]=g.useState(""),c=g.useCallback(()=>{const f=/^([\da-f]+)h?$/i.exec(a);if(!f||!f[1]){gi({title:t("computer.memory.address-must-be-integer"),variant:"error"});return}let h=parseInt(f[1],16);if(h===we.MAX_ADDRESS+1)h-=1;else if(!we.inRange(h)){gi({title:t("computer.memory.address-out-of-range"),variant:"error"});return}s(we.from(h))},[t,a,s]),u=g.useCallback(()=>{try{let h=(r??i).value+e.length;h===we.MAX_ADDRESS+1&&(h-=1);const p=we.from(h);l(p.toString()),s(p)}catch{console.error("Invalid PageUp")}},[i,r,s,e.length]);io("PageUp",f=>{f.preventDefault(),u()},void 0,[u]);const d=g.useCallback(()=>{try{const f=r??i,h=we.from(f.value-e.length);l(h.toString()),s(h)}catch{console.error("Invalid PageUp")}},[i,r,s,e.length]);return io("PageDown",f=>{f.preventDefault(),d()},void 0,[u]),b.jsxs("div",{className:"absolute left-[800px] top-0 z-10 h-[460px] w-[250px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[b.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-3xl text-white",children:t("computer.memory.name")}),b.jsxs("div",{className:"mx-4 my-2",children:[b.jsx(c3,{htmlFor:o,children:t("computer.memory.fix-address")}),b.jsxs("div",{className:"mt-1 flex items-center gap-1",children:[b.jsx("button",{className:"inline-flex h-9 items-center justify-center whitespace-nowrap rounded-md bg-mantis-500 px-2 text-sm text-white ring-offset-stone-900 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-mantis-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",disabled:e.at(0).address.value===we.MIN_ADDRESS,title:t("computer.memory.address-decrement"),onClick:d,children:b.jsx("span",{className:"icon-[lucide--chevron-left] h-4 w-4"})}),b.jsxs("div",{className:"relative",children:[b.jsx(a3,{className:"font-mono",placeholder:"20h",type:"text",enterKeyHint:"go",id:o,value:a,onChange:f=>l(f.currentTarget.value),onKeyDown:f=>{f.key==="Enter"&&c()}}),b.jsx("button",{title:t("computer.memory.unfix-address"),className:He("absolute right-2 top-3",!r&&"hidden"),onClick:()=>{l(""),s(null)},children:b.jsx("span",{className:"icon-[lucide--x] h-4 w-4 text-stone-500 transition-colors hover:text-stone-300"})})]}),b.jsx("button",{className:"inline-flex h-9 items-center justify-center whitespace-nowrap rounded-md bg-mantis-500 px-2 text-sm text-white ring-offset-stone-900 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-mantis-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",disabled:e.at(-1).address.value===we.MAX_ADDRESS,title:t("computer.memory.address-decrement"),onClick:u,children:b.jsx("span",{className:"icon-[lucide--chevron-right] h-4 w-4"})})]})]}),b.jsxs("div",{className:"m-4 flex w-min items-start overflow-hidden rounded-lg border border-stone-600",children:[b.jsx("table",{className:"border-r border-stone-600 font-mono text-lg",children:b.jsx("tbody",{children:e.slice(0,n).map((f,h)=>g.createElement(TA,{...f,key:h}))})}),b.jsx("table",{className:"font-mono text-lg",children:b.jsx("tbody",{children:e.slice(n).map((f,h)=>g.createElement(TA,{...f,key:h}))})})]})]})}function TA({address:t,value:e}){const n=St(),i=Vt(yu),r=n("computer.memory.cell",t);return b.jsxs(r3,{children:[b.jsx(s3,{asChild:!0,children:b.jsxs(Kt.tr,{title:r,className:"cursor-pointer border-b border-stone-600 odd:bg-stone-900 even:bg-stone-800 last-of-type:border-b-0",style:t.value===i.value?ft("memory.operating-cell"):void 0,children:[b.jsx("td",{className:"border-r border-stone-600 px-2 py-1 font-thin",children:t.toString()}),b.jsx("td",{className:"border-r border-stone-600 px-2 py-1 last-of-type:border-r-0",children:e.toString("hex")})]})}),b.jsxs(Dk,{className:"w-60",children:[b.jsx("p",{className:"px-4 py-2 font-medium text-white",children:r}),b.jsx("hr",{className:"border-stone-600"}),b.jsx("ul",{className:"px-4 py-2 text-sm",children:["hex","bin","uint","int","safe-ascii"].map(s=>b.jsxs("li",{children:[b.jsx("b",{className:"font-medium",children:n(`generics.byte-representation.${s}`)}),":"," ",b.jsx("span",{className:"font-mono text-mantis-400",children:e.toString(s)})]},s))})]})]})}function WZ(){const t=St(),{devices:e}=gn();return e.pic?b.jsxs("div",{className:"absolute left-0 top-[700px] z-10 flex h-[200px] w-[450px] flex-col rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[b.jsxs("div",{className:"flex items-start",children:[b.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.pic")}),b.jsxs("div",{className:"flex h-16 grow items-center justify-evenly",children:[b.jsx(Ui,{name:"IMR",title:t("generics.io-register","IMR",33),valueAtom:hk,springs:"pic.IMR",emphasis:!0}),b.jsx(Ui,{name:"IRR",title:t("generics.io-register","IRR",34),valueAtom:pk,springs:"pic.IRR",emphasis:!0}),b.jsx(Ui,{name:"ISR",title:t("generics.io-register","ISR",35),valueAtom:mk,springs:"pic.ISR",emphasis:!0})]})]}),b.jsx("hr",{className:"mb-2 border-stone-600"}),b.jsx("div",{className:"grid h-full w-full grid-cols-4 items-center",children:jg.map((n,i)=>b.jsx(Ui,{name:`INT${i}`,title:t("generics.io-register",`INT${i}`,36+i),valueAtom:n,springs:`pic.INT${i}`,className:"mx-auto"},i))})]}):null}function GZ(){const t=St(),{devices:e}=gn();return e.pio?b.jsxs("div",{className:"absolute left-[900px] top-[700px] z-10 h-min w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[b.jsx("span",{className:"mb-2 block h-min w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.pio.name")}),b.jsx("hr",{className:"border-stone-600"}),b.jsxs("div",{className:"flex w-full items-center justify-evenly py-4",children:[b.jsx(Ui,{name:"PA",title:t("generics.io-register","PA",48),valueAtom:gk,springs:"pio.PA"}),b.jsx(Ui,{name:"CA",title:t("generics.io-register","CA",50),valueAtom:yk,springs:"pio.CA"})]}),b.jsx("hr",{className:"border-stone-600"}),b.jsxs("div",{className:"flex w-full items-center justify-evenly py-4",children:[b.jsx(Ui,{name:"PB",title:t("generics.io-register","PB",49),valueAtom:vk,springs:"pio.PB"}),b.jsx(Ui,{name:"CB",title:t("generics.io-register","CB",51),valueAtom:wk,springs:"pio.CB"})]})]}):null}const KZ="_printer_fbkny_2",XZ="_shadow_fbkny_6",qZ="_sides_fbkny_11",YZ="_front_fbkny_22",JZ="_trailContainer_fbkny_27",ZZ="_trail_fbkny_27",QZ="_paper_fbkny_33",Ka={printer:KZ,shadow:XZ,sides:qZ,front:YZ,trailContainer:JZ,trail:ZZ,paper:QZ},eQ=Array.from({length:5},(t,e)=>e);function tQ(){const t=St(),{devices:e}=gn(),n=Vt(Fg),i=Vt(zg);return e.printer?b.jsx("div",{className:"absolute left-[1250px] top-[750px] z-10 flex h-min w-80 flex-col rounded-lg border border-stone-600 bg-stone-900 pl-16 [&_*]:z-20",children:b.jsxs("div",{className:Ka.printer,title:t("computer.printer.name"),children:[b.jsx("div",{className:Ka.shadow}),b.jsx("div",{className:Ka.sides}),b.jsxs("div",{className:Ka.front,children:[b.jsx("div",{className:Ka.trailContainer,children:b.jsx("div",{className:Ka.trail,children:b.jsx("pre",{className:Ka.paper,children:i})})}),b.jsx("div",{className:"grid grid-cols-5 items-center justify-center",children:eQ.map(r=>{const s=n[r]?OM(n[r].unsigned):null;return b.jsx("span",{className:He("flex h-6 w-full items-center justify-center border-r border-zinc-300 text-center font-mono text-base font-medium leading-none text-white first-of-type:rounded-l-xl last-of-type:rounded-r-xl last-of-type:border-r-0",s===null?"bg-zinc-400":"bg-mantis-500"),children:s},r)})}),b.jsx("div",{className:"mx-auto mt-4 h-1 w-[70%] overflow-hidden rounded-full bg-zinc-600",children:b.jsx(Kt.div,{className:"h-full bg-mantis-400",style:{width:ft("printer.printing.progress").to(r=>`${r*100}%`),opacity:ft("printer.printing.opacity")}})})]})]})}):null}const nQ="_container_6nvz7_2",iQ="_text_6nvz7_22",OA={container:nQ,text:iQ};function rQ(){const t=St(),{devices:e}=gn(),n=Vt(bk);return e.screen?b.jsxs("div",{className:"absolute left-[1200px] top-0 z-10 h-min w-[500px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[b.jsx("span",{className:"block w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-xl text-white",children:t("computer.screen")}),b.jsx("div",{className:OA.container,children:b.jsx("pre",{className:OA.text,children:n})})]}):null}function sQ(){const t=St(),{status:e,dispatch:n,devices:i}=gn(),r=Vt(xk).toArray();return i.switches?b.jsxs("div",{className:"absolute left-[1300px] top-[698px] z-10 h-min w-min rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[b.jsx("span",{className:"block h-min w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.switches")}),b.jsx("div",{className:"flex flex-row-reverse gap-3 p-4",children:r.map((s,o)=>b.jsx("div",{className:"w-6",children:b.jsx(Vg,{checked:s,onCheckedChange:()=>n("switch.toggle",o),className:"-translate-x-3 -rotate-90 data-[state=unchecked]:!bg-stone-800",disabled:e.type!=="running"})},o))})]}):null}function oQ(){const t=St(),{devices:e}=gn();return e.timer?b.jsxs("div",{className:"absolute left-[500px] top-[875px] z-10 flex h-[120px] w-[220px] rounded-lg border border-stone-600 bg-stone-900 [&_*]:z-20",children:[b.jsx("span",{className:"block h-min w-min rounded-br-lg rounded-tl-lg border-b border-r border-stone-600 bg-mantis-500 px-2 py-1 text-2xl text-white",children:t("computer.timer")}),b.jsxs("div",{className:"flex h-full w-full flex-col items-center justify-evenly",children:[b.jsx(Ui,{name:"CONT",title:t("generics.io-register","CONT",16),valueAtom:Sk,springs:"timer.CONT"}),b.jsx(Ui,{name:"COMP",title:t("generics.io-register","COMP",17),valueAtom:kk,springs:"timer.COMP"})]})]}):null}function u3(){const t=g.useRef(null);return b.jsx("div",{className:"relative h-full w-full",children:b.jsxs(rZ,{minScale:.3,initialScale:.75,ref:t,doubleClick:{disabled:!0},panning:{excluded:["input"]},children:[b.jsx(aZ,{wrapperClass:"!w-full !h-full",contentClass:"!p-[200px]",children:b.jsxs("div",{className:"relative h-[1300px] w-[1900px]",children:[b.jsx(hZ,{}),b.jsx(TZ,{}),b.jsx(HZ,{}),b.jsx(IZ,{}),b.jsx(WZ,{}),b.jsx(GZ,{}),b.jsx(oQ,{}),b.jsx(pZ,{}),b.jsx(DZ,{}),b.jsx(zZ,{}),b.jsx(UZ,{}),b.jsx(tQ,{}),b.jsx(sQ,{}),b.jsx(rQ,{})]})}),b.jsx(lZ,{wrapperRef:t})]})})}const aQ=1024;let lQ=0;class Xy{constructor(e,n){this.from=e,this.to=n}}class nt{constructor(e={}){this.id=lQ++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Ei.match(e)),n=>{let i=e(n);return i===void 0?null:[this,i]}}}nt.closedBy=new nt({deserialize:t=>t.split(" ")});nt.openedBy=new nt({deserialize:t=>t.split(" ")});nt.group=new nt({deserialize:t=>t.split(" ")});nt.isolate=new nt({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});nt.contextHash=new nt({perNode:!0});nt.lookAhead=new nt({perNode:!0});nt.mounted=new nt({perNode:!0});class Wg{constructor(e,n,i){this.tree=e,this.overlay=n,this.parser=i}static get(e){return e&&e.props&&e.props[nt.mounted.id]}}const cQ=Object.create(null);class Ei{constructor(e,n,i,r=0){this.name=e,this.props=n,this.id=i,this.flags=r}static define(e){let n=e.props&&e.props.length?Object.create(null):cQ,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new Ei(e.name||"",n,e.id,i);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(r)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(nt.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let i in e)for(let r of i.split(" "))n[r]=e[i];return i=>{for(let r=i.prop(nt.group),s=-1;s<(r?r.length:0);s++){let o=n[s<0?i.name:r[s]];if(o)return o}}}}Ei.none=new Ei("",Object.create(null),0,8);class Ik{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let i of this.types){let r=null;for(let s of e){let o=s(i);o&&(r||(r=Object.assign({},i.props)),r[o[0].id]=o[1])}n.push(r?new Ei(i.name,r,i.id,i.flags):i)}return new Ik(n)}}const Op=new WeakMap,NA=new WeakMap;var An;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(An||(An={}));class Bt{constructor(e,n,i,r,s){if(this.type=e,this.children=n,this.positions=i,this.length=r,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=Wg.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let i of this.children){let r=i.toString();r&&(n&&(n+=","),n+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new N1(this.topNode,e)}cursorAt(e,n=0,i=0){let r=Op.get(this)||this.topNode,s=new N1(r);return s.moveTo(e,n),Op.set(this,s._tree),s}get topNode(){return new br(this,0,0,null)}resolve(e,n=0){let i=Qf(Op.get(this)||this.topNode,e,n,!1);return Op.set(this,i),i}resolveInner(e,n=0){let i=Qf(NA.get(this)||this.topNode,e,n,!0);return NA.set(this,i),i}resolveStack(e,n=0){return fQ(this,e,n)}iterate(e){let{enter:n,leave:i,from:r=0,to:s=this.length}=e,o=e.mode||0,a=(o&An.IncludeAnonymous)>0;for(let l=this.cursor(o|An.IncludeAnonymous);;){let c=!1;if(l.from<=s&&l.to>=r&&(!a&&l.type.isAnonymous||n(l)!==!1)){if(l.firstChild())continue;c=!0}for(;c&&i&&(a||!l.type.isAnonymous)&&i(l),!l.nextSibling();){if(!l.parent())return;c=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:jk(Ei.none,this.children,this.positions,0,this.children.length,0,this.length,(n,i,r)=>new Bt(this.type,n,i,r,this.propValues),e.makeTree||((n,i,r)=>new Bt(Ei.none,n,i,r)))}static build(e){return hQ(e)}}Bt.empty=new Bt(Ei.none,[],[],0);class Lk{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Lk(this.buffer,this.index)}}class Na{constructor(e,n,i){this.buffer=e,this.length=n,this.set=i}get type(){return Ei.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],i=this.buffer[e+3],r=this.set.types[n],s=r.name;if(/\W/.test(s)&&!r.isError&&(s=JSON.stringify(s)),e+=4,i==e)return s;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,n,i,r,s){let{buffer:o}=this,a=-1;for(let l=e;l!=n&&!(d3(s,r,o[l+1],o[l+2])&&(a=l,i>0));l=o[l+3]);return a}slice(e,n,i){let r=this.buffer,s=new Uint16Array(n-e),o=0;for(let a=e,l=0;a<n;){s[l++]=r[a++],s[l++]=r[a++]-i;let c=s[l++]=r[a++]-i;s[l++]=r[a++]-e,o=Math.max(o,c)}return new Na(s,o,this.set)}}function d3(t,e,n,i){switch(t){case-2:return n<e;case-1:return i>=e&&n<e;case 0:return n<e&&i>e;case 1:return n<=e&&i>e;case 2:return i>e;case 4:return!0}}function Qf(t,e,n,i){for(var r;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let o=!i&&t instanceof br&&t.index<0?null:t.parent;if(!o)return t;t=o}let s=i?0:An.IgnoreOverlays;if(i)for(let o=t,a=o.parent;a;o=a,a=o.parent)o instanceof br&&o.index<0&&((r=a.enter(e,n,s))===null||r===void 0?void 0:r.from)!=o.from&&(t=a);for(;;){let o=t.enter(e,n,s);if(!o)return t;t=o}}class f3{cursor(e=0){return new N1(this,e)}getChild(e,n=null,i=null){let r=RA(this,e,n,i);return r.length?r[0]:null}getChildren(e,n=null,i=null){return RA(this,e,n,i)}resolve(e,n=0){return Qf(this,e,n,!1)}resolveInner(e,n=0){return Qf(this,e,n,!0)}matchContext(e){return O1(this,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),i=this;for(;n;){let r=n.lastChild;if(!r||r.to!=n.to)break;r.type.isError&&r.from==r.to?(i=n,n=r.prevSibling):n=r}return i}get node(){return this}get next(){return this.parent}}class br extends f3{constructor(e,n,i,r){super(),this._tree=e,this.from=n,this.index=i,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,i,r,s=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,c=n>0?a.length:-1;e!=c;e+=n){let u=a[e],d=l[e]+o.from;if(d3(r,i,d,d+u.length)){if(u instanceof Na){if(s&An.ExcludeBuffers)continue;let f=u.findChild(0,u.buffer.length,n,i-d,r);if(f>-1)return new sa(new uQ(o,u,e,d),null,f)}else if(s&An.IncludeAnonymous||!u.type.isAnonymous||Bk(u)){let f;if(!(s&An.IgnoreMounts)&&(f=Wg.get(u))&&!f.overlay)return new br(f.tree,d,e,o);let h=new br(u,d,e,o);return s&An.IncludeAnonymous||!h.type.isAnonymous?h:h.nextChild(n<0?u.children.length-1:0,n,i,r)}}}if(s&An.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+n:e=n<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,i=0){let r;if(!(i&An.IgnoreOverlays)&&(r=Wg.get(this._tree))&&r.overlay){let s=e-this.from;for(let{from:o,to:a}of r.overlay)if((n>0?o<=s:o<s)&&(n<0?a>=s:a>s))return new br(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function RA(t,e,n,i){let r=t.cursor(),s=[];if(!r.firstChild())return s;if(n!=null){for(;!r.type.is(n);)if(!r.nextSibling())return s}for(;;){if(i!=null&&r.type.is(i))return s;if(r.type.is(e)&&s.push(r.node),!r.nextSibling())return i==null?s:[]}}function O1(t,e,n=e.length-1){for(let i=t.parent;n>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[n]&&e[n]!=i.name)return!1;n--}}return!0}class uQ{constructor(e,n,i,r){this.parent=e,this.buffer=n,this.index=i,this.start=r}}class sa extends f3{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,i){super(),this.context=e,this._parent=n,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,n,i){let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.context.start,i);return s<0?null:new sa(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,i=0){if(i&An.ExcludeBuffers)return null;let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new sa(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new sa(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new sa(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:i}=this.context,r=this.index+4,s=i.buffer[this.index+3];if(s>r){let o=i.buffer[this.index+1];e.push(i.slice(r,s,o)),n.push(0)}return new Bt(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function h3(t){if(!t.length)return null;let e=0,n=t[0];for(let s=1;s<t.length;s++){let o=t[s];(o.from>n.from||o.to<n.to)&&(n=o,e=s)}let i=n instanceof br&&n.index<0?null:n.parent,r=t.slice();return i?r[e]=i:r.splice(e,1),new dQ(r,n)}class dQ{constructor(e,n){this.heads=e,this.node=n}get next(){return h3(this.heads)}}function fQ(t,e,n){let i=t.resolveInner(e,n),r=null;for(let s=i instanceof br?i:i.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(r||(r=[i])).push(o.resolve(e,n)),s=o}else{let o=Wg.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let a=new br(o.tree,o.overlay[0].from+s.from,-1,s);(r||(r=[i])).push(Qf(a,e,n,!1))}}return r?h3(r):i}class N1{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof br)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:i,buffer:r}=this.buffer;return this.type=n||r.set.types[r.buffer[e]],this.from=i+r.buffer[e+1],this.to=i+r.buffer[e+2],!0}yield(e){return e?e instanceof br?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,i,this.mode));let{buffer:r}=this.buffer,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,i=this.mode){return this.buffer?i&An.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&An.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&An.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,i=this.stack.length-1;if(e<0){let r=i<0?0:this.stack[i]+4;if(this.index!=r)return this.yieldBuf(n.findChild(r,this.index,-1,0,4))}else{let r=n.buffer[this.index+3];if(r<(i<0?n.buffer.length:n.buffer[this.stack[i]+3]))return this.yieldBuf(r)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,i,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(r.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:i}=r)}else({index:n,_parent:i}=this._tree);for(;i;{index:n,_parent:i}=i)if(n>-1)for(let s=n+e,o=e<0?-1:i._tree.children.length;s!=o;s+=e){let a=i._tree.children[s];if(this.mode&An.IncludeAnonymous||a instanceof Na||!a.type.isAnonymous||Bk(a))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,i=0;if(e&&e.context==this.buffer)e:for(let r=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;n=o,i=s+1;break e}r=this.stack[--s]}for(let r=i;r<this.stack.length;r++)n=new sa(this.buffer,n,this.stack[r]);return this.bufferNode=new sa(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let i=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(r=!0)}for(;r&&n&&n(this),r=this.type.isAnonymous,!this.nextSibling();){if(!i)return;this.parent(),i--,r=!0}}}matchContext(e){if(!this.buffer)return O1(this.node,e);let{buffer:n}=this.buffer,{types:i}=n.set;for(let r=e.length-1,s=this.stack.length-1;r>=0;s--){if(s<0)return O1(this.node,e,r);let o=i[n.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}}function Bk(t){return t.children.some(e=>e instanceof Na||!e.type.isAnonymous||Bk(e))}function hQ(t){var e;let{buffer:n,nodeSet:i,maxBufferLength:r=aQ,reused:s=[],minRepeatType:o=i.types.length}=t,a=Array.isArray(n)?new Lk(n,n.length):n,l=i.types,c=0,u=0;function d(_,P,A,C,N,R){let{id:M,start:L,end:H,size:T}=a,V=u;for(;T<0;)if(a.next(),T==-1){let Q=s[M];A.push(Q),C.push(L-_);return}else if(T==-3){c=M;return}else if(T==-4){u=M;return}else throw new RangeError(`Unrecognized record size: ${T}`);let Y=l[M],ne,W,j=L-_;if(H-L<=r&&(W=w(a.pos-P,N))){let Q=new Uint16Array(W.size-W.skip),K=a.pos-W.size,ee=Q.length;for(;a.pos>K;)ee=v(W.start,Q,ee);ne=new Na(Q,H-W.start,i),j=W.start-_}else{let Q=a.pos-T;a.next();let K=[],ee=[],le=M>=o?M:-1,B=0,I=H;for(;a.pos>Q;)le>=0&&a.id==le&&a.size>=0?(a.end<=I-r&&(p(K,ee,L,B,a.end,I,le,V),B=K.length,I=a.end),a.next()):R>2500?f(L,Q,K,ee):d(L,Q,K,ee,le,R+1);if(le>=0&&B>0&&B<K.length&&p(K,ee,L,B,L,I,le,V),K.reverse(),ee.reverse(),le>-1&&B>0){let z=h(Y);ne=jk(Y,K,ee,0,K.length,0,H-L,z,z)}else ne=m(Y,K,ee,H-L,V-H)}A.push(ne),C.push(j)}function f(_,P,A,C){let N=[],R=0,M=-1;for(;a.pos>P;){let{id:L,start:H,end:T,size:V}=a;if(V>4)a.next();else{if(M>-1&&H<M)break;M<0&&(M=T-r),N.push(L,H,T),R++,a.next()}}if(R){let L=new Uint16Array(R*4),H=N[N.length-2];for(let T=N.length-3,V=0;T>=0;T-=3)L[V++]=N[T],L[V++]=N[T+1]-H,L[V++]=N[T+2]-H,L[V++]=V;A.push(new Na(L,N[2]-H,i)),C.push(H-_)}}function h(_){return(P,A,C)=>{let N=0,R=P.length-1,M,L;if(R>=0&&(M=P[R])instanceof Bt){if(!R&&M.type==_&&M.length==C)return M;(L=M.prop(nt.lookAhead))&&(N=A[R]+M.length+L)}return m(_,P,A,C,N)}}function p(_,P,A,C,N,R,M,L){let H=[],T=[];for(;_.length>C;)H.push(_.pop()),T.push(P.pop()+A-N);_.push(m(i.types[M],H,T,R-N,L-R)),P.push(N-A)}function m(_,P,A,C,N=0,R){if(c){let M=[nt.contextHash,c];R=R?[M].concat(R):[M]}if(N>25){let M=[nt.lookAhead,N];R=R?[M].concat(R):[M]}return new Bt(_,P,A,C,R)}function w(_,P){let A=a.fork(),C=0,N=0,R=0,M=A.end-r,L={size:0,start:0,skip:0};e:for(let H=A.pos-_;A.pos>H;){let T=A.size;if(A.id==P&&T>=0){L.size=C,L.start=N,L.skip=R,R+=4,C+=4,A.next();continue}let V=A.pos-T;if(T<0||V<H||A.start<M)break;let Y=A.id>=o?4:0,ne=A.start;for(A.next();A.pos>V;){if(A.size<0)if(A.size==-3)Y+=4;else break e;else A.id>=o&&(Y+=4);A.next()}N=ne,C+=T,R+=Y}return(P<0||C==_)&&(L.size=C,L.start=N,L.skip=R),L.size>4?L:void 0}function v(_,P,A){let{id:C,start:N,end:R,size:M}=a;if(a.next(),M>=0&&C<o){let L=A;if(M>4){let H=a.pos-(M-4);for(;a.pos>H;)A=v(_,P,A)}P[--A]=L,P[--A]=R-_,P[--A]=N-_,P[--A]=C}else M==-3?c=C:M==-4&&(u=C);return A}let y=[],x=[];for(;a.pos>0;)d(t.start||0,t.bufferStart||0,y,x,-1,0);let k=(e=t.length)!==null&&e!==void 0?e:y.length?x[0]+y[0].length:0;return new Bt(l[t.topID],y.reverse(),x.reverse(),k)}const MA=new WeakMap;function Am(t,e){if(!t.isAnonymous||e instanceof Na||e.type!=t)return 1;let n=MA.get(e);if(n==null){n=1;for(let i of e.children){if(i.type!=t||!(i instanceof Bt)){n=1;break}n+=Am(t,i)}MA.set(e,n)}return n}function jk(t,e,n,i,r,s,o,a,l){let c=0;for(let p=i;p<r;p++)c+=Am(t,e[p]);let u=Math.ceil(c*1.5/8),d=[],f=[];function h(p,m,w,v,y){for(let x=w;x<v;){let k=x,_=m[x],P=Am(t,p[x]);for(x++;x<v;x++){let A=Am(t,p[x]);if(P+A>=u)break;P+=A}if(x==k+1){if(P>u){let A=p[k];h(A.children,A.positions,0,A.children.length,m[k]+y);continue}d.push(p[k])}else{let A=m[x-1]+p[x-1].length-_;d.push(jk(t,p,m,k,x,_,A,null,l))}f.push(_+y-s)}}return h(e,n,i,r,0),(a||l)(d,f,o)}class wl{constructor(e,n,i,r,s=!1,o=!1){this.from=e,this.to=n,this.tree=i,this.offset=r,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],i=!1){let r=[new wl(0,e.length,e,0,!1,i)];for(let s of n)s.to>e.length&&r.push(s);return r}static applyChanges(e,n,i=128){if(!n.length)return e;let r=[],s=1,o=e.length?e[0]:null;for(let a=0,l=0,c=0;;a++){let u=a<n.length?n[a]:null,d=u?u.fromA:1e9;if(d-l>=i)for(;o&&o.from<d;){let f=o;if(l>=f.from||d<=f.to||c){let h=Math.max(f.from,l)-c,p=Math.min(f.to,d)-c;f=h>=p?null:new wl(h,p,f.tree,f.offset+c,a>0,!!u)}if(f&&r.push(f),o.to>d)break;o=s<e.length?e[s++]:null}if(!u)break;l=u.toA,c=u.toA-u.toB}return r}}class p3{startParse(e,n,i){return typeof e=="string"&&(e=new pQ(e)),i=i?i.length?i.map(r=>new Xy(r.from,r.to)):[new Xy(0,0)]:[new Xy(0,e.length)],this.createParse(e,n||[],i)}parse(e,n,i){let r=this.startParse(e,n,i);for(;;){let s=r.advance();if(s)return s}}}class pQ{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new nt({perNode:!0});let mQ=0;class _n{constructor(e,n,i){this.set=e,this.base=n,this.modified=i,this.id=mQ++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let n=new _n([],null,[]);if(n.set.push(n),e)for(let i of e.set)n.set.push(i);return n}static defineModifier(){let e=new Gg;return n=>n.modified.indexOf(e)>-1?n:Gg.get(n.base||n,n.modified.concat(e).sort((i,r)=>i.id-r.id))}}let gQ=0;class Gg{constructor(){this.instances=[],this.id=gQ++}static get(e,n){if(!n.length)return e;let i=n[0].instances.find(a=>a.base==e&&vQ(n,a.modified));if(i)return i;let r=[],s=new _n(r,e,n);for(let a of n)a.instances.push(s);let o=yQ(n);for(let a of e.set)if(!a.modified.length)for(let l of o)r.push(Gg.get(a,l));return s}}function vQ(t,e){return t.length==e.length&&t.every((n,i)=>n==e[i])}function yQ(t){let e=[[]];for(let n=0;n<t.length;n++)for(let i=0,r=e.length;i<r;i++)e.push(e[i].concat(t[n]));return e.sort((n,i)=>i.length-n.length)}function wQ(t){let e=Object.create(null);for(let n in t){let i=t[n];Array.isArray(i)||(i=[i]);for(let r of n.split(" "))if(r){let s=[],o=2,a=r;for(let d=0;;){if(a=="..."&&d>0&&d+3==r.length){o=1;break}let f=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!f)throw new RangeError("Invalid path: "+r);if(s.push(f[0]=="*"?"":f[0][0]=='"'?JSON.parse(f[0]):f[0]),d+=f[0].length,d==r.length)break;let h=r[d++];if(d==r.length&&h=="!"){o=0;break}if(h!="/")throw new RangeError("Invalid path: "+r);a=r.slice(d)}let l=s.length-1,c=s[l];if(!c)throw new RangeError("Invalid path: "+r);let u=new Kg(i,o,l>0?s.slice(0,l):null);e[c]=u.sort(e[c])}}return m3.add(e)}const m3=new nt;class Kg{constructor(e,n,i,r){this.tags=e,this.mode=n,this.context=i,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Kg.empty=new Kg([],2,null);function g3(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let o of s.tag)n[o.id]=s.class;let{scope:i,all:r=null}=e||{};return{style:s=>{let o=r;for(let a of s)for(let l of a.set){let c=n[l.id];if(c){o=o?o+" "+c:c;break}}return o},scope:i}}function bQ(t,e){let n=null;for(let i of t){let r=i.style(e);r&&(n=n?n+" "+r:r)}return n}function xQ(t,e,n,i=0,r=t.length){let s=new SQ(i,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),i,r,"",s.highlighters),s.flush(r)}class SQ{constructor(e,n,i){this.at=e,this.highlighters=n,this.span=i,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,i,r,s){let{type:o,from:a,to:l}=e;if(a>=i||l<=n)return;o.isTop&&(s=this.highlighters.filter(h=>!h.scope||h.scope(o)));let c=r,u=kQ(e)||Kg.empty,d=bQ(s,u.tags);if(d&&(c&&(c+=" "),c+=d,u.mode==1&&(r+=(r?" ":"")+d)),this.startSpan(Math.max(n,a),c),u.opaque)return;let f=e.tree&&e.tree.prop(nt.mounted);if(f&&f.overlay){let h=e.node.enter(f.overlay[0].from+a,1),p=this.highlighters.filter(w=>!w.scope||w.scope(f.tree.type)),m=e.firstChild();for(let w=0,v=a;;w++){let y=w<f.overlay.length?f.overlay[w]:null,x=y?y.from+a:l,k=Math.max(n,v),_=Math.min(i,x);if(k<_&&m)for(;e.from<_&&(this.highlightRange(e,k,_,r,s),this.startSpan(Math.min(_,e.to),c),!(e.to>=x||!e.nextSibling())););if(!y||x>i)break;v=y.to+a,v>n&&(this.highlightRange(h.cursor(),Math.max(n,y.from+a),Math.min(i,v),"",p),this.startSpan(Math.min(i,v),c))}m&&e.parent()}else if(e.firstChild()){f&&(r="");do if(!(e.to<=n)){if(e.from>=i)break;this.highlightRange(e,n,i,r,s),this.startSpan(Math.min(i,e.to),c)}while(e.nextSibling());e.parent()}}}function kQ(t){let e=t.type.prop(m3);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const fe=_n.define,Np=fe(),Io=fe(),DA=fe(Io),IA=fe(Io),Lo=fe(),Rp=fe(Lo),qy=fe(Lo),os=fe(),Xa=fe(os),rs=fe(),ss=fe(),R1=fe(),ud=fe(R1),Mp=fe(),Ie={comment:Np,lineComment:fe(Np),blockComment:fe(Np),docComment:fe(Np),name:Io,variableName:fe(Io),typeName:DA,tagName:fe(DA),propertyName:IA,attributeName:fe(IA),className:fe(Io),labelName:fe(Io),namespace:fe(Io),macroName:fe(Io),literal:Lo,string:Rp,docString:fe(Rp),character:fe(Rp),attributeValue:fe(Rp),number:qy,integer:fe(qy),float:fe(qy),bool:fe(Lo),regexp:fe(Lo),escape:fe(Lo),color:fe(Lo),url:fe(Lo),keyword:rs,self:fe(rs),null:fe(rs),atom:fe(rs),unit:fe(rs),modifier:fe(rs),operatorKeyword:fe(rs),controlKeyword:fe(rs),definitionKeyword:fe(rs),moduleKeyword:fe(rs),operator:ss,derefOperator:fe(ss),arithmeticOperator:fe(ss),logicOperator:fe(ss),bitwiseOperator:fe(ss),compareOperator:fe(ss),updateOperator:fe(ss),definitionOperator:fe(ss),typeOperator:fe(ss),controlOperator:fe(ss),punctuation:R1,separator:fe(R1),bracket:ud,angleBracket:fe(ud),squareBracket:fe(ud),paren:fe(ud),brace:fe(ud),content:os,heading:Xa,heading1:fe(Xa),heading2:fe(Xa),heading3:fe(Xa),heading4:fe(Xa),heading5:fe(Xa),heading6:fe(Xa),contentSeparator:fe(os),list:fe(os),quote:fe(os),emphasis:fe(os),strong:fe(os),link:fe(os),monospace:fe(os),strikethrough:fe(os),inserted:fe(),deleted:fe(),changed:fe(),invalid:fe(),meta:Mp,documentMeta:fe(Mp),annotation:fe(Mp),processingInstruction:fe(Mp),definition:_n.defineModifier(),constant:_n.defineModifier(),function:_n.defineModifier(),standard:_n.defineModifier(),local:_n.defineModifier(),special:_n.defineModifier()};g3([{tag:Ie.link,class:"tok-link"},{tag:Ie.heading,class:"tok-heading"},{tag:Ie.emphasis,class:"tok-emphasis"},{tag:Ie.strong,class:"tok-strong"},{tag:Ie.keyword,class:"tok-keyword"},{tag:Ie.atom,class:"tok-atom"},{tag:Ie.bool,class:"tok-bool"},{tag:Ie.url,class:"tok-url"},{tag:Ie.labelName,class:"tok-labelName"},{tag:Ie.inserted,class:"tok-inserted"},{tag:Ie.deleted,class:"tok-deleted"},{tag:Ie.literal,class:"tok-literal"},{tag:Ie.string,class:"tok-string"},{tag:Ie.number,class:"tok-number"},{tag:[Ie.regexp,Ie.escape,Ie.special(Ie.string)],class:"tok-string2"},{tag:Ie.variableName,class:"tok-variableName"},{tag:Ie.local(Ie.variableName),class:"tok-variableName tok-local"},{tag:Ie.definition(Ie.variableName),class:"tok-variableName tok-definition"},{tag:Ie.special(Ie.variableName),class:"tok-variableName2"},{tag:Ie.definition(Ie.propertyName),class:"tok-propertyName tok-definition"},{tag:Ie.typeName,class:"tok-typeName"},{tag:Ie.namespace,class:"tok-namespace"},{tag:Ie.className,class:"tok-className"},{tag:Ie.macroName,class:"tok-macroName"},{tag:Ie.propertyName,class:"tok-propertyName"},{tag:Ie.operator,class:"tok-operator"},{tag:Ie.comment,class:"tok-comment"},{tag:Ie.meta,class:"tok-meta"},{tag:Ie.invalid,class:"tok-invalid"},{tag:Ie.punctuation,class:"tok-punctuation"}]);var Yy;const Pc=new nt;function _Q(t){return Ae.define({combine:t?e=>e.concat(t):void 0})}const CQ=new nt;class Fr{constructor(e,n,i=[],r=""){this.data=e,this.name=r,Ye.prototype.hasOwnProperty("tree")||Object.defineProperty(Ye.prototype,"tree",{get(){return Qr(this)}}),this.parser=n,this.extension=[_u.of(this),Ye.languageData.of((s,o,a)=>{let l=LA(s,o,a),c=l.type.prop(Pc);if(!c)return[];let u=s.facet(c),d=l.type.prop(CQ);if(d){let f=l.resolve(o-l.from,a);for(let h of d)if(h.test(f,s)){let p=s.facet(h.facet);return h.type=="replace"?p:p.concat(u)}}return u})].concat(i)}isActiveAt(e,n,i=-1){return LA(e,n,i).type.prop(Pc)==this.data}findRegions(e){let n=e.facet(_u);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let i=[],r=(s,o)=>{if(s.prop(Pc)==this.data){i.push({from:o,to:o+s.length});return}let a=s.prop(nt.mounted);if(a){if(a.tree.prop(Pc)==this.data){if(a.overlay)for(let l of a.overlay)i.push({from:l.from+o,to:l.to+o});else i.push({from:o,to:o+s.length});return}else if(a.overlay){let l=i.length;if(r(a.tree,a.overlay[0].from+o),i.length>l)return}}for(let l=0;l<s.children.length;l++){let c=s.children[l];c instanceof Bt&&r(c,s.positions[l]+o)}};return r(Qr(e),0),i}get allowsNesting(){return!0}}Fr.setState=Ke.define();function LA(t,e,n){let i=t.facet(_u),r=Qr(t).topNode;if(!i||i.allowsNesting)for(let s=r;s;s=s.enter(e,n,An.ExcludeBuffers))s.type.isTop&&(r=s);return r}function Qr(t){let e=t.field(Fr.state,!1);return e?e.tree:Bt.empty}class EQ{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let i=this.cursorPos-this.string.length;return e<i||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-i,n-i)}}let dd=null;class Su{constructor(e,n,i=[],r,s,o,a,l){this.parser=e,this.state=n,this.fragments=i,this.tree=r,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,n,i){return new Su(e,n,[],Bt.empty,0,i,[],null)}startParse(){return this.parser.startParse(new EQ(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=Bt.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(wl.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(wl.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=dd;dd=this;try{return e()}finally{dd=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=BA(e,n.from,n.to);return e}changes(e,n){let{fragments:i,tree:r,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((c,u,d,f)=>l.push({fromA:c,toA:u,fromB:d,toB:f})),i=wl.applyChanges(i,l),r=Bt.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let c of this.skipped){let u=e.mapPos(c.from,1),d=e.mapPos(c.to,-1);u<d&&a.push({from:u,to:d})}}}return new Su(this.parser,n,i,r,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:r,to:s}=this.skipped[i];r<e.to&&s>e.from&&(this.fragments=BA(this.fragments,r,s),this.skipped.splice(i--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends p3{createParse(n,i,r){let s=r[0].from,o=r[r.length-1].to;return{parsedPos:s,advance(){let l=dd;if(l){for(let c of r)l.tempSkipped.push(c);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new Bt(Ei.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return dd}}function BA(t,e,n){return wl.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class ku{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,i)||n.takeTree(),new ku(n)}static init(e){let n=Math.min(3e3,e.doc.length),i=Su.create(e.facet(_u).parser,e,{from:0,to:n});return i.work(20,n)||i.takeTree(),new ku(i)}}Fr.state=si.define({create:ku.init,update(t,e){for(let n of e.effects)if(n.is(Fr.setState))return n.value;return e.startState.facet(_u)!=e.state.facet(_u)?ku.init(e.state):t.apply(e)}});let v3=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(v3=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const Jy=typeof navigator<"u"&&(!((Yy=navigator.scheduling)===null||Yy===void 0)&&Yy.isInputPending)?()=>navigator.scheduling.isInputPending():null,AQ=Dn.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(Fr.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(Fr.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=v3(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:r}}=this.view,s=i.field(Fr.state);if(s.tree==s.context.tree&&s.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!Jy?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<r&&i.doc.length>r+1e3,l=s.context.work(()=>Jy&&Jy()||Date.now()>o,r+(a?0:1e5));this.chunkBudget-=Date.now()-n,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:Fr.setState.of(new ku(s.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>Hr(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),_u=Ae.define({combine(t){return t.length?t[0]:null},enables:t=>[Fr.state,AQ,Pe.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});class PQ{constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}const y3=Ae.define(),Fk=Ae.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function Fl(t){let e=t.facet(Fk);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function M1(t,e){let n="",i=t.tabSize,r=t.facet(Fk)[0];if(r=="	"){for(;e>=i;)n+="	",e-=i;r=" "}for(let s=0;s<e;s++)n+=r;return n}function $Q(t,e){t instanceof Ye&&(t=new zk(t));for(let i of t.state.facet(y3)){let r=i(t,e);if(r!==void 0)return r}let n=Qr(t.state);return n.length>=e?OQ(t,n,e):null}class zk{constructor(e,n={}){this.state=e,this.options=n,this.unit=Fl(e)}lineAt(e,n=1){let i=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:s}=this.options;return r!=null&&r>=i.from&&r<=i.to?s&&r==e?{text:"",from:e}:(n<0?r<e:r<=e)?{text:i.text.slice(r-i.from),from:r}:{text:i.text.slice(0,r-i.from),from:i.from}:i}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:r}=this.lineAt(e,n);return i.slice(e-r,Math.min(i.length,e+100-r))}column(e,n=1){let{text:i,from:r}=this.lineAt(e,n),s=this.countColumn(i,e-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(s+=o-this.countColumn(i,i.search(/\S|$/))),s}countColumn(e,n=e.length){return hh(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:i,from:r}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let o=s(r);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const TQ=new nt;function OQ(t,e,n){let i=e.resolveStack(n),r=i.node.enterUnfinishedNodesBefore(n);if(r!=i.node){let s=[];for(let o=r;o!=i.node;o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)i={node:s[o],next:i}}return w3(i,t,n)}function w3(t,e,n){for(let i=t;i;i=i.next){let r=RQ(i.node);if(r)return r(Uk.create(e,n,i))}return 0}function NQ(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function RQ(t){let e=t.type.prop(TQ);if(e)return e;let n=t.firstChild,i;if(n&&(i=n.type.prop(nt.closedBy))){let r=t.lastChild,s=r&&i.indexOf(r.name)>-1;return o=>LQ(o,!0,1,void 0,s&&!NQ(o)?r.from:void 0)}return t.parent==null?MQ:null}function MQ(){return 0}class Uk extends zk{constructor(e,n,i){super(e.state,e.options),this.base=e,this.pos=n,this.context=i}get node(){return this.context.node}static create(e,n,i){return new Uk(e,n,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(n.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(DQ(i,e))break;n=this.state.doc.lineAt(i.from)}return this.lineIndent(n.from)}continue(){return w3(this.context.next,this.base,this.pos)}}function DQ(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function IQ(t){let e=t.node,n=e.childAfter(e.from),i=e.lastChild;if(!n)return null;let r=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),o=r==null||r<=s.from?s.to:Math.min(s.to,r);for(let a=n.to;;){let l=e.childAfter(a);if(!l||l==i)return null;if(!l.type.isSkipped)return l.from<o?n:null;a=l.to}}function LQ(t,e,n,i,r){let s=t.textAfter,o=s.match(/^\s*/)[0].length,a=i&&s.slice(o,o+i.length)==i||r==t.pos+o,l=e?IQ(t):null;return l?a?t.column(l.from):t.column(l.to):t.baseIndent+(a?0:t.unit*n)}const BQ=Ae.define(),jQ=new nt;function FQ(t,e,n){let i=Qr(t);if(i.length<n)return null;let r=i.resolveStack(n,1),s=null;for(let o=r;o;o=o.next){let a=o.node;if(a.to<=n||a.from>n)continue;if(s&&a.from<e)break;let l=a.type.prop(jQ);if(l&&(a.to<i.length-50||i.length==t.doc.length||!zQ(a))){let c=l(a,t);c&&c.from<=n&&c.from>=e&&c.to>n&&(s=c)}}return s}function zQ(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function b3(t,e,n){for(let i of t.facet(BQ)){let r=i(t,e,n);if(r)return r}return FQ(t,e,n)}function x3(t,e){let n=e.mapPos(t.from,1),i=e.mapPos(t.to,-1);return n>=i?void 0:{from:n,to:i}}const Vk=Ke.define({map:x3}),l0=Ke.define({map:x3});function S3(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some(i=>i.from<=n&&i.to>=n)||e.push(t.lineBlockAt(n));return e}const Ch=si.define({create(){return Xe.none},update(t,e){t=t.map(e.changes);for(let n of e.effects)if(n.is(Vk)&&!UQ(t,n.value.from,n.value.to)){let{preparePlaceholder:i}=e.state.facet(Hk),r=i?Xe.replace({widget:new qQ(i(e.state,n.value))}):jA;t=t.update({add:[r.range(n.value.from,n.value.to)]})}else n.is(l0)&&(t=t.update({filter:(i,r)=>n.value.from!=i||n.value.to!=r,filterFrom:n.value.from,filterTo:n.value.to}));if(e.selection){let n=!1,{head:i}=e.selection.main;t.between(i,i,(r,s)=>{r<i&&s>i&&(n=!0)}),n&&(t=t.update({filterFrom:i,filterTo:i,filter:(r,s)=>s<=i||r>=i}))}return t},provide:t=>Pe.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(i,r)=>{n.push(i,r)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let i=t[n++],r=t[n++];if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");e.push(jA.range(i,r))}return Xe.set(e,!0)}});function k3(t,e,n){var i;let r=null;return(i=t.field(Ch,!1))===null||i===void 0||i.between(e,n,(s,o)=>{(!r||r.from>s)&&(r={from:s,to:o})}),r}function UQ(t,e,n){let i=!1;return t.between(e,e,(r,s)=>{r==e&&s==n&&(i=!0)}),i}function _3(t,e){return t.field(Ch,!1)?e:e.concat(Ke.appendConfig.of(XQ()))}const VQ=t=>{for(let e of S3(t)){let n=b3(t.state,e.from,e.to);if(n)return t.dispatch({effects:_3(t.state,[Vk.of(n),C3(t,n)])}),!0}return!1},HQ=t=>{if(!t.state.field(Ch,!1))return!1;let e=[];for(let n of S3(t)){let i=k3(t.state,n.from,n.to);i&&e.push(l0.of(i),C3(t,i,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function C3(t,e,n=!0){let i=t.state.doc.lineAt(e.from).number,r=t.state.doc.lineAt(e.to).number;return Pe.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${i} ${t.state.phrase("to")} ${r}.`)}const WQ=t=>{let{state:e}=t,n=[];for(let i=0;i<e.doc.length;){let r=t.lineBlockAt(i),s=b3(e,r.from,r.to);s&&n.push(Vk.of(s)),i=(s?t.lineBlockAt(s.to):r).to+1}return n.length&&t.dispatch({effects:_3(t.state,n)}),!!n.length},GQ=t=>{let e=t.state.field(Ch,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,(i,r)=>{n.push(l0.of({from:i,to:r}))}),t.dispatch({effects:n}),!0},KQ={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},Hk=Ae.define({combine(t){return Ia(t,KQ)}});function XQ(t){let e=[Ch,YQ];return t&&e.push(Hk.of(t)),e}function E3(t,e){let{state:n}=t,i=n.facet(Hk),r=o=>{let a=t.lineBlockAt(t.posAtDOM(o.target)),l=k3(t.state,a.from,a.to);l&&t.dispatch({effects:l0.of(l)}),o.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(t,r,e);let s=document.createElement("span");return s.textContent=i.placeholderText,s.setAttribute("aria-label",n.phrase("folded code")),s.title=n.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=r,s}const jA=Xe.replace({widget:new class extends La{toDOM(t){return E3(t,null)}}});class qQ extends La{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return E3(e,this.value)}}const YQ=Pe.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class c0{constructor(e,n){this.specs=e;let i;function r(a){let l=xa.newName();return(i||(i=Object.create(null)))["."+l]=a,l}const s=typeof n.all=="string"?n.all:n.all?r(n.all):void 0,o=n.scope;this.scope=o instanceof Fr?a=>a.prop(Pc)==o.data:o?a=>a==o:void 0,this.style=g3(e.map(a=>({tag:a.tag,class:a.class||r(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=i?new xa(i):null,this.themeType=n.themeType}static define(e,n){return new c0(e,n||{})}}const D1=Ae.define(),A3=Ae.define({combine(t){return t.length?[t[0]]:null}});function Zy(t){let e=t.facet(D1);return e.length?e:t.facet(A3)}function JQ(t,e){let n=[QQ],i;return t instanceof c0&&(t.module&&n.push(Pe.styleModule.of(t.module)),i=t.themeType),e!=null&&e.fallback?n.push(A3.of(t)):i?n.push(D1.computeN([Pe.darkTheme],r=>r.facet(Pe.darkTheme)==(i=="dark")?[t]:[])):n.push(D1.of(t)),n}class ZQ{constructor(e){this.markCache=Object.create(null),this.tree=Qr(e.state),this.decorations=this.buildDeco(e,Zy(e.state))}update(e){let n=Qr(e.state),i=Zy(e.state),r=i!=Zy(e.startState);n.length<e.view.viewport.to&&!r&&n.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(n!=this.tree||e.viewportChanged||r)&&(this.tree=n,this.decorations=this.buildDeco(e.view,i))}buildDeco(e,n){if(!n||!this.tree.length)return Xe.none;let i=new Nl;for(let{from:r,to:s}of e.visibleRanges)xQ(this.tree,n,(o,a,l)=>{i.add(o,a,this.markCache[l]||(this.markCache[l]=Xe.mark({class:l})))},r,s);return i.finish()}}const QQ=dh.high(Dn.fromClass(ZQ,{decorations:t=>t.decorations})),eee=1e4,tee="()[]{}",nee=new nt;function I1(t,e,n){let i=t.prop(e<0?nt.openedBy:nt.closedBy);if(i)return i;if(t.name.length==1){let r=n.indexOf(t.name);if(r>-1&&r%2==(e<0?1:0))return[n[r+e]]}return null}function L1(t){let e=t.type.prop(nee);return e?e(t.node):t}function Dp(t,e,n,i={}){let r=i.maxScanDistance||eee,s=i.brackets||tee,o=Qr(t),a=o.resolveInner(e,n);for(let l=a;l;l=l.parent){let c=I1(l.type,n,s);if(c&&l.from<l.to){let u=L1(l);if(u&&(n>0?e>=u.from&&e<u.to:e>u.from&&e<=u.to))return iee(t,e,n,l,u,c,s)}}return ree(t,e,n,o,a.type,r,s)}function iee(t,e,n,i,r,s,o){let a=i.parent,l={from:r.from,to:r.to},c=0,u=a==null?void 0:a.cursor();if(u&&(n<0?u.childBefore(i.from):u.childAfter(i.to)))do if(n<0?u.to<=i.from:u.from>=i.to){if(c==0&&s.indexOf(u.type.name)>-1&&u.from<u.to){let d=L1(u);return{start:l,end:d?{from:d.from,to:d.to}:void 0,matched:!0}}else if(I1(u.type,n,o))c++;else if(I1(u.type,-n,o)){if(c==0){let d=L1(u);return{start:l,end:d&&d.from<d.to?{from:d.from,to:d.to}:void 0,matched:!1}}c--}}while(n<0?u.prevSibling():u.nextSibling());return{start:l,matched:!1}}function ree(t,e,n,i,r,s,o){let a=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=n>0)return null;let c={from:n<0?e-1:e,to:n>0?e+1:e},u=t.doc.iterRange(e,n>0?t.doc.length:0),d=0;for(let f=0;!u.next().done&&f<=s;){let h=u.value;n<0&&(f+=h.length);let p=e+f*n;for(let m=n>0?0:h.length-1,w=n>0?h.length:-1;m!=w;m+=n){let v=o.indexOf(h[m]);if(!(v<0||i.resolveInner(p+m,1).type!=r))if(v%2==0==n>0)d++;else{if(d==1)return{start:c,end:{from:p+m,to:p+m+1},matched:v>>1==l>>1};d--}}n>0&&(f+=h.length)}return u.done?{start:c,matched:!1}:null}function FA(t,e,n,i=0,r=0){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));let s=r;for(let o=i;o<e;o++)t.charCodeAt(o)==9?s+=n-s%n:s++;return s}class P3{constructor(e,n,i,r){this.string=e,this.tabSize=n,this.indentUnit=i,this.overrideIndent=r,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let n=this.string.charAt(this.pos),i;if(typeof e=="string"?i=n==e:i=n&&(e instanceof RegExp?e.test(n):e(n)),i)return++this.pos,n}eatWhile(e){let n=this.pos;for(;this.eat(e););return this.pos>n}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let n=this.string.indexOf(e,this.pos);if(n>-1)return this.pos=n,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=FA(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:FA(this.string,null,this.tabSize)}match(e,n,i){if(typeof e=="string"){let r=o=>i?o.toLowerCase():o,s=this.string.substr(this.pos,e.length);return r(s)==r(e)?(n!==!1&&(this.pos+=e.length),!0):null}else{let r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&n!==!1&&(this.pos+=r[0].length),r)}}current(){return this.string.slice(this.start,this.pos)}}function see(t){return{name:t.name||"",token:t.token,blankLine:t.blankLine||(()=>{}),startState:t.startState||(()=>!0),copyState:t.copyState||oee,indent:t.indent||(()=>null),languageData:t.languageData||{},tokenTable:t.tokenTable||Kk}}function oee(t){if(typeof t!="object")return t;let e={};for(let n in t){let i=t[n];e[n]=i instanceof Array?i.slice():i}return e}const zA=new WeakMap;class Wk extends Fr{constructor(e){let n=_Q(e.languageData),i=see(e),r,s=new class extends p3{createParse(o,a,l){return new lee(r,o,a,l)}};super(n,s,[y3.of((o,a)=>this.getIndent(o,a))],e.name),this.topNode=dee(n),r=this,this.streamParser=i,this.stateAfter=new nt({perNode:!0}),this.tokenTable=e.tokenTable?new N3(i.tokenTable):uee}static define(e){return new Wk(e)}getIndent(e,n){let i=Qr(e.state),r=i.resolve(n);for(;r&&r.type!=this.topNode;)r=r.parent;if(!r)return null;let s,{overrideIndentation:o}=e.options;o&&(s=zA.get(e.state),s!=null&&s<n-1e4&&(s=void 0));let a=Gk(this,i,0,r.from,s??n),l,c;if(a?(c=a.state,l=a.pos+1):(c=this.streamParser.startState(e.unit),l=0),n-l>1e4)return null;for(;l<n;){let d=e.state.doc.lineAt(l),f=Math.min(n,d.to);if(d.length){let h=o?o(d.from):-1,p=new P3(d.text,e.state.tabSize,e.unit,h<0?void 0:h);for(;p.pos<f-d.from;)T3(this.streamParser.token,p,c)}else this.streamParser.blankLine(c,e.unit);if(f==n)break;l=d.to+1}let u=e.lineAt(n);return o&&s==null&&zA.set(e.state,u.from),this.streamParser.indent(c,/^\s*(.*)/.exec(u.text)[1],e)}get allowsNesting(){return!1}}function Gk(t,e,n,i,r){let s=n>=i&&n+e.length<=r&&e.prop(t.stateAfter);if(s)return{state:t.streamParser.copyState(s),pos:n+e.length};for(let o=e.children.length-1;o>=0;o--){let a=e.children[o],l=n+e.positions[o],c=a instanceof Bt&&l<r&&Gk(t,a,l,i,r);if(c)return c}return null}function $3(t,e,n,i,r){if(r&&n<=0&&i>=e.length)return e;!r&&e.type==t.topNode&&(r=!0);for(let s=e.children.length-1;s>=0;s--){let o=e.positions[s],a=e.children[s],l;if(o<i&&a instanceof Bt){if(!(l=$3(t,a,n-o,i-o,r)))break;return r?new Bt(e.type,e.children.slice(0,s).concat(l),e.positions.slice(0,s+1),o+l.length):l}}return null}function aee(t,e,n,i){for(let r of e){let s=r.from+(r.openStart?25:0),o=r.to-(r.openEnd?25:0),a=s<=n&&o>n&&Gk(t,r.tree,0-r.offset,n,o),l;if(a&&(l=$3(t,r.tree,n+r.offset,a.pos+r.offset,!1)))return{state:a.state,tree:l}}return{state:t.streamParser.startState(i?Fl(i):4),tree:Bt.empty}}class lee{constructor(e,n,i,r){this.lang=e,this.input=n,this.fragments=i,this.ranges=r,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=r[r.length-1].to;let s=Su.get(),o=r[0].from,{state:a,tree:l}=aee(e,i,o,s==null?void 0:s.state);this.state=a,this.parsedPos=this.chunkStart=o+l.length;for(let c=0;c<l.children.length;c++)this.chunks.push(l.children[c]),this.chunkPos.push(l.positions[c]);s&&this.parsedPos<s.viewport.from-1e5&&(this.state=this.lang.streamParser.startState(Fl(s.state)),s.skipUntilInView(this.parsedPos,s.viewport.from),this.parsedPos=s.viewport.from),this.moveRangeIndex()}advance(){let e=Su.get(),n=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),i=Math.min(n,this.chunkStart+2048);for(e&&(i=Math.min(i,e.viewport.to));this.parsedPos<i;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=n?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,n),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let n=this.input.chunk(e);if(this.input.lineChunks)n==`
`&&(n="");else{let i=n.indexOf(`
`);i>-1&&(n=n.slice(0,i))}return e+n.length<=this.to?n:n.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,n=this.lineAfter(e),i=e+n.length;for(let r=this.rangeIndex;;){let s=this.ranges[r].to;if(s>=i||(n=n.slice(0,s-(i-n.length)),r++,r==this.ranges.length))break;let o=this.ranges[r].from,a=this.lineAfter(o);n+=a,i=o+a.length}return{line:n,end:i}}skipGapsTo(e,n,i){for(;;){let r=this.ranges[this.rangeIndex].to,s=e+n;if(i>0?r>s:r>=s)break;let o=this.ranges[++this.rangeIndex].from;n+=o-r}return n}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,n,i,r,s){if(this.ranges.length>1){s=this.skipGapsTo(n,s,1),n+=s;let o=this.chunk.length;s=this.skipGapsTo(i,s,-1),i+=s,r+=this.chunk.length-o}return this.chunk.push(e,n,i,r),s}parseLine(e){let{line:n,end:i}=this.nextLine(),r=0,{streamParser:s}=this.lang,o=new P3(n,e?e.state.tabSize:4,e?Fl(e.state):2);if(o.eol())s.blankLine(this.state,o.indentUnit);else for(;!o.eol();){let a=T3(s.token,o,this.state);if(a&&(r=this.emitToken(this.lang.tokenTable.resolve(a),this.parsedPos+o.start,this.parsedPos+o.pos,4,r)),o.start>1e4)break}this.parsedPos=i,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=Bt.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:cee,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new Bt(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new Bt(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function T3(t,e,n){e.start=e.pos;for(let i=0;i<10;i++){let r=t(e,n);if(e.pos>e.start)return r}throw new Error("Stream parser failed to advance stream.")}const Kk=Object.create(null),eh=[Ei.none],cee=new Ik(eh),UA=[],VA=Object.create(null),O3=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])O3[t]=R3(Kk,e);class N3{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),O3)}resolve(e){return e?this.table[e]||(this.table[e]=R3(this.extra,e)):0}}const uee=new N3(Kk);function Qy(t,e){UA.indexOf(t)>-1||(UA.push(t),console.warn(e))}function R3(t,e){let n=[];for(let a of e.split(" ")){let l=[];for(let c of a.split(".")){let u=t[c]||Ie[c];u?typeof u=="function"?l.length?l=l.map(u):Qy(c,`Modifier ${c} used at start of tag`):l.length?Qy(c,`Tag ${c} used as modifier`):l=Array.isArray(u)?u:[u]:Qy(c,`Unknown highlighting tag ${c}`)}for(let c of l)n.push(c)}if(!n.length)return 0;let i=e.replace(/ /g,"_"),r=i+" "+n.map(a=>a.id),s=VA[r];if(s)return s.id;let o=VA[r]=Ei.define({id:eh.length,name:i,props:[wQ({[i]:n})]});return eh.push(o),o.id}function dee(t){let e=Ei.define({id:eh.length,name:"Document",props:[Pc.add(()=>t)],top:!0});return eh.push(e),e}Ot.RTL,Ot.LTR;const fee=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),i=Xk(t.state,n.from);return i.line?hee(t):i.block?vee(t):!1};function Eh(t,e){return({state:n,dispatch:i})=>{if(n.readOnly)return!1;let r=t(e,n);return r?(i(n.update(r)),!0):!1}}const hee=Eh(qk,0),pee=Eh(qk,1),mee=Eh(qk,2),gee=Eh(M3,0),vee=Eh((t,e)=>M3(t,e,wee(e)),0);function Xk(t,e){let n=t.languageDataAt("commentTokens",e);return n.length?n[0]:{}}const fd=50;function yee(t,{open:e,close:n},i,r){let s=t.sliceDoc(i-fd,i),o=t.sliceDoc(r,r+fd),a=/\s*$/.exec(s)[0].length,l=/^\s*/.exec(o)[0].length,c=s.length-a;if(s.slice(c-e.length,c)==e&&o.slice(l,l+n.length)==n)return{open:{pos:i-a,margin:a&&1},close:{pos:r+l,margin:l&&1}};let u,d;r-i<=2*fd?u=d=t.sliceDoc(i,r):(u=t.sliceDoc(i,i+fd),d=t.sliceDoc(r-fd,r));let f=/^\s*/.exec(u)[0].length,h=/\s*$/.exec(d)[0].length,p=d.length-h-n.length;return u.slice(f,f+e.length)==e&&d.slice(p,p+n.length)==n?{open:{pos:i+f+e.length,margin:/\s/.test(u.charAt(f+e.length))?1:0},close:{pos:r-h-n.length,margin:/\s/.test(d.charAt(p-1))?1:0}}:null}function wee(t){let e=[];for(let n of t.selection.ranges){let i=t.doc.lineAt(n.from),r=n.to<=i.to?i:t.doc.lineAt(n.to),s=e.length-1;s>=0&&e[s].to>i.from?e[s].to=r.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:r.to})}return e}function M3(t,e,n=e.selection.ranges){let i=n.map(s=>Xk(e,s.from).block);if(!i.every(s=>s))return null;let r=n.map((s,o)=>yee(e,i[o],s.from,s.to));if(t!=2&&!r.every(s=>s))return{changes:e.changes(n.map((s,o)=>r[o]?[]:[{from:s.from,insert:i[o].open+" "},{from:s.to,insert:" "+i[o].close}]))};if(t!=1&&r.some(s=>s)){let s=[];for(let o=0,a;o<r.length;o++)if(a=r[o]){let l=i[o],{open:c,close:u}=a;s.push({from:c.pos-l.open.length,to:c.pos+c.margin},{from:u.pos-u.margin,to:u.pos+l.close.length})}return{changes:s}}return null}function qk(t,e,n=e.selection.ranges){let i=[],r=-1;for(let{from:s,to:o}of n){let a=i.length,l=1e9,c=Xk(e,s).line;if(c){for(let u=s;u<=o;){let d=e.doc.lineAt(u);if(d.from>r&&(s==o||o>d.from)){r=d.from;let f=/^\s*/.exec(d.text)[0].length,h=f==d.length,p=d.text.slice(f,f+c.length)==c?f:-1;f<d.text.length&&f<l&&(l=f),i.push({line:d,comment:p,token:c,indent:f,empty:h,single:!1})}u=d.to+1}if(l<1e9)for(let u=a;u<i.length;u++)i[u].indent<i[u].line.text.length&&(i[u].indent=l);i.length==a+1&&(i[a].single=!0)}}if(t!=2&&i.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:a,token:l,indent:c,empty:u,single:d}of i)(d||!u)&&s.push({from:a.from+c,insert:l+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&i.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:a,token:l}of i)if(a>=0){let c=o.from+a,u=c+l.length;o.text[u-o.from]==" "&&u++,s.push({from:c,to:u})}return{changes:s}}return null}const B1=So.define(),bee=So.define(),xee=Ae.define(),D3=Ae.define({combine(t){return Ia(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(i,r)=>e(i,r)||n(i,r)})}}),I3=si.define({create(){return _s.empty},update(t,e){let n=e.state.facet(D3),i=e.annotation(B1);if(i){let l=Si.fromTransaction(e,i.selection),c=i.side,u=c==0?t.undone:t.done;return l?u=Xg(u,u.length,n.minDepth,l):u=j3(u,e.startState.selection),new _s(c==0?i.rest:u,c==0?u:i.rest)}let r=e.annotation(bee);if((r=="full"||r=="before")&&(t=t.isolate()),e.annotation(un.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let s=Si.fromTransaction(e),o=e.annotation(un.time),a=e.annotation(un.userEvent);return s?t=t.addChanges(s,o,a,n,e):e.selection&&(t=t.addSelection(e.startState.selection,o,a,n.newGroupDelay)),(r=="full"||r=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new _s(t.done.map(Si.fromJSON),t.undone.map(Si.fromJSON))}});function See(t={}){return[I3,D3.of(t),Pe.domEventHandlers({beforeinput(e,n){let i=e.inputType=="historyUndo"?L3:e.inputType=="historyRedo"?j1:null;return i?(e.preventDefault(),i(n)):!1}})]}function Yk(t,e){return function({state:n,dispatch:i}){if(!e&&n.readOnly)return!1;let r=n.field(I3,!1);if(!r)return!1;let s=r.pop(t,n,e);return s?(i(s),!0):!1}}const L3=Yk(0,!1),j1=Yk(1,!1),kee=Yk(0,!0);class Si{constructor(e,n,i,r,s){this.changes=e,this.effects=n,this.mapped=i,this.startSelection=r,this.selectionsAfter=s}setSelAfter(e){return new Si(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(e){return new Si(e.changes&&on.fromJSON(e.changes),[],e.mapped&&Ps.fromJSON(e.mapped),e.startSelection&&re.fromJSON(e.startSelection),e.selectionsAfter.map(re.fromJSON))}static fromTransaction(e,n){let i=pr;for(let r of e.startState.facet(xee)){let s=r(e);s.length&&(i=i.concat(s))}return!i.length&&e.changes.empty?null:new Si(e.changes.invert(e.startState.doc),i,void 0,n||e.startState.selection,pr)}static selection(e){return new Si(void 0,pr,void 0,void 0,e)}}function Xg(t,e,n,i){let r=e+1>n+20?e-n-1:0,s=t.slice(r,e);return s.push(i),s}function _ee(t,e){let n=[],i=!1;return t.iterChangedRanges((r,s)=>n.push(r,s)),e.iterChangedRanges((r,s,o,a)=>{for(let l=0;l<n.length;){let c=n[l++],u=n[l++];a>=c&&o<=u&&(i=!0)}}),i}function Cee(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,i)=>n.empty!=e.ranges[i].empty).length===0}function B3(t,e){return t.length?e.length?t.concat(e):t:e}const pr=[],Eee=200;function j3(t,e){if(t.length){let n=t[t.length-1],i=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-Eee));return i.length&&i[i.length-1].eq(e)?t:(i.push(e),Xg(t,t.length-1,1e9,n.setSelAfter(i)))}else return[Si.selection([e])]}function Aee(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function ew(t,e){if(!t.length)return t;let n=t.length,i=pr;for(;n;){let r=Pee(t[n-1],e,i);if(r.changes&&!r.changes.empty||r.effects.length){let s=t.slice(0,n);return s[n-1]=r,s}else e=r.mapped,n--,i=r.selectionsAfter}return i.length?[Si.selection(i)]:pr}function Pee(t,e,n){let i=B3(t.selectionsAfter.length?t.selectionsAfter.map(a=>a.map(e)):pr,n);if(!t.changes)return Si.selection(i);let r=t.changes.map(e),s=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(s):s;return new Si(r,Ke.mapEffects(t.effects,e),o,t.startSelection.map(s),i)}const $ee=/^(input\.type|delete)($|\.)/;class _s{constructor(e,n,i=0,r=void 0){this.done=e,this.undone=n,this.prevTime=i,this.prevUserEvent=r}isolate(){return this.prevTime?new _s(this.done,this.undone):this}addChanges(e,n,i,r,s){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!i||$ee.test(i))&&(!a.selectionsAfter.length&&n-this.prevTime<r.newGroupDelay&&r.joinToEvent(s,_ee(a.changes,e.changes))||i=="input.type.compose")?o=Xg(o,o.length-1,r.minDepth,new Si(e.changes.compose(a.changes),B3(e.effects,a.effects),a.mapped,a.startSelection,pr)):o=Xg(o,o.length,r.minDepth,e),new _s(o,pr,n,i)}addSelection(e,n,i,r){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:pr;return s.length>0&&n-this.prevTime<r&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&Cee(s[s.length-1],e)?this:new _s(j3(this.done,e),this.undone,n,i)}addMapping(e){return new _s(ew(this.done,e),ew(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,i){let r=e==0?this.done:this.undone;if(r.length==0)return null;let s=r[r.length-1],o=s.selectionsAfter[0]||n.selection;if(i&&s.selectionsAfter.length)return n.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:B1.of({side:e,rest:Aee(r),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let a=r.length==1?pr:r.slice(0,r.length-1);return s.mapped&&(a=ew(a,s.mapped)),n.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:B1.of({side:e,rest:a,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}_s.empty=new _s(pr,pr);function Ah(t,e){return re.create(t.ranges.map(e),t.mainIndex)}function Fa(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Kl({state:t,dispatch:e},n){let i=Ah(t.selection,n);return i.eq(t.selection,!0)?!1:(e(Fa(t,i)),!0)}function u0(t,e){return re.cursor(e?t.to:t.from)}function F3(t,e){return Kl(t,n=>n.empty?t.moveByChar(n,e):u0(n,e))}function za(t){return t.textDirectionAt(t.state.selection.main.head)==Ot.LTR}const HA=t=>F3(t,!za(t)),WA=t=>F3(t,za(t));function z3(t,e){return Kl(t,n=>n.empty?t.moveByGroup(n,e):u0(n,e))}const Tee=t=>z3(t,!za(t)),Oee=t=>z3(t,za(t));function U3(t,e){return Kl(t,n=>{if(!n.empty)return u0(n,e);let i=t.moveVertically(n,e);return i.head!=n.head?i:t.moveToLineBoundary(n,e)})}const GA=t=>U3(t,!1),KA=t=>U3(t,!0);function V3(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,i=0,r;if(e){for(let s of t.state.facet(Pe.scrollMargins)){let o=s(t);o!=null&&o.top&&(n=Math.max(o==null?void 0:o.top,n)),o!=null&&o.bottom&&(i=Math.max(o==null?void 0:o.bottom,i))}r=t.scrollDOM.clientHeight-n-i}else r=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:i,selfScroll:e,height:Math.max(t.defaultLineHeight,r-5)}}function H3(t,e){let n=V3(t),{state:i}=t,r=Ah(i.selection,o=>o.empty?t.moveVertically(o,e,n.height):u0(o,e));if(r.eq(i.selection))return!1;let s;if(n.selfScroll){let o=t.coordsAtPos(i.selection.main.head),a=t.scrollDOM.getBoundingClientRect(),l=a.top+n.marginTop,c=a.bottom-n.marginBottom;o&&o.top>l&&o.bottom<c&&(s=Pe.scrollIntoView(r.main.head,{y:"start",yMargin:o.top-l}))}return t.dispatch(Fa(i,r),{effects:s}),!0}const tw=t=>H3(t,!1),nw=t=>H3(t,!0);function d0(t,e,n){let i=t.lineBlockAt(e.head),r=t.moveToLineBoundary(e,n);if(r.head==e.head&&r.head!=(n?i.to:i.from)&&(r=t.moveToLineBoundary(e,n,!1)),!n&&r.head==i.from&&i.length){let s=/^\s*/.exec(t.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;s&&e.head!=i.from+s&&(r=re.cursor(i.from+s))}return r}const XA=t=>Kl(t,e=>d0(t,e,!0)),qA=t=>Kl(t,e=>d0(t,e,!1)),Nee=t=>Kl(t,e=>re.cursor(t.lineBlockAt(e.head).from,1)),Ree=t=>Kl(t,e=>re.cursor(t.lineBlockAt(e.head).to,-1));function Mee(t,e,n){let i=!1,r=Ah(t.selection,s=>{let o=Dp(t,s.head,-1)||Dp(t,s.head,1)||s.head>0&&Dp(t,s.head-1,1)||s.head<t.doc.length&&Dp(t,s.head+1,-1);if(!o||!o.end)return s;i=!0;let a=o.start.from==s.head?o.end.to:o.end.from;return n?re.range(s.anchor,a):re.cursor(a)});return i?(e(Fa(t,r)),!0):!1}const Dee=({state:t,dispatch:e})=>Mee(t,e,!1);function Ua(t,e){let n=Ah(t.state.selection,i=>{let r=e(i);return re.range(i.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(Fa(t.state,n)),!0)}function W3(t,e){return Ua(t,n=>t.moveByChar(n,e))}const YA=t=>W3(t,!za(t)),JA=t=>W3(t,za(t));function G3(t,e){return Ua(t,n=>t.moveByGroup(n,e))}const Iee=t=>G3(t,!za(t)),Lee=t=>G3(t,za(t));function K3(t,e){return Ua(t,n=>t.moveVertically(n,e))}const ZA=t=>K3(t,!1),QA=t=>K3(t,!0);function X3(t,e){return Ua(t,n=>t.moveVertically(n,e,V3(t).height))}const eP=t=>X3(t,!1),tP=t=>X3(t,!0),nP=t=>Ua(t,e=>d0(t,e,!0)),iP=t=>Ua(t,e=>d0(t,e,!1)),Bee=t=>Ua(t,e=>re.cursor(t.lineBlockAt(e.head).from)),jee=t=>Ua(t,e=>re.cursor(t.lineBlockAt(e.head).to)),rP=({state:t,dispatch:e})=>(e(Fa(t,{anchor:0})),!0),sP=({state:t,dispatch:e})=>(e(Fa(t,{anchor:t.doc.length})),!0),oP=({state:t,dispatch:e})=>(e(Fa(t,{anchor:t.selection.main.anchor,head:0})),!0),aP=({state:t,dispatch:e})=>(e(Fa(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),Fee=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),zee=({state:t,dispatch:e})=>{let n=h0(t).map(({from:i,to:r})=>re.range(i,Math.min(r+1,t.doc.length)));return e(t.update({selection:re.create(n),userEvent:"select"})),!0};function f0(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:i}=t,r=i.changeByRange(s=>{let{from:o,to:a}=s;if(o==a){let l=e(s);l<o?(n="delete.backward",l=Ip(t,l,!1)):l>o&&(n="delete.forward",l=Ip(t,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=Ip(t,o,!1),a=Ip(t,a,!0);return o==a?{range:s}:{changes:{from:o,to:a},range:re.cursor(o,o<s.head?-1:1)}});return r.changes.empty?!1:(t.dispatch(i.update(r,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?Pe.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function Ip(t,e,n){if(t instanceof Pe)for(let i of t.state.facet(Pe.atomicRanges).map(r=>r(t)))i.between(e,e,(r,s)=>{r<e&&s>e&&(e=n?s:r)});return e}const q3=(t,e)=>f0(t,n=>{let i=n.from,{state:r}=t,s=r.doc.lineAt(i),o,a;if(!e&&i>s.from&&i<s.from+200&&!/[^ \t]/.test(o=s.text.slice(0,i-s.from))){if(o[o.length-1]=="	")return i-1;let l=hh(o,r.tabSize),c=l%Fl(r)||Fl(r);for(let u=0;u<c&&o[o.length-1-u]==" ";u++)i--;a=i}else a=Tn(s.text,i-s.from,e,e)+s.from,a==i&&s.number!=(e?r.doc.lines:1)?a+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(s.text.slice(a-s.from,i-s.from))&&(a=Tn(s.text,a-s.from,!1,!1)+s.from);return a}),iw=t=>q3(t,!1),lP=t=>q3(t,!0),Y3=(t,e)=>f0(t,n=>{let i=n.head,{state:r}=t,s=r.doc.lineAt(i),o=r.charCategorizer(i);for(let a=null;;){if(i==(e?s.to:s.from)){i==n.head&&s.number!=(e?r.doc.lines:1)&&(i+=e?1:-1);break}let l=Tn(s.text,i-s.from,e)+s.from,c=s.text.slice(Math.min(i,l)-s.from,Math.max(i,l)-s.from),u=o(c);if(a!=null&&u!=a)break;(c!=" "||i!=n.head)&&(a=u),i=l}return i}),cP=t=>Y3(t,!1),Uee=t=>Y3(t,!0),uP=t=>f0(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),Vee=t=>f0(t,e=>{let n=t.lineBlockAt(e.head).from;return e.head>n?n:Math.max(0,e.head-1)}),Hee=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:lt.of(["",""])},range:re.cursor(i.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},Wee=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>{if(!i.empty||i.from==0||i.from==t.doc.length)return{range:i};let r=i.from,s=t.doc.lineAt(r),o=r==s.from?r-1:Tn(s.text,r-s.from,!1)+s.from,a=r==s.to?r+1:Tn(s.text,r-s.from,!0)+s.from;return{changes:{from:o,to:a,insert:t.doc.slice(r,a).append(t.doc.slice(o,r))},range:re.cursor(a)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function h0(t){let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.from),s=t.doc.lineAt(i.to);if(!i.empty&&i.to==s.from&&(s=t.doc.lineAt(i.to-1)),n>=r.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(i)}else e.push({from:r.from,to:s.to,ranges:[i]});n=s.number+1}return e}function J3(t,e,n){if(t.readOnly)return!1;let i=[],r=[];for(let s of h0(t)){if(n?s.to==t.doc.length:s.from==0)continue;let o=t.doc.lineAt(n?s.to+1:s.from-1),a=o.length+1;if(n){i.push({from:s.to,to:o.to},{from:s.from,insert:o.text+t.lineBreak});for(let l of s.ranges)r.push(re.range(Math.min(t.doc.length,l.anchor+a),Math.min(t.doc.length,l.head+a)))}else{i.push({from:o.from,to:s.from},{from:s.to,insert:t.lineBreak+o.text});for(let l of s.ranges)r.push(re.range(l.anchor-a,l.head-a))}}return i.length?(e(t.update({changes:i,scrollIntoView:!0,selection:re.create(r,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const Gee=({state:t,dispatch:e})=>J3(t,e,!1),Kee=({state:t,dispatch:e})=>J3(t,e,!0);function Z3(t,e,n){if(t.readOnly)return!1;let i=[];for(let r of h0(t))n?i.push({from:r.from,insert:t.doc.slice(r.from,r.to)+t.lineBreak}):i.push({from:r.to,insert:t.lineBreak+t.doc.slice(r.from,r.to)});return e(t.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Xee=({state:t,dispatch:e})=>Z3(t,e,!1),qee=({state:t,dispatch:e})=>Z3(t,e,!0),Yee=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(h0(e).map(({from:r,to:s})=>(r>0?r--:s<e.doc.length&&s++,{from:r,to:s}))),i=Ah(e.selection,r=>t.moveVertically(r,!0)).map(n);return t.dispatch({changes:n,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function Jee(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=Qr(t).resolveInner(e),i=n.childBefore(e),r=n.childAfter(e),s;return i&&r&&i.to<=e&&r.from>=e&&(s=i.type.prop(nt.closedBy))&&s.indexOf(r.name)>-1&&t.doc.lineAt(i.to).from==t.doc.lineAt(r.from).from&&!/\S/.test(t.sliceDoc(i.to,r.from))?{from:i.to,to:r.from}:null}const dP=Zee(!1);function Zee(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let i=e.changeByRange(r=>{let{from:s,to:o}=r,a=e.doc.lineAt(s),l=!t&&s==o&&Jee(e,s);t&&(s=o=(o<=a.to?a:e.doc.lineAt(o)).to);let c=new zk(e,{simulateBreak:s,simulateDoubleBreak:!!l}),u=$Q(c,s);for(u==null&&(u=hh(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:s,to:o}=l:s>a.from&&s<a.from+100&&!/\S/.test(a.text.slice(0,s))&&(s=a.from);let d=["",M1(e,u)];return l&&d.push(M1(e,c.lineIndent(a.from,-1))),{changes:{from:s,to:o,insert:lt.of(d)},range:re.cursor(s+1+d[1].length)}});return n(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function Q3(t,e){let n=-1;return t.changeByRange(i=>{let r=[];for(let o=i.from;o<=i.to;){let a=t.doc.lineAt(o);a.number>n&&(i.empty||i.to>a.from)&&(e(a,r,i),n=a.number),o=a.to+1}let s=t.changes(r);return{changes:r,range:re.range(s.mapPos(i.anchor,1),s.mapPos(i.head,1))}})}const F1=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(Q3(t,(n,i)=>{i.push({from:n.from,insert:t.facet(Fk)})}),{userEvent:"input.indent"})),!0),fP=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(Q3(t,(n,i)=>{let r=/^\s*/.exec(n.text)[0];if(!r)return;let s=hh(r,t.tabSize),o=0,a=M1(t,Math.max(0,s-Fl(t)));for(;o<r.length&&o<a.length&&r.charCodeAt(o)==a.charCodeAt(o);)o++;i.push({from:n.from+o,to:n.from+r.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0);function kt(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var r=n[i];typeof r=="string"?t.setAttribute(i,r):r!=null&&(t[i]=r)}e++}for(;e<arguments.length;e++)eL(t,arguments[e]);return t}function eL(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)eL(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}const hP=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class th{constructor(e,n,i=0,r=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,r),this.bufferStart=i,this.normalize=s?a=>s(hP(a)):hP,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return qn(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=tS(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=Lr(e);let r=this.normalize(n);for(let s=0,o=i;;s++){let a=r.charCodeAt(s),l=this.match(a,o);if(s==r.length-1){if(l)return this.value=l,this;break}o==i&&s<n.length&&n.charCodeAt(s)==a&&o++}}}match(e,n){let i=null;for(let r=0;r<this.matches.length;r+=2){let s=this.matches[r],o=!1;this.query.charCodeAt(s)==e&&(s==this.query.length-1?i={from:this.matches[r+1],to:n+1}:(this.matches[r]++,o=!0)),o||(this.matches.splice(r,2),r-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:n,to:n+1}:this.matches.push(1,n)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}typeof Symbol<"u"&&(th.prototype[Symbol.iterator]=function(){return this});const tL={from:-1,to:-1,match:/.*/.exec("")},Jk="gm"+(/x/.unicode==null?"":"u");class nL{constructor(e,n,i,r=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=tL,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new iL(e,n,i,r,s);this.re=new RegExp(n,Jk+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.iter=e.iter();let o=e.lineAt(r);this.curLineStart=o.from,this.matchPos=qg(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let i=this.curLineStart+n.index,r=i+n[0].length;if(this.matchPos=qg(this.text,r+(i==r?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<r||i>this.value.to)&&(!this.test||this.test(i,r,n)))return this.value={from:i,to:r,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const rw=new WeakMap;class Gc{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,i){let r=rw.get(e);if(!r||r.from>=i||r.to<=n){let a=new Gc(n,e.sliceString(n,i));return rw.set(e,a),a}if(r.from==n&&r.to==i)return r;let{text:s,from:o}=r;return o>n&&(s=e.sliceString(n,o)+s,o=n),r.to<i&&(s+=e.sliceString(r.to,i)),rw.set(e,new Gc(o,s)),new Gc(n,s.slice(n-o,i-o))}}class iL{constructor(e,n,i,r,s){this.text=e,this.to=s,this.done=!1,this.value=tL,this.matchPos=qg(e,r),this.re=new RegExp(n,Jk+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.flat=Gc.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let i=this.flat.from+n.index,r=i+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,r,n)))return this.value={from:i,to:r,match:n},this.matchPos=qg(this.text,r+(i==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Gc.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(nL.prototype[Symbol.iterator]=iL.prototype[Symbol.iterator]=function(){return this});function Qee(t){try{return new RegExp(t,Jk),!0}catch{return!1}}function qg(t,e){if(e>=t.length)return e;let n=t.lineAt(e),i;for(;e<n.to&&(i=n.text.charCodeAt(e-n.from))>=56320&&i<57344;)e++;return e}function z1(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),n=kt("input",{class:"cm-textfield",name:"line",value:e}),i=kt("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),t.dispatch({effects:Yg.of(!1)}),t.focus()):s.keyCode==13&&(s.preventDefault(),r())},onsubmit:s=>{s.preventDefault(),r()}},kt("label",t.state.phrase("Go to line"),": ",n)," ",kt("button",{class:"cm-button",type:"submit"},t.state.phrase("go")));function r(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!s)return;let{state:o}=t,a=o.doc.lineAt(o.selection.main.head),[,l,c,u,d]=s,f=u?+u.slice(1):0,h=c?+c:a.number;if(c&&d){let w=h/100;l&&(w=w*(l=="-"?-1:1)+a.number/o.doc.lines),h=Math.round(o.doc.lines*w)}else c&&l&&(h=h*(l=="-"?-1:1)+a.number);let p=o.doc.line(Math.max(1,Math.min(o.doc.lines,h))),m=re.cursor(p.from+Math.max(0,Math.min(f,p.length)));t.dispatch({effects:[Yg.of(!1),Pe.scrollIntoView(m.from,{y:"center"})],selection:m}),t.focus()}return{dom:i}}const Yg=Ke.define(),pP=si.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(Yg)&&(t=n.value);return t},provide:t=>Ef.from(t,e=>e?z1:null)}),ete=t=>{let e=Cf(t,z1);if(!e){let n=[Yg.of(!0)];t.state.field(pP,!1)==null&&n.push(Ke.appendConfig.of([pP,tte])),t.dispatch({effects:n}),e=Cf(t,z1)}return e&&e.dom.querySelector("input").select(),!0},tte=Pe.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),nte=({state:t,dispatch:e})=>{let{selection:n}=t,i=re.create(n.ranges.map(r=>t.wordAt(r.head)||re.cursor(r.head)),n.mainIndex);return i.eq(n)?!1:(e(t.update({selection:i})),!0)};function ite(t,e){let{main:n,ranges:i}=t.selection,r=t.wordAt(n.head),s=r&&r.from==n.from&&r.to==n.to;for(let o=!1,a=new th(t.doc,e,i[i.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new th(t.doc,e,0,Math.max(0,i[i.length-1].from-1)),o=!0}else{if(o&&i.some(l=>l.from==a.value.from))continue;if(s){let l=t.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const rte=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return nte({state:t,dispatch:e});let i=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=i))return!1;let r=ite(t,i);return r?(e(t.update({selection:t.selection.addRange(re.range(r.from,r.to),!1),effects:Pe.scrollIntoView(r.to)})),!0):!1},Bu=Ae.define({combine(t){return Ia(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new hte(e),scrollToMatch:e=>Pe.scrollIntoView(e)})}});class rL{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||Qee(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new lte(this):new ote(this)}getCursor(e,n=0,i){let r=e.doc?e:Ye.create({doc:e});return i==null&&(i=r.doc.length),this.regexp?uc(this,r,n,i):cc(this,r,n,i)}}class sL{constructor(e){this.spec=e}}function cc(t,e,n,i){return new th(e.doc,t.unquoted,n,i,t.caseSensitive?void 0:r=>r.toLowerCase(),t.wholeWord?ste(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function ste(t,e){return(n,i,r,s)=>((s>n||s+r.length<i)&&(s=Math.max(0,n-2),r=t.sliceString(s,Math.min(t.length,i+2))),(e(Jg(r,n-s))!=On.Word||e(Zg(r,n-s))!=On.Word)&&(e(Zg(r,i-s))!=On.Word||e(Jg(r,i-s))!=On.Word))}class ote extends sL{constructor(e){super(e)}nextMatch(e,n,i){let r=cc(this.spec,e,i,e.doc.length).nextOverlapping();return r.done&&(r=cc(this.spec,e,0,n).nextOverlapping()),r.done?null:r.value}prevMatchInRange(e,n,i){for(let r=i;;){let s=Math.max(n,r-1e4-this.spec.unquoted.length),o=cc(this.spec,e,s,r),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(s==n)return null;r-=1e4}}prevMatch(e,n,i){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let i=cc(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=n)return null;r.push(i.value)}return r}highlight(e,n,i,r){let s=cc(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}function uc(t,e,n,i){return new nL(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?ate(e.charCategorizer(e.selection.main.head)):void 0},n,i)}function Jg(t,e){return t.slice(Tn(t,e,!1),e)}function Zg(t,e){return t.slice(e,Tn(t,e))}function ate(t){return(e,n,i)=>!i[0].length||(t(Jg(i.input,i.index))!=On.Word||t(Zg(i.input,i.index))!=On.Word)&&(t(Zg(i.input,i.index+i[0].length))!=On.Word||t(Jg(i.input,i.index+i[0].length))!=On.Word)}class lte extends sL{nextMatch(e,n,i){let r=uc(this.spec,e,i,e.doc.length).next();return r.done&&(r=uc(this.spec,e,0,n).next()),r.done?null:r.value}prevMatchInRange(e,n,i){for(let r=1;;r++){let s=Math.max(n,i-r*1e4),o=uc(this.spec,e,s,i),a=null;for(;!o.next().done;)a=o.value;if(a&&(s==n||a.from>s+10))return a;if(s==n)return null}}prevMatch(e,n,i){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(n,i)=>i=="$"?"$":i=="&"?e.match[0]:i!="0"&&+i<e.match.length?e.match[i]:n)}matchAll(e,n){let i=uc(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=n)return null;r.push(i.value)}return r}highlight(e,n,i,r){let s=uc(this.spec,e,Math.max(0,n-250),Math.min(i+250,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}const nh=Ke.define(),Zk=Ke.define(),ya=si.define({create(t){return new sw(U1(t).create(),null)},update(t,e){for(let n of e.effects)n.is(nh)?t=new sw(n.value.create(),t.panel):n.is(Zk)&&(t=new sw(t.query,n.value?Qk:null));return t},provide:t=>Ef.from(t,e=>e.panel)});class sw{constructor(e,n){this.query=e,this.panel=n}}const cte=Xe.mark({class:"cm-searchMatch"}),ute=Xe.mark({class:"cm-searchMatch cm-searchMatch-selected"}),dte=Dn.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(ya))}update(t){let e=t.state.field(ya);(e!=t.startState.field(ya)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return Xe.none;let{view:n}=this,i=new Nl;for(let r=0,s=n.visibleRanges,o=s.length;r<o;r++){let{from:a,to:l}=s[r];for(;r<o-1&&l>s[r+1].from-2*250;)l=s[++r].to;t.highlight(n.state,a,l,(c,u)=>{let d=n.state.selection.ranges.some(f=>f.from==c&&f.to==u);i.add(c,u,d?ute:cte)})}return i.finish()}},{decorations:t=>t.decorations});function Ph(t){return e=>{let n=e.state.field(ya,!1);return n&&n.query.spec.valid?t(e,n):uL(e)}}const mP=Ph((t,{query:e})=>{let{to:n}=t.state.selection.main,i=e.nextMatch(t.state,n,n);if(!i)return!1;let r=re.single(i.from,i.to),s=t.state.facet(Bu);return t.dispatch({selection:r,effects:[e_(t,i),s.scrollToMatch(r.main,t)],userEvent:"select.search"}),cL(t),!0}),gP=Ph((t,{query:e})=>{let{state:n}=t,{from:i}=n.selection.main,r=e.prevMatch(n,i,i);if(!r)return!1;let s=re.single(r.from,r.to),o=t.state.facet(Bu);return t.dispatch({selection:s,effects:[e_(t,r),o.scrollToMatch(s.main,t)],userEvent:"select.search"}),cL(t),!0}),oL=Ph((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:re.create(n.map(i=>re.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),fte=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:i,to:r}=n.main,s=[],o=0;for(let a=new th(t.doc,t.sliceDoc(i,r));!a.next().done;){if(s.length>1e3)return!1;a.value.from==i&&(o=s.length),s.push(re.range(a.value.from,a.value.to))}return e(t.update({selection:re.create(s,o),userEvent:"select.search.matches"})),!0},vP=Ph((t,{query:e})=>{let{state:n}=t,{from:i,to:r}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,i,i);if(!s)return!1;let o=[],a,l,c=[];if(s.from==i&&s.to==r&&(l=n.toText(e.getReplacement(s)),o.push({from:s.from,to:s.to,insert:l}),s=e.nextMatch(n,s.from,s.to),c.push(Pe.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(i).number)+"."))),s){let u=o.length==0||o[0].from>=s.to?0:s.to-s.from-l.length;a=re.single(s.from-u,s.to-u),c.push(e_(t,s)),c.push(n.facet(Bu).scrollToMatch(a.main,t))}return t.dispatch({changes:o,selection:a,effects:c,userEvent:"input.replace"}),!0}),aL=Ph((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(r=>{let{from:s,to:o}=r;return{from:s,to:o,insert:e.getReplacement(r)}});if(!n.length)return!1;let i=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:Pe.announce.of(i),userEvent:"input.replace.all"}),!0});function Qk(t){return t.state.facet(Bu).createPanel(t)}function U1(t,e){var n,i,r,s,o;let a=t.selection.main,l=a.empty||a.to>a.from+100?"":t.sliceDoc(a.from,a.to);if(e&&!l)return e;let c=t.facet(Bu);return new rL({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:c.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(i=e==null?void 0:e.caseSensitive)!==null&&i!==void 0?i:c.caseSensitive,literal:(r=e==null?void 0:e.literal)!==null&&r!==void 0?r:c.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:c.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:c.wholeWord})}function lL(t){let e=Cf(t,Qk);return e&&e.dom.querySelector("[main-field]")}function cL(t){let e=lL(t);e&&e==t.root.activeElement&&e.select()}const uL=t=>{let e=t.state.field(ya,!1);if(e&&e.panel){let n=lL(t);if(n&&n!=t.root.activeElement){let i=U1(t.state,e.query.spec);i.valid&&t.dispatch({effects:nh.of(i)}),n.focus(),n.select()}}else t.dispatch({effects:[Zk.of(!0),e?nh.of(U1(t.state,e.query.spec)):Ke.appendConfig.of(mte)]});return!0},dL=t=>{let e=t.state.field(ya,!1);if(!e||!e.panel)return!1;let n=Cf(t,Qk);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:Zk.of(!1)}),!0};class hte{constructor(e){this.view=e;let n=this.query=e.state.field(ya).query.spec;this.commit=this.commit.bind(this),this.searchField=kt("input",{value:n.search,placeholder:Ti(e,"Find"),"aria-label":Ti(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=kt("input",{value:n.replace,placeholder:Ti(e,"Replace"),"aria-label":Ti(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=kt("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=kt("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=kt("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function i(r,s,o){return kt("button",{class:"cm-button",name:r,onclick:s,type:"button"},o)}this.dom=kt("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,i("next",()=>mP(e),[Ti(e,"next")]),i("prev",()=>gP(e),[Ti(e,"previous")]),i("select",()=>oL(e),[Ti(e,"all")]),kt("label",null,[this.caseField,Ti(e,"match case")]),kt("label",null,[this.reField,Ti(e,"regexp")]),kt("label",null,[this.wordField,Ti(e,"by word")]),...e.state.readOnly?[]:[kt("br"),this.replaceField,i("replace",()=>vP(e),[Ti(e,"replace")]),i("replaceAll",()=>aL(e),[Ti(e,"replace all")])],kt("button",{name:"close",onclick:()=>dL(e),"aria-label":Ti(e,"close"),type:"button"},[""])])}commit(){let e=new rL({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:nh.of(e)}))}keydown(e){zF(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?gP:mP)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),vP(this.view))}update(e){for(let n of e.transactions)for(let i of n.effects)i.is(nh)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Bu).top}}function Ti(t,e){return t.state.phrase(e)}const Lp=30,Bp=/[\s\.,:;?!]/;function e_(t,{from:e,to:n}){let i=t.state.doc.lineAt(e),r=t.state.doc.lineAt(n).to,s=Math.max(i.from,e-Lp),o=Math.min(r,n+Lp),a=t.state.sliceDoc(s,o);if(s!=i.from){for(let l=0;l<Lp;l++)if(!Bp.test(a[l+1])&&Bp.test(a[l])){a=a.slice(l);break}}if(o!=r){for(let l=a.length-1;l>a.length-Lp;l--)if(!Bp.test(a[l-1])&&Bp.test(a[l])){a=a.slice(0,l);break}}return Pe.announce.of(`${t.state.phrase("current match")}. ${a} ${t.state.phrase("on line")} ${i.number}.`)}const pte=Pe.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),mte=[ya,dh.low(dte),pte];class gte{constructor(e,n,i){this.state=e,this.pos=n,this.explicit=i,this.abortListeners=[]}tokenBefore(e){let n=Qr(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),i=Math.max(n.from,this.pos-250),r=n.text.slice(i-n.from,this.pos-n.from),s=r.search(fL(e,!1));return s<0?null:{from:i+s,to:this.pos,text:r.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,n){e=="abort"&&this.abortListeners&&this.abortListeners.push(n)}}function yP(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function vte(t){let e=Object.create(null),n=Object.create(null);for(let{label:r}of t){e[r[0]]=!0;for(let s=1;s<r.length;s++)n[r[s]]=!0}let i=yP(e)+yP(n)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function yte(t){let e=t.map(r=>typeof r=="string"?{label:r}:r),[n,i]=e.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:vte(e);return r=>{let s=r.matchBefore(i);return s||r.explicit?{from:s?s.from:r.pos,options:e,validFor:n}:null}}class wP{constructor(e,n,i,r){this.completion=e,this.source=n,this.match=i,this.score=r}}function Kc(t){return t.selection.main.from}function fL(t,e){var n;let{source:i}=t,r=e&&i[0]!="^",s=i[i.length-1]!="$";return!r&&!s?t:new RegExp(`${r?"^":""}(?:${i})${s?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const wte=So.define();function bte(t,e,n,i){let{main:r}=t.selection,s=n-r.from,o=i-r.from;return Object.assign(Object.assign({},t.changeByRange(a=>a!=r&&n!=i&&t.sliceDoc(a.from+s,a.from+o)!=t.sliceDoc(n,i)?{range:a}:{changes:{from:a.from+s,to:i==r.from?a.to:a.from+o,insert:e},range:re.cursor(a.from+s+e.length)})),{scrollIntoView:!0,userEvent:"input.complete"})}const bP=new WeakMap;function xte(t){if(!Array.isArray(t))return t;let e=bP.get(t);return e||bP.set(t,e=yte(t)),e}const hL=Ke.define(),t_=Ke.define();class Ste{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let i=qn(e,n),r=Lr(i);this.chars.push(i);let s=e.slice(n,n+r),o=s.toUpperCase();this.folded.push(qn(o==s?s.toLowerCase():o,0)),n+=r}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,!0}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return!1;let{chars:n,folded:i,any:r,precise:s,byWord:o}=this;if(n.length==1){let y=qn(e,0),x=Lr(y),k=x==e.length?0:-100;if(y!=n[0])if(y==i[0])k+=-200;else return!1;return this.ret(k,[0,x])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=n.length,c=0;if(a<0){for(let y=0,x=Math.min(e.length,200);y<x&&c<l;){let k=qn(e,y);(k==n[c]||k==i[c])&&(r[c++]=y),y+=Lr(k)}if(c<l)return!1}let u=0,d=0,f=!1,h=0,p=-1,m=-1,w=/[a-z]/.test(e),v=!0;for(let y=0,x=Math.min(e.length,200),k=0;y<x&&d<l;){let _=qn(e,y);a<0&&(u<l&&_==n[u]&&(s[u++]=y),h<l&&(_==n[h]||_==i[h]?(h==0&&(p=y),m=y+1,h++):h=0));let P,A=_<255?_>=48&&_<=57||_>=97&&_<=122?2:_>=65&&_<=90?1:0:(P=tS(_))!=P.toLowerCase()?1:P!=P.toUpperCase()?2:0;(!y||A==1&&w||k==0&&A!=0)&&(n[d]==_||i[d]==_&&(f=!0)?o[d++]=y:o.length&&(v=!1)),k=A,y+=Lr(_)}return d==l&&o[0]==0&&v?this.result(-100+(f?-200:0),o,e):h==l&&p==0?this.ret(-200-e.length+(m==e.length?0:-100),[0,m]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):h==l?this.ret(-900-e.length,[p,m]):d==l?this.result(-100+(f?-200:0)+-700+(v?0:-1100),o,e):n.length==2?!1:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,n,i){let r=[],s=0;for(let o of n){let a=o+(this.astral?Lr(qn(i,o)):1);s&&r[s-1]==o?r[s-1]=a:(r[s++]=o,r[s++]=a)}return this.ret(e-i.length,r)}}const Ss=Ae.define({combine(t){return Ia(t,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:kte,compareCompletions:(e,n)=>e.label.localeCompare(n.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>i=>xP(e(i),n(i)),optionClass:(e,n)=>i=>xP(e(i),n(i)),addToOptions:(e,n)=>e.concat(n)})}});function xP(t,e){return t?e?t+" "+e:t:e}function kte(t,e,n,i,r,s){let o=t.textDirection==Ot.RTL,a=o,l=!1,c="top",u,d,f=e.left-r.left,h=r.right-e.right,p=i.right-i.left,m=i.bottom-i.top;if(a&&f<Math.min(p,h)?a=!1:!a&&h<Math.min(p,f)&&(a=!0),p<=(a?f:h))u=Math.max(r.top,Math.min(n.top,r.bottom-m))-e.top,d=Math.min(400,a?f:h);else{l=!0,d=Math.min(400,(o?e.right:r.right-e.left)-30);let y=r.bottom-e.bottom;y>=m||y>e.top?u=n.bottom-e.top:(c="bottom",u=e.bottom-n.top)}let w=(e.bottom-e.top)/s.offsetHeight,v=(e.right-e.left)/s.offsetWidth;return{style:`${c}: ${u/w}px; max-width: ${d/v}px`,class:"cm-completionInfo-"+(l?o?"left-narrow":"right-narrow":a?"left":"right")}}function _te(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),n.type&&i.classList.add(...n.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(n,i,r,s){let o=document.createElement("span");o.className="cm-completionLabel";let a=n.displayLabel||n.label,l=0;for(let c=0;c<s.length;){let u=s[c++],d=s[c++];u>l&&o.appendChild(document.createTextNode(a.slice(l,u)));let f=o.appendChild(document.createElement("span"));f.appendChild(document.createTextNode(a.slice(u,d))),f.className="cm-completionMatchedText",l=d}return l<a.length&&o.appendChild(document.createTextNode(a.slice(l))),o},position:50},{render(n){if(!n.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=n.detail,i},position:80}),e.sort((n,i)=>n.position-i.position).map(n=>n.render)}function ow(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let r=Math.floor(e/n);return{from:r*n,to:(r+1)*n}}let i=Math.floor((t-e)/n);return{from:t-(i+1)*n,to:t-i*n}}class Cte{constructor(e,n,i){this.view=e,this.stateField=n,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let r=e.state.field(n),{options:s,selected:o}=r.open,a=e.state.facet(Ss);this.optionContent=_te(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=ow(s.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{let{options:c}=e.state.field(n).open;for(let u=l.target,d;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(d=/-(\d+)$/.exec(u.id))&&+d[1]<c.length){this.applyCompletion(e,c[+d[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let c=e.state.field(this.stateField,!1);c&&c.tooltip&&e.state.facet(Ss).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:t_.of(null)})}),this.showOptions(s,r.id)}mount(){this.updateSel()}showOptions(e,n){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,n,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var n;let i=e.state.field(this.stateField),r=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=r){let{options:s,selected:o,disabled:a}=i.open;(!r.open||r.open.options!=s)&&(this.range=ow(s.length,o,e.state.facet(Ss).maxRenderedOptions),this.showOptions(s,i.id)),this.updateSel(),a!=((n=r.open)===null||n===void 0?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of n.split(" "))i&&this.dom.classList.add(i);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=ow(n.options.length,n.selected,this.view.state.facet(Ss).maxRenderedOptions),this.showOptions(n.options,e.id)),this.updateSelectedOption(n.selected)){this.destroyInfo();let{completion:i}=n.options[n.selected],{info:r}=i;if(!r)return;let s=typeof r=="string"?document.createTextNode(r):r(i);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,i)}).catch(o=>Hr(this.view.state,o,"completion info")):this.addInfoPane(s,i)}}addInfoPane(e,n){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:r,destroy:s}=e;i.appendChild(r),this.infoDestroy=s||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let i=this.list.firstChild,r=this.range.from;i;i=i.nextSibling,r++)i.nodeName!="LI"||!i.id?r--:r==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),n=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return n&&Ate(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.defaultView||window;s={left:0,top:0,right:o.innerWidth,bottom:o.innerHeight}}return r.top>Math.min(s.bottom,n.bottom)-10||r.bottom<Math.max(s.top,n.top)+10?null:this.view.state.facet(Ss).positionInfo(this.view,n,r,i,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,i){const r=document.createElement("ul");r.id=n,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions"));let s=null;for(let o=i.from;o<i.to;o++){let{completion:a,match:l}=e[o],{section:c}=a;if(c){let f=typeof c=="string"?c:c.name;if(f!=s&&(o>i.from||i.from==0))if(s=f,typeof c!="string"&&c.header)r.appendChild(c.header(c));else{let h=r.appendChild(document.createElement("completion-section"));h.textContent=f}}const u=r.appendChild(document.createElement("li"));u.id=n+"-"+o,u.setAttribute("role","option");let d=this.optionClass(a);d&&(u.className=d);for(let f of this.optionContent){let h=f(a,this.view.state,this.view,l);h&&u.appendChild(h)}}return i.from&&r.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function Ete(t,e){return n=>new Cte(n,t,e)}function Ate(t,e){let n=t.getBoundingClientRect(),i=e.getBoundingClientRect(),r=n.height/t.offsetHeight;i.top<n.top?t.scrollTop-=(n.top-i.top)/r:i.bottom>n.bottom&&(t.scrollTop+=(i.bottom-n.bottom)/r)}function SP(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function Pte(t,e){let n=[],i=null,r=l=>{n.push(l);let{section:c}=l.completion;if(c){i||(i=[]);let u=typeof c=="string"?c:c.name;i.some(d=>d.name==u)||i.push(typeof c=="string"?{name:u}:c)}};for(let l of t)if(l.hasResult()){let c=l.result.getMatch;if(l.result.filter===!1)for(let u of l.result.options)r(new wP(u,l.source,c?c(u):[],1e9-n.length));else{let u=new Ste(e.sliceDoc(l.from,l.to));for(let d of l.result.options)if(u.match(d.label)){let f=d.displayLabel?c?c(d,u.matched):[]:u.matched;r(new wP(d,l.source,f,u.score+(d.boost||0)))}}}if(i){let l=Object.create(null),c=0,u=(d,f)=>{var h,p;return((h=d.rank)!==null&&h!==void 0?h:1e9)-((p=f.rank)!==null&&p!==void 0?p:1e9)||(d.name<f.name?-1:1)};for(let d of i.sort(u))c-=1e5,l[d.name]=c;for(let d of n){let{section:f}=d.completion;f&&(d.score+=l[typeof f=="string"?f:f.name])}}let s=[],o=null,a=e.facet(Ss).compareCompletions;for(let l of n.sort((c,u)=>u.score-c.score||a(c.completion,u.completion))){let c=l.completion;!o||o.label!=c.label||o.detail!=c.detail||o.type!=null&&c.type!=null&&o.type!=c.type||o.apply!=c.apply||o.boost!=c.boost?s.push(l):SP(l.completion)>SP(o)&&(s[s.length-1]=l),o=l.completion}return s}class $c{constructor(e,n,i,r,s,o){this.options=e,this.attrs=n,this.tooltip=i,this.timestamp=r,this.selected=s,this.disabled=o}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new $c(this.options,kP(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,i,r,s){let o=Pte(e,n);if(!o.length)return r&&e.some(l=>l.state==1)?new $c(r.options,r.attrs,r.tooltip,r.timestamp,r.selected,!0):null;let a=n.facet(Ss).selectOnOpen?0:-1;if(r&&r.selected!=a&&r.selected!=-1){let l=r.options[r.selected].completion;for(let c=0;c<o.length;c++)if(o[c].completion==l){a=c;break}}return new $c(o,kP(i,a),{pos:e.reduce((l,c)=>c.hasResult()?Math.min(l,c.from):l,1e8),create:Dte,above:s.aboveCursor},r?r.timestamp:Date.now(),a,!1)}map(e){return new $c(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class Qg{constructor(e,n,i){this.active=e,this.id=n,this.open=i}static start(){return new Qg(Ote,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,i=n.facet(Ss),s=(i.override||n.languageDataAt("autocomplete",Kc(n)).map(xte)).map(a=>(this.active.find(c=>c.source==a)||new ji(a,this.active.some(c=>c.state!=0)?1:0)).update(e,i));s.length==this.active.length&&s.every((a,l)=>a==this.active[l])&&(s=this.active);let o=this.open;o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(a=>a.hasResult()&&e.changes.touchesRange(a.from,a.to))||!$te(s,this.active)?o=$c.build(s,n,this.id,o,i):o&&o.disabled&&!s.some(a=>a.state==1)&&(o=null),!o&&s.every(a=>a.state!=1)&&s.some(a=>a.hasResult())&&(s=s.map(a=>a.hasResult()?new ji(a.source,0):a));for(let a of e.effects)a.is(pL)&&(o=o&&o.setSelected(a.value,this.id));return s==this.active&&o==this.open?this:new Qg(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:Tte}}function $te(t,e){if(t==e)return!0;for(let n=0,i=0;;){for(;n<t.length&&!t[n].hasResult;)n++;for(;i<e.length&&!e[i].hasResult;)i++;let r=n==t.length,s=i==e.length;if(r||s)return r==s;if(t[n++].result!=e[i++].result)return!1}}const Tte={"aria-autocomplete":"list"};function kP(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const Ote=[];function Nte(t){return t.isUserEvent("input.type")?"input":t.isUserEvent("delete.backward")?"delete":null}class ji{constructor(e,n,i=-1){this.source=e,this.state=n,this.explicitPos=i}hasResult(){return!1}update(e,n){let i=Nte(e),r=this;i?r=r.handleUserEvent(e,i,n):e.docChanged?r=r.handleChange(e):e.selection&&r.state!=0&&(r=new ji(r.source,0));for(let s of e.effects)if(s.is(hL))r=new ji(r.source,1,s.value?Kc(e.state):-1);else if(s.is(t_))r=new ji(r.source,0);else if(s.is(Mte))for(let o of s.value)o.source==r.source&&(r=o);return r}handleUserEvent(e,n,i){return n=="delete"||!i.activateOnTyping?this.map(e.changes):new ji(this.source,1)}handleChange(e){return e.changes.touchesRange(Kc(e.startState))?new ji(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new ji(this.source,this.state,e.mapPos(this.explicitPos))}}class Xd extends ji{constructor(e,n,i,r,s){super(e,2,n),this.result=i,this.from=r,this.to=s}hasResult(){return!0}handleUserEvent(e,n,i){var r;let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=Kc(e.state);if((this.explicitPos<0?a<=s:a<this.from)||a>o||n=="delete"&&Kc(e.startState)==this.from)return new ji(this.source,n=="input"&&i.activateOnTyping?1:0);let l=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos),c;return Rte(this.result.validFor,e.state,s,o)?new Xd(this.source,l,this.result,s,o):this.result.update&&(c=this.result.update(this.result,s,o,new gte(e.state,a,l>=0)))?new Xd(this.source,l,c,c.from,(r=c.to)!==null&&r!==void 0?r:Kc(e.state)):new ji(this.source,1,l)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new ji(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new Xd(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}function Rte(t,e,n,i){if(!t)return!1;let r=e.sliceDoc(n,i);return typeof t=="function"?t(r,n,i,e):fL(t,!0).test(r)}const Mte=Ke.define({map(t,e){return t.map(n=>n.map(e))}}),pL=Ke.define(),ju=si.define({create(){return Qg.start()},update(t,e){return t.update(e)},provide:t=>[hS.from(t,e=>e.tooltip),Pe.contentAttributes.from(t,e=>e.attrs)]});function mL(t,e){const n=e.completion.apply||e.completion.label;let i=t.state.field(ju).active.find(r=>r.source==e.source);return i instanceof Xd?(typeof n=="string"?t.dispatch(Object.assign(Object.assign({},bte(t.state,n,i.from,i.to)),{annotations:wte.of(e.completion)})):n(t,e.completion,i.from,i.to),!0):!1}const Dte=Ete(ju,mL);function jp(t,e="option"){return n=>{let i=n.state.field(ju,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<n.state.facet(Ss).interactionDelay)return!1;let r=1,s;e=="page"&&(s=w7(n,i.open.tooltip))&&(r=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=i.open.options,a=i.open.selected>-1?i.open.selected+r*(t?1:-1):t?0:o-1;return a<0?a=e=="page"?0:o-1:a>=o&&(a=e=="page"?o-1:0),n.dispatch({effects:pL.of(a)}),!0}}const _P=t=>{let e=t.state.field(ju,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(Ss).interactionDelay?!1:mL(t,e.open.options[e.open.selected])},Ite=t=>t.state.field(ju,!1)?(t.dispatch({effects:hL.of(!0)}),!0):!1,Lte=t=>{let e=t.state.field(ju,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:t_.of(null)}),!0)},gL={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},vL=new class extends Ol{};vL.startSide=1;vL.endSide=-1;const aw="()[]{}<>";function Bte(t){for(let e=0;e<aw.length;e+=2)if(aw.charCodeAt(e)==t)return aw.charAt(e+1);return tS(t<128?t:t+1)}function jte(t,e){return t.languageDataAt("closeBrackets",e)[0]||gL}const Fte=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let i=jte(t,t.selection.main.head).brackets||gL.brackets,r=null,s=t.changeByRange(o=>{if(o.empty){let a=Ute(t.doc,o.head);for(let l of i)if(l==a&&zte(t.doc,o.head)==Bte(qn(l,0)))return{changes:{from:o.head-l.length,to:o.head+l.length},range:re.cursor(o.head-l.length)}}return{range:r=o}});return r||e(t.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!r};function zte(t,e){let n=t.sliceString(e,e+2);return n.slice(0,Lr(qn(n,0)))}function Ute(t,e){let n=t.sliceString(e-2,e);return Lr(qn(n,0))==n.length?n:n.slice(1)}class Vte{constructor(e,n,i){this.from=e,this.to=n,this.diagnostic=i}}class rl{constructor(e,n,i){this.diagnostics=e,this.panel=n,this.selected=i}static init(e,n,i){let r=e,s=i.facet(dl).markerFilter;s&&(r=s(r));let o=Xe.set(r.map(a=>a.from==a.to||a.from==a.to-1&&i.doc.lineAt(a.from).to==a.from?Xe.widget({widget:new Qte(a),diagnostic:a}).range(a.from):Xe.mark({attributes:{class:"cm-lintRange cm-lintRange-"+a.severity+(a.markClass?" "+a.markClass:"")},diagnostic:a}).range(a.from,a.to)),!0);return new rl(o,n,Cu(o))}}function Cu(t,e=null,n=0){let i=null;return t.between(n,1e9,(r,s,{spec:o})=>{if(!(e&&o.diagnostic!=e))return i=new Vte(r,s,o.diagnostic),!1}),i}function Hte(t,e){let n=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(i=>i.is(n_))||t.changes.touchesRange(n.from,n.to))}function yL(t,e){return t.field(Vi,!1)?e:e.concat(Ke.appendConfig.of(SL))}function Wte(t,e){return{effects:yL(t,[n_.of(e)])}}const n_=Ke.define(),i_=Ke.define(),wL=Ke.define(),Vi=si.define({create(){return new rl(Xe.none,null,null)},update(t,e){if(e.docChanged){let n=t.diagnostics.map(e.changes),i=null;if(t.selected){let r=e.changes.mapPos(t.selected.from,1);i=Cu(n,t.selected.diagnostic,r)||Cu(n,null,r)}t=new rl(n,t.panel,i)}for(let n of e.effects)n.is(n_)?t=rl.init(n.value,t.panel,e.state):n.is(i_)?t=new rl(t.diagnostics,n.value?p0.open:null,t.selected):n.is(wL)&&(t=new rl(t.diagnostics,t.panel,n.value));return t},provide:t=>[Ef.from(t,e=>e.panel),Pe.decorations.from(t,e=>e.diagnostics)]}),Gte=Xe.mark({class:"cm-lintRange cm-lintRange-active"});function Kte(t,e,n){let{diagnostics:i}=t.state.field(Vi),r=[],s=2e8,o=0;i.between(e-(n<0?1:0),e+(n>0?1:0),(l,c,{spec:u})=>{e>=l&&e<=c&&(l==c||(e>l||n>0)&&(e<c||n<0))&&(r.push(u.diagnostic),s=Math.min(l,s),o=Math.max(c,o))});let a=t.state.facet(dl).tooltipFilter;return a&&(r=a(r)),r.length?{pos:s,end:o,above:t.state.doc.lineAt(s).to<o,create(){return{dom:Xte(t,r)}}}:null}function Xte(t,e){return kt("ul",{class:"cm-tooltip-lint"},e.map(n=>xL(t,n,!1)))}const qte=t=>{let e=t.state.field(Vi,!1);(!e||!e.panel)&&t.dispatch({effects:yL(t.state,[i_.of(!0)])});let n=Cf(t,p0.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},CP=t=>{let e=t.state.field(Vi,!1);return!e||!e.panel?!1:(t.dispatch({effects:i_.of(!1)}),!0)},Yte=t=>{let e=t.state.field(Vi,!1);if(!e)return!1;let n=t.state.selection.main,i=e.diagnostics.iter(n.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==n.from&&i.to==n.to)?!1:(t.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},Jte=Dn.fromClass(class{constructor(t){this.view=t,this.timeout=-1,this.set=!0;let{delay:e}=t.state.facet(dl);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){let t=Date.now();if(t<this.lintTime-10)this.timeout=setTimeout(this.run,this.lintTime-t);else{this.set=!1;let{state:e}=this.view,{sources:n}=e.facet(dl);Promise.all(n.map(i=>Promise.resolve(i(this.view)))).then(i=>{let r=i.reduce((s,o)=>s.concat(o));this.view.state.doc==e.doc&&this.view.dispatch(Wte(this.view.state,r))},i=>{Hr(this.view.state,i)})}}update(t){let e=t.state.facet(dl);(t.docChanged||e!=t.startState.facet(dl)||e.needsRefresh&&e.needsRefresh(t))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),dl=Ae.define({combine(t){return Object.assign({sources:t.map(e=>e.source)},Ia(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null},{needsRefresh:(e,n)=>e?n?i=>e(i)||n(i):e:n}))}});function Zte(t,e={}){return[dl.of({source:t,config:e}),Jte,SL]}function bL(t){let e=[];if(t)e:for(let{name:n}of t){for(let i=0;i<n.length;i++){let r=n[i];if(/[a-zA-Z]/.test(r)&&!e.some(s=>s.toLowerCase()==r.toLowerCase())){e.push(r);continue e}}e.push("")}return e}function xL(t,e,n){var i;let r=n?bL(e.actions):[];return kt("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},kt("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),(i=e.actions)===null||i===void 0?void 0:i.map((s,o)=>{let a=!1,l=f=>{if(f.preventDefault(),a)return;a=!0;let h=Cu(t.state.field(Vi).diagnostics,e);h&&s.apply(t,h.from,h.to)},{name:c}=s,u=r[o]?c.indexOf(r[o]):-1,d=u<0?c:[c.slice(0,u),kt("u",c.slice(u,u+1)),c.slice(u+1)];return kt("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${c}${u<0?"":` (access key "${r[o]})"`}.`},d)}),e.source&&kt("div",{class:"cm-diagnosticSource"},e.source))}class Qte extends La{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return kt("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class EP{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=xL(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class p0{constructor(e){this.view=e,this.items=[];let n=r=>{if(r.keyCode==27)CP(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=bL(s.actions);for(let a=0;a<o.length;a++)if(o[a].toUpperCase().charCodeAt(0)==r.keyCode){let l=Cu(this.view.state.field(Vi).diagnostics,s);l&&s.actions[a].apply(e,l.from,l.to)}}else return;r.preventDefault()},i=r=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(r.target)&&this.moveSelection(s)};this.list=kt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:i}),this.dom=kt("div",{class:"cm-panel-lint"},this.list,kt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>CP(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(Vi).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field(Vi),i=0,r=!1,s=null;for(e.between(0,this.view.state.doc.length,(o,a,{spec:l})=>{let c=-1,u;for(let d=i;d<this.items.length;d++)if(this.items[d].diagnostic==l.diagnostic){c=d;break}c<0?(u=new EP(this.view,l.diagnostic),this.items.splice(i,0,u),r=!0):(u=this.items[c],c>i&&(this.items.splice(i,c-i),r=!0)),n&&u.diagnostic==n.diagnostic?u.dom.hasAttribute("aria-selected")||(u.dom.setAttribute("aria-selected","true"),s=u):u.dom.hasAttribute("aria-selected")&&u.dom.removeAttribute("aria-selected"),i++});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new EP(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:o,panel:a})=>{let l=a.height/this.list.offsetHeight;o.top<a.top?this.list.scrollTop-=(a.top-o.top)/l:o.bottom>a.bottom&&(this.list.scrollTop+=(o.bottom-a.bottom)/l)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function n(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)n();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field(Vi),i=Cu(n.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:wL.of(i)})}static open(e){return new p0(e)}}function ene(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function Fp(t){return ene(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const tne=Pe.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Fp("#d11")},".cm-lintRange-warning":{backgroundImage:Fp("orange")},".cm-lintRange-info":{backgroundImage:Fp("#999")},".cm-lintRange-hint":{backgroundImage:Fp("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}}),SL=[Vi,Pe.decorations.compute([Vi],t=>{let{selected:e,panel:n}=t.field(Vi);return!e||!n||e.from==e.to?Xe.none:Xe.set([Gte.range(e.from,e.to)])}),y7(Kte,{hideOn:Hte}),tne],kL=t=>e=>{const n=t==="down";let i=e.state.selection;for(const r of i.ranges)i=i.addRange(e.moveVertically(r,n));return e.dispatch({selection:i}),!0},nne=kL("up"),ine=kL("down"),rne=t=>{let e=null;for(const n of t.state.selection.ranges)if(!n.empty)for(let i=n.from;i<=n.to;){const r=t.state.doc.lineAt(i),s=Math.min(r.to,n.to);e?e=e.addRange(re.range(s,s)):e=re.single(s),i=r.to+1}return e?(t.dispatch({selection:e}),!0):!1},sne=[{key:"Ctrl-Space",run:Ite},{key:"Escape",run:Lte},{key:"ArrowDown",run:jp(!0)},{key:"ArrowUp",run:jp(!1)},{key:"PageDown",run:jp(!0,"page")},{key:"PageUp",run:jp(!1,"page")},{key:"Enter",run:_P},{key:"Tab",run:_P},{key:"Mod-f",run:uL,scope:"editor search-panel"},{key:"Escape",run:dL,scope:"editor search-panel"},{key:"Alt-Enter",run:oL,scope:"editor search-panel"},{key:"Mod-Alt-Enter",run:aL,scope:"editor search-panel"},{key:"Ctrl-g",run:ete},{key:"Mod-d",run:rte,preventDefault:!0},{key:"Shift-Mod-l",run:fte},{key:"Enter",run:dP,shift:dP},{key:"ArrowLeft",run:HA,shift:YA,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:Tee,shift:Iee},{key:"ArrowRight",run:WA,shift:JA,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:Oee,shift:Lee},{key:"ArrowUp",run:GA,shift:ZA,preventDefault:!0},{key:"ArrowDown",run:KA,shift:QA,preventDefault:!0},{key:"Home",run:qA,shift:iP},{mac:"Cmd-ArrowLeft",run:qA,shift:iP},{key:"Mod-Home",run:rP,shift:oP},{mac:"Cmd-ArrowUp",run:rP,shift:oP},{key:"PageUp",run:tw,shift:eP},{mac:"Ctrl-ArrowUp",run:tw,shift:eP},{key:"PageDown",run:nw,shift:tP},{mac:"Ctrl-ArrowDown",run:nw,shift:tP},{key:"End",run:XA,shift:nP},{mac:"Cmd-ArrowRight",run:XA,shift:nP},{key:"Mod-Alt-ArrowUp",linux:"Shift-Alt-ArrowUp",run:nne,preventDefault:!0},{key:"Mod-Alt-ArrowDown",linux:"Shift-Alt-ArrowDown",run:ine,preventDefault:!0},{key:"Shift-Alt-i",run:rne},{key:"Mod-End",run:sP,shift:aP},{mac:"Cmd-ArrowDown",run:sP,shift:aP},{key:"Mod-a",run:Fee},{key:"Backspace",run:Fte},{key:"Backspace",run:iw,shift:iw},{key:"Delete",run:lP},{key:"Mod-Backspace",mac:"Alt-Backspace",run:cP},{key:"Mod-Delete",mac:"Alt-Delete",run:Uee},{mac:"Mod-Backspace",run:Vee},{mac:"Mod-Delete",run:uP},{mac:"Ctrl-b",run:HA,shift:YA,preventDefault:!0},{mac:"Ctrl-f",run:WA,shift:JA},{mac:"Ctrl-p",run:GA,shift:ZA},{mac:"Ctrl-n",run:KA,shift:QA},{mac:"Ctrl-a",run:Nee,shift:Bee},{mac:"Ctrl-e",run:Ree,shift:jee},{mac:"Ctrl-d",run:lP},{mac:"Ctrl-h",run:iw},{mac:"Ctrl-k",run:uP},{mac:"Ctrl-Alt-h",run:cP},{mac:"Ctrl-o",run:Hee},{mac:"Ctrl-t",run:Wee},{mac:"Ctrl-v",run:nw},{mac:"Alt-v",run:tw},{key:"Shift-Mod-k",run:Yee},{key:"Alt-ArrowDown",run:Kee},{key:"Alt-ArrowUp",run:Gee},{win:"Shift-Alt-ArrowDown",mac:"Shift-Alt-ArrowDown",run:qee},{win:"Shift-Alt-ArrowUp",mac:"Shift-Alt-ArrowUp",run:Xee},{key:"Mod-l",run:zee,preventDefault:!0},{key:"Shift-Mod-\\",run:Dee},{key:"Tab",run:F1,shift:fP,preventDefault:!0},{key:"Mod-[",run:fP},{key:"Mod-]",run:F1},{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:VQ},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:HQ},{key:"Mod-k Mod-0",run:WQ},{key:"Mod-k Mod-j",run:GQ},{key:"Mod-k Mod-c",run:pee},{key:"Mod-k Mod-u",run:mee},{key:"Mod-/",run:fee},{key:"Shift-Alt-a",run:gee},{key:"Mod-z",run:L3,preventDefault:!0},{key:"Mod-y",run:j1,preventDefault:!0},{key:"Mod-Shift-z",run:j1,preventDefault:!0},{key:"Mod-u",run:kee,preventDefault:!0},{key:"Mod-Shift-m",run:qte},{key:"F8",run:Yte}],V1=Ce(0);function one(){const t=St(),e=Vt(V1);return b.jsxs("div",{className:"flex items-center justify-between border-t border-stone-600 bg-stone-800 px-3 font-sans text-xs tracking-wider text-stone-400",children:[b.jsx(hH,{}),b.jsx("span",{className:He(e>0&&"font-semibold text-red-400"),children:t("editor.lintSummary",e)})]})}const ci={character:Ie.character,comment:Ie.comment,"data-directive":_n.define(),identifier:Ie.variableName,instruction:_n.define(),label:Ie.labelName,number:Ie.number,operator:Ie.operator,offset:_n.define(),"ptr-size":_n.define(),punctuation:Ie.punctuation,register:_n.define(),special:_n.define(),string:Ie.string,unassigned:_n.define()},ane=Wk.define({name:"vonsim",token:t=>{if(t.eatSpace())return null;if(t.match(/[01]+b\b/i)||t.match(/\d[a-f\d]*h\b/i)||t.match(/\d+\b/))return"number";if(t.match(/'[^'\n]'/))return"character";if(t.eat('"'))return t.eatWhile(/[^"\n]/),t.eat('"'),"string";if(t.eat(/[*+-]/))return"operator";if(t.eat(/[(),[\]]/))return"punctuation";if(t.eat("?"))return"unassigned";if(t.eat(";"))return t.skipToEnd(),"comment";if(t.eat(/[a-z_]/i)){t.eatWhile(/\w/);const e=t.current().toUpperCase();return e==="ORG"||e==="END"?"special":e==="OFFSET"?"offset":e==="BYTE"||e==="WORD"||e==="PTR"?"ptr-size":BS.includes(e)?"data-directive":jS.includes(e)?"instruction":Tg.includes(e)?"register":t.eat(":")?"label":"identifier"}return t.next(),null},languageData:{commentTokens:{line:";"},closeBrackets:{brackets:["(","[",'"']}},tokenTable:ci}),lne=JQ(c0.define([{tag:ci.character,class:"text-orange-300"},{tag:ci.comment,class:"text-stone-500 italic"},{tag:ci["data-directive"],class:"text-rose-400/80"},{tag:ci.instruction,class:"text-mantis-400"},{tag:ci.number,class:"text-cyan-300/60"},{tag:ci.operator,class:"text-rose-300"},{tag:ci.offset,class:"text-rose-400/80 italic"},{tag:ci["ptr-size"],class:"text-rose-400/80 italic"},{tag:ci.punctuation,class:"text-stone-600"},{tag:ci.register,class:"text-emerald-400/80"},{tag:ci.special,class:"text-yellow-300/80"},{tag:ci.string,class:"text-orange-300"},{tag:ci.unassigned,class:"text-rose-400/80"}])),cne=Zte(t=>{const e=t.state.doc.toString(),n=IM(e);if(n.success)return q.set(V1,0),[];const i=bi().language,r=n.errors.map(s=>{var l,c;const o=((l=s.position)==null?void 0:l.start)??0,a=((c=s.position)==null?void 0:c.end)??e.length;return{message:s.translate(i),severity:"error",from:o,to:a}});return q.set(V1,r.length),r},{delay:200});function une(){return new PQ(ane,[lne,cne])}function _L({className:t}){const[e,n]=g.useState(),i=WV(),r=g.useCallback(s=>{s&&n(s)},[]);return g.useEffect(()=>{if(e)return window.codemirror=new Pe({state:Ye.create({doc:cH(),extensions:[Ye.tabSize.of(2),UM.of(Ye.readOnly.of(!1)),uH,A7(),TW,T7(),n7(),See(),KF(),Pe.domEventHandlers({drop:s=>s.preventDefault()}),Ye.allowMultipleSelections.of(!0),l7(),uR.of([{key:"Escape",run:s=>(s.dispatch({selection:re.create([s.state.selection.main],0)}),!0)},{key:"Tab",run:s=>s.state.selection.ranges.some(o=>!o.empty)?F1(s):(s.dispatch(s.state.update(s.state.replaceSelection(" ".repeat(s.state.tabSize)),{scrollIntoView:!0,userEvent:"input"})),!0)},...sne]),une()]}),parent:e}),()=>{var s;return(s=window.codemirror)==null?void 0:s.destroy()}},[e]),b.jsxs("div",{className:He("flex flex-col",t),children:[b.jsx("div",{ref:r,className:"grow overflow-auto font-mono",style:{fontSize:`${i}px`,lineHeight:1.25}}),b.jsx(one,{})]})}function dne(){const t=DS(),e=St(),n=qV(),i=zB("(max-width: 640px)"),{updateServiceWorker:r}=GB({onNeedRefresh(){gi({title:e("update.update-available"),action:b.jsx(DI,{altText:e("update.reload"),onClick:()=>r(!0),children:e("update.reload")}),duration:1/0})}});return b.jsxs("div",{className:"flex h-screen w-screen flex-col bg-stone-900 text-white",lang:t,style:{filter:n},children:[b.jsx(_Y,{}),i?b.jsx(hne,{}):b.jsx(fne,{}),b.jsx(pH,{})]})}function fne(){const[t]=Tu($k);return b.jsxs(qO,{autoSaveId:"layout",direction:"horizontal",tagName:"main",className:"overflow-auto px-2",children:[b.jsx(sm,{id:"panel-editor",order:1,minSize:30,tagName:"section",className:"rounded-lg border border-stone-600 bg-stone-800",children:b.jsx(_L,{className:"h-full w-full"})}),b.jsx(xb,{className:"w-2"}),b.jsx(sm,{id:"panel-computer",order:2,minSize:20,tagName:"section",className:"computer-background rounded-lg border border-stone-600",children:b.jsx(u3,{})}),t&&b.jsxs(b.Fragment,{children:[b.jsx(xb,{className:"w-2"}),b.jsx(sm,{id:"panel-settings",order:3,minSize:30,tagName:"section",className:"rounded-lg border border-stone-600 bg-stone-800",children:b.jsx(yI,{className:"h-full w-full"})})]})]})}function hne(){const t=St(),[e,n]=g.useState("editor"),[i,r]=Tu($k),s=i?"settings":e,o=a=>{i&&r(!1),n(a)};return b.jsx(nB,{value:s,onValueChange:o,asChild:!0,children:b.jsxs(b.Fragment,{children:[b.jsx(X0,{value:"editor",asChild:!0,children:b.jsx("section",{className:"mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden",children:b.jsx(_L,{className:"h-full w-full"})})}),b.jsx(X0,{value:"computer",asChild:!0,children:b.jsx("section",{className:"computer-background mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden",children:b.jsx(u3,{})})}),b.jsx(X0,{value:"settings",asChild:!0,children:b.jsx("section",{className:"mx-2 grow overflow-hidden rounded-lg border border-stone-600 bg-stone-800 data-[state=inactive]:hidden",children:b.jsx(yI,{className:"h-full w-full"})})}),b.jsxs(rB,{className:"grid grid-cols-2 gap-2 p-2",children:[b.jsxs(qC,{value:"editor",className:"inline-flex items-center justify-center rounded-lg py-2 text-sm font-semibold text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-stone-700 data-[state=active]:text-white",children:[b.jsx("span",{className:"icon-[lucide--file-terminal] mr-2 h-4 w-4"}),t("control.tabs.editor")]}),b.jsxs(qC,{value:"computer",className:"inline-flex items-center justify-center rounded-lg py-2 text-sm font-semibold text-stone-400 transition-colors hover:bg-stone-800 hover:text-white data-[state=active]:bg-stone-700 data-[state=active]:text-white",children:[b.jsx("span",{className:"icon-[lucide--computer] mr-2 h-4 w-4"}),t("control.tabs.computer")]})]})]})})}function pne(){const{toastList:t}=aH();return b.jsxs(XY,{children:[t.map(({id:e,title:n,description:i,action:r,variant:s,otherProps:o})=>b.jsxs(MI,{...o,variant:s,children:[b.jsxs("div",{className:"grid gap-1",children:[n&&b.jsx(LI,{children:n}),i&&b.jsx(BI,{children:i})]}),r,b.jsx(II,{})]},e)),b.jsx(RI,{})]})}window.codemirror=null;Cw.createRoot(document.getElementById("root")).render(b.jsx(Wt.StrictMode,{children:b.jsxs(_6,{client:WM,children:[b.jsx(VU,{children:b.jsx(dne,{})}),b.jsx(pne,{})]})}));
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
